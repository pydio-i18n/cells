(()=>{"use strict";var e={689:e=>{e.exports=require("react")}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{r.r(n),r.d(n,{HomeDashboard:()=>ke});var e=r(689),t=r.n(e);const o=require("pydio");var i=r.n(o);const a=require("material-ui"),l=require("material-ui/styles");var c=r(689),s=function(e){var t,r=e.pydio,n=e.pluginName,o=e.pluginParameter,i=e.style,a=e.darkMode,l=e.className,s=r.Registry.getPluginConfigs(n).get(o);return s||(s=r.Registry.getDefaultImageFromParameters(n,o)),s&&(0===s.indexOf("plug/")?(-1!==s.indexOf("[mode]")&&(s=s.replace("[mode]",a?"dark":"light")),t=s):t=r.Parameters.get("ENDPOINT_REST_API")+"/frontend/binaries/GLOBAL/"+s),c.createElement("img",{alt:"application logo",src:t,style:i,className:l})};function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===u(o)?o:String(o)),n)}var o}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var m=i().requireLib("boot"),y=m.AsyncComponent,h=m.PydioContextConsumer,b=i().requireLib("workspaces"),g=b.ThemeTogglerCard,v=b.Scheme,w=function(e){var t=function(e){return React.createElement("div",{style:{position:"absolute",top:52,left:20,width:80,display:"flex",transformOrigin:"left",transform:"rotate("+-e+"deg)"}},React.createElement("span",{style:{flex:1}}),React.createElement("span",{className:"mdi mdi-dots-horizontal",style:{opacity:.5,marginRight:5}}),React.createElement("span",{style:{display:"inline-block",transform:"rotate("+e+"deg)"},className:"mdi mdi-account"}))};return React.createElement("div",null,React.createElement("p",null,e.message("workspaces.1")),React.createElement(v,{dimension:130},React.createElement("span",{style:{position:"absolute",top:52,left:20},className:"mdi mdi-network"}),t(30),t(0),t(-30)),React.createElement("p",null,e.message("workspaces.2")),React.createElement(v,{dimension:130},React.createElement("span",{className:"mdi mdi-account",style:{position:"absolute",left:54,top:32}}),React.createElement("div",{style:{position:"absolute",top:60,left:30}},React.createElement("span",{className:"mdi mdi-folder"}),React.createElement("span",{className:"mdi mdi-arrow-right"}),React.createElement("span",{className:"mdi mdi-network"}))))},S=function(e){return React.createElement("div",null,React.createElement("p",null,e.message("globsearch.1")),React.createElement(v,{style:{fontSize:10,padding:25},dimension:130},React.createElement("div",{style:{boxShadow:"2px 2px 0px #CFD8DC"}},React.createElement("div",{style:{backgroundColor:"#03a9f4",color:"white",borderRadius:"3px 3px 0 0"}},React.createElement("span",{className:"mdi mdi-magnify"}),e.message("infopanel.search"),"..."),React.createElement("div",{style:{backgroundColor:"white"}},React.createElement("div",null,React.createElement("span",{className:"mdi mdi-folder"})," ",e.message("infopanel.folder")," 1 "),React.createElement("div",null,React.createElement("span",{className:"mdi mdi-folder"}),"  ",e.message("infopanel.file")," 2"),React.createElement("div",null,React.createElement("span",{className:"mdi mdi-file"})," ",e.message("infopanel.file")," 3")))),React.createElement("p",null,e.message("globsearch.2")))},O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(o){var r=d(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t)).state={started:!(e.pydio.user&&!e.pydio.user.getPreference("gui_preferences",!0)["UserAccount.WelcomeModal.Shown"])},r}return t=a,r=[{key:"componentDidMount",value:function(){var e=this;this.state.started||pydio.UI.openComponentInModal("UserAccount","WelcomeModal",{onRequestStart:function(t){t?e.discard(!0):(e.discard(!1),e.setState({started:!0}))}})}},{key:"discard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,r=t.pydio,n=t.onFinish,o=r.user,i=o.getPreference("gui_preferences",!0);i["UserAccount.WelcomeModal.Shown"]=!0,e&&(i["WelcomeComponent.MUITour"]=!0,i["WelcomeComponent.Pydio8.TourGuide.Welcome"]=!0,n&&n()),o.setPreference("gui_preferences",i,!0),o.savePreference("gui_preferences")}},{key:"render",value:function(){var e=this;if(!this.state.started)return null;var t=this.props.getMessage,r=function(e){return t("ajax_gui.tour."+e)},n=[{title:r("theme.title"),text:React.createElement(g,{message:r}),selector:".mdi.mdi-theme-light-dark",position:"right-end"},{title:r("workspaces.title"),text:React.createElement(w,{message:r}),selector:".mdi-folder-multiple-outline",position:"right"},{title:r("globsearch.title"),text:React.createElement(S,{message:r}),selector:".home-search-form",position:"bottom"}];return React.createElement(y,{namespace:"PydioWorkspaces",componentName:"TourGuide",ref:"joyride",steps:n,run:!0,autoStart:!0,debug:!1,callback:function(t){"step:after"===t.type&&t.index===n.length-1&&e.discard(!0)},type:"continuous"})}}],r&&p(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(e.Component);O=h(O);const E=require("pydio/util/path");var x=r.n(E);const P=require("pydio/util/dom");var R=r.n(P);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==j(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===j(o)?o:String(o)),n)}var o}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var _=i().requireLib("components"),M=_.SimpleList,D=_.NodeListCustomProvider,N=i().requireLib("boot"),L=N.PydioContextConsumer,z=N.moment,I=i().requireLib("workspaces"),q=I.UnifiedSearchForm,W=I.Facets,B=I.FilePreview,F=I.AdvancedChips,A=i().requireLib("hoc").withSearch,H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(c,e);var r,n,o,i,l=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(o);if(i){var r=k(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),l.call(this,e)}return r=c,n=[{key:"componentDidMount",value:function(){var e=this.props.onFocusChange;this._escListener=function(t){"Escape"===t.key&&e(!1)},document.addEventListener("keyup",this._escListener)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this._escListener)}},{key:"update",value:function(e){(0,this.props.searchTools.setValues)({basenameOrContent:e})}},{key:"render",value:function(){var e=this.props,r=e.searchTools,n=e.searchTools,o=n.facets,i=n.activeFacets,l=n.toggleFacet,c=n.loading,s=n.dataModel,u=(n.empty,this.props),p=u.style,f=u.zDepth,d=u.pydio,m=u.fullScreen,y=u.fullScreenTransition,h=u.onFocusChange,b=u.muiTheme,g="mui3"===b.userTheme,v=b.palette.mui3,w="rgba(0,0,0,.53)",S={mainContainer:{position:"absolute",top:m?0:199,left:g?74:0,right:0,bottom:0,transition:"all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms",display:"flex",flexDirection:"column",alignItems:"center"},searchContainer:{width:"100%",zIndex:1,display:"flex",flexDirection:"column",alignItems:"center",background:g&&m?v["surface-1"]:"transparent",padding:m?g?"10px 50px 10px 10px":"10px 50px":0},textFieldContainer:{width:"100%",maxWidth:m?1e4:700,display:"flex",alignItems:"center",background:g?v["surface-variant"]:"#eceff1",height:m?40:50,padding:"2px 4px",borderRadius:50,marginTop:m?0:-25},textField:{flex:1},textInput:{color:"inherit"},textHint:{color:w,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%"},magnifier:{color:w,fontSize:20,padding:"14px 8px"},close:{position:"absolute",right:2,top:6,zIndex:2},searchForm:{mainStyle:{backgroundColor:"transparent",height:48,border:0},completeMenuStyle:{width:"100%"},inputStyle:{fontSize:18},hintStyle:{fontSize:18},magnifierStyle:{fontSize:20,marginRight:10},filterButton:{color:b.palette.primary1Color,fontSize:22,width:28,height:28,padding:3},filterButtonActive:{}},facets:{container:{width:230,overflowY:"auto",background:v["surface-2"],color:g?v["on-surface-variant"]:"#5c7784",borderRadius:0,borderRight:g?"1px solid "+v["outline-variant-50"]:void 0,paddingLeft:16,paddingRight:16,paddingTop:10},header:{fontWeight:500,padding:"10px 0",fontSize:15},subHeader:{fontWeight:500,textTransform:"uppercase",padding:"12px 0"}}};return t().createElement(a.Paper,{style:p,zDepth:f,className:"vertical-layout home-center-paper",rounded:!1},t().createElement("div",{style:S.mainContainer},t().createElement(a.Paper,{zDepth:m?1:0,rounded:!1,style:S.searchContainer},t().createElement(a.Paper,{zDepth:0,style:S.textFieldContainer,className:"home-search-form"},t().createElement(q,{style:{flex:1},active:m,preventOpen:y,pydio:d,formStyles:S.searchForm,searchTools:r,onRequestOpen:function(){return h(!0)},onRequestClose:function(){return h(!1)}}),c&&t().createElement("div",{style:{marginTop:14,marginRight:8}},t().createElement(a.CircularProgress,{size:20,thickness:2}))),m&&t().createElement(F,{searchTools:r,containerStyle:{width:"100%",paddingTop:11,marginBottom:-4}})),m&&t().createElement("div",{className:"layout-fill",style:{width:"100%",display:"flex"}},R().getViewportWidth()>758&&t().createElement(W,{pydio:d,facets:o,activeFacets:i,onToggleFacet:l,emptyStateView:t().createElement("div",{style:{fontWeight:500,padding:"10px 0px",fontSize:15}},d.MessageHash["user_home.search.facets.title"]),styles:S.facets,zDepth:g?0:void 0}),t().createElement(D,{containerStyle:{flex:1,marginLeft:10},className:"files-list vertical_fit",elementHeight:M.HEIGHT_TWO_LINES,entryRenderIcon:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t().createElement(B,{loadThumbnail:!r.parentIsScrolling,node:e})},entryRenderActions:function(){return null},entryRenderSecondLine:function(e){var r=e.getPath(),n=e.getMetadata(),o=new Date;o.setTime(1e3*parseInt(n.get("ajxp_modiftime")));var i,a,l=z(o).fromNow();return parseInt(e.getMetadata().get("bytesize"))&&(i=x().roundFileSize(parseInt(e.getMetadata().get("bytesize")))),x().getDirname(r)&&(a=d.MessageHash["user_home.search.result.location"]+": "+x().getDirname(r)||"/"),t().createElement("div",null,l," ",i?t().createElement("span",null,"• ",i):""," ",a?t().createElement("span",null,"• ",a):null)},entryRenderGroupHeader:function(e,r){return t().createElement("div",{style:{fontSize:13,color:"#93a8b2",fontWeight:500,cursor:"pointer"},onClick:function(){return d.triggerRepositoryChange(e)}},r)},presetDataModel:s,presetRootNode:s.getSearchNode(),openCollection:function(e){d.goTo(e)},nodeClicked:function(e){d.goTo(e)},defaultGroupBy:"repository_id",groupByLabel:"repository_display",emptyStateProps:{iconClassName:"",primaryTextId:c?"searchengine.searching":478,style:{backgroundColor:"transparent"}}})),t().createElement("div",{style:{display:m?"none":"block",flex:1,overflowY:"auto",marginTop:40},id:"history-block"},this.props.children)),m&&t().createElement(a.IconButton,{iconClassName:"mdi mdi-close",style:S.close,onClick:function(){return h(!1)},tooltipPosition:"bottom-left",tooltip:d.MessageHash[86]}))}}],n&&T(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(e.Component);H=L(H=A(H,"main","all")),H=(0,l.muiThemeable)()(H),require("pydio/model/node");const G=require("pydio/model/meta-node-provider");var U=r.n(G);const J=require("pydio/http/api");var V=r.n(J);const X=require("cells-sdk");function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){Q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Q(e,t,r){return(t=le(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}function $(e,t){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$(e,t)}function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=re(e);if(t){var o=re(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return te(e)}(this,r)}}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,le(n.key),n)}}function ae(e,t,r){return t&&ie(e.prototype,t),r&&ie(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function le(e){var t=function(e,t){if("object"!==ne(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ne(t)?t:String(t)}var ce=i().requireLib("boot"),se=ce.PydioContextConsumer,ue=ce.moment,pe=i().requireLib("workspaces").FilePreview,fe=(i().requireLib("PydioActivityStreams").ASClient,i().requireLib("hoc")),de=fe.PlaceHolder,me=fe.PhTextRow,ye=fe.PhRoundShape,he=function(){function e(t,r){oe(this,e),this.pydio=t,this.stater=r}return ae(e,[{key:"m",value:function(e){return this.pydio.MessageHash["user_home.reco."+e]||e}},{key:"load",value:function(){var e=this,t=new X.GraphServiceApi(V().getRestClient()),r=new X.RestRecommendRequest;return r.Limit=8,t.recommend(r).then((function(t){return(t.Nodes||[]).map((function(t){var r;if(t.AppearsIn?r=t.AppearsIn[0].WsSlug:t.MetaStore.ws_slug&&(r=JSON.parse(t.MetaStore.ws_slug)),t.MetaStore["reco-annotation"]){var n=JSON.parse(t.MetaStore["reco-annotation"]);if(0===n.indexOf("activity:")){var o=n.replace("activity:","");t.MetaStore.card_legend=JSON.stringify(ue(1e3*o).fromNow())}else"bookmark"===n?t.MetaStore.card_legend=JSON.stringify(e.m("bookmark")):"workspace"===n&&('"ROOM"'===t.MetaStore.ws_scope?(t.MetaStore.card_legend=JSON.stringify(e.m("cell")),t.MetaStore.fonticon=JSON.stringify("icomoon-cells")):t.MetaStore.card_legend=JSON.stringify(e.m("workspace")))}return U().parseTreeNode(t,r)}))}))}}]),e}(),be=function(e){Z(n,e);var r=ee(n);function n(e){var t;return oe(this,n),(t=r.call(this,e)).state={opacity:0},t}return ae(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({opacity:1})}),200)}},{key:"render",value:function(){var e=this,r=this.state,n=r.opacity,o=r.hover,i=this.props.muiTheme,l={paper:{width:140,height:160,margin:10,padding:6,borderRadius:6,boxShadow:o?"0px 15px 30px -6px rgba(0, 0, 0, .15)":"-1px 0px 15px 0px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",cursor:"pointer",alignItems:"center",textAlign:"center",opacity:n,transition:"all 1000ms cubic-bezier(0.23, 1, 0.32, 1) 0ms"},preview:{boxShadow:"0 0 0 1px #edf0f2",borderRadius:6,width:"100%",flex:1,alignItems:"center",justifyContent:"center",display:"flex"},fontOverlay:{position:"absolute",bottom:0,right:5},label:{fontSize:14,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%"},title:{fontSize:14,marginTop:10},legend:{fontSize:11,fontWeight:500,color:"#9E9E9E"}};if("mui3"===i.userTheme){var c=i.palette.mui3;l.paper=K(K({},l.paper),{},{width:160,height:190,borderRadius:12,boxShadow:null,margin:4,padding:0,paddingBottom:6,background:c["surface-1"],color:c["on-surface"],border:"1px solid "+c["outline-variant-50"]}),l.preview=K(K({},l.preview),{},{borderRadius:12,boxShadow:null}),l.label=K(K({},l.label),{},{paddingLeft:10,textAlign:"left"}),l.title.fontWeight=500,l.legend.color=c["on-surface-variant"],l.legend.fontWeight=400}var s=this.props,u=s.title,p=s.legend,f=s.node,d=s.pydio;return t().createElement(a.Paper,{zDepth:0,style:l.paper,onClick:function(){d.goTo(f)},onMouseOver:function(){return e.setState({hover:!0})},onMouseOut:function(){return e.setState({hover:!1})},title:f&&f.getLabel()},f&&t().createElement(pe,{node:f,style:l.preview,mimeFontStyle:{fontSize:40},loadThumbnail:!0,mimeFontOverlay:!0,mimeFontOverlayStyle:l.fontOverlay}),t().createElement("div",{style:K(K({},l.label),l.title)},u),t().createElement("div",{style:K(K({},l.label),l.legend)},p))}}]),n}(t().Component),ge=function(e){Z(n,e);var r=ee(n);function n(e){var t;return oe(this,n),(t=r.call(this,e)).loader=new he(e.pydio,te(t)),t.state={nodes:[],loading:!1},t}return ae(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.loader.load().then((function(t){e.setState({nodes:t,loading:!1})})).catch((function(t){console.error(t),e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this.props,r=e.pydio,n=e.style,o=e.muiTheme,i=this.state,a=i.nodes,l=i.loading,c={margin:10,width:140,height:160,padding:6,display:"flex",flexDirection:"column",alignItems:"center",borderRadius:6};"mui3"===o.userTheme&&(c.width=160,c.height=190,c.margin=4,c.borderRadius=12);var s=t().createElement("div",{style:{display:"flex",flexWrap:"wrap"}},[0,1,2,3,4,5,6,7].map((function(){return t().createElement("div",{style:c},t().createElement(ye,{style:{width:"100%",height:100,borderRadius:c.borderRadius}}),t().createElement(me,null),t().createElement(me,null))})));if(!r.user||r.user.lock)return t().createElement("div",null);var u={},p=[];return a.forEach((function(e){var n=e.getMetadata().get("uuid");u[n]||p.length>=8||(u[n]=n,p.push(t().createElement(be,{key:n,pydio:r,muiTheme:o,node:e,title:e.getLabel(),legend:e.getMetadata().get("card_legend")})))})),t().createElement("div",{style:K({display:"flex",flexWrap:"wrap",justifyContent:"center"},n)},t().createElement(de,{ready:!l,showLoadingAnimation:!0,customPlaceholder:s},p))}}]),n}(t().Component);ge=se(ge);const ve=require("lodash");function we(e){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we(e)}function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Se.apply(this,arguments)}function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){xe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xe(e,t,r){return(t=Re(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Re(n.key),n)}}function Re(e){var t=function(e,t){if("object"!==we(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==we(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===we(t)?t:String(t)}function je(e,t){return je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},je(e,t)}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(e)}var Ce=i().requireLib("workspaces").MasterLayout,ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&je(e,t)}(c,e);var r,n,o,i,l=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Te(o);if(i){var r=Te(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===we(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=l.call(this,e)).state={unreadStatus:0,drawerOpen:!0},t.showTutorial()||(t.closeTimeout=setTimeout((function(){t.setState({drawerOpen:!1})}),2500)),t._resizeEventDebounced=(0,ve.debounce)((function(){window.dispatchEvent(new Event("resize")),t.setState({fullScreenTransition:!1})}),350),t}return r=c,(n=[{key:"showTutorial",value:function(){var e=this.props.pydio,t=e.user?e.user.getPreference("gui_preferences",!0):[];return e.getPluginConfigs("gui.ajax").get("ENABLE_WELCOME_TOUR")&&!t["WelcomeComponent.Pydio8.TourGuide.Welcome"]}},{key:"openDrawer",value:function(e){e.stopPropagation(),this.clearCloseTimeout(),this.setState({drawerOpen:!0})}},{key:"clearCloseTimeout",value:function(){this.closeTimeout&&clearTimeout(this.closeTimeout)}},{key:"render",value:function(){var e,r=this,n=this.props,o=n.pydio,i=n.muiTheme,l=this.state,c=l.drawerOpen,u=l.fullScreen,p=l.fullScreenTransition,f=new a.Color(i.appBar.color),d="mui3"===i.userTheme,m=i.palette.mui3,y=i.buildFSTemplate({});y.appBarStyle={backgroundColor:i.darkMode?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.40)",height:u?0:200,display:"flex",alignItems:"center",justifyContent:"center"},y.buttonsStyle={color:i.appBar.textColor},y.iconButtonsStyle={color:f.darken(.4).toString()},y.wsListsContainerStyle={flex:1,display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:d?m.surface:"white",overflow:"hidden"},this.showTutorial()&&(e=t().createElement(O,{ref:"welcome",pydio:o,onFinish:function(){r.closeTimeout=setTimeout((function(){r.setState({drawerOpen:!1})}),1500)}}));var h={};"mui3"!==i.userTheme&&(h={position:"absolute",bottom:0,top:0,zIndex:1e3,transform:c?"translateX(0px)":"translateX(-250px)"});var b={style:Ee(Ee({},y.leftPanel.masterStyle),h),headerHeight:72,onMouseOver:function(){r.clearCloseTimeout()},userWidgetProps:{mergeButtonInAvatar:!0,popoverDirection:"left",actionBarStyle:{marginTop:0},style:{height:72,display:"flex",alignItems:"center",boxShadow:"none",background:"transparent"}}};return t().createElement(Ce,{pydio:o,classes:["vertical_fit","react-fs-template","user-dashboard-template"],style:Ee(Ee({},y.masterStyle),{},{backgroundColor:"transparent"}),tutorialComponent:e,leftPanelProps:b,drawerOpen:c,onCloseDrawerRequested:function(){void 0===e&&r.setState({drawerOpen:!1})}},t().createElement(a.Paper,{zDepth:0,style:Ee({},y.appBarStyle),rounded:!1},!d&&t().createElement("span",{className:"drawer-button",style:{position:"absolute",top:6,left:2,zIndex:2}},t().createElement(a.IconButton,{iconStyle:{color:null},iconClassName:"mdi mdi-menu",onClick:this.openDrawer.bind(this)})),t().createElement("div",{style:{width:250,display:"flex",justifyContent:"center"}},t().createElement(s,{className:"home-top-logo",style:{maxHeight:100},pydio:this.props.pydio,darkMode:i.darkMode,pluginName:"gui.ajax",pluginParameter:"CUSTOM_DASH_LOGO"}))),t().createElement(H,Se({zDepth:0},this.props,{style:y.wsListsContainerStyle,fullScreen:u,fullScreenTransition:p,onFocusChange:function(e){e!==r.state.fullScreen&&r.setState({fullScreen:e,fullScreenTransition:!0},r._resizeEventDebounced)}}),t().createElement(ge,Se({},this.props,{style:{maxWidth:680,width:"100%",padding:"8px 0"},emptyStateProps:{style:{backgroundColor:"transparent"}}}))))}}])&&Pe(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);ke=(0,l.muiThemeable)()(ke)})(),window.WelcomeComponents=n})();