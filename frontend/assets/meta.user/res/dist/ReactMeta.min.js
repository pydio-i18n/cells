(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Callbacks:()=>a,InfoPanel:()=>un,MetaClient:()=>d,Renderer:()=>Nt,TypeEditor:()=>Gn,UserMetaDialog:()=>jn,UserMetaPanel:()=>Xt});const n=require("pydio");var r=e.n(n);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"editMeta",value:function(){var e=r().getInstance();e.UI.openComponentInModal("ReactMeta","UserMetaDialog",{dialogTitleId:489,selection:e.getUserSelection()})}}],null&&o(t.prototype,null),n&&o(t,n),e}();const i=require("react");var l=e.n(i);const c=require("material-ui"),u=require("pydio/http/api");var s=e.n(u);const f=require("cells-sdk");function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=s().getRestClient()}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return e.Instance||(e.Instance=new e),e.Instance}}],(n=[{key:"saveMeta",value:function(e,t){var n=this,r=new f.UserMetaServiceApi(this.client);return new Promise((function(o,a){n.loadConfigs().then((function(n){var i=[];e.map((function(e){var o=new f.IdmUpdateUserMetaRequest;o.MetaDatas=[],o.Operation="PUT",n.forEach((function(n,r){if(t.has(r)){var a=new f.IdmUserMeta;a.NodeUuid=e.getMetadata().get("uuid"),a.Namespace=r,a.JsonValue=JSON.stringify(t.get(r)),a.Policies=[f.ServiceResourcePolicy.constructFromObject({Action:"READ",Subject:"*",Effect:"allow"}),f.ServiceResourcePolicy.constructFromObject({Action:"WRITE",Subject:"*",Effect:"allow"})],o.MetaDatas.push(a)}})),i.push(r.updateUserMeta(o))})),Promise.all(i).then((function(){o()})).catch((function(e){a(e)}))}))}))}},{key:"clearConfigs",value:function(){this.configs=null}},{key:"loadConfigs",value:function(){var e=this;return this.configs?Promise.resolve(this.configs):(this.promise||(this.promise=new Promise((function(t){var n={},r=new Map;new f.UserMetaServiceApi(e.client).listUserMetaNamespace().then((function(o){o.Namespaces.map((function(e){var t=e.Namespace,r={label:e.Label,indexable:e.Indexable,order:e.Order,visible:!0,readonly:!e.PoliciesContextEditable};if(e.JsonDefinition){var o=JSON.parse(e.JsonDefinition);Object.keys(o).map((function(e){"hide"===e?r.visible=!o[e]:r[e]=o[e]}))}n[t]=r}));var a=Object.entries(n).map((function(e){return e[1].ns=e[0],e[1]}));a.sort((function(e,t){var n=e.order||0,r=t.order||0;return n>r?1:n===r?0:-1})),a.map((function(e){if("choice"===e.type&&e.data&&e.data.split){var t=e.data.split(",").map((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.split("|"),2);return{key:t[0],value:t[1]}}));e.data={items:t}}r.set(e.ns,e)})),e.configs=r,t(r),e.promise=null})).catch((function(){t(new Map),e.promise=null}))}))),this.promise)}},{key:"listTags",value:function(e){var t=this;return new Promise((function(n){new f.UserMetaServiceApi(t.client).listUserMetaTags(e).then((function(e){e.Tags?n(e.Tags):n([])})).catch((function(e){n([])}))}))}},{key:"createTag",value:function(e,t){return new f.UserMetaServiceApi(this.client).putUserMetaTag(e,f.RestPutUserMetaTagRequest.constructFromObject({Namespace:e,Tag:t}))}}])&&y(t.prototype,n),r&&y(t,r),e}();function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function O(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(c,t);var n,r,o,a,i=(o=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t,n,r=g(o);if(a){var i=g(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return t=this,!(n=e)||"object"!==m(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):n});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).state={value:t.props.value||0,configs:t.props.configs||new Map,getRealValue:function(){var e=t.props,n=e.node,r=e.column;return n.getMetadata().get(r.name)}},t}return n=c,(r=[{key:"componentDidMount",value:function(){var e=this;this.props.configs||d.getInstance().loadConfigs().then((function(t){e.setState({configs:t})}))}},{key:"render",value:function(){return l().createElement(e,h({},this.props,this.state))}}])&&b(n.prototype,r),c}(l().Component)}function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var P={fontSize:20,color:"#FBC02D",marginTop:6,marginBottom:6};const k=O(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t,n,a=E(r);if(o){var i=E(this).constructor;e=Reflect.construct(a,arguments,i)}else e=a.apply(this,arguments);return t=this,!(n=e)||"object"!==w(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):n});function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.getRealValue,n=e.size,r=t()||0,o=[0,1,2,3,4].map((function(e){return l().createElement("span",{key:"star-"+e,className:"mdi mdi-star"+(r>e?"":"-outline")})})),a="small"===n?{color:P.color}:P;return l().createElement("span",{style:a},o)}}])&&j(t.prototype,n),i}(l().Component));function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},M(e,t)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}const _=O(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t,n,a=C(r);if(o){var i=C(this).constructor;e=Reflect.construct(a,arguments,i)}else e=a.apply(this,arguments);return t=this,!(n=e)||"object"!==T(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):n});function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e,t=this.props,n=t.configs,r=t.getRealValue,o=t.column,a=r(),i=r(),c=n.get(o.name);if(c&&c.data&&c.data.items){var u=c.data.items.filter((function(e){return e.key===a}));u.length&&(i=u[0].value,u[0].color&&(e=l().createElement("span",{className:"mdi mdi-label",style:{color:u[0].color,marginRight:5}})))}return l().createElement("span",null,e,i)}}])&&x(t.prototype,n),i}(l().Component));function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},I(e,t)}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}var V=function(){var e=r().getMessages();return{low:{label:e["meta.user.4"],sortValue:"5",color:"#66c"},todo:{label:e["meta.user.5"],sortValue:"4",color:"#69c"},personal:{label:e["meta.user.6"],sortValue:"3",color:"#6c6"},work:{label:e["meta.user.7"],sortValue:"2",color:"#c96"},important:{label:e["meta.user.8"],sortValue:"1",color:"#c66"}}};const A=O(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t,n,a=N(r);if(o){var i=N(this).constructor;e=Reflect.construct(a,arguments,i)}else e=a.apply(this,arguments);return t=this,!(n=e)||"object"!==R(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):n});function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=(0,this.props.getRealValue)(),t=V();if(e&&t[e]){var n=t[e];return l().createElement("span",null,l().createElement("span",{className:"mdi mdi-label",style:{color:n.color}})," ",n.label)}return l().createElement("span",null,e)}}])&&D(t.prototype,n),i}(l().Component));function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function L(){return L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L.apply(this,arguments)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t){return U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},U(e,t)}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}function W(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(c,t);var n,r,o,a,i=(o=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t,n,r=q(o);if(a){var i=q(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return t=this,!(n=e)||"object"!==B(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):n});function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var n=(t=i.call(this,e)).props,r=n.value,o=n.configs;return t.state={value:void 0===r?"":r,configs:o||new Map,getRealValue:function(){var e=t.props,n=e.node,r=e.column;return n.getMetadata().get(r.name)}},t}return n=c,r=[{key:"updateValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setState({value:e});var n=this.props,r=n.fieldname,o=n.onChange,a=n.onValueChange;if(o){var i={};i["ajxp_meta_"+r]=e,o(i,t)}else a&&a(r,e,t)}},{key:"componentDidMount",value:function(){var e=this;this.props.configs||d.getInstance().loadConfigs().then((function(t){e.setState({configs:t})}))}},{key:"componentWillReceiveProps",value:function(e,t){this.setState({value:void 0===e.value?"":e.value})}},{key:"render",value:function(){return l().createElement(e,L({},this.props,this.state,{updateValue:this.updateValue.bind(this)}))}}],r&&F(n.prototype,r),c}(l().Component)}const z=require("material-ui/styles");function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t){return Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Y(e,t)}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}var Q=r().requireLib("hoc").ThemedModernStyles,Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t,n,a=X(r);if(o){var i=X(this).constructor;e=Reflect.construct(a,arguments,i)}else e=a.apply(this,arguments);return t=this,!(n=e)||"object"!==J(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):n});function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.apply(this,arguments)}return t=i,n=[{key:"render",value:function(){var e=this.props,t=e.updateValue,n=e.value,r=void 0===n?0:n,o=e.search,a=e.label,i=e.muiTheme,c=Q(i),u=[-1,0,1,2,3,4].map((function(e){var n="star"+(-1===e?"-off":r>e?"":"-outline"),o=-1===e?{marginRight:5,cursor:"pointer"}:{cursor:"pointer"};return l().createElement("span",{key:"star-"+e,onClick:function(){return t(e+1,!0)},className:"mdi mdi-"+n,style:o})}));return o?l().createElement("div",{className:"advanced-search-stars",style:H(H(H({},c.div),{},{borderRadius:c.textFieldV1Search.inputStyle.borderRadius},P),{},{fontSize:18})},l().createElement("div",null,u)):l().createElement("div",{style:H(H({},c.textFieldV2.style),{},{borderBottom:c.fillBlockV2Right.borderBottom,marginBottom:6})},l().createElement("div",{style:{color:i.palette.mui3["on-surface-variant"],fontSize:12,padding:"3px 8px 0",lineHeight:"16px"}},a),l().createElement("div",{style:H(H({},P),{},{paddingLeft:6})},u))}}],n&&G(t.prototype,n),i}(l().Component);const ee=W((0,z.muiThemeable)()(Z));function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ne(){return ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ne.apply(this,arguments)}function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e){return function(e){if(Array.isArray(e))return le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t){return ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ue(e,t)}function se(e){return se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},se(e)}var fe=r().requireLib("hoc"),pe=fe.ModernSelectField,ye=fe.ThemedModernStyles,de=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t,n,a=se(r);if(o){var i=se(this).constructor;e=Reflect.construct(a,arguments,i)}else e=a.apply(this,arguments);return t=this,!(n=e)||"object"!==te(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):n});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={},t}return t=i,n=[{key:"changeSelector",value:function(e,t,n){this.props.updateValue(n,!0)}},{key:"componentDidMount",value:function(){var e=this,t=this.props.itemsLoader;t&&t((function(t,n,r,o){e.setState({menuItems:t,keys:n,stepper:r,labels:o})}))}},{key:"next",value:function(){}},{key:"render",value:function(){var e,t=this.state,n=t.stepper,r=t.labels,o=void 0===r?{}:r,a=t.keys,i=void 0===a?[]:a,u=this.props,s=u.value,f=u.label,p=u.updateValue,y=u.search,d=u.muiTheme;e=void 0===this.state.menuItems?ie(this.props.menuItems):ie(this.state.menuItems);var m=ye(d),h=m.fillBlockV2Right,b=m.fillBlockV2Left,v=m.selectFieldV1Search,g=m.selectFieldV2;e.unshift(l().createElement(c.MenuItem,{value:"",primaryText:""}));var O,w,j=y?oe({variant:"v1"},v):{variant:"v2"};if(n&&!y){var S=i.indexOf(s);S>0&&(O=o[i[S-1]]),S<i.length-1&&(w=o[i[S+1]]),j.style=oe(oe({},g.style),{},{borderRadius:0})}return l().createElement("div",{style:{display:"flex"}},n&&!y&&l().createElement("div",{style:oe(oe({},b),{},{marginRight:2,padding:"2px 4px"})},l().createElement(c.IconButton,{iconClassName:"mdi mdi-chevron-left",disabled:!O,tooltip:O,tooltipPosition:"bottom-right",onClick:function(){return p(i[i.indexOf(s)-1],!0)},style:{width:28,padding:"12px 0"}})),l().createElement("div",{style:{flex:1}},l().createElement(pe,ne({fullWidth:!0,value:s,hintText:f,onChange:this.changeSelector.bind(this)},j),e)),n&&!y&&l().createElement("div",{style:oe(oe({},h),{},{marginLeft:2,padding:"2px 4px"})},l().createElement(c.IconButton,{iconClassName:"mdi mdi-chevron-right",tooltip:w,disabled:!w,tooltipPosition:"bottom-left",onClick:function(){return p(i[i.indexOf(s)+1],!0)},style:{width:28,padding:"12px 0"}})))}}],n&&ce(t.prototype,n),i}(l().Component);const me=W((0,z.muiThemeable)()(de)),he=require("pydio/util/lang");var be=e.n(he);function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function ge(){return ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ge.apply(this,arguments)}function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t){return Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ee(e,t)}function Pe(e){return Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Pe(e)}var ke=r().requireLib("hoc"),Te=ke.ThemedModernStyles,xe=ke.ModernAutoComplete,Me=ke.colorsFromString,Ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(u,e);var t,n,o,a,i=(o=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t,n,r=Pe(o);if(a){var i=Pe(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return t=this,!(n=e)||"object"!==ve(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):n});function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var n=(t=i.call(this,e)).props,r=n.node,o=n.value,a=n.column;return t.state={loading:!1,dataSource:[],tags:r?r.getMetadata().get(a.name):o,searchText:""},t}return t=u,n=[{key:"componentDidMount",value:function(){this.getRealValue(),this.props.editMode&&this.load()}},{key:"componentWillReceiveProps",value:function(e){var t=e.node,n=e.value,r=e.column;t?this.setState({tags:t.getMetadata().get(r.name)}):n?this.setState({tags:n}):this.setState({tags:""}),e.editMode&&!this.state.loaded&&this.load()}},{key:"getRealValue",value:function(){var e=this.props,t=e.node,n=e.value,r=e.column;null==t?this.setState({tags:n}):this.setState({tags:t.getMetadata().get(r.name)})}},{key:"suggestionLoader",value:function(e){var t=this,n=this.props,r=n.skipAutoSuggest,o=n.fieldname,a=n.column,i=n.autoSuggestTagName;r?e([]):(this.setState({loading:this.state.loading+1}),d.getInstance().listTags(i||o||a.name).then((function(n){t.setState({loading:t.state.loading-1}),e(n)})))}},{key:"load",value:function(){this.setState({loading:!0}),this.suggestionLoader(function(e){var t=e.filter((function(e){return!!e})).map((function(e){return{value:l().createElement(c.MenuItem,{innerDivStyle:{paddingLeft:0,marginLeft:0},style:we({margin:"5px 10px",fontSize:14,fontWeight:500,paddingLeft:10,borderRadius:4},Me(e))},l().createElement("span",{className:"mdi mdi-label-outline",style:{marginRight:5}}),e),text:e}}));this.setState({dataSource:t,loading:!1,loaded:!0})}.bind(this))}},{key:"handleRequestDelete",value:function(e){var t=this,n=this.props.updateValue,r=this.state.tags.split(","),o=r.indexOf(e);r.splice(o,1),this.setState({tags:r.toString()},(function(){n(t.state.tags,!0)}))}},{key:"handleUpdateInput",value:function(e){this.setState({searchText:e})}},{key:"handleNewRequest",value:function(){var e=this,t=this.state,n=t.searchText,r=t.tags;if(n){var o=[];r&&r.split&&(o=r.split(",")),o.indexOf(n)>-1?this.setState({searchText:""}):(o.push(n),this.setState({searchText:"",tags:o.toString()},(function(){(0,e.props.updateValue)(e.state.tags,!0)})))}}},{key:"renderChip",value:function(e){var t=Me(e),n=t.color,r=t.backgroundColor,o={margin:2,borderRadius:"4px 16px 16px 4px"},a={color:n,fontWeight:500,paddingLeft:10,paddingRight:16};return this.props.editMode?l().createElement(c.Chip,{key:e,backgroundColor:r,labelStyle:a,style:o,onRequestDelete:this.handleRequestDelete.bind(this,e)},e):l().createElement(c.Chip,{key:e,backgroundColor:r,labelStyle:a,style:o},e)}},{key:"render",value:function(){var e,t,n=this,o=this.props,a=o.editMode,i=o.search,u=o.label,s=o.muiTheme,f=this.state,p=f.tags,y=f.searchText,d=[];p&&p.split&&(e=(d=p.split(",").map((function(e){return be().trim(e," ")})).filter((function(e){return!!e}))).map((function(e){return n.renderChip(e)})));var m=Te(s);if(a){var h=i?c.AutoComplete:xe,b=i?we({style:{marginBottom:-10}},m.textFieldV1Search):{hintText:u};t=l().createElement(h,ge({fullWidth:!0,hintText:r().getMessages()["meta.user.10"],searchText:y,onUpdateInput:this.handleUpdateInput.bind(this),onNewRequest:this.handleNewRequest.bind(this),dataSource:this.state.dataSource,filter:function(e,t){return 0===t.toLowerCase().indexOf(e.toLowerCase())&&-1===d.indexOf(t)},openOnFocus:!0,menuProps:{maxHeight:200,desktop:!0},listStyle:{paddingTop:5,paddingBottom:5},onClose:function(){y&&n.handleNewRequest()}},b))}else t=l().createElement("div",null);return l().createElement("div",{style:i?{marginBottom:8}:{}},t,e&&l().createElement("div",{style:{display:"flex",flexWrap:"wrap",zoom:.8,marginTop:i?8:0}},e))}}],n&&Se(t.prototype,n),u}(l().Component);const _e=W((0,z.muiThemeable)()(Ce));function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function De(){return De=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},De.apply(this,arguments)}function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){Ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t,n){return t&&Be(e.prototype,t),n&&Be(e,n),e}function Fe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}function Ue(e,t){return Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ue(e,t)}function qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r,o,a=We(e);if(t){var i=We(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return r=this,!(o=n)||"object"!==Re(o)&&"function"!=typeof o?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r):o}}function We(e){return We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},We(e)}var ze=r().requireLib("hoc"),Je=ze.ModernTextField,Ke=ze.ModernSelectField,He=ze.ThemedModernStyles,$e=ze.DatePicker,Ge=ze.TimePicker,Ye=r().requireLib("boot").moment,Xe=function(e){Fe(n,e);var t=qe(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Le(n,[{key:"render",value:function(){var e=this.props,t=e.getRealValue,n=e.configs,r=e.column,o=n.get(r.name),a="date",c="normal";o&&o.data&&(a=o.data.format||a,c=o.data.display||c);var u=t(),s=new Date(1e3*parseFloat(u));if(isNaN(s.getTime()))return l().createElement(i.Fragment,null,"[Invalid Date]");var f=new Ye(s);if("relative"===c)return l().createElement(i.Fragment,null,f.fromNow());switch(a){case"date":return l().createElement(i.Fragment,null,f.format("ll"));case"date-time":default:return l().createElement(i.Fragment,null,f.format("llll"));case"time":return l().createElement(i.Fragment,null,f.format("LT"))}}}]),n}(i.Component);Xe=O((0,z.muiThemeable)()(Xe));var Qe=function(e){Fe(n,e);var t=qe(n);function n(e){var r;return Ae(this,n),(r=t.call(this,e)).state={},r}return Le(n,[{key:"configAsState",value:function(e,t){e.has(t)&&this.setState(e.get(t).data)}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.fieldname,r=t.configs;r?this.configAsState(r,n):d.getInstance().loadConfigs().then((function(t){return e.configAsState(t,n)}))}},{key:"getDate",value:function(){var e,t=this.props.value,n="";if(!t)return{vDate:null,searchComp:n};t.indexOf&&["<",">"].indexOf(t.charAt(0))>-1?(n=t.charAt(0),"="===t.charAt(1)?(n+="=",e=parseFloat(t.substr(2))):e=parseFloat(t.substr(1))):e=parseFloat(t);var r=new Date(1e3*parseFloat(e));return isNaN(r.getTime())?{vDate:new Date(0),searchComp:n}:{vDate:r,searchComp:n}}},{key:"clear",value:function(){(0,this.props.updateValue)("")}},{key:"updateDate",value:function(e,t){var n=this.props,r=n.updateValue,o=n.search,a=this.getDate(),i=a.vDate,l=a.searchComp;i||(i=new Date(0)),"date-time"===t?(e.setHours(i.getHours()),e.setMinutes(i.getMinutes()),e.setSeconds(i.getSeconds())):(e.setHours(0),e.setMinutes(0),e.setSeconds(0)),r(o?l+""+parseInt(e/1e3):parseInt(e/1e3))}},{key:"updateTime",value:function(e){var t=this.props,n=t.updateValue,r=t.search,o=this.getDate(),a=o.vDate,i=o.searchComp;a||(a=new Date(0)),a.setHours(e.getHours()),a.setMinutes(e.getMinutes()),a.setSeconds(e.getSeconds()),n(r?i+""+parseInt(a/1e3):parseInt(a/1e3))}},{key:"updateComp",value:function(e){var t=this.props.updateValue,n=this.getDate().vDate;n||(n=new Date),t(e+""+parseInt(n/1e3))}},{key:"render",value:function(){var e=this,t=this.props,n=t.supportTemplates,r=t.search,o=t.updateValue,a=t.value,i=t.label,u=t.muiTheme,s=He(u);if(n)return l().createElement(Je,{value:a,fullWidth:!0,hintText:i,onChange:function(e,t){o(t)}});var f=this.state.format,p=void 0===f?"date":f,y=this.getDate(),d=y.vDate,m=y.searchComp,h=[];if(r){var b=s.selectFieldV1Search,v=Ne(Ne({},b.style),{},{borderRadius:0,marginTop:4});h.push(l().createElement("div",{style:{width:60,marginRight:0}},l().createElement(Ke,De({},b,{style:v,fullWidth:!0,value:m,onChange:function(t,n,r){return e.updateComp(r)}}),l().createElement(c.MenuItem,{value:"",primaryText:"="}),l().createElement(c.MenuItem,{value:">=",primaryText:">="}),l().createElement(c.MenuItem,{value:"<=",primaryText:"<="}),l().createElement(c.MenuItem,{value:">",primaryText:">"}),l().createElement(c.MenuItem,{value:"<",primaryText:"<"}))))}var g=r?Ne({},s.textFieldV1Search):Ne(Ne({},s.textFieldV2),{},{textFieldStyle:{height:52}});return"date"!==p&&"date-time"!==p||h.push(l().createElement("div",{style:{flex:3}},l().createElement($e,De({floatingLabelText:r?null:i+" (date)",hintText:r?"Date":null},g,{container:"inline",fullWidth:!0,value:d,onChange:function(t,n){return e.updateDate(n,p)},autoOk:"date"===p})))),"date-time"===p&&h.push(l().createElement("div",{style:{width:8}})),"time"!==p&&"date-time"!==p||h.push(l().createElement("div",{style:{flex:2}},l().createElement(Ge,De({floatingLabelText:r?null:i+" (time)",hintText:r?"Time":null},g,{dialogStyle:{zIndex:5e3},fullWidth:!0,value:d,onChange:function(t,n){return e.updateTime(n)},autoOk:"time"===p})))),!r&&d&&h.push(l().createElement("div",{style:Ne(Ne({cursor:"pointer"},s.fillBlockV2Right),{},{paddingTop:22,paddingRight:8}),onClick:function(){return e.clear()}},l().createElement(c.FontIcon,{className:"mdi mdi-close",color:"rgba(0,0,0,.5)"}))),l().createElement("div",{style:{display:"flex",alignItems:"center",marginBottom:r?null:6}},h)}}]),n}(i.Component);function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function et(){return et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},et.apply(this,arguments)}function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function at(e,t){return at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},at(e,t)}function it(e){return it=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},it(e)}Qe=W((0,z.muiThemeable)()(Qe));var lt=Pydio.requireLib("hoc").ThemedModernStyles,ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t,n,a=it(r);if(o){var i=it(this).constructor;e=Reflect.construct(a,arguments,i)}else e=a.apply(this,arguments);return t=this,!(n=e)||"object"!==Ze(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):n});function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.apply(this,arguments)}return t=i,n=[{key:"render",value:function(){var e=this.props,t=e.updateValue,n=e.value,r=e.search,o=e.muiTheme,a=lt(o),i=nt({},a.toggleFieldV1Search),u=n?"Yes":"No";r||(i=nt({},a.toggleFieldV2),u=this.props.label+" ("+u+")");var s=l().createElement(c.Toggle,et({toggled:n,onToggle:function(e,n){t(n)},label:u,labelPosition:"right"},i));return r?s:l().createElement("div",{style:{margin:"12px 0 6px"}},s)}}],n&&ot(t.prototype,n),i}(l().Component);const ut=W((0,z.muiThemeable)()(ct));function st(e){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st(e)}function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){yt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dt(){return dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dt.apply(this,arguments)}function mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bt(e,t,n){return t&&ht(e.prototype,t),n&&ht(e,n),e}function vt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gt(e,t)}function gt(e,t){return gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},gt(e,t)}function Ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r,o,a=wt(e);if(t){var i=wt(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return r=this,!(o=n)||"object"!==st(o)&&"function"!=typeof o?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r):o}}function wt(e){return wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},wt(e)}var jt=r().requireLib("form").InputIntegerBytes,St=r().requireLib("hoc"),Et=St.ModernTextField,Pt=St.ModernSelectField,kt=St.ModernStyles,Tt=function(e){vt(n,e);var t=Ot(n);function n(){return mt(this,n),t.apply(this,arguments)}return bt(n,[{key:"render",value:function(){var e=this.props,t=e.getRealValue,n=e.configs,r=e.column,o=e.inline,a=n.get(r.name),u="general";a&&a.data&&(u=a.data.format||u);var s=t();switch(u){case"bytesize":return l().createElement(jt,{value:s,editMode:!1,displayContext:"grid",toggleEditMode:function(){},disabled:!0});case"percentage":return l().createElement(i.Fragment,null,s,"%");case"progress":return o?l().createElement(c.LinearProgress,{value:s,max:100,mode:"determinate",style:{display:"inline-block",width:60,height:6,backgroundColor:"rgba(189,189,189,.5)"}}):l().createElement("div",{style:{display:"flex",alignItems:"center"}},l().createElement(c.LinearProgress,{value:s,max:100,mode:"determinate",style:{flex:1}}),l().createElement("div",{style:{marginLeft:5}},s,"%"));default:return l().createElement(i.Fragment,null,s)}}}]),n}(l().Component);Tt=O(Tt);var xt=function(e){vt(n,e);var t=Ot(n);function n(e){var r;return mt(this,n),(r=t.call(this,e)).state={},r}return bt(n,[{key:"configAsState",value:function(e,t){e.has(t)&&this.setState(e.get(t).data)}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.fieldname,r=t.configs;r?this.configAsState(r,n):d.getInstance().loadConfigs().then((function(t){return e.configAsState(t,n)}))}},{key:"render",value:function(){var e=this.props,t=e.supportTemplates,n=e.search,r=e.updateValue,o=e.label,a=function(e){r(e,!1)},i=this.state.format,u=void 0===i?"general":i,s=this.props.value,f="";n&&(s.indexOf&&["<",">"].indexOf(s.charAt(0))>-1?(f=s.charAt(0),"="===s.charAt(1)?(f+="=",s=parseInt(s.substr(2))):s=parseInt(s.substr(1))):s=parseInt(s));var p=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=n?kt.textFieldV1Search:null;return l().createElement(Et,dt({value:s,fullWidth:!0,hintText:o,type:e,onChange:t,underlineShow:!r,variant:n?"v1":"v2"},a))};if(t)return p("",(function(e,t){return a(t)}));if(n){var y=kt.selectFieldV1Search,d=pt(pt({},y.style),{},{borderRadius:0});return l().createElement("div",{style:{display:"flex"}},l().createElement("div",{style:{width:60,marginRight:0}},l().createElement(Pt,dt({},y,{style:d,fullWidth:!0,value:f,onChange:function(e,t,n){return a(n+""+s)}}),l().createElement(c.MenuItem,{value:"",primaryText:"="}),l().createElement(c.MenuItem,{value:">=",primaryText:">="}),l().createElement(c.MenuItem,{value:"<=",primaryText:"<="}),l().createElement(c.MenuItem,{value:">",primaryText:">"}),l().createElement(c.MenuItem,{value:"<",primaryText:"<"}))),l().createElement("div",{style:{flex:1}},p("number",(function(e,t){a(t?f+""+t:t)}))))}var m="number";switch(u){case"general":default:return p(m,(function(e,t){return a(parseInt(t))}));case"percentage":return p(m,(function(e,t){a(Math.max(0,Math.min(100,t)))}));case"progress":return l().createElement("div",null,p(m,(function(e,t){a(Math.max(0,Math.min(100,t)))}),!0),l().createElement(c.LinearProgress,{mode:"determinate",max:100,value:s,style:{marginTop:-8}}));case"bytesize":var h=function(){};return l().createElement(jt,{value:s,editMode:!0,onChange:function(e,t){return a(parseInt(e))},isDisplayGrid:h,isDisplayForm:h,toggleEditMode:h,attributes:{type:"integer-bytes",label:o},variant:n?"v1":"v2"})}}}]),n}(l().Component);function Mt(){return Mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mt.apply(this,arguments)}function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){Rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}xt=W(xt);var It=r().requireLib("hoc").colorsFromString,Nt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"renderStars",value:function(e,t){return e.getMetadata().get(t.name)?l().createElement(k,{node:e,column:t,size:"small"}):null}},{key:"renderBoolean",value:function(e,t){return e.getMetadata().get(t.name)?l().createElement("span",null,l().createElement("span",{className:"mdi mdi-check",style:{color:"#4caf50"}})," ",t.label):null}},{key:"renderSelector",value:function(e,t){return e.getMetadata().get(t.name)?l().createElement(_,{node:e,column:t}):null}},{key:"renderCSSLabel",value:function(e,t){return e.getMetadata().get(t.name)?l().createElement(A,{node:e,column:t}):null}},{key:"renderTagsCloud",value:function(e,t){if(!e.getMetadata().get(t.name))return null;var n={display:"inline-block",backgroundColor:"#E1BEE7",borderRadius:6,height:22,lineHeight:"22px",padding:"0 6px",color:"#9C27B0",fontWeight:500,fontSize:12,marginLeft:2,marginRight:6},r=e.getMetadata().get(t.name);return r&&r.split?l().createElement("span",null,r.split(",").map((function(e,t){var o=_t(_t({},n),It(e));return t===r.split(",").length-1&&(o=_t(_t({},o),{},{marginRight:-4})),l().createElement("span",{style:o},e)}))):null}},{key:"renderDate",value:function(e,t){return e.getMetadata().get(t.name)?l().createElement(Xe,{node:e,column:t,type:"date"}):null}},{key:"renderInteger",value:function(e,t){return e.getMetadata().get(t.name)?l().createElement(Tt,{node:e,column:t,inline:!0}):null}},{key:"formPanelStars",value:function(e){return l().createElement(ee,Mt({},e,{search:!0}))}},{key:"formPanelCssLabels",value:function(e,t){var n=Object.keys(V()).map(function(e){var t=V()[e],n=l().createElement("span",null,l().createElement("span",{className:"mdi mdi-label",style:{color:t.color,marginRight:5}}),t.label);return l().createElement(c.MenuItem,{value:e,primaryText:n})}.bind(this));return l().createElement(me,Mt({},e,{menuItems:n,search:!t}))}},{key:"formPanelSelectorFilter",value:function(e,t){var n=function(t,n){var r,o=t.get(e.fieldname),a=[],i=[],u={};o&&o.data&&o.data.items&&(a=o.data.items.map((function(e){i.push(e.key),u[e.key]=e.value;var t=e.value;return e.color&&(t=l().createElement("span",null,l().createElement("span",{className:"mdi mdi-label",style:{color:e.color,marginRight:5}}),e.value)),l().createElement(c.MenuItem,{value:e.key,primaryText:t})}))),o&&o.data&&o.data.steps&&(r=!0),n(a,i,r,u)};return l().createElement(me,Mt({},e,{menuItems:[],itemsLoader:function(e){t?n(t,e):d.getInstance().loadConfigs().then((function(t){return n(t,e)}))},search:!t}))}},{key:"formPanelTags",value:function(e,t){return l().createElement(_e,Mt({},e,{editMode:!0,search:!t}))}},{key:"formPanelDate",value:function(e){return l().createElement(Qe,Mt({type:"date"},e,{editMode:!0,search:!0}))}},{key:"formPanelBoolean",value:function(e){return l().createElement(ut,Mt({},e,{search:!0}))}},{key:"formPanelInteger",value:function(e){return l().createElement(xt,Mt({},e,{search:!0}))}},{key:"typeFormRenderer",value:function(t){switch(t){case"stars_rate":return e.formPanelStars;case"css_label":return e.formPanelCssLabels;case"choice":return e.formPanelSelectorFilter;case"tags":return e.formPanelTags;case"integer":return e.formPanelInteger;case"boolean":return e.formPanelBoolean;case"date":return e.formPanelDate;default:return null}}},{key:"typeColumnRenderer",value:function(t){var n;switch(t){case"stars_rate":n={renderComponent:e.renderStars,sortType:"number"};break;case"css_label":n={renderComponent:e.renderCSSLabel,sortType:"string"};break;case"choice":n={renderComponent:e.renderSelector,sortType:"string"};break;case"tags":n={renderComponent:e.renderTagsCloud,renderBlock:!0,sortType:"string"};break;case"integer":n={renderComponent:e.renderInteger,sortType:"number"};break;case"boolean":n={renderComponent:e.renderBoolean,sortType:"number"};break;case"date":n={renderComponent:e.renderDate,sortType:"number"};break;default:return{}}return n.renderComponent&&(n.renderCell=n.renderComponent),n}}],null&&Dt(t.prototype,null),n&&Dt(t,n),e}();function Vt(e){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(e)}var At=["style","children","muiTheme"];function Bt(e,t){if(e){if("string"==typeof e)return Lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lt(e,t):void 0}}function Lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ut(e,t){return Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ut(e,t)}function qt(e){return qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qt(e)}function Wt(){return Wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wt.apply(this,arguments)}function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach((function(t){Kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ht=r().requireLib("hoc").ModernTextField,$t=r().requireLib("components").EmptyStateView,Gt=(0,z.muiThemeable)()((function(e){var t=e.style,n=e.children,r=e.muiTheme,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,At),a=Jt({},t);return t.borderTop&&(a=Jt(Jt({},t),{},{borderTop:t.borderTop+"px solid "+r.palette.mui3["outline-variant-50"]})),l().createElement("div",Wt({style:a},o),n)})),Yt="pydio.layout.meta-groups-expanded",Xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t,n,a=qt(r);if(o){var i=qt(this).constructor;e=Reflect.construct(a,arguments,i)}else e=a.apply(this,arguments);return t=this,!(n=e)||"object"!==Vt(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):n});function i(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),void 0===e.editMode&&(e.editMode=!1),(t=a.call(this,e)).state={updateMeta:new Map,fields:{},configs:new Map,groupsExpanded:{}},localStorage.getItem(Yt))try{t.state.groupsExpanded=JSON.parse(localStorage.getItem("pydio.layout.meta-groups-expanded"))||{}}catch(e){localStorage.removeItem(Yt)}return t}return t=i,n=[{key:"componentDidMount",value:function(){var e=this;(this.props.loader?this.props.loader():d.getInstance().loadConfigs()).then((function(t){var n=e.props,r=n.node,o=n.loadChecks,a={},i=new Map;o&&t.forEach((function(e,t){r.getMetadata().has(t)&&(a[t]=!0,i.set(t,r.getMetadata().get(t)))})),e.setState({configs:t,fields:a,updateMeta:i})}))}},{key:"updateValue",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.state.updateMeta.set(e,t),this.setState({updateMeta:this.state.updateMeta}),this.props.onChangeUpdateData&&this.props.onChangeUpdateData(this.state.updateMeta),n&&this.props.autoSave&&this.props.autoSave()}},{key:"deleteValue",value:function(e){this.state.updateMeta.delete(e),this.setState({updateMeta:this.state.updateMeta}),this.props.onChangeUpdateData&&this.props.onChangeUpdateData(this.state.updateMeta)}},{key:"getUpdateData",value:function(){return this.state.updateMeta}},{key:"resetUpdateData",value:function(){this.setState({updateMeta:new Map}),this.props.onChangeUpdateData&&this.props.onChangeUpdateData(new Map)}},{key:"onCheck",value:function(e,t){var n=this.state.fields;n[e]=t,t||this.deleteValue(e),this.setState({fields:n})}},{key:"addNode",value:function(e,t,n){var r,o=e,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Bt(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;o[i]||(o[i]={}),o=o[i]}}catch(e){a.e(e)}finally{a.f()}o.__NS__=n}},{key:"pathsToTree",value:function(e){var t=this,n={};return Object.keys(e).map((function(r){var o=e[r];if(""!==(r=r.replace(/(^\/|\/$)/g,"").replace(/\\/g,"/"))){var a=r.split("/");t.addNode(n,a,o)}else n.__NS__=o})),n}},{key:"render",value:function(){var e=this.state.configs,t=this.props,n=t.supportTemplates,r=t.multiple,o=t.pydio,a=t.style,i={};e.forEach((function(e,t){var r=e.type,o=e.groupName,a=void 0===o?"":o;("json"!==r||n)&&(i[a]||(i[a]=new Map),i[a].set(t,e))}));var c,u=this.pathsToTree(i);if(r){var s=o.MessageHash;c=l().createElement("div",{style:{paddingBottom:16}},l().createElement("em",null,s["meta.user.12"])," ",s["meta.user.13"])}return l().createElement("div",{style:Jt({width:"100%",overflowY:"scroll",overflowX:"hidden"},a)},c,this.renderGroup("",u))}},{key:"renderGroup",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=this.state,a=o.updateMeta,i=o.groupsExpanded,u=this.props,s=u.pydio,f=u.node,p=u.editMode,y=u.onRequestEditMode,d=u.supportTemplates,m=u.multiple,h=u.additionalProps,b=[],v=f.getMetadata(),g=0,O=Object.keys(t).filter((function(e){return"__NS__"!==e}));O.sort();var w=t.__NS__||new Map;w.forEach((function(e,t){var r,o=e.label,i=e.type,u=e.readonly;if("json"!==i||d){r=v.get(t),a.has(t)&&(r=a.get(t));var s=r;if(p&&!u){var y,O={fieldname:t,label:o,value:r,configs:w,onValueChange:function(e,t,r){return n.updateValue(e,t,r)}};switch(h&&h[i]&&(O=Jt(Jt({},O),h[i])),i){case"stars_rate":y=l().createElement(ee,O);break;case"choice":y=Nt.formPanelSelectorFilter(O,w);break;case"css_label":y=Nt.formPanelCssLabels(O,w);break;case"tags":y=Nt.formPanelTags(O,w);break;case"date":y=l().createElement(Qe,Wt({type:i},O,{supportTemplates:d}));break;case"integer":y=l().createElement(xt,Wt({},O,{supportTemplates:d}));break;case"boolean":y=l().createElement(ut,O);break;default:var j="integer"===i&&!d;y=l().createElement(Ht,{value:r||"",variant:"v2",fullWidth:!0,disabled:u,floatingLabelText:o,multiLine:"textarea"===i||"json"===i,type:j?"number":null,onChange:function(e,r){j&&(r=parseInt(r)),n.updateValue(t,r)},onKeyPress:function(e){"Enter"===e.key&&n.updateValue(t,r,!0)}})}if(m){var S=n.state.fields[t]||!1;b.push(l().createElement("div",{className:"infoPanelRow",key:t,style:{marginBottom:20}},l().createElement(c.Checkbox,{checked:S,label:o,onCheck:function(e,r){return n.onCheck(t,r)}}),S&&l().createElement("div",{className:"infoPanelValue"},y)))}else b.push(l().createElement("div",{key:t},y))}else{var E={name:t};switch(i){case"stars_rate":r=l().createElement(k,{node:f,column:E});break;case"choice":r=l().createElement(_,{node:f,column:E});break;case"css_label":r=l().createElement(A,{node:f,column:E});break;case"tags":r=l().createElement(_e,{node:f,column:E});break;case"date":r=l().createElement(Xe,{node:f,column:E,type:i});break;case"integer":r=l().createElement(Tt,{node:f,column:E});break;case"boolean":s=r=r?"Yes":"No"}s&&g++,b.push(l().createElement("div",{className:"infoPanelRow"+(s?"":" no-value"),key:t},l().createElement("div",{className:"infoPanelLabel"},o),l().createElement("div",{className:"infoPanelValue"},r)))}}}));var j={header:{fontSize:14,fontWeight:500,paddingTop:10,paddingBottom:10,display:"flex",alignItems:"center",cursor:"pointer",borderTop:1},fields:{}};r>0&&(j.fields={marginLeft:16*r+8,marginBottom:10,marginTop:-8}),r>-1&&(j.header=Jt(Jt({},j.header),{},{marginLeft:16*(r+1),borderTop:0,paddingTop:0,paddingBottom:12}));var S,E=O.map((function(o,a){var c=e+"/"+o,u=i[c],s=j.header;return 0===a&&(s=Jt(Jt({},j.header),{},{borderTop:0})),l().createElement(l().Fragment,null,o&&l().createElement(Gt,{style:s,className:"nsgroup-header",key:o,onClick:function(){n.setState({groupsExpanded:Jt(Jt({},i),{},Kt({},c,!u))},(function(){localStorage.setItem(Yt,JSON.stringify(n.state.groupsExpanded))}))}},l().createElement("span",{className:"mdi mdi-chevron-"+(u?"down":"right"),style:{fontSize:18,color:"#ccc"}}),l().createElement("span",null," ",o)),i[c]&&n.renderGroup(c,t[o],r+1))}));b.push.apply(b,function(e){if(Array.isArray(e))return Lt(e)}(S=E)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(S)||Bt(S)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var P=s.MessageHash;if(p||g)return l().createElement("div",{style:Jt({},j.fields)},b);var T={};return y&&(T={onClick:y,style:{cursor:"pointer"}}),l().createElement("div",T,l().createElement($t,{pydio:this.props.pydio,iconClassName:"mdi mdi-tag-outline",primaryTextId:P["meta.user."+(y?"11":"16")],style:{padding:"10px 40px 20px",backgroundColor:"transparent"},iconStyle:{fontSize:40},legendStyle:{fontSize:13}}))}}],n&&Ft(t.prototype,n),i}(l().Component);function Qt(e){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(e)}var Zt=["pydio","node","popoverPanel"];function en(){return en=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},en.apply(this,arguments)}function tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(n),!0).forEach((function(t){rn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function on(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function an(e,t){return an=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},an(e,t)}function ln(e){return ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ln(e)}var cn=r().requireLib("workspaces").InfoPanelCard,un=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&an(e,t)}(u,e);var t,n,r,o,a=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t,n,a=ln(r);if(o){var i=ln(this).constructor;e=Reflect.construct(a,arguments,i)}else e=a.apply(this,arguments);return t=this,!(n=e)||"object"!==Qt(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):n});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e)).panel=(0,i.createRef)(),t.state={},t._nodeObserver=function(){t.panel.current&&t.panel.current.resetUpdateData(),t.forceUpdate()},e.node&&e.node.observe("node_replaced",t._nodeObserver),t}return t=u,(n=[{key:"componentWillReceiveProps",value:function(e){e.node!==this.props.node&&(this.panel.current&&this.panel.current.resetUpdateData(),this.props.node&&this.props.node.stopObserving("node_replaced",this._nodeObserver),e.node&&e.node.observe("node_replaced",this._nodeObserver))}},{key:"componentWillUnmount",value:function(){this.props.node&&this.props.node.stopObserving("node_replaced",this._nodeObserver)}},{key:"saveMeta",value:function(){var e=this.panel.current.getUpdateData(),t=this.props.node;return d.getInstance().saveMeta([t],e).then((function(){}))}},{key:"onChangeUpdateData",value:function(e){this.setState({updateData:e})}},{key:"render",value:function(){var e=this,t=[],n=this.props,r=n.pydio,o=n.node,a=n.popoverPanel,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,Zt),u=r.MessageHash,s=this.panel.current?this.panel.current.getUpdateData():new Map,f="true"===o.getMetadata().get("node_readonly"),p=!1;!f&&s.size>0&&(p=!0,t.push(l().createElement(c.FlatButton,{key:"edit",label:u["meta.user.15"],onClick:function(){e.saveMeta()}})));var y={};return a&&(y=nn(nn({},y),{},{maxHeight:"80vh",overflowY:"auto"})),p||(y=nn(nn({},y),{},{paddingBottom:16})),l().createElement(cn,en({},i,{identifier:"meta-user",style:this.props.style,title:this.props.pydio.MessageHash["meta.user.1"],actions:t.length?t:null,icon:"mdi mdi-tag-multiple-outline",iconColor:"#00ACC1",popoverPanel:a}),l().createElement(Xt,{ref:this.panel,node:this.props.node,editMode:!f,pydio:this.props.pydio,onChangeUpdateData:function(t){e.onChangeUpdateData(t)},autoSave:function(){e.saveMeta()},style:y}))}}])&&on(t.prototype,n),u}(l().Component);const sn=require("pydio/model/node");var fn=e.n(sn);const pn=require("pydio/model/data-model");var yn=e.n(pn);const dn=require("create-react-class");var mn=e.n(dn);const hn=require("prop-types");var bn=e.n(hn),vn=r().requireLib("boot"),gn=vn.ActionDialogMixin,On=vn.CancelButtonProviderMixin,wn=vn.SubmitButtonProviderMixin;const jn=mn()({displayName:"UserMetaDialog",propsTypes:{selection:bn().instanceOf(yn())},mixins:[gn,On,wn],saveMeta:function(){var e=this.refs.panel.getUpdateData(),t={};return e.forEach((function(e,n){t[n]=e})),d.getInstance().saveMeta(this.props.selection.getSelectedNodes(),e)},submit:function(){var e=this;this.saveMeta().then((function(){e.dismiss()}))},render:function(){return l().createElement(Xt,{pydio:this.props.pydio,multiple:!this.props.selection.isUnique(),ref:"panel",node:this.props.selection.isUnique()?this.props.selection.getUniqueNode():new(fn()),editMode:!0,style:{fontSize:14}})}});function Sn(e){return Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sn(e)}function En(){return En=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},En.apply(this,arguments)}function Pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kn(e,t){return kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},kn(e,t)}function Tn(e){return Tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Tn(e)}var xn=Pydio.requireLib("hoc"),Mn=xn.ModernSelectField,Cn=xn.ModernTextField,_n=xn.ThemedModernStyles,Rn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kn(e,t)}(u,e);var t,n,r,o,a=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t,n,a=Tn(r);if(o){var i=Tn(this).constructor;e=Reflect.construct(a,arguments,i)}else e=a.apply(this,arguments);return t=this,!(n=e)||"object"!==Sn(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):n});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e)).state={},t}return t=u,n=[{key:"addSelectionValue",value:function(){var e=this.state,t=e.selectorNewKey,n=e.selectorNewValue,r=e.selectorNewColor,o=this.props,a=o.data,i=o.setAdditionalDataKey,l=a.items,c=void 0===l?[]:l;c.push({key:t,value:n,color:r}),i("items",c),this.setState({selectorNewKey:"",selectorNewValue:"",selectorNewColor:""})}},{key:"removeSelectionValue",value:function(e){var t=this.props,n=t.data,r=t.setAdditionalDataKey,o=n.items;r("items",(void 0===o?[]:o).filter((function(t){return t.key!==e})))}},{key:"renderColor",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n?l().createElement("span",{className:"mdi mdi-label"+(t?"":"-outline"),style:{color:t||"#ccc",marginRight:5}}):l().createElement("span",{style:{width:60,marginRight:6}},l().createElement(Mn,{disabled:n,fullWidth:!0,value:t,onChange:function(t,n,r){e.setState({selectorNewColor:r})}},l().createElement(c.MenuItem,{value:"",primaryText:l().createElement("span",{className:"mdi mdi-label-outline",style:{color:"#ccc"}})}),["#9c27b0","#607d8b","#66c","#69c","#6c6","#696","#c96","#ff9800","#c66","#fff","#ccc","#999","#000"].map((function(e){return l().createElement(c.MenuItem,{value:e,primaryText:l().createElement("span",{className:"mdi mdi-label",style:{color:e}})})}))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.m,o=t.setAdditionalDataKey,a=t.muiTheme,u=this.state,s=u.selectorNewKey,f=u.selectorNewValue,p=u.selectorNewColor,y=n.items,d=void 0===y?[]:y,m=_n(a);return l().createElement(i.Fragment,null,l().createElement("div",{style:{padding:10,paddingRight:0,backgroundColor:"#f5f5f5",borderRadius:3}},l().createElement("div",{style:{fontSize:13}},r("editor.selection")),l().createElement("div",null,d.map((function(t){var n=t.key,r=t.value,o=t.color;return l().createElement("div",{key:n,style:{display:"flex",alignItems:"center"}},e.renderColor(o,!0),l().createElement("span",{style:{marginRight:6,width:80}},l().createElement(Cn,{value:n,disabled:!0,fullWidth:!0})),l().createElement("span",{style:{flex:1}},l().createElement(Cn,{value:r,disabled:!0,fullWidth:!0})),l().createElement("span",null,l().createElement(c.IconButton,{iconClassName:"mdi mdi-delete",iconStyle:{color:"rgba(0,0,0,.3)"},onClick:function(){e.removeSelectionValue(n)}})))}))),l().createElement("div",{style:{display:"flex"},key:"new-selection-key"},this.renderColor(p),l().createElement("span",{style:{width:80,marginRight:6}},l().createElement(Cn,{value:s,onChange:function(t,n){e.setState({selectorNewKey:n})},hintText:r("editor.selection.key"),fullWidth:!0})),l().createElement("span",{style:{flex:1}},l().createElement(Cn,{value:f,onChange:function(t,n){e.setState({selectorNewValue:n})},hintText:r("editor.selection.value"),fullWidth:!0})),l().createElement("span",null,l().createElement(c.IconButton,{iconClassName:"mdi mdi-plus",onClick:function(){e.addSelectionValue()},disabled:!s||!f})))),l().createElement("div",null,l().createElement(c.Toggle,En({label:r("editor.selection.steps"),labelPosition:"left",toggled:n.steps,onToggle:function(e,t){return o("steps",t)}},m.toggleFieldV2))))}}],n&&Pn(t.prototype,n),u}(l().Component);const Dn=Rn=(0,z.muiThemeable)()(Rn);function In(e){return In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},In(e)}function Nn(){return Nn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nn.apply(this,arguments)}function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach((function(t){Bn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Un(e,t){return Un=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Un(e,t)}function qn(e){return qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qn(e)}var Wn=r().requireLib("hoc"),zn=Wn.ModernSelectField,Jn=Wn.ModernTextField,Kn=Wn.ThemedModernStyles,Hn={string:"Text",textarea:"Long Text",integer:"Number",boolean:"Boolean",date:"Date",choice:"Selection",tags:"Extensible Tags",stars_rate:"Stars Rating",css_label:"Color Labels",json:"JSON"},$n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Un(e,t)}(u,e);var t,n,r,o,a=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t,n,a=qn(r);if(o){var i=qn(this).constructor;e=Reflect.construct(a,arguments,i)}else e=a.apply(this,arguments);return t=this,!(n=e)||"object"!==In(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):n});function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),a.apply(this,arguments)}return t=u,n=[{key:"slugifier",value:function(e){var t=this.props.slugifier;return(void 0===t?be().computeStringSlug:t)(e)}},{key:"updateType",value:function(e){var t=this.props,n=t.namespace,r=t.onChange,o={type:e};"date"===e&&(o.data={format:"date",display:"normal"}),n.JsonDefinition=JSON.stringify(o),r(n)}},{key:"updateLabel",value:function(e){var t=this.props,n=t.create,r=t.namespace,o=t.onChange,a=t.forcePrefix,i=void 0===a?"":a,l=t.labelToName;!n||!(void 0===l||l)||r.Namespace&&r.Namespace!==i+this.slugifier(r.Label)||this.updateName(e),r.Label=e,o(r)}},{key:"updateName",value:function(e){var t=this.props,n=t.namespace,r=t.onChange,o=t.forcePrefix,a=this.slugifier(e);o&&0!==a.indexOf(o)&&(a=o+a),n.Namespace=a,r(n)}},{key:"getAdditionalData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props.namespace;try{var n=JSON.parse(t.JsonDefinition).data||e;return e.items&&n.split?{items:n.split(",").map((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ln(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.split("|"),2);return{key:t[0],value:t[1]}}))}:n}catch(e){}return e}},{key:"setAdditionalDataKey",value:function(e,t){var n=this.props,r=n.namespace,o=n.onChange,a=JSON.parse(r.JsonDefinition),i=Bn({},e,t);a.data=An(An({},a.data),i),r.JsonDefinition=JSON.stringify(a),o(r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.pydio,r=t.create,o=t.namespace,a=t.readonly,u=t.labelError,s=t.nameError,f=t.styles,p=t.metaTypes,y=void 0===p?Hn:p,d=t.showMandatory,m=void 0!==d&&d,h=t.showDefaultValue,b=void 0!==h&&h,v=t.format,g=void 0===v?["label","namespace","section","type","value","mandatory"]:v,O=t.muiTheme,w=Kn(O),j=this.props.m;j||(j=function(e){return n.MessageHash["ajxp_admin.metadata."+e]||e});var S="string";o.JsonDefinition&&(S=JSON.parse(o.JsonDefinition).type);var E={};return E.label=l().createElement(Jn,{floatingLabelText:j("label"),value:o.Label,onChange:function(t,n){e.updateLabel(n)},fullWidth:!0,errorText:u,disabled:a,variant:"v2"}),E.namespace=l().createElement(Jn,{floatingLabelText:j("namespace"),disabled:!r,value:o.Namespace,onChange:function(t,n){e.updateName(n)},fullWidth:!0,errorText:s,variant:"v2"}),E.section=l().createElement("div",{style:f.section},j("type")),E.type=l().createElement(i.Fragment,null,l().createElement(zn,{hintText:j("type"),value:S,onChange:function(t,n,r){return e.updateType(r)},disabled:a,fullWidth:!0,variant:"v2"},Object.keys(y).map((function(e){return l().createElement(c.MenuItem,{value:e,primaryText:j("type."+e)||y[e]})}))),"choice"===S&&l().createElement(Dn,{data:this.getAdditionalData({items:[],steps:!1}),setAdditionalDataKey:this.setAdditionalDataKey.bind(this),m:j}),"date"===S&&l().createElement(i.Fragment,null,l().createElement(zn,{hintText:j("type.date.format"),value:this.getAdditionalData({format:"date",display:"normal"}).format,onChange:function(t,n,r){return e.setAdditionalDataKey("format",r)},disabled:a,fullWidth:!0,variant:"v2"},l().createElement(c.MenuItem,{value:"date",primaryText:j("type.date.format.date")}),l().createElement(c.MenuItem,{value:"date-time",primaryText:j("type.date.format.date-time")}),l().createElement(c.MenuItem,{value:"time",primaryText:j("type.date.format.time")})),l().createElement(zn,{hintText:j("type.date.display"),value:this.getAdditionalData({format:"date",display:"normal"}).display,onChange:function(t,n,r){return e.setAdditionalDataKey("display",r)},disabled:a,fullWidth:!0,variant:"v2"},l().createElement(c.MenuItem,{value:"normal",primaryText:j("type.date.display.normal")}),l().createElement(c.MenuItem,{value:"relative",primaryText:j("type.date.display.relative")}))),"integer"===S&&l().createElement(i.Fragment,null,l().createElement(zn,{hintText:j("type.integer.format"),value:this.getAdditionalData({format:"general"}).format||"general",onChange:function(t,n,r){return e.setAdditionalDataKey("format",r)},disabled:a,fullWidth:!0,variant:"v2"},l().createElement(c.MenuItem,{value:"general",primaryText:j("type.integer.format.general")}),l().createElement(c.MenuItem,{value:"bytesize",primaryText:j("type.integer.format.bytesize")}),l().createElement(c.MenuItem,{value:"percentage",primaryText:j("type.integer.format.percentage")}),l().createElement(c.MenuItem,{value:"progress",primaryText:j("type.integer.format.progress")})))),E.value=l().createElement(Jn,{floatingLabelText:b,value:this.getAdditionalData({defaultValue:""}).defaultValue,onChange:function(t,n){e.setAdditionalDataKey("defaultValue",n)},fullWidth:!0,variant:"v2"}),E.mandatory=l().createElement(c.Toggle,Nn({},w.toggleFieldV2,{toggled:this.getAdditionalData({mandatory:!1}).mandatory,onToggle:function(t,n){e.setAdditionalDataKey("mandatory",n)},label:j("field.mandatory"),labelPosition:"right"})),l().createElement("div",null,g.filter((function(e){return b||"value"!==e})).filter((function(e){return m||"mandatory"!==e})).map((function(e){return E[e]})))}}],n&&Fn(t.prototype,n),u}(l().Component);($n=(0,z.muiThemeable)()($n)).MetaTypes=Hn;const Gn=$n;window.ReactMeta=t})();