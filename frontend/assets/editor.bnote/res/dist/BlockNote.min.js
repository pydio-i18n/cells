/*! For license information please see BlockNote.min.js.LICENSE.txt */
(()=>{var e,t,n,r,o={6738:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var u=this[s][0];null!=u&&(a[u]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);r&&a[c[0]]||(void 0!==i&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=i),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),t.push(c))}},t}},249:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},2729:e=>{"use strict";e.exports=function(e){return e[1]}},7384:(e,t,n)=>{"use strict";var r=n(2326);t.H=r.createRoot,r.hydrateRoot},9062:(e,t,n)=>{"use strict";var r=n(2015),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,i={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!u.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:l,ref:c,props:i,_owner:s.current}}t.Fragment=i,t.jsx=l,t.jsxs=l},1894:(e,t,n)=>{"use strict";e.exports=n(9062)},9867:(e,t)=>{var n;!function(){function r(e){return(e=e.toString(16)).length<2&&(e="0"+e),e}function o(){var e=function(){try{return Array.from((window.crypto||window.msCrypto).getRandomValues(new Uint8Array(16)))}catch(t){for(var e=[];e.length<16;)e.push(256*Math.random()&255);return e}}();return e[6]=15&e[6]|64,e[8]=63&e[8]|128,(e=e.map(r).join("").match(/(.{8})(.{4})(.{4})(.{4})(.{12})/)).shift(),e.join("-")}var i=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/;o.valid=function(e){return i.test(e)},window&&(window.uuid4=o),e.exports&&(e.exports=o),void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},7232:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(2729),o=n.n(r),i=n(6738),a=n.n(i)()(o());a.push([e.id,':root {\n  --alert-warning-bg: #fff6e6;\n  --alert-error-bg: #ffe6e6;\n  --alert-info-bg: #e6ebff;\n  --alert-success-bg: #e6ffe6;\n}\n[data-color-scheme="dark"] {\n  --alert-warning-bg: #805d20;\n  --alert-error-bg: #802020;\n  --alert-info-bg: #203380;\n  --alert-success-bg: #208020;\n}\n.alert {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-grow: 1;\n  border-radius: 4px;\n  min-height: 48px;\n  padding: 4px;\n}\n.alert[data-alert-type="warning"] {\n  background-color: var(--alert-warning-bg);\n}\n.alert[data-alert-type="error"] {\n  background-color: var(--alert-error-bg);\n}\n.alert[data-alert-type="info"] {\n  background-color: var(--alert-info-bg);\n}\n.alert[data-alert-type="success"] {\n  background-color: var(--alert-success-bg);\n}\n.alert .inline-content {\n  flex-grow: 1;\n}\n.alert .alert-icon-wrapper {\n  border-radius: 16px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-left: 12px;\n  margin-right: 12px;\n  height: 18px;\n  width: 18px;\n  user-select: none;\n  cursor: pointer;\n}\n.alert .alert-icon[data-alert-icon-type="warning"] {\n  color: #e69819;\n}\n.alert .alert-icon[data-alert-icon-type="error"] {\n  color: #d80d0d;\n}\n.alert .alert-icon[data-alert-icon-type="info"] {\n  color: #507aff;\n}\n.alert .alert-icon[data-alert-icon-type="success"] {\n  color: #0bc10b;\n}\n',""]);const s=a},7003:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(2729),o=n.n(r),i=n(6738),a=n.n(i)()(o());a.push([e.id,'.react-mui-context .modern-list.bn-children-list.table-mode {\n  font-size: 12px;\n  overflow-x: auto;\n  /* TEST - SHOULD BE UP ONE LEVEL AS IT SCROLLS WITH THE REST*/\n}\n.react-mui-context .modern-list.bn-children-list.table-mode.horizontal-scroll {\n  position: relative;\n}\n.react-mui-context .modern-list.bn-children-list.table-mode.horizontal-scroll::before {\n  content: "";\n  position: absolute;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  width: 20px;\n  background: linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, #dddddd 100%);\n  z-index: 100;\n}\n.react-mui-context .modern-list.bn-children-list.table-mode tr {\n  height: auto;\n}\n.react-mui-context .modern-list.bn-children-list.table-mode tr .cell {\n  word-break: normal;\n  padding-top: 8px;\n  padding-bottom: 8px;\n}\n.react-mui-context .modern-list.bn-children-list.table-mode tr .cell.cell-ajxp_label {\n  font-size: 13px;\n  font-weight: 600;\n  min-width: 280px !important;\n  cursor: pointer;\n}\n.react-mui-context .modern-list.bn-children-list.table-mode tr .cell.cell-ajxp_label > span {\n  white-space: nowrap;\n}\n.react-mui-context .modern-list.bn-children-list.table-mode tr .cell.cell-ajxp_label > span div.mimefont-container.with-editor-badge {\n  width: 18px;\n  height: 18px;\n  border-radius: 4px;\n  overflow: hidden;\n  border: 1px solid var(--md-sys-color-outline-variant-50);\n}\n.react-mui-context .modern-list.bn-children-list.table-mode tr .cell.cell-ajxp_label > span:hover {\n  text-decoration: underline;\n}\n.react-mui-context .modern-list.bn-children-list.table-mode tr .cell.cell-ajxp_label.header_cell {\n  font-weight: 600;\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .list-area {\n  display: grid;\n  gap: 8px;\n  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry {\n  border: 1px solid var(--md-sys-color-mimefont-background);\n  border-radius: 4px;\n  overflow: hidden;\n  align-items: center;\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry:last-child {\n  border: 1px solid var(--md-sys-color-mimefont-background);\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry .material-list-icon {\n  width: auto;\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry .material-list-icon .mimefont-container {\n  border-radius: 0;\n  margin: 0 10px 0 0;\n  width: 30px;\n  height: 30px;\n  line-height: 30px;\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry .material-list-icon .mimefont-container .mimefont {\n  font-size: 16px;\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry .material-list-text {\n  cursor: default;\n  padding: 0;\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry .material-list-text .material-list-line-2 {\n  display: none;\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry .material-list-actions {\n  display: none;\n}\n.react-mui-context .modern-list.bn-children-list.list-expanded-mode .modern-list-entry {\n  border: 1px solid var(--md-sys-color-mimefont-background);\n  margin-bottom: 8px;\n  border-radius: 8px;\n  overflow: hidden;\n  align-items: center;\n  padding: 6px 8px;\n}\n.react-mui-context .modern-list.bn-children-list.list-expanded-mode .modern-list-entry:last-child {\n  border: 1px solid var(--md-sys-color-mimefont-background);\n}\n.react-mui-context .modern-list.bn-children-list.list-expanded-mode .modern-list-entry .material-list-icon {\n  width: auto;\n}\n.react-mui-context .modern-list.bn-children-list.list-expanded-mode .modern-list-entry .material-list-icon .mimefont-container {\n  background-color: transparent !important;\n  margin: 0 8px 0 0;\n  width: 36px;\n  height: 36px;\n  line-height: 36px;\n}\n.react-mui-context .modern-list.bn-children-list.list-expanded-mode .modern-list-entry .material-list-icon .mimefont-container .mimefont {\n  font-size: 24px;\n}\n.react-mui-context .modern-list.bn-children-list.list-expanded-mode .modern-list-entry .material-list-text {\n  padding: 0;\n}\n.react-mui-context .modern-list.bn-children-list.list-expanded-mode .modern-list-entry .material-list-text .material-list-line-1 {\n  font-weight: 600;\n}\n.react-mui-context .modern-list.bn-children-list.material-list-grid .modern-list-entry {\n  border: 1px solid var(--md-sys-color-mimefont-background);\n}\n.react-mui-context .modern-list.bn-children-list.masonry-grid {\n  font-size: 13px;\n  margin: 0;\n}\n.react-mui-context .modern-list.bn-children-list.masonry-grid .masonry-card .mimefont-container .mimefont {\n  font-size: 24px;\n}\n',""]);const s=a},7538:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(2729),o=n.n(r),i=n(6738),a=n.n(i)()(o());a.push([e.id,'/*\n * Copyright 2025 Abstrium SAS <team (at) pyd.io>\n * This file is part of Pydio.\n *\n * Pydio is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Pydio is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Pydio.  If not, see <http://www.gnu.org/licenses/>.\n *\n * The latest code can be found at <https://pydio.com>.\n */\n.bn-editor {\n  background-color: transparent;\n}\n.react-mui-context .bn-container * {\n  white-space: pre-wrap;\n  user-select: text;\n  -webkit-user-select: text;\n}\n.react-mui-context .bn-container.bn-readonly table {\n  margin-bottom: 20px;\n}\n.react-mui-context .bn-container.bn-readonly p.bn-inline-content {\n  min-height: 20px;\n}\n.react-mui-context .bn-container h1,\n.react-mui-context .bn-container h2,\n.react-mui-context .bn-container h3,\n.react-mui-context .bn-container h4,\n.react-mui-context .bn-container h5,\n.react-mui-context .bn-container h6 {\n  font-weight: inherit;\n}\n.react-mui-context .bn-container div[role="menu"] {\n  background: var(--bn-colors-menu-background);\n}\n.react-mui-context .bn-container div[role="menu"] button {\n  font-size: var(--mantine-font-size-sm);\n}\n.react-mui-context .bn-container .ProseMirror-selectednode > .bn-block-content > .disable-outline {\n  outline: none;\n}\n',""]);const s=a},4576:(e,t,n)=>{"use strict";n.d(t,{A:()=>W});var r=n(2729),o=n.n(r),i=n(6738),a=n.n(i),s=n(249),u=n.n(s),l=new URL(n(10),n.b),c=new URL(n(5832),n.b),d=new URL(n(2245),n.b),f=new URL(n(4813),n.b),p=new URL(n(8884),n.b),h=new URL(n(6482),n.b),m=new URL(n(9355),n.b),v=new URL(n(1139),n.b),g=new URL(n(1390),n.b),y=new URL(n(9812),n.b),b=new URL(n(4185),n.b),D=new URL(n(5721),n.b),w=new URL(n(6856),n.b),C=new URL(n(8110),n.b),k=new URL(n(179),n.b),E=new URL(n(6155),n.b),x=new URL(n(4357),n.b),S=new URL(n(848),n.b),A=a()(o()),F=u()(l),O=u()(c),M=u()(d),B=u()(f),P=u()(p),T=u()(h),N=u()(m),j=u()(v),_=u()(g),R=u()(y),L=u()(b),I=u()(D),H=u()(w),z=u()(C),V=u()(k),$=u()(E),U=u()(x),G=u()(S);A.push([e.id,`/* Generated using https://google-webfonts-helper.herokuapp.com/fonts/inter?subsets=latin */\n/* inter-100 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 100;\n  src: local(""), url(${F}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${O}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-200 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 200;\n  src: local(""), url(${M}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${B}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-300 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 300;\n  src: local(""), url(${P}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${T}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-regular - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 400;\n  src: local(""), url(${N}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${j}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-500 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 500;\n  src: local(""), url(${_}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${R}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-600 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 600;\n  src: local(""), url(${L}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${I}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-700 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 700;\n  src: local(""), url(${H}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${z}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-800 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 800;\n  src: local(""), url(${V}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${$}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-900 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 900;\n  src: local(""), url(${U}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${G}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n`,""]);const W=A},134:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},a=[],s=0;s<e.length;s++){var u=e[s],l=r.base?u[0]+r.base:u[0],c=i[l]||0,d="".concat(l," ").concat(c);i[l]=c+1;var f=n(d),p={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==f)t[f].references++,t[f].updater(p);else{var h=o(p,r);r.byIndex=s,t.splice(s,0,{identifier:d,updater:h,references:1})}a.push(d)}return a}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=n(i[a]);t[s].references--}for(var u=r(e,o),l=0;l<i.length;l++){var c=n(i[l]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}i=u}}},4709:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},1202:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},9958:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},2783:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},3911:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},5832:(e,t,n)=>{"use strict";e.exports=n.p+"b0c3cec995c079348d2e.woff"},10:(e,t,n)=>{"use strict";e.exports=n.p+"9094111633a8ff639a30.woff2"},4813:(e,t,n)=>{"use strict";e.exports=n.p+"5ebc8670af89597cf4f0.woff"},2245:(e,t,n)=>{"use strict";e.exports=n.p+"7b1cdef5c4317d8dfe5a.woff2"},6482:(e,t,n)=>{"use strict";e.exports=n.p+"72b6ab1c5164d2f7a60a.woff"},8884:(e,t,n)=>{"use strict";e.exports=n.p+"1d901654d5968b3d2af1.woff2"},9812:(e,t,n)=>{"use strict";e.exports=n.p+"2e89c7eec639d70f9770.woff"},1390:(e,t,n)=>{"use strict";e.exports=n.p+"c72c72b70c82b1f4bacf.woff2"},5721:(e,t,n)=>{"use strict";e.exports=n.p+"a8909bb7bbff51df8622.woff"},4185:(e,t,n)=>{"use strict";e.exports=n.p+"8f1e0300e8d26fa8919d.woff2"},8110:(e,t,n)=>{"use strict";e.exports=n.p+"7ad0df5561cc0933cead.woff"},6856:(e,t,n)=>{"use strict";e.exports=n.p+"54321e26b8bf4739a16d.woff2"},6155:(e,t,n)=>{"use strict";e.exports=n.p+"f8e8bd61bdf890048dd1.woff"},179:(e,t,n)=>{"use strict";e.exports=n.p+"7e1a31f93354d23987f4.woff2"},848:(e,t,n)=>{"use strict";e.exports=n.p+"c5ccfaf539e28bfddffe.woff"},4357:(e,t,n)=>{"use strict";e.exports=n.p+"6453f04550c5da4cc6b8.woff2"},1139:(e,t,n)=>{"use strict";e.exports=n.p+"817c4274293e221c5076.woff"},9355:(e,t,n)=>{"use strict";e.exports=n.p+"be7cb18dc7caf47cf7e9.woff2"},7919:e=>{"use strict";e.exports=require("pydio/util/lang")},2015:e=>{"use strict";e.exports=require("react")},2326:e=>{"use strict";e.exports=require("react-dom")},9349:e=>{"use strict";e.exports=require("remark-gfm")},4059:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(e){for(var t=[],n=String(e||""),r=n.indexOf(","),o=0,i=!1;!i;){-1===r&&(r=n.length,i=!0);var a=n.slice(o,r).trim();!a&&i||t.push(a),o=r+1,r=n.indexOf(",",o)}return t}function i(e,t){var n,o=t||{};return(""===e[e.length-1]?[].concat((n=e,function(e){if(Array.isArray(e))return r(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[""]):e).join((o.padRight?" ":"")+","+(!1===o.padLeft?"":" ")).trim()}n.d(t,{A:()=>i,q:()=>o})},3159:(e,t,n)=>{"use strict";n.d(t,{V:()=>Z});var r=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],o=n(2093),i=n(9194),a=/["&'<>`]/g,s=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,l=/[|\\{}()[\]^$+*?.]/g,c=new WeakMap;var d,f=/[\dA-Fa-f]/,p=/\d/,h=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],m={nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",fnof:"ƒ",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",bull:"•",hellip:"…",prime:"′",Prime:"″",oline:"‾",frasl:"⁄",weierp:"℘",image:"ℑ",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦",quot:'"',amp:"&",lt:"<",gt:">",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",permil:"‰",lsaquo:"‹",rsaquo:"›",euro:"€"},v=["cent","copy","divide","gt","lt","not","para","times"],g={}.hasOwnProperty,y={};for(d in m)g.call(m,d)&&(y[m[d]]=d);var b=/[^\dA-Za-z]/;function D(e,t,n){var r,o=function(e,t,n){var r="&#x"+e.toString(16).toUpperCase();return n&&t&&!f.test(String.fromCharCode(t))?r:r+";"}(e,t,n.omitOptionalSemicolons);if((n.useNamedReferences||n.useShortestReferences)&&(r=function(e,t,n,r){var o=String.fromCharCode(e);if(g.call(y,o)){var i=y[o],a="&"+i;return n&&h.includes(i)&&!v.includes(i)&&(!r||t&&61!==t&&b.test(String.fromCharCode(t)))?a:a+";"}return""}(e,t,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!r)&&n.useShortestReferences){var i=function(e,t,n){var r="&#"+String(e);return n&&t&&!p.test(String.fromCharCode(t))?r:r+";"}(e,t,n.omitOptionalSemicolons);i.length<o.length&&(o=i)}return r&&(!n.useShortestReferences||r.length<o.length)?r:o}function w(e,t){return function(e,t){return e=e.replace(t.subset?(n=t.subset,(r=c.get(n))||(r=function(e){for(var t=[],n=-1;++n<e.length;)t.push(e[n].replace(l,"\\$&"));return new RegExp("(?:"+t.join("|")+")","g")}(n),c.set(n,r)),r):a,o),t.subset||t.escapeOnly?e:e.replace(s,(function(e,n,r){return t.format(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536,r.charCodeAt(n+2),t)})).replace(u,o);var n,r;function o(e,n,r){return t.format(e.charCodeAt(0),r.charCodeAt(n+1),t)}}(e,Object.assign({format:D},t))}var C=/^>|^->|<!--|-->|--!>|<!-$/g,k=[">"],E=["<",">"];function x(e,t){var n=String(e);if("string"!=typeof t)throw new TypeError("Expected character");for(var r=0,o=n.indexOf(t);-1!==o;)r++,o=n.indexOf(t,o+t.length);return r}var S=n(4059),A=n(7775),F=n(4444),O=n(7553),M=T(1),B=T(-1),P=[];function T(e){return function(t,n,r){var o=t?t.children:P,i=(n||0)+e,a=o[i];if(!r)for(;a&&(0,O.m)(a);)a=o[i+=e];return a}}var N={}.hasOwnProperty;function j(e){return function(t,n,r){return N.call(e,t.tagName)&&e[t.tagName](t,n,r)}}var _=j({body:function(e,t,n){var r=M(n,t);return!r||"comment"!==r.type},caption:R,colgroup:R,dd:function(e,t,n){var r=M(n,t);return!r||"element"===r.type&&("dt"===r.tagName||"dd"===r.tagName)},dt:function(e,t,n){var r=M(n,t);return Boolean(r&&"element"===r.type&&("dt"===r.tagName||"dd"===r.tagName))},head:R,html:function(e,t,n){var r=M(n,t);return!r||"comment"!==r.type},li:function(e,t,n){var r=M(n,t);return!r||"element"===r.type&&"li"===r.tagName},optgroup:function(e,t,n){var r=M(n,t);return!r||"element"===r.type&&"optgroup"===r.tagName},option:function(e,t,n){var r=M(n,t);return!r||"element"===r.type&&("option"===r.tagName||"optgroup"===r.tagName)},p:function(e,t,n){var r=M(n,t);return r?"element"===r.type&&("address"===r.tagName||"article"===r.tagName||"aside"===r.tagName||"blockquote"===r.tagName||"details"===r.tagName||"div"===r.tagName||"dl"===r.tagName||"fieldset"===r.tagName||"figcaption"===r.tagName||"figure"===r.tagName||"footer"===r.tagName||"form"===r.tagName||"h1"===r.tagName||"h2"===r.tagName||"h3"===r.tagName||"h4"===r.tagName||"h5"===r.tagName||"h6"===r.tagName||"header"===r.tagName||"hgroup"===r.tagName||"hr"===r.tagName||"main"===r.tagName||"menu"===r.tagName||"nav"===r.tagName||"ol"===r.tagName||"p"===r.tagName||"pre"===r.tagName||"section"===r.tagName||"table"===r.tagName||"ul"===r.tagName):!n||!("element"===n.type&&("a"===n.tagName||"audio"===n.tagName||"del"===n.tagName||"ins"===n.tagName||"map"===n.tagName||"noscript"===n.tagName||"video"===n.tagName))},rp:L,rt:L,tbody:function(e,t,n){var r=M(n,t);return!r||"element"===r.type&&("tbody"===r.tagName||"tfoot"===r.tagName)},td:I,tfoot:function(e,t,n){return!M(n,t)},th:I,thead:function(e,t,n){var r=M(n,t);return Boolean(r&&"element"===r.type&&("tbody"===r.tagName||"tfoot"===r.tagName))},tr:function(e,t,n){var r=M(n,t);return!r||"element"===r.type&&"tr"===r.tagName}});function R(e,t,n){var r=M(n,t,!0);return!r||"comment"!==r.type&&!("text"===r.type&&(0,O.m)(r.value.charAt(0)))}function L(e,t,n){var r=M(n,t);return!r||"element"===r.type&&("rp"===r.tagName||"rt"===r.tagName)}function I(e,t,n){var r=M(n,t);return!r||"element"===r.type&&("td"===r.tagName||"th"===r.tagName)}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var z=j({body:function(e){var t=M(e,-1,!0);return!(t&&("comment"===t.type||"text"===t.type&&(0,O.m)(t.value.charAt(0))||"element"===t.type&&("meta"===t.tagName||"link"===t.tagName||"script"===t.tagName||"style"===t.tagName||"template"===t.tagName)))},colgroup:function(e,t,n){var r=B(n,t),o=M(e,-1,!0);return!(n&&r&&"element"===r.type&&"colgroup"===r.tagName&&_(r,n.children.indexOf(r),n))&&Boolean(o&&"element"===o.type&&"col"===o.tagName)},head:function(e){var t,n=new Set,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return H(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(e.children);try{for(r.s();!(t=r.n()).done;){var o=t.value;if("element"===o.type&&("base"===o.tagName||"title"===o.tagName)){if(n.has(o.tagName))return!1;n.add(o.tagName)}}}catch(e){r.e(e)}finally{r.f()}var i=e.children[0];return!i||"element"===i.type},html:function(e){var t=M(e,-1);return!t||"comment"!==t.type},tbody:function(e,t,n){var r=B(n,t),o=M(e,-1);return(!n||!r||"element"!==r.type||"thead"!==r.tagName&&"tbody"!==r.tagName||!_(r,n.children.indexOf(r),n))&&Boolean(o&&"element"===o.type&&"tr"===o.tagName)}}),V={name:[["\t\n\f\r &/=>".split(""),"\t\n\f\r \"&'/=>`".split("")],["\0\t\n\f\r \"&'/<=>".split(""),"\0\t\n\f\r \"&'/<=>`".split("")]],unquoted:[["\t\n\f\r &>".split(""),"\0\t\n\f\r \"&'<=>`".split("")],["\0\t\n\f\r \"&'<=>`".split(""),"\0\t\n\f\r \"&'<=>`".split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function $(e,t,n){var r,o=(0,A.I)(e.schema,t),i=e.settings.allowParseErrors&&"html"===e.schema.space?0:1,a=e.settings.allowDangerousCharacters?0:1,s=e.quote;if(!o.overloadedBoolean||n!==o.attribute&&""!==n?!o.boolean&&!o.overloadedBoolean||"string"==typeof n&&n!==o.attribute&&""!==n||(n=Boolean(n)):n=!0,null==n||!1===n||"number"==typeof n&&Number.isNaN(n))return"";var u=w(o.attribute,Object.assign({},e.settings.characterReferences,{subset:V.name[i][a]}));return!0===n?u:(n=Array.isArray(n)?(o.commaSeparated?S.A:F.A)(n,{padLeft:!e.settings.tightCommaSeparatedLists}):String(n),e.settings.collapseEmptyAttributes&&!n?u:(e.settings.preferUnquoted&&(r=w(n,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:V.unquoted[i][a]}))),r!==n&&(e.settings.quoteSmart&&x(n,s)>x(n,e.alternative)&&(s=e.alternative),r=s+w(n,Object.assign({},e.settings.characterReferences,{subset:("'"===s?V.single:V.double)[i][a],attribute:!0}))+s),u+(r?"="+r:r)))}var U=["<","&"];function G(e,t,n,r){return!n||"element"!==n.type||"script"!==n.tagName&&"style"!==n.tagName?w(e.value,Object.assign({},r.settings.characterReferences,{subset:U})):e.value}var W=(0,i.A)("type",{invalid:function(e){throw new Error("Expected node, not `"+e+"`")},unknown:function(e){throw new Error("Cannot compile unknown node `"+e.type+"`")},handlers:{comment:function(e,t,n,r){return r.settings.bogusComments?"<?"+w(e.value,Object.assign({},r.settings.characterReferences,{subset:k}))+">":"\x3c!--"+e.value.replace(C,(function(e){return w(e,Object.assign({},r.settings.characterReferences,{subset:E}))}))+"--\x3e"},doctype:function(e,t,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"},element:function(e,t,n,r){var i,a=r.schema,s="svg"!==a.space&&r.settings.omitOptionalTags,u="svg"===a.space?r.settings.closeEmptyElements:r.settings.voids.includes(e.tagName.toLowerCase()),l=[];"html"===a.space&&"svg"===e.tagName&&(r.schema=o.JW);var c=function(e,t){var n,r=[],o=-1;if(t)for(n in t)if(null!==t[n]&&void 0!==t[n]){var i=$(e,n,t[n]);i&&r.push(i)}for(;++o<r.length;){var a=e.settings.tightAttributes?r[o].charAt(r[o].length-1):void 0;o!==r.length-1&&'"'!==a&&"'"!==a&&(r[o]+=" ")}return r.join("")}(r,e.properties),d=r.all("html"===a.space&&"template"===e.tagName?e.content:e);return r.schema=a,d&&(u=!1),!c&&s&&z(e,t,n)||(l.push("<",e.tagName,c?" "+c:""),u&&("svg"===a.space||r.settings.closeSelfClosing)&&(i=c.charAt(c.length-1),(!r.settings.tightSelfClosing||"/"===i||i&&'"'!==i&&"'"!==i)&&l.push(" "),l.push("/")),l.push(">")),l.push(d),u||s&&_(e,t,n)||l.push("</"+e.tagName+">"),l.join("")},raw:function(e,t,n,r){return r.settings.allowDangerousHtml?e.value:G(e,0,n,r)},root:function(e,t,n,r){return r.all(e)},text:G}}),q={},K={},J=[];function Z(e,t){var n=t||q,i=n.quote||'"',a='"'===i?"'":'"';if('"'!==i&&"'"!==i)throw new Error("Invalid quote `"+i+"`, expected `'` or `\"`");return{one:X,all:Y,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||r,characterReferences:n.characterReferences||K,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:"svg"===n.space?o.JW:o.qy,quote:i,alternative:a}.one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}function X(e,t,n){return W(e,t,n,this)}function Y(e){for(var t=[],n=e&&e.children||J,r=-1;++r<n.length;)t[r]=this.one(n[r],r,e);return t.join("")}},7553:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{m:()=>i});var o=/[ \t\n\f\r]/g;function i(e){return"object"===r(e)?"text"===e.type&&a(e.value):a(e)}function a(e){return""===e.replace(o,"")}},6527:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(e){if(1!==function(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e).length)throw new Error('Expected "'.concat(e,'" to be a single code point'));return e.codePointAt(0)}n.d(t,{jM:()=>ao,vr:()=>lo});var i,a,s,u,l,c,d,f,p,h,m,v,g,y=new Set(["alnum","alpha","ascii","blank","cntrl","digit","graph","lower","print","punct","space","upper","word","xdigit"]),b=String.raw;function D(e,t){if(null==e)throw new Error(null!=t?t:"Value expected");return e}function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function C(){C=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,r,o){var i=RegExp(e,r);return t.set(i,o||t.get(e)),k(i,n.prototype)}function r(e,n){var r=t.get(n);return Object.keys(r).reduce((function(t,n){var o=r[n];if("number"==typeof o)t[n]=e[o];else{for(var i=0;void 0===e[o[i]]&&i+1<o.length;)i++;t[n]=e[o[i]]}return t}),Object.create(null))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);if(n){n.groups=r(n,this);var o=n.indices;o&&(o.groups=r(o,this))}return n},n.prototype[Symbol.replace]=function(n,o){if("string"==typeof o){var i=t.get(this);return e[Symbol.replace].call(this,n,o.replace(/\$<([^>]+)>/g,(function(e,t){var n=i[t];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof o){var a=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=w(e[e.length-1])&&(e=[].slice.call(e)).push(r(e,a)),o.apply(this,e)}))}return e[Symbol.replace].call(this,n,o)},C.apply(this,arguments)}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){return(t=function(e){var t=function(e){if("object"!=w(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var P=b(i||(i=B(["[^?"],["\\[\\^?"]))),T="c.? | C(?:-.?)?|".concat(b(a||(a=B(["[pP]{(?:^?[- _]*[A-Za-z][- w]*})?"],["[pP]\\{(?:\\^?[-\\x20_]*[A-Za-z][-\\x20\\w]*\\})?"]))),"|").concat(b(s||(s=B(["x[89A-Fa-f]p{AHex}(?:\\x[89A-Fa-f]p{AHex})*"],["x[89A-Fa-f]\\p{AHex}(?:\\\\x[89A-Fa-f]\\p{AHex})*"]))),"|").concat(b(u||(u=B(["u(?:p{AHex}{4})? | x{[^}]*}? | xp{AHex}{0,2}"],["u(?:\\p{AHex}{4})? | x\\{[^\\}]*\\}? | x\\p{AHex}{0,2}"]))),"|").concat(b(l||(l=B(["o{[^}]*}?"],["o\\{[^\\}]*\\}?"]))),"|").concat(b(c||(c=B(["d{1,3}"],["\\d{1,3}"])))),N=/[?*+][?+]?|\{(?:\d+(?:,\d*)?|,\d+)\}\??/,j=new RegExp(b(d||(d=B(["\n  \\ (?:\n    ","\n    | [gk]<[^>]*>?\n    | [gk]'[^']*'?\n    | .\n  )\n  | ( (?:\n    ? (?:\n      [:=!>({]\n      | <[=!]\n      | <[^>]*>\n      | '[^']*'\n      | ~|?\n      | #(?:[^)\\]|\\.?)*\n      | [^:)]*[:)]\n    )?\n    | *[^)]*)?\n  )?\n  | (?:",")+\n  | ","\n  | .\n"],["\n  \\\\ (?:\n    ","\n    | [gk]<[^>]*>?\n    | [gk]'[^']*'?\n    | .\n  )\n  | \\( (?:\n    \\? (?:\n      [:=!>({]\n      | <[=!]\n      | <[^>]*>\n      | '[^']*'\n      | ~\\|?\n      | #(?:[^)\\\\]|\\\\.?)*\n      | [^:)]*[:)]\n    )?\n    | \\*[^\\)]*\\)?\n  )?\n  | (?:",")+\n  | ","\n  | .\n"])),T,N.source,P).replace(/\s+/g,""),"gsu"),_=new RegExp(b(f||(f=B(["\n  \\ (?:\n    ","\n    | .\n  )\n  | [:(?:^?p{Alpha}+|^):]\n  | ","\n  | &&\n  | .\n"],["\n  \\\\ (?:\n    ","\n    | .\n  )\n  | \\[:(?:\\^?\\p{Alpha}+|\\^):\\]\n  | ","\n  | &&\n  | .\n"])),T,P).replace(/\s+/g,""),"gsu");function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=O(O({flags:""},t),{},{rules:O({captureGroup:!1,singleline:!1},t.rules)});if("string"!=typeof e)throw new Error("String expected as pattern");var r,i=function(e){for(var t={ignoreCase:!1,dotAll:!1,extended:!1,digitIsAscii:!1,posixIsAscii:!1,spaceIsAscii:!1,wordIsAscii:!1,textSegmentMode:null},n=0;n<e.length;n++){var r=e[n];if(!"imxDPSWy".includes(r))throw new Error('Invalid flag "'.concat(r,'"'));if("y"!==r)t[{i:"ignoreCase",m:"dotAll",x:"extended",D:"digitIsAscii",P:"posixIsAscii",S:"spaceIsAscii",W:"wordIsAscii"}[r]]=!0;else{if(!/^y{[gw]}/.test(e.slice(n)))throw new Error('Invalid or unspecified flag "y" mode');t.textSegmentMode="g"===e[n+2]?"grapheme":"word",n+=3}}return t}(n.flags),a=[i.extended],s={captureGroup:n.rules.captureGroup,getCurrentModX:function(){return a.at(-1)},numOpenGroups:0,popModX:function(){a.pop()},pushModX:function(e){a.push(e)},replaceCurrentModX:function(e){a[a.length-1]=e},singleline:n.rules.singleline},u=[];for(j.lastIndex=0;r=j.exec(e);){var l=L(s,e,r[0],j.lastIndex);l.tokens?u.push.apply(u,x(l.tokens)):l.token&&u.push(l.token),void 0!==l.lastIndex&&(j.lastIndex=l.lastIndex)}var c=[],d=0;u.filter((function(e){return"GroupOpen"===e.type})).forEach((function(e){"capturing"===e.kind?e.number=++d:"("===e.raw&&c.push(e)})),d||c.forEach((function(e,t){e.kind="capturing",e.number=t+1}));var f=d||c.length;return{tokens:u.map((function(e){return"EscapedNumber"===e.type?function(e,t){var n=e.raw,r=e.inCharClass,i=n.slice(1);if(!r&&("0"!==i&&1===i.length||"0"!==i[0]&&+i<=t))return[$(n)];for(var a=[],s=i.match(/^[0-7]+|\d/g),u=0;u<s.length;u++){var l=s[u],c=void 0;if(0===u&&"8"!==l&&"9"!==l){if((c=parseInt(l,8))>127)throw new Error(b(g||(g=B(['Octal encoded byte above 177 unsupported "','"'])),n))}else c=o(l);a.push(U(c,(0===u?"\\":"")+l))}return a}(e,f):e})).flat(),flags:i}}function L(e,t,n,r){var i=E(n,2),a=i[0],s=i[1];if("["===n||"[^"===n){var u=function(e,t,n){var r,o=[W("^"===t[1],t)],i=1;for(_.lastIndex=n;r=_.exec(e);){var a=r[0];if("["===a[0]&&":"!==a[1])i++,o.push(W("^"===a[1],a));else if("]"===a){if("CharacterClassOpen"===o.at(-1).type)o.push(U(93,a));else if(i--,o.push(G(a)),!i)break}else{var s=I(a);Array.isArray(s)?o.push.apply(o,x(s)):o.push(s)}}return{tokens:o,lastIndex:_.lastIndex||e.length}}(t,n,r);return{tokens:u.tokens,lastIndex:u.lastIndex}}if("\\"===a){if("AbBGyYzZ".includes(s))return{token:V(n,n)};if(/^\\g[<']/.test(n)){if(!/^\\g(?:<[^>]+>|'[^']+')$/.test(n))throw new Error('Invalid group name "'.concat(n,'"'));return{token:X(n)}}if(/^\\k[<']/.test(n)){if(!/^\\k(?:<[^>]+>|'[^']+')$/.test(n))throw new Error('Invalid group name "'.concat(n,'"'));return{token:$(n)}}if("K"===s)return{token:K("keep",n)};if("N"===s||"R"===s)return{token:q("newline",n,{negate:"N"===s})};if("O"===s)return{token:q("any",n)};if("X"===s)return{token:q("text_segment",n)};var l=H(n,{inCharClass:!1});return Array.isArray(l)?{tokens:l}:{token:l}}if("("===a){if("*"===s)return{token:te(n)};if("(?{"===n)throw new Error('Unsupported callout "'.concat(n,'"'));if(n.startsWith("(?#")){if(")"!==t[r])throw new Error('Unclosed comment group "(?#"');return{lastIndex:r+1}}if(/^\(\?[-imx]+[:)]$/.test(n))return{token:ee(n,e)};if(e.pushModX(e.getCurrentModX()),e.numOpenGroups++,"("===n&&!e.captureGroup||"(?:"===n)return{token:Z("group",n)};if("(?>"===n)return{token:Z("atomic",n)};if("(?="===n||"(?!"===n||"(?<="===n||"(?<!"===n)return{token:Z("<"===n[2]?"lookbehind":"lookahead",n,{negate:n.endsWith("!")})};if("("===n&&e.captureGroup||n.startsWith("(?<")&&n.endsWith(">")||n.startsWith("(?'")&&n.endsWith("'"))return{token:Z("capturing",n,O({},"("!==n&&{name:n.slice(3,-1)}))};if(n.startsWith("(?~")){if("(?~|"===n)throw new Error('Unsupported absence function kind "'.concat(n,'"'));return{token:Z("absence_repeater",n)}}throw"(?("===n?new Error('Unsupported conditional "'.concat(n,'"')):new Error('Invalid or unsupported group option "'.concat(n,'"'))}if(")"===n){if(e.popModX(),e.numOpenGroups--,e.numOpenGroups<0)throw new Error('Unmatched ")"');return{token:J(n)}}if(e.getCurrentModX()){if("#"===n){var c=t.indexOf("\n",r);return{lastIndex:-1===c?t.length:c}}if(/^\s$/.test(n)){var d=new RegExp("\\s+","y");return d.lastIndex=r,{lastIndex:d.exec(t)?d.lastIndex:r}}}return"."===n?{token:q("dot",n)}:"^"===n||"$"===n?{token:V(e.singleline?{"^":b(p||(p=B(["A"],["\\A"]))),$:b(h||(h=B(["Z"],["\\Z"])))}[n]:n,n)}:"|"===n?{token:z(n)}:N.test(n)?{tokens:oe(n)}:{token:U(o(n),n)}}function I(e){if("\\"===e[0])return H(e,{inCharClass:!0});if("["===e[0]){var t=C(/\[:(\^?)([a-z]+):\]/,{negate:1,name:2}).exec(e);if(!t||!y.has(t.groups.name))throw new Error('Invalid POSIX class "'.concat(e,'"'));return q("posix",e,{value:t.groups.name,negate:!!t.groups.negate})}return"-"===e?function(e){return{type:"CharacterClassHyphen",raw:e}}(e):"&&"===e?function(e){return{type:"CharacterClassIntersector",raw:e}}(e):U(o(e),e)}function H(e,t){var n=t.inCharClass,r=e[1];if("c"===r||"C"===r)return function(e){var t="c"===e[1]?e[2]:e[3];if(!t||!/[A-Za-z]/.test(t))throw new Error('Unsupported control character "'.concat(e,'"'));return U(o(t.toUpperCase())-64,e)}(e);if("dDhHsSwW".includes(r))return function(e){var t=e[1].toLowerCase();return q({d:"digit",h:"hex",s:"space",w:"word"}[t],e,{negate:e[1]!==t})}(e);if(e.startsWith(b(m||(m=B(["o{"],["\\o{"])))))throw new Error('Incomplete, invalid, or unsupported octal code point "'.concat(e,'"'));if(/^\\[pP]\{/.test(e)){if(3===e.length)throw new Error('Incomplete or invalid Unicode property "'.concat(e,'"'));return function(e){var t=C(/^\\([pP])\{(\^?)([^}]+)/,{p:1,neg:2,value:3}).exec(e).groups,n=t.p,r=t.neg;return q("property",e,{value:t.value,negate:"P"===n&&!r||"p"===n&&!!r})}(e)}if(/^\\x[89A-Fa-f][0-9A-Fa-f]/.test(e))try{var i=e.split(/\\x/).slice(1).map((function(e){return parseInt(e,16)})),a=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}).decode(new Uint8Array(i)),s=new TextEncoder;return x(a).map((function(e){var t=x(s.encode(e)).map((function(e){return"\\x".concat(e.toString(16))})).join("");return U(o(e),t)}))}catch(t){throw new Error('Multibyte code "'.concat(e,'" incomplete or invalid in Oniguruma'))}if("u"===r||"x"===r)return U(function(e){if(/^(?:\\u(?![0-9A-Fa-f]{4})|\\x(?![0-9A-Fa-f]{1,2}|\{[0-9A-Fa-f]{1,8}\}))/.test(e))throw new Error('Incomplete or invalid escape "'.concat(e,'"'));var t="{"===e[2]?C(/^\\x\{[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*([0-9A-Fa-f]+)/,{hex:1}).exec(e).groups.hex:e.slice(2);return parseInt(t,16)}(e),e);if(Q.has(r))return U(Q.get(r),e);if(/\d/.test(r))return function(e,t){return{type:"EscapedNumber",inCharClass:e,raw:t}}(n,e);if("\\"===e)throw new Error(b(v||(v=B(['Incomplete escape ""'],['Incomplete escape "\\"']))));if("M"===r)throw new Error('Unsupported meta "'.concat(e,'"'));if(2===x(e).length)return U(e.codePointAt(1),e);throw new Error('Unexpected escape "'.concat(e,'"'))}function z(e){return{type:"Alternator",raw:e}}function V(e,t){return{type:"Assertion",kind:e,raw:t}}function $(e){return{type:"Backreference",raw:e}}function U(e,t){return{type:"Character",value:e,raw:t}}function G(e){return{type:"CharacterClassClose",raw:e}}function W(e,t){return{type:"CharacterClassOpen",negate:e,raw:t}}function q(e,t){return O(O({type:"CharacterSet",kind:e},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),{},{raw:t})}function K(e,t){return"keep"===e?{type:"Directive",kind:e,raw:t}:{type:"Directive",kind:e,flags:D((arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).flags),raw:t}}function J(e){return{type:"GroupClose",raw:e}}function Z(e,t){return O(O({type:"GroupOpen",kind:e},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),{},{raw:t})}function X(e){return{type:"Subroutine",raw:e}}var Y=new Set(["COUNT","CMP","ERROR","FAIL","MAX","MISMATCH","SKIP","TOTAL_COUNT"]),Q=new Map([["a",7],["b",8],["e",27],["f",12],["n",10],["r",13],["t",9],["v",11]]);function ee(e,t){var n,r=C(/^\(\?([imx]*)(?:-([-imx]*))?/,{on:1,off:2}).exec(e).groups,o=r.on,i=r.off;null!==(n=i)&&void 0!==n||(i="");var a=(t.getCurrentModX()||o.includes("x"))&&!i.includes("x"),s=re(o),u=re(i),l={};if(s&&(l.enable=s),u&&(l.disable=u),e.endsWith(")"))return t.replaceCurrentModX(a),K("flags",e,{flags:l});if(e.endsWith(":"))return t.pushModX(a),t.numOpenGroups++,Z("group",e,O({},(s||u)&&{flags:l}));throw new Error('Unexpected flag modifier "'.concat(e,'"'))}function te(e){var t,n=C(/\(\*([A-Za-z_]\w*)?(?:\[((?:[A-Za-z_]\w*)?)\])?(?:\{([^}]*)\})?\)/,{name:1,tag:2,args:3}).exec(e);if(!n)throw new Error('Incomplete or invalid named callout "'.concat(e,'"'));var r=n.groups,o=r.name,i=r.tag,a=r.args;if(!o)throw new Error('Invalid named callout "'.concat(e,'"'));if(""===i)throw new Error('Named callout tag with empty value not allowed "'.concat(e,'"'));var s=a?a.split(",").filter((function(e){return""!==e})).map((function(e){return/^[+-]?\d+$/.test(e)?+e:e})):[],u=E(s,3),l=u[0],c=u[1],d=u[2],f=Y.has(o)?o.toLowerCase():"custom";switch(f){case"fail":case"mismatch":case"skip":if(s.length>0)throw new Error('Named callout arguments not allowed "'.concat(s,'"'));break;case"error":if(s.length>1)throw new Error('Named callout allows only one argument "'.concat(s,'"'));if("string"==typeof l)throw new Error('Named callout argument must be a number "'.concat(l,'"'));break;case"max":if(!s.length||s.length>2)throw new Error('Named callout must have one or two arguments "'.concat(s,'"'));if("string"==typeof l&&!/^[A-Za-z_]\w*$/.test(l))throw new Error('Named callout argument one must be a tag or number "'.concat(l,'"'));if(2===s.length&&("number"==typeof c||!/^[<>X]$/.test(c)))throw new Error("Named callout optional argument two must be '<', '>', or 'X' \"".concat(c,'"'));break;case"count":case"total_count":if(s.length>1)throw new Error('Named callout allows only one argument "'.concat(s,'"'));if(1===s.length&&("number"==typeof l||!/^[<>X]$/.test(l)))throw new Error("Named callout optional argument must be '<', '>', or 'X' \"".concat(l,'"'));break;case"cmp":if(3!==s.length)throw new Error('Named callout must have three arguments "'.concat(s,'"'));if("string"==typeof l&&!/^[A-Za-z_]\w*$/.test(l))throw new Error('Named callout argument one must be a tag or number "'.concat(l,'"'));if("number"==typeof c||!/^(?:[<>!=]=|[<>])$/.test(c))throw new Error("Named callout argument two must be '==', '!=', '>', '<', '>=', or '<=' \"".concat(c,'"'));if("string"==typeof d&&!/^[A-Za-z_]\w*$/.test(d))throw new Error('Named callout argument three must be a tag or number "'.concat(d,'"'));break;case"custom":throw new Error('Undefined callout name "'.concat(o,'"'));default:throw new Error('Unexpected named callout kind "'.concat(f,'"'))}return function(e,t,n,r){return{type:"NamedCallout",kind:e,tag:t,arguments:n,raw:r}}(f,null!=i?i:null,null!==(t=null==a?void 0:a.split(","))&&void 0!==t?t:null,e)}function ne(e){var t,n,r=null;if("{"===e[0]){var o,i=C(/^\{(\d*)(?:,(\d*))?/,{minStr:1,maxStr:2}).exec(e).groups,a=i.minStr,s=i.maxStr,u=1e5;if(+a>u||s&&+s>u)throw new Error("Quantifier value unsupported in Oniguruma");if((t=+a)>(n=void 0===s?+a:""===s?1/0:+s)&&(r="possessive",t=(o=[n,t])[0],n=o[1]),e.endsWith("?")){if("possessive"===r)throw new Error('Unsupported possessive interval quantifier chain with "?"');r="lazy"}else r||(r="greedy")}else t="+"===e[0]?1:0,n="?"===e[0]?1:1/0,r="+"===e[1]?"possessive":"?"===e[1]?"lazy":"greedy";return function(e,t,n,r){return{type:"Quantifier",kind:e,min:t,max:n,raw:r}}(r,t,n,e)}function re(e){var t={};return e.includes("i")&&(t.ignoreCase=!0),e.includes("m")&&(t.dotAll=!0),e.includes("x")&&(t.extended=!0),Object.keys(t).length?t:null}function oe(e){for(var t,n=[],r=new RegExp(N,"gy");t=r.exec(e);){var o=t[0];if("{"===o[0]){var i=C(/^\{(\d+),(\d+)\}\??$/,{min:1,max:2}).exec(o);if(i){var a=i.groups;if(+a.min>+a.max&&o.endsWith("?")){r.lastIndex--,n.push(ne(o.slice(0,-1)));continue}}}n.push(ne(o))}return n}function ie(e,t){if(!Array.isArray(e.body))throw new Error("Expected node with body array");if(1!==e.body.length)return!1;var n=e.body[0];return!t||Object.keys(t).every((function(e){return t[e]===n[e]}))}new Set(["AbsenceFunction","CapturingGroup","Group","LookaroundAssertion","Regex"]);var ae,se,ue,le,ce,de,fe=new Set(["AbsenceFunction","Backreference","CapturingGroup","Character","CharacterClass","CharacterSet","Group","Quantifier","Subroutine"]);function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function he(){he=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,r,o){var i=RegExp(e,r);return t.set(i,o||t.get(e)),me(i,n.prototype)}function r(e,n){var r=t.get(n);return Object.keys(r).reduce((function(t,n){var o=r[n];if("number"==typeof o)t[n]=e[o];else{for(var i=0;void 0===e[o[i]]&&i+1<o.length;)i++;t[n]=e[o[i]]}return t}),Object.create(null))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&me(e,t)}(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);if(n){n.groups=r(n,this);var o=n.indices;o&&(o.groups=r(o,this))}return n},n.prototype[Symbol.replace]=function(n,o){if("string"==typeof o){var i=t.get(this);return e[Symbol.replace].call(this,n,o.replace(/\$<([^>]+)>/g,(function(e,t){var n=i[t];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof o){var a=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=pe(e[e.length-1])&&(e=[].slice.call(e)).push(r(e,a)),o.apply(this,e)}))}return e[Symbol.replace].call(this,n,o)},he.apply(this,arguments)}function me(e,t){return me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},me(e,t)}function ve(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){De(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function De(e,t,n){return(t=function(e){var t=function(e){if("object"!=pe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function we(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=be(be({flags:"",normalizeUnknownPropertyNames:!1,skipBackrefValidation:!1,skipLookbehindValidation:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null},t),{},{rules:be({captureGroup:!1,singleline:!1},t.rules)}),r=R(e,{flags:n.flags,rules:{captureGroup:n.rules.captureGroup,singleline:n.rules.singleline}}),i=function(e,t){var n=r.tokens[a.nextIndex];switch(a.parent=e,a.nextIndex++,n.type){case"Alternator":return Ce();case"Assertion":return function(e){var t=e.kind;return ke(D({"^":"line_start",$:"line_end","\\A":"string_start","\\b":"word_boundary","\\B":"word_boundary","\\G":"search_start","\\y":"text_segment_boundary","\\Y":"text_segment_boundary","\\z":"string_end","\\Z":"string_end_newline"}[t],'Unexpected assertion kind "'.concat(t,'"')),{negate:t===b(ue||(ue=ve(["B"],["\\B"])))||t===b(le||(le=ve(["Y"],["\\Y"])))})}(n);case"Backreference":return function(e,t){var n=e.raw,r=/^\\k[<']/.test(n),o=r?n.slice(3,-1):n.slice(1),i=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=t.capturingGroups.length,i=!1;if(e>o){if(!t.skipBackrefValidation)throw new Error('Not enough capturing groups defined to the left "'.concat(n,'"'));i=!0}return t.hasNumberedRef=!0,Ee(r?o+1-e:e,{orphan:i})};if(r){var a=he(/^(-?)0*([1-9]\d*)$/,{sign:1,num:2}).exec(o);if(a)return i(+a.groups.num,!!a.groups.sign);if(/[-+]/.test(o))throw new Error('Invalid backref name "'.concat(n,'"'));if(!t.namedGroupsByName.has(o))throw new Error('Group name not defined to the left "'.concat(n,'"'));return Ee(o)}return i(+o)}(n,a);case"Character":return Se(n.value,{useLastValid:!!t.isCheckingRangeEnd});case"CharacterClassHyphen":return function(e,t,n){var r=t.tokens,i=t.walk,a=t.parent,s=a.body.at(-1),u=r[t.nextIndex];if(!n.isCheckingRangeEnd&&s&&"CharacterClass"!==s.type&&"CharacterClassRange"!==s.type&&u&&"CharacterClassOpen"!==u.type&&"CharacterClassClose"!==u.type&&"CharacterClassIntersector"!==u.type){var l=i(a,be(be({},n),{},{isCheckingRangeEnd:!0}));if("Character"===s.type&&"Character"===l.type)return a.body.pop(),function(e,t){if(t.value<e.value)throw new Error("Character class range out of order");return{type:"CharacterClassRange",min:e,max:t}}(s,l);throw new Error("Invalid character class range")}return Se(o("-"))}(0,a,t);case"CharacterClassOpen":return function(e,t,n){for(var r=e.negate,o=t.tokens,i=t.walk,a=o[t.nextIndex],s=[Ae()],u=Ie(a);"CharacterClassClose"!==u.type;){if("CharacterClassIntersector"===u.type)s.push(Ae()),t.nextIndex++;else{var l=s.at(-1);l.body.push(i(l,n))}u=Ie(o[t.nextIndex],a)}var c=Ae({negate:r});return 1===s.length?c.body=s[0].body:(c.kind="intersection",c.body=s.map((function(e){return 1===e.body.length?e.body[0]:e}))),t.nextIndex++,c}(n,a,t);case"CharacterSet":return function(e,t){var n=e.kind,r=e.negate,o=e.value,i=t.normalizeUnknownPropertyNames,a=t.skipPropertyNameValidation,s=t.unicodePropertyMap;if("property"===n){var u=Le(o);if(!y.has(u)||null!=s&&s.has(u))return Te(o,{negate:r,normalizeUnknownPropertyNames:i,skipPropertyNameValidation:a,unicodePropertyMap:s});n="posix",o=u}return"posix"===n?function(e,t){var n=!(null==t||!t.negate);if(!y.has(e))throw new Error('Invalid POSIX class "'.concat(e,'"'));return{type:"CharacterSet",kind:"posix",value:e,negate:n}}(o,{negate:r}):Fe(n,{negate:r})}(n,a);case"Directive":return function(e){if("keep"===e)return{type:"Directive",kind:e};if("flags"===e)return{type:"Directive",kind:e,flags:D((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).flags)};throw new Error('Unexpected directive kind "'.concat(e,'"'))}(n.kind,{flags:n.flags});case"GroupOpen":return function(e,t,n){var r=t.tokens,o=t.capturingGroups,i=t.namedGroupsByName,a=t.skipLookbehindValidation,s=t.walk,u=function(e){var t=e.flags,n=e.kind,r=e.name,o=e.negate,i=e.number;switch(n){case"absence_repeater":return function(e){return{type:"AbsenceFunction",kind:e,body:Ne(void 0)}}("repeater");case"atomic":return Oe({atomic:!0});case"capturing":return xe(i,{name:r});case"group":return Oe({flags:t});case"lookahead":case"lookbehind":return Me({behind:"lookbehind"===n,negate:o});default:throw new Error('Unexpected group kind "'.concat(n,'"'))}}(e),l="AbsenceFunction"===u.type,c=Re(u),d=c&&u.negate;if("CapturingGroup"===u.type&&(o.push(u),u.name&&function(e,t){return e.has(t)||e.set(t,[]),e.get(t)}(i,u.name).push(u)),l&&n.isInAbsenceFunction)throw new Error("Nested absence function not supported by Oniguruma");for(var f=He(r[t.nextIndex]);"GroupClose"!==f.type;){if("Alternator"===f.type)u.body.push(Ce()),t.nextIndex++;else{var p=u.body.at(-1),h=s(p,be(be({},n),{},{isInAbsenceFunction:n.isInAbsenceFunction||l,isInLookbehind:n.isInLookbehind||c,isInNegLookbehind:n.isInNegLookbehind||d}));if(p.body.push(h),(c||n.isInLookbehind)&&!a){var m="Lookbehind includes a pattern not allowed by Oniguruma";if(d||n.isInNegLookbehind){if(_e(h)||"CapturingGroup"===h.type)throw new Error(m)}else if(_e(h)||Re(h)&&h.negate)throw new Error(m)}}f=He(r[t.nextIndex])}return t.nextIndex++,u}(n,a,t);case"NamedCallout":return function(e,t,n){return{type:"NamedCallout",kind:e,tag:t,arguments:n}}(n.kind,n.tag,n.arguments);case"Quantifier":return function(e,t){var n=e.kind,r=e.min,o=e.max,i=t.parent,a=i.body.at(-1);if(!a||!function(e){return fe.has(e.type)}(a))throw new Error("Quantifier requires a repeatable token");var s=Be(n,r,o,a);return i.body.pop(),s}(n,a);case"Subroutine":return function(e,t){var n=e.raw,r=t.capturingGroups,o=t.subroutines,i=n.slice(3,-1),a=he(/^([-+]?)0*([1-9]\d*)$/,{sign:1,num:2}).exec(i);if(a){var s=+a.groups.num,u=r.length;if(t.hasNumberedRef=!0,(i={"":s,"+":u+s,"-":u+1-s}[a.groups.sign])<1)throw new Error("Invalid subroutine number")}else"0"===i&&(i=0);var l=Pe(i);return o.push(l),l}(n,a);default:throw new Error('Unexpected token type "'.concat(n.type,'"'))}},a={capturingGroups:[],hasNumberedRef:!1,namedGroupsByName:new Map,nextIndex:0,normalizeUnknownPropertyNames:n.normalizeUnknownPropertyNames,parent:null,skipBackrefValidation:n.skipBackrefValidation,skipLookbehindValidation:n.skipLookbehindValidation,skipPropertyNameValidation:n.skipPropertyNameValidation,subroutines:[],tokens:r.tokens,unicodePropertyMap:n.unicodePropertyMap,walk:i},s=function(e){return{type:"Regex",body:Ne(void 0),flags:e}}(function(e){return be({type:"Flags"},e)}(r.flags)),u=s.body[0];a.nextIndex<r.tokens.length;){var l=i(u,{});"Alternative"===l.type?(s.body.push(l),u=l):u.body.push(l)}var c=a.capturingGroups,d=a.hasNumberedRef,f=a.namedGroupsByName,p=a.subroutines;if(d&&f.size&&!n.rules.captureGroup)throw new Error("Numbered backref/subroutine not allowed when using named capture");var h,m=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ge(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ge(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(p);try{for(m.s();!(h=m.n()).done;){var v=h.value.ref;if("number"==typeof v){if(v>c.length)throw new Error("Subroutine uses a group number that's not defined");v&&(c[v-1].isSubroutined=!0)}else{if(!f.has(v))throw new Error(b(se||(se=ve(["Subroutine uses a group name that's not defined \"g<",'>"'],["Subroutine uses a group name that's not defined \"\\g<",'>"'])),v));if(f.get(v).length>1)throw new Error(b(ae||(ae=ve(['Subroutine uses a duplicate group name "g<','>"'],['Subroutine uses a duplicate group name "\\g<','>"'])),v));f.get(v)[0].isSubroutined=!0}}}catch(e){m.e(e)}finally{m.f()}return s}function Ce(e){return{type:"Alternative",body:je(null==e?void 0:e.body)}}function ke(e,t){var n={type:"Assertion",kind:e};return("word_boundary"===e||"text_segment_boundary"===e)&&(n.negate=!(null==t||!t.negate)),n}function Ee(e,t){var n=!(null==t||!t.orphan);return be({type:"Backreference",ref:e},n&&{orphan:n})}function xe(e,t){var n=be({name:void 0,isSubroutined:!1},t);if(void 0!==n.name&&!function(e){return/^(?:[A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0345\u0363-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05B0-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0657\u0659-\u065F\u066E-\u06D3\u06D5-\u06DC\u06E1-\u06E8\u06ED-\u06EF\u06FA-\u06FC\u06FF\u0710-\u073F\u074D-\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0817\u081A-\u082C\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u0897\u08A0-\u08C9\u08D4-\u08DF\u08E3-\u08E9\u08F0-\u093B\u093D-\u094C\u094E-\u0950\u0955-\u0963\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C4\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09F0\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A42\u0A47\u0A48\u0A4B\u0A4C\u0A51\u0A59-\u0A5C\u0A5E\u0A70-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC5\u0AC7-\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0-\u0AE3\u0AF9-\u0AFC\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D-\u0B44\u0B47\u0B48\u0B4B\u0B4C\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4C\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCC\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E46\u0E4D\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0ECD\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F71-\u0F83\u0F88-\u0F97\u0F99-\u0FBC\u1000-\u1036\u1038\u103B-\u103F\u1050-\u108F\u109A-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1713\u171F-\u1733\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17B3\u17B6-\u17C8\u17D7\u17DC\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u1938\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A1B\u1A20-\u1A5E\u1A61-\u1A74\u1AA7\u1ABF\u1AC0\u1ACC-\u1ACE\u1B00-\u1B33\u1B35-\u1B43\u1B45-\u1B4C\u1B80-\u1BA9\u1BAC-\u1BAF\u1BBA-\u1BE5\u1BE7-\u1BF1\u1C00-\u1C36\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1DD3-\u1DF4\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u24B6-\u24E9\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA674-\uA67B\uA67F-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA805\uA807-\uA827\uA840-\uA873\uA880-\uA8C3\uA8C5\uA8F2-\uA8F7\uA8FB\uA8FD-\uA8FF\uA90A-\uA92A\uA930-\uA952\uA960-\uA97C\uA980-\uA9B2\uA9B4-\uA9BF\uA9CF\uA9E0-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA60-\uAA76\uAA7A-\uAABE\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD4A-\uDD65\uDD69\uDD6F-\uDD85\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDEC2-\uDEC4\uDEFC\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC45\uDC71-\uDC75\uDC80-\uDCB8\uDCC2\uDCD0-\uDCE8\uDD00-\uDD32\uDD44-\uDD47\uDD50-\uDD72\uDD76\uDD80-\uDDBF\uDDC1-\uDDC4\uDDCE\uDDCF\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE34\uDE37\uDE3E-\uDE41\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEE8\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D-\uDF44\uDF47\uDF48\uDF4B\uDF4C\uDF50\uDF57\uDF5D-\uDF63\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7-\uDFC0\uDFC2\uDFC5\uDFC7-\uDFCA\uDFCC\uDFCD\uDFD1\uDFD3]|\uD805[\uDC00-\uDC41\uDC43-\uDC45\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCC1\uDCC4\uDCC5\uDCC7\uDD80-\uDDB5\uDDB8-\uDDBE\uDDD8-\uDDDD\uDE00-\uDE3E\uDE40\uDE44\uDE80-\uDEB5\uDEB8\uDF00-\uDF1A\uDF1D-\uDF2A\uDF40-\uDF46]|\uD806[\uDC00-\uDC38\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B\uDD3C\uDD3F-\uDD42\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDDF\uDDE1\uDDE3\uDDE4\uDE00-\uDE32\uDE35-\uDE3E\uDE50-\uDE97\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC3E\uDC40\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD41\uDD43\uDD46\uDD47\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD96\uDD98\uDEE0-\uDEF6\uDF00-\uDF10\uDF12-\uDF3A\uDF3E-\uDF40\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFF0\uDFF1]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9E]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC30-\uDC6D\uDC8F\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD47\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD30-\uDD49\uDD50-\uDD69\uDD70-\uDD89]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[\0-\(\*-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*$/.test(e)}(n.name))throw new Error('Group name "'.concat(n.name,'" invalid in Oniguruma'));return be(be(be({type:"CapturingGroup",number:e},n.name&&{name:n.name}),n.isSubroutined&&{isSubroutined:n.isSubroutined}),{},{body:Ne(null==t?void 0:t.body)})}function Se(e,t){var n=be({useLastValid:!1},t);if(e>1114111){var r=e.toString(16);if(!n.useLastValid)throw e>1310719?new Error('Invalid code point out of range "\\x{'.concat(r,'}"')):new Error('Invalid code point out of range in JS "\\x{'.concat(r,'}"'));e=1114111}return{type:"Character",value:e}}function Ae(e){var t=be({kind:"union",negate:!1},e);return{type:"CharacterClass",kind:t.kind,negate:t.negate,body:je(null==e?void 0:e.body)}}function Fe(e,t){var n=!(null==t||!t.negate),r={type:"CharacterSet",kind:e};return("digit"===e||"hex"===e||"newline"===e||"space"===e||"word"===e)&&(r.negate=n),("text_segment"===e||"newline"===e&&!n)&&(r.variableLength=!0),r}function Oe(e){var t=null==e?void 0:e.atomic,n=null==e?void 0:e.flags;if(t&&n)throw new Error("Atomic group cannot have flags");return be(be(be({type:"Group"},t&&{atomic:t}),n&&{flags:n}),{},{body:Ne(null==e?void 0:e.body)})}function Me(e){var t=be({behind:!1,negate:!1},e);return{type:"LookaroundAssertion",kind:t.behind?"lookbehind":"lookahead",negate:t.negate,body:Ne(null==e?void 0:e.body)}}function Be(e,t,n,r){if(t>n)throw new Error("Invalid reversed quantifier range");return{type:"Quantifier",kind:e,min:t,max:n,body:r}}function Pe(e){return{type:"Subroutine",ref:e}}function Te(e,t){var n,r,o=be({negate:!1,normalizeUnknownPropertyNames:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null},t),i=null===(n=o.unicodePropertyMap)||void 0===n?void 0:n.get(Le(e));if(!i)if(o.normalizeUnknownPropertyNames)i=function(e){return e.trim().replace(/[- _]+/g,"_").replace(/[A-Z][a-z]+(?=[A-Z])/g,"$&_").replace(/[A-Za-z]+/g,(function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()}))}(e);else if(o.unicodePropertyMap&&!o.skipPropertyNameValidation)throw new Error(b(ce||(ce=ve(['Invalid Unicode property "p{','}"'],['Invalid Unicode property "\\p{','}"'])),e));return{type:"CharacterSet",kind:"property",value:null!==(r=i)&&void 0!==r?r:e,negate:o.negate}}function Ne(e){if(void 0===e)e=[Ce()];else if(!Array.isArray(e)||!e.length||!e.every((function(e){return"Alternative"===e.type})))throw new Error("Invalid body; expected array of one or more Alternative nodes");return e}function je(e){if(void 0===e)e=[];else if(!Array.isArray(e)||!e.every((function(e){return!!e.type})))throw new Error("Invalid body; expected array of nodes");return e}function _e(e){return"LookaroundAssertion"===e.type&&"lookahead"===e.kind}function Re(e){return"LookaroundAssertion"===e.type&&"lookbehind"===e.kind}function Le(e){return e.replace(/[- _]+/g,"").toLowerCase()}function Ie(e,t){return D(e,"".concat("Character"===(null==t?void 0:t.type)&&93===t.value?"Empty":"Unclosed"," character class"))}function He(e){return D(e,"Unclosed group")}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ve(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;function r(e,t){for(var n=0;n<e.length;n++){var r=o(e[n],t,n,e);n=Math.max(-1,n+r)}}function o(i){var a,s,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,d=0,f=!1,p={node:i,parent:u,key:l,container:c,root:e,remove:function(){$e(c).splice(Math.max(0,Ue(l)+d),1),d--,f=!0},removeAllNextSiblings:function(){return $e(c).splice(Ue(l)+1)},removeAllPrevSiblings:function(){var e=Ue(l)+d;return d-=e,$e(c).splice(0,Math.max(0,e))},replaceWith:function(e){var t=!!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).traverse;c?c[Math.max(0,Ue(l)+d)]=e:D(u,"Can't replace root node")[l]=e,t&&o(e,u,l,c),f=!0},replaceWithMultiple:function(e){var t,n=!!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).traverse;if((t=$e(c)).splice.apply(t,[Math.max(0,Ue(l)+d),1].concat(function(e){return function(e){if(Array.isArray(e))return ze(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ze(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ze(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e))),d+=e.length-1,n)for(var r=0,i=0;i<e.length;i++)r+=o(e[i],u,Ue(l)+i+r,c);f=!0},skip:function(){f=!0}},h=i.type,m=t["*"],v=t[h],g="function"==typeof m?m:null==m?void 0:m.enter,y="function"==typeof v?v:null==v?void 0:v.enter;if(null!=g&&g(p,n),null!=y&&y(p,n),!f)switch(h){case"AbsenceFunction":case"CapturingGroup":case"Group":case"Alternative":case"CharacterClass":case"LookaroundAssertion":r(i.body,i);break;case"Assertion":case"Backreference":case"Character":case"CharacterSet":case"Directive":case"Flags":case"NamedCallout":case"Subroutine":break;case"CharacterClassRange":o(i.min,i,"min"),o(i.max,i,"max");break;case"Quantifier":o(i.body,i,"body");break;case"Regex":r(i.body,i),o(i.flags,i,"flags");break;default:throw new Error('Unexpected node type "'.concat(h,'"'))}return null!=v&&null!==(a=v.exit)&&void 0!==a&&a.call(v,p,n),null!=m&&null!==(s=m.exit)&&void 0!==s&&s.call(m,p,n),d}return o(e),e}function $e(e){if(!Array.isArray(e))throw new Error("Container expected");return e}function Ue(e){if("number"!=typeof e)throw new Error("Numeric key expected");return e}var Ge,We,qe,Ke=String.raw(de||(Ge=["(?(?:[:=!>A-Za-z-]|<[=!]|(DEFINE))"],(We=["\\(\\?(?:[:=!>A-Za-z\\-]|<[=!]|\\(DEFINE\\))"])||(We=Ge.slice(0)),de=Object.freeze(Object.defineProperties(Ge,{raw:{value:Object.freeze(We)}}))));function Je(e,t){for(var n=0;n<e.length;n++)e[n]>=t&&e[n]++}function Ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||Xe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,t){if(e){if("string"==typeof e)return Ye(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ye(e,t):void 0}}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Qe,et,tt,nt,rt=Object.freeze({DEFAULT:"DEFAULT",CHAR_CLASS:"CHAR_CLASS"});function ot(e,t,n,r){var o,i=new RegExp(String.raw(qe||(qe=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["","|(?<$skip>[^?|\\?.)"],["","|(?<$skip>\\[\\^?|\\\\?.)"])),t),"gsu"),a=[!1],s=0,u="",l=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Xe(e))){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==t.return||t.return()}finally{if(a)throw o}}}}(e.matchAll(i));try{for(l.s();!(o=l.n()).done;){var c=o.value,d=c[0];c.groups.$skip||r&&r===rt.DEFAULT!=!s?("["===d[0]?(s++,a.push("^"===d[1])):"]"===d&&s&&(s--,a.pop()),u+=d):u+=n instanceof Function?n(c,{context:s?rt.CHAR_CLASS:rt.DEFAULT,negated:a[a.length-1]}):n}}catch(e){l.e(e)}finally{l.f()}return u}function it(e,t,n,r){ot(e,t,n,r)}function at(e,t,n){return!!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;if(!new RegExp(t,"su").test(e))return null;var o=new RegExp("".concat(t,"|(?<$skip>\\\\?.)"),"gsu");o.lastIndex=n;for(var i,a=0;i=o.exec(e);){var s=i,u=s[0];if(!(s.groups.$skip||r&&r===rt.DEFAULT!=!a))return i;"["===u?a++:"]"===u&&a&&a--,o.lastIndex==i.index&&o.lastIndex++}return null}(e,t,0,n)}function st(e,t){var n=/\\?(?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g;n.lastIndex=t;for(var r,o=e.length,i=0,a=1;r=n.exec(e);){var s=Ze(r,1)[0];if("["===s)i++;else if(i)"]"===s&&i--;else if("("===s)a++;else if(")"===s&&! --a){o=r.index;break}}return e.slice(t,o)}function ut(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var lt,ct,dt,ft,pt,ht,mt,vt,gt,yt,bt,Dt,wt=new RegExp(String.raw(Qe||(Qe=ut(["(?<noncapturingStart>",")|(?<capturingStart>((?:?<[^>]+>)?)|\\?."],["(?<noncapturingStart>",")|(?<capturingStart>\\((?:\\?<[^>]+>)?)|\\\\?."])),Ke),"gsu"),Ct=String.raw(tt||(tt=ut(["(?:[?*+]|{d+(?:,d*)?})"],["(?:[?*+]|\\{\\d+(?:,\\d*)?\\})"]))),kt=new RegExp(String.raw(nt||(nt=ut(["\n\\(?: d+\n  | c[A-Za-z]\n  | [gk]<[^>]+>\n  | [pPu]{[^}]+}\n  | u[A-Fa-fd]{4}\n  | x[A-Fa-fd]{2}\n  )\n| ((?: ? (?: [:=!>]\n  | <(?:[=!]|[^>]+>)\n  | [A-Za-z-]+:\n  | (DEFINE)\n  ))?\n| (?<qBase>",")(?<qMod>[?+]?)(?<invalidQ>[?*+{]?)\n| \\?.\n"],["\n\\\\(?: \\d+\n  | c[A-Za-z]\n  | [gk]<[^>]+>\n  | [pPu]\\{[^\\}]+\\}\n  | u[A-Fa-f\\d]{4}\n  | x[A-Fa-f\\d]{2}\n  )\n| \\((?: \\? (?: [:=!>]\n  | <(?:[=!]|[^>]+>)\n  | [A-Za-z\\-]+:\n  | \\(DEFINE\\)\n  ))?\n| (?<qBase>",")(?<qMod>[?+]?)(?<invalidQ>[?*+\\{]?)\n| \\\\?.\n"])),Ct).replace(/\s+/g,""),"gsu");function Et(e){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Et(e)}function xt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return St(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?St(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ft(e,t,n){return(t=function(e){var t=function(e){if("object"!=Et(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Et(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ot(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Mt=String.raw,Bt=Mt(lt||(lt=Ot(["\\g<(?<gRNameOrNum>[^>&]+)&R=(?<gRDepth>[^>]+)>"],["\\\\g<(?<gRNameOrNum>[^>&]+)&R=(?<gRDepth>[^>]+)>"]))),Pt=Mt(ct||(ct=Ot(["(?R=(?<rDepth>[^)]+))|",""],["\\(\\?R=(?<rDepth>[^\\)]+)\\)|",""])),Bt),Tt=Mt(dt||(dt=Ot(["(?<(?![=!])(?<captureName>[^>]+)>"],["\\(\\?<(?![=!])(?<captureName>[^>]+)>"]))),Nt=Mt(ft||(ft=Ot(["","|(?<unnamed>()(?!?)"],["","|(?<unnamed>\\()(?!\\?)"])),Tt),jt=new RegExp(Mt(pt||(pt=Ot(["","|","|(?|\\?."],["","|","|\\(\\?|\\\\?."])),Tt,Pt),"gsu"),_t="Cannot use multiple overlapping recursions";function Rt(e){var t="Max depth must be integer between 2 and 100; used ".concat(e);if(!/^[1-9]\d*$/.test(e))throw new Error(t);if((e=+e)<2||e>100)throw new Error(t)}function Lt(e,t,n,r,o,i,a){var s=new Set;r&&it(e+t,Tt,(function(e){var t=e.groups.captureName;s.add(t)}),rt.DEFAULT);var u=[n,r?s:null,o,i,a];return"".concat(e).concat(It.apply(void 0,["(?:".concat(e),"forward"].concat(u)),"(?:)").concat(It.apply(void 0,["".concat(t,")"),"backward"].concat(u))).concat(t)}function It(e,t,n,r,o,i,a){for(var s="",u=function(){var u=function(e){return"forward"===t?e+2:n-e+2-1}(l);s+=ot(e,Mt(bt||(bt=Ot(["","|\\k<(?<backref>[^>]+)>"],["","|\\\\k<(?<backref>[^>]+)>"])),Nt),(function(e){var t=e[0],n=e.groups,s=n.captureName,l=n.unnamed,c=n.backref;if(c&&r&&!r.has(c))return t;var d="_$".concat(u);if(l||s){var f=a+i.length+1;return i.push(f),function(e,t){for(var n=0;n<e.length;n++)e[n]>=t&&e[n]++}(o,f),l?t:"(?<".concat(s).concat(d,">")}return Mt(Dt||(Dt=Ot(["k<","",">"],["\\k<","",">"])),c,d)}),rt.DEFAULT)},l=0;l<n;l++)u();return s}function Ht(e,t,n,r,o,i){if(e.size&&r){var a=0;it(t,Nt,(function(){return a++}),rt.DEFAULT);var s=i-a+o,u=new Map;return e.forEach((function(e,t){var o,i=(r-a*n)/n,l=a*n,c=t>s+a?t+r:t,d=[],f=xt(e);try{for(f.s();!(o=f.n()).done;){var p=o.value;if(p<=s)d.push(p);else if(p>s+a+i)d.push(p+r);else if(p<=s+a)for(var h=0;h<=n;h++)d.push(p+a*h);else for(var m=0;m<=n;m++)d.push(p+l+i*m)}}catch(e){f.e(e)}finally{f.f()}u.set(c,d)})),u}return e}var zt,Vt,$t,Ut,Gt,Wt,qt,Kt,Jt,Zt,Xt,Yt,Qt,en,tn,nn,rn,on,an,sn,un,ln,cn,dn,fn,pn,hn,mn,vn,gn,yn,bn,Dn,wn,Cn,kn,En,xn,Sn,An,Fn,On,Mn,Bn,Pn,Tn,Nn,jn,_n,Rn,Ln=["lazyCompile"];function In(){In=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,r,o){var i=RegExp(e,r);return t.set(i,o||t.get(e)),Wn(i,n.prototype)}function r(e,n){var r=t.get(n);return Object.keys(r).reduce((function(t,n){var o=r[n];if("number"==typeof o)t[n]=e[o];else{for(var i=0;void 0===e[o[i]]&&i+1<o.length;)i++;t[n]=e[o[i]]}return t}),Object.create(null))}return $n(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);if(n){n.groups=r(n,this);var o=n.indices;o&&(o.groups=r(o,this))}return n},n.prototype[Symbol.replace]=function(n,o){if("string"==typeof o){var i=t.get(this);return e[Symbol.replace].call(this,n,o.replace(/\$<([^>]+)>/g,(function(e,t){var n=i[t];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof o){var a=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=tr(e[e.length-1])&&(e=[].slice.call(e)).push(r(e,a)),o.apply(this,e)}))}return e[Symbol.replace].call(this,n,o)},In.apply(this,arguments)}function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cr(r.key),r)}}function zn(e,t,n){return t=Jn(t),function(e,t){if(t&&("object"==tr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vn(e)}(e,Gn()?Reflect.construct(t,n||[],Jn(e).constructor):t.apply(e,n))}function Vn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wn(e,t)}function Un(e){var t="function"==typeof Map?new Map:void 0;return Un=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(Gn())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&Wn(o,n.prototype),o}(e,arguments,Jn(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Wn(n,e)},Un(e)}function Gn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Gn=function(){return!!e})()}function Wn(e,t){return Wn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wn(e,t)}function qn(e,t){Xn(e,t),t.add(e)}function Kn(){return Kn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Jn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Kn.apply(null,arguments)}function Jn(e){return Jn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jn(e)}function Zn(e,t,n){Xn(e,t),t.set(e,n)}function Xn(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Yn(e,t,n){return e.set(er(e,t),n),n}function Qn(e,t){return e.get(er(e,t))}function er(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function tr(e){return tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tr(e)}function nr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||ir(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ir(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function or(e){return function(e){if(Array.isArray(e))return ar(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ir(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(e,t){if(e){if("string"==typeof e)return ar(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ar(e,t):void 0}}function ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ur(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(n),!0).forEach((function(t){lr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lr(e,t,n){return(t=cr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cr(e){var t=function(e){if("object"!=tr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=tr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==tr(t)?t:t+""}function dr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var fr=String.fromCodePoint,pr=String.raw,hr={flagGroups:function(){try{new RegExp("(?i:)")}catch(e){return!1}return!0}(),unicodeSets:function(){try{new RegExp("","v")}catch(e){return!1}return!0}()};function mr(e,t){var n=t.enable,r=t.disable;return{dotAll:!(null!=r&&r.dotAll||!(null!=n&&n.dotAll||e.dotAll)),ignoreCase:!(null!=r&&r.ignoreCase||!(null!=n&&n.ignoreCase||e.ignoreCase))}}function vr(e,t,n){return e.has(t)||e.set(t,n),e.get(t)}function gr(e,t){return yr[e]>=yr[t]}hr.bugFlagVLiteralHyphenIsRange=!!hr.unicodeSets&&function(){try{new RegExp(pr(zt||(zt=dr(["[d-a]"],["[\\d\\-a]"]))),"v")}catch(e){return!0}return!1}(),hr.bugNestedClassIgnoresNegation=hr.unicodeSets&&new RegExp("[[^a]]","v").test("a");var yr={ES2025:2025,ES2024:2024,ES2018:2018},br={auto:"auto",ES2025:"ES2025",ES2024:"ES2024",ES2018:"ES2018"};function Dr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("[object Object]"!=={}.toString.call(e))throw new Error("Unexpected options");if(void 0!==e.target&&!br[e.target])throw new Error('Unexpected target "'.concat(e.target,'"'));var t=ur(ur({accuracy:"default",avoidSubclass:!1,flags:"",global:!1,hasIndices:!1,lazyCompileLength:1/0,target:"auto",verbose:!1},e),{},{rules:ur({allowOrphanBackrefs:!1,asciiWordBoundaries:!1,captureGroup:!1,recursionLimit:20,singleline:!1},e.rules)});return"auto"===t.target&&(t.target=hr.flagGroups?"ES2025":hr.unicodeSets?"ES2024":"ES2018"),t}var wr=new Set([fr(304),fr(305)]),Cr=pr(Vt||(Vt=dr(["[p{L}p{M}p{N}p{Pc}]"],["[\\p{L}\\p{M}\\p{N}\\p{Pc}]"])));function kr(e){if(wr.has(e))return[e];var t=new Set,n=e.toLowerCase(),r=n.toUpperCase(),o=Ar.get(n),i=xr.get(n),a=Sr.get(n);return 1===or(r).length&&t.add(r),a&&t.add(a),o&&t.add(o),t.add(n),i&&t.add(i),or(t)}var Er=new Map("C Other\nCc Control cntrl\nCf Format\nCn Unassigned\nCo Private_Use\nCs Surrogate\nL Letter\nLC Cased_Letter\nLl Lowercase_Letter\nLm Modifier_Letter\nLo Other_Letter\nLt Titlecase_Letter\nLu Uppercase_Letter\nM Mark Combining_Mark\nMc Spacing_Mark\nMe Enclosing_Mark\nMn Nonspacing_Mark\nN Number\nNd Decimal_Number digit\nNl Letter_Number\nNo Other_Number\nP Punctuation punct\nPc Connector_Punctuation\nPd Dash_Punctuation\nPe Close_Punctuation\nPf Final_Punctuation\nPi Initial_Punctuation\nPo Other_Punctuation\nPs Open_Punctuation\nS Symbol\nSc Currency_Symbol\nSk Modifier_Symbol\nSm Math_Symbol\nSo Other_Symbol\nZ Separator\nZl Line_Separator\nZp Paragraph_Separator\nZs Space_Separator\nASCII\nASCII_Hex_Digit AHex\nAlphabetic Alpha\nAny\nAssigned\nBidi_Control Bidi_C\nBidi_Mirrored Bidi_M\nCase_Ignorable CI\nCased\nChanges_When_Casefolded CWCF\nChanges_When_Casemapped CWCM\nChanges_When_Lowercased CWL\nChanges_When_NFKC_Casefolded CWKCF\nChanges_When_Titlecased CWT\nChanges_When_Uppercased CWU\nDash\nDefault_Ignorable_Code_Point DI\nDeprecated Dep\nDiacritic Dia\nEmoji\nEmoji_Component EComp\nEmoji_Modifier EMod\nEmoji_Modifier_Base EBase\nEmoji_Presentation EPres\nExtended_Pictographic ExtPict\nExtender Ext\nGrapheme_Base Gr_Base\nGrapheme_Extend Gr_Ext\nHex_Digit Hex\nIDS_Binary_Operator IDSB\nIDS_Trinary_Operator IDST\nID_Continue IDC\nID_Start IDS\nIdeographic Ideo\nJoin_Control Join_C\nLogical_Order_Exception LOE\nLowercase Lower\nMath\nNoncharacter_Code_Point NChar\nPattern_Syntax Pat_Syn\nPattern_White_Space Pat_WS\nQuotation_Mark QMark\nRadical\nRegional_Indicator RI\nSentence_Terminal STerm\nSoft_Dotted SD\nTerminal_Punctuation Term\nUnified_Ideograph UIdeo\nUppercase Upper\nVariation_Selector VS\nWhite_Space space\nXID_Continue XIDC\nXID_Start XIDS".split(/\s/).map((function(e){return[Le(e),e]}))),xr=new Map([["s",fr(383)],[fr(383),"s"]]),Sr=new Map([[fr(223),fr(7838)],[fr(107),fr(8490)],[fr(229),fr(8491)],[fr(969),fr(8486)]]),Ar=new Map([Or(453),Or(456),Or(459),Or(498)].concat(or(Mr(8072,8079)),or(Mr(8088,8095)),or(Mr(8104,8111)),[Or(8124),Or(8140),Or(8188)])),Fr=new Map([["alnum",pr($t||($t=dr(["[p{Alpha}p{Nd}]"],["[\\p{Alpha}\\p{Nd}]"])))],["alpha",pr(Ut||(Ut=dr(["p{Alpha}"],["\\p{Alpha}"])))],["ascii",pr(Gt||(Gt=dr(["p{ASCII}"],["\\p{ASCII}"])))],["blank",pr(Wt||(Wt=dr(["[p{Zs}\t]"],["[\\p{Zs}\\t]"])))],["cntrl",pr(qt||(qt=dr(["p{Cc}"],["\\p{Cc}"])))],["digit",pr(Kt||(Kt=dr(["p{Nd}"],["\\p{Nd}"])))],["graph",pr(Jt||(Jt=dr(["[P{space}&&P{Cc}&&P{Cn}&&P{Cs}]"],["[\\P{space}&&\\P{Cc}&&\\P{Cn}&&\\P{Cs}]"])))],["lower",pr(Zt||(Zt=dr(["p{Lower}"],["\\p{Lower}"])))],["print",pr(Xt||(Xt=dr(["[[P{space}&&P{Cc}&&P{Cn}&&P{Cs}]p{Zs}]"],["[[\\P{space}&&\\P{Cc}&&\\P{Cn}&&\\P{Cs}]\\p{Zs}]"])))],["punct",pr(Yt||(Yt=dr(["[p{P}p{S}]"],["[\\p{P}\\p{S}]"])))],["space",pr(Qt||(Qt=dr(["p{space}"],["\\p{space}"])))],["upper",pr(en||(en=dr(["p{Upper}"],["\\p{Upper}"])))],["word",pr(tn||(tn=dr(["[p{Alpha}p{M}p{Nd}p{Pc}]"],["[\\p{Alpha}\\p{M}\\p{Nd}\\p{Pc}]"])))],["xdigit",pr(nn||(nn=dr(["p{AHex}"],["\\p{AHex}"])))]]);function Or(e){var t=fr(e);return[t.toLowerCase(),t]}function Mr(e,t){return function(e,t){for(var n=[],r=e;r<=t;r++)n.push(r);return n}(e,t).map((function(e){return Or(e)}))}var Br=new Set(["Lower","Lowercase","Upper","Uppercase","Ll","Lowercase_Letter","Lt","Titlecase_Letter","Lu","Uppercase_Letter"]),Pr={AbsenceFunction:function(e){var t=e.node,n=e.parent,r=e.replaceWith,o=t.body;if("repeater"!==t.kind)throw new Error('Unsupported absence function "(?~|"');var i=Oe();i.body[0].body.push(Me({negate:!0,body:o}),Te("Any"));var a=Oe();a.body[0].body.push(Be("greedy",0,1/0,i)),r(qr(a,n),{traverse:!0})},Alternative:{enter:function(e,t){for(var n=e.node,r=e.parent,o=e.key,i=t.flagDirectivesByAlt,a=n.body.filter((function(e){return"flags"===e.kind})),s=o+1;s<r.body.length;s++){var u;(u=vr(i,r.body[s],[])).push.apply(u,or(a))}},exit:function(e,t){var n,r=e.node,o=t.flagDirectivesByAlt;if(null!==(n=o.get(r))&&void 0!==n&&n.length){var i=Ir(o.get(r));if(i){var a=Oe({flags:i});a.body[0].body=r.body,r.body=[qr(a,r)]}}}},Assertion:function(e,t){var n=e.node,r=e.parent,o=e.key,i=e.container,a=e.root,s=e.remove,u=e.replaceWith,l=n.kind,c=n.negate,d=t.asciiWordBoundaries,f=t.avoidSubclass,p=t.supportedGNodes,h=t.wordIsAscii;if("text_segment_boundary"===l)throw new Error('Unsupported text segment boundary "\\'.concat(c?"Y":"y",'"'));if("line_end"===l)u(qr(Me({body:[Ce({body:[ke("string_end")]}),Ce({body:[Se(10)]})]}),r));else if("line_start"===l)u(qr(Ur(pr(rn||(rn=dr(["(?<=A|\n(?!z))"],["(?<=\\A|\\n(?!\\z))"]))),{skipLookbehindValidation:!0}),r));else if("search_start"===l)if(p.has(n))a.flags.sticky=!0,s();else{var m=i[o-1];if(m&&function(e){var t=["Character","CharacterClass","CharacterSet"];return t.includes(e.type)||"Quantifier"===e.type&&e.min&&t.includes(e.body.type)}(m))u(qr(Me({negate:!0}),r));else{if(f)throw new Error(pr(on||(on=dr(['Uses "G" in a way that requires a subclass'],['Uses "\\G" in a way that requires a subclass']))));u(Wr(ke("string_start"),r)),t.strategy="clip_search"}}else if("string_end"===l||"string_start"===l);else if("string_end_newline"===l)u(qr(Ur(pr(an||(an=dr(["(?=\n?z)"],["(?=\\n?\\z)"])))),r));else{if("word_boundary"!==l)throw new Error('Unexpected assertion kind "'.concat(l,'"'));if(!h&&!d){var v="(?:(?<=".concat(Cr,")(?!").concat(Cr,")|(?<!").concat(Cr,")(?=").concat(Cr,"))"),g="(?:(?<=".concat(Cr,")(?=").concat(Cr,")|(?<!").concat(Cr,")(?!").concat(Cr,"))");u(qr(Ur(c?g:v),r))}}},Backreference:function(e,t){var n=e.node,r=t.jsGroupNameMap,o=n.ref;"string"!=typeof o||$r(o)||(o=Lr(o,r),n.ref=o)},CapturingGroup:function(e,t){var n=e.node,r=t.jsGroupNameMap,o=t.subroutineRefMap,i=n.name;i&&!$r(i)&&(i=Lr(i,r),n.name=i),o.set(n.number,n),i&&o.set(i,n)},CharacterClassRange:function(e){var t=e.node,n=e.parent,r=e.replaceWith;"intersection"===n.kind&&r(qr(Ae({body:[t]}),n),{traverse:!0})},CharacterSet:function(e,t){var n=e.node,r=e.parent,o=e.replaceWith,i=t.accuracy,a=t.minTargetEs2024,s=t.digitIsAscii,u=t.spaceIsAscii,l=t.wordIsAscii,c=n.kind,d=n.negate,f=n.value;if(!s||"digit"!==c&&"digit"!==f)if(!u||"space"!==c&&"space"!==f)if(!l||"word"!==c&&"word"!==f)if("any"===c)o(Wr(Te("Any"),r));else if("digit"===c)o(Wr(Te("Nd",{negate:d}),r));else if("dot"===c);else if("text_segment"===c){if("strict"===i)throw new Error(pr(sn||(sn=dr(['Use of "X" requires non-strict accuracy'],['Use of "\\X" requires non-strict accuracy']))));var p="\\p{Emoji}(?:\\p{EMod}|\\uFE0F\\u20E3?|[\\x{E0020}-\\x{E007E}]+\\x{E007F})?",h=pr(un||(un=dr(["p{RI}{2}|","(?:‍",")*"],["\\p{RI}{2}|","(?:\\u200D",")*"])),p,p);o(qr(Ur(pr(ln||(ln=dr(["(?>\r\n|","|P{M}p{M}*)"],["(?>\\r\\n|","|\\P{M}\\p{M}*)"])),a?pr(cn||(cn=dr(["p{RGI_Emoji}"],["\\p{RGI_Emoji}"]))):h),{skipPropertyNameValidation:!0}),r))}else if("hex"===c)o(Wr(Te("AHex",{negate:d}),r));else if("newline"===c)o(qr(Ur(d?"[^\n]":"(?>\r\n?|[\n\v\f\u2028\u2029])"),r));else if("posix"===c)if(a||"graph"!==f&&"print"!==f)o(qr(Gr(Ur(Fr.get(f)),d),r));else{if("strict"===i)throw new Error('POSIX class "'.concat(f,'" requires min target ES2024 or non-strict accuracy'));var m={graph:"!-~",print:" -~"}[f];d&&(m="\0-".concat(fr(m.codePointAt(0)-1)).concat(fr(m.codePointAt(2)+1),"-􏿿")),o(qr(Ur("[".concat(m,"]")),r))}else if("property"===c)Er.has(Le(f))||(n.key="sc");else if("space"===c)o(Wr(Te("space",{negate:d}),r));else{if("word"!==c)throw new Error('Unexpected character set kind "'.concat(c,'"'));o(qr(Gr(Ur(Cr),d),r))}else o(Wr(Fe("word",{negate:d}),r));else o(qr(Gr(Ur("[\t-\r ]"),d),r));else o(Wr(Fe("digit",{negate:d}),r))},Directive:function(e){var t=e.node,n=e.parent,r=e.root,o=e.remove,i=e.replaceWith,a=e.removeAllPrevSiblings,s=e.removeAllNextSiblings,u=t.kind,l=t.flags;if("flags"===u)if(l.enable||l.disable){var c=Oe({flags:l});c.body[0].body=s(),i(qr(c,n),{traverse:!0})}else o();else{if("keep"!==u)throw new Error('Unexpected directive kind "'.concat(u,'"'));var d=r.body[0],f=1===r.body.length&&ie(d,{type:"Group"})&&1===d.body[0].body.length?d.body[0]:r;if(n.parent!==f||f.body.length>1)throw new Error(pr(dn||(dn=dr(['Uses "K" in a way that\'s unsupported'],['Uses "\\K" in a way that\'s unsupported']))));var p=Me({behind:!0});p.body[0].body=a(),i(qr(p,n))}},Flags:function(e){var t,n=e.node,r=e.parent;if(n.posixIsAscii)throw new Error('Unsupported flag "P"');if("word"===n.textSegmentMode)throw new Error('Unsupported flag "y{w}"');["digitIsAscii","extended","posixIsAscii","spaceIsAscii","wordIsAscii","textSegmentMode"].forEach((function(e){return delete n[e]})),Object.assign(n,{global:!1,hasIndices:!1,multiline:!1,sticky:null!==(t=n.sticky)&&void 0!==t&&t}),r.options={disable:{x:!0,n:!0},force:{v:!0}}},Group:function(e){var t=e.node;if(t.flags){var n=t.flags,r=n.enable,o=n.disable;(null==r?void 0:r.extended)&&delete r.extended,(null==o?void 0:o.extended)&&delete o.extended,(null==r?void 0:r.dotAll)&&(null==o?void 0:o.dotAll)&&delete r.dotAll,(null==r?void 0:r.ignoreCase)&&(null==o?void 0:o.ignoreCase)&&delete r.ignoreCase,r&&!Object.keys(r).length&&delete t.flags.enable,o&&!Object.keys(o).length&&delete t.flags.disable,!t.flags.enable&&!t.flags.disable&&delete t.flags}},LookaroundAssertion:function(e,t){"lookbehind"===e.node.kind&&(t.passedLookbehind=!0)},NamedCallout:function(e){var t=e.node,n=e.parent,r=e.replaceWith,o=t.kind;if("fail"!==o)throw new Error('Unsupported named callout "(*'.concat(o.toUpperCase(),'"'));r(qr(Me({negate:!0}),n))},Quantifier:function(e){var t=e.node;if("Quantifier"===t.body.type){var n=Oe();n.body[0].body.push(t.body),t.body=qr(n,t)}},Regex:{enter:function(e,t){var n,r=e.node,o=t.supportedGNodes,i=[],a=!1,s=!1,u=rr(r.body);try{for(u.s();!(n=u.n()).done;){var l=n.value;if(1===l.body.length&&"search_start"===l.body[0].kind)l.body.pop();else{var c=zr(l.body);c?(a=!0,Array.isArray(c)?i.push.apply(i,or(c)):i.push(c)):s=!0}}}catch(e){u.e(e)}finally{u.f()}a&&!s&&i.forEach((function(e){return o.add(e)}))},exit:function(e,t){var n=t.accuracy,r=t.passedLookbehind,o=t.strategy;if("strict"===n&&r&&o)throw new Error(pr(fn||(fn=dr(['Uses "G" in a way that requires non-strict accuracy'],['Uses "\\G" in a way that requires non-strict accuracy']))))}},Subroutine:function(e,t){var n=e.node,r=t.jsGroupNameMap,o=n.ref;"string"!=typeof o||$r(o)||(o=Lr(o,r),n.ref=o)}},Tr={Backreference:function(e,t){var n=e.node,r=t.multiplexCapturesToLeftByRef,o=t.reffedNodesByReferencer,i=n.orphan,a=n.ref;i||o.set(n,or(r.get(a).map((function(e){return e.node}))))},CapturingGroup:{enter:function(e,t){var n,r=e.node,o=e.parent,i=e.replaceWith,a=(e.skip,t.groupOriginByCopy),s=t.groupsByName,u=t.multiplexCapturesToLeftByRef,l=t.openRefs,c=t.reffedNodesByReferencer,d=a.get(r);if(d&&l.has(r.number)){var f=Wr(Rr(r.number),o);return c.set(f,l.get(r.number)),void i(f)}l.set(r.number,r),u.set(r.number,[]),r.name&&vr(u,r.name,[]);for(var p=u.get(null!==(n=r.name)&&void 0!==n?n:r.number),h=0;h<p.length;h++){var m=p[h];if(d===m.node||d&&d===m.origin||r===m.origin){p.splice(h,1);break}}if(u.get(r.number).push({node:r,origin:d}),r.name&&u.get(r.name).push({node:r,origin:d}),r.name){var v=vr(s,r.name,new Map),g=!1;if(d)g=!0;else{var y,b=rr(v.values());try{for(b.s();!(y=b.n()).done;)if(!y.value.hasDuplicateNameToRemove){g=!0;break}}catch(e){b.e(e)}finally{b.f()}}s.get(r.name).set(r,{node:r,hasDuplicateNameToRemove:g})}},exit:function(e,t){var n=e.node;t.openRefs.delete(n.number)}},Group:{enter:function(e,t){var n=e.node;t.prevFlags=t.currentFlags,n.flags&&(t.currentFlags=mr(t.currentFlags,n.flags))},exit:function(e,t){t.currentFlags=t.prevFlags}},Subroutine:function(e,t){var n,r,o,i,a=e.node,s=e.parent,u=e.replaceWith,l=a.isRecursive,c=a.ref;if(l){for(var d=s;(d=d.parent)&&("CapturingGroup"!==d.type||d.name!==c&&d.number!==c););t.reffedNodesByReferencer.set(a,d)}else{var f=t.subroutineRefMap.get(c),p=0===c,h=p?Rr(0):_r(f,t.groupOriginByCopy,null),m=h;if(!p){var v=Ir(function(e,t){for(var n=[];e=e.parent;)t&&!t(e)||n.push(e);return n}(f,(function(e){return"Group"===e.type&&!!e.flags}))),g=v?mr(t.globalFlags,v):t.globalFlags;(function(e,t){return e.dotAll===t.dotAll&&e.ignoreCase===t.ignoreCase})(g,t.currentFlags)||(m=Oe({flags:(n=g,r=n.dotAll,o=n.ignoreCase,i={},(r||o)&&(i.enable={},r&&(i.enable.dotAll=!0),o&&(i.enable.ignoreCase=!0)),r&&o||(i.disable={},!r&&(i.disable.dotAll=!0),!o&&(i.disable.ignoreCase=!0)),i)})).body[0].body.push(h)}u(qr(m,s),{traverse:!p})}}},Nr={Backreference:function(e,t){var n=e.node,r=e.parent,o=e.replaceWith;if(n.orphan)t.highestOrphanBackref=Math.max(t.highestOrphanBackref,n.ref);else{var i=t.reffedNodesByReferencer.get(n).filter((function(e){return function(e,t){var n=t;do{if("Regex"===n.type)return!1;if("Alternative"!==n.type){if(n===e)return!1;var r,o=rr(Hr(n.parent));try{for(o.s();!(r=o.n()).done;){var i=r.value;if(i===n)break;if(i===e||Vr(i,e))return!0}}catch(e){o.e(e)}finally{o.f()}}}while(n=n.parent);throw new Error("Unexpected path")}(e,n)}));i.length?i.length>1?o(qr(Oe({atomic:!0,body:i.reverse().map((function(e){return Ce({body:[Ee(e.number)]})}))}),r)):n.ref=i[0].number:o(qr(Me({negate:!0}),r))}},CapturingGroup:function(e,t){var n=e.node;n.number=++t.numCapturesToLeft,n.name&&t.groupsByName.get(n.name).get(n).hasDuplicateNameToRemove&&delete n.name},Regex:{exit:function(e,t){for(var n=e.node,r=Math.max(t.highestOrphanBackref-t.numCapturesToLeft,0),o=0;o<r;o++){var i=xe();n.body.at(-1).body.push(i)}}},Subroutine:function(e,t){var n=e.node;n.isRecursive&&0!==n.ref&&(n.ref=t.reffedNodesByReferencer.get(n).number)}};function jr(e){Ve(e,{"*":function(e){var t=e.node,n=e.parent;t.parent=n}})}function _r(e,t,n,r){for(var o=Array.isArray(e)?[]:{},i=0,a=Object.entries(e);i<a.length;i++){var s=nr(a[i],2),u=s[0],l=s[1];if("parent"===u)o.parent=Array.isArray(n)?r:n;else if(l&&"object"===tr(l))o[u]=_r(l,t,o,n);else{var c;"type"===u&&"CapturingGroup"===l&&t.set(o,null!==(c=t.get(e))&&void 0!==c?c:e),o[u]=l}}return o}function Rr(e){var t=Pe(e);return t.isRecursive=!0,t}function Lr(e,t){if(t.has(e))return t.get(e);var n="$".concat(t.size,"_").concat(e.replace(/^(?:[\0-#%-@\[-\^`\{-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u036F\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482-\u0489\u0530\u0557\u0558\u055A-\u055F\u0589-\u05CF\u05EB-\u05EE\u05F3-\u061F\u064B-\u066D\u0670\u06D4\u06D6-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u06FD\u06FE\u0700-\u070F\u0711\u0730-\u074C\u07A6-\u07B0\u07B2-\u07C9\u07EB-\u07F3\u07F6-\u07F9\u07FB-\u07FF\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u083F\u0859-\u085F\u086B-\u086F\u0888\u088F-\u089F\u08CA-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962-\u0970\u0981-\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA-\u09BC\u09BE-\u09CD\u09CF-\u09DB\u09DE\u09E2-\u09EF\u09F2-\u09FB\u09FD-\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A-\u0A58\u0A5D\u0A5F-\u0A71\u0A75-\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA-\u0ABC\u0ABE-\u0ACF\u0AD1-\u0ADF\u0AE2-\u0AF8\u0AFA-\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A-\u0B3C\u0B3E-\u0B5B\u0B5E\u0B62-\u0B70\u0B72-\u0B82\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BCF\u0BD1-\u0C04\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C3E-\u0C57\u0C5B\u0C5C\u0C5E\u0C5F\u0C62-\u0C7F\u0C81-\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA-\u0CBC\u0CBE-\u0CDC\u0CDF\u0CE2-\u0CF0\u0CF3-\u0D03\u0D0D\u0D11\u0D3B\u0D3C\u0D3E-\u0D4D\u0D4F-\u0D53\u0D57-\u0D5E\u0D62-\u0D79\u0D80-\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0E00\u0E31\u0E34-\u0E3F\u0E47-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EB1\u0EB4-\u0EBC\u0EBE\u0EBF\u0EC5\u0EC7-\u0EDB\u0EE0-\u0EFF\u0F01-\u0F3F\u0F48\u0F6D-\u0F87\u0F8D-\u0FFF\u102B-\u103E\u1040-\u104F\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u1712-\u171E\u1732-\u173F\u1752-\u175F\u176D\u1771-\u177F\u17B4-\u17D6\u17D8-\u17DB\u17DD-\u181F\u1879-\u187F\u18A9\u18AB-\u18AF\u18F6-\u18FF\u191F-\u194F\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19FF\u1A17-\u1A1F\u1A55-\u1AA6\u1AA8-\u1B04\u1B34-\u1B44\u1B4D-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BFF\u1C24-\u1C4C\u1C50-\u1C59\u1C7E\u1C7F\u1C8B-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1CFB-\u1CFF\u1DC0-\u1DFF\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116\u2117\u211E-\u2123\u2125\u2127\u2129\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u215F\u2189-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7F\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF-\u3004\u3008-\u3020\u302A-\u3030\u3036\u3037\u303D-\u3040\u3097-\u309A\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u319F\u31C0-\u31EF\u3200-\u33FF\u4DC0-\u4DFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA620-\uA629\uA62C-\uA63F\uA66F-\uA67E\uA69E\uA69F\uA6F0-\uA716\uA720\uA721\uA789\uA78A\uA7CE\uA7CF\uA7D2\uA7D4\uA7DD-\uA7F1\uA802\uA806\uA80B\uA823-\uA83F\uA874-\uA881\uA8B4-\uA8F1\uA8F8-\uA8FA\uA8FC\uA8FF-\uA909\uA926-\uA92F\uA947-\uA95F\uA97D-\uA983\uA9B3-\uA9CE\uA9D0-\uA9DF\uA9E5\uA9F0-\uA9F9\uA9FF\uAA29-\uAA3F\uAA43\uAA4C-\uAA5F\uAA77-\uAA79\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAC3-\uAADA\uAADE\uAADF\uAAEB-\uAAF1\uAAF5-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABE3-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB1E\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFE6F\uFE75\uFEFD-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD3F\uDD75-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEFF\uDF20-\uDF2C\uDF4B-\uDF4F\uDF76-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDD6F\uDD7B\uDD8B\uDD93\uDD96\uDDA2\uDDB2\uDDBA\uDDBD-\uDDBF\uDDF4-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDF7F\uDF86\uDFB1\uDFBB-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE01-\uDE0F\uDE14\uDE18\uDE36-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE5-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCFF\uDD24-\uDD49\uDD66-\uDD6E\uDD86-\uDE7F\uDEAA-\uDEAF\uDEB2-\uDEC1\uDEC5-\uDEFF\uDF1D-\uDF26\uDF28-\uDF2F\uDF46-\uDF6F\uDF82-\uDFAF\uDFC5-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC00-\uDC02\uDC38-\uDC70\uDC73\uDC74\uDC76-\uDC82\uDCB0-\uDCCF\uDCE9-\uDD02\uDD27-\uDD43\uDD45\uDD46\uDD48-\uDD4F\uDD73-\uDD75\uDD77-\uDD82\uDDB3-\uDDC0\uDDC5-\uDDD9\uDDDB\uDDDD-\uDDFF\uDE12\uDE2C-\uDE3E\uDE41-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEDF-\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A-\uDF3C\uDF3E-\uDF4F\uDF51-\uDF5C\uDF62-\uDF7F\uDF8A\uDF8C\uDF8D\uDF8F\uDFB6\uDFB8-\uDFD0\uDFD2\uDFD4-\uDFFF]|\uD805[\uDC35-\uDC46\uDC4B-\uDC5E\uDC62-\uDC7F\uDCB0-\uDCC3\uDCC6\uDCC8-\uDD7F\uDDAF-\uDDD7\uDDDC-\uDDFF\uDE30-\uDE43\uDE45-\uDE7F\uDEAB-\uDEB7\uDEB9-\uDEFF\uDF1B-\uDF3F\uDF47-\uDFFF]|\uD806[\uDC2C-\uDC9F\uDCE0-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD30-\uDD3E\uDD40\uDD42-\uDD9F\uDDA8\uDDA9\uDDD1-\uDDE0\uDDE2\uDDE4-\uDDFF\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE4F\uDE51-\uDE5B\uDE8A-\uDE9C\uDE9E-\uDEAF\uDEF9-\uDFBF\uDFE1-\uDFFF]|\uD807[\uDC09\uDC2F-\uDC3F\uDC41-\uDC71\uDC90-\uDCFF\uDD07\uDD0A\uDD31-\uDD45\uDD47-\uDD5F\uDD66\uDD69\uDD8A-\uDD97\uDD99-\uDEDF\uDEF3-\uDF01\uDF03\uDF11\uDF34-\uDFAF\uDFB1-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD812-\uD817\uD819\uD824-\uD82A\uD82D\uD82E\uD830-\uD834\uD836\uD83C-\uD83F\uD87C\uD87D\uD87F\uD889-\uDBFF][\uDC00-\uDFFF]|\uD80B[\uDC00-\uDF8F\uDFF1-\uDFFF]|\uD80D[\uDC30-\uDC40\uDC47-\uDC5F]|\uD810[\uDFFB-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD818[\uDC00-\uDCFF\uDD1E-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F-\uDE6F\uDEBF-\uDECF\uDEEE-\uDEFF\uDF30-\uDF3F\uDF44-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDD3F\uDD6D-\uDE3F\uDE80-\uDEFF\uDF4B-\uDF4F\uDF51-\uDF92\uDFA0-\uDFDF\uDFE2\uDFE4-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFE\uDD09-\uDFFF]|\uD82B[\uDC00-\uDFEF\uDFF4\uDFFC\uDFFF]|\uD82C[\uDD23-\uDD31\uDD33-\uDD4F\uDD53\uDD54\uDD56-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC-\uDFFF]|\uD837[\uDC00-\uDEFF\uDF1F-\uDF24\uDF2B-\uDFFF]|\uD838[\uDC00-\uDC2F\uDC6E-\uDCFF\uDD2D-\uDD36\uDD3E-\uDD4D\uDD4F-\uDE8F\uDEAE-\uDEBF\uDEEC-\uDFFF]|\uD839[\uDC00-\uDCCF\uDCEC-\uDDCF\uDDEE\uDDEF\uDDF1-\uDFDF\uDFE7\uDFEC\uDFEF\uDFFF]|\uD83A[\uDCC5-\uDCFF\uDD44-\uDD4A\uDD4C-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD869[\uDEE0-\uDEFF]|\uD86D[\uDF3A-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFEF]|\uD87B[\uDE5E-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDF4F]|\uD888[\uDFB0-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])|(?:[\0-#%-\/:-@\[-\^`\{-\xA9\xAB-\xB4\xB6\xB8\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0378\u0379\u037E\u0380-\u0385\u038B\u038D\u03A2\u03F6\u0482\u0488\u0489\u0530\u0557\u0558\u055A-\u055F\u0589-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05EB-\u05EE\u05F3-\u060F\u061B-\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070F\u074B\u074C\u07B2-\u07BF\u07F6-\u07F9\u07FB\u07FC\u07FE\u07FF\u082E-\u083F\u085C-\u085F\u086B-\u086F\u0888\u088F-\u0896\u08E2\u0964\u0965\u0970\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09F2-\u09FB\u09FD\u09FF\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF0-\u0AF8\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B54\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B70\u0B72-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BF0-\u0BFF\u0C0D\u0C11\u0C29\u0C3A\u0C3B\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5B\u0C5C\u0C5E\u0C5F\u0C64\u0C65\u0C70-\u0C7F\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDC\u0CDF\u0CE4\u0CE5\u0CF0\u0CF4-\u0CFF\u0D0D\u0D11\u0D45\u0D49\u0D4F-\u0D53\u0D58-\u0D5E\u0D64\u0D65\u0D70-\u0D79\u0D80\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DE5\u0DF0\u0DF1\u0DF4-\u0E00\u0E3B-\u0E3F\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EBE\u0EBF\u0EC5\u0EC7\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F17\u0F1A-\u0F1F\u0F2A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F48\u0F6D-\u0F70\u0F85\u0F98\u0FBD-\u0FC5\u0FC7-\u0FFF\u104A-\u104F\u109E\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u1360-\u1368\u1372-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u1716-\u171E\u1735-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17D4-\u17D6\u17D8-\u17DB\u17DE\u17DF\u17EA-\u180A\u180E\u181A-\u181F\u1879-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191F\u192C-\u192F\u193C-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19FF\u1A1C-\u1A1F\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1AAF\u1ABE\u1ACF-\u1AFF\u1B4D-\u1B4F\u1B5A-\u1B6A\u1B74-\u1B7F\u1BF4-\u1BFF\u1C38-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C8B-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CCF\u1CD3\u1CFB-\u1CFF\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u200B\u200E-\u203E\u2041-\u2053\u2055-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u20CF\u20DD-\u20E0\u20E2-\u20E4\u20F1-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116\u2117\u211E-\u2123\u2125\u2127\u2129\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u215F\u2189-\u2BFF\u2CE5-\u2CEA\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E00-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u3040\u3097\u3098\u30A0\u3100-\u3104\u3130\u318F-\u319F\u31C0-\u31EF\u3200-\u33FF\u4DC0-\u4DFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA670-\uA673\uA67E\uA6F2-\uA716\uA720\uA721\uA789\uA78A\uA7CE\uA7CF\uA7D2\uA7D4\uA7DD-\uA7F1\uA828-\uA82B\uA82D-\uA83F\uA874-\uA87F\uA8C6-\uA8CF\uA8DA-\uA8DF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA954-\uA95F\uA97D-\uA97F\uA9C1-\uA9CE\uA9DA-\uA9DF\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAAC3-\uAADA\uAADE\uAADF\uAAF0\uAAF1\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABEB\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFDFF\uFE10-\uFE1F\uFE30-\uFE32\uFE35-\uFE4C\uFE50-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF3E\uFF40\uFF5B-\uFF64\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD3F\uDD75-\uDDFC\uDDFE-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEDF\uDEE1-\uDEFF\uDF20-\uDF2C\uDF4B-\uDF4F\uDF7B-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDD6F\uDD7B\uDD8B\uDD93\uDD96\uDDA2\uDDB2\uDDBA\uDDBD-\uDDBF\uDDF4-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDF7F\uDF86\uDFB1\uDFBB-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE04\uDE07-\uDE0B\uDE14\uDE18\uDE36\uDE37\uDE3B-\uDE3E\uDE40-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE7-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCFF\uDD28-\uDD2F\uDD3A-\uDD3F\uDD66-\uDD68\uDD6E\uDD86-\uDE7F\uDEAA\uDEAD-\uDEAF\uDEB2-\uDEC1\uDEC5-\uDEFB\uDF1D-\uDF26\uDF28-\uDF2F\uDF51-\uDF6F\uDF86-\uDFAF\uDFC5-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC47-\uDC65\uDC76-\uDC7E\uDCBB-\uDCC1\uDCC3-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDCFF\uDD35\uDD40-\uDD43\uDD48-\uDD4F\uDD74\uDD75\uDD77-\uDD7F\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDFF\uDE12\uDE38-\uDE3D\uDE42-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEEB-\uDEEF\uDEFA-\uDEFF\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A\uDF45\uDF46\uDF49\uDF4A\uDF4E\uDF4F\uDF51-\uDF56\uDF58-\uDF5C\uDF64\uDF65\uDF6D-\uDF6F\uDF75-\uDF7F\uDF8A\uDF8C\uDF8D\uDF8F\uDFB6\uDFC1\uDFC3\uDFC4\uDFC6\uDFCB\uDFD4-\uDFE0\uDFE3-\uDFFF]|\uD805[\uDC4B-\uDC4F\uDC5A-\uDC5D\uDC62-\uDC7F\uDCC6\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDB6\uDDB7\uDDC1-\uDDD7\uDDDE-\uDDFF\uDE41-\uDE43\uDE45-\uDE4F\uDE5A-\uDE7F\uDEB9-\uDEBF\uDECA-\uDECF\uDEE4-\uDEFF\uDF1B\uDF1C\uDF2C-\uDF2F\uDF3A-\uDF3F\uDF47-\uDFFF]|\uD806[\uDC3B-\uDC9F\uDCEA-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD36\uDD39\uDD3A\uDD44-\uDD4F\uDD5A-\uDD9F\uDDA8\uDDA9\uDDD8\uDDD9\uDDE2\uDDE5-\uDDFF\uDE3F-\uDE46\uDE48-\uDE4F\uDE9A-\uDE9C\uDE9E-\uDEAF\uDEF9-\uDFBF\uDFE1-\uDFEF\uDFFA-\uDFFF]|\uD807[\uDC09\uDC37\uDC41-\uDC4F\uDC5A-\uDC71\uDC90\uDC91\uDCA8\uDCB7-\uDCFF\uDD07\uDD0A\uDD37-\uDD39\uDD3B\uDD3E\uDD48-\uDD4F\uDD5A-\uDD5F\uDD66\uDD69\uDD8F\uDD92\uDD99-\uDD9F\uDDAA-\uDEDF\uDEF7-\uDEFF\uDF11\uDF3B-\uDF3D\uDF43-\uDF4F\uDF5B-\uDFAF\uDFB1-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD812-\uD817\uD819\uD824-\uD82A\uD82D\uD82E\uD830-\uD832\uD83C\uD83D\uD83F\uD87C\uD87D\uD87F\uD889-\uDB3F\uDB41-\uDBFF][\uDC00-\uDFFF]|\uD80B[\uDC00-\uDF8F\uDFF1-\uDFFF]|\uD80D[\uDC30-\uDC3F\uDC56-\uDC5F]|\uD810[\uDFFB-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD818[\uDC00-\uDCFF\uDD3A-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDE6F\uDEBF\uDECA-\uDECF\uDEEE\uDEEF\uDEF5-\uDEFF\uDF37-\uDF3F\uDF44-\uDF4F\uDF5A-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDD3F\uDD6D-\uDD6F\uDD7A-\uDE3F\uDE80-\uDEFF\uDF4B-\uDF4E\uDF88-\uDF8E\uDFA0-\uDFDF\uDFE2\uDFE5-\uDFEF\uDFF2-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFE\uDD09-\uDFFF]|\uD82B[\uDC00-\uDFEF\uDFF4\uDFFC\uDFFF]|\uD82C[\uDD23-\uDD31\uDD33-\uDD4F\uDD53\uDD54\uDD56-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDC9C\uDC9F-\uDFFF]|\uD833[\uDC00-\uDCEF\uDCFA-\uDEFF\uDF2E\uDF2F\uDF47-\uDFFF]|\uD834[\uDC00-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDE41\uDE45-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC\uDFCD]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE9A\uDEA0\uDEB0-\uDFFF]|\uD837[\uDC00-\uDEFF\uDF1F-\uDF24\uDF2B-\uDFFF]|\uD838[\uDC07\uDC19\uDC1A\uDC22\uDC25\uDC2B-\uDC2F\uDC6E-\uDC8E\uDC90-\uDCFF\uDD2D-\uDD2F\uDD3E\uDD3F\uDD4A-\uDD4D\uDD4F-\uDE8F\uDEAF-\uDEBF\uDEFA-\uDFFF]|\uD839[\uDC00-\uDCCF\uDCFA-\uDDCF\uDDFB-\uDFDF\uDFE7\uDFEC\uDFEF\uDFFF]|\uD83A[\uDCC5-\uDCCF\uDCD7-\uDCFF\uDD4C-\uDD4F\uDD5A-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD83E[\uDC00-\uDFEF\uDFFA-\uDFFF]|\uD869[\uDEE0-\uDEFF]|\uD86D[\uDF3A-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFEF]|\uD87B[\uDE5E-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDF4F]|\uD888[\uDFB0-\uDFFF]|\uDB40[\uDC00-\uDCFF\uDDF0-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,"_"));return t.set(e,n),n}function Ir(e){var t=["dotAll","ignoreCase"],n={enable:{},disable:{}};return e.forEach((function(e){var r=e.flags;t.forEach((function(e){var t,o;null!==(t=r.enable)&&void 0!==t&&t[e]&&(delete n.disable[e],n.enable[e]=!0),null!==(o=r.disable)&&void 0!==o&&o[e]&&(n.disable[e]=!0)}))})),Object.keys(n.enable).length||delete n.enable,Object.keys(n.disable).length||delete n.disable,n.enable||n.disable?n:null}function Hr(e){if(!e)throw new Error("Node expected");var t=e.body;return Array.isArray(t)?t:t?[t]:null}function zr(e){var t=e.find((function(e){return"search_start"===e.kind||(n=e,r=ur({negate:null},{negate:!1}),"LookaroundAssertion"===n.type&&(null===r.negate||n.negate===r.negate)&&1===n.body.length&&ie(n.body[0],{type:"Assertion",kind:"search_start"}))||!("Assertion"===(t=e.type)||"Directive"===t||"LookaroundAssertion"===t);var t,n,r}));if(!t)return null;if("search_start"===t.kind)return t;if("LookaroundAssertion"===t.type)return t.body[0].body[0];if("CapturingGroup"===t.type||"Group"===t.type){var n,r=[],o=rr(t.body);try{for(o.s();!(n=o.n()).done;){var i=zr(n.value.body);if(!i)return null;Array.isArray(i)?r.push.apply(r,or(i)):r.push(i)}}catch(e){o.e(e)}finally{o.f()}return r}return null}function Vr(e,t){var n,r,o=rr(null!==(n=Hr(e))&&void 0!==n?n:[]);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(i===t||Vr(i,t))return!0}}catch(e){o.e(e)}finally{o.f()}return!1}function $r(e){return/^(?:[\$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[\$0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u0870-\u0887\u0889-\u088E\u0897-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1715\u171F-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B4C\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA827\uA82C\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF65-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDD40-\uDD65\uDD69-\uDD6D\uDD6F-\uDD85\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDEC2-\uDEC4\uDEFC-\uDF1C\uDF27\uDF30-\uDF50\uDF70-\uDF85\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC75\uDC7F-\uDCBA\uDCC2\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD47\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDCE-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E-\uDE41\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7-\uDFC0\uDFC2\uDFC5\uDFC7-\uDFCA\uDFCC-\uDFD3\uDFE1\uDFE2]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E-\uDC61\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDED0-\uDEE3\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39\uDF40-\uDF46]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B-\uDD43\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0\uDFF0-\uDFF9]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6\uDF00-\uDF10\uDF12-\uDF3A\uDF3E-\uDF42\uDF50-\uDF5A\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC40-\uDC55\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD39]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDD70-\uDD79\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFE4\uDFF0\uDFF1]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD833[\uDCF0-\uDCF9\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC30-\uDC6D\uDC8F\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAE\uDEC0-\uDEF9]|\uD839[\uDCD0-\uDCF9\uDDD0-\uDDFA\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]|\uDB40[\uDD00-\uDDEF])*$/.test(e)}function Ur(e,t){var n=we(e,ur(ur({},t),{},{unicodePropertyMap:Er})).body;return n.length>1||n[0].body.length>1?Oe({body:n}):n[0].body[0]}function Gr(e,t){return e.negate=t,e}function Wr(e,t){return e.parent=t,e}function qr(e,t){return jr(e),e.parent=t,e}var Kr={"*":{enter:function(e,t){var n=e.node;if(oo(n)){var r=t.getCurrentModI();t.pushModI(n.flags?mr({ignoreCase:r},n.flags).ignoreCase:r)}},exit:function(e,t){oo(e.node)&&t.popModI()}},Backreference:function(e,t){t.setHasCasedChar()},Character:function(e,t){var n=e.node;to(fr(n.value))&&t.setHasCasedChar()},CharacterClassRange:function(e,t){var n=e.node;(0,e.skip)(),no(n,{firstOnly:!0}).length&&t.setHasCasedChar()},CharacterSet:function(e,t){var n=e.node;"property"===n.kind&&Br.has(n.value)&&t.setHasCasedChar()}},Jr={Alternative:function(e,t,n){return e.body.map(n).join("")},Assertion:function(e){var t=e.kind,n=e.negate;if("string_end"===t)return"$";if("string_start"===t)return"^";if("word_boundary"===t)return pr(n?pn||(pn=dr(["B"],["\\B"])):hn||(hn=dr(["\b"],["\\b"])));throw new Error('Unexpected assertion kind "'.concat(t,'"'))},Backreference:function(e,t){var n=e.ref;if("number"!=typeof n)throw new Error("Unexpected named backref in transformed AST");if(!t.useFlagMods&&"strict"===t.accuracy&&t.currentFlags.ignoreCase&&!t.captureMap.get(n).ignoreCase)throw new Error("Use of case-insensitive backref to case-sensitive group requires target ES2025 or non-strict accuracy");return"\\"+n},CapturingGroup:function(e,t,n){var r=e.body,o=e.name,i=e.number,a={ignoreCase:t.currentFlags.ignoreCase},s=t.originMap.get(e);return s&&(a.hidden=!0,i>s.number&&(a.transferTo=s.number)),t.captureMap.set(i,a),"(".concat(o?"?<".concat(o,">"):"").concat(r.map(n).join("|"),")")},Character:function(e,t){var n=e.value,r=fr(n),o=ro(n,{escDigit:"Backreference"===t.lastNode.type,inCharClass:t.inCharClass,useFlagV:t.useFlagV});if(o!==r)return o;if(t.useAppliedIgnoreCase&&t.currentFlags.ignoreCase&&to(r)){var i=kr(r);return t.inCharClass?i.join(""):i.length>1?"[".concat(i.join(""),"]"):i[0]}return r},CharacterClass:function(e,t,n){var r=e.kind,o=e.negate,i=e.parent,a=e.body;if("intersection"===r&&!t.useFlagV)throw new Error("Use of class intersection requires min target ES2024");hr.bugFlagVLiteralHyphenIsRange&&t.useFlagV&&a.some(io)&&(a=[Se(45)].concat(or(a.filter((function(e){return!io(e)})))));var s=function(){return"[".concat(o?"^":"").concat(a.map(n).join("intersection"===r?"&&":""),"]")};if(!t.inCharClass){if((!t.useFlagV||hr.bugNestedClassIgnoresNegation)&&!o){var u=a.filter((function(e){return"CharacterClass"===e.type&&"union"===e.kind&&e.negate}));if(u.length){var l=Oe(),c=l.body[0];return l.parent=i,c.parent=l,a=a.filter((function(e){return!u.includes(e)})),e.body=a,a.length?(e.parent=c,c.body.push(e)):l.body.pop(),u.forEach((function(e){var t=Ce({body:[e]});e.parent=t,t.parent=l,l.body.push(t)})),n(l)}}t.inCharClass=!0;var d=s();return t.inCharClass=!1,d}var f=a[0];if("union"===r&&!o&&f&&((!t.useFlagV||!t.verbose)&&"union"===i.kind&&(!hr.bugFlagVLiteralHyphenIsRange||!t.useFlagV)||!t.verbose&&"intersection"===i.kind&&1===a.length&&"CharacterClassRange"!==f.type))return a.map(n).join("");if(!t.useFlagV&&"CharacterClass"===i.type)throw new Error("Use of nested character class requires min target ES2024");return s()},CharacterClassRange:function(e,t){var n=e.min.value,r=e.max.value,o={escDigit:!1,inCharClass:!0,useFlagV:t.useFlagV},i=ro(n,o),a=ro(r,o),s=new Set;if(t.useAppliedIgnoreCase&&t.currentFlags.ignoreCase){var u=function(e){for(var t=e.map((function(e){return e.codePointAt(0)})).sort((function(e,t){return e-t})),n=[],r=null,o=0;o<t.length;o++){var i;t[o+1]===t[o]+1?null!==(i=r)&&void 0!==i||(r=t[o]):null===r?n.push(t[o]):(n.push([r,t[o]]),r=null)}return n}(no(e));u.forEach((function(e){s.add(Array.isArray(e)?"".concat(ro(e[0],o),"-").concat(ro(e[1],o)):ro(e,o))}))}return"".concat(i,"-").concat(a).concat(or(s).join(""))},CharacterSet:function(e,t){var n=e.kind,r=e.negate,o=e.value,i=e.key;if("dot"===n)return t.currentFlags.dotAll?t.appliedGlobalFlags.dotAll||t.useFlagMods?".":"[^]":pr(mn||(mn=dr(["[^\n]"],["[^\\n]"])));if("digit"===n)return pr(r?vn||(vn=dr(["D"],["\\D"])):gn||(gn=dr(["d"],["\\d"])));if("property"===n){if(t.useAppliedIgnoreCase&&t.currentFlags.ignoreCase&&Br.has(o))throw new Error('Unicode property "'.concat(o,"\" can't be case-insensitive when other chars have specific case"));return"".concat(pr(r?yn||(yn=dr(["P"],["\\P"])):bn||(bn=dr(["p"],["\\p"]))),"{").concat(i?"".concat(i,"="):"").concat(o,"}")}if("word"===n)return pr(r?Dn||(Dn=dr(["W"],["\\W"])):wn||(wn=dr(["w"],["\\w"])));throw new Error('Unexpected character set kind "'.concat(n,'"'))},Flags:function(e,t){return(t.appliedGlobalFlags.ignoreCase?"i":"")+(e.dotAll?"s":"")+(e.sticky?"y":"")},Group:function(e,t,n){var r=e.atomic,o=e.body,i=e.flags,a=e.parent,s=t.currentFlags;i&&(t.currentFlags=mr(s,i));var u=o.map(n).join("|"),l=t.verbose||1!==o.length||"Quantifier"===a.type||r||t.useFlagMods&&i?"(?".concat(function(e,t,n){if(e)return">";var r="";if(t&&n){var o=t.enable,i=t.disable;r=(null!=o&&o.ignoreCase?"i":"")+(null!=o&&o.dotAll?"s":"")+(i?"-":"")+(null!=i&&i.ignoreCase?"i":"")+(null!=i&&i.dotAll?"s":"")}return"".concat(r,":")}(r,i,t.useFlagMods)).concat(u,")"):u;return t.currentFlags=s,l},LookaroundAssertion:function(e,t,n){var r=e.body,o=e.kind,i=e.negate,a="".concat("lookahead"===o?"":"<").concat(i?"!":"=");return"(?".concat(a).concat(r.map(n).join("|"),")")},Quantifier:function(e,t,n){return n(e.body)+(o=(r=e).kind,i=r.max,((a=r.min)||1!==i?a||i!==1/0?1===a&&i===1/0?"+":a===i?"{".concat(a,"}"):"{".concat(a,",").concat(i===1/0?"":i,"}"):"*":"?")+{greedy:"",lazy:"?",possessive:"+"}[o]);var r,o,i,a},Subroutine:function(e,t){var n=e.isRecursive,r=e.ref;if(!n)throw new Error("Unexpected non-recursive subroutine in transformed AST");var o=t.recursionLimit;return 0===r?"(?R=".concat(o,")"):pr(Cn||(Cn=dr(["g<","&R=",">"],["\\g<","&R=",">"])),r,o)}},Zr=new Set(["$","(",")","*","+",".","?","[","\\","]","^","{","|","}"]),Xr=new Set(["-","\\","]","^","["]),Yr=new Set(["(",")","-","/","[","\\","]","^","{","|","}","!","#","$","%","&","*","+",",",".",":",";","<","=",">","?","@","`","~"]),Qr=new Map([[9,pr(kn||(kn=dr(["\t"],["\\t"])))],[10,pr(En||(En=dr(["\n"],["\\n"])))],[11,pr(xn||(xn=dr(["\v"],["\\v"])))],[12,pr(Sn||(Sn=dr(["\f"],["\\f"])))],[13,pr(An||(An=dr(["\r"],["\\r"])))],[8232,pr(Fn||(Fn=dr(["\u2028"],["\\u2028"])))],[8233,pr(On||(On=dr(["\u2029"],["\\u2029"])))],[65279,pr(Mn||(Mn=dr(["\ufeff"],["\\uFEFF"])))]]),eo=/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u01BA\u01BC-\u01BF\u01C4-\u0293\u0295-\u02B8\u02C0\u02C1\u02E0-\u02E4\u0345\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0560-\u0588\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u10FF\u13A0-\u13F5\u13F8-\u13FD\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2134\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u217F\u2183\u2184\u24B6-\u24E9\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA640-\uA66D\uA680-\uA69D\uA722-\uA787\uA78B-\uA78E\uA790-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA7F6\uA7F8-\uA7FA\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A]|\uD801[\uDC00-\uDC4F\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDF80\uDF83-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD803[\uDC80-\uDCB2\uDCC0-\uDCF2\uDD50-\uDD65\uDD70-\uDD85]|\uD806[\uDCA0-\uDCDF]|\uD81B[\uDE40-\uDE7F]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF09\uDF0B-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D]|\uD83A[\uDD00-\uDD43]|\uD83C[\uDD30-\uDD49\uDD50-\uDD69\uDD70-\uDD89])$/;function to(e){return eo.test(e)}function no(e,t){var n=!(null==t||!t.firstOnly),r=e.min.value,o=e.max.value,i=[];if(r<65&&(65535===o||o>=131071)||65536===r&&o>=131071)return i;for(var a=r;a<=o;a++){var s=fr(a);if(to(s)){var u=kr(s).filter((function(e){var t=e.codePointAt(0);return t<r||t>o}));if(u.length&&(i.push.apply(i,or(u)),n))break}}return i}function ro(e,t){var n,r=t.escDigit,o=t.inCharClass,i=t.useFlagV;if(Qr.has(e))return Qr.get(e);if(e<32||e>126&&e<160||e>262143||r&&(n=e)>47&&n<58)return e>255?"\\u{".concat(e.toString(16).toUpperCase(),"}"):"\\x".concat(e.toString(16).toUpperCase().padStart(2,"0"));var a=o?i?Yr:Xr:Zr,s=fr(e);return(a.has(s)?"\\":"")+s}function oo(e){var t=e.type;return"CapturingGroup"===t||"Group"===t||"LookaroundAssertion"===t}function io(e){var t=e.type,n=e.value;return"Character"===t&&45===n}var ao=(Pn=new WeakMap,Tn=new WeakMap,Nn=new WeakMap,jn=new WeakMap,_n=new WeakMap,Rn=new WeakSet,Bn=function(e){function t(e,n,r){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=!(null==r||!r.lazyCompile);if(e instanceof RegExp){if(r)throw new Error("Cannot provide options when copying a regexp");var a=e;qn(Vn(o=zn(this,t,[a,n])),Rn),Zn(Vn(o),Pn,new Map),Zn(Vn(o),Tn,null),Zn(Vn(o),Nn,void 0),Zn(Vn(o),jn,null),Zn(Vn(o),_n,null),lr(Vn(o),"rawOptions",{}),Yn(Nn,Vn(o),a.source),a instanceof t&&(Yn(Pn,Vn(o),Qn(Pn,a)),Yn(jn,Vn(o),Qn(jn,a)),Yn(_n,Vn(o),Qn(_n,a)),o.rawOptions=a.rawOptions)}else{var s=ur({hiddenCaptures:[],strategy:null,transfers:[]},r);qn(Vn(o=zn(this,t,[i?"":e,n])),Rn),Zn(Vn(o),Pn,new Map),Zn(Vn(o),Tn,null),Zn(Vn(o),Nn,void 0),Zn(Vn(o),jn,null),Zn(Vn(o),_n,null),lr(Vn(o),"rawOptions",{}),Yn(Nn,Vn(o),e),Yn(Pn,Vn(o),function(e,t){var n,r=new Map,o=rr(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;r.set(i,{hidden:!0})}}catch(e){o.e(e)}finally{o.f()}var a,s=rr(t);try{for(s.s();!(a=s.n()).done;){var u,l=nr(a.value,2),c=l[0],d=rr(l[1]);try{for(d.s();!(u=d.n()).done;)vr(r,u.value,{}).transferTo=c}catch(e){d.e(e)}finally{d.f()}}}catch(e){s.e(e)}finally{s.f()}return r}(s.hiddenCaptures,s.transfers)),Yn(_n,Vn(o),s.strategy),o.rawOptions=null!=r?r:{}}return i||Yn(Tn,Vn(o),o),Vn(o)}return $n(t,e),function(e,t){return t&&Hn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"source",get:function(){return Qn(Nn,this)||"(?:)"}},{key:"exec",value:function(e){if(!Qn(Tn,this)){var n=this.rawOptions,r=(n.lazyCompile,function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,Ln));Yn(Tn,this,new t(Qn(Nn,this),this.flags,r))}var o=this.global||this.sticky,i=this.lastIndex;if("clip_search"===Qn(_n,this)&&o&&i){this.lastIndex=0;var a=er(Rn,this,so).call(this,e.slice(i));return a&&(function(e,t,n,r){if(e.index+=t,e.input=n,r){for(var o=e.indices,i=0;i<o.length;i++){var a=o[i];a&&(o[i]=[a[0]+t,a[1]+t])}var s=o.groups;s&&Object.keys(s).forEach((function(e){var n=s[e];n&&(s[e]=[n[0]+t,n[1]+t])}))}}(a,i,e,this.hasIndices),this.lastIndex+=i),a}return er(Rn,this,so).call(this,e)}}])}(Un(RegExp)));function so(e){Qn(Tn,this).lastIndex=this.lastIndex;var t=function(e,t,n){var r=Kn(Jn(e),"exec",n);return r}(Bn.prototype,0,this).call(Qn(Tn,this),e);if(this.lastIndex=Qn(Tn,this).lastIndex,!t||!Qn(Pn,this).size)return t;var n,r=or(t);t.length=1,this.hasIndices&&(n=or(t.indices),t.indices.length=1);for(var o=[0],i=1;i<r.length;i++){var a,s=null!==(a=Qn(Pn,this).get(i))&&void 0!==a?a:{},u=s.hidden,l=s.transferTo;if(u?o.push(null):(o.push(t.length),t.push(r[i]),this.hasIndices&&t.indices.push(n[i])),l&&void 0!==r[i]){var c=o[l];if(!c)throw new Error('Invalid capture transfer to "'.concat(c,'"'));if(t[c]=r[i],this.hasIndices&&(t.indices[c]=n[i]),t.groups){Qn(jn,this)||Yn(jn,this,uo(this.source));var d=Qn(jn,this).get(l);d&&(t.groups[d]=r[i],this.hasIndices&&(t.indices.groups[d]=n[i]))}}}return t}function uo(e){for(var t,n=In(/(\((?:\?<(?![!=])((?:[\0-=\?-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)>|(?!\?)))|\\?(?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,{capture:1,name:2}),r=new Map,o=0,i=0;t=n.exec(e);){var a=t,s=a[0],u=a.groups,l=u.capture,c=u.name;"["===s?o++:o?"]"===s&&o--:l&&(i++,c&&r.set(i,c))}return r}function lo(e,t){var n=function(e,t){var n=Dr(t),r=function(e,t){var n=ur({accuracy:"default",asciiWordBoundaries:!1,avoidSubclass:!1,bestEffortTarget:"ES2025"},t);jr(e);var r={accuracy:n.accuracy,asciiWordBoundaries:n.asciiWordBoundaries,avoidSubclass:n.avoidSubclass,flagDirectivesByAlt:new Map,jsGroupNameMap:new Map,minTargetEs2024:gr(n.bestEffortTarget,"ES2024"),passedLookbehind:!1,strategy:null,subroutineRefMap:new Map,supportedGNodes:new Set,digitIsAscii:e.flags.digitIsAscii,spaceIsAscii:e.flags.spaceIsAscii,wordIsAscii:e.flags.wordIsAscii};Ve(e,Pr,r);var o={dotAll:e.flags.dotAll,ignoreCase:e.flags.ignoreCase},i={currentFlags:o,prevFlags:null,globalFlags:o,groupOriginByCopy:new Map,groupsByName:new Map,multiplexCapturesToLeftByRef:new Map,openRefs:new Map,reffedNodesByReferencer:new Map,subroutineRefMap:r.subroutineRefMap};return Ve(e,Tr,i),Ve(e,Nr,{groupsByName:i.groupsByName,highestOrphanBackref:0,numCapturesToLeft:0,reffedNodesByReferencer:i.reffedNodesByReferencer}),e._originMap=i.groupOriginByCopy,e._strategy=r.strategy,e}(we(e,{flags:n.flags,normalizeUnknownPropertyNames:!0,rules:{captureGroup:n.rules.captureGroup,singleline:n.rules.singleline},skipBackrefValidation:n.rules.allowOrphanBackrefs,unicodePropertyMap:Er}),{accuracy:n.accuracy,asciiWordBoundaries:n.rules.asciiWordBoundaries,avoidSubclass:n.avoidSubclass,bestEffortTarget:n.target}),o=function(e,t){var n=Dr(t),r=gr(n.target,"ES2024"),o=gr(n.target,"ES2025"),i=n.rules.recursionLimit;if(!Number.isInteger(i)||i<2||i>20)throw new Error("Invalid recursionLimit; use 2-20");var a=null,s=null;if(!o){var u=[e.flags.ignoreCase];Ve(e,Kr,{getCurrentModI:function(){return u.at(-1)},popModI:function(){u.pop()},pushModI:function(e){u.push(e)},setHasCasedChar:function(){u.at(-1)?a=!0:s=!0}})}var l={dotAll:e.flags.dotAll,ignoreCase:!(!e.flags.ignoreCase&&!a||s)},c=e,d={accuracy:n.accuracy,appliedGlobalFlags:l,captureMap:new Map,currentFlags:{dotAll:e.flags.dotAll,ignoreCase:e.flags.ignoreCase},inCharClass:!1,lastNode:c,originMap:e._originMap,recursionLimit:i,useAppliedIgnoreCase:!(o||!a||!s),useFlagMods:o,useFlagV:r,verbose:n.verbose};function f(e){return d.lastNode=c,c=e,function(e,t){if(null==e)throw new Error(null!=t?t:"Value expected");return e}(Jr[e.type],'Unexpected node type "'.concat(e.type,'"'))(e,d,f)}var p={pattern:e.body.map(f).join("|"),flags:f(e.flags),options:ur({},e.options)};return r||(delete p.options.force.v,p.options.disable.v=!0,p.options.unicodeSetsPlugin=null),p._captureTransfers=new Map,p._hiddenCaptures=[],d.captureMap.forEach((function(e,t){e.hidden&&p._hiddenCaptures.push(t),e.transferTo&&vr(p._captureTransfers,e.transferTo,[]).push(t)})),p}(r,n),i=function(e,t){var n,r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(Object(n),!0).forEach((function(t){Ft(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({hiddenCaptures:[],mode:"plugin"},t),o=r.hiddenCaptures,i=r.mode,a=null!==(n=null==t?void 0:t.captureTransfers)&&void 0!==n?n:new Map;if(!new RegExp(Pt,"su").test(e))return{pattern:e,captureTransfers:a,hiddenCaptures:o};if("plugin"===i&&at(e,Mt(ht||(ht=Ot(["(?(DEFINE)"],["\\(\\?\\(DEFINE\\)"]))),rt.DEFAULT))throw new Error("DEFINE groups cannot be used with recursion");var s,u=[],l=at(e,Mt(mt||(mt=Ot(["\\[1-9]"],["\\\\[1-9]"]))),rt.DEFAULT),c=new Map,d=[],f=!1,p=0,h=0;for(jt.lastIndex=0;s=jt.exec(e);){var m=s,v=m[0],g=m.groups,y=g.captureName,b=g.rDepth,D=g.gRNameOrNum,w=g.gRDepth;if("["===v)p++;else if(p)"]"===v&&p--;else{if(b){if(Rt(b),f)throw new Error(_t);if(l)throw new Error("".concat("external"===i?"Backrefs":"Numbered backrefs"," cannot be used with global recursion"));var C=e.slice(0,s.index),k=e.slice(jt.lastIndex);if(at(k,Pt,rt.DEFAULT))throw new Error(_t);var E=+b-1;e=Lt(C,k,E,!1,o,u,h),a=Ht(a,C,E,u.length,0,h);break}if(D){Rt(w);var x,S=!1,A=xt(d);try{for(A.s();!(x=A.n()).done;){var F=x.value;if(F.name===D||F.num===+D){if(S=!0,F.hasRecursedWithin)throw new Error(_t);break}}}catch(e){A.e(e)}finally{A.f()}if(!S)throw new Error(Mt(vt||(vt=Ot(['Recursive g cannot be used outside the referenced group "','"'],['Recursive \\g cannot be used outside the referenced group "','"'])),"external"===i?D:Mt(gt||(gt=Ot(["g<","&R=",">"],["\\g<","&R=",">"])),D,w)));var O=c.get(D),M=st(e,O);if(l&&at(M,Mt(yt||(yt=Ot(["","|((?!?)"],["","|\\((?!\\?)"])),Tt),rt.DEFAULT))throw new Error("".concat("external"===i?"Backrefs":"Numbered backrefs"," cannot be used with recursion of capturing groups"));var B=e.slice(O,s.index),P=M.slice(B.length+v.length),T=u.length,N=+w-1,j=Lt(B,P,N,!0,o,u,h);a=Ht(a,B,N,u.length-T,T,h);var _=e.slice(0,O),R=e.slice(O+M.length);e="".concat(_).concat(j).concat(R),jt.lastIndex+=j.length-v.length-B.length-P.length,d.forEach((function(e){return e.hasRecursedWithin=!0})),f=!0}else if(y)h++,c.set(String(h),jt.lastIndex),c.set(y,jt.lastIndex),d.push({num:h,name:y});else if("("===v[0]){var L="("===v;L&&(h++,c.set(String(h),jt.lastIndex)),d.push(L?{num:h}:{})}else")"===v&&d.pop()}}return o.push.apply(o,u),{pattern:e,captureTransfers:a,hiddenCaptures:o}}(o.pattern,{captureTransfers:o._captureTransfers,hiddenCaptures:o._hiddenCaptures,mode:"external"}),a=function(e,t){var n,r,o=null!==(n=null==t?void 0:t.hiddenCaptures)&&void 0!==n?n:[],i=null!==(r=null==t?void 0:t.captureTransfers)&&void 0!==r?r:new Map;if(!/\(\?>/.test(e))return{pattern:e,captureTransfers:i,hiddenCaptures:o};var a,s=[0],u=[],l=0,c=0,d=NaN;do{a=!1;var f=0,p=0,h=!1,m=void 0;wt.lastIndex=Number.isNaN(d)?0:d+7;for(var v=function(){var t=m,n=t[0],r=t.index,v=t.groups,g=v.capturingStart,y=v.noncapturingStart;if("["===n)f++;else if(f)"]"===n&&f--;else if("(?>"!==n||h){if(h&&y)p++;else if(g)h?p++:(l++,s.push(l+c));else if(")"===n&&h){if(!p){c++;var b=l+c;if(e="".concat(e.slice(0,d)).concat("(?:(?=(").concat(e.slice(d+3,r),"))<$$").concat(b,">)").concat(e.slice(r+1)),a=!0,u.push(b),Je(o,b),i.size){var D=new Map;i.forEach((function(e,t){D.set(t>=b?t+1:t,e.map((function(e){return e>=b?e+1:e})))})),i=D}return 1}p--}}else d=r,h=!0};(m=wt.exec(e))&&!v(););}while(a);return o.push.apply(o,u),e=ot(e,String.raw(et||(et=ut(["\\(?<backrefNum>[1-9]d*)|<$$(?<wrappedBackrefNum>d+)>"],["\\\\(?<backrefNum>[1-9]\\d*)|<\\$\\$(?<wrappedBackrefNum>\\d+)>"]))),(function(e){var t=e[0],n=e.groups,r=n.backrefNum,o=n.wrappedBackrefNum;if(r){var i=+r;if(i>s.length-1)throw new Error('Backref "'.concat(t,'" greater than number of captures'));return"\\".concat(s[i])}return"\\".concat(o)}),rt.DEFAULT),{pattern:e,captureTransfers:i,hiddenCaptures:o}}(function(e){if(!new RegExp("".concat(Ct,"\\+")).test(e))return{pattern:e};var t,n,r,o,i=[],a=null,s=null,u="",l=0;for(kt.lastIndex=0;t=kt.exec(e);){var c=t,d=c[0],f=c.index,p=c.groups,h=p.qBase,m=p.qMod,v=p.invalidQ;if("["===d)l||(s=f),l++;else if("]"===d)l?l--:s=null;else if(!l)if("+"===m&&u&&!u.startsWith("(")){if(v)throw new Error('Invalid quantifier "'.concat(d,'"'));var g=-1;if(/^\{\d+\}$/.test(h))n=e,r=f+h.length,o=m,e=n.slice(0,r)+""+n.slice(r+o.length);else{if(")"===u||"]"===u){var y=")"===u?a:s;if(null===y)throw new Error('Invalid unmatched "'.concat(u,'"'));e="".concat(e.slice(0,y),"(?>").concat(e.slice(y,f)).concat(h,")").concat(e.slice(f+d.length))}else e="".concat(e.slice(0,f-u.length),"(?>").concat(u).concat(h,")").concat(e.slice(f+d.length));g+=4}kt.lastIndex+=g}else"("===d[0]?i.push(f):")"===d&&(a=i.length?i.pop():null);u=d}return{pattern:e}}(i.pattern).pattern,{captureTransfers:i.captureTransfers,hiddenCaptures:i.hiddenCaptures}),s={pattern:a.pattern,flags:"".concat(n.hasIndices?"d":"").concat(n.global?"g":"").concat(o.flags).concat(o.options.disable.v?"u":"v")};if(n.avoidSubclass){if(n.lazyCompileLength!==1/0)throw new Error("Lazy compilation requires subclass")}else{var u=a.hiddenCaptures.sort((function(e,t){return e-t})),l=Array.from(a.captureTransfers),c=r._strategy,d=s.pattern.length>=n.lazyCompileLength;(u.length||l.length||c||d)&&(s.options=ur(ur(ur(ur({},u.length&&{hiddenCaptures:u}),l.length&&{transfers:l}),c&&{strategy:c}),d&&{lazyCompile:d}))}return s}(e,t);return n.options?new ao(n.pattern,n.flags,n.options):new RegExp(n.pattern,n.flags)}},2093:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var t=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}n.d(t,{qy:()=>k,JW:()=>E});var s=i((function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.normal=n,this.property=t,r&&(this.space=r)}));function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n,r={},o={},i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;Object.assign(r,a.property),Object.assign(o,a.normal)}}catch(e){i.e(e)}finally{i.f()}return new s(r,o,t)}s.prototype.normal={},s.prototype.property={},s.prototype.space=void 0;var c=n(9377),d=n(587);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e){for(var t={},n={},r=0,o=Object.entries(e.properties);r<o.length;r++){var i=(p=o[r],h=2,function(e){if(Array.isArray(e))return e}(p)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(p,h)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(p,h)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],u=i[1],l=new d.E(a,e.transform(e.attributes||{},a),u,e.space);e.mustUseProperty&&e.mustUseProperty.includes(a)&&(l.mustUseProperty=!0),t[a]=l,n[(0,c.S)(a)]=a,n[(0,c.S)(l.attribute)]=a}var p,h;return new s(t,n,e.space)}var h=n(6746),m=p({properties:{ariaActiveDescendant:null,ariaAtomic:h.booleanish,ariaAutoComplete:null,ariaBusy:h.booleanish,ariaChecked:h.booleanish,ariaColCount:h.number,ariaColIndex:h.number,ariaColSpan:h.number,ariaControls:h.spaceSeparated,ariaCurrent:null,ariaDescribedBy:h.spaceSeparated,ariaDetails:null,ariaDisabled:h.booleanish,ariaDropEffect:h.spaceSeparated,ariaErrorMessage:null,ariaExpanded:h.booleanish,ariaFlowTo:h.spaceSeparated,ariaGrabbed:h.booleanish,ariaHasPopup:null,ariaHidden:h.booleanish,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:h.spaceSeparated,ariaLevel:h.number,ariaLive:null,ariaModal:h.booleanish,ariaMultiLine:h.booleanish,ariaMultiSelectable:h.booleanish,ariaOrientation:null,ariaOwns:h.spaceSeparated,ariaPlaceholder:null,ariaPosInSet:h.number,ariaPressed:h.booleanish,ariaReadOnly:h.booleanish,ariaRelevant:null,ariaRequired:h.booleanish,ariaRoleDescription:h.spaceSeparated,ariaRowCount:h.number,ariaRowIndex:h.number,ariaRowSpan:h.number,ariaSelected:h.booleanish,ariaSetSize:h.number,ariaSort:null,ariaValueMax:h.number,ariaValueMin:h.number,ariaValueNow:h.number,ariaValueText:null,role:null},transform:function(e,t){return"role"===t?t:"aria-"+t.slice(4).toLowerCase()}});function v(e,t){return t in e?e[t]:t}function g(e,t){return v(e,t.toLowerCase())}var y=p({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:h.commaSeparated,acceptCharset:h.spaceSeparated,accessKey:h.spaceSeparated,action:null,allow:null,allowFullScreen:h.boolean,allowPaymentRequest:h.boolean,allowUserMedia:h.boolean,alt:null,as:null,async:h.boolean,autoCapitalize:null,autoComplete:h.spaceSeparated,autoFocus:h.boolean,autoPlay:h.boolean,blocking:h.spaceSeparated,capture:null,charSet:null,checked:h.boolean,cite:null,className:h.spaceSeparated,cols:h.number,colSpan:null,content:null,contentEditable:h.booleanish,controls:h.boolean,controlsList:h.spaceSeparated,coords:h.number|h.commaSeparated,crossOrigin:null,data:null,dateTime:null,decoding:null,default:h.boolean,defer:h.boolean,dir:null,dirName:null,disabled:h.boolean,download:h.overloadedBoolean,draggable:h.booleanish,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:h.boolean,formTarget:null,headers:h.spaceSeparated,height:h.number,hidden:h.overloadedBoolean,high:h.number,href:null,hrefLang:null,htmlFor:h.spaceSeparated,httpEquiv:h.spaceSeparated,id:null,imageSizes:null,imageSrcSet:null,inert:h.boolean,inputMode:null,integrity:null,is:null,isMap:h.boolean,itemId:null,itemProp:h.spaceSeparated,itemRef:h.spaceSeparated,itemScope:h.boolean,itemType:h.spaceSeparated,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:h.boolean,low:h.number,manifest:null,max:null,maxLength:h.number,media:null,method:null,min:null,minLength:h.number,multiple:h.boolean,muted:h.boolean,name:null,nonce:null,noModule:h.boolean,noValidate:h.boolean,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:h.boolean,optimum:h.number,pattern:null,ping:h.spaceSeparated,placeholder:null,playsInline:h.boolean,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:h.boolean,referrerPolicy:null,rel:h.spaceSeparated,required:h.boolean,reversed:h.boolean,rows:h.number,rowSpan:h.number,sandbox:h.spaceSeparated,scope:null,scoped:h.boolean,seamless:h.boolean,selected:h.boolean,shadowRootClonable:h.boolean,shadowRootDelegatesFocus:h.boolean,shadowRootMode:null,shape:null,size:h.number,sizes:null,slot:null,span:h.number,spellCheck:h.booleanish,src:null,srcDoc:null,srcLang:null,srcSet:null,start:h.number,step:null,style:null,tabIndex:h.number,target:null,title:null,translate:null,type:null,typeMustMatch:h.boolean,useMap:null,value:h.booleanish,width:h.number,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:h.spaceSeparated,axis:null,background:null,bgColor:null,border:h.number,borderColor:null,bottomMargin:h.number,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:h.boolean,declare:h.boolean,event:null,face:null,frame:null,frameBorder:null,hSpace:h.number,leftMargin:h.number,link:null,longDesc:null,lowSrc:null,marginHeight:h.number,marginWidth:h.number,noResize:h.boolean,noHref:h.boolean,noShade:h.boolean,noWrap:h.boolean,object:null,profile:null,prompt:null,rev:null,rightMargin:h.number,rules:null,scheme:null,scrolling:h.booleanish,standby:null,summary:null,text:null,topMargin:h.number,valueType:null,version:null,vAlign:null,vLink:null,vSpace:h.number,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:h.boolean,disableRemotePlayback:h.boolean,prefix:null,property:null,results:h.number,security:null,unselectable:null},space:"html",transform:g}),b=p({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:h.commaOrSpaceSeparated,accentHeight:h.number,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:h.number,amplitude:h.number,arabicForm:null,ascent:h.number,attributeName:null,attributeType:null,azimuth:h.number,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:h.number,by:null,calcMode:null,capHeight:h.number,className:h.spaceSeparated,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:h.number,diffuseConstant:h.number,direction:null,display:null,dur:null,divisor:h.number,dominantBaseline:null,download:h.boolean,dx:null,dy:null,edgeMode:null,editable:null,elevation:h.number,enableBackground:null,end:null,event:null,exponent:h.number,externalResourcesRequired:null,fill:null,fillOpacity:h.number,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:h.commaSeparated,g2:h.commaSeparated,glyphName:h.commaSeparated,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:h.number,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:h.number,horizOriginX:h.number,horizOriginY:h.number,id:null,ideographic:h.number,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:h.number,k:h.number,k1:h.number,k2:h.number,k3:h.number,k4:h.number,kernelMatrix:h.commaOrSpaceSeparated,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:h.number,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:h.number,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:h.number,overlineThickness:h.number,paintOrder:null,panose1:null,path:null,pathLength:h.number,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:h.spaceSeparated,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:h.number,pointsAtY:h.number,pointsAtZ:h.number,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:h.commaOrSpaceSeparated,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:h.commaOrSpaceSeparated,rev:h.commaOrSpaceSeparated,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:h.commaOrSpaceSeparated,requiredFeatures:h.commaOrSpaceSeparated,requiredFonts:h.commaOrSpaceSeparated,requiredFormats:h.commaOrSpaceSeparated,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:h.number,specularExponent:h.number,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:h.number,strikethroughThickness:h.number,string:null,stroke:null,strokeDashArray:h.commaOrSpaceSeparated,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:h.number,strokeOpacity:h.number,strokeWidth:null,style:null,surfaceScale:h.number,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:h.commaOrSpaceSeparated,tabIndex:h.number,tableValues:null,target:null,targetX:h.number,targetY:h.number,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:h.commaOrSpaceSeparated,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:h.number,underlineThickness:h.number,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:h.number,values:null,vAlphabetic:h.number,vMathematical:h.number,vectorEffect:null,vHanging:h.number,vIdeographic:h.number,version:null,vertAdvY:h.number,vertOriginX:h.number,vertOriginY:h.number,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:h.number,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:v}),D=p({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:function(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),w=p({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:g}),C=p({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:function(e,t){return"xml:"+t.slice(3).toLowerCase()}}),k=l([m,y,D,w,C],"html"),E=l([m,b,D,w,C],"svg")},7775:(e,t,n)=>{"use strict";n.d(t,{I:()=>l});var r=n(587),o=n(9715),i=n(9377),a=/[A-Z]/g,s=/-[a-z]/g,u=/^data[-\w.:]+$/i;function l(e,t){var n=(0,i.S)(t),l=t,f=o.R;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&u.test(t)){if("-"===t.charAt(4)){var p=t.slice(5).replace(s,d);l="data"+p.charAt(0).toUpperCase()+p.slice(1)}else{var h=t.slice(4);if(!s.test(h)){var m=h.replace(a,c);"-"!==m.charAt(0)&&(m="-"+m),t="data"+m}}f=r.E}return new f(l,t)}function c(e){return"-"+e.toLowerCase()}function d(e){return e.charAt(1).toUpperCase()}},9377:(e,t,n)=>{"use strict";function r(e){return e.toLowerCase()}n.d(t,{S:()=>r})},587:(e,t,n)=>{"use strict";n.d(t,{E:()=>c});var r=n(9715),o=n(6746);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(a=function(){return!!e})()}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}var l=Object.keys(o),c=function(e){function t(e,n,r,u){var c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var f=-1;if(d(c=function(e,t,n){return t=s(t),function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,a()?Reflect.construct(t,n||[],s(e).constructor):t.apply(e,n))}(this,t,[e,n]),"space",u),"number"==typeof r)for(;++f<l.length;){var p=l[f];d(c,l[f],(r&o[p])===o[p])}return c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n;var n}(r.R);function d(e,t,n){n&&(e[t]=n)}c.prototype.defined=!0},9715:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var t=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}n.d(t,{R:()=>s});var s=i((function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.attribute=n,this.property=t}));s.prototype.attribute="",s.prototype.booleanish=!1,s.prototype.boolean=!1,s.prototype.commaOrSpaceSeparated=!1,s.prototype.commaSeparated=!1,s.prototype.defined=!1,s.prototype.mustUseProperty=!1,s.prototype.number=!1,s.prototype.overloadedBoolean=!1,s.prototype.property="",s.prototype.spaceSeparated=!1,s.prototype.space=void 0},6746:(e,t,n)=>{"use strict";n.r(t),n.d(t,{boolean:()=>o,booleanish:()=>i,commaOrSpaceSeparated:()=>c,commaSeparated:()=>l,number:()=>s,overloadedBoolean:()=>a,spaceSeparated:()=>u});var r=0,o=d(),i=d(),a=d(),s=d(),u=d(),l=d(),c=d();function d(){return Math.pow(2,++r)}},4444:(e,t,n)=>{"use strict";function r(e){var t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function o(e){return e.join(" ").trim()}n.d(t,{A:()=>o,q:()=>r})},9194:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r={}.hasOwnProperty;function o(e,t){var n=t||{};function o(t){var n=o.invalid,i=o.handlers;if(t&&r.call(t,e)){var a=String(t[e]);n=r.call(i,a)?i[a]:o.unknown}if(n){for(var s,u=arguments.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=arguments[c];return(s=n).call.apply(s,[this,t].concat(l))}}return o.handlers=n.handlers||{},o.invalid=n.invalid,o.unknown=n.unknown,o}}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={id:e,exports:{}};return o[e](n,n.exports,a),n.exports}a.m=o,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var o=Object.create(null);a.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>n[e]));return i.default=()=>n,a.d(o,i),o},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>e+".min.js",a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="editor.text:",a.l=(e,t,o,i)=>{if(n[e])n[e].push(t);else{var s,u;if(void 0!==o)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==r+o){s=d;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",r+o),s.src=e),n[e]=[t];var f=(t,r)=>{s.onerror=s.onload=null,clearTimeout(p);var o=n[e];if(delete n[e],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(r))),t)return t(r)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="plug/editor.bnote/res/dist/",(()=>{a.b=document.baseURI||self.location.href;var e={4522:0};a.f.j=(t,n)=>{var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise(((n,o)=>r=e[t]=[n,o]));n.push(r[2]=o);var i=a.p+a.u(t),s=new Error;a.l(i,(n=>{if(a.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,r[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,o,[i,s,u]=n,l=0;if(i.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);u&&u(a)}for(t&&t(n);l<i.length;l++)o=i[l],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=self.webpackChunkeditor_text=self.webpackChunkeditor_text||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a.nc=void 0;var s={};(()=>{"use strict";a.r(s),a.d(s,{Actions:()=>t,Callbacks:()=>gY,Editor:()=>nY,InfoPanel:()=>cY,MainPanel:()=>cX});var e={};a.r(e),a.d(e,{hasBrowserEnv:()=>UW,hasStandardBrowserEnv:()=>WW,hasStandardBrowserWebWorkerEnv:()=>qW,navigator:()=>GW,origin:()=>KW});var t={};a.r(t),a.d(t,{onSave:()=>oY});const n=require("pydio");var r=a.n(n),o=a(2015),i=a.t(o,2),u=a.n(o);const l=require("react-redux"),c=require("material-ui/styles");var d=a(134),f=a.n(d),p=a(2783),h=a.n(p),m=a(4709),v=a.n(m),g=a(9958),y=a.n(g),b=a(1202),D=a.n(b),w=a(3911),C=a.n(w),k=a(4576),E={};E.styleTagTransform=C(),E.setAttributes=y(),E.insert=v().bind(null,"head"),E.domAPI=h(),E.insertStyleElement=D(),f()(k.A,E),k.A&&k.A.locals&&k.A.locals;var x=a(1894);function S(e){this.content=e}S.prototype={constructor:S,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,o=r.find(e),i=r.content.slice();return-1==o?i.push(n||e,t):(i[o+1]=t,n&&(i[o]=n)),new S(i)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new S(n)},addToStart:function(e,t){return new S([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new S(n)},addBefore:function(e,t,n){var r=this.remove(t),o=r.content.slice(),i=r.find(e);return o.splice(-1==i?o.length:i,0,t,n),new S(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=S.from(e)).size?new S(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=S.from(e)).size?new S(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=S.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach((function(t,n){e[t]=n})),e},get size(){return this.content.length>>1}},S.from=function(e){if(e instanceof S)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new S(t)};const A=S;function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},O.apply(null,arguments)}function M(e,t,n){return t=j(t),function(e,t){if(t&&("object"==_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,T()?Reflect.construct(t,n||[],j(e).constructor):t.apply(e,n))}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N(e,t)}function P(e){var t="function"==typeof Map?new Map:void 0;return P=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(T())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&N(o,n.prototype),o}(e,arguments,j(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),N(n,e)},P(e)}function T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(T=function(){return!!e})()}function N(e,t){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},N(e,t)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H(r.key),r)}}function I(e,t,n){return t&&L(e.prototype,t),n&&L(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function H(e){var t=function(e){if("object"!=_(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_(t)?t:t+""}function z(e,t,n){for(var r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;var o=e.child(r),i=t.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var a=0;o.text[a]==i.text[a];a++)n++;return n}if(o.content.size||i.content.size){var s=z(o.content,i.content,n+1);if(null!=s)return s}n+=o.nodeSize}else n+=o.nodeSize}}function V(e,t,n,r){for(var o=e.childCount,i=t.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var a=e.child(--o),s=t.child(--i),u=a.nodeSize;if(a!=s){if(!a.sameMarkup(s))return{a:n,b:r};if(a.isText&&a.text!=s.text){for(var l=0,c=Math.min(a.text.length,s.text.length);l<c&&a.text[a.text.length-l-1]==s.text[s.text.length-l-1];)l++,n--,r--;return{a:n,b:r}}if(a.content.size||s.content.size){var d=V(a.content,s.content,n-1,r-1);if(d)return d}n-=u,r-=u}else n-=u,r-=u}}var $=function(){function e(t,n){if(R(this,e),this.content=t,this.size=n||0,null==n)for(var r=0;r<t.length;r++)this.size+=t[r].nodeSize}return I(e,[{key:"nodesBetween",value:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0,i=0,a=0;a<t;i++){var s=this.content[i],u=a+s.nodeSize;if(u>e&&!1!==n(s,r+a,o||null,i)&&s.content.size){var l=a+1;s.nodesBetween(Math.max(0,e-l),Math.min(s.content.size,t-l),n,r+l)}a=u}}},{key:"descendants",value:function(e){this.nodesBetween(0,this.size,e)}},{key:"textBetween",value:function(e,t,n,r){var o="",i=!0;return this.nodesBetween(e,t,(function(a,s){var u=a.isText?a.text.slice(Math.max(e,s)-s,t-s):a.isLeaf?r?"function"==typeof r?r(a):r:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&u||a.isTextblock)&&n&&(i?i=!1:o+=n),o+=u}),0),o}},{key:"append",value:function(t){if(!t.size)return this;if(!this.size)return t;var n=this.lastChild,r=t.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<t.content.length;i++)o.push(t.content[i]);return new e(o,this.size+t.size)}},{key:"cut",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size;if(0==t&&n==this.size)return this;var r=[],o=0;if(n>t)for(var i=0,a=0;a<n;i++){var s=this.content[i],u=a+s.nodeSize;u>t&&((a<t||u>n)&&(s=s.isText?s.cut(Math.max(0,t-a),Math.min(s.text.length,n-a)):s.cut(Math.max(0,t-a-1),Math.min(s.content.size,n-a-1))),r.push(s),o+=s.nodeSize),a=u}return new e(r,o)}},{key:"cutByIndex",value:function(t,n){return t==n?e.empty:0==t&&n==this.content.length?this:new e(this.content.slice(t,n))}},{key:"replaceChild",value:function(t,n){var r=this.content[t];if(r==n)return this;var o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[t]=n,new e(o,i)}},{key:"addToStart",value:function(t){return new e([t].concat(this.content),this.size+t.nodeSize)}},{key:"addToEnd",value:function(t){return new e(this.content.concat(t),this.size+t.nodeSize)}},{key:"eq",value:function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}},{key:"firstChild",get:function(){return this.content.length?this.content[0]:null}},{key:"lastChild",get:function(){return this.content.length?this.content[this.content.length-1]:null}},{key:"childCount",get:function(){return this.content.length}},{key:"child",value:function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}},{key:"maybeChild",value:function(e){return this.content[e]||null}},{key:"forEach",value:function(e){for(var t=0,n=0;t<this.content.length;t++){var r=this.content[t];e(r,n,t),n+=r.nodeSize}}},{key:"findDiffStart",value:function(e){return z(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}},{key:"findDiffEnd",value:function(e){return V(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size)}},{key:"findIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0==e)return G(0,e);if(e==this.size)return G(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position ".concat(e," outside of fragment (").concat(this,")"));for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(o>=e)return o==e||t>0?G(n+1,o):G(n,r);r=o}}},{key:"toString",value:function(){return"<"+this.toStringInner()+">"}},{key:"toStringInner",value:function(){return this.content.join(", ")}},{key:"toJSON",value:function(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null}}],[{key:"fromJSON",value:function(t,n){if(!n)return e.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new e(n.map(t.nodeFromJSON))}},{key:"fromArray",value:function(t){if(!t.length)return e.empty;for(var n,r=0,o=0;o<t.length;o++){var i=t[o];r+=i.nodeSize,o&&i.isText&&t[o-1].sameMarkup(i)?(n||(n=t.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new e(n||t,r)}},{key:"from",value:function(t){if(!t)return e.empty;if(t instanceof e)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new e([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}])}();$.empty=new $([],0);var U={index:0,offset:0};function G(e,t){return U.index=e,U.offset=t,U}function W(e,t){if(e===t)return!0;if(!e||"object"!=_(e)||!t||"object"!=_(t))return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!W(e[r],t[r]))return!1}else{for(var o in e)if(!(o in t)||!W(e[o],t[o]))return!1;for(var i in t)if(!(i in e))return!1}return!0}var q=function(){function e(t,n){R(this,e),this.type=t,this.attrs=n}return I(e,[{key:"addToSet",value:function(e){for(var t,n=!1,r=0;r<e.length;r++){var o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(o)}}return t||(t=e.slice()),n||t.push(this),t}},{key:"removeFromSet",value:function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}},{key:"isInSet",value:function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}},{key:"eq",value:function(e){return this==e||this.type==e.type&&W(this.attrs,e.attrs)}},{key:"toJSON",value:function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e}}],[{key:"fromJSON",value:function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type ".concat(t.type," in this schema"));var r=n.create(t.attrs);return n.checkAttrs(r.attrs),r}},{key:"sameSet",value:function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}},{key:"setFrom",value:function(t){if(!t||Array.isArray(t)&&0==t.length)return e.none;if(t instanceof e)return[t];var n=t.slice();return n.sort((function(e,t){return e.type.rank-t.type.rank})),n}}])}();q.none=[];var K=function(e){function t(){return R(this,t),M(this,t,arguments)}return B(t,e),I(t)}(P(Error)),J=function(){function e(t,n,r){R(this,e),this.content=t,this.openStart=n,this.openEnd=r}return I(e,[{key:"size",get:function(){return this.content.size-this.openStart-this.openEnd}},{key:"insertAt",value:function(t,n){var r=X(this.content,t+this.openStart,n);return r&&new e(r,this.openStart,this.openEnd)}},{key:"removeBetween",value:function(t,n){return new e(Z(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}},{key:"eq",value:function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}},{key:"toString",value:function(){return this.content+"("+this.openStart+","+this.openEnd+")"}},{key:"toJSON",value:function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}}],[{key:"fromJSON",value:function(t,n){if(!n)return e.empty;var r=n.openStart||0,o=n.openEnd||0;if("number"!=typeof r||"number"!=typeof o)throw new RangeError("Invalid input for Slice.fromJSON");return new e($.fromJSON(t,n.content),r,o)}},{key:"maxOpen",value:function(t){for(var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=0,o=0,i=t.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(var a=t.lastChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.lastChild)o++;return new e(t,r,o)}}])}();function Z(e,t,n){var r=e.findIndex(t),o=r.index,i=r.offset,a=e.maybeChild(o),s=e.findIndex(n),u=s.index,l=s.offset;if(i==t||a.isText){if(l!=n&&!e.child(u).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(o!=u)throw new RangeError("Removing non-flat range");return e.replaceChild(o,a.copy(Z(a.content,t-i-1,n-i-1)))}function X(e,t,n,r){var o=e.findIndex(t),i=o.index,a=o.offset,s=e.maybeChild(i);if(a==t||s.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));var u=X(s.content,t-a-1,n);return u&&e.replaceChild(i,s.copy(u))}function Y(e,t,n){if(n.openStart>e.depth)throw new K("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new K("Inconsistent open depths");return Q(e,t,n,0)}function Q(e,t,n,r){var o=e.index(r),i=e.node(r);if(o==t.index(r)&&r<e.depth-n.openStart){var a=Q(e,t,n,r+1);return i.copy(i.content.replaceChild(o,a))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){var s=function(e,t){for(var n=t.depth-e.openStart,r=t.node(n).copy(e.content),o=n-1;o>=0;o--)r=t.node(o).copy($.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(n,e);return oe(i,ie(e,s.start,s.end,t,r))}var u=e.parent,l=u.content;return oe(u,l.cut(0,e.parentOffset).append(n.content).append(l.cut(t.parentOffset)))}return oe(i,ae(e,t,r))}function ee(e,t){if(!t.type.compatibleContent(e.type))throw new K("Cannot join "+t.type.name+" onto "+e.type.name)}function te(e,t,n){var r=e.node(n);return ee(r,t.node(n)),r}function ne(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function re(e,t,n,r){var o=(t||e).node(n),i=0,a=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(ne(e.nodeAfter,r),i++));for(var s=i;s<a;s++)ne(o.child(s),r);t&&t.depth==n&&t.textOffset&&ne(t.nodeBefore,r)}function oe(e,t){return e.type.checkContent(t),e.copy(t)}function ie(e,t,n,r,o){var i=e.depth>o&&te(e,t,o+1),a=r.depth>o&&te(n,r,o+1),s=[];return re(null,e,o,s),i&&a&&t.index(o)==n.index(o)?(ee(i,a),ne(oe(i,ie(e,t,n,r,o+1)),s)):(i&&ne(oe(i,ae(e,t,o+1)),s),re(t,n,o,s),a&&ne(oe(a,ae(n,r,o+1)),s)),re(r,null,o,s),new $(s)}function ae(e,t,n){var r=[];return re(null,e,n,r),e.depth>n&&ne(oe(te(e,t,n+1),ae(e,t,n+1)),r),re(t,null,n,r),new $(r)}J.empty=new J($.empty,0,0);var se=function(){function e(t,n,r){R(this,e),this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}return I(e,[{key:"resolveDepth",value:function(e){return null==e?this.depth:e<0?this.depth+e:e}},{key:"parent",get:function(){return this.node(this.depth)}},{key:"doc",get:function(){return this.node(0)}},{key:"node",value:function(e){return this.path[3*this.resolveDepth(e)]}},{key:"index",value:function(e){return this.path[3*this.resolveDepth(e)+1]}},{key:"indexAfter",value:function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}},{key:"start",value:function(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}},{key:"end",value:function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}},{key:"before",value:function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}},{key:"after",value:function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}},{key:"textOffset",get:function(){return this.pos-this.path[this.path.length-1]}},{key:"nodeAfter",get:function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}},{key:"nodeBefore",get:function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}},{key:"posAtIndex",value:function(e,t){t=this.resolveDepth(t);for(var n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1,o=0;o<e;o++)r+=n.child(o).nodeSize;return r}},{key:"marks",value:function(){var e=this.parent,t=this.index();if(0==e.content.size)return q.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){var o=n;n=r,r=o}for(var i=n.marks,a=0;a<i.length;a++)!1!==i[a].type.spec.inclusive||r&&i[a].isInSet(r.marks)||(i=i[a--].removeFromSet(i));return i}},{key:"marksAcross",value:function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,r=e.parent.maybeChild(e.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n}},{key:"sharedDepth",value:function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}},{key:"blockRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=arguments.length>1?arguments[1]:void 0;if(e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new de(this,e,n);return null}},{key:"sameParent",value:function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}},{key:"max",value:function(e){return e.pos>this.pos?e:this}},{key:"min",value:function(e){return e.pos<this.pos?e:this}},{key:"toString",value:function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}}],[{key:"resolve",value:function(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");for(var r=[],o=0,i=n,a=t;;){var s=a.content.findIndex(i),u=s.index,l=s.offset,c=i-l;if(r.push(a,u,o+l),!c)break;if((a=a.child(u)).isText)break;i=c-1,o+=l+1}return new e(n,r,i)}},{key:"resolveCached",value:function(t,n){var r=ce.get(t);if(r)for(var o=0;o<r.elts.length;o++){var i=r.elts[o];if(i.pos==n)return i}else ce.set(t,r=new ue);var a=r.elts[r.i]=e.resolve(t,n);return r.i=(r.i+1)%le,a}}])}(),ue=I((function e(){R(this,e),this.elts=[],this.i=0})),le=12,ce=new WeakMap,de=function(){return I((function e(t,n,r){R(this,e),this.$from=t,this.$to=n,this.depth=r}),[{key:"start",get:function(){return this.$from.before(this.depth+1)}},{key:"end",get:function(){return this.$to.after(this.depth+1)}},{key:"parent",get:function(){return this.$from.node(this.depth)}},{key:"startIndex",get:function(){return this.$from.index(this.depth)}},{key:"endIndex",get:function(){return this.$to.indexAfter(this.depth)}}])}(),fe=Object.create(null),pe=function(){function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:q.none;R(this,e),this.type=t,this.attrs=n,this.marks=o,this.content=r||$.empty}return I(e,[{key:"children",get:function(){return this.content.content}},{key:"nodeSize",get:function(){return this.isLeaf?1:2+this.content.size}},{key:"childCount",get:function(){return this.content.childCount}},{key:"child",value:function(e){return this.content.child(e)}},{key:"maybeChild",value:function(e){return this.content.maybeChild(e)}},{key:"forEach",value:function(e){this.content.forEach(e)}},{key:"nodesBetween",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.content.nodesBetween(e,t,n,r,this)}},{key:"descendants",value:function(e){this.nodesBetween(0,this.content.size,e)}},{key:"textContent",get:function(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}},{key:"textBetween",value:function(e,t,n,r){return this.content.textBetween(e,t,n,r)}},{key:"firstChild",get:function(){return this.content.firstChild}},{key:"lastChild",get:function(){return this.content.lastChild}},{key:"eq",value:function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}},{key:"sameMarkup",value:function(e){return this.hasMarkup(e.type,e.attrs,e.marks)}},{key:"hasMarkup",value:function(e,t,n){return this.type==e&&W(this.attrs,t||e.defaultAttrs||fe)&&q.sameSet(this.marks,n||q.none)}},{key:"copy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t==this.content?this:new e(this.type,this.attrs,t,this.marks)}},{key:"mark",value:function(t){return t==this.marks?this:new e(this.type,this.attrs,this.content,t)}},{key:"cut",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size;return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}},{key:"slice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e==t)return J.empty;var r=this.resolve(e),o=this.resolve(t),i=n?0:r.sharedDepth(t),a=r.start(i),s=r.node(i).content.cut(r.pos-a,o.pos-a);return new J(s,r.depth-i,o.depth-i)}},{key:"replace",value:function(e,t,n){return Y(this.resolve(e),this.resolve(t),n)}},{key:"nodeAt",value:function(e){for(var t=this;;){var n=t.content.findIndex(e),r=n.index,o=n.offset;if(!(t=t.maybeChild(r)))return null;if(o==e||t.isText)return t;e-=o+1}}},{key:"childAfter",value:function(e){var t=this.content.findIndex(e),n=t.index,r=t.offset;return{node:this.content.maybeChild(n),index:n,offset:r}}},{key:"childBefore",value:function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,r=t.offset;if(r<e)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}},{key:"resolve",value:function(e){return se.resolveCached(this,e)}},{key:"resolveNoCache",value:function(e){return se.resolve(this,e)}},{key:"rangeHasMark",value:function(e,t,n){var r=!1;return t>e&&this.nodesBetween(e,t,(function(e){return n.isInSet(e.marks)&&(r=!0),!r})),r}},{key:"isBlock",get:function(){return this.type.isBlock}},{key:"isTextblock",get:function(){return this.type.isTextblock}},{key:"inlineContent",get:function(){return this.type.inlineContent}},{key:"isInline",get:function(){return this.type.isInline}},{key:"isText",get:function(){return this.type.isText}},{key:"isLeaf",get:function(){return this.type.isLeaf}},{key:"isAtom",get:function(){return this.type.isAtom}},{key:"toString",value:function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),me(this.marks,e)}},{key:"contentMatchAt",value:function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}},{key:"canReplace",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$.empty,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.childCount,i=this.contentMatchAt(e).matchFragment(n,r,o),a=i&&i.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(var s=r;s<o;s++)if(!this.type.allowsMarks(n.child(s).marks))return!1;return!0}},{key:"canReplaceWith",value:function(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(e).matchType(n),i=o&&o.matchFragment(this.content,t);return!!i&&i.validEnd}},{key:"canAppend",value:function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}},{key:"check",value:function(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);for(var e=q.none,t=0;t<this.marks.length;t++){var n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!q.sameSet(e,this.marks))throw new RangeError("Invalid collection of marks for node ".concat(this.type.name,": ").concat(this.marks.map((function(e){return e.type.name}))));this.content.forEach((function(e){return e.check()}))}},{key:"toJSON",value:function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e}}],[{key:"fromJSON",value:function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=void 0;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var r=$.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,r,n);return o.type.checkAttrs(o.attrs),o}}])}();pe.prototype.text=void 0;var he=function(e){function t(e,n,r,o){var i;if(R(this,t),i=M(this,t,[e,n,null,o]),!r)throw new RangeError("Empty text nodes are not allowed");return i.text=r,i}return B(t,e),I(t,[{key:"toString",value:function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):me(this.marks,JSON.stringify(this.text))}},{key:"textContent",get:function(){return this.text}},{key:"textBetween",value:function(e,t){return this.text.slice(e,t)}},{key:"nodeSize",get:function(){return this.text.length}},{key:"mark",value:function(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)}},{key:"withText",value:function(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)}},{key:"cut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.text.length;return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}},{key:"eq",value:function(e){return this.sameMarkup(e)&&this.text==e.text}},{key:"toJSON",value:function(){var e=function(e,t,n){var r=O(j(e.prototype),"toJSON",n);return"function"==typeof r?function(e){return r.apply(n,e)}:r}(t,0,this)([]);return e.text=this.text,e}}])}(pe);function me(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var ve=function(){function e(t){R(this,e),this.validEnd=t,this.next=[],this.wrapCache=[]}return I(e,[{key:"matchType",value:function(e){for(var t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}},{key:"matchFragment",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.childCount,r=this,o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r}},{key:"inlineContent",get:function(){return 0!=this.next.length&&this.next[0].type.isInline}},{key:"defaultType",get:function(){for(var e=0;e<this.next.length;e++){var t=this.next[e].type;if(!t.isText&&!t.hasRequiredAttrs())return t}return null}},{key:"compatible",value:function(e){for(var t=0;t<this.next.length;t++)for(var n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}},{key:"fillBefore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[this];return function o(i,a){var s=i.matchFragment(e,n);if(s&&(!t||s.validEnd))return $.from(a.map((function(e){return e.createAndFill()})));for(var u=0;u<i.next.length;u++){var l=i.next[u],c=l.type,d=l.next;if(!c.isText&&!c.hasRequiredAttrs()&&-1==r.indexOf(d)){r.push(d);var f=o(d,a.concat(c));if(f)return f}}return null}(this,[])}},{key:"findWrapping",value:function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}},{key:"computeWrapping",value:function(e){for(var t=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(e)){for(var i=[],a=r;a.type;a=a.via)i.push(a.type);return i.reverse()}for(var s=0;s<o.next.length;s++){var u=o.next[s],l=u.type,c=u.next;l.isLeaf||l.hasRequiredAttrs()||l.name in t||r.type&&!c.validEnd||(n.push({match:l.contentMatch,type:l,via:r}),t[l.name]=!0)}}return null}},{key:"edgeCount",get:function(){return this.next.length}},{key:"edge",value:function(e){if(e>=this.next.length)throw new RangeError("There's no ".concat(e,"th edge in this content match"));return this.next[e]}},{key:"toString",value:function(){var e=[];return function t(n){e.push(n);for(var r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map((function(t,n){for(var r=n+(t.validEnd?"*":" ")+" ",o=0;o<t.next.length;o++)r+=(o?", ":"")+t.next[o].type.name+"->"+e.indexOf(t.next[o].next);return r})).join("\n")}}],[{key:"parse",value:function(t,n){var r=new ge(t,n);if(null==r.next)return e.empty;var o=ye(r);r.next&&r.err("Unexpected trailing text");var i=xe(function(e){var t=[[]];return o(function e(t,i){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(e(n,i))}),[]);if("seq"!=t.type){if("star"==t.type){var a=n();return r(i,a),o(e(t.expr,a),a),[r(a)]}if("plus"==t.type){var s=n();return o(e(t.expr,i),s),o(e(t.expr,s),s),[r(s)]}if("opt"==t.type)return[r(i)].concat(e(t.expr,i));if("range"==t.type){for(var u=i,l=0;l<t.min;l++){var c=n();o(e(t.expr,u),c),u=c}if(-1==t.max)o(e(t.expr,u),u);else for(var d=t.min;d<t.max;d++){var f=n();r(u,f),o(e(t.expr,u),f),u=f}return[r(u)]}if("name"==t.type)return[r(i,void 0,t.value)];throw new Error("Unknown expr type")}for(var p=0;;p++){var h=e(t.exprs[p],i);if(p==t.exprs.length-1)return h;o(h,i=n())}}(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){var o={term:r,to:n};return t[e].push(o),o}function o(e,t){e.forEach((function(e){return e.to=t}))}}(o));return function(e,t){for(var n=0,r=[e];n<r.length;n++){for(var o=r[n],i=!o.validEnd,a=[],s=0;s<o.next.length;s++){var u=o.next[s],l=u.type,c=u.next;a.push(l.name),!i||l.isText||l.hasRequiredAttrs()||(i=!1),-1==r.indexOf(c)&&r.push(c)}i&&t.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(i,r),i}}])}();ve.empty=new ve(!0);var ge=function(){return I((function e(t,n){R(this,e),this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}),[{key:"next",get:function(){return this.tokens[this.pos]}},{key:"eat",value:function(e){return this.next==e&&(this.pos++||!0)}},{key:"err",value:function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}])}();function ye(e){var t=[];do{t.push(be(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function be(e){var t=[];do{t.push(De(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function De(e){for(var t=function(e){if(e.eat("(")){var t=ye(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var n=function(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var o=[];for(var i in n){var a=n[i];a.isInGroup(t)&&o.push(a)}return 0==o.length&&e.err("No node type or group '"+t+"' found"),o}(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=Ce(e,t)}return t}function we(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function Ce(e,t){var n=we(e),r=n;return e.eat(",")&&(r="}"!=e.next?we(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function ke(e,t){return t-e}function Ee(e,t){var n=[];return function t(r){var o=e[r];if(1==o.length&&!o[0].term)return t(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var a=o[i],s=a.term,u=a.to;s||-1!=n.indexOf(u)||t(u)}}(t),n.sort(ke)}function xe(e){var t=Object.create(null);return function n(r){var o=[];r.forEach((function(t){e[t].forEach((function(t){var n=t.term,r=t.to;if(n){for(var i,a=0;a<o.length;a++)o[a][0]==n&&(i=o[a][1]);Ee(e,r).forEach((function(e){i||o.push([n,i=[]]),-1==i.indexOf(e)&&i.push(e)}))}}))}));for(var i=t[r.join(",")]=new ve(r.indexOf(e.length-1)>-1),a=0;a<o.length;a++){var s=o[a][1].sort(ke);i.next.push({type:o[a][0],next:t[s.join(",")]||n(s)})}return i}(Ee(e,0))}function Se(e){var t=Object.create(null);for(var n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function Ae(e,t){var n=Object.create(null);for(var r in e){var o=t&&t[r];if(void 0===o){var i=e[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function Fe(e,t,n,r){for(var o in t)if(!(o in e))throw new RangeError("Unsupported attribute ".concat(o," for ").concat(n," of type ").concat(o));for(var i in e){var a=e[i];a.validate&&a.validate(t[i])}}function Oe(e,t){var n=Object.create(null);if(t)for(var r in t)n[r]=new Be(e,r,t[r]);return n}var Me=function(){function e(t,n,r){R(this,e),this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Oe(t,r.attrs),this.defaultAttrs=Se(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||"text"==t),this.isText="text"==t}return I(e,[{key:"isInline",get:function(){return!this.isBlock}},{key:"isTextblock",get:function(){return this.isBlock&&this.inlineContent}},{key:"isLeaf",get:function(){return this.contentMatch==ve.empty}},{key:"isAtom",get:function(){return this.isLeaf||!!this.spec.atom}},{key:"isInGroup",value:function(e){return this.groups.indexOf(e)>-1}},{key:"whitespace",get:function(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}},{key:"hasRequiredAttrs",value:function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}},{key:"compatibleContent",value:function(e){return this==e||this.contentMatch.compatible(e.contentMatch)}},{key:"computeAttrs",value:function(e){return!e&&this.defaultAttrs?this.defaultAttrs:Ae(this.attrs,e)}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new pe(this,this.computeAttrs(e),$.from(t),q.setFrom(n))}},{key:"createChecked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return t=$.from(t),this.checkContent(t),new pe(this,this.computeAttrs(e),t,q.setFrom(n))}},{key:"createAndFill",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(e=this.computeAttrs(e),(t=$.from(t)).size){var r=this.contentMatch.fillBefore(t);if(!r)return null;t=r.append(t)}var o=this.contentMatch.matchFragment(t),i=o&&o.fillBefore($.empty,!0);return i?new pe(this,e,t.append(i),q.setFrom(n)):null}},{key:"validContent",value:function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}},{key:"checkContent",value:function(e){if(!this.validContent(e))throw new RangeError("Invalid content for node ".concat(this.name,": ").concat(e.toString().slice(0,50)))}},{key:"checkAttrs",value:function(e){Fe(this.attrs,e,"node",this.name)}},{key:"allowsMarkType",value:function(e){return null==this.markSet||this.markSet.indexOf(e)>-1}},{key:"allowsMarks",value:function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}},{key:"allowedMarks",value:function(e){if(null==this.markSet)return e;for(var t,n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:q.none:e}}],[{key:"compile",value:function(t,n){var r=Object.create(null);t.forEach((function(t,o){return r[t]=new e(t,n,o)}));var o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(var i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}])}(),Be=function(){return I((function e(t,n,r){R(this,e),this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate="string"==typeof r.validate?function(e,t,n){var r=n.split("|");return function(n){var o=null===n?"null":_(n);if(r.indexOf(o)<0)throw new RangeError("Expected value of type ".concat(r," for attribute ").concat(t," on type ").concat(e,", got ").concat(o))}}(t,n,r.validate):r.validate}),[{key:"isRequired",get:function(){return!this.hasDefault}}])}(),Pe=function(){function e(t,n,r,o){R(this,e),this.name=t,this.rank=n,this.schema=r,this.spec=o,this.attrs=Oe(t,o.attrs),this.excluded=null;var i=Se(this.attrs);this.instance=i?new q(this,i):null}return I(e,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!e&&this.instance?this.instance:new q(this,Ae(this.attrs,e))}},{key:"removeFromSet",value:function(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}},{key:"isInSet",value:function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]}},{key:"checkAttrs",value:function(e){Fe(this.attrs,e,"mark",this.name)}},{key:"excludes",value:function(e){return this.excluded.indexOf(e)>-1}}],[{key:"compile",value:function(t,n){var r=Object.create(null),o=0;return t.forEach((function(t,i){return r[t]=new e(t,o++,n,i)})),r}}])}(),Te=function(){return I((function e(t){R(this,e),this.linebreakReplacement=null,this.cached=Object.create(null);var n=this.spec={};for(var r in t)n[r]=t[r];n.nodes=A.from(t.nodes),n.marks=A.from(t.marks||{}),this.nodes=Me.compile(this.spec.nodes,this),this.marks=Pe.compile(this.spec.marks,this);var o=Object.create(null);for(var i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");var a=this.nodes[i],s=a.spec.content||"",u=a.spec.marks;if(a.contentMatch=o[s]||(o[s]=ve.parse(s,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet="_"==u?null:u?Ne(this,u.split(" ")):""!=u&&a.inlineContent?null:[]}for(var l in this.marks){var c=this.marks[l],d=c.spec.excludes;c.excluded=null==d?[c]:""==d?[]:Ne(this,d.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}),[{key:"node",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof Me))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)}},{key:"text",value:function(e,t){var n=this.nodes.text;return new he(n,n.defaultAttrs,e,q.setFrom(t))}},{key:"mark",value:function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}},{key:"nodeFromJSON",value:function(e){return pe.fromJSON(this,e)}},{key:"markFromJSON",value:function(e){return q.fromJSON(this,e)}},{key:"nodeType",value:function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}])}();function Ne(e,t){for(var n=[],r=0;r<t.length;r++){var o=t[r],i=e.marks[o],a=i;if(i)n.push(i);else for(var s in e.marks){var u=e.marks[s];("_"==o||u.spec.group&&u.spec.group.split(" ").indexOf(o)>-1)&&n.push(a=u)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}var je=function(){function e(t,n){var r=this;R(this,e),this.schema=t,this.rules=n,this.tags=[],this.styles=[];var o=this.matchedStyles=[];n.forEach((function(e){if(function(e){return null!=e.tag}(e))r.tags.push(e);else if(function(e){return null!=e.style}(e)){var t=/[^=]*/.exec(e.style)[0];o.indexOf(t)<0&&o.push(t),r.styles.push(e)}})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))}return I(e,[{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new ze(this,t,!1);return n.addAll(e,q.none,t.from,t.to),n.finish()}},{key:"parseSlice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new ze(this,t,!0);return n.addAll(e,q.none,t.from,t.to),J.maxOpen(n.finish())}},{key:"matchTag",value:function(e,t,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var o=this.tags[r];if(Ve(e,o.tag)&&(void 0===o.namespace||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(e);if(!1===i)continue;o.attrs=i||void 0}return o}}}},{key:"matchStyle",value:function(e,t,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var i=this.styles[o],a=i.style;if(!(0!=a.indexOf(e)||i.context&&!n.matchesContext(i.context)||a.length>e.length&&(61!=a.charCodeAt(e.length)||a.slice(e.length+1)!=t))){if(i.getAttrs){var s=i.getAttrs(t);if(!1===s)continue;i.attrs=s||void 0}return i}}}}],[{key:"schemaRules",value:function(e){var t=[];function n(e){for(var n=null==e.priority?50:e.priority,r=0;r<t.length;r++){var o=t[r];if((null==o.priority?50:o.priority)<n)break}t.splice(r,0,e)}var r=function(t){var r=e.marks[t].spec.parseDOM;r&&r.forEach((function(e){n(e=$e(e)),e.mark||e.ignore||e.clearMark||(e.mark=t)}))};for(var o in e.marks)r(o);var i=function(t){var r=e.nodes[t].spec.parseDOM;r&&r.forEach((function(e){n(e=$e(e)),e.node||e.ignore||e.mark||(e.node=t)}))};for(var a in e.nodes)i(a);return t}},{key:"fromSchema",value:function(t){return t.cached.domParser||(t.cached.domParser=new e(t,e.schemaRules(t)))}}])}(),_e={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Re={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Le={ol:!0,ul:!0};function Ie(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}var He=function(){return I((function e(t,n,r,o,i,a){R(this,e),this.type=t,this.attrs=n,this.marks=r,this.solid=o,this.options=a,this.content=[],this.activeMarks=q.none,this.match=i||(4&a?null:t.contentMatch)}),[{key:"findWrapping",value:function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore($.from(e));if(!t){var n,r=this.type.contentMatch;return(n=r.findWrapping(e.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}},{key:"finish",value:function(e){if(!(1&this.options)){var t,n=this.content[this.content.length-1];if(n&&n.isText&&(t=/[ \t\r\n\u000c]+$/.exec(n.text))){var r=n;n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=r.withText(r.text.slice(0,r.text.length-t[0].length))}}var o=$.from(this.content);return!e&&this.match&&(o=o.append(this.match.fillBefore($.empty,!0))),this.type?this.type.create(this.attrs,o,this.marks):o}},{key:"inlineContext",value:function(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!_e.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}])}(),ze=function(){return I((function e(t,n,r){R(this,e),this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;var o,i=n.topNode,a=Ie(null,n.preserveWhitespace,0)|(r?4:0);o=i?new He(i.type,i.attrs,q.none,!0,n.topMatch||i.type.contentMatch,a):new He(r?null:t.schema.topNodeType,null,q.none,!0,null,a),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}),[{key:"top",get:function(){return this.nodes[this.open]}},{key:"addDOM",value:function(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}},{key:"addTextNode",value:function(e,t){var n=e.nodeValue,r=this.top,o=2&r.options?"full":this.localPreserveWS||(1&r.options)>0;if("full"===o||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(o)n="full"!==o?n.replace(/\r?\n|\r/g," "):n.replace(/\r\n?/g,"\n");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){var i=r.content[r.content.length-1],a=e.previousSibling;(!i||a&&"BR"==a.nodeName||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}},{key:"addElement",value:function(e,t,n){var r=this.localPreserveWS,o=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);var i,a=e.nodeName.toLowerCase();Le.hasOwnProperty(a)&&this.parser.normalizeLists&&function(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=1==t.nodeType?t.nodeName.toLowerCase():null;r&&Le.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):"li"==r?n=t:r&&(n=null)}}(e);var s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));e:if(s?s.ignore:Re.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,t);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);var u,l=this.needsBlock;if(_e.hasOwnProperty(a))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),u=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}var c=s&&s.skip?t:this.readStyles(e,t);c&&this.addAll(e,c),u&&this.sync(o),this.needsBlock=l}else{var d=this.readStyles(e,t);d&&this.addElementByRule(e,s,d,!1===s.consuming?i:void 0)}this.localPreserveWS=r}},{key:"leafFallback",value:function(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}},{key:"ignoreFallback",value:function(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t,!0)}},{key:"readStyles",value:function(e,t){var n=this,r=e.style;if(r&&r.length)for(var o=0;o<this.parser.matchedStyles.length;o++){var i=this.parser.matchedStyles[o],a=r.getPropertyValue(i);if(a)for(var s,u=function(e){var r=n.parser.matchStyle(i,a,n,e);return r?r.ignore?{v:null}:(t=r.clearMark?t.filter((function(e){return!r.clearMark(e)})):t.concat(n.parser.schema.marks[r.mark].create(r.attrs)),!1!==r.consuming?(l=e,0):void(l=e=r)):(l=e,0)},l=void 0;0!==(s=u(l));)if(s)return s.v}return t}},{key:"addElementByRule",value:function(e,t,n,r){var o,i,a=this;if(t.node)if((i=this.parser.schema.nodes[t.node]).isLeaf)this.insertNode(i.create(t.attrs),n,"BR"==e.nodeName)||this.leafFallback(e,n);else{var s=this.enter(i,t.attrs||null,n,t.preserveWhitespace);s&&(o=!0,n=s)}else{var u=this.parser.schema.marks[t.mark];n=n.concat(u.create(t.attrs))}var l=this.top;if(i&&i.isLeaf)this.findInside(e);else if(r)this.addElement(e,n,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return a.insertNode(e,n,!1)}));else{var c=e;"string"==typeof t.contentElement?c=e.querySelector(t.contentElement):"function"==typeof t.contentElement?c=t.contentElement(e):t.contentElement&&(c=t.contentElement),this.findAround(e,c,!0),this.addAll(c,n),this.findAround(e,c,!1)}o&&this.sync(l)&&this.open--}},{key:"addAll",value:function(e,t,n,r){for(var o=n||0,i=n?e.childNodes[n]:e.firstChild,a=null==r?null:e.childNodes[r];i!=a;i=i.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(i,t);this.findAtPoint(e,o)}},{key:"findPlace",value:function(e,t,n){for(var r,o,i=this.open,a=0;i>=0;i--){var s=this.nodes[i],u=s.findWrapping(e);if(u&&(!r||r.length>u.length+a)&&(r=u,o=s,!u.length))break;if(s.solid){if(n)break;a+=2}}if(!r)return null;this.sync(o);for(var l=0;l<r.length;l++)t=this.enterInner(r[l],null,t,!1);return t}},{key:"insertNode",value:function(e,t,n){if(e.isInline&&this.needsBlock&&!this.top.type){var r=this.textblockFromContext();r&&(t=this.enterInner(r,null,t))}var o=this.findPlace(e,t,n);if(o){this.closeExtra();var i=this.top;i.match&&(i.match=i.match.matchType(e.type));var a,s=q.none,u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return F(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(o.concat(e.marks));try{for(u.s();!(a=u.n()).done;){var l=a.value;(i.type?i.type.allowsMarkType(l.type):Ue(l.type,e.type))&&(s=l.addToSet(s))}}catch(e){u.e(e)}finally{u.f()}return i.content.push(e.mark(s)),!0}return!1}},{key:"enter",value:function(e,t,n,r){var o=this.findPlace(e.create(t),n,!1);return o&&(o=this.enterInner(e,t,n,!0,r)),o}},{key:"enterInner",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;this.closeExtra();var i=this.top;i.match=i.match&&i.match.matchType(e);var a=Ie(e,o,i.options);4&i.options&&0==i.content.length&&(a|=4);var s=q.none;return n=n.filter((function(t){return!(i.type?i.type.allowsMarkType(t.type):Ue(t.type,e))||(s=t.addToSet(s),!1)})),this.nodes.push(new He(e,t,s,r,null,a)),this.open++,n}},{key:"closeExtra",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}},{key:"finish",value:function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!(!this.isOpen&&!this.options.topOpen))}},{key:"sync",value:function(e){for(var t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=1)}return!1}},{key:"currentPos",get:function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e}},{key:"findAtPoint",value:function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}},{key:"findInside",value:function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}},{key:"findAround",value:function(e,t,n){if(e!=t&&this.find)for(var r=0;r<this.find.length;r++)null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},{key:"findInText",value:function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}},{key:"matchesContext",value:function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),r=this.options.context,o=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),a=function(e,s){for(;e>=0;e--){var u=n[e];if(""==u){if(e==n.length-1||0==e)continue;for(;s>=i;s--)if(a(e-1,s))return!0;return!1}var l=s>0||0==s&&o?t.nodes[s].type:r&&s>=i?r.node(s-i).type:null;if(!l||l.name!=u&&!l.isInGroup(u))return!1;s--}return!0};return a(n.length-1,this.open)}},{key:"textblockFromContext",value:function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}}}])}();function Ve(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function $e(e){var t={};for(var n in e)t[n]=e[n];return t}function Ue(e,t){var n,r=t.schema.nodes,o=function(){var n=r[i];if(!n.allowsMarkType(e))return 0;var o=[],a=function(e){o.push(e);for(var n=0;n<e.edgeCount;n++){var r=e.edge(n),i=r.type,s=r.next;if(i==t)return!0;if(o.indexOf(s)<0&&a(s))return!0}};return a(n.contentMatch)?{v:!0}:void 0};for(var i in r)if(0!==(n=o())&&n)return n.v}var Ge=function(){function e(t,n){R(this,e),this.nodes=t,this.marks=n}return I(e,[{key:"serializeFragment",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;r||(r=qe(n).createDocumentFragment());var o=r,i=[];return e.forEach((function(e){if(i.length||e.marks.length){for(var r=0,a=0;r<i.length&&a<e.marks.length;){var s=e.marks[a];if(t.marks[s.type.name]){if(!s.eq(i[r][0])||!1===s.type.spec.spanning)break;r++,a++}else a++}for(;r<i.length;)o=i.pop()[1];for(;a<e.marks.length;){var u=e.marks[a++],l=t.serializeMark(u,e.isInline,n);l&&(i.push([u,o]),o.appendChild(l.dom),o=l.contentDOM||l.dom)}}o.appendChild(t.serializeNodeInner(e,n))})),r}},{key:"serializeNodeInner",value:function(e,t){var n=Je(qe(t),this.nodes[e.type.name](e),null,e.attrs),r=n.dom,o=n.contentDOM;if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,o)}return r}},{key:"serializeNode",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serializeNodeInner(e,t),r=e.marks.length-1;r>=0;r--){var o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n}},{key:"serializeMark",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.marks[e.type.name];return r&&Je(qe(n),r(e,t),null,e.attrs)}}],[{key:"renderSpec",value:function(e,t){return Je(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0)}},{key:"fromSchema",value:function(t){return t.cached.domSerializer||(t.cached.domSerializer=new e(this.nodesFromSchema(t),this.marksFromSchema(t)))}},{key:"nodesFromSchema",value:function(e){var t=We(e.nodes);return t.text||(t.text=function(e){return e.text}),t}},{key:"marksFromSchema",value:function(e){return We(e.marks)}}])}();function We(e){var t={};for(var n in e){var r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function qe(e){return e.document||window.document}var Ke=new WeakMap;function Je(e,t,n,r){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;var o,i=t[0];if("string"!=typeof i)throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=function(e){var t=Ke.get(e);return void 0===t&&Ke.set(e,t=function(e){var t=null;return function e(n){if(n&&"object"==_(n))if(Array.isArray(n))if("string"==typeof n[0])t||(t=[]),t.push(n);else for(var r=0;r<n.length;r++)e(n[r]);else for(var o in n)e(n[o])}(e),t}(e)),t}(r))&&o.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");var a,s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));var u=n?e.createElementNS(n,i):e.createElement(i),l=t[1],c=1;if(l&&"object"==_(l)&&null==l.nodeType&&!Array.isArray(l))for(var d in c=2,l)if(null!=l[d]){var f=d.indexOf(" ");f>0?u.setAttributeNS(d.slice(0,f),d.slice(f+1),l[d]):u.setAttribute(d,l[d])}for(var p=c;p<t.length;p++){var h=t[p];if(0===h){if(p<t.length-1||p>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}var m=Je(e,h,n,r),v=m.dom,g=m.contentDOM;if(u.appendChild(v),g){if(a)throw new RangeError("Multiple content holes");a=g}}return{dom:u,contentDOM:a}}function Ze(e,t,n){return t=Ye(t),function(e,t){if(t&&("object"==tt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Xe()?Reflect.construct(t,n||[],Ye(e).constructor):t.apply(e,n))}function Xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xe=function(){return!!e})()}function Ye(e){return Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ye(e)}function Qe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&et(e,t)}function et(e,t){return et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},et(e,t)}function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}function nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,it(r.key),r)}}function ot(e,t,n){return t&&rt(e.prototype,t),n&&rt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function it(e){var t=function(e){if("object"!=tt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==tt(t)?t:t+""}var at=Math.pow(2,16);function st(e,t){return e+t*at}function ut(e){return 65535&e}var lt=function(){return ot((function e(t,n,r){nt(this,e),this.pos=t,this.delInfo=n,this.recover=r}),[{key:"deleted",get:function(){return(8&this.delInfo)>0}},{key:"deletedBefore",get:function(){return(5&this.delInfo)>0}},{key:"deletedAfter",get:function(){return(6&this.delInfo)>0}},{key:"deletedAcross",get:function(){return(4&this.delInfo)>0}}])}(),ct=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(nt(this,e),this.ranges=t,this.inverted=n,!t.length&&e.empty)return e.empty}return ot(e,[{key:"recover",value:function(e){var t=0,n=ut(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/at}(e)}},{key:"mapResult",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}},{key:"map",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!0)}},{key:"_map",value:function(e,t,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?r:0);if(s>e)break;var u=this.ranges[a+o],l=this.ranges[a+i],c=s+u;if(e<=c){var d=s+r+((u?e==s?-1:e==c?1:t:t)<0?0:l);if(n)return d;var f=e==(t<0?s:c)?null:st(a/3,e-s),p=e==s?2:e==c?1:4;return(t<0?e!=s:e!=c)&&(p|=8),new lt(d,p,f)}r+=l-u}return n?e+r:new lt(e+r,0,null)}},{key:"touches",value:function(e,t){for(var n=0,r=ut(t),o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?n:0);if(s>e)break;var u=this.ranges[a+o];if(e<=s+u&&a==3*r)return!0;n+=this.ranges[a+i]-u}return!1}},{key:"forEach",value:function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],a=i-(this.inverted?o:0),s=i+(this.inverted?0:o),u=this.ranges[r+t],l=this.ranges[r+n];e(a,a+u,s,s+l),o+=l-u}}},{key:"invert",value:function(){return new e(this.ranges,!this.inverted)}},{key:"toString",value:function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}}],[{key:"offset",value:function(t){return 0==t?e.empty:new e(t<0?[0,-t,0]:[0,0,t])}}])}();ct.empty=new ct([]);var dt=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t?t.length:0;nt(this,e),this.mirror=n,this.from=r,this.to=o,this._maps=t||[],this.ownData=!(t||n)}return ot(e,[{key:"maps",get:function(){return this._maps}},{key:"slice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maps.length;return new e(this._maps,this.mirror,t,n)}},{key:"appendMap",value:function(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),null!=t&&this.setMirror(this._maps.length-1,t)}},{key:"appendMapping",value:function(e){for(var t=0,n=this._maps.length;t<e._maps.length;t++){var r=e.getMirror(t);this.appendMap(e._maps[t],null!=r&&r<t?n+r:void 0)}}},{key:"getMirror",value:function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}},{key:"setMirror",value:function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}},{key:"appendMappingInverted",value:function(e){for(var t=e.maps.length-1,n=this._maps.length+e._maps.length;t>=0;t--){var r=e.getMirror(t);this.appendMap(e._maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}},{key:"invert",value:function(){var t=new e;return t.appendMappingInverted(this),t}},{key:"map",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this._maps[n].map(e,t);return e}},{key:"mapResult",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}},{key:"_map",value:function(e,t,n){for(var r=0,o=this.from;o<this.to;o++){var i=this._maps[o].mapResult(e,t);if(null!=i.recover){var a=this.getMirror(o);if(null!=a&&a>o&&a<this.to){o=a,e=this._maps[a].recover(i.recover);continue}}r|=i.delInfo,e=i.pos}return n?e:new lt(e,r,null)}}])}(),ft=Object.create(null),pt=function(){return ot((function e(){nt(this,e)}),[{key:"getMap",value:function(){return ct.empty}},{key:"merge",value:function(e){return null}}],[{key:"fromJSON",value:function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=ft[t.stepType];if(!n)throw new RangeError("No step type ".concat(t.stepType," defined"));return n.fromJSON(e,t)}},{key:"jsonID",value:function(e,t){if(e in ft)throw new RangeError("Duplicate use of step JSON ID "+e);return ft[e]=t,t.prototype.jsonID=e,t}}])}(),ht=function(){function e(t,n){nt(this,e),this.doc=t,this.failed=n}return ot(e,null,[{key:"ok",value:function(t){return new e(t,null)}},{key:"fail",value:function(t){return new e(null,t)}},{key:"fromReplace",value:function(t,n,r,o){try{return e.ok(t.replace(n,r,o))}catch(t){if(t instanceof K)return e.fail(t.message);throw t}}}])}();function mt(e,t,n){for(var r=[],o=0;o<e.childCount;o++){var i=e.child(o);i.content.size&&(i=i.copy(mt(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return $.fromArray(r)}var vt=function(e){function t(e,n,r){var o;return nt(this,t),(o=Ze(this,t)).from=e,o.to=n,o.mark=r,o}return Qe(t,e),ot(t,[{key:"apply",value:function(e){var t=this,n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new J(mt(n.content,(function(e,n){return e.isAtom&&n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),o),n.openStart,n.openEnd);return ht.fromReplace(e,this.from,this.to,i)}},{key:"invert",value:function(){return new gt(this.from,this.to,this.mark)}},{key:"map",value:function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)}},{key:"merge",value:function(e){return e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))}}])}(pt);pt.jsonID("addMark",vt);var gt=function(e){function t(e,n,r){var o;return nt(this,t),(o=Ze(this,t)).from=e,o.to=n,o.mark=r,o}return Qe(t,e),ot(t,[{key:"apply",value:function(e){var t=this,n=e.slice(this.from,this.to),r=new J(mt(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))}),e),n.openStart,n.openEnd);return ht.fromReplace(e,this.from,this.to,r)}},{key:"invert",value:function(){return new vt(this.from,this.to,this.mark)}},{key:"map",value:function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)}},{key:"merge",value:function(e){return e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))}}])}(pt);pt.jsonID("removeMark",gt);var yt=function(e){function t(e,n){var r;return nt(this,t),(r=Ze(this,t)).pos=e,r.mark=n,r}return Qe(t,e),ot(t,[{key:"apply",value:function(e){var t=e.nodeAt(this.pos);if(!t)return ht.fail("No node at mark step's position");var n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return ht.fromReplace(e,this.pos,this.pos+1,new J($.from(n),0,t.isLeaf?0:1))}},{key:"invert",value:function(e){var n=e.nodeAt(this.pos);if(n){var r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(var o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new t(this.pos,n.marks[o]);return new t(this.pos,this.mark)}}return new bt(this.pos,this.mark)}},{key:"map",value:function(e){var n=e.mapResult(this.pos,1);return n.deletedAfter?null:new t(n.pos,this.mark)}},{key:"toJSON",value:function(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new t(n.pos,e.markFromJSON(n.mark))}}])}(pt);pt.jsonID("addNodeMark",yt);var bt=function(e){function t(e,n){var r;return nt(this,t),(r=Ze(this,t)).pos=e,r.mark=n,r}return Qe(t,e),ot(t,[{key:"apply",value:function(e){var t=e.nodeAt(this.pos);if(!t)return ht.fail("No node at mark step's position");var n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return ht.fromReplace(e,this.pos,this.pos+1,new J($.from(n),0,t.isLeaf?0:1))}},{key:"invert",value:function(e){var t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new yt(this.pos,this.mark):this}},{key:"map",value:function(e){var n=e.mapResult(this.pos,1);return n.deletedAfter?null:new t(n.pos,this.mark)}},{key:"toJSON",value:function(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new t(n.pos,e.markFromJSON(n.mark))}}])}(pt);pt.jsonID("removeNodeMark",bt);var Dt=function(e){function t(e,n,r){var o,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return nt(this,t),(o=Ze(this,t)).from=e,o.to=n,o.slice=r,o.structure=i,o}return Qe(t,e),ot(t,[{key:"apply",value:function(e){return this.structure&&Ct(e,this.from,this.to)?ht.fail("Structure replace would overwrite content"):ht.fromReplace(e,this.from,this.to,this.slice)}},{key:"getMap",value:function(){return new ct([this.from,this.to-this.from,this.slice.size])}},{key:"invert",value:function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}},{key:"map",value:function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new t(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}},{key:"merge",value:function(e){if(!(e instanceof t)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?J.empty:new J(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}var r=this.slice.size+e.slice.size==0?J.empty:new J(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),r,this.structure)}},{key:"toJSON",value:function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,J.fromJSON(e,n.slice),!!n.structure)}}])}(pt);pt.jsonID("replace",Dt);var wt=function(e){function t(e,n,r,o,i,a){var s,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return nt(this,t),(s=Ze(this,t)).from=e,s.to=n,s.gapFrom=r,s.gapTo=o,s.slice=i,s.insert=a,s.structure=u,s}return Qe(t,e),ot(t,[{key:"apply",value:function(e){if(this.structure&&(Ct(e,this.from,this.gapFrom)||Ct(e,this.gapTo,this.to)))return ht.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return ht.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?ht.fromReplace(e,this.from,this.to,n):ht.fail("Content does not fit in gap")}},{key:"getMap",value:function(){return new ct([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}},{key:"invert",value:function(e){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}},{key:"map",value:function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||i>r.pos?null:new t(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)}},{key:"toJSON",value:function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,J.fromJSON(e,n.slice),n.insert,!!n.structure)}}])}(pt);function Ct(e,t,n){for(var r=e.resolve(t),o=n-t,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var a=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}return!1}function kt(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.contentMatch,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=e.doc.nodeAt(t),a=[],s=t+1,u=0;u<i.childCount;u++){var l=i.child(u),c=s+l.nodeSize,d=r.matchType(l.type);if(d){r=d;for(var f=0;f<l.marks.length;f++)n.allowsMarkType(l.marks[f].type)||e.step(new gt(s,c,l.marks[f]));if(o&&l.isText&&"pre"!=n.whitespace)for(var p=void 0,h=/\r?\n|\r/g,m=void 0;p=h.exec(l.text);)m||(m=new J($.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),a.push(new Dt(s+p.index,s+p.index+p[0].length,m))}else a.push(new Dt(s,c,J.empty));s=c}if(!r.validEnd){var v=r.fillBefore($.empty,!0);e.replace(s,s,new J(v,0,0))}for(var g=a.length-1;g>=0;g--)e.step(a[g])}function Et(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function xt(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),n=e.depth;;--n){var r=e.$from.node(n),o=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(o,i,t))return n;if(0==n||r.type.spec.isolating||!Et(r,o,i))break}return null}function St(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,o=function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;var a=i.length?i[0]:t;return n.canReplaceWith(r,o,a)?i:null}(e,t),i=o&&function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.child(r),a=t.contentMatch.findWrapping(i.type);if(!a)return null;for(var s=(a.length?a[a.length-1]:t).contentMatch,u=r;s&&u<o;u++)s=s.matchType(n.child(u).type);return s&&s.validEnd?a:null}(r,t);return i?o.map(At).concat({type:t,attrs:n}).concat(i.map(At)):null}function At(e){return{type:e,attrs:null}}function Ft(e,t,n,r){t.forEach((function(o,i){if(o.isText)for(var a,s=/\r?\n|\r/g;a=s.exec(o.text);){var u=e.mapping.slice(r).map(n+1+i+a.index);e.replaceWith(u,u+1,t.type.schema.linebreakReplacement.create())}}))}function Ot(e,t,n,r){t.forEach((function(o,i){if(o.type==o.type.schema.linebreakReplacement){var a=e.mapping.slice(r).map(n+1+i);e.replaceWith(a,a+1,t.type.schema.text("\n"))}}))}function Mt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=e.resolve(t),i=o.depth-n,a=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!a.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var s=o.depth-1,u=n-2;s>i;s--,u--){var l=o.node(s),c=o.index(s);if(l.type.spec.isolating)return!1;var d=l.content.cutByIndex(c,l.childCount),f=r&&r[u+1];f&&(d=d.replaceChild(0,f.type.create(f.attrs)));var p=r&&r[u]||l;if(!l.canReplace(c+1,l.childCount)||!p.type.validContent(d))return!1}var h=o.indexAfter(i),m=r&&r[0];return o.node(i).canReplaceWith(h,h,m?m.type:o.node(i+1).type)}function Bt(e,t){var n=e.resolve(t),r=n.index();return Pt(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Pt(e,t){return!(!e||!t||e.isLeaf||!function(e,t){t.content.size||e.type.compatibleContent(t.type);for(var n=e.contentMatchAt(e.childCount),r=e.type.schema.linebreakReplacement,o=0;o<t.childCount;o++){var i=t.child(o),a=i.type==r?e.type.schema.nodes.text:i.type;if(!(n=n.matchType(a)))return!1;if(!e.type.allowsMarks(i.marks))return!1}return n.validEnd}(e,t))}function Tt(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=e.resolve(t),o=r.depth;;o--){var i=void 0,a=void 0,s=r.index(o);if(o==r.depth?(i=r.nodeBefore,a=r.nodeAfter):n>0?(i=r.node(o+1),s++,a=r.node(o).maybeChild(s)):(i=r.node(o).maybeChild(s-1),a=r.node(o+1)),i&&!i.isTextblock&&Pt(i,a)&&r.node(o).canReplace(s,s+1))return t;if(0==o)break;t=n<0?r.before(o):r.after(o)}}function Nt(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var a=1;a<=(0==n.openStart&&n.size?2:1);a++)for(var s=r.depth;s>=0;s--){var u=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(u>0?1:0),c=r.node(s),d=!1;if(1==a)d=c.canReplace(l,l,o);else{var f=c.contentMatchAt(l).findWrapping(o.firstChild.type);d=f&&c.canReplaceWith(l,l,f[0])}if(d)return 0==u?r.pos:u<0?r.before(s+1):r.after(s+1)}return null}function jt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:J.empty;if(t==n&&!r.size)return null;var o=e.resolve(t),i=e.resolve(n);return _t(o,i,r)?new Dt(t,n,r):new Rt(o,i,r).fit()}function _t(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}pt.jsonID("replaceAround",wt);var Rt=function(){return ot((function e(t,n,r){nt(this,e),this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=$.empty;for(var o=0;o<=t.depth;o++){var i=t.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(o))})}for(var a=t.depth;a>0;a--)this.placed=$.from(t.node(a).copy(this.placed))}),[{key:"depth",get:function(){return this.frontier.length-1}},{key:"fit",value:function(){for(;this.unplaced.size;){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(t<0?this.$to:r.doc.resolve(t));if(!o)return null;for(var i=this.placed,a=r.depth,s=o.depth;a&&s&&1==i.childCount;)i=i.firstChild.content,a--,s--;var u=new J(i,a,s);return t>-1?new wt(r.pos,t,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new Dt(r.pos,o.pos,u):null}},{key:"findFittable",value:function(){for(var e=this.unplaced.openStart,t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){var o=t.firstChild;if(t.childCount>1&&(r=0),o.type.spec.isolating&&r<=n){e=n;break}t=o.content}for(var i=1;i<=2;i++)for(var a=1==i?e:this.unplaced.openStart;a>=0;a--)for(var s=null,u=(a?(s=Ht(this.unplaced.content,a-1).firstChild).content:this.unplaced.content).firstChild,l=this.depth;l>=0;l--){var c=this.frontier[l],d=c.type,f=c.match,p=void 0,h=null;if(1==i&&(u?f.matchType(u.type)||(h=f.fillBefore($.from(u),!1)):s&&d.compatibleContent(s.type)))return{sliceDepth:a,frontierDepth:l,parent:s,inject:h};if(2==i&&u&&(p=f.findWrapping(u.type)))return{sliceDepth:a,frontierDepth:l,parent:s,wrap:p};if(s&&f.matchType(s.type))break}}},{key:"openMore",value:function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,o=Ht(t,n);return!(!o.childCount||o.firstChild.isLeaf||(this.unplaced=new J(t,n+1,Math.max(r,o.size+n>=t.size-r?n+1:0)),0))}},{key:"dropNode",value:function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,o=Ht(t,n);if(o.childCount<=1&&n>0){var i=t.size-n<=n+o.size;this.unplaced=new J(Lt(t,n-1,1),n-1,i?n-1:r)}else this.unplaced=new J(Lt(t,n,1),n,r)}},{key:"placeNodes",value:function(e){for(var t=e.sliceDepth,n=e.frontierDepth,r=e.parent,o=e.inject,i=e.wrap;this.depth>n;)this.closeFrontierNode();if(i)for(var a=0;a<i.length;a++)this.openFrontierNode(i[a]);var s=this.unplaced,u=r?r.content:s.content,l=s.openStart-t,c=0,d=[],f=this.frontier[n],p=f.match,h=f.type;if(o){for(var m=0;m<o.childCount;m++)d.push(o.child(m));p=p.matchFragment(o)}for(var v=u.size+t-(s.content.size-s.openEnd);c<u.childCount;){var g=u.child(c),y=p.matchType(g.type);if(!y)break;(++c>1||0==l||g.content.size)&&(p=y,d.push(zt(g.mark(h.allowedMarks(g.marks)),1==c?l:0,c==u.childCount?v:-1)))}var b=c==u.childCount;b||(v=-1),this.placed=It(this.placed,n,$.from(d)),this.frontier[n].match=p,b&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var D=0,w=u;D<v;D++){var C=w.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),w=C.content}this.unplaced=b?0==t?J.empty:new J(Lt(s.content,t-1,1),t-1,v<0?s.openEnd:t-1):new J(Lt(s.content,t,c),s.openStart,s.openEnd)}},{key:"mustMoveInline",value:function(){if(!this.$to.parent.isTextblock)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!Vt(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r}},{key:"findCloseLevel",value:function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var n=this.frontier[t],r=n.match,o=n.type,i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=Vt(e,t,o,r,i);if(a){for(var s=t-1;s>=0;s--){var u=this.frontier[s],l=u.match,c=Vt(e,s,u.type,l,!0);if(!c||c.childCount)continue e}return{depth:t,fit:a,move:i?e.doc.resolve(e.after(t+1)):e}}}}},{key:"close",value:function(e){var t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=It(this.placed,t.depth,t.fit)),e=t.move;for(var n=t.depth+1;n<=e.depth;n++){var r=e.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,o)}return e}},{key:"openFrontierNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=It(this.placed,this.depth,$.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}},{key:"closeFrontierNode",value:function(){var e=this.frontier.pop().match.fillBefore($.empty,!0);e.childCount&&(this.placed=It(this.placed,this.frontier.length,e))}}])}();function Lt(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(Lt(e.firstChild.content,t-1,n)))}function It(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(It(e.lastChild.content,t-1,n)))}function Ht(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function zt(e,t,n){if(t<=0)return e;var r=e.content;return t>1&&(r=r.replaceChild(0,zt(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore($.empty,!0)))),e.copy(r)}function Vt(e,t,n,r,o){var i=e.node(t),a=o?e.indexAfter(t):e.index(t);if(a==i.childCount&&!n.compatibleContent(i.type))return null;var s=r.fillBefore(i.content,!0,a);return s&&!function(e,t,n){for(var r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,i.content,a)?s:null}function $t(e,t,n,r,o){if(t<n){var i=e.firstChild;e=e.replaceChild(0,i.copy($t(i.content,t+1,n,r,i)))}if(t>r){var a=o.contentMatchAt(0),s=a.fillBefore(e).append(e);e=s.append(a.matchFragment(s).fillBefore($.empty,!0))}return e}function Ut(e,t){for(var n=[],r=Math.min(e.depth,t.depth);r>=0;r--){var o=e.start(r);if(o<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(o==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==o-1)&&n.push(r)}return n}var Gt=function(e){function t(e,n,r){var o;return nt(this,t),(o=Ze(this,t)).pos=e,o.attr=n,o.value=r,o}return Qe(t,e),ot(t,[{key:"apply",value:function(e){var t=e.nodeAt(this.pos);if(!t)return ht.fail("No node at attribute step's position");var n=Object.create(null);for(var r in t.attrs)n[r]=t.attrs[r];n[this.attr]=this.value;var o=t.type.create(n,null,t.marks);return ht.fromReplace(e,this.pos,this.pos+1,new J($.from(o),0,t.isLeaf?0:1))}},{key:"getMap",value:function(){return ct.empty}},{key:"invert",value:function(e){return new t(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}},{key:"map",value:function(e){var n=e.mapResult(this.pos,1);return n.deletedAfter?null:new t(n.pos,this.attr,this.value)}},{key:"toJSON",value:function(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.pos||"string"!=typeof n.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new t(n.pos,n.attr,n.value)}}])}(pt);pt.jsonID("attr",Gt);var Wt=function(e){function t(e,n){var r;return nt(this,t),(r=Ze(this,t)).attr=e,r.value=n,r}return Qe(t,e),ot(t,[{key:"apply",value:function(e){var t=Object.create(null);for(var n in e.attrs)t[n]=e.attrs[n];t[this.attr]=this.value;var r=e.type.create(t,e.content,e.marks);return ht.ok(r)}},{key:"getMap",value:function(){return ct.empty}},{key:"invert",value:function(e){return new t(this.attr,e.attrs[this.attr])}},{key:"map",value:function(e){return this}},{key:"toJSON",value:function(){return{stepType:"docAttr",attr:this.attr,value:this.value}}}],[{key:"fromJSON",value:function(e,n){if("string"!=typeof n.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new t(n.attr,n.value)}}])}(pt);pt.jsonID("docAttr",Wt);var qt=Error;((qt=function e(t){var n=Error.call(this,t);return n.__proto__=e.prototype,n}).prototype=Object.create(Error.prototype)).constructor=qt,qt.prototype.name="TransformError";var Kt=function(){return ot((function e(t){nt(this,e),this.doc=t,this.steps=[],this.docs=[],this.mapping=new dt}),[{key:"before",get:function(){return this.docs.length?this.docs[0]:this.doc}},{key:"step",value:function(e){var t=this.maybeStep(e);if(t.failed)throw new qt(t.failed);return this}},{key:"maybeStep",value:function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}},{key:"docChanged",get:function(){return this.steps.length>0}},{key:"addStep",value:function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}},{key:"replace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:J.empty,r=jt(this.doc,e,t,n);return r&&this.step(r),this}},{key:"replaceWith",value:function(e,t,n){return this.replace(e,t,new J($.from(n),0,0))}},{key:"delete",value:function(e,t){return this.replace(e,t,J.empty)}},{key:"insert",value:function(e,t){return this.replaceWith(e,e,t)}},{key:"replaceRange",value:function(e,t,n){return function(e,t,n,r){if(!r.size)return e.deleteRange(t,n);var o=e.doc.resolve(t),i=e.doc.resolve(n);if(_t(o,i,r))return e.step(new Dt(t,n,r));var a=Ut(o,e.doc.resolve(n));0==a[a.length-1]&&a.pop();var s=-(o.depth+1);a.unshift(s);for(var u=o.depth,l=o.pos-1;u>0;u--,l--){var c=o.node(u).type.spec;if(c.defining||c.definingAsContext||c.isolating)break;a.indexOf(u)>-1?s=u:o.before(u)==l&&a.splice(1,0,-u)}for(var d,f=a.indexOf(s),p=[],h=r.openStart,m=r.content,v=0;;v++){var g=m.firstChild;if(p.push(g),v==r.openStart)break;m=g.content}for(var y=h-1;y>=0;y--){var b=p[y],D=(d=b.type).spec.defining||d.spec.definingForContent;if(D&&!b.sameMarkup(o.node(Math.abs(s)-1)))h=y;else if(D||!b.type.isTextblock)break}for(var w=r.openStart;w>=0;w--){var C=(w+h+1)%(r.openStart+1),k=p[C];if(k)for(var E=0;E<a.length;E++){var x=a[(E+f)%a.length],S=!0;x<0&&(S=!1,x=-x);var A=o.node(x-1),F=o.index(x-1);if(A.canReplaceWith(F,F,k.type,k.marks))return e.replace(o.before(x),S?i.after(x):n,new J($t(r.content,0,r.openStart,C),C,r.openEnd))}}for(var O=e.steps.length,M=a.length-1;M>=0&&(e.replace(t,n,r),!(e.steps.length>O));M--){var B=a[M];B<0||(t=o.before(B),n=i.after(B))}}(this,e,t,n),this}},{key:"replaceRangeWith",value:function(e,t,n){return function(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){var o=function(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var a=r.depth-1;a>=0;a--){var s=r.indexAfter(a);if(r.node(a).canReplaceWith(s,s,n))return r.after(a+1);if(s<r.node(a).childCount)return null}return null}(e.doc,t,r.type);null!=o&&(t=n=o)}e.replaceRange(t,n,new J($.from(r),0,0))}(this,e,t,n),this}},{key:"deleteRange",value:function(e,t){return function(e,t,n){for(var r=e.doc.resolve(t),o=e.doc.resolve(n),i=Ut(r,o),a=0;a<i.length;a++){var s=i[a],u=a==i.length-1;if(u&&0==s||r.node(s).type.contentMatch.validEnd)return e.delete(r.start(s),o.end(s));if(s>0&&(u||r.node(s-1).canReplace(r.index(s-1),o.indexAfter(s-1))))return e.delete(r.before(s),o.after(s))}for(var l=1;l<=r.depth&&l<=o.depth;l++)if(t-r.start(l)==r.depth-l&&n>r.end(l)&&o.end(l)-n!=o.depth-l&&r.start(l-1)==o.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),o.index(l-1)))return e.delete(r.before(l),n);e.delete(t,n)}(this,e,t),this}},{key:"lift",value:function(e,t){return function(e,t,n){for(var r=t.$from,o=t.$to,i=t.depth,a=r.before(i+1),s=o.after(i+1),u=a,l=s,c=$.empty,d=0,f=i,p=!1;f>n;f--)p||r.index(f)>0?(p=!0,c=$.from(r.node(f).copy(c)),d++):u--;for(var h=$.empty,m=0,v=i,g=!1;v>n;v--)g||o.after(v+1)<o.end(v)?(g=!0,h=$.from(o.node(v).copy(h)),m++):l++;e.step(new wt(u,l,a,s,new J(c.append(h),d,m),c.size-d,!0))}(this,e,t),this}},{key:"join",value:function(e){return function(e,t,n){var r=null,o=e.doc.type.schema.linebreakReplacement,i=e.doc.resolve(t-n),a=i.node().type;if(o&&a.inlineContent){var s="pre"==a.whitespace,u=!!a.contentMatch.matchType(o);s&&!u?r=!1:!s&&u&&(r=!0)}var l=e.steps.length;if(!1===r){var c=e.doc.resolve(t+n);Ot(e,c.node(),c.before(),l)}a.inlineContent&&kt(e,t+n-1,a,i.node().contentMatchAt(i.index()),null==r);var d=e.mapping.slice(l),f=d.map(t-n);if(e.step(new Dt(f,d.map(t+n,-1),J.empty,!0)),!0===r){var p=e.doc.resolve(f);Ft(e,p.node(),p.before(),e.steps.length)}}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this}},{key:"wrap",value:function(e,t){return function(e,t,n){for(var r=$.empty,o=n.length-1;o>=0;o--){if(r.size){var i=n[o].type.contentMatch.matchFragment(r);if(!i||!i.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=$.from(n[o].type.create(n[o].attrs,r))}var a=t.start,s=t.end;e.step(new wt(a,s,a,s,new J(r,0,0),n.length,!0))}(this,e,t),this}},{key:"setBlockType",value:function(e){return function(e,t,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=e.steps.length;e.doc.nodesBetween(t,n,(function(t,n){var a="function"==typeof o?o(t):o;if(t.isTextblock&&!t.hasMarkup(r,a)&&function(e,t,n){var r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(e.doc,e.mapping.slice(i).map(n),r)){var s=null;if(r.schema.linebreakReplacement){var u="pre"==r.whitespace,l=!!r.contentMatch.matchType(r.schema.linebreakReplacement);u&&!l?s=!1:!u&&l&&(s=!0)}!1===s&&Ot(e,t,n,i),kt(e,e.mapping.slice(i).map(n,1),r,void 0,null===s);var c=e.mapping.slice(i),d=c.map(n,1),f=c.map(n+t.nodeSize,1);return e.step(new wt(d,f,d+1,f-1,new J($.from(r.create(a,null,t.marks)),0,0),1,!0)),!0===s&&Ft(e,t,n,i),!1}}))}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,arguments.length>2?arguments[2]:void 0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null),this}},{key:"setNodeMarkup",value:function(e,t){return function(e,t,n,r,o){var i=e.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");n||(n=i.type);var a=n.create(r,null,o||i.marks);if(i.isLeaf)return e.replaceWith(t,t+i.nodeSize,a);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new wt(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new J($.from(a),0,0),1,!0))}(this,e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0),this}},{key:"setNodeAttribute",value:function(e,t,n){return this.step(new Gt(e,t,n)),this}},{key:"setDocAttribute",value:function(e,t){return this.step(new Wt(e,t)),this}},{key:"addNodeMark",value:function(e,t){return this.step(new yt(e,t)),this}},{key:"removeNodeMark",value:function(e,t){var n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(t instanceof q)t.isInSet(n.marks)&&this.step(new bt(e,t));else{for(var r,o=n.marks,i=[];r=t.isInSet(o);)i.push(new bt(e,r)),o=r.removeFromSet(o);for(var a=i.length-1;a>=0;a--)this.step(i[a])}return this}},{key:"split",value:function(e){return function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=e.doc.resolve(t),i=$.empty,a=$.empty,s=o.depth,u=o.depth-n,l=n-1;s>u;s--,l--){i=$.from(o.node(s).copy(i));var c=r&&r[l];a=$.from(c?c.type.create(c.attrs,a):o.node(s).copy(a))}e.step(new Dt(t,t,new J(i.append(a),n,n),!0))}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2?arguments[2]:void 0),this}},{key:"addMark",value:function(e,t,n){return function(e,t,n,r){var o,i,a=[],s=[];e.doc.nodesBetween(t,n,(function(e,u,l){if(e.isInline){var c=e.marks;if(!r.isInSet(c)&&l.type.allowsMarkType(r.type)){for(var d=Math.max(u,t),f=Math.min(u+e.nodeSize,n),p=r.addToSet(c),h=0;h<c.length;h++)c[h].isInSet(p)||(o&&o.to==d&&o.mark.eq(c[h])?o.to=f:a.push(o=new gt(d,f,c[h])));i&&i.to==d?i.to=f:s.push(i=new vt(d,f,r))}}})),a.forEach((function(t){return e.step(t)})),s.forEach((function(t){return e.step(t)}))}(this,e,t,n),this}},{key:"removeMark",value:function(e,t,n){return function(e,t,n,r){var o=[],i=0;e.doc.nodesBetween(t,n,(function(e,a){if(e.isInline){i++;var s=null;if(r instanceof Pe)for(var u,l=e.marks;u=r.isInSet(l);)(s||(s=[])).push(u),l=u.removeFromSet(l);else r?r.isInSet(e.marks)&&(s=[r]):s=e.marks;if(s&&s.length)for(var c=Math.min(a+e.nodeSize,n),d=0;d<s.length;d++){for(var f=s[d],p=void 0,h=0;h<o.length;h++){var m=o[h];m.step==i-1&&f.eq(o[h].style)&&(p=m)}p?(p.to=c,p.step=i):o.push({style:f,from:Math.max(a,t),to:c,step:i})}}})),o.forEach((function(t){return e.step(new gt(t.from,t.to,t.style))}))}(this,e,t,n),this}},{key:"clearIncompatible",value:function(e,t,n){return kt(this,e,t,n),this}}])}();function Jt(e,t,n){return t=Qt(t),function(e,t){if(t&&("object"==nn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Zt()?Reflect.construct(t,n||[],Qt(e).constructor):t.apply(e,n))}function Zt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zt=function(){return!!e})()}function Xt(e,t,n,r){var o=Yt(Qt(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function Yt(){return Yt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Qt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Yt.apply(null,arguments)}function Qt(e){return Qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qt(e)}function en(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tn(e,t)}function tn(e,t){return tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tn(e,t)}function nn(e){return nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nn(e)}function rn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function on(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sn(r.key),r)}}function an(e,t,n){return t&&on(e.prototype,t),n&&on(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function sn(e){var t=function(e){if("object"!=nn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=nn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==nn(t)?t:t+""}var un=Object.create(null),ln=function(){return an((function e(t,n,r){rn(this,e),this.$anchor=t,this.$head=n,this.ranges=r||[new cn(t.min(n),t.max(n))]}),[{key:"anchor",get:function(){return this.$anchor.pos}},{key:"head",get:function(){return this.$head.pos}},{key:"from",get:function(){return this.$from.pos}},{key:"to",get:function(){return this.$to.pos}},{key:"$from",get:function(){return this.ranges[0].$from}},{key:"$to",get:function(){return this.ranges[0].$to}},{key:"empty",get:function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}},{key:"content",value:function(){return this.$from.doc.slice(this.from,this.to,!0)}},{key:"replace",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:J.empty,n=t.content.lastChild,r=null,o=0;o<t.openEnd;o++)r=n,n=n.lastChild;for(var i=e.steps.length,a=this.ranges,s=0;s<a.length;s++){var u=a[s],l=u.$from,c=u.$to,d=e.mapping.slice(i);e.replaceRange(d.map(l.pos),d.map(c.pos),s?J.empty:t),0==s&&Dn(e,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}}},{key:"replaceWith",value:function(e,t){for(var n=e.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],a=i.$from,s=i.$to,u=e.mapping.slice(n),l=u.map(a.pos),c=u.map(s.pos);o?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),Dn(e,n,t.isInline?-1:1))}}},{key:"getBookmark",value:function(){return pn.between(this.$anchor,this.$head).getBookmark()}}],[{key:"findFrom",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.parent.inlineContent?new pn(e):bn(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(var o=e.depth-1;o>=0;o--){var i=t<0?bn(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):bn(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(i)return i}return null}},{key:"near",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.findFrom(e,t)||this.findFrom(e,-t)||new gn(e.node(0))}},{key:"atStart",value:function(e){return bn(e,e,0,0,1)||new gn(e)}},{key:"atEnd",value:function(e){return bn(e,e,e.content.size,e.childCount,-1)||new gn(e)}},{key:"fromJSON",value:function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=un[t.type];if(!n)throw new RangeError("No selection type ".concat(t.type," defined"));return n.fromJSON(e,t)}},{key:"jsonID",value:function(e,t){if(e in un)throw new RangeError("Duplicate use of selection JSON ID "+e);return un[e]=t,t.prototype.jsonID=e,t}}])}();ln.prototype.visible=!0;var cn=an((function e(t,n){rn(this,e),this.$from=t,this.$to=n})),dn=!1;function fn(e){dn||e.parent.inlineContent||(dn=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}var pn=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return rn(this,t),fn(e),fn(n),Jt(this,t,[e,n])}return en(t,e),an(t,[{key:"$cursor",get:function(){return this.$anchor.pos==this.$head.pos?this.$head:null}},{key:"map",value:function(e,n){var r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return ln.near(r);var o=e.resolve(n.map(this.anchor));return new t(o.parent.inlineContent?o:r,r)}},{key:"replace",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:J.empty;if(Xt(t,"replace",this,3)([e,n]),n==J.empty){var r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}},{key:"eq",value:function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head}},{key:"getBookmark",value:function(){return new hn(this.anchor,this.head)}},{key:"toJSON",value:function(){return{type:"text",anchor:this.anchor,head:this.head}}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))}},{key:"create",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}},{key:"between",value:function(e,n,r){var o=e.pos-n.pos;if(r&&!o||(r=o>=0?1:-1),!n.parent.inlineContent){var i=ln.findFrom(n,r,!0)||ln.findFrom(n,-r,!0);if(!i)return ln.near(n,r);n=i.$head}return e.parent.inlineContent||(0==o||(e=(ln.findFrom(e,-r,!0)||ln.findFrom(e,r,!0)).$anchor).pos<n.pos!=o<0)&&(e=n),new t(e,n)}}])}(ln);ln.jsonID("text",pn);var hn=function(){function e(t,n){rn(this,e),this.anchor=t,this.head=n}return an(e,[{key:"map",value:function(t){return new e(t.map(this.anchor),t.map(this.head))}},{key:"resolve",value:function(e){return pn.between(e.resolve(this.anchor),e.resolve(this.head))}}])}(),mn=function(e){function t(e){var n;rn(this,t);var r=e.nodeAfter,o=e.node(0).resolve(e.pos+r.nodeSize);return(n=Jt(this,t,[e,o])).node=r,n}return en(t,e),an(t,[{key:"map",value:function(e,n){var r=n.mapResult(this.anchor),o=r.deleted,i=r.pos,a=e.resolve(i);return o?ln.near(a):new t(a)}},{key:"content",value:function(){return new J($.from(this.node),0,0)}},{key:"eq",value:function(e){return e instanceof t&&e.anchor==this.anchor}},{key:"toJSON",value:function(){return{type:"node",anchor:this.anchor}}},{key:"getBookmark",value:function(){return new vn(this.anchor)}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))}},{key:"create",value:function(e,n){return new t(e.resolve(n))}},{key:"isSelectable",value:function(e){return!e.isText&&!1!==e.type.spec.selectable}}])}(ln);mn.prototype.visible=!1,ln.jsonID("node",mn);var vn=function(){function e(t){rn(this,e),this.anchor=t}return an(e,[{key:"map",value:function(t){var n=t.mapResult(this.anchor),r=n.deleted,o=n.pos;return r?new hn(o,o):new e(o)}},{key:"resolve",value:function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&mn.isSelectable(n)?new mn(t):ln.near(t)}}])}(),gn=function(e){function t(e){return rn(this,t),Jt(this,t,[e.resolve(0),e.resolve(e.content.size)])}return en(t,e),an(t,[{key:"replace",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:J.empty;if(n==J.empty){e.delete(0,e.doc.content.size);var r=ln.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else Xt(t,"replace",this,3)([e,n])}},{key:"toJSON",value:function(){return{type:"all"}}},{key:"map",value:function(e){return new t(e)}},{key:"eq",value:function(e){return e instanceof t}},{key:"getBookmark",value:function(){return yn}}],[{key:"fromJSON",value:function(e){return new t(e)}}])}(ln);ln.jsonID("all",gn);var yn={map:function(){return this},resolve:function(e){return new gn(e)}};function bn(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(t.inlineContent)return pn.create(e,n);for(var a=r-(o>0?0:1);o>0?a<t.childCount:a>=0;a+=o){var s=t.child(a);if(s.isAtom){if(!i&&mn.isSelectable(s))return mn.create(e,n-(o<0?s.nodeSize:0))}else{var u=bn(e,s,n+o,o<0?s.childCount:0,o,i);if(u)return u}n+=s.nodeSize*o}return null}function Dn(e,t,n){var r=e.steps.length-1;if(!(r<t)){var o,i=e.steps[r];(i instanceof Dt||i instanceof wt)&&(e.mapping.maps[r].forEach((function(e,t,n,r){null==o&&(o=r)})),e.setSelection(ln.near(e.doc.resolve(o),n)))}}var wn=function(e){function t(e){var n;return rn(this,t),(n=Jt(this,t,[e.doc])).curSelectionFor=0,n.updated=0,n.meta=Object.create(null),n.time=Date.now(),n.curSelection=e.selection,n.storedMarks=e.storedMarks,n}return en(t,e),an(t,[{key:"selection",get:function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}},{key:"setSelection",value:function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&this.updated|1,this.storedMarks=null,this}},{key:"selectionSet",get:function(){return(1&this.updated)>0}},{key:"setStoredMarks",value:function(e){return this.storedMarks=e,this.updated|=2,this}},{key:"ensureMarks",value:function(e){return q.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}},{key:"addStoredMark",value:function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}},{key:"removeStoredMark",value:function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}},{key:"storedMarksSet",get:function(){return(2&this.updated)>0}},{key:"addStep",value:function(e,n){Xt(t,"addStep",this,3)([e,n]),this.updated=-3&this.updated,this.storedMarks=null}},{key:"setTime",value:function(e){return this.time=e,this}},{key:"replaceSelection",value:function(e){return this.selection.replace(this,e),this}},{key:"replaceSelectionWith",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||q.none))),n.replaceWith(this,e),this}},{key:"deleteSelection",value:function(){return this.selection.replace(this),this}},{key:"insertText",value:function(e,t,n){var r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(t);o=n==t?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,o)),this.selection.empty||this.setSelection(ln.near(this.selection.$to)),this}},{key:"setMeta",value:function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}},{key:"getMeta",value:function(e){return this.meta["string"==typeof e?e:e.key]}},{key:"isGeneric",get:function(){for(var e in this.meta)return!1;return!0}},{key:"scrollIntoView",value:function(){return this.updated|=4,this}},{key:"scrolledIntoView",get:function(){return(4&this.updated)>0}}])}(Kt);function Cn(e,t){return t&&e?e.bind(t):e}var kn=an((function e(t,n,r){rn(this,e),this.name=t,this.init=Cn(n.init,r),this.apply=Cn(n.apply,r)})),En=[new kn("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new kn("selection",{init:function(e,t){return e.selection||ln.atStart(t.doc)},apply:function(e){return e.selection}}),new kn("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new kn("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],xn=an((function e(t,n){var r=this;rn(this,e),this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=En.slice(),n&&n.forEach((function(e){if(r.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");r.plugins.push(e),r.pluginsByKey[e.key]=e,e.spec.state&&r.fields.push(new kn(e.key,e.spec.state,e))}))})),Sn=function(){function e(t){rn(this,e),this.config=t}return an(e,[{key:"schema",get:function(){return this.config.schema}},{key:"plugins",get:function(){return this.config.plugins}},{key:"apply",value:function(e){return this.applyTransaction(e).state}},{key:"filterTransaction",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=0;n<this.config.plugins.length;n++)if(n!=t){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0}},{key:"applyTransaction",value:function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var a=this.config.plugins[i];if(a.spec.appendTransaction){var s=r?r[i].n:0,u=r?r[i].state:this,l=s<t.length&&a.spec.appendTransaction.call(a,s?t.slice(s):t,u,n);if(l&&n.filterTransaction(l,i)){if(l.setMeta("appendedTransaction",e),!r){r=[];for(var c=0;c<this.config.plugins.length;c++)r.push(c<i?{state:n,n:t.length}:{state:this,n:0})}t.push(l),n=n.applyInner(l),o=!0}r&&(r[i]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}}},{key:"applyInner",value:function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var n=new e(this.config),r=this.config.fields,o=0;o<r.length;o++){var i=r[o];n[i.name]=i.apply(t,this[i.name],this,n)}return n}},{key:"tr",get:function(){return new wn(this)}},{key:"reconfigure",value:function(t){for(var n=new xn(this.schema,t.plugins),r=n.fields,o=new e(n),i=0;i<r.length;i++){var a=r[i].name;o[a]=this.hasOwnProperty(a)?this[a]:r[i].init(t,o)}return o}},{key:"toJSON",value:function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==nn(e))for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=e[n],o=r.spec.state;o&&o.toJSON&&(t[n]=o.toJSON.call(r,this[r.key]))}return t}}],[{key:"create",value:function(t){for(var n=new xn(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new e(n),o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(t,r);return r}},{key:"fromJSON",value:function(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var o=new xn(t.schema,t.plugins),i=new e(o);return o.fields.forEach((function(e){if("doc"==e.name)i.doc=pe.fromJSON(t.schema,n.doc);else if("selection"==e.name)i.selection=ln.fromJSON(i.doc,n.selection);else if("storedMarks"==e.name)n.storedMarks&&(i.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(var o in r){var a=r[o],s=a.spec.state;if(a.key==e.name&&s&&s.fromJSON&&Object.prototype.hasOwnProperty.call(n,o))return void(i[e.name]=s.fromJSON.call(a,t,n[o],i))}i[e.name]=e.init(t,i)}})),i}}])}();function An(e,t,n){for(var r in e){var o=e[r];o instanceof Function?o=o.bind(t):"handleDOMEvents"==r&&(o=An(o,t,{})),n[r]=o}return n}var Fn=function(){return an((function e(t){rn(this,e),this.spec=t,this.props={},t.props&&An(t.props,this,this.props),this.key=t.key?t.key.key:Mn("plugin")}),[{key:"getState",value:function(e){return e[this.key]}}])}(),On=Object.create(null);function Mn(e){return e in On?e+"$"+ ++On[e]:(On[e]=0,e+"$")}var Bn=function(){return an((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"key";rn(this,e),this.key=Mn(t)}),[{key:"get",value:function(e){return e.config.pluginsByKey[this.key]}},{key:"getState",value:function(e){return e[this.key]}}])}();function Pn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||Nn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Nn(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Nn(e,t){if(e){if("string"==typeof e)return jn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jn(e,t):void 0}}function jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _n(e,t,n){return t=Hn(t),function(e,t){if(t&&("object"==$n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Rn()?Reflect.construct(t,n||[],Hn(e).constructor):t.apply(e,n))}function Rn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Rn=function(){return!!e})()}function Ln(e,t,n,r){var o=In(Hn(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function In(){return In="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Hn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},In.apply(null,arguments)}function Hn(e){return Hn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hn(e)}function zn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vn(e,t)}function Vn(e,t){return Vn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vn(e,t)}function $n(e){return $n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$n(e)}function Un(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qn(r.key),r)}}function Wn(e,t,n){return t&&Gn(e.prototype,t),n&&Gn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function qn(e){var t=function(e){if("object"!=$n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=$n(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$n(t)?t:t+""}var Kn=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},Jn=function(e){var t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},Zn=null,Xn=function(e,t,n){var r=Zn||(Zn=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},Yn=function(e,t,n,r){return n&&(er(e,t,n,r,-1)||er(e,t,n,r,1))},Qn=/^(img|br|input|textarea|hr)$/i;function er(e,t,n,r,o){for(var i;;){if(e==n&&t==r)return!0;if(t==(o<0?0:tr(e))){var a=e.parentNode;if(!a||1!=a.nodeType||nr(e)||Qn.test(e.nodeName)||"false"==e.contentEditable)return!1;t=Kn(e)+(o<0?0:1),e=a}else{if(1!=e.nodeType)return!1;var s=e.childNodes[t+(o<0?-1:0)];if(1==s.nodeType&&"false"==s.contentEditable){if(!(null===(i=s.pmViewDesc)||void 0===i?void 0:i.ignoreForSelection))return!1;t+=o}else e=s,t=o<0?tr(e):0}}}function tr(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function nr(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var rr=function(e){return e.focusNode&&Yn(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function or(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}var ir="undefined"!=typeof navigator?navigator:null,ar="undefined"!=typeof document?document:null,sr=ir&&ir.userAgent||"",ur=/Edge\/(\d+)/.exec(sr),lr=/MSIE \d/.exec(sr),cr=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(sr),dr=!!(lr||cr||ur),fr=lr?document.documentMode:cr?+cr[1]:ur?+ur[1]:0,pr=!dr&&/gecko\/(\d+)/i.test(sr);pr&&(/Firefox\/(\d+)/.exec(sr)||[0,0])[1];var hr=!dr&&/Chrome\/(\d+)/.exec(sr),mr=!!hr,vr=hr?+hr[1]:0,gr=!dr&&!!ir&&/Apple Computer/.test(ir.vendor),yr=gr&&(/Mobile\/\w+/.test(sr)||!!ir&&ir.maxTouchPoints>2),br=yr||!!ir&&/Mac/.test(ir.platform),Dr=!!ir&&/Win/.test(ir.platform),wr=/Android \d/.test(sr),Cr=!!ar&&"webkitFontSmoothing"in ar.documentElement.style,kr=Cr?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Er(e){var t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function xr(e,t){return"number"==typeof e?e:e[t]}function Sr(e){var t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function Ar(e,t,n){for(var r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument,a=n||e.dom;a;)if(1==a.nodeType){var s=a,u=s==i.body,l=u?Er(i):Sr(s),c=0,d=0;if(t.top<l.top+xr(r,"top")?d=-(l.top-t.top+xr(o,"top")):t.bottom>l.bottom-xr(r,"bottom")&&(d=t.bottom-t.top>l.bottom-l.top?t.top+xr(o,"top")-l.top:t.bottom-l.bottom+xr(o,"bottom")),t.left<l.left+xr(r,"left")?c=-(l.left-t.left+xr(o,"left")):t.right>l.right-xr(r,"right")&&(c=t.right-l.right+xr(o,"right")),c||d)if(u)i.defaultView.scrollBy(c,d);else{var f=s.scrollLeft,p=s.scrollTop;d&&(s.scrollTop+=d),c&&(s.scrollLeft+=c);var h=s.scrollLeft-f,m=s.scrollTop-p;t={left:t.left-h,top:t.top-m,right:t.right-h,bottom:t.bottom-m}}var v=u?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(v))break;a="absolute"==v?a.offsetParent:Jn(a)}else a=Jn(a)}function Fr(e){for(var t=[],n=e.ownerDocument,r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=Jn(r));return t}function Or(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=r.dom,i=r.top,a=r.left;o.scrollTop!=i+t&&(o.scrollTop=i+t),o.scrollLeft!=a&&(o.scrollLeft=a)}}var Mr=null;function Br(e,t){for(var n,r,o,i,a=2e8,s=0,u=t.top,l=t.top,c=e.firstChild,d=0;c;c=c.nextSibling,d++){var f=void 0;if(1==c.nodeType)f=c.getClientRects();else{if(3!=c.nodeType)continue;f=Xn(c).getClientRects()}for(var p=0;p<f.length;p++){var h=f[p];if(h.top<=u&&h.bottom>=l){u=Math.max(h.bottom,u),l=Math.min(h.top,l);var m=h.left>t.left?h.left-t.left:h.right<t.left?t.left-h.right:0;if(m<a){n=c,a=m,r=m&&3==n.nodeType?{left:h.right<t.left?h.right:h.left,top:t.top}:t,1==c.nodeType&&m&&(s=d+(t.left>=(h.left+h.right)/2?1:0));continue}}else h.top>t.top&&!o&&h.left<=t.left&&h.right>=t.left&&(o=c,i={left:Math.max(h.left,Math.min(h.right,t.left)),top:h.top});!n&&(t.left>=h.right&&t.top>=h.top||t.left>=h.left&&t.top>=h.bottom)&&(s=d+1)}}return!n&&o&&(n=o,r=i,a=0),n&&3==n.nodeType?function(e,t){for(var n=e.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);var i=_r(r,1);if(i.top!=i.bottom&&Pr(t,i))return{node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||a&&1==n.nodeType?{node:e,offset:s}:Br(n,r)}function Pr(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function Tr(e,t,n){var r=e.childNodes.length;if(r&&n.top<n.bottom)for(var o=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),i=o;;){var a=e.childNodes[i];if(1==a.nodeType)for(var s=a.getClientRects(),u=0;u<s.length;u++){var l=s[u];if(Pr(t,l))return Tr(a,t,l)}if((i=(i+1)%r)==o)break}return e}function Nr(e,t){var n,r=e.dom.ownerDocument,o=0,i=function(e,t,n){if(e.caretPositionFromPoint)try{var r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(tr(r.offsetNode),r.offset)}}catch(e){}if(e.caretRangeFromPoint){var o=e.caretRangeFromPoint(t,n);if(o)return{node:o.startContainer,offset:Math.min(tr(o.startContainer),o.startOffset)}}}(r,t.left,t.top);i&&(n=i.node,o=i.offset);var a,s=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top);if(!s||!e.dom.contains(1!=s.nodeType?s.parentNode:s)){var u=e.dom.getBoundingClientRect();if(!Pr(t,u))return null;if(!(s=Tr(e.dom,t,u)))return null}if(gr)for(var l=s;n&&l;l=Jn(l))l.draggable&&(n=void 0);if(s=function(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(s,t),n){if(pr&&1==n.nodeType&&(o=Math.min(o,n.childNodes.length))<n.childNodes.length){var c,d=n.childNodes[o];"IMG"==d.nodeName&&(c=d.getBoundingClientRect()).right<=t.left&&c.bottom>t.top&&o++}var f;Cr&&o&&1==n.nodeType&&1==(f=n.childNodes[o-1]).nodeType&&"false"==f.contentEditable&&f.getBoundingClientRect().top>=t.top&&o--,n==e.dom&&o==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:0!=o&&1==n.nodeType&&"BR"==n.childNodes[o-1].nodeName||(a=function(e,t,n,r){for(var o=-1,i=t,a=!1;i!=e.dom;){var s=e.docView.nearestDesc(i,!0),u=void 0;if(!s)return null;if(1==s.dom.nodeType&&(s.node.isBlock&&s.parent||!s.contentDOM)&&((u=s.dom.getBoundingClientRect()).width||u.height)&&(s.node.isBlock&&s.parent&&(!a&&u.left>r.left||u.top>r.top?o=s.posBefore:(!a&&u.right<r.left||u.bottom<r.top)&&(o=s.posAfter),a=!0),!s.contentDOM&&o<0&&!s.node.isText))return(s.node.isBlock?r.top<(u.top+u.bottom)/2:r.left<(u.left+u.right)/2)?s.posBefore:s.posAfter;i=s.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n,-1)}(e,n,o,t))}null==a&&(a=function(e,t,n){var r=Br(t,n),o=r.node,i=r.offset,a=-1;if(1==o.nodeType&&!o.firstChild){var s=o.getBoundingClientRect();a=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(o,i,a)}(e,s,t));var p=e.docView.nearestDesc(s,!0);return{pos:a,inside:p?p.posAtStart-p.border:-1}}function jr(e){return e.top<e.bottom||e.left<e.right}function _r(e,t){var n=e.getClientRects();if(n.length){var r=n[t<0?0:n.length-1];if(jr(r))return r}return Array.prototype.find.call(n,jr)||e.getBoundingClientRect()}var Rr=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Lr(e,t,n){var r=e.docView.domFromPos(t,n<0?-1:1),o=r.node,i=r.offset,a=r.atom,s=Cr||pr;if(3==o.nodeType){if(!s||!Rr.test(o.nodeValue)&&(n<0?i:i!=o.nodeValue.length)){var u=i,l=i,c=n<0?1:-1;return n<0&&!i?(l++,c=-1):n>=0&&i==o.nodeValue.length?(u--,c=1):n<0?u--:l++,Ir(_r(Xn(o,u,l),c),c<0)}var d=_r(Xn(o,i,i),n);if(pr&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){var f=_r(Xn(o,i-1,i-1),-1);if(f.top==d.top){var p=_r(Xn(o,i,i+1),-1);if(p.top!=d.top)return Ir(p,p.left<f.left)}}return d}if(!e.state.doc.resolve(t-(a||0)).parent.inlineContent){if(null==a&&i&&(n<0||i==tr(o))){var h=o.childNodes[i-1];if(1==h.nodeType)return Hr(h.getBoundingClientRect(),!1)}if(null==a&&i<tr(o)){var m=o.childNodes[i];if(1==m.nodeType)return Hr(m.getBoundingClientRect(),!0)}return Hr(o.getBoundingClientRect(),n>=0)}if(null==a&&i&&(n<0||i==tr(o))){var v=o.childNodes[i-1],g=3==v.nodeType?Xn(v,tr(v)-(s?0:1)):1!=v.nodeType||"BR"==v.nodeName&&v.nextSibling?null:v;if(g)return Ir(_r(g,1),!1)}if(null==a&&i<tr(o)){for(var y=o.childNodes[i];y.pmViewDesc&&y.pmViewDesc.ignoreForCoords;)y=y.nextSibling;var b=y?3==y.nodeType?Xn(y,0,s?0:1):1==y.nodeType?y:null:null;if(b)return Ir(_r(b,-1),!0)}return Ir(_r(3==o.nodeType?Xn(o):o,-n),n>=0)}function Ir(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function Hr(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function zr(e,t,n){var r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}var Vr=/[\u0590-\u08ac]/,$r=null,Ur=null,Gr=!1;var Wr=function(){return Wn((function e(t,n,r,o){Un(this,e),this.parent=t,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=0,r.pmViewDesc=this}),[{key:"matchesWidget",value:function(e){return!1}},{key:"matchesMark",value:function(e){return!1}},{key:"matchesNode",value:function(e,t,n){return!1}},{key:"matchesHack",value:function(e){return!1}},{key:"parseRule",value:function(){return null}},{key:"stopEvent",value:function(e){return!1}},{key:"size",get:function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e}},{key:"border",get:function(){return 0}},{key:"destroy",value:function(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(var e=0;e<this.children.length;e++)this.children[e].destroy()}},{key:"posBeforeChild",value:function(e){for(var t=0,n=this.posAtStart;;t++){var r=this.children[t];if(r==e)return n;n+=r.size}}},{key:"posBefore",get:function(){return this.parent.posBeforeChild(this)}},{key:"posAtStart",get:function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}},{key:"posAfter",get:function(){return this.posBefore+this.size}},{key:"posAtEnd",get:function(){return this.posAtStart+this.size-2*this.border}},{key:"localPosFromDOM",value:function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var r,o;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&(!(o=r.pmViewDesc)||o.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,a;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&(!(a=i.pmViewDesc)||a.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(a):this.posAtEnd}var s;if(e==this.dom&&this.contentDOM)s=t>Kn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var u=e;;u=u.parentNode){if(u==this.dom){s=!1;break}if(u.previousSibling)break}if(null==s&&t==e.childNodes.length)for(var l=e;;l=l.parentNode){if(l==this.dom){s=!0;break}if(l.nextSibling)break}}return(null==s?n>0:s)?this.posAtEnd:this.posAtStart}},{key:"nearestDesc",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!0,r=e;r;r=r.parentNode){var o=this.getDesc(r),i=void 0;if(o&&(!t||o.node)){if(!n||!(i=o.nodeDOM)||(1==i.nodeType?i.contains(1==e.nodeType?e:e.parentNode):i==e))return o;n=!1}}}},{key:"getDesc",value:function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t}},{key:"posFromDOM",value:function(e,t,n){for(var r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}return-1}},{key:"descAt",value:function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],o=n+r.size;if(n==e&&o!=n){for(;!r.border&&r.children.length;)for(var i=0;i<r.children.length;i++){var a=r.children[i];if(a.size){r=a;break}}return r}if(e<o)return r.descAt(e-n-r.border);n=o}}},{key:"domFromPos",value:function(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};for(var n,r=0,o=0,i=0;r<this.children.length;r++){var a=this.children[r],s=i+a.size;if(s>e||a instanceof Qr){o=e-i;break}i=s}if(o)return this.children[r].domFromPos(o-this.children[r].border,t);for(;r&&!(n=this.children[r-1]).size&&n instanceof qr&&n.side>=0;r--);if(t<=0){for(var u,l=!0;(u=r?this.children[r-1]:null)&&u.dom.parentNode!=this.contentDOM;r--,l=!1);return u&&t&&l&&!u.border&&!u.domAtom?u.domFromPos(u.size,t):{node:this.contentDOM,offset:u?Kn(u.dom)+1:0}}for(var c,d=!0;(c=r<this.children.length?this.children[r]:null)&&c.dom.parentNode!=this.contentDOM;r++,d=!1);return c&&d&&!c.border&&!c.domAtom?c.domFromPos(0,t):{node:this.contentDOM,offset:c?Kn(c.dom):this.contentDOM.childNodes.length}}},{key:"parseRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,a=0;;a++){var s=this.children[a],u=i+s.size;if(-1==r&&e<=u){var l=i+s.border;if(e>=l&&t<=u-s.border&&s.node&&s.contentDOM&&this.contentDOM.contains(s.contentDOM))return s.parseRange(e,t,l);e=i;for(var c=a;c>0;c--){var d=this.children[c-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){r=Kn(d.dom)+1;break}e-=d.size}-1==r&&(r=0)}if(r>-1&&(u>t||a==this.children.length-1)){t=u;for(var f=a+1;f<this.children.length;f++){var p=this.children[f];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){o=Kn(p.dom);break}t+=p.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=u}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}}},{key:"emptyChildAt",value:function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}},{key:"domAfterPos",value:function(e){var t=this.domFromPos(e,0),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}},{key:"setSelection",value:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=Math.min(e,t),i=Math.max(e,t),a=0,s=0;a<this.children.length;a++){var u=this.children[a],l=s+u.size;if(o>s&&i<l)return u.setSelection(e-s-u.border,t-s-u.border,n,r);s=l}var c=this.domFromPos(e,e?-1:1),d=t==e?c:this.domFromPos(t,t?-1:1),f=n.root.getSelection(),p=n.domSelectionRange(),h=!1;if((pr||gr)&&e==t){var m=c,v=m.node,g=m.offset;if(3==v.nodeType){if((h=!(!g||"\n"!=v.nodeValue[g-1]))&&g==v.nodeValue.length)for(var y,b=v;b;b=b.parentNode){if(y=b.nextSibling){"BR"==y.nodeName&&(c=d={node:y.parentNode,offset:Kn(y)+1});break}var D=b.pmViewDesc;if(D&&D.node&&D.node.isBlock)break}}else{var w=v.childNodes[g-1];h=w&&("BR"==w.nodeName||"false"==w.contentEditable)}}if(pr&&p.focusNode&&p.focusNode!=d.node&&1==p.focusNode.nodeType){var C=p.focusNode.childNodes[p.focusOffset];C&&"false"==C.contentEditable&&(r=!0)}if(r||h&&gr||!Yn(c.node,c.offset,p.anchorNode,p.anchorOffset)||!Yn(d.node,d.offset,p.focusNode,p.focusOffset)){var k=!1;if((f.extend||e==t)&&!h){f.collapse(c.node,c.offset);try{e!=t&&f.extend(d.node,d.offset),k=!0}catch(e){}}if(!k){if(e>t){var E=c;c=d,d=E}var x=document.createRange();x.setEnd(d.node,d.offset),x.setStart(c.node,c.offset),f.removeAllRanges(),f.addRange(x)}}}},{key:"ignoreMutation",value:function(e){return!this.contentDOM&&"selection"!=e.type}},{key:"contentLost",get:function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}},{key:"markDirty",value:function(e,t){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?e<=i&&t>=n:e<i&&t>n){var a=n+o.border,s=i-o.border;if(e>=a&&t<=s)return this.dirty=e==n||t==i?2:1,void(e!=a||t!=s||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(e-a,t-a):o.dirty=3);o.dirty=o.dom!=o.contentDOM||o.dom.parentNode!=this.contentDOM||o.children.length?3:2}n=i}this.dirty=2}},{key:"markParentsDirty",value:function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}},{key:"domAtom",get:function(){return!1}},{key:"ignoreForCoords",get:function(){return!1}},{key:"ignoreForSelection",get:function(){return!1}},{key:"isText",value:function(e){return!1}}])}(),qr=function(e){function t(e,n,r,o){var i;Un(this,t);var a,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return a?a.parent?a.parent.posBeforeChild(a):void 0:o}))),!n.type.spec.raw){if(1!=s.nodeType){var u=document.createElement("span");u.appendChild(s),s=u}s.contentEditable="false",s.classList.add("ProseMirror-widget")}return(i=_n(this,t,[e,[],s,null])).widget=n,i.widget=n,a=i,i}return zn(t,e),Wn(t,[{key:"matchesWidget",value:function(e){return 0==this.dirty&&e.type.eq(this.widget.type)}},{key:"parseRule",value:function(){return{ignore:!0}}},{key:"stopEvent",value:function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)}},{key:"ignoreMutation",value:function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}},{key:"destroy",value:function(){this.widget.type.destroy(this.dom),Ln(t,"destroy",this,3)([])}},{key:"domAtom",get:function(){return!0}},{key:"ignoreForSelection",get:function(){return!!this.widget.type.spec.relaxedSide}},{key:"side",get:function(){return this.widget.type.side}}])}(Wr),Kr=function(e){function t(e,n,r,o){var i;return Un(this,t),(i=_n(this,t,[e,[],n,null])).textDOM=r,i.text=o,i}return zn(t,e),Wn(t,[{key:"size",get:function(){return this.text.length}},{key:"localPosFromDOM",value:function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}},{key:"domFromPos",value:function(e){return{node:this.textDOM,offset:e}}},{key:"ignoreMutation",value:function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}])}(Wr),Jr=function(e){function t(e,n,r,o,i){var a;return Un(this,t),(a=_n(this,t,[e,[],r,o])).mark=n,a.spec=i,a}return zn(t,e),Wn(t,[{key:"parseRule",value:function(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}},{key:"matchesMark",value:function(e){return 3!=this.dirty&&this.mark.eq(e)}},{key:"markDirty",value:function(e,n){if(Ln(t,"markDirty",this,3)([e,n]),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}}},{key:"slice",value:function(e,n,r){var o=t.create(this.parent,this.mark,!0,r),i=this.children,a=this.size;n<a&&(i=po(i,n,a,r)),e>0&&(i=po(i,0,e,r));for(var s=0;s<i.length;s++)i[s].parent=o;return o.children=i,o}},{key:"ignoreMutation",value:function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):Ln(t,"ignoreMutation",this,3)([e])}},{key:"destroy",value:function(){this.spec.destroy&&this.spec.destroy(),Ln(t,"destroy",this,3)([])}}],[{key:"create",value:function(e,n,r,o){var i=o.nodeViews[n.type.name],a=i&&i(n,o,r);return a&&a.dom||(a=Ge.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new t(e,n,a.dom,a.contentDOM||a.dom,a)}}])}(Wr),Zr=function(e){function t(e,n,r,o,i,a,s,u,l){var c;return Un(this,t),(c=_n(this,t,[e,[],i,a])).node=n,c.outerDeco=r,c.innerDeco=o,c.nodeDOM=s,c}return zn(t,e),Wn(t,[{key:"parseRule",value:function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(t.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(var n=this.children.length-1;n>=0;n--){var r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=function(){return $.empty})}else t.contentElement=this.contentDOM;else t.getContent=function(){return e.node.content};return t}},{key:"matchesNode",value:function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&uo(t,this.outerDeco)&&n.eq(this.innerDeco)}},{key:"size",get:function(){return this.node.nodeSize}},{key:"border",get:function(){return this.node.isLeaf?0:1}},{key:"updateChildren",value:function(e,t){var n=this,r=this.node.inlineContent,o=t,i=e.composing?this.localCompositionInfo(e,t):null,a=i&&i.pos>-1?i:null,s=i&&i.pos<0,u=new co(this,a&&a.node,e);!function(e,t,n,r){var o=t.locals(e),i=0;if(0!=o.length)for(var a=0,s=[],u=null,l=0;;){for(var c=void 0,d=void 0;a<o.length&&o[a].to==i;){var f=o[a++];f.widget&&(c?(d||(d=[c])).push(f):c=f)}if(c)if(d){d.sort(fo);for(var p=0;p<d.length;p++)n(d[p],l,!!u)}else n(c,l,!!u);var h=void 0,m=void 0;if(u)m=-1,h=u,u=null;else{if(!(l<e.childCount))break;m=l,h=e.child(l++)}for(var v=0;v<s.length;v++)s[v].to<=i&&s.splice(v--,1);for(;a<o.length&&o[a].from<=i&&o[a].to>i;)s.push(o[a++]);var g=i+h.nodeSize;if(h.isText){var y=g;a<o.length&&o[a].from<y&&(y=o[a].from);for(var b=0;b<s.length;b++)s[b].to<y&&(y=s[b].to);y<g&&(u=h.cut(y-i),h=h.cut(0,y-i),g=y,m=-1)}else for(;a<o.length&&o[a].to<g;)a++;r(h,h.isInline&&!h.isLeaf?s.filter((function(e){return!e.inline})):s.slice(),t.forChild(i,h),m),i=g}else for(var D=0;D<e.childCount;D++){var w=e.child(D);r(w,o,t.forChild(i,w),D),i+=w.nodeSize}}(this.node,this.innerDeco,(function(t,i,a){t.spec.marks?u.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!a&&u.syncToMarks(i==n.node.childCount?q.none:n.node.child(i).marks,r,e),u.placeWidget(t,e,o)}),(function(t,n,a,l){var c;u.syncToMarks(t.marks,r,e),u.findNodeMatch(t,n,a,l)||s&&e.state.selection.from>o&&e.state.selection.to<o+t.nodeSize&&(c=u.findIndexWithChild(i.node))>-1&&u.updateNodeAt(t,n,a,c,e)||u.updateNextNode(t,n,a,e,l,o)||u.addNode(t,n,a,e,o),o+=t.nodeSize})),u.syncToMarks([],r,e),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||2==this.dirty)&&(a&&this.protectLocalComposition(e,a),to(this.contentDOM,this.children,e),yr&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}},{key:"localCompositionInfo",value:function(e,t){var n=e.state.selection,r=n.from,o=n.to;if(!(e.state.selection instanceof pn)||r<t||o>t+this.node.content.size)return null;var i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){var a=i.nodeValue,s=function(e,t,n,r){for(var o=0,i=0;o<e.childCount&&i<=r;){var a=e.child(o++),s=i;if(i+=a.nodeSize,a.isText){for(var u=a.text;o<e.childCount;){var l=e.child(o++);if(i+=l.nodeSize,!l.isText)break;u+=l.text}if(i>=n){if(i>=r&&u.slice(r-t.length-s,r-s)==t)return r-t.length;var c=s<r?u.lastIndexOf(t,r-s-1):-1;if(c>=0&&c+t.length+s>=n)return s+c;if(n==r&&u.length>=r+t.length-s&&u.slice(r-s,r-s+t.length)==t)return r}}}return-1}(this.node.content,a,r-t,o-t);return s<0?null:{node:i,pos:s,text:a}}return{node:i,pos:-1,text:""}}},{key:"protectLocalComposition",value:function(e,t){var n=t.node,r=t.pos,o=t.text;if(!this.getDesc(n)){for(var i=n;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}var a=new Kr(this,i,n,o);e.input.compositionNodes.push(a),this.children=po(this.children,r,r+o.length,e,a)}}},{key:"update",value:function(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node)||(this.updateInner(e,t,n,r),0))}},{key:"updateInner",value:function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}},{key:"updateOuterDeco",value:function(e){if(!uo(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=io(this.dom,this.nodeDOM,oo(this.outerDeco,this.node,t),oo(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}}},{key:"selectNode",value:function(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}},{key:"deselectNode",value:function(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable"))}},{key:"domAtom",get:function(){return this.node.isAtom}}],[{key:"create",value:function(e,n,r,o,i,a){var s,u=i.nodeViews[n.type.name],l=u&&u(n,i,(function(){return s?s.parent?s.parent.posBeforeChild(s):void 0:a}),r,o),c=l&&l.dom,d=l&&l.contentDOM;if(n.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(n.text);else if(!c){var f=Ge.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs);c=f.dom,d=f.contentDOM}d||n.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));var p=c;return c=so(c,r,n),l?s=new eo(e,n,r,o,c,d||null,p,l,i,a+1):n.isText?new Yr(e,n,r,o,c,p,i):new t(e,n,r,o,c,d||null,p,i,a+1)}}])}(Wr);function Xr(e,t,n,r,o){so(r,t,e);var i=new Zr(void 0,e,t,n,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}var Yr=function(e){function t(e,n,r,o,i,a,s){return Un(this,t),_n(this,t,[e,n,r,o,i,null,a,s,0])}return zn(t,e),Wn(t,[{key:"parseRule",value:function(){for(var e=this.nodeDOM.parentNode;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}},{key:"update",value:function(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node)||(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,0))}},{key:"inParent",value:function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}},{key:"domFromPos",value:function(e){return{node:this.nodeDOM,offset:e}}},{key:"localPosFromDOM",value:function(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):Ln(t,"localPosFromDOM",this,3)([e,n,r])}},{key:"ignoreMutation",value:function(e){return"characterData"!=e.type&&"selection"!=e.type}},{key:"slice",value:function(e,n,r){var o=this.node.cut(e,n),i=document.createTextNode(o.text);return new t(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)}},{key:"markDirty",value:function(e,n){Ln(t,"markDirty",this,3)([e,n]),this.dom==this.nodeDOM||0!=e&&n!=this.nodeDOM.nodeValue.length||(this.dirty=3)}},{key:"domAtom",get:function(){return!1}},{key:"isText",value:function(e){return this.node.text==e}}])}(Zr),Qr=function(e){function t(){return Un(this,t),_n(this,t,arguments)}return zn(t,e),Wn(t,[{key:"parseRule",value:function(){return{ignore:!0}}},{key:"matchesHack",value:function(e){return 0==this.dirty&&this.dom.nodeName==e}},{key:"domAtom",get:function(){return!0}},{key:"ignoreForCoords",get:function(){return"IMG"==this.dom.nodeName}}])}(Wr),eo=function(e){function t(e,n,r,o,i,a,s,u,l,c){var d;return Un(this,t),(d=_n(this,t,[e,n,r,o,i,a,s,l,c])).spec=u,d}return zn(t,e),Wn(t,[{key:"update",value:function(e,n,r,o){if(3==this.dirty)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){var i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,o),i}return!(!this.contentDOM&&!e.isLeaf)&&Ln(t,"update",this,3)([e,n,r,o])}},{key:"selectNode",value:function(){this.spec.selectNode?this.spec.selectNode():Ln(t,"selectNode",this,3)([])}},{key:"deselectNode",value:function(){this.spec.deselectNode?this.spec.deselectNode():Ln(t,"deselectNode",this,3)([])}},{key:"setSelection",value:function(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r.root):Ln(t,"setSelection",this,3)([e,n,r,o])}},{key:"destroy",value:function(){this.spec.destroy&&this.spec.destroy(),Ln(t,"destroy",this,3)([])}},{key:"stopEvent",value:function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}},{key:"ignoreMutation",value:function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):Ln(t,"ignoreMutation",this,3)([e])}}])}(Zr);function to(e,t,n){for(var r=e.firstChild,o=!1,i=0;i<t.length;i++){var a=t[i],s=a.dom;if(s.parentNode==e){for(;s!=r;)r=lo(r),o=!0;r=r.nextSibling}else o=!0,e.insertBefore(s,r);if(a instanceof Jr){var u=r?r.previousSibling:e.lastChild;to(a.contentDOM,a.children,n),r=u?u.nextSibling:e.firstChild}}for(;r;)r=lo(r),o=!0;o&&n.trackWrites==e&&(n.trackWrites=null)}var no=function(e){e&&(this.nodeName=e)};no.prototype=Object.create(null);var ro=[new no];function oo(e,t,n){if(0==e.length)return ro;for(var r=n?ro[0]:new no,o=[r],i=0;i<e.length;i++){var a=e[i].type.attrs;if(a)for(var s in a.nodeName&&o.push(r=new no(a.nodeName)),a){var u=a[s];null!=u&&(n&&1==o.length&&o.push(r=new no(t.isInline?"span":"div")),"class"==s?r.class=(r.class?r.class+" ":"")+u:"style"==s?r.style=(r.style?r.style+";":"")+u:"nodeName"!=s&&(r[s]=u))}}return o}function io(e,t,n,r){if(n==ro&&r==ro)return t;for(var o=t,i=0;i<r.length;i++){var a=r[i],s=n[i];if(i){var u=void 0;s&&s.nodeName==a.nodeName&&o!=e&&(u=o.parentNode)&&u.nodeName.toLowerCase()==a.nodeName||((u=document.createElement(a.nodeName)).pmIsDeco=!0,u.appendChild(o),s=ro[0]),o=u}ao(o,s||ro[0],a)}return o}function ao(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t.class!=n.class){for(var i=t.class?t.class.split(" ").filter(Boolean):[],a=n.class?n.class.split(" ").filter(Boolean):[],s=0;s<i.length;s++)-1==a.indexOf(i[s])&&e.classList.remove(i[s]);for(var u=0;u<a.length;u++)-1==i.indexOf(a[u])&&e.classList.add(a[u]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style)for(var l,c=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=c.exec(t.style);)e.style.removeProperty(l[1]);n.style&&(e.style.cssText+=n.style)}}function so(e,t,n){return io(e,e,ro,oo(t,n,1!=e.nodeType))}function uo(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function lo(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var co=function(){return Wn((function e(t,n,r){Un(this,e),this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=function(e,t){var n=t,r=n.children.length,o=e.childCount,i=new Map,a=[];e:for(;o>0;){for(var s=void 0;;)if(r){var u=n.children[r-1];if(!(u instanceof Jr)){s=u,r--;break}n=u,r=u.children.length}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}var l=s.node;if(l){if(l!=e.child(o-1))break;--o,i.set(s,o),a.push(s)}}return{index:o,matched:i,matches:a.reverse()}}(t.node.content,t)}),[{key:"destroyBetween",value:function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}},{key:"destroyRest",value:function(){this.destroyBetween(this.index,this.top.children.length)}},{key:"syncToMarks",value:function(e,t,n){for(var r=0,o=this.stack.length>>1,i=Math.min(o,e.length);r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);for(var a=-1,s=this.index;s<Math.min(this.index+3,this.top.children.length);s++){var u=this.top.children[s];if(u.matchesMark(e[o])&&!this.isLocked(u.dom)){a=s;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{var l=Jr.create(this.top,e[o],t,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}}},{key:"findNodeMatch",value:function(e,t,n,r){var o,i=-1;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,n))i=this.top.children.indexOf(o,this.index);else for(var a=this.index,s=Math.min(this.top.children.length,a+5);a<s;a++){var u=this.top.children[a];if(u.matchesNode(e,t,n)&&!this.preMatch.matched.has(u)){i=a;break}}return!(i<0||(this.destroyBetween(this.index,i),this.index++,0))}},{key:"updateNodeAt",value:function(e,t,n,r,o){var i=this.top.children[r];return 3==i.dirty&&i.dom==i.contentDOM&&(i.dirty=2),!!i.update(e,t,n,o)&&(this.destroyBetween(this.index,r),this.index++,!0)}},{key:"findIndexWithChild",value:function(e){for(;;){var t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){var n=e.pmViewDesc;if(n)for(var r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==n)return r;return-1}e=t}}},{key:"updateNextNode",value:function(e,t,n,r,o,i){for(var a=this.index;a<this.top.children.length;a++){var s=this.top.children[a];if(s instanceof Zr){var u=this.preMatch.matched.get(s);if(null!=u&&u!=o)return!1;var l=s.dom,c=void 0,d=this.isLocked(l)&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&3!=s.dirty&&uo(t,s.outerDeco));if(!d&&s.update(e,t,n,r))return this.destroyBetween(this.index,a),s.dom!=l&&(this.changed=!0),this.index++,!0;if(!d&&(c=this.recreateWrapper(s,e,t,n,r,i)))return this.destroyBetween(this.index,a),this.top.children[this.index]=c,c.contentDOM&&(c.dirty=2,c.updateChildren(r,i+1),c.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}},{key:"recreateWrapper",value:function(e,t,n,r,o,i){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!uo(n,e.outerDeco)||!r.eq(e.innerDeco))return null;var a=Zr.create(this.top,t,n,r,o,i);if(a.contentDOM){a.children=e.children,e.children=[];var s,u=Tn(a.children);try{for(u.s();!(s=u.n()).done;)s.value.parent=a}catch(e){u.e(e)}finally{u.f()}}return e.destroy(),a}},{key:"addNode",value:function(e,t,n,r,o){var i=Zr.create(this.top,e,t,n,r,o);i.contentDOM&&i.updateChildren(r,o+1),this.top.children.splice(this.index++,0,i),this.changed=!0}},{key:"placeWidget",value:function(e,t,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){var o=new qr(this.top,e,t,n);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++}},{key:"addTextblockHacks",value:function(){for(var e=this.top.children[this.index-1],t=this.top;e instanceof Jr;)e=(t=e).children[t.children.length-1];(!e||!(e instanceof Yr)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((gr||mr)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}},{key:"addHackNode",value:function(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{var n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");var r=new Qr(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}},{key:"isLocked",value:function(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}])}();function fo(e,t){return e.type.side-t.type.side}function po(e,t,n,r,o){for(var i=[],a=0,s=0;a<e.length;a++){var u=e[a],l=s,c=s+=u.size;l>=n||c<=t?i.push(u):(l<t&&i.push(u.slice(0,t-l,r)),o&&(i.push(o),o=void 0),c>n&&i.push(u.slice(n-l,u.size,r)))}return i}function ho(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;var o=e.docView.nearestDesc(n.focusNode),i=o&&0==o.size,a=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;var s,u,l=r.resolve(a);if(rr(n)){for(s=a;o&&!o.node;)o=o.parent;var c=o.node;if(o&&c.isAtom&&mn.isSelectable(c)&&o.parent&&(!c.isInline||!function(e,t,n){for(var r=0==t,o=t==tr(e);r||o;){if(e==n)return!0;var i=Kn(e);if(!(e=e.parentNode))return!1;r=r&&0==i,o=o&&i==tr(e)}}(n.focusNode,n.focusOffset,o.dom))){var d=o.posBefore;u=new mn(a==d?l:r.resolve(d))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){for(var f=a,p=a,h=0;h<n.rangeCount;h++){var m=n.getRangeAt(h);f=Math.min(f,e.docView.posFromDOM(m.startContainer,m.startOffset,1)),p=Math.max(p,e.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(f<0)return null;var v=Pn(p==e.state.selection.anchor?[p,f]:[f,p],2);s=v[0],a=v[1],l=r.resolve(a)}else s=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(s<0)return null}var g=r.resolve(s);return u||(u=ko(e,g,l,"pointer"==t||e.state.selection.head<l.pos&&!i?1:-1)),u}function mo(e){return e.editable?e.hasFocus():xo(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function vo(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.state.selection;if(wo(e,n),mo(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&mr){var r=e.domSelectionRange(),o=e.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&Yn(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.domSelection(),n=document.createRange();if(t){var r=e.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setStart(r.parentNode,Kn(r)+1):n.setStart(r,0),n.collapse(!0),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&dr&&fr<=11&&(r.disabled=!0,r.disabled=!1)}}(e);else{var i,a,s=n.anchor,u=n.head;!go||n instanceof pn||(n.$from.parent.inlineContent||(i=yo(e,n.from)),n.empty||n.$from.parent.inlineContent||(a=yo(e,n.to))),e.docView.setSelection(s,u,e,t),go&&(i&&Do(i),a&&Do(a)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);var n=e.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout((function(){mo(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}var go=gr||mr&&vr<63;function yo(e,t){var n=e.docView.domFromPos(t,0),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,a=o?r.childNodes[o-1]:null;if(gr&&i&&"false"==i.contentEditable)return bo(i);if(!(i&&"false"!=i.contentEditable||a&&"false"!=a.contentEditable)){if(i)return bo(i);if(a)return bo(a)}}function bo(e){return e.contentEditable="true",gr&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Do(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function wo(e,t){if(t instanceof mn){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(Co(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else Co(e)}function Co(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function ko(e,t,n,r){return e.someProp("createSelectionBetween",(function(r){return r(e,t,n)}))||pn.between(t,n,r)}function Eo(e){return!(e.editable&&!e.hasFocus())&&xo(e)}function xo(e){var t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function So(e,t){var n=e.selection,r=n.$anchor,o=n.$head,i=t>0?r.max(o):r.min(o),a=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return a&&ln.findFrom(a,t)}function Ao(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Fo(e,t,n){var r=e.state.selection;if(!(r instanceof pn)){if(r instanceof mn&&r.node.isInline)return Ao(e,new pn(t>0?r.$to:r.$from));var o=So(e.state,t);return!!o&&Ao(e,o)}if(n.indexOf("s")>-1){var i=r.$head,a=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;var s=e.state.doc.resolve(i.pos+a.nodeSize*(t<0?-1:1));return Ao(e,new pn(r.$anchor,s))}if(!r.empty)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){var u=So(e.state,t);return!!(u&&u instanceof mn)&&Ao(e,u)}if(!(br&&n.indexOf("m")>-1)){var l,c=r.$head,d=c.textOffset?null:t<0?c.nodeBefore:c.nodeAfter;if(!d||d.isText)return!1;var f=t<0?c.pos-d.nodeSize:c.pos;return!!(d.isAtom||(l=e.docView.descAt(f))&&!l.contentDOM)&&(mn.isSelectable(d)?Ao(e,new mn(t<0?e.state.doc.resolve(c.pos-d.nodeSize):c)):!!Cr&&Ao(e,new pn(e.state.doc.resolve(t<0?f:f+d.nodeSize))))}}function Oo(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Mo(e,t){var n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function Bo(e,t){return t<0?function(e){var t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(n){var o,i,a=!1;for(pr&&1==n.nodeType&&r<Oo(n)&&Mo(n.childNodes[r],-1)&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;var s=n.childNodes[r-1];if(Mo(s,-1))o=n,i=--r;else{if(3!=s.nodeType)break;r=(n=s).nodeValue.length}}else{if(Po(n))break;for(var u=n.previousSibling;u&&Mo(u,-1);)o=n.parentNode,i=Kn(u),u=u.previousSibling;if(u)r=Oo(n=u);else{if((n=n.parentNode)==e.dom)break;r=0}}a?To(e,n,r):o&&To(e,o,i)}}(e):function(e){var t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(n){for(var o,i,a=Oo(n);;)if(r<a){if(1!=n.nodeType)break;if(!Mo(n.childNodes[r],1))break;o=n,i=++r}else{if(Po(n))break;for(var s=n.nextSibling;s&&Mo(s,1);)o=s.parentNode,i=Kn(s)+1,s=s.nextSibling;if(s)r=0,a=Oo(n=s);else{if((n=n.parentNode)==e.dom)break;r=a=0}}o&&To(e,o,i)}}(e)}function Po(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function To(e,t,n){var r,o;3!=t.nodeType&&((o=function(e,t){for(;e&&t==e.childNodes.length&&!nr(e);)t=Kn(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){var n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}(t,n))?(t=o,n=0):(r=function(e,t){for(;e&&!t&&!nr(e);)t=Kn(e),e=e.parentNode;for(;e&&t;){var n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=(e=n).childNodes.length}}(t,n))&&(t=r,n=r.nodeValue.length));var i=e.domSelection();if(i){if(rr(i)){var a=document.createRange();a.setEnd(t,n),a.setStart(t,n),i.removeAllRanges(),i.addRange(a)}else i.extend&&i.extend(t,n);e.domObserver.setCurSelection();var s=e.state;setTimeout((function(){e.state==s&&vo(e)}),50)}}function No(e,t){var n=e.state.doc.resolve(t);if(!mr&&!Dr&&n.parent.inlineContent){var r=e.coordsAtPos(t);if(t>n.start()){var o=e.coordsAtPos(t-1),i=(o.top+o.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(o.left-r.left)>1)return o.left<r.left?"ltr":"rtl"}if(t<n.end()){var a=e.coordsAtPos(t+1),s=(a.top+a.bottom)/2;if(s>r.top&&s<r.bottom&&Math.abs(a.left-r.left)>1)return a.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function jo(e,t,n){var r=e.state.selection;if(r instanceof pn&&!r.empty||n.indexOf("s")>-1)return!1;if(br&&n.indexOf("m")>-1)return!1;var o=r.$from,i=r.$to;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var a=So(e.state,t);if(a&&a instanceof mn)return Ao(e,a)}if(!o.parent.inlineContent){var s=t<0?o:i,u=r instanceof gn?ln.near(s,t):ln.findFrom(s,t);return!!u&&Ao(e,u)}return!1}function _o(e,t){if(!(e.state.selection instanceof pn))return!0;var n=e.state.selection,r=n.$head,o=n.$anchor,i=n.empty;if(!r.sameParent(o))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var a=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){var s=e.state.tr;return t<0?s.delete(r.pos-a.nodeSize,r.pos):s.delete(r.pos,r.pos+a.nodeSize),e.dispatch(s),!0}return!1}function Ro(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Lo(e,t){e.someProp("transformCopied",(function(n){t=n(t,e)}));for(var n=[],r=t,o=r.content,i=r.openStart,a=r.openEnd;i>1&&a>1&&1==o.childCount&&1==o.firstChild.childCount;){i--,a--;var s=o.firstChild;n.push(s.type.name,s.attrs!=s.type.defaultAttrs?s.attrs:null),o=s.content}var u=e.someProp("clipboardSerializer")||Ge.fromSchema(e.state.schema),l=Ko(),c=l.createElement("div");c.appendChild(u.serializeFragment(o,{document:l}));for(var d,f=c.firstChild,p=0;f&&1==f.nodeType&&(d=Wo[f.nodeName.toLowerCase()]);){for(var h=d.length-1;h>=0;h--){for(var m=l.createElement(d[h]);c.firstChild;)m.appendChild(c.firstChild);c.appendChild(m),p++}f=c.firstChild}return f&&1==f.nodeType&&f.setAttribute("data-pm-slice","".concat(i," ").concat(a).concat(p?" -".concat(p):""," ").concat(JSON.stringify(n))),{dom:c,text:e.someProp("clipboardTextSerializer",(function(n){return n(t,e)}))||t.content.textBetween(0,t.content.size,"\n\n"),slice:t}}function Io(e,t,n,r,o){var i,a,s=o.parent.type.spec.code;if(!n&&!t)return null;var u=t&&(r||s||!n);if(u){if(e.someProp("transformPastedText",(function(n){t=n(t,s||r,e)})),s)return t?new J($.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):J.empty;var l=e.someProp("clipboardTextParser",(function(n){return n(t,o,r,e)}));if(l)a=l;else{var c=o.marks(),d=e.state.schema,f=Ge.fromSchema(d);i=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach((function(e){var t=i.appendChild(document.createElement("p"));e&&t.appendChild(f.serializeNode(d.text(e,c)))}))}}else e.someProp("transformPastedHTML",(function(t){n=t(n,e)})),i=function(e){var t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=Ko().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(e);if((n=o&&Wo[o[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join("")),r.innerHTML=function(e){var t=window.trustedTypes;return t?(Jo||(Jo=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:function(e){return e}})),Jo.createHTML(e)):e}(e),n)for(var i=0;i<n.length;i++)r=r.querySelector(n[i])||r;return r}(n),Cr&&function(e){for(var t=e.querySelectorAll(mr?"span:not([class]):not([style])":"span.Apple-converted-space"),n=0;n<t.length;n++){var r=t[n];1==r.childNodes.length&&" "==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(i);var p=i&&i.querySelector("[data-pm-slice]"),h=p&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(p.getAttribute("data-pm-slice")||"");if(h&&h[3])for(var m=+h[3];m>0;m--){for(var v=i.firstChild;v&&1!=v.nodeType;)v=v.nextSibling;if(!v)break;i=v}if(!a){var g=e.someProp("clipboardParser")||e.someProp("domParser")||je.fromSchema(e.state.schema);a=g.parseSlice(i,{preserveWhitespace:!(!u&&!h),context:o,ruleFromNode:function(e){return"BR"!=e.nodeName||e.nextSibling||!e.parentNode||Ho.test(e.parentNode.nodeName)?null:{ignore:!0}}})}if(h)a=function(e,t){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}for(var o=e.content,i=e.openStart,a=e.openEnd,s=n.length-2;s>=0;s-=2){var u=r.nodes[n[s]];if(!u||u.hasRequiredAttrs())break;o=$.from(u.create(n[s+1],o)),i++,a++}return new J(o,i,a)}(Go(a,+h[1],+h[2]),h[4]);else if(a=J.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n,r=function(){var n,r=t.node(o).contentMatchAt(t.index(o)),i=[];if(e.forEach((function(e){if(i){var t,o=r.findWrapping(e.type);if(!o)return i=null;if(t=i.length&&n.length&&Vo(o,n,e,i[i.length-1],0))i[i.length-1]=t;else{i.length&&(i[i.length-1]=$o(i[i.length-1],n.length));var a=zo(e,o);i.push(a),r=r.matchType(a.type),n=o}}})),i)return{v:$.from(i)}},o=t.depth;o>=0;o--)if(n=r())return n.v;return e}(a.content,o),!0),a.openStart||a.openEnd){for(var y=0,b=0,D=a.content.firstChild;y<a.openStart&&!D.type.spec.isolating;y++,D=D.firstChild);for(var w=a.content.lastChild;b<a.openEnd&&!w.type.spec.isolating;b++,w=w.lastChild);a=Go(a,y,b)}return e.someProp("transformPasted",(function(t){a=t(a,e)})),a}var Ho=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function zo(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.length-1;r>=n;r--)e=t[r].create(null,$.from(e));return e}function Vo(e,t,n,r,o){if(o<e.length&&o<t.length&&e[o]==t[o]){var i=Vo(e,t,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==e.length-1?n.type:e[o+1]))return r.copy(r.content.append($.from(zo(n,e,o+1))))}}function $o(e,t){if(0==t)return e;var n=e.content.replaceChild(e.childCount-1,$o(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore($.empty,!0);return e.copy(n.append(r))}function Uo(e,t,n,r,o,i){var a=t<0?e.firstChild:e.lastChild,s=a.content;return e.childCount>1&&(i=0),o<r-1&&(s=Uo(s,t,n,r,o+1,i)),o>=n&&(s=t<0?a.contentMatchAt(0).fillBefore(s,i<=o).append(s):s.append(a.contentMatchAt(a.childCount).fillBefore($.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(s))}function Go(e,t,n){return t<e.openStart&&(e=new J(Uo(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new J(Uo(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}var Wo={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},qo=null;function Ko(){return qo||(qo=document.implementation.createHTMLDocument("title"))}var Jo=null,Zo={},Xo={},Yo={touchstart:!0,touchmove:!0},Qo=Wn((function e(){Un(this,e),this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}));function ei(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function ti(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=function(t){return ni(e,t)})}))}function ni(e,t){return e.someProp("handleDOMEvents",(function(n){var r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function ri(e){return{left:e.clientX,top:e.clientY}}function oi(e,t,n,r,o){if(-1==r)return!1;for(var i,a=e.state.doc.resolve(r),s=function(r){if(e.someProp(t,(function(t){return r>a.depth?t(e,n,a.nodeAfter,a.before(r),o,!0):t(e,n,a.node(r),a.before(r),o,!1)})))return{v:!0}},u=a.depth+1;u>0;u--)if(i=s(u))return i.v;return!1}function ii(e,t,n){if(e.focused||e.focus(),!e.state.selection.eq(t)){var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}}function ai(e,t,n,r){return oi(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(function(n){return n(e,t,r)}))}function si(e,t,n,r){return oi(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(function(n){return n(e,t,r)}))||function(e,t,n){if(0!=n.button)return!1;var r=e.state.doc;if(-1==t)return!!r.inlineContent&&(ii(e,pn.create(r,0,r.content.size),"pointer"),!0);for(var o=r.resolve(t),i=o.depth+1;i>0;i--){var a=i>o.depth?o.nodeAfter:o.node(i),s=o.before(i);if(a.inlineContent)ii(e,pn.create(r,s+1,s+1+a.content.size),"pointer");else{if(!mn.isSelectable(a))continue;ii(e,mn.create(r,s),"pointer")}return!0}}(e,n,r)}function ui(e){return mi(e)}Xo.keydown=function(e,t){var n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!di(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!wr||!mr||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!yr||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",(function(t){return t(e,n)}))||function(e,t){var n=t.keyCode,r=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);if(8==n||br&&72==n&&"c"==r)return _o(e,-1)||Bo(e,-1);if(46==n&&!t.shiftKey||br&&68==n&&"c"==r)return _o(e,1)||Bo(e,1);if(13==n||27==n)return!0;if(37==n||br&&66==n&&"c"==r){var o=37==n?"ltr"==No(e,e.state.selection.from)?-1:1:-1;return Fo(e,o,r)||Bo(e,o)}if(39==n||br&&70==n&&"c"==r){var i=39==n?"ltr"==No(e,e.state.selection.from)?1:-1:1;return Fo(e,i,r)||Bo(e,i)}return 38==n||br&&80==n&&"c"==r?jo(e,-1,r)||Bo(e,-1):40==n||br&&78==n&&"c"==r?function(e){if(!gr||e.state.selection.$head.parentOffset>0)return!1;var t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;Ro(e,o,"true"),setTimeout((function(){return Ro(e,o,"false")}),20)}return!1}(e)||jo(e,1,r)||Bo(e,1):r==(br?"m":"c")&&(66==n||73==n||89==n||90==n)}(e,n)?n.preventDefault():ei(e,"key");else{var r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout((function(){e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",(function(t){return t(e,or(13,"Enter"))})),e.input.lastIOSEnter=0)}),200)}},Xo.keyup=function(e,t){16==t.keyCode&&(e.input.shiftKey=!1)},Xo.keypress=function(e,t){var n=t;if(!(di(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||br&&n.metaKey))if(e.someProp("handleKeyPress",(function(t){return t(e,n)})))n.preventDefault();else{var r=e.state.selection;if(!(r instanceof pn&&r.$from.sameParent(r.$to))){var o=String.fromCharCode(n.charCode),i=function(){return e.state.tr.insertText(o).scrollIntoView()};/[\r\n]/.test(o)||e.someProp("handleTextInput",(function(t){return t(e,r.$from.pos,r.$to.pos,o,i)}))||e.dispatch(i()),n.preventDefault()}}};var li=br?"metaKey":"ctrlKey";Zo.mousedown=function(e,t){var n=t;e.input.shiftKey=n.shiftKey;var r=ui(e),o=Date.now(),i="singleClick";o-e.input.lastClick.time<500&&function(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(n,e.input.lastClick)&&!n[li]&&e.input.lastClick.button==n.button&&("singleClick"==e.input.lastClick.type?i="doubleClick":"doubleClick"==e.input.lastClick.type&&(i="tripleClick")),e.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i,button:n.button};var a=e.posAtCoords(ri(n));a&&("singleClick"==i?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new ci(e,a,n,!!r)):("doubleClick"==i?ai:si)(e,a.pos,a.inside,n)?n.preventDefault():ei(e,"pointer"))};var ci=function(){return Wn((function e(t,n,r,o){var i,a,s=this;if(Un(this,e),this.view=t,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[li],this.allowDefault=r.shiftKey,n.inside>-1)i=t.state.doc.nodeAt(n.inside),a=n.inside;else{var u=t.state.doc.resolve(n.pos);i=u.parent,a=u.depth?u.before():0}var l=o?null:r.target,c=l?t.docView.nearestDesc(l,!0):null;this.target=c&&1==c.dom.nodeType?c.dom:null;var d=t.state.selection;(0==r.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||d instanceof mn&&d.from<=a&&d.to>a)&&(this.mightDrag={node:i,pos:a,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!pr||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){s.view.input.mouseDown==s&&s.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),ei(t,"pointer")}),[{key:"done",value:function(){var e=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((function(){return vo(e.view)})),this.view.input.mouseDown=null}},{key:"up",value:function(e){if(this.done(),this.view.dom.contains(e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(ri(e))),this.updateAllowDefault(e),this.allowDefault||!t?ei(this.view,"pointer"):function(e,t,n,r,o){return oi(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(function(n){return n(e,t,r)}))||(o?function(e,t){if(-1==t)return!1;var n,r,o=e.state.selection;o instanceof mn&&(n=o.node);for(var i=e.state.doc.resolve(t),a=i.depth+1;a>0;a--){var s=a>i.depth?i.nodeAfter:i.node(a);if(mn.isSelectable(s)){r=n&&o.$from.depth>0&&a>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(a);break}}return null!=r&&(ii(e,mn.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&mn.isSelectable(r))&&(ii(e,new mn(n),"pointer"),!0)}(e,n))}(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||gr&&this.mightDrag&&!this.mightDrag.node.isAtom||mr&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(ii(this.view,ln.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):ei(this.view,"pointer")}}},{key:"move",value:function(e){this.updateAllowDefault(e),ei(this.view,"pointer"),0==e.buttons&&this.done()}},{key:"updateAllowDefault",value:function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}])}();function di(e,t){return!!e.composing||!!(gr&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}Zo.touchstart=function(e){e.input.lastTouch=Date.now(),ui(e),ei(e,"pointer")},Zo.touchmove=function(e){e.input.lastTouch=Date.now(),ei(e,"pointer")},Zo.contextmenu=function(e){return ui(e)};var fi=wr?5e3:-1;function pi(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout((function(){return mi(e)}),t))}function hi(e){var t;for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=((t=document.createEvent("Event")).initEvent("event",!0,!0),t.timeStamp));e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function mi(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(wr&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),hi(e),t||e.docView&&e.docView.dirty){var n=ho(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):!e.markCursor&&!t||r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.updateState(e.state):e.dispatch(e.state.tr.deleteSelection()),!0}return!1}}Xo.compositionstart=Xo.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$to;if(t.selection instanceof pn&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),mi(e,!0),e.markCursor=null;else if(mi(e,!t.selection.empty),pr&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.domSelectionRange(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var a=i<0?o.lastChild:o.childNodes[i-1];if(!a)break;if(3==a.nodeType){var s=e.domSelection();s&&s.collapse(a,a.nodeValue.length);break}o=a,i=-1}e.input.composing=!0}pi(e,fi)},Xo.compositionend=function(e,t){e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then((function(){return e.domObserver.flush()})),e.input.compositionID++,pi(e,20))};var vi=dr&&fr<15||yr&&kr<604;function gi(e,t,n,r,o){var i=Io(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",(function(t){return t(e,o,i||J.empty)})))return!0;if(!i)return!1;var a=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(i),s=a?e.state.tr.replaceSelectionWith(a,r):e.state.tr.replaceSelection(i);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function yi(e){var t=e.getData("text/plain")||e.getData("Text");if(t)return t;var n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Zo.copy=Xo.cut=function(e,t){var n=t,r=e.state.selection,o="cut"==n.type;if(!r.empty){var i=vi?null:n.clipboardData,a=Lo(e,r.content()),s=a.dom,u=a.text;i?(n.preventDefault(),i.clearData(),i.setData("text/html",s.innerHTML),i.setData("text/plain",u)):function(e,t){if(e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}}(e,s),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Xo.paste=function(e,t){var n=t;if(!e.composing||wr){var r=vi?null:n.clipboardData,o=e.input.shiftKey&&45!=e.input.lastKeyCode;r&&gi(e,yi(r),r.getData("text/html"),o,n)?n.preventDefault():function(e,t){if(e.dom.parentNode){var n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();var o=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout((function(){e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?gi(e,r.value,null,o,t):gi(e,r.textContent,r.innerHTML,o,t)}),50)}}(e,n)}};var bi=Wn((function e(t,n,r){Un(this,e),this.slice=t,this.move=n,this.node=r})),Di=br?"altKey":"ctrlKey";function wi(e,t){var n=e.someProp("dragCopies",(function(e){return!e(t)}));return null!=n?n:!t[Di]}for(var Ci in Zo.dragstart=function(e,t){var n=t,r=e.input.mouseDown;if(r&&r.done(),n.dataTransfer){var o,i=e.state.selection,a=i.empty?null:e.posAtCoords(ri(n));if(a&&a.pos>=i.from&&a.pos<=(i instanceof mn?i.to-1:i.to));else if(r&&r.mightDrag)o=mn.create(e.state.doc,r.mightDrag.pos);else if(n.target&&1==n.target.nodeType){var s=e.docView.nearestDesc(n.target,!0);s&&s.node.type.spec.draggable&&s!=e.docView&&(o=mn.create(e.state.doc,s.posBefore))}var u=Lo(e,(o||e.state.selection).content()),l=u.dom,c=u.text,d=u.slice;(!n.dataTransfer.files.length||!mr||vr>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(vi?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",vi||n.dataTransfer.setData("text/plain",c),e.dragging=new bi(d,wi(e,n),o)}},Zo.dragend=function(e){var t=e.dragging;window.setTimeout((function(){e.dragging==t&&(e.dragging=null)}),50)},Xo.dragover=Xo.dragenter=function(e,t){return t.preventDefault()},Xo.drop=function(e,t){var n=t,r=e.dragging;if(e.dragging=null,n.dataTransfer){var o=e.posAtCoords(ri(n));if(o){var i=e.state.doc.resolve(o.pos),a=r&&r.slice;a?e.someProp("transformPasted",(function(t){a=t(a,e)})):a=Io(e,yi(n.dataTransfer),vi?null:n.dataTransfer.getData("text/html"),!1,i);var s=!(!r||!wi(e,n));if(e.someProp("handleDrop",(function(t){return t(e,n,a||J.empty,s)})))n.preventDefault();else if(a){n.preventDefault();var u=a?Nt(e.state.doc,i.pos,a):i.pos;null==u&&(u=i.pos);var l=e.state.tr;if(s){var c=r.node;c?c.replace(l):l.deleteSelection()}var d=l.mapping.map(u),f=0==a.openStart&&0==a.openEnd&&1==a.content.childCount,p=l.doc;if(f?l.replaceRangeWith(d,d,a.content.firstChild):l.replaceRange(d,d,a),!l.doc.eq(p)){var h=l.doc.resolve(d);if(f&&mn.isSelectable(a.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(a.content.firstChild))l.setSelection(new mn(h));else{var m=l.mapping.map(u);l.mapping.maps[l.mapping.maps.length-1].forEach((function(e,t,n,r){return m=r})),l.setSelection(ko(e,h,l.doc.resolve(m)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}}}}},Zo.focus=function(e){e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&vo(e)}),20))},Zo.blur=function(e,t){var n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},Zo.beforeinput=function(e,t){if(mr&&wr&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();var n=e.input.domChangeCount;setTimeout((function(){if(e.input.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,or(8,"Backspace"))})))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}}),50)}},Xo)Zo[Ci]=Xo[Ci];function ki(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var Ei=function(){function e(t,n){Un(this,e),this.toDOM=t,this.spec=n||Oi,this.side=this.spec.side||0}return Wn(e,[{key:"map",value:function(e,t,n,r){var o=e.mapResult(t.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new Ai(i-n,i-n,this)}},{key:"valid",value:function(){return!0}},{key:"eq",value:function(t){return this==t||t instanceof e&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&ki(this.spec,t.spec))}},{key:"destroy",value:function(e){this.spec.destroy&&this.spec.destroy(e)}}])}(),xi=function(){function e(t,n){Un(this,e),this.attrs=t,this.spec=n||Oi}return Wn(e,[{key:"map",value:function(e,t,n,r){var o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new Ai(o,i,this)}},{key:"valid",value:function(e,t){return t.from<t.to}},{key:"eq",value:function(t){return this==t||t instanceof e&&ki(this.attrs,t.attrs)&&ki(this.spec,t.spec)}},{key:"destroy",value:function(){}}],[{key:"is",value:function(t){return t.type instanceof e}}])}(),Si=function(){function e(t,n){Un(this,e),this.attrs=t,this.spec=n||Oi}return Wn(e,[{key:"map",value:function(e,t,n,r){var o=e.mapResult(t.from+r,1);if(o.deleted)return null;var i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new Ai(o.pos-n,i.pos-n,this)}},{key:"valid",value:function(e,t){var n,r=e.content.findIndex(t.from),o=r.index,i=r.offset;return i==t.from&&!(n=e.child(o)).isText&&i+n.nodeSize==t.to}},{key:"eq",value:function(t){return this==t||t instanceof e&&ki(this.attrs,t.attrs)&&ki(this.spec,t.spec)}},{key:"destroy",value:function(){}}])}(),Ai=function(){function e(t,n,r){Un(this,e),this.from=t,this.to=n,this.type=r}return Wn(e,[{key:"copy",value:function(t,n){return new e(t,n,this.type)}},{key:"eq",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}},{key:"map",value:function(e,t,n){return this.type.map(e,this,t,n)}},{key:"spec",get:function(){return this.type.spec}},{key:"inline",get:function(){return this.type instanceof xi}},{key:"widget",get:function(){return this.type instanceof Ei}}],[{key:"widget",value:function(t,n,r){return new e(t,t,new Ei(n,r))}},{key:"inline",value:function(t,n,r,o){return new e(t,n,new xi(r,o))}},{key:"node",value:function(t,n,r,o){return new e(t,n,new Si(r,o))}}])}(),Fi=[],Oi={},Mi=function(){function e(t,n){Un(this,e),this.local=t.length?t:Fi,this.children=n.length?n:Fi}return Wn(e,[{key:"find",value:function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}},{key:"findInner",value:function(e,t,n,r,o){for(var i=0;i<this.local.length;i++){var a=this.local[i];a.from<=t&&a.to>=e&&(!o||o(a.spec))&&n.push(a.copy(a.from+r,a.to+r))}for(var s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){var u=this.children[s]+1;this.children[s+2].findInner(e-u,t-u,n,r+u,o)}}},{key:"map",value:function(e,t,n){return this==Bi||0==e.maps.length?this:this.mapInner(e,t,0,0,n||Oi)}},{key:"mapInner",value:function(t,n,r,o,i){for(var a,s=0;s<this.local.length;s++){var u=this.local[s].map(t,r,o);u&&u.type.valid(n,u)?(a||(a=[])).push(u):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?Ti(this.children,a||[],t,n,r,o,i):a?new e(a.sort(Li),Fi):Bi}},{key:"add",value:function(t,n){return n.length?this==Bi?e.create(t,n):this.addInner(t,n,0):this}},{key:"addInner",value:function(t,n,r){var o,i=this,a=0;t.forEach((function(e,t){var s,u=t+r;if(s=ji(n,e,u)){for(o||(o=i.children.slice());a<o.length&&o[a]<t;)a+=3;o[a]==t?o[a+2]=o[a+2].addInner(e,s,u+1):o.splice(a,0,t,t+e.nodeSize,Ri(s,e,u+1,Oi)),a+=3}}));for(var s=Ni(a?_i(n):n,-r),u=0;u<s.length;u++)s[u].type.valid(t,s[u])||s.splice(u--,1);return new e(s.length?this.local.concat(s).sort(Li):this.local,o||this.children)}},{key:"remove",value:function(e){return 0==e.length||this==Bi?this:this.removeInner(e,0)}},{key:"removeInner",value:function(t,n){for(var r=this.children,o=this.local,i=0;i<r.length;i+=3){for(var a,s=void 0,u=r[i]+n,l=r[i+1]+n,c=0;c<t.length;c++)(a=t[c])&&a.from>u&&a.to<l&&(t[c]=null,(s||(s=[])).push(a));if(s){r==this.children&&(r=this.children.slice());var d=r[i+2].removeInner(s,u+1);d!=Bi?r[i+2]=d:(r.splice(i,3),i-=3)}}if(o.length)for(var f,p=0;p<t.length;p++)if(f=t[p])for(var h=0;h<o.length;h++)o[h].eq(f,n)&&(o==this.local&&(o=this.local.slice()),o.splice(h--,1));return r==this.children&&o==this.local?this:o.length||r.length?new e(o,r):Bi}},{key:"forChild",value:function(t,n){if(this==Bi)return this;if(n.isLeaf)return e.empty;for(var r,o,i=0;i<this.children.length;i+=3)if(this.children[i]>=t){this.children[i]==t&&(r=this.children[i+2]);break}for(var a=t+1,s=a+n.content.size,u=0;u<this.local.length;u++){var l=this.local[u];if(l.from<s&&l.to>a&&l.type instanceof xi){var c=Math.max(a,l.from)-a,d=Math.min(s,l.to)-a;c<d&&(o||(o=[])).push(l.copy(c,d))}}if(o){var f=new e(o.sort(Li),Fi);return r?new Pi([f,r]):f}return r||Bi}},{key:"eq",value:function(t){if(this==t)return!0;if(!(t instanceof e)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(var r=0;r<this.children.length;r+=3)if(this.children[r]!=t.children[r]||this.children[r+1]!=t.children[r+1]||!this.children[r+2].eq(t.children[r+2]))return!1;return!0}},{key:"locals",value:function(e){return Ii(this.localsInner(e))}},{key:"localsInner",value:function(e){if(this==Bi)return Fi;if(e.inlineContent||!this.local.some(xi.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof xi||t.push(this.local[n]);return t}},{key:"forEachSet",value:function(e){e(this)}}],[{key:"create",value:function(e,t){return t.length?Ri(t,e,0,Oi):Bi}}])}();Mi.empty=new Mi([],[]),Mi.removeOverlap=Ii;var Bi=Mi.empty,Pi=function(){function e(t){Un(this,e),this.members=t}return Wn(e,[{key:"map",value:function(t,n){var r=this.members.map((function(e){return e.map(t,n,Oi)}));return e.from(r)}},{key:"forChild",value:function(t,n){if(n.isLeaf)return Mi.empty;for(var r=[],o=0;o<this.members.length;o++){var i=this.members[o].forChild(t,n);i!=Bi&&(i instanceof e?r=r.concat(i.members):r.push(i))}return e.from(r)}},{key:"eq",value:function(t){if(!(t instanceof e)||t.members.length!=this.members.length)return!1;for(var n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}},{key:"locals",value:function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(var i=0;i<o.length;i++)t.push(o[i])}else t=o}return t?Ii(n?t:t.sort(Li)):Fi}},{key:"forEachSet",value:function(e){for(var t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}],[{key:"from",value:function(t){switch(t.length){case 0:return Bi;case 1:return t[0];default:return new e(t.every((function(e){return e instanceof Mi}))?t:t.reduce((function(e,t){return e.concat(t instanceof Mi?t:t.members)}),[]))}}}])}();function Ti(e,t,n,r,o,i,a){for(var s=e.slice(),u=function(e){var t=0;n.maps[l].forEach((function(n,r,o,i){for(var a=i-o-(r-n),u=0;u<s.length;u+=3){var l=s[u+1];if(!(l<0||n>l+e-t)){var c=s[u]+e-t;r>=c?s[u+1]=n<=c?-2:-1:n>=e&&a&&(s[u]+=a,s[u+1]+=a)}}t+=a})),e=n.maps[l].map(e,-1),c=e},l=0,c=i;l<n.maps.length;l++)u(c);for(var d=!1,f=0;f<s.length;f+=3)if(s[f+1]<0){if(-2==s[f+1]){d=!0,s[f+1]=-1;continue}var p=n.map(e[f]+i),h=p-o;if(h<0||h>=r.content.size){d=!0;continue}var m=n.map(e[f+1]+i,-1)-o,v=r.content.findIndex(h),g=v.index,y=v.offset,b=r.maybeChild(g);if(b&&y==h&&y+b.nodeSize==m){var D=s[f+2].mapInner(n,b,p+1,e[f]+i+1,a);D!=Bi?(s[f]=h,s[f+1]=m,s[f+2]=D):(s[f+1]=-2,d=!0)}else d=!0}if(d){var w=function(e,t,n,r,o,i,a){function s(e,t){for(var i=0;i<e.local.length;i++){var u=e.local[i].map(r,o,t);u?n.push(u):a.onRemove&&a.onRemove(e.local[i].spec)}for(var l=0;l<e.children.length;l+=3)s(e.children[l+2],e.children[l]+t+1)}for(var u=0;u<e.length;u+=3)-1==e[u+1]&&s(e[u+2],t[u]+i+1);return n}(s,e,t,n,o,i,a),C=Ri(w,r,0,a);t=C.local;for(var k=0;k<s.length;k+=3)s[k+1]<0&&(s.splice(k,3),k-=3);for(var E=0,x=0;E<C.children.length;E+=3){for(var S=C.children[E];x<s.length&&s[x]<S;)x+=3;s.splice(x,0,C.children[E],C.children[E+1],C.children[E+2])}}return new Mi(t.sort(Li),s)}function Ni(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(new Ai(o.from+t,o.to+t,o.type))}return n}function ji(e,t,n){if(t.isLeaf)return null;for(var r,o=n+t.nodeSize,i=null,a=0;a<e.length;a++)(r=e[a])&&r.from>n&&r.to<o&&((i||(i=[])).push(r),e[a]=null);return i}function _i(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Ri(e,t,n,r){var o=[],i=!1;t.forEach((function(t,a){var s=ji(e,t,a+n);if(s){i=!0;var u=Ri(s,t,n+a+1,r);u!=Bi&&o.push(a,a+t.nodeSize,u)}}));for(var a=Ni(i?_i(e):e,-n).sort(Li),s=0;s<a.length;s++)a[s].type.valid(t,a[s])||(r.onRemove&&r.onRemove(a[s].spec),a.splice(s--,1));return a.length||o.length?new Mi(a,o):Bi}function Li(e,t){return e.from-t.from||e.to-t.to}function Ii(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var o=n+1;o<t.length;o++){var i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),Hi(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),Hi(t,o+1,i.copy(r.to,i.to)))}}return t}function Hi(e,t,n){for(;t<e.length&&Li(n,e[t])>0;)t++;e.splice(t,0,n)}function zi(e){var t=[];return e.someProp("decorations",(function(n){var r=n(e.state);r&&r!=Bi&&t.push(r)})),e.cursorWrapper&&t.push(Mi.create(e.state.doc,[e.cursorWrapper.deco])),Pi.from(t)}var Vi={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},$i=dr&&fr<=11,Ui=function(){return Wn((function e(){Un(this,e),this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}),[{key:"set",value:function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}},{key:"clear",value:function(){this.anchorNode=this.focusNode=null}},{key:"eq",value:function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}])}(),Gi=function(){return Wn((function e(t,n){var r=this;Un(this,e),this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Ui,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)r.queue.push(e[t]);dr&&fr<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?r.flushSoon():r.flush()})),$i&&(this.onCharData=function(e){r.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),r.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}),[{key:"flushSoon",value:function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){e.flushingSoon=-1,e.flush()}),20))}},{key:"forceFlush",value:function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}},{key:"start",value:function(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Vi)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}},{key:"stop",value:function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}},{key:"connectSelection",value:function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}},{key:"disconnectSelection",value:function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}},{key:"suppressSelectionUpdates",value:function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)}},{key:"onSelectionChange",value:function(){if(Eo(this.view)){if(this.suppressingSelectionUpdates)return vo(this.view);if(dr&&fr<=11&&!this.view.state.selection.empty){var e=this.view.domSelectionRange();if(e.focusNode&&Yn(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}},{key:"setCurSelection",value:function(){this.currentSelection.set(this.view.domSelectionRange())}},{key:"ignoreSelectionChange",value:function(e){if(!e.focusNode)return!0;for(var t,n=new Set,r=e.focusNode;r;r=Jn(r))n.add(r);for(var o=e.anchorNode;o;o=Jn(o))if(n.has(o)){t=o;break}var i=t&&this.view.docView.nearestDesc(t);return i&&i.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}},{key:"pendingRecords",value:function(){if(this.observer){var e,t=Tn(this.observer.takeRecords());try{for(t.s();!(e=t.n()).done;){var n=e.value;this.queue.push(n)}}catch(e){t.e(e)}finally{t.f()}}return this.queue}},{key:"flush",value:function(){var e=this.view;if(e.docView&&!(this.flushingSoon>-1)){var t=this.pendingRecords();t.length&&(this.queue=[]);var n=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&Eo(e)&&!this.ignoreSelectionChange(n),o=-1,i=-1,a=!1,s=[];if(e.editable)for(var u=0;u<t.length;u++){var l=this.registerMutation(t[u],s);l&&(o=o<0?l.from:Math.min(l.from,o),i=i<0?l.to:Math.max(l.to,i),l.typeOver&&(a=!0))}if(pr&&s.length){var c=s.filter((function(e){return"BR"==e.nodeName}));if(2==c.length){var d=Pn(c,2),f=d[0],p=d[1];f.parentNode&&f.parentNode.parentNode==p.parentNode?p.remove():f.remove()}else{var h,m=this.currentSelection.focusNode,v=Tn(c);try{for(v.s();!(h=v.n()).done;){var g=h.value,y=g.parentNode;!y||"LI"!=y.nodeName||m&&Ji(e,m)==y||g.remove()}}catch(e){v.e(e)}finally{v.f()}}}var b=null;o<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&rr(n)&&(b=ho(e))&&b.eq(ln.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,vo(e),this.currentSelection.set(n),e.scrollToSelection()):(o>-1||r)&&(o>-1&&(e.docView.markDirty(o,i),function(e){if(!Wi.has(e)&&(Wi.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace))){if(e.requiresGeckoHackNode=pr,qi)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),qi=!0}}(e)),this.handleDOMChange(o,i,a,s),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||vo(e),this.currentSelection.set(n))}}},{key:"registerMutation",value:function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(var r=0;r<e.addedNodes.length;r++){var o=e.addedNodes[r];t.push(o),3==o.nodeType&&(this.lastChangedTextNode=o)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};var i=e.previousSibling,a=e.nextSibling;if(dr&&fr<=11&&e.addedNodes.length)for(var s=0;s<e.addedNodes.length;s++){var u=e.addedNodes[s],l=u.previousSibling,c=u.nextSibling;(!l||Array.prototype.indexOf.call(e.addedNodes,l)<0)&&(i=l),(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(a=c)}var d=i&&i.parentNode==e.target?Kn(i)+1:0,f=n.localPosFromDOM(e.target,d,-1),p=a&&a.parentNode==e.target?Kn(a):e.target.childNodes.length;return{from:f,to:n.localPosFromDOM(e.target,p,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}])}(),Wi=new WeakMap,qi=!1;function Ki(e,t){var n=t.startContainer,r=t.startOffset,o=t.endContainer,i=t.endOffset,a=e.domAtPos(e.state.selection.anchor);if(Yn(a.node,a.offset,o,i)){var s=[o,i,n,r];n=s[0],r=s[1],o=s[2],i=s[3]}return{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:i}}function Ji(e,t){for(var n=t.parentNode;n&&n!=e.dom;n=n.parentNode){var r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function Zi(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(gr&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||gr&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}var Xi=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Yi(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:ko(e,t.resolve(n.anchor),t.resolve(n.head))}function Qi(e,t,n){for(var r=e.depth,o=t?e.end():e.pos;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n)for(var i=e.node(r).maybeChild(e.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function ea(e){if(2!=e.length)return!1;var t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}var ta=function(){return Wn((function e(t,n){var r=this;Un(this,e),this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Qo,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(aa),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):"function"==typeof t?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=oa(this),ra(this),this.nodeViews=ia(this),this.docView=Xr(this.state.doc,na(this),zi(this),this.dom,this),this.domObserver=new Gi(this,(function(e,t,n,o){return function(e,t,n,r,o){var i=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){var a=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,s=ho(e,a);if(s&&!e.state.selection.eq(s)){if(mr&&wr&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",(function(t){return t(e,or(13,"Enter"))})))return;var u=e.state.tr.setSelection(s);"pointer"==a?u.setMeta("pointer",!0):"key"==a&&u.scrollIntoView(),i&&u.setMeta("composition",i),e.dispatch(u)}}else{var l=e.state.doc.resolve(t),c=l.sharedDepth(n);t=l.before(c+1),n=e.state.doc.resolve(n).after(c+1);var d,f,p=e.state.selection,h=function(e,t,n){var r,o=e.docView.parseRange(t,n),i=o.node,a=o.fromOffset,s=o.toOffset,u=o.from,l=o.to,c=e.domSelectionRange(),d=c.anchorNode;if(d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(r=[{node:d,offset:c.anchorOffset}],rr(c)||r.push({node:c.focusNode,offset:c.focusOffset})),mr&&8===e.input.lastKeyCode)for(var f=s;f>a;f--){var p=i.childNodes[f-1],h=p.pmViewDesc;if("BR"==p.nodeName&&!h){s=f;break}if(!h||h.size)break}var m=e.state.doc,v=e.someProp("domParser")||je.fromSchema(e.state.schema),g=m.resolve(u),y=null,b=v.parse(i,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:a,to:s,preserveWhitespace:"pre"!=g.parent.type.whitespace||"full",findPositions:r,ruleFromNode:Zi,context:g});if(r&&null!=r[0].pos){var D=r[0].pos,w=r[1]&&r[1].pos;null==w&&(w=D),y={anchor:D+u,head:w+u}}return{doc:b,sel:y,from:u,to:l}}(e,t,n),m=e.state.doc,v=m.slice(h.from,h.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(d=e.state.selection.to,f="end"):(d=e.state.selection.from,f="start"),e.input.lastKeyCode=null;var g=function(e,t,n,r,o){var i=e.findDiffStart(t,n);if(null==i)return null;var a=e.findDiffEnd(t,n+e.size,n+t.size),s=a.a,u=a.b;if("end"==o&&(r-=s+Math.max(0,i-Math.min(s,u))-i),s<i&&e.size<t.size){var l=r<=i&&r>=s?i-r:0;(i-=l)&&i<t.size&&ea(t.textBetween(i-1,i+1))&&(i+=l?1:-1),u=i+(u-s),s=i}else if(u<i){var c=r<=i&&r>=u?i-r:0;(i-=c)&&i<e.size&&ea(e.textBetween(i-1,i+1))&&(i+=c?1:-1),s=i+(s-u),u=i}return{start:i,endA:s,endB:u}}(v.content,h.doc.content,h.from,d,f);if(g&&e.input.domChangeCount++,(yr&&e.input.lastIOSEnter>Date.now()-225||wr)&&o.some((function(e){return 1==e.nodeType&&!Xi.test(e.nodeName)}))&&(!g||g.endA>=g.endB)&&e.someProp("handleKeyDown",(function(t){return t(e,or(13,"Enter"))})))e.input.lastIOSEnter=0;else{if(!g){if(!(r&&p instanceof pn&&!p.empty&&p.$head.sameParent(p.$anchor))||e.composing||h.sel&&h.sel.anchor!=h.sel.head){if(h.sel){var y=Yi(e,e.state.doc,h.sel);if(y&&!y.eq(e.state.selection)){var b=e.state.tr.setSelection(y);i&&b.setMeta("composition",i),e.dispatch(b)}}return}g={start:p.from,endA:p.to,endB:p.to}}e.state.selection.from<e.state.selection.to&&g.start==g.endB&&e.state.selection instanceof pn&&(g.start>e.state.selection.from&&g.start<=e.state.selection.from+2&&e.state.selection.from>=h.from?g.start=e.state.selection.from:g.endA<e.state.selection.to&&g.endA>=e.state.selection.to-2&&e.state.selection.to<=h.to&&(g.endB+=e.state.selection.to-g.endA,g.endA=e.state.selection.to)),dr&&fr<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>h.from&&"  "==h.doc.textBetween(g.start-h.from-1,g.start-h.from+1)&&(g.start--,g.endA--,g.endB--);var D,w=h.doc.resolveNoCache(g.start-h.from),C=h.doc.resolveNoCache(g.endB-h.from),k=m.resolve(g.start),E=w.sameParent(C)&&w.parent.inlineContent&&k.end()>=g.endA;if((yr&&e.input.lastIOSEnter>Date.now()-225&&(!E||o.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName})))||!E&&w.pos<h.doc.content.size&&(!w.sameParent(C)||!w.parent.inlineContent)&&!/\S/.test(h.doc.textBetween(w.pos,C.pos,"",""))&&(D=ln.findFrom(h.doc.resolve(w.pos+1),1,!0))&&D.head>w.pos)&&e.someProp("handleKeyDown",(function(t){return t(e,or(13,"Enter"))})))e.input.lastIOSEnter=0;else if(e.state.selection.anchor>g.start&&function(e,t,n,r,o){if(n-t<=o.pos-r.pos||Qi(r,!0,!1)<o.pos)return!1;var i=e.resolve(t);if(!r.parent.isTextblock){var a=i.nodeAfter;return null!=a&&n==t+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=e.resolve(Qi(i,!0,!0));return!(!s.parent.isTextblock||s.pos>n||Qi(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(m,g.start,g.endA,w,C)&&e.someProp("handleKeyDown",(function(t){return t(e,or(8,"Backspace"))})))wr&&mr&&e.domObserver.suppressSelectionUpdates();else{mr&&g.endB==g.start&&(e.input.lastChromeDelete=Date.now()),wr&&!E&&w.start()!=C.start()&&0==C.parentOffset&&w.depth==C.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==g.endA&&(g.endB-=2,C=h.doc.resolveNoCache(g.endB-h.from),setTimeout((function(){e.someProp("handleKeyDown",(function(t){return t(e,or(13,"Enter"))}))}),20));var x,S=g.start,A=g.endA,F=function(t){var n=t||e.state.tr.replace(S,A,h.doc.slice(g.start-h.from,g.endB-h.from));if(h.sel){var r=Yi(e,n.doc,h.sel);r&&!(mr&&e.composing&&r.empty&&(g.start!=g.endB||e.input.lastChromeDelete<Date.now()-100)&&(r.head==S||r.head==n.mapping.map(A)-1)||dr&&r.empty&&r.head==S)&&n.setSelection(r)}return i&&n.setMeta("composition",i),n.scrollIntoView()};if(E){if(w.pos==C.pos){dr&&fr<=11&&0==w.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return vo(e)}),20));var O=F(e.state.tr.delete(S,A)),M=m.resolve(g.start).marksAcross(m.resolve(g.endA));M&&O.ensureMarks(M),e.dispatch(O)}else if(g.endA==g.endB&&(x=function(e,t){for(var n,r,o,i=e.firstChild.marks,a=t.firstChild.marks,s=i,u=a,l=0;l<a.length;l++)s=a[l].removeFromSet(s);for(var c=0;c<i.length;c++)u=i[c].removeFromSet(u);if(1==s.length&&0==u.length)r=s[0],n="add",o=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=s.length||1!=u.length)return null;r=u[0],n="remove",o=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var d=[],f=0;f<t.childCount;f++)d.push(o(t.child(f)));if($.from(d).eq(e))return{mark:r,type:n}}(w.parent.content.cut(w.parentOffset,C.parentOffset),k.parent.content.cut(k.parentOffset,g.endA-k.start())))){var B=F(e.state.tr);"add"==x.type?B.addMark(S,A,x.mark):B.removeMark(S,A,x.mark),e.dispatch(B)}else if(w.parent.child(w.index()).isText&&w.index()==C.index()-(C.textOffset?0:1)){var P=w.parent.textBetween(w.parentOffset,C.parentOffset),T=function(){return F(e.state.tr.insertText(P,S,A))};e.someProp("handleTextInput",(function(t){return t(e,S,A,P,T)}))||e.dispatch(T())}}else e.dispatch(F())}}}}(r,e,t,n,o)})),this.domObserver.start(),function(e){var t=function(){var t=Zo[n];e.dom.addEventListener(n,e.input.eventHandlers[n]=function(n){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,n)||ni(e,n)||!e.editable&&n.type in Xo||t(e,n)},Yo[n]?{passive:!0}:void 0)};for(var n in Zo)t();gr&&e.dom.addEventListener("input",(function(){return null})),ti(e)}(this),this.updatePluginViews()}),[{key:"composing",get:function(){return this.input.composing}},{key:"props",get:function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props}},{key:"update",value:function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ti(this);var t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(aa),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}},{key:"setProps",value:function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)}},{key:"updateState",value:function(e){this.updateStateInner(e,this._props)}},{key:"updateStateInner",value:function(e,t){var n,r=this.state,o=!1,i=!1;e.storedMarks&&this.composing&&(hi(this),i=!0),this.state=e;var a=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){var s=ia(this);(function(e,t){var n=0,r=0;for(var o in e){if(e[o]!=t[o])return!0;n++}for(var i in t)r++;return n!=r})(s,this.nodeViews)&&(this.nodeViews=s,o=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&ti(this),this.editable=oa(this),ra(this);var u=zi(this),l=na(this),c=r.plugins==e.plugins||r.doc.eq(e.doc)?e.scrollToSelection>r.scrollToSelection?"to selection":"preserve":"reset",d=o||!this.docView.matchesNode(e.doc,l,u);!d&&e.selection.eq(r.selection)||(i=!0);var f,p,h,m,v,g,y,b,D,w,C="preserve"==c&&i&&null==this.dom.style.overflowAnchor&&function(e){for(var t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,a=o+1;a<Math.min(innerHeight,r.bottom);a+=5){var s=e.root.elementFromPoint(i,a);if(s&&s!=e.dom&&e.dom.contains(s)){var u=s.getBoundingClientRect();if(u.top>=o-20){t=s,n=u.top;break}}}return{refDOM:t,refTop:n,stack:Fr(e.dom)}}(this);if(i){this.domObserver.stop();var k=d&&(dr||mr)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&(m=r.selection,v=e.selection,g=Math.min(m.$anchor.sharedDepth(m.head),v.$anchor.sharedDepth(v.head)),m.$anchor.start(g)!=v.$anchor.start(g));if(d){var E=mr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=function(e){var t=e.domSelectionRange();if(!t.focusNode)return null;var n=function(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=tr(e=e.childNodes[t-1])}else{if(!e.parentNode||nr(e))return null;t=Kn(e),e=e.parentNode}}}(t.focusNode,t.focusOffset),r=function(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||nr(e))return null;t=Kn(e)+1,e=e.parentNode}}}(t.focusNode,t.focusOffset);if(n&&r&&n!=r){var o=r.pmViewDesc,i=e.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!o||!o.isText(r.nodeValue))return r;if(e.input.compositionNode==r){var a=n.pmViewDesc;if(a&&a.isText(n.nodeValue))return r}}return n||r}(this)),!o&&this.docView.update(e.doc,l,u,this)||(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=Xr(e.doc,l,u,this.dom,this)),E&&!this.trackWrites&&(k=!0)}k||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&(f=this,p=f.docView.domFromPos(f.state.selection.anchor,0),h=f.domSelectionRange(),Yn(p.node,p.offset,h.anchorNode,h.anchorOffset)))?vo(this,k):(wo(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),(null===(n=this.dragging)||void 0===n?void 0:n.node)&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),"reset"==c?this.dom.scrollTop=0:"to selection"==c?this.scrollToSelection():C&&(b=(y=C).refDOM,D=y.refTop,Or(y.stack,0==(w=b?b.getBoundingClientRect().top:0)?0:w-D))}},{key:"scrollToSelection",value:function(){var e=this,t=this.domSelectionRange().focusNode;if(t&&this.dom.contains(1==t.nodeType?t:t.parentNode))if(this.someProp("handleScrollToSelection",(function(t){return t(e)})));else if(this.state.selection instanceof mn){var n=this.docView.domAfterPos(this.state.selection.from);1==n.nodeType&&Ar(this,n.getBoundingClientRect(),t)}else Ar(this,this.coordsAtPos(this.state.selection.head,1),t)}},{key:"destroyPluginViews",value:function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()}},{key:"updatePluginViews",value:function(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var r=0;r<this.directPlugins.length;r++){var o=this.directPlugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}for(var i=0;i<this.state.plugins.length;i++){var a=this.state.plugins[i];a.spec.view&&this.pluginViews.push(a.spec.view(this))}}}},{key:"updateDraggedNode",value:function(e,t){var n=e.node,r=-1;if(this.state.doc.nodeAt(n.from)==n.node)r=n.from;else{var o=n.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==n.node&&(r=o)}this.dragging=new bi(e.slice,e.move,r<0?void 0:mn.create(this.state.doc,r))}},{key:"someProp",value:function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(var o=0;o<this.directPlugins.length;o++){var i=this.directPlugins[o].props[e];if(null!=i&&(n=t?t(i):i))return n}var a=this.state.plugins;if(a)for(var s=0;s<a.length;s++){var u=a[s].props[e];if(null!=u&&(n=t?t(u):u))return n}}},{key:"hasFocus",value:function(){if(dr){var e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}},{key:"focus",value:function(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(Mr)return e.focus(Mr);var t=Fr(e);e.focus(null==Mr?{get preventScroll(){return Mr={preventScroll:!0},!0}}:void 0),Mr||(Mr=!1,Or(t,0))}(this.dom),vo(this),this.domObserver.start()}},{key:"root",get:function(){var e=this,t=this._root;if(null==t)for(var n,r=function(t){if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return t.ownerDocument.getSelection()}),{v:e._root=t}},o=this.dom.parentNode;o;o=o.parentNode)if(n=r(o))return n.v;return t||document}},{key:"updateRoot",value:function(){this._root=null}},{key:"posAtCoords",value:function(e){return Nr(this,e)}},{key:"coordsAtPos",value:function(e){return Lr(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}},{key:"domAtPos",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.domFromPos(e,t)}},{key:"nodeDOM",value:function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null}},{key:"posAtDOM",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}},{key:"endOfTextblock",value:function(e,t){return function(e,t,n){return $r==t&&Ur==n?Gr:($r=t,Ur=n,Gr="up"==n||"down"==n?function(e,t,n){var r=t.selection,o="up"==n?r.$from:r.$to;return zr(e,t,(function(){for(var t=e.docView.domFromPos(o.pos,"up"==n?-1:1).node;;){var r=e.docView.nearestDesc(t,!0);if(!r)break;if(r.node.isBlock){t=r.contentDOM||r.dom;break}t=r.dom.parentNode}for(var i=Lr(e,o.pos,1),a=t.firstChild;a;a=a.nextSibling){var s=void 0;if(1==a.nodeType)s=a.getClientRects();else{if(3!=a.nodeType)continue;s=Xn(a,0,a.nodeValue.length).getClientRects()}for(var u=0;u<s.length;u++){var l=s[u];if(l.bottom>l.top+1&&("up"==n?i.top-l.top>2*(l.bottom-i.top):l.bottom-i.bottom>2*(i.bottom-l.top)))return!1}}return!0}))}(e,t,n):function(e,t,n){var r=t.selection.$head;if(!r.parent.isTextblock)return!1;var o=r.parentOffset,i=!o,a=o==r.parent.content.size,s=e.domSelection();return s?Vr.test(r.parent.textContent)&&s.modify?zr(e,t,(function(){var t=e.domSelectionRange(),o=t.focusNode,i=t.focusOffset,a=t.anchorNode,u=t.anchorOffset,l=s.caretBidiLevel;s.modify("move",n,"character");var c=r.depth?e.docView.domAfterPos(r.before()):e.dom,d=e.domSelectionRange(),f=d.focusNode,p=d.focusOffset,h=f&&!c.contains(1==f.nodeType?f:f.parentNode)||o==f&&i==p;try{s.collapse(a,u),o&&(o!=a||i!=u)&&s.extend&&s.extend(o,i)}catch(e){}return null!=l&&(s.caretBidiLevel=l),h})):"left"==n||"backward"==n?i:a:r.pos==r.start()||r.pos==r.end()}(e,t,n))}(this,t||this.state,e)}},{key:"pasteHTML",value:function(e,t){return gi(this,"",e,!1,t||new ClipboardEvent("paste"))}},{key:"pasteText",value:function(e,t){return gi(this,e,null,!0,t||new ClipboardEvent("paste"))}},{key:"serializeForClipboard",value:function(e){return Lo(this,e)}},{key:"destroy",value:function(){this.docView&&(function(e){for(var t in e.domObserver.stop(),e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],zi(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Zn=null)}},{key:"isDestroyed",get:function(){return null==this.docView}},{key:"dispatchEvent",value:function(e){return function(e,t){ni(e,t)||!Zo[t.type]||!e.editable&&t.type in Xo||Zo[t.type](e,t)}(this,e)}},{key:"domSelectionRange",value:function(){var e=this.domSelection();return e?gr&&11===this.root.nodeType&&function(e){for(var t=e.activeElement;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){if(t.getComposedRanges){var n=t.getComposedRanges(e.root)[0];if(n)return Ki(e,n)}var r;function o(e){e.preventDefault(),e.stopImmediatePropagation(),r=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",o,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",o,!0),r?Ki(e,r):null}(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}},{key:"domSelection",value:function(){return this.root.getSelection()}}])}();function na(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var r in n)"class"==r?t.class+=" "+n[r]:"style"==r?t.style=(t.style?t.style+";":"")+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))})),t.translate||(t.translate="no"),[Ai.node(0,e.state.doc.content.size,t)]}function ra(e){if(e.markCursor){var t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Ai.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function oa(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function ia(e){var t=Object.create(null);function n(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function aa(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}ta.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};for(var sa={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ua={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},la="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),ca="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),da=0;da<10;da++)sa[48+da]=sa[96+da]=String(da);for(da=1;da<=24;da++)sa[da+111]="F"+da;for(da=65;da<=90;da++)sa[da]=String.fromCharCode(da+32),ua[da]=String.fromCharCode(da);for(var fa in sa)ua.hasOwnProperty(fa)||(ua[fa]=sa[fa]);var pa="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),ha="undefined"!=typeof navigator&&/Win/.test(navigator.platform);function ma(e){var t,n,r,o,i=e.split(/-(?!$)/),a=i[i.length-1];"Space"==a&&(a=" ");for(var s=0;s<i.length-1;s++){var u=i[s];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))t=!0;else if(/^(c|ctrl|control)$/i.test(u))n=!0;else if(/^s(hift)?$/i.test(u))r=!0;else{if(!/^mod$/i.test(u))throw new Error("Unrecognized modifier name: "+u);pa?o=!0:n=!0}}return t&&(a="Alt-"+a),n&&(a="Ctrl-"+a),o&&(a="Meta-"+a),r&&(a="Shift-"+a),a}function va(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function ga(e){var t=function(e){var t=Object.create(null);for(var n in e)t[ma(n)]=e[n];return t}(e);return function(e,n){var r,o=function(e){var t=!(la&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||ca&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?ua:sa)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),i=t[va(o,n)];if(i&&i(e.state,e.dispatch,e))return!0;if(1==o.length&&" "!=o){if(n.shiftKey){var a=t[va(o,n,!1)];if(a&&a(e.state,e.dispatch,e))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(ha&&n.ctrlKey&&n.altKey)&&(r=sa[n.keyCode])&&r!=o){var s=t[va(r,n)];if(s&&s(e.state,e.dispatch,e))return!0}}return!1}}var ya=function(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)};function ba(e,t){var n=e.selection.$cursor;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}var Da=function(e,t,n){var r=ba(e,n);if(!r)return!1;var o=Ea(r);if(!o){var i=r.blockRange(),a=i&&xt(i);return null!=a&&(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)}var s=o.nodeBefore;if(Na(e,o,t,-1))return!0;if(0==r.parent.content.size&&(Ca(s,"end")||mn.isSelectable(s)))for(var u=r.depth;;u--){var l=jt(e.doc,r.before(u),r.after(u),J.empty);if(l&&l.slice.size<l.to-l.from){if(t){var c=e.tr.step(l);c.setSelection(Ca(s,"end")?ln.findFrom(c.doc.resolve(c.mapping.map(o.pos,-1)),-1):mn.create(c.doc,o.pos-s.nodeSize)),t(c.scrollIntoView())}return!0}if(1==u||r.node(u-1).childCount>1)break}return!(!s.isAtom||o.depth!=r.depth-1||(t&&t(e.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),0))};function wa(e,t,n){for(var r=t.nodeBefore,o=t.pos-1;!r.isTextblock;o--){if(r.type.spec.isolating)return!1;var i=r.lastChild;if(!i)return!1;r=i}for(var a=t.nodeAfter,s=t.pos+1;!a.isTextblock;s++){if(a.type.spec.isolating)return!1;var u=a.firstChild;if(!u)return!1;a=u}var l=jt(e.doc,o,s,J.empty);if(!l||l.from!=o||l instanceof Dt&&l.slice.size>=s-o)return!1;if(n){var c=e.tr.step(l);c.setSelection(pn.create(c.doc,o)),n(c.scrollIntoView())}return!0}function Ca(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}var ka=function(e,t,n){var r=e.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):o.parentOffset>0)return!1;i=Ea(o)}var a=i&&i.nodeBefore;return!(!a||!mn.isSelectable(a)||(t&&t(e.tr.setSelection(mn.create(e.doc,i.pos-a.nodeSize)).scrollIntoView()),0))};function Ea(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function xa(e,t){var n=e.selection.$cursor;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}var Sa=function(e,t,n){var r=xa(e,n);if(!r)return!1;var o=Fa(r);if(!o)return!1;var i=o.nodeAfter;if(Na(e,o,t,1))return!0;if(0==r.parent.content.size&&(Ca(i,"start")||mn.isSelectable(i))){var a=jt(e.doc,r.before(),r.after(),J.empty);if(a&&a.slice.size<a.to-a.from){if(t){var s=e.tr.step(a);s.setSelection(Ca(i,"start")?ln.findFrom(s.doc.resolve(s.mapping.map(o.pos)),1):mn.create(s.doc,s.mapping.map(o.pos))),t(s.scrollIntoView())}return!0}}return!(!i.isAtom||o.depth!=r.depth-1||(t&&t(e.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),0))},Aa=function(e,t,n){var r=e.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size)return!1;i=Fa(o)}var a=i&&i.nodeAfter;return!(!a||!mn.isSelectable(a)||(t&&t(e.tr.setSelection(mn.create(e.doc,i.pos)).scrollIntoView()),0))};function Fa(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}var Oa=function(e,t){var n=e.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o)||(t&&t(e.tr.insertText("\n").scrollIntoView()),0))};function Ma(e){for(var t=0;t<e.edgeCount;t++){var n=e.edge(t).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}var Ba=function(e,t){var n=e.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var i=r.node(-1),a=r.indexAfter(-1),s=Ma(i.contentMatchAt(a));if(!s||!i.canReplaceWith(a,a,s))return!1;if(t){var u=r.after(),l=e.tr.replaceWith(u,u,s.createAndFill());l.setSelection(ln.near(l.doc.resolve(u),1)),t(l.scrollIntoView())}return!0},Pa=function(e,t){var n=e.selection,r=n.$from,o=n.$to;if(n instanceof gn||r.parent.inlineContent||o.parent.inlineContent)return!1;var i=Ma(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){var a=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,s=e.tr.insert(a,i.createAndFill());s.setSelection(pn.create(s.doc,a+1)),t(s.scrollIntoView())}return!0},Ta=function(e,t){var n=e.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var r=n.before();if(Mt(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}var o=n.blockRange(),i=o&&xt(o);return null!=i&&(t&&t(e.tr.lift(o,i).scrollIntoView()),!0)};function Na(e,t,n,r){var o,i,a=t.nodeBefore,s=t.nodeAfter,u=a.type.spec.isolating||s.type.spec.isolating;if(!u&&function(e,t,n){var r=t.nodeBefore,o=t.nodeAfter,i=t.index();return!(!(r&&o&&r.type.compatibleContent(o.type))||(!r.content.size&&t.parent.canReplace(i-1,i)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(i,i+1)||!o.isTextblock&&!Bt(e.doc,t.pos)||(n&&n(e.tr.join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;var l=!u&&t.parent.canReplace(t.index(),t.index()+1);if(l&&(o=(i=a.contentMatchAt(a.childCount)).findWrapping(s.type))&&i.matchType(o[0]||s.type).validEnd){if(n){for(var c=t.pos+s.nodeSize,d=$.empty,f=o.length-1;f>=0;f--)d=$.from(o[f].create(null,d));d=$.from(a.copy(d));var p=e.tr.step(new wt(t.pos-1,c,t.pos,c,new J(d,1,0),o.length,!0)),h=p.doc.resolve(c+2*o.length);h.nodeAfter&&h.nodeAfter.type==a.type&&Bt(p.doc,h.pos)&&p.join(h.pos),n(p.scrollIntoView())}return!0}var m=s.type.spec.isolating||r>0&&u?null:ln.findFrom(t,1),v=m&&m.$from.blockRange(m.$to),g=v&&xt(v);if(null!=g&&g>=t.depth)return n&&n(e.tr.lift(v,g).scrollIntoView()),!0;if(l&&Ca(s,"start",!0)&&Ca(a,"end")){for(var y=a,b=[];b.push(y),!y.isTextblock;)y=y.lastChild;for(var D=s,w=1;!D.isTextblock;D=D.firstChild)w++;if(y.canReplace(y.childCount,y.childCount,D.content)){if(n){for(var C=$.empty,k=b.length-1;k>=0;k--)C=$.from(b[k].copy(C));n(e.tr.step(new wt(t.pos-b.length,t.pos+s.nodeSize,t.pos+w,t.pos+s.nodeSize-w,new J(C,b.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function ja(e){return function(t,n){for(var r=t.selection,o=e<0?r.$from:r.$to,i=o.depth;o.node(i).isInline;){if(!i)return!1;i--}return!!o.node(i).isTextblock&&(n&&n(t.tr.setSelection(pn.create(t.doc,e<0?o.start(i):o.end(i)))),!0)}}var _a=ja(-1),Ra=ja(1);function La(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){for(var o=!1,i=0;i<n.selection.ranges.length&&!o;i++){var a=n.selection.ranges[i],s=a.$from.pos,u=a.$to.pos;n.doc.nodesBetween(s,u,(function(r,i){if(o)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)o=!0;else{var a=n.doc.resolve(i),s=a.index();o=a.parent.canReplaceWith(s,s+1,e)}}))}if(!o)return!1;if(r){for(var l=n.tr,c=0;c<n.selection.ranges.length;c++){var d=n.selection.ranges[c],f=d.$from.pos,p=d.$to.pos;l.setBlockType(f,p,e,t)}r(l.scrollIntoView())}return!0}}function Ia(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,r){for(var o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}var Ha=Ia(ya,Da,ka),za=Ia(ya,Sa,Aa),Va={Enter:Ia(Oa,Pa,Ta,(function(e,t){var n=e.selection,r=n.$from;n.$to;if(e.selection instanceof mn&&e.selection.node.isBlock)return!(!r.parentOffset||!Mt(e.doc,r.pos)||(t&&t(e.tr.split(r.pos).scrollIntoView()),0));if(!r.depth)return!1;for(var o,i,a=[],s=!1,u=!1,l=r.depth;;l--){if(r.node(l).isBlock){s=r.end(l)==r.pos+(r.depth-l),u=r.start(l)==r.pos-(r.depth-l),i=Ma(r.node(l-1).contentMatchAt(r.indexAfter(l-1)));a.unshift(s&&i?{type:i}:null),o=l;break}if(1==l)return!1;a.unshift(null)}var c=e.tr;(e.selection instanceof pn||e.selection instanceof gn)&&c.deleteSelection();var d=c.mapping.map(r.pos),f=Mt(c.doc,d,a.length,a);if(f||(a[0]=i?{type:i}:null,f=Mt(c.doc,d,a.length,a)),!f)return!1;if(c.split(d,a.length,a),!s&&u&&r.node(o).type!=i){var p=c.mapping.map(r.before(o)),h=c.doc.resolve(p);i&&r.node(o-1).canReplaceWith(h.index(),h.index()+1,i)&&c.setNodeMarkup(c.mapping.map(r.before(o)),i)}return t&&t(c.scrollIntoView()),!0})),"Mod-Enter":Ba,Backspace:Ha,"Mod-Backspace":Ha,"Shift-Backspace":Ha,Delete:za,"Mod-Delete":za,"Mod-a":function(e,t){return t&&t(e.tr.setSelection(new gn(e.doc))),!0}},$a={"Ctrl-h":Va.Backspace,"Alt-Backspace":Va["Mod-Backspace"],"Ctrl-d":Va.Delete,"Ctrl-Alt-Backspace":Va["Mod-Delete"],"Alt-Delete":Va["Mod-Delete"],"Alt-d":Va["Mod-Delete"],"Ctrl-a":_a,"Ctrl-e":Ra};for(var Ua in Va)$a[Ua]=Va[Ua];function Ga(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ga=function(){return!!e})()}function Wa(e){return Wa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wa(e)}function qa(e,t){return qa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qa(e,t)}function Ka(e){return Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ka(e)}function Ja(e){return function(e){if(Array.isArray(e))return Ya(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Xa(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Za(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||Xa(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xa(e,t){if(e){if("string"==typeof e)return Ya(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ya(e,t):void 0}}function Ya(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Qa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function es(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,as(r.key),r)}}function ts(e,t,n){return t&&es(e.prototype,t),n&&es(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ns(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ns(Object(n),!0).forEach((function(t){is(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ns(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function is(e,t,n){return(t=as(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function as(e){var t=function(e){if("object"!=Ka(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ka(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ka(t)?t:t+""}function ss(e){var t=e.state,n=e.transaction,r=n.selection,o=n.doc,i=n.storedMarks;return rs(rs({},t),{},{apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}})}"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();var us=function(){return ts((function e(t){Qa(this,e),this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}),[{key:"hasCustomState",get:function(){return!!this.customState}},{key:"state",get:function(){return this.customState||this.editor.state}},{key:"commands",get:function(){var e=this,t=this.rawCommands,n=this.editor,r=this.state,o=n.view,i=r.tr,a=this.buildProps(i);return Object.fromEntries(Object.entries(t).map((function(t){var n=Za(t,2),r=n[0],s=n[1];return[r,function(){var t=s.apply(void 0,arguments)(a);return i.getMeta("preventDispatch")||e.hasCustomState||o.dispatch(i),t}]})))}},{key:"chain",get:function(){var e=this;return function(){return e.createChain()}}},{key:"can",get:function(){var e=this;return function(){return e.createCan()}}},{key:"createChain",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.rawCommands,o=this.editor,i=this.state,a=o.view,s=[],u=!!e,l=e||i.tr,c=rs(rs({},Object.fromEntries(Object.entries(r).map((function(e){var r=Za(e,2),o=r[0],i=r[1];return[o,function(){var e=t.buildProps(l,n),r=i.apply(void 0,arguments)(e);return s.push(r),c}]})))),{},{run:function(){return u||!n||l.getMeta("preventDispatch")||t.hasCustomState||a.dispatch(l),s.every((function(e){return!0===e}))}});return c}},{key:"createCan",value:function(e){var t=this,n=this.rawCommands,r=this.state,o=!1,i=e||r.tr,a=this.buildProps(i,o),s=Object.fromEntries(Object.entries(n).map((function(e){var t=Za(e,2),n=t[0],r=t[1];return[n,function(){return r.apply(void 0,arguments)(rs(rs({},a),{},{dispatch:void 0}))}]})));return rs(rs({},s),{},{chain:function(){return t.createChain(i,o)}})}},{key:"buildProps",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.rawCommands,o=this.editor,i=this.state,a=o.view,s={tr:e,editor:o,view:a,state:ss({state:i,transaction:e}),dispatch:n?function(){}:void 0,chain:function(){return t.createChain(e,n)},can:function(){return t.createCan(e)},get commands(){return Object.fromEntries(Object.entries(r).map((function(e){var t=Za(e,2),n=t[0],r=t[1];return[n,function(){return r.apply(void 0,arguments)(s)}]})))}};return s}}])}(),ls=function(){return ts((function e(){Qa(this,e),this.callbacks={}}),[{key:"on",value:function(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=this.callbacks[e];return i&&i.forEach((function(e){return e.apply(t,r)})),this}},{key:"off",value:function(e,t){var n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter((function(e){return e!==t})):delete this.callbacks[e]),this}},{key:"once",value:function(e,t){var n=this,r=function(){n.off(e,r);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];t.apply(n,i)};return this.on(e,r)}},{key:"removeAllListeners",value:function(){this.callbacks={}}}])}();function cs(e,t,n){return void 0===e.config[t]&&e.parent?cs(e.parent,t,n):"function"==typeof e.config[t]?e.config[t].bind(rs(rs({},n),{},{parent:e.parent?cs(e.parent,t,n):null})):e.config[t]}function ds(e){return{baseExtensions:e.filter((function(e){return"extension"===e.type})),nodeExtensions:e.filter((function(e){return"node"===e.type})),markExtensions:e.filter((function(e){return"mark"===e.type}))}}function fs(e){var t=[],n=ds(e),r=n.nodeExtensions,o=n.markExtensions,i=[].concat(Ja(r),Ja(o)),a={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach((function(e){var n=cs(e,"addGlobalAttributes",{name:e.name,options:e.options,storage:e.storage,extensions:i});n&&n().forEach((function(e){e.types.forEach((function(n){Object.entries(e.attributes).forEach((function(e){var r=Za(e,2),o=r[0],i=r[1];t.push({type:n,name:o,attribute:rs(rs({},a),i)})}))}))}))})),i.forEach((function(e){var n={name:e.name,options:e.options,storage:e.storage},r=cs(e,"addAttributes",n);if(r){var o=r();Object.entries(o).forEach((function(n){var r=Za(n,2),o=r[0],i=r[1],s=rs(rs({},a),i);"function"==typeof(null==s?void 0:s.default)&&(s.default=s.default()),(null==s?void 0:s.isRequired)&&void 0===(null==s?void 0:s.default)&&delete s.default,t.push({type:e.name,name:o,attribute:s})}))}})),t}function ps(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error("There is no node type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.nodes[e]}return e}function hs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return!!e})).reduce((function(e,t){var n=rs({},e);return Object.entries(t).forEach((function(e){var t=Za(e,2),r=t[0],o=t[1];if(n[r])if("class"===r){var i=o?String(o).split(" "):[],a=n[r]?n[r].split(" "):[],s=i.filter((function(e){return!a.includes(e)}));n[r]=[].concat(Ja(a),Ja(s)).join(" ")}else if("style"===r){var u=o?o.split(";").map((function(e){return e.trim()})).filter(Boolean):[],l=n[r]?n[r].split(";").map((function(e){return e.trim()})).filter(Boolean):[],c=new Map;l.forEach((function(e){var t=Za(e.split(":").map((function(e){return e.trim()})),2),n=t[0],r=t[1];c.set(n,r)})),u.forEach((function(e){var t=Za(e.split(":").map((function(e){return e.trim()})),2),n=t[0],r=t[1];c.set(n,r)})),n[r]=Array.from(c.entries()).map((function(e){var t=Za(e,2),n=t[0],r=t[1];return"".concat(n,": ").concat(r)})).join("; ")}else n[r]=o;else n[r]=o})),n}),{})}function ms(e,t){return t.filter((function(t){return t.type===e.type.name})).filter((function(e){return e.attribute.rendered})).map((function(t){return t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:is({},t.name,e.attrs[t.name])})).reduce((function(e,t){return hs(e,t)}),{})}function vs(e){return"function"==typeof e}function gs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(vs(e)){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return t?e.bind(t).apply(void 0,r):e.apply(void 0,r)}return e}function ys(e,t){return"style"in e?e:rs(rs({},e),{},{getAttrs:function(n){var r=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===r)return!1;var o=t.reduce((function(e,t){var r=t.attribute.parseHTML?t.attribute.parseHTML(n):function(e){return"string"!=typeof e?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):"true"===e||"false"!==e&&e}(n.getAttribute(t.name));return null==r?e:rs(rs({},e),{},is({},t.name,r))}),{});return rs(rs({},r),o)}})}function bs(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=Za(e,2),n=t[0],r=t[1];return("attrs"!==n||!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===Object.keys(e).length&&e.constructor===Object}(r))&&null!=r})))}function Ds(e,t){var n,r=fs(e),o=ds(e),i=o.nodeExtensions,a=o.markExtensions,s=null===(n=i.find((function(e){return cs(e,"topNode")})))||void 0===n?void 0:n.name,u=Object.fromEntries(i.map((function(n){var o=r.filter((function(e){return e.type===n.name})),i={name:n.name,options:n.options,storage:n.storage,editor:t},a=e.reduce((function(e,t){var r=cs(t,"extendNodeSchema",i);return rs(rs({},e),r?r(n):{})}),{}),s=bs(rs(rs({},a),{},{content:gs(cs(n,"content",i)),marks:gs(cs(n,"marks",i)),group:gs(cs(n,"group",i)),inline:gs(cs(n,"inline",i)),atom:gs(cs(n,"atom",i)),selectable:gs(cs(n,"selectable",i)),draggable:gs(cs(n,"draggable",i)),code:gs(cs(n,"code",i)),whitespace:gs(cs(n,"whitespace",i)),linebreakReplacement:gs(cs(n,"linebreakReplacement",i)),defining:gs(cs(n,"defining",i)),isolating:gs(cs(n,"isolating",i)),attrs:Object.fromEntries(o.map((function(e){var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]})))})),u=gs(cs(n,"parseHTML",i));u&&(s.parseDOM=u.map((function(e){return ys(e,o)})));var l=cs(n,"renderHTML",i);l&&(s.toDOM=function(e){return l({node:e,HTMLAttributes:ms(e,o)})});var c=cs(n,"renderText",i);return c&&(s.toText=c),[n.name,s]}))),l=Object.fromEntries(a.map((function(n){var o=r.filter((function(e){return e.type===n.name})),i={name:n.name,options:n.options,storage:n.storage,editor:t},a=e.reduce((function(e,t){var r=cs(t,"extendMarkSchema",i);return rs(rs({},e),r?r(n):{})}),{}),s=bs(rs(rs({},a),{},{inclusive:gs(cs(n,"inclusive",i)),excludes:gs(cs(n,"excludes",i)),group:gs(cs(n,"group",i)),spanning:gs(cs(n,"spanning",i)),code:gs(cs(n,"code",i)),attrs:Object.fromEntries(o.map((function(e){var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]})))})),u=gs(cs(n,"parseHTML",i));u&&(s.parseDOM=u.map((function(e){return ys(e,o)})));var l=cs(n,"renderHTML",i);return l&&(s.toDOM=function(e){return l({mark:e,HTMLAttributes:ms(e,o)})}),[n.name,s]})));return new Te({topNode:s,nodes:u,marks:l})}function ws(e,t){return t.nodes[e]||t.marks[e]||null}function Cs(e,t){return Array.isArray(t)?t.some((function(t){return("string"==typeof t?t:t.name)===e.name})):t}function ks(e,t){var n=Ge.fromSchema(t).serializeFragment(e),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}function Es(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var xs=ts((function e(t){Qa(this,e),this.find=t.find,this.handler=t.handler}));function Ss(e){var t,n=e.editor,r=e.from,o=e.to,i=e.text,a=e.rules,s=e.plugin,u=n.view;if(u.composing)return!1;var l=u.state.doc.resolve(r);if(l.parent.type.spec.code||(null===(t=l.nodeBefore||l.nodeAfter)||void 0===t?void 0:t.marks.find((function(e){return e.type.spec.code}))))return!1;var c=!1,d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n="",r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(function(e,t,o,i){var a,s,u=(null===(s=(a=e.type.spec).toText)||void 0===s?void 0:s.call(a,{node:e,pos:t,parent:o,index:i}))||e.textContent||"%leaf%";n+=e.isAtom&&!e.isText?u:u.slice(0,Math.max(0,r-t))})),n}(l)+i;return a.forEach((function(e){if(!c){var t=function(e,t){if(Es(t))return t.exec(e);var n=t(e);if(!n)return null;var r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r}(d,e.find);if(t){var a=u.state.tr,l=ss({state:u.state,transaction:a}),f={from:r-(t[0].length-i.length),to:o},p=new us({editor:n,state:l}),h=p.commands,m=p.chain,v=p.can;null!==e.handler({state:l,range:f,match:t,commands:h,chain:m,can:v})&&a.steps.length&&(a.setMeta(s,{transform:a,from:r,to:o,text:i}),u.dispatch(a),c=!0)}}})),c}function As(e){var t=e.editor,n=e.rules,r=new Fn({state:{init:function(){return null},apply:function(e,o,i){var a=e.getMeta(r);if(a)return a;var s=e.getMeta("applyInputRules");return!!s&&setTimeout((function(){var e=s.text;"string"==typeof e||(e=ks($.from(e),i.schema));var o=s.from,a=o+e.length;Ss({editor:t,from:o,to:a,text:e,rules:n,plugin:r})})),e.selectionSet||e.docChanged?null:o}},props:{handleTextInput:function(e,o,i,a){return Ss({editor:t,from:o,to:i,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:function(e){return setTimeout((function(){var o=e.state.selection.$cursor;o&&Ss({editor:t,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})})),!1}},handleKeyDown:function(e,o){if("Enter"!==o.key)return!1;var i=e.state.selection.$cursor;return!!i&&Ss({editor:t,from:i.pos,to:i.pos,text:"\n",rules:n,plugin:r})}},isInputRules:!0});return r}function Fs(e){return"Object"===function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function Os(e,t){var n=rs({},e);return Fs(e)&&Fs(t)&&Object.keys(t).forEach((function(r){Fs(t[r])&&Fs(e[r])?n[r]=Os(e[r],t[r]):n[r]=t[r]})),n}var Ms=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Qa(this,e),this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=rs(rs({},this.config),t),this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=gs(cs(this,"addOptions",{name:this.name}))),this.storage=gs(cs(this,"addStorage",{name:this.name,options:this.options}))||{}}return ts(e,[{key:"configure",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.extend(rs(rs({},this.config),{},{addOptions:function(){return Os(e.options,t)}}));return n.name=this.name,n.parent=this.parent,n}},{key:"extend",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new e(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(n.name,'".')),n.options=gs(cs(n,"addOptions",{name:n.name})),n.storage=gs(cs(n,"addStorage",{name:n.name,options:n.options})),n}}],[{key:"create",value:function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}},{key:"handleExit",value:function(e){var t=e.editor,n=e.mark,r=t.state.tr,o=t.state.selection.$from;if(o.pos===o.end()){var i=o.marks();if(!i.find((function(e){return(null==e?void 0:e.type.name)===n.name})))return!1;var a=i.find((function(e){return(null==e?void 0:e.type.name)===n.name}));return a&&r.removeStoredMark(a),r.insertText(" ",o.pos),t.view.dispatch(r),!0}return!1}}])}(),Bs=ts((function e(t){Qa(this,e),this.find=t.find,this.handler=t.handler}));var Ps=null;function Ts(e){var t,n=e.editor,r=e.rules,o=null,i=!1,a=!1,s="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null;try{t="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch(e){t=null}var u=function(e){var r=e.state,o=e.from,i=e.to,a=e.rule,u=e.pasteEvt,l=r.tr,c=ss({state:r,transaction:l});if(function(e){var t=e.editor,n=e.state,r=e.from,o=e.to,i=e.rule,a=e.pasteEvent,s=e.dropEvent,u=new us({editor:t,state:n}),l=u.commands,c=u.chain,d=u.can,f=[];return n.doc.nodesBetween(r,o,(function(e,t){if(e.isTextblock&&!e.type.spec.code){var u=Math.max(r,t),p=Math.min(o,t+e.content.size);(function(e,t,n){if(Es(t))return Ja(e.matchAll(t));var r=t(e,n);return r?r.map((function(t){var n=[t.text];return n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(t.replaceWith)),n})):[]})(e.textBetween(u-t,p-t,void 0,"￼"),i.find,a).forEach((function(e){if(void 0!==e.index){var t=u+e.index+1,r=t+e[0].length,o={from:n.tr.mapping.map(t),to:n.tr.mapping.map(r)},p=i.handler({state:n,range:o,match:e,commands:l,chain:c,can:d,pasteEvent:a,dropEvent:s});f.push(p)}}))}})),f.every((function(e){return null!==e}))}({editor:n,state:c,from:Math.max(o-1,0),to:i.b-1,rule:a,pasteEvent:u,dropEvent:t})&&l.steps.length){try{t="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch(e){t=null}return s="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null,l}},l=r.map((function(e){return new Fn({view:function(e){var t=function(t){var r;(o=(null===(r=e.dom.parentElement)||void 0===r?void 0:r.contains(t.target))?e.dom.parentElement:null)&&(Ps=n)},r=function(){Ps&&(Ps=null)};return window.addEventListener("dragstart",t),window.addEventListener("dragend",r),{destroy:function(){window.removeEventListener("dragstart",t),window.removeEventListener("dragend",r)}}},props:{handleDOMEvents:{drop:function(e,n){if(a=o===e.dom.parentElement,t=n,!a){var r=Ps;r&&setTimeout((function(){var e=r.state.selection;e&&r.commands.deleteRange({from:e.from,to:e.to})}),10)}return!1},paste:function(e,t){var n,r=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/html");return s=t,i=!!(null==r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:function(t,n,r){var o=t[0],l="paste"===o.getMeta("uiEvent")&&!i,c="drop"===o.getMeta("uiEvent")&&!a,d=o.getMeta("applyPasteRules"),f=!!d;if(l||c||f){if(f){var p=d.text;"string"==typeof p||(p=ks($.from(p),r.schema));var h=d.from,m=h+p.length,v=function(e){var t,n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return null===(t=n.clipboardData)||void 0===t||t.setData("text/html",e),n}(p);return u({rule:e,state:r,from:h,to:{b:m},pasteEvt:v})}var g=n.doc.content.findDiffStart(r.doc.content),y=n.doc.content.findDiffEnd(r.doc.content);if("number"==typeof g&&y&&g!==y.b)return u({rule:e,state:r,from:g,to:y,pasteEvt:s})}}})}));return l}var Ns=function(){function e(t,n){Qa(this,e),this.splittableMarks=[],this.editor=n,this.extensions=e.resolve(t),this.schema=Ds(this.extensions,n),this.setupExtensions()}return ts(e,[{key:"commands",get:function(){var e=this;return this.extensions.reduce((function(t,n){var r=cs(n,"addCommands",{name:n.name,options:n.options,storage:n.storage,editor:e.editor,type:ws(n.name,e.schema)});return r?rs(rs({},t),r()):t}),{})}},{key:"plugins",get:function(){var t=this,n=this.editor,r=e.sort(Ja(this.extensions).reverse()),o=[],i=[],a=r.map((function(e){var r={name:e.name,options:e.options,storage:e.storage,editor:n,type:ws(e.name,t.schema)},a=[],s=cs(e,"addKeyboardShortcuts",r),u={};if("mark"===e.type&&cs(e,"exitable",r)&&(u.ArrowRight=function(){return Ms.handleExit({editor:n,mark:e})}),s){var l=Object.fromEntries(Object.entries(s()).map((function(e){var t=Za(e,2),r=t[0],o=t[1];return[r,function(){return o({editor:n})}]})));u=rs(rs({},u),l)}var c=function(e){return new Fn({props:{handleKeyDown:ga(e)}})}(u);a.push(c);var d=cs(e,"addInputRules",r);Cs(e,n.options.enableInputRules)&&d&&o.push.apply(o,Ja(d()));var f=cs(e,"addPasteRules",r);Cs(e,n.options.enablePasteRules)&&f&&i.push.apply(i,Ja(f()));var p=cs(e,"addProseMirrorPlugins",r);if(p){var h=p();a.push.apply(a,Ja(h))}return a})).flat();return[As({editor:n,rules:o})].concat(Ja(Ts({editor:n,rules:i})),Ja(a))}},{key:"attributes",get:function(){return fs(this.extensions)}},{key:"nodeViews",get:function(){var e=this,t=this.editor,n=ds(this.extensions).nodeExtensions;return Object.fromEntries(n.filter((function(e){return!!cs(e,"addNodeView")})).map((function(n){var r=e.attributes.filter((function(e){return e.type===n.name})),o={name:n.name,options:n.options,storage:n.storage,editor:t,type:ps(n.name,e.schema)},i=cs(n,"addNodeView",o);return i?[n.name,function(e,o,a,s,u){var l=ms(e,r);return i()({node:e,view:o,getPos:a,decorations:s,innerDecorations:u,editor:t,extension:n,HTMLAttributes:l})}]:[]})))}},{key:"setupExtensions",value:function(){var e=this;this.extensions.forEach((function(t){var n;e.editor.extensionStorage[t.name]=t.storage;var r={name:t.name,options:t.options,storage:t.storage,editor:e.editor,type:ws(t.name,e.schema)};"mark"===t.type&&(null===(n=gs(cs(t,"keepOnSplit",r)))||void 0===n||n)&&e.splittableMarks.push(t.name);var o=cs(t,"onBeforeCreate",r),i=cs(t,"onCreate",r),a=cs(t,"onUpdate",r),s=cs(t,"onSelectionUpdate",r),u=cs(t,"onTransaction",r),l=cs(t,"onFocus",r),c=cs(t,"onBlur",r),d=cs(t,"onDestroy",r);o&&e.editor.on("beforeCreate",o),i&&e.editor.on("create",i),a&&e.editor.on("update",a),s&&e.editor.on("selectionUpdate",s),u&&e.editor.on("transaction",u),l&&e.editor.on("focus",l),c&&e.editor.on("blur",c),d&&e.editor.on("destroy",d)}))}}],[{key:"resolve",value:function(t){var n,r,o=e.sort(e.flatten(t)),i=(r=(n=o.map((function(e){return e.name}))).filter((function(e,t){return n.indexOf(e)!==t})),Array.from(new Set(r)));return i.length&&console.warn("[tiptap warn]: Duplicate extension names found: [".concat(i.map((function(e){return"'".concat(e,"'")})).join(", "),"]. This can lead to issues.")),o}},{key:"flatten",value:function(e){var t=this;return e.map((function(e){var n=cs(e,"addExtensions",{name:e.name,options:e.options,storage:e.storage});return n?[e].concat(Ja(t.flatten(n()))):e})).flat(10)}},{key:"sort",value:function(e){return e.sort((function(e,t){var n=cs(e,"priority")||100,r=cs(t,"priority")||100;return n>r?-1:n<r?1:0}))}}])}(),js=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Qa(this,e),this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=rs(rs({},this.config),t),this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=gs(cs(this,"addOptions",{name:this.name}))),this.storage=gs(cs(this,"addStorage",{name:this.name,options:this.options}))||{}}return ts(e,[{key:"configure",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.extend(rs(rs({},this.config),{},{addOptions:function(){return Os(e.options,t)}}));return n.name=this.name,n.parent=this.parent,n}},{key:"extend",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new e(rs(rs({},this.config),t));return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(n.name,'".')),n.options=gs(cs(n,"addOptions",{name:n.name})),n.storage=gs(cs(n,"addStorage",{name:n.name,options:n.options})),n}}],[{key:"create",value:function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}}])}();function _s(e,t,n){var r=t.from,o=t.to,i=n||{},a=i.blockSeparator,s=void 0===a?"\n\n":a,u=i.textSerializers,l=void 0===u?{}:u,c="";return e.nodesBetween(r,o,(function(e,n,i,a){var u;e.isBlock&&n>r&&(c+=s);var d=null==l?void 0:l[e.type.name];if(d)return i&&(c+=d({node:e,pos:n,parent:i,index:a,range:t})),!1;e.isText&&(c+=null===(u=null==e?void 0:e.text)||void 0===u?void 0:u.slice(Math.max(r,n)-n,o-n))})),c}function Rs(e){return Object.fromEntries(Object.entries(e.nodes).filter((function(e){return Za(e,2)[1].spec.toText})).map((function(e){var t=Za(e,2);return[t[0],t[1].spec.toText]})))}var Ls=js.create({name:"clipboardTextSerializer",addOptions:function(){return{blockSeparator:void 0}},addProseMirrorPlugins:function(){var e=this;return[new Fn({key:new Bn("clipboardTextSerializer"),props:{clipboardTextSerializer:function(){var t=e.editor,n=t.state,r=t.schema,o=n.doc,i=n.selection.ranges,a=Math.min.apply(Math,Ja(i.map((function(e){return e.$from.pos})))),s=Math.max.apply(Math,Ja(i.map((function(e){return e.$to.pos})))),u=Rs(r);return _s(o,{from:a,to:s},rs(rs({},void 0!==e.options.blockSeparator?{blockSeparator:e.options.blockSeparator}:{}),{},{textSerializers:u}))}}})]}});function Is(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{strict:!0},r=Object.keys(t);return!r.length||r.every((function(r){return n.strict?t[r]===e[r]:Es(t[r])?t[r].test(e[r]):t[r]===e[r]}))}function Hs(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.find((function(e){return e.type===t&&Is(Object.fromEntries(Object.keys(n).map((function(t){return[t,e.attrs[t]]}))),n)}))}function zs(e,t){return!!Hs(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function Vs(e,t,n){var r;if(e&&t){var o=e.parent.childAfter(e.parentOffset);if(o.node&&o.node.marks.some((function(e){return e.type===t}))||(o=e.parent.childBefore(e.parentOffset)),o.node&&o.node.marks.some((function(e){return e.type===t}))&&(n=n||(null===(r=o.node.marks[0])||void 0===r?void 0:r.attrs),Hs(Ja(o.node.marks),t,n))){for(var i=o.index,a=e.start()+o.offset,s=i+1,u=a+o.node.nodeSize;i>0&&zs(Ja(e.parent.child(i-1).marks),t,n);)i-=1,a-=e.parent.child(i).nodeSize;for(;s<e.parent.childCount&&zs(Ja(e.parent.child(s).marks),t,n);)u+=e.parent.child(s).nodeSize,s+=1;return{from:a,to:u}}}}function $s(e,t){if("string"==typeof e){if(!t.marks[e])throw Error("There is no mark type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.marks[e]}return e}function Us(e){return e instanceof pn}function Gs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(Math.max(e,t),n)}function Ws(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return null;var n=ln.atStart(e),r=ln.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return r;var o=n.from,i=r.to;return"all"===t?pn.create(e,Gs(0,o,i),Gs(e.content.size,o,i)):pn.create(e,Gs(t,o,i),Gs(t,o,i))}function qs(){return"Android"===navigator.platform||/android/i.test(navigator.userAgent)}function Ks(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var Js=function(e){for(var t=e.childNodes,n=t.length-1;n>=0;n-=1){var r=t[n];3===r.nodeType&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):1===r.nodeType&&Js(r)}return e};function Zs(e){var t="<body>".concat(e,"</body>"),n=(new window.DOMParser).parseFromString(t,"text/html").body;return Js(n)}function Xs(e,t,n){if(e instanceof pe||e instanceof $)return e;n=rs({slice:!0,parseOptions:{}},n);var r="string"==typeof e;if("object"===Ka(e)&&null!==e)try{if(Array.isArray(e)&&e.length>0)return $.fromArray(e.map((function(e){return t.nodeFromJSON(e)})));var o=t.nodeFromJSON(e);return n.errorOnInvalidContent&&o.check(),o}catch(r){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:r});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),Xs("",t,n)}if(r){if(n.errorOnInvalidContent){var i=!1,a="",s=new Te({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:function(e){return i=!0,a="string"==typeof e?e:e.outerHTML,null}}]}})});if(n.slice?je.fromSchema(s).parseSlice(Zs(e),n.parseOptions):je.fromSchema(s).parse(Zs(e),n.parseOptions),n.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error("Invalid element found: ".concat(a))})}var u=je.fromSchema(t);return n.slice?u.parseSlice(Zs(e),n.parseOptions).content:u.parse(Zs(e),n.parseOptions)}return Xs("",t,n)}function Ys(e,t,n){var r=e.steps.length-1;if(!(r<t)){var o=e.steps[r];if(o instanceof Dt||o instanceof wt){var i=e.mapping.maps[r],a=0;i.forEach((function(e,t,n,r){0===a&&(a=r)})),e.setSelection(ln.near(e.doc.resolve(a),n))}}}function Qs(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function eu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.selection,o=r.from,i=r.to,a=r.empty,s=t?ps(t,e.schema):null,u=[];e.doc.nodesBetween(o,i,(function(e,t){if(!e.isText){var n=Math.max(o,t),r=Math.min(i,t+e.nodeSize);u.push({node:e,from:n,to:r})}}));var l=i-o,c=u.filter((function(e){return!s||s.name===e.node.type.name})).filter((function(e){return Is(e.node.attrs,n,{strict:!1})}));return a?!!c.length:c.reduce((function(e,t){return e+t.to-t.from}),0)>=l}function tu(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function nu(e,t){var n="string"==typeof t?[t]:t;return Object.keys(e).reduce((function(t,r){return n.includes(r)||(t[r]=e[r]),t}),{})}function ru(e,t){return Xs(e,t,{slice:!1,parseOptions:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},errorOnInvalidContent:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).errorOnInvalidContent})}function ou(e,t){var n=$s(t,e.schema),r=e.selection,o=r.from,i=r.to,a=r.empty,s=[];a?(e.storedMarks&&s.push.apply(s,Ja(e.storedMarks)),s.push.apply(s,Ja(e.selection.$head.marks()))):e.doc.nodesBetween(o,i,(function(e){s.push.apply(s,Ja(e.marks))}));var u=s.find((function(e){return e.type.name===n.name}));return u?rs({},u.attrs):{}}function iu(e,t){var n=new Kt(e);return t.forEach((function(e){e.steps.forEach((function(e){n.step(e)}))})),n}function au(e,t){var n=[];return e.descendants((function(e,r){t(e)&&n.push({node:e,pos:r})})),n}function su(e,t,n){var r=[];return e.nodesBetween(t.from,t.to,(function(e,t){n(e)&&r.push({node:e,pos:t})})),r}function uu(e){return function(t){return function(e,t){for(var n=e.depth;n>0;n-=1){var r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}(t.$from,e)}}function lu(e,t){var n=tu("string"==typeof t?t:t.name,e.schema);return"node"===n?function(e,t){var n=ps(t,e.schema),r=e.selection,o=r.from,i=r.to,a=[];e.doc.nodesBetween(o,i,(function(e){a.push(e)}));var s=a.reverse().find((function(e){return e.type.name===n.name}));return s?rs({},s.attrs):{}}(e,t):"mark"===n?ou(e,t):{}}function cu(e){var t=e.mapping,n=e.steps,r=[];return t.maps.forEach((function(e,o){var i=[];if(e.ranges.length)e.forEach((function(e,t){i.push({from:e,to:t})}));else{var a=n[o],s=a.from,u=a.to;if(void 0===s||void 0===u)return;i.push({from:s,to:u})}i.forEach((function(e){var n=e.from,i=e.to,a=t.slice(o).map(n,-1),s=t.slice(o).map(i),u=t.invert().map(a,-1),l=t.invert().map(s);r.push({oldRange:{from:u,to:l},newRange:{from:a,to:s}})}))})),function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify,n={};return e.filter((function(e){var r=t(e);return!Object.prototype.hasOwnProperty.call(n,r)&&(n[r]=!0)}))}(e);return 1===t.length?t:t.filter((function(e,n){return!t.filter((function(e,t){return t!==n})).some((function(t){return e.oldRange.from>=t.oldRange.from&&e.oldRange.to<=t.oldRange.to&&e.newRange.from>=t.newRange.from&&e.newRange.to<=t.newRange.to}))}))}(r)}function du(e,t,n){var r=[];return e===t?n.resolve(e).marks().forEach((function(t){var o=Vs(n.resolve(e),t.type);o&&r.push(rs({mark:t},o))})):n.nodesBetween(e,t,(function(e,t){e&&void 0!==(null==e?void 0:e.nodeSize)&&r.push.apply(r,Ja(e.marks.map((function(n){return{from:t,to:t+e.nodeSize,mark:n}}))))})),r}function fu(e,t,n){return Object.fromEntries(Object.entries(n).filter((function(n){var r=Za(n,1)[0],o=e.find((function(e){return e.type===t&&e.name===r}));return!!o&&o.attribute.keepOnSplit})))}function pu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.selection,o=r.empty,i=r.ranges,a=t?$s(t,e.schema):null;if(o)return!!(e.storedMarks||e.selection.$from.marks()).filter((function(e){return!a||a.name===e.type.name})).find((function(e){return Is(e.attrs,n,{strict:!1})}));var s=0,u=[];if(i.forEach((function(t){var n=t.$from,r=t.$to,o=n.pos,i=r.pos;e.doc.nodesBetween(o,i,(function(e,t){if(e.isText||e.marks.length){var n=Math.max(o,t),r=Math.min(i,t+e.nodeSize);s+=r-n,u.push.apply(u,Ja(e.marks.map((function(e){return{mark:e,from:n,to:r}}))))}}))})),0===s)return!1;var l=u.filter((function(e){return!a||a.name===e.mark.type.name})).filter((function(e){return Is(e.mark.attrs,n,{strict:!1})})).reduce((function(e,t){return e+t.to-t.from}),0),c=u.filter((function(e){return!a||e.mark.type!==a&&e.mark.type.excludes(a)})).reduce((function(e,t){return e+t.to-t.from}),0);return(l>0?l+c:l)>=s}function hu(e,t){var n=ds(t).nodeExtensions.find((function(t){return t.name===e}));if(!n)return!1;var r=gs(cs(n,"group",{name:n.name,options:n.options,storage:n.storage}));return"string"==typeof r&&r.split(" ").includes("list")}function mu(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.checkChildren,o=void 0===r||r,i=n.ignoreWhitespace,a=void 0!==i&&i;if(a){if("hardBreak"===e.type.name)return!0;if(e.isText)return/^\s*$/m.test(null!==(t=e.text)&&void 0!==t?t:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(0===e.content.childCount)return!0;if(o){var s=!0;return e.content.forEach((function(e){!1!==s&&(mu(e,{ignoreWhitespace:a,checkChildren:o})||(s=!1))})),s}return!1}function vu(e){return e instanceof mn}function gu(e,t,n){var r=e.state.doc.content.size,o=Gs(t,0,r),i=Gs(n,0,r),a=e.coordsAtPos(o),s=e.coordsAtPos(i,-1),u=Math.min(a.top,s.top),l=Math.max(a.bottom,s.bottom),c=Math.min(a.left,s.left),d=Math.max(a.right,s.right),f={top:u,bottom:l,left:c,right:d,width:d-c,height:l-u,x:c,y:u};return rs(rs({},f),{},{toJSON:function(){return f}})}function yu(e,t){var n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){var r=n.filter((function(e){return null==t?void 0:t.includes(e.type.name)}));e.tr.ensureMarks(r)}}var bu=function(e,t){var n=uu((function(e){return e.type===t}))(e.selection);if(!n)return!0;var r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;var o=e.doc.nodeAt(r);return n.node.type!==(null==o?void 0:o.type)||!Bt(e.doc,n.pos)||(e.join(n.pos),!0)},Du=function(e,t){var n=uu((function(e){return e.type===t}))(e.selection);if(!n)return!0;var r=e.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;var o=e.doc.nodeAt(r);return n.node.type!==(null==o?void 0:o.type)||!Bt(e.doc,r)||(e.join(r),!0)},wu=Object.freeze({__proto__:null,blur:function(){return function(e){var t=e.editor,n=e.view;return requestAnimationFrame((function(){var e;t.isDestroyed||(n.dom.blur(),null===(e=null===window||void 0===window?void 0:window.getSelection())||void 0===e||e.removeAllRanges())})),!0}},clearContent:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t){return t.commands.setContent("",e)}},clearNodes:function(){return function(e){var t=e.state,n=e.tr,r=e.dispatch,o=n.selection.ranges;return!r||(o.forEach((function(e){var r=e.$from,o=e.$to;t.doc.nodesBetween(r.pos,o.pos,(function(e,t){if(!e.type.isText){var r=n.doc,o=n.mapping,i=r.resolve(o.map(t)),a=r.resolve(o.map(t+e.nodeSize)),s=i.blockRange(a);if(s){var u=xt(s);if(e.type.isTextblock){var l=i.parent.contentMatchAt(i.index()).defaultType;n.setNodeMarkup(s.start,l)}(u||0===u)&&n.lift(s,u)}}}))})),!0)}},command:function(e){return function(t){return e(t)}},createParagraphNear:function(){return function(e){var t=e.state,n=e.dispatch;return Pa(t,n)}},cut:function(e,t){return function(n){var r=n.editor,o=n.tr,i=r.state.doc.slice(e.from,e.to);o.deleteRange(e.from,e.to);var a=o.mapping.map(t);return o.insert(a,i.content),o.setSelection(new pn(o.doc.resolve(a-1))),!0}},deleteCurrentNode:function(){return function(e){var t=e.tr,n=e.dispatch,r=t.selection.$anchor.node();if(r.content.size>0)return!1;for(var o=t.selection.$anchor,i=o.depth;i>0;i-=1)if(o.node(i).type===r.type){if(n){var a=o.before(i),s=o.after(i);t.delete(a,s).scrollIntoView()}return!0}return!1}},deleteNode:function(e){return function(t){for(var n=t.tr,r=t.state,o=t.dispatch,i=ps(e,r.schema),a=n.selection.$anchor,s=a.depth;s>0;s-=1)if(a.node(s).type===i){if(o){var u=a.before(s),l=a.after(s);n.delete(u,l).scrollIntoView()}return!0}return!1}},deleteRange:function(e){return function(t){var n=t.tr,r=t.dispatch,o=e.from,i=e.to;return r&&n.delete(o,i),!0}},deleteSelection:function(){return function(e){var t=e.state,n=e.dispatch;return ya(t,n)}},enter:function(){return function(e){return e.commands.keyboardShortcut("Enter")}},exitCode:function(){return function(e){var t=e.state,n=e.dispatch;return Ba(t,n)}},extendMarkRange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=$s(e,o.schema),s=r.doc,u=r.selection,l=u.$from,c=u.from,d=u.to;if(i){var f=Vs(l,a,t);if(f&&f.from<=c&&f.to>=d){var p=pn.create(s,f.from,f.to);r.setSelection(p)}}return!0}},first:function(e){return function(t){for(var n="function"==typeof e?e(t):e,r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1}},focus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.editor,o=n.view,i=n.tr,a=n.dispatch;t=rs({scrollIntoView:!0},t);var s=function(){(Ks()||qs())&&o.dom.focus(),requestAnimationFrame((function(){r.isDestroyed||(o.focus(),(null==t?void 0:t.scrollIntoView)&&r.commands.scrollIntoView())}))};if(o.hasFocus()&&null===e||!1===e)return!0;if(a&&null===e&&!Us(r.state.selection))return s(),!0;var u=Ws(i.doc,e)||r.state.selection,l=r.state.selection.eq(u);return a&&(l||i.setSelection(u),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0}},forEach:function(e,t){return function(n){return e.every((function(e,r){return t(e,rs(rs({},n),{},{index:r}))}))}},insertContent:function(e,t){return function(n){var r=n.tr;return n.commands.insertContentAt({from:r.selection.from,to:r.selection.to},e,t)}},insertContentAt:function(e,t,n){return function(r){var o,i=r.tr,a=r.dispatch,s=r.editor;if(a){var u;n=rs({parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1},n);try{u=Xs(t,s.schema,{parseOptions:rs({preserveWhitespace:"full"},n.parseOptions),errorOnInvalidContent:null!==(o=n.errorOnInvalidContent)&&void 0!==o?o:s.options.enableContentCheck})}catch(e){return s.emit("contentError",{editor:s,error:e,disableCollaboration:function(){s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}var l,c="number"==typeof e?{from:e,to:e}:{from:e.from,to:e.to},d=c.from,f=c.to,p=!0,h=!0;if(("type"in u?[u]:u).forEach((function(e){e.check(),p=!!p&&e.isText&&0===e.marks.length,h=!!h&&e.isBlock})),d===f&&h){var m=i.doc.resolve(d).parent;m.isTextblock&&!m.type.spec.code&&!m.childCount&&(d-=1,f+=1)}if(p){if(Array.isArray(t))l=t.map((function(e){return e.text||""})).join("");else if(t instanceof $){var v="";t.forEach((function(e){e.text&&(v+=e.text)})),l=v}else l="object"===Ka(t)&&t&&t.text?t.text:t;i.insertText(l,d,f)}else l=u,i.replaceWith(d,f,l);n.updateSelection&&Ys(i,i.steps.length-1,-1),n.applyInputRules&&i.setMeta("applyInputRules",{from:d,text:l}),n.applyPasteRules&&i.setMeta("applyPasteRules",{from:d,text:l})}return!0}},joinBackward:function(){return function(e){var t=e.state,n=e.dispatch;return Da(t,n)}},joinDown:function(){return function(e){return function(e,t){var n,r=e.selection;if(r instanceof mn){if(r.node.isTextblock||!Bt(e.doc,r.to))return!1;n=r.to}else if(null==(n=Tt(e.doc,r.to,1)))return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0}(e.state,e.dispatch)}},joinForward:function(){return function(e){var t=e.state,n=e.dispatch;return Sa(t,n)}},joinItemBackward:function(){return function(e){var t=e.state,n=e.dispatch,r=e.tr;try{var o=Tt(t.doc,t.selection.$from.pos,-1);return null!=o&&(r.join(o,2),n&&n(r),!0)}catch(e){return!1}}},joinItemForward:function(){return function(e){var t=e.state,n=e.dispatch,r=e.tr;try{var o=Tt(t.doc,t.selection.$from.pos,1);return null!=o&&(r.join(o,2),n&&n(r),!0)}catch(e){return!1}}},joinTextblockBackward:function(){return function(e){return function(e,t){var n=ba(e,void 0);if(!n)return!1;var r=Ea(n);return!!r&&wa(e,r,t)}(e.state,e.dispatch)}},joinTextblockForward:function(){return function(e){return function(e,t){var n=xa(e,void 0);if(!n)return!1;var r=Fa(n);return!!r&&wa(e,r,t)}(e.state,e.dispatch)}},joinUp:function(){return function(e){return function(e,t){var n,r=e.selection,o=r instanceof mn;if(o){if(r.node.isTextblock||!Bt(e.doc,r.from))return!1;n=r.from}else if(null==(n=Tt(e.doc,r.from,-1)))return!1;if(t){var i=e.tr.join(n);o&&i.setSelection(mn.create(i.doc,n-e.doc.resolve(n).nodeBefore.nodeSize)),t(i.scrollIntoView())}return!0}(e.state,e.dispatch)}},keyboardShortcut:function(e){return function(t){var n=t.editor,r=t.view,o=t.tr,i=t.dispatch,a=function(e){var t,n,r,o,i=e.split(/-(?!$)/),a=i[i.length-1];"Space"===a&&(a=" ");for(var s=0;s<i.length-1;s+=1){var u=i[s];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))t=!0;else if(/^(c|ctrl|control)$/i.test(u))n=!0;else if(/^s(hift)?$/i.test(u))r=!0;else{if(!/^mod$/i.test(u))throw new Error("Unrecognized modifier name: ".concat(u));Ks()||Qs()?o=!0:n=!0}}return t&&(a="Alt-".concat(a)),n&&(a="Ctrl-".concat(a)),o&&(a="Meta-".concat(a)),r&&(a="Shift-".concat(a)),a}(e).split(/-(?!$)/),s=a.find((function(e){return!["Alt","Ctrl","Meta","Shift"].includes(e)})),u=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),l=n.captureTransaction((function(){r.someProp("handleKeyDown",(function(e){return e(r,u)}))}));return null==l||l.steps.forEach((function(e){var t=e.map(o.mapping);t&&i&&o.maybeStep(t)})),!0}},lift:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.dispatch;return!!eu(r,ps(e,r.schema),t)&&function(e,t){var n=e.selection,r=n.$from,o=n.$to,i=r.blockRange(o),a=i&&xt(i);return null!=a&&(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)}(r,o)}},liftEmptyBlock:function(){return function(e){var t=e.state,n=e.dispatch;return Ta(t,n)}},liftListItem:function(e){return function(t){var n,r=t.state,o=t.dispatch;return(n=ps(e,r.schema),function(e,t){var r=e.selection,o=r.$from,i=r.$to,a=o.blockRange(i,(function(e){return e.childCount>0&&e.firstChild.type==n}));return!!a&&(!t||(o.node(a.depth-1).type==n?function(e,t,n,r){var o=e.tr,i=r.end,a=r.$to.end(r.depth);i<a&&(o.step(new wt(i-1,a,i,a,new J($.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new de(o.doc.resolve(r.$from.pos),o.doc.resolve(a),r.depth));var s=xt(r);if(null==s)return!1;o.lift(r,s);var u=o.doc.resolve(o.mapping.map(i,-1)-1);return Bt(o.doc,u.pos)&&u.nodeBefore.type==u.nodeAfter.type&&o.join(u.pos),t(o.scrollIntoView()),!0}(e,t,n,a):function(e,t,n){for(var r=e.tr,o=n.parent,i=n.end,a=n.endIndex-1,s=n.startIndex;a>s;a--)i-=o.child(a).nodeSize,r.delete(i-1,i+1);var u=r.doc.resolve(n.start),l=u.nodeAfter;if(r.mapping.map(n.end)!=n.start+u.nodeAfter.nodeSize)return!1;var c=0==n.startIndex,d=n.endIndex==o.childCount,f=u.node(-1),p=u.index(-1);if(!f.canReplace(p+(c?0:1),p+1,l.content.append(d?$.empty:$.from(o))))return!1;var h=u.pos,m=h+l.nodeSize;return r.step(new wt(h-(c?1:0),m+(d?1:0),h+1,m-1,new J((c?$.empty:$.from(o.copy($.empty))).append(d?$.empty:$.from(o.copy($.empty))),c?0:1,d?0:1),c?0:1)),t(r.scrollIntoView()),!0}(e,t,a)))})(r,o)}},newlineInCode:function(){return function(e){var t=e.state,n=e.dispatch;return Oa(t,n)}},resetAttributes:function(e,t){return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=null,s=null,u=tu("string"==typeof e?e:e.name,o.schema);return!!u&&("node"===u&&(a=ps(e,o.schema)),"mark"===u&&(s=$s(e,o.schema)),i&&r.selection.ranges.forEach((function(e){o.doc.nodesBetween(e.$from.pos,e.$to.pos,(function(e,n){a&&a===e.type&&r.setNodeMarkup(n,void 0,nu(e.attrs,t)),s&&e.marks.length&&e.marks.forEach((function(o){s===o.type&&r.addMark(n,n+e.nodeSize,s.create(nu(o.attrs,t)))}))}))})),!0)}},scrollIntoView:function(){return function(e){var t=e.tr;return e.dispatch&&t.scrollIntoView(),!0}},selectAll:function(){return function(e){var t=e.tr;if(e.dispatch){var n=new gn(t.doc);t.setSelection(n)}return!0}},selectNodeBackward:function(){return function(e){var t=e.state,n=e.dispatch;return ka(t,n)}},selectNodeForward:function(){return function(e){var t=e.state,n=e.dispatch;return Aa(t,n)}},selectParentNode:function(){return function(e){return function(e,t){var n,r=e.selection,o=r.$from,i=r.to,a=o.sharedDepth(i);return 0!=a&&(n=o.before(a),t&&t(e.tr.setSelection(mn.create(e.doc,n))),!0)}(e.state,e.dispatch)}},selectTextblockEnd:function(){return function(e){var t=e.state,n=e.dispatch;return Ra(t,n)}},selectTextblockStart:function(){return function(e){var t=e.state,n=e.dispatch;return _a(t,n)}},setContent:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(o){var i,a,s=o.editor,u=o.tr,l=o.dispatch,c=o.commands,d=u.doc;if("full"!==n.preserveWhitespace){var f=ru(e,s.schema,n,{errorOnInvalidContent:null!==(i=r.errorOnInvalidContent)&&void 0!==i?i:s.options.enableContentCheck});return l&&u.replaceWith(0,d.content.size,f).setMeta("preventUpdate",!t),!0}return l&&u.setMeta("preventUpdate",!t),c.insertContentAt({from:0,to:d.content.size},e,{parseOptions:n,errorOnInvalidContent:null!==(a=r.errorOnInvalidContent)&&void 0!==a?a:s.options.enableContentCheck})}},setMark:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=r.selection,s=a.empty,u=a.ranges,l=$s(e,o.schema);if(i)if(s){var c=ou(o,l);r.addStoredMark(l.create(rs(rs({},c),t)))}else u.forEach((function(e){var n=e.$from.pos,i=e.$to.pos;o.doc.nodesBetween(n,i,(function(e,o){var a=Math.max(o,n),s=Math.min(o+e.nodeSize,i);e.marks.find((function(e){return e.type===l}))?e.marks.forEach((function(e){l===e.type&&r.addMark(a,s,l.create(rs(rs({},e.attrs),t)))})):r.addMark(a,s,l.create(t))}))}));return function(e,t,n){var r,o=t.selection,i=null;if(Us(o)&&(i=o.$cursor),i){var a=null!==(r=e.storedMarks)&&void 0!==r?r:i.marks();return!!n.isInSet(a)||!a.some((function(e){return e.type.excludes(n)}))}return o.ranges.some((function(t){var r=t.$from,o=t.$to,i=0===r.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(r.pos,o.pos,(function(e,t,r){if(i)return!1;if(e.isInline){var o=!r||r.type.allowsMarkType(n),a=!!n.isInSet(e.marks)||!e.marks.some((function(e){return e.type.excludes(n)}));i=o&&a}return!i})),i}))}(o,r,l)}},setMeta:function(e,t){return function(n){return n.tr.setMeta(e,t),!0}},setNode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r,o=n.state,i=n.dispatch,a=n.chain,s=ps(e,o.schema);return o.selection.$anchor.sameParent(o.selection.$head)&&(r=o.selection.$anchor.parent.attrs),s.isTextblock?a().command((function(e){var n=e.commands;return!!La(s,rs(rs({},r),t))(o)||n.clearNodes()})).command((function(e){var n=e.state;return La(s,rs(rs({},r),t))(n,i)})).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)}},setNodeSelection:function(e){return function(t){var n=t.tr;if(t.dispatch){var r=n.doc,o=Gs(e,0,r.content.size),i=mn.create(r,o);n.setSelection(i)}return!0}},setTextSelection:function(e){return function(t){var n=t.tr;if(t.dispatch){var r=n.doc,o="number"==typeof e?{from:e,to:e}:e,i=o.from,a=o.to,s=pn.atStart(r).from,u=pn.atEnd(r).to,l=Gs(i,s,u),c=Gs(a,s,u),d=pn.create(r,l,c);n.setSelection(d)}return!0}},sinkListItem:function(e){return function(t){var n,r=t.state,o=t.dispatch,i=ps(e,r.schema);return(n=i,function(e,t){var r=e.selection,o=r.$from,i=r.$to,a=o.blockRange(i,(function(e){return e.childCount>0&&e.firstChild.type==n}));if(!a)return!1;var s=a.startIndex;if(0==s)return!1;var u=a.parent,l=u.child(s-1);if(l.type!=n)return!1;if(t){var c=l.lastChild&&l.lastChild.type==u.type,d=$.from(c?n.create():null),f=new J($.from(n.create(null,$.from(u.type.create(null,d)))),c?3:1,0),p=a.start,h=a.end;t(e.tr.step(new wt(p-(c?3:1),h,p,h,f,1,!0)).scrollIntoView())}return!0})(r,o)}},splitBlock:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).keepMarks,t=void 0===e||e;return function(e){var n=e.tr,r=e.state,o=e.dispatch,i=e.editor,a=n.selection,s=n.doc,u=a.$from,l=a.$to,c=fu(i.extensionManager.attributes,u.node().type.name,u.node().attrs);if(a instanceof mn&&a.node.isBlock)return!(!u.parentOffset||!Mt(s,u.pos)||(o&&(t&&yu(r,i.extensionManager.splittableMarks),n.split(u.pos).scrollIntoView()),0));if(!u.parent.isBlock)return!1;var d=l.parentOffset===l.parent.content.size,f=0===u.depth?void 0:function(e){for(var t=0;t<e.edgeCount;t+=1){var n=e.edge(t).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(u.node(-1).contentMatchAt(u.indexAfter(-1))),p=d&&f?[{type:f,attrs:c}]:void 0,h=Mt(n.doc,n.mapping.map(u.pos),1,p);if(p||h||!Mt(n.doc,n.mapping.map(u.pos),1,f?[{type:f}]:void 0)||(h=!0,p=f?[{type:f,attrs:c}]:void 0),o){if(h&&(a instanceof pn&&n.deleteSelection(),n.split(n.mapping.map(u.pos),1,p),f&&!d&&!u.parentOffset&&u.parent.type!==f)){var m=n.mapping.map(u.before()),v=n.doc.resolve(m);u.node(-1).canReplaceWith(v.index(),v.index()+1,f)&&n.setNodeMarkup(n.mapping.map(u.before()),f)}t&&yu(r,i.extensionManager.splittableMarks),n.scrollIntoView()}return h}},splitListItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r,o=n.tr,i=n.state,a=n.dispatch,s=n.editor,u=ps(e,i.schema),l=i.selection,c=l.$from,d=l.$to,f=i.selection.node;if(f&&f.isBlock||c.depth<2||!c.sameParent(d))return!1;var p=c.node(-1);if(p.type!==u)return!1;var h=s.extensionManager.attributes;if(0===c.parent.content.size&&c.node(-1).childCount===c.indexAfter(-1)){if(2===c.depth||c.node(-3).type!==u||c.index(-2)!==c.node(-2).childCount-1)return!1;if(a){for(var m=$.empty,v=c.index(-1)?1:c.index(-2)?2:3,g=c.depth-v;g>=c.depth-3;g-=1)m=$.from(c.node(g).copy(m));var y=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,b=rs(rs({},fu(h,c.node().type.name,c.node().attrs)),t),D=(null===(r=u.contentMatch.defaultType)||void 0===r?void 0:r.createAndFill(b))||void 0;m=m.append($.from(u.createAndFill(null,D)||void 0));var w=c.before(c.depth-(v-1));o.replace(w,c.after(-y),new J(m,4-v,0));var C=-1;o.doc.nodesBetween(w,o.doc.content.size,(function(e,t){if(C>-1)return!1;e.isTextblock&&0===e.content.size&&(C=t+1)})),C>-1&&o.setSelection(pn.near(o.doc.resolve(C))),o.scrollIntoView()}return!0}var k=d.pos===c.end()?p.contentMatchAt(0).defaultType:null,E=rs(rs({},fu(h,p.type.name,p.attrs)),t),x=rs(rs({},fu(h,c.node().type.name,c.node().attrs)),t);o.delete(c.pos,d.pos);var S=k?[{type:u,attrs:E},{type:k,attrs:x}]:[{type:u,attrs:E}];if(!Mt(o.doc,c.pos,2))return!1;if(a){var A=i.selection,F=i.storedMarks,O=s.extensionManager.splittableMarks,M=F||A.$to.parentOffset&&A.$from.marks();if(o.split(c.pos,2,S).scrollIntoView(),!M||!a)return!0;var B=M.filter((function(e){return O.includes(e.type.name)}));o.ensureMarks(B)}return!0}},toggleList:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(o){var i=o.editor,a=o.tr,s=o.state,u=o.dispatch,l=o.chain,c=o.commands,d=o.can,f=i.extensionManager,p=f.extensions,h=f.splittableMarks,m=ps(e,s.schema),v=ps(t,s.schema),g=s.selection,y=s.storedMarks,b=g.$from,D=g.$to,w=b.blockRange(D),C=y||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;var k=uu((function(e){return hu(e.type.name,p)}))(g);if(w.depth>=1&&k&&w.depth-k.depth<=1){if(k.node.type===m)return c.liftListItem(v);if(hu(k.node.type.name,p)&&m.validContent(k.node.content)&&u)return l().command((function(){return a.setNodeMarkup(k.pos,m),!0})).command((function(){return bu(a,m)})).command((function(){return Du(a,m)})).run()}return n&&C&&u?l().command((function(){var e=d().wrapInList(m,r),t=C.filter((function(e){return h.includes(e.type.name)}));return a.ensureMarks(t),!!e||c.clearNodes()})).wrapInList(m,r).command((function(){return bu(a,m)})).command((function(){return Du(a,m)})).run():l().command((function(){return!!d().wrapInList(m,r)||c.clearNodes()})).wrapInList(m,r).command((function(){return bu(a,m)})).command((function(){return Du(a,m)})).run()}},toggleMark:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var o=r.state,i=r.commands,a=n.extendEmptyMarkRange,s=void 0!==a&&a,u=$s(e,o.schema);return pu(o,u,t)?i.unsetMark(u,{extendEmptyMarkRange:s}):i.setMark(u,t)}},toggleNode:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var o,i=r.state,a=r.commands,s=ps(e,i.schema),u=ps(t,i.schema),l=eu(i,s,n);return i.selection.$anchor.sameParent(i.selection.$head)&&(o=i.selection.$anchor.parent.attrs),l?a.setNode(u,o):a.setNode(s,rs(rs({},o),n))}},toggleWrap:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.commands,i=ps(e,r.schema);return eu(r,i,t)?o.lift(i):o.wrapIn(i,t)}},undoInputRule:function(){return function(e){for(var t=e.state,n=e.dispatch,r=t.plugins,o=0;o<r.length;o+=1){var i=r[o],a=void 0;if(i.spec.isInputRules&&(a=i.getState(t))){if(n){for(var s=t.tr,u=a.transform,l=u.steps.length-1;l>=0;l-=1)s.step(u.steps[l].invert(u.docs[l]));if(a.text){var c=s.doc.resolve(a.from).marks();s.replaceWith(a.from,a.to,t.schema.text(a.text,c))}else s.delete(a.from,a.to)}return!0}}return!1}},unsetAllMarks:function(){return function(e){var t=e.tr,n=e.dispatch,r=t.selection,o=r.empty,i=r.ranges;return o||n&&i.forEach((function(e){t.removeMark(e.$from.pos,e.$to.pos)})),!0}},unsetMark:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r,o=n.tr,i=n.state,a=n.dispatch,s=t.extendEmptyMarkRange,u=void 0!==s&&s,l=o.selection,c=$s(e,i.schema),d=l.$from,f=l.empty,p=l.ranges;if(!a)return!0;if(f&&u){var h=l.from,m=l.to,v=null===(r=d.marks().find((function(e){return e.type===c})))||void 0===r?void 0:r.attrs,g=Vs(d,c,v);g&&(h=g.from,m=g.to),o.removeMark(h,m,c)}else p.forEach((function(e){o.removeMark(e.$from.pos,e.$to.pos,c)}));return o.removeStoredMark(c),!0}},updateAttributes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=null,s=null,u=tu("string"==typeof e?e:e.name,o.schema);return!!u&&("node"===u&&(a=ps(e,o.schema)),"mark"===u&&(s=$s(e,o.schema)),i&&r.selection.ranges.forEach((function(e){var n,i,u,l,c=e.$from.pos,d=e.$to.pos;r.selection.empty?o.doc.nodesBetween(c,d,(function(e,t){a&&a===e.type&&(u=Math.max(t,c),l=Math.min(t+e.nodeSize,d),n=t,i=e)})):o.doc.nodesBetween(c,d,(function(e,o){o<c&&a&&a===e.type&&(u=Math.max(o,c),l=Math.min(o+e.nodeSize,d),n=o,i=e),o>=c&&o<=d&&(a&&a===e.type&&r.setNodeMarkup(o,void 0,rs(rs({},e.attrs),t)),s&&e.marks.length&&e.marks.forEach((function(n){if(s===n.type){var i=Math.max(o,c),a=Math.min(o+e.nodeSize,d);r.addMark(i,a,s.create(rs(rs({},n.attrs),t)))}})))})),i&&(void 0!==n&&r.setNodeMarkup(n,void 0,rs(rs({},i.attrs),t)),s&&i.marks.length&&i.marks.forEach((function(e){s===e.type&&r.addMark(u,l,s.create(rs(rs({},e.attrs),t)))})))})),!0)}},wrapIn:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.dispatch;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){var o=n.selection,i=o.$from,a=o.$to,s=i.blockRange(a),u=s&&St(s,e,t);return!!u&&(r&&r(n.tr.wrap(s,u).scrollIntoView()),!0)}}(ps(e,r.schema),t)(r,o)}},wrapInList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.dispatch;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){var o=n.selection,i=o.$from,a=o.$to,s=i.blockRange(a);if(!s)return!1;var u=r?n.tr:null;return!!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=!1,i=t,a=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&0==t.startIndex){if(0==t.$from.index(t.depth-1))return!1;var s=a.resolve(t.start-2);i=new de(s,s,t.depth),t.endIndex<t.parent.childCount&&(t=new de(t.$from,a.resolve(t.$to.end(t.depth)),t.depth)),o=!0}var u=St(i,n,r,t);return!!u&&(e&&function(e,t,n,r,o){for(var i=$.empty,a=n.length-1;a>=0;a--)i=$.from(n[a].type.create(n[a].attrs,i));e.step(new wt(t.start-(r?2:0),t.end,t.start,t.end,new J(i,0,0),n.length,!0));for(var s=0,u=0;u<n.length;u++)n[u].type==o&&(s=u+1);for(var l=n.length-s,c=t.start+n.length-(r?2:0),d=t.parent,f=t.startIndex,p=t.endIndex,h=!0;f<p;f++,h=!1)!h&&Mt(e.doc,c,l)&&(e.split(c,l),c+=2*l),c+=d.child(f).nodeSize}(e,t,u,o,n),!0)}(u,s,e,t)&&(r&&r(u.scrollIntoView()),!0)}}(ps(e,r.schema),t)(r,o)}}}),Cu=js.create({name:"commands",addCommands:function(){return rs({},wu)}}),ku=js.create({name:"drop",addProseMirrorPlugins:function(){var e=this;return[new Fn({key:new Bn("tiptapDrop"),props:{handleDrop:function(t,n,r,o){e.editor.emit("drop",{editor:e.editor,event:n,slice:r,moved:o})}}})]}}),Eu=js.create({name:"editable",addProseMirrorPlugins:function(){var e=this;return[new Fn({key:new Bn("editable"),props:{editable:function(){return e.editor.options.editable}}})]}}),xu=new Bn("focusEvents"),Su=js.create({name:"focusEvents",addProseMirrorPlugins:function(){var e=this.editor;return[new Fn({key:xu,props:{handleDOMEvents:{focus:function(t,n){e.isFocused=!0;var r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:function(t,n){e.isFocused=!1;var r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),Au=js.create({name:"keymap",addKeyboardShortcuts:function(){var e=this,t=function(){return e.editor.commands.first((function(e){var t=e.commands;return[function(){return t.undoInputRule()},function(){return t.command((function(e){var n=e.tr,r=n.selection,o=n.doc,i=r.empty,a=r.$anchor,s=a.pos,u=a.parent,l=a.parent.isTextblock&&s>0?n.doc.resolve(s-1):a,c=l.parent.type.spec.isolating,d=a.pos-a.parentOffset,f=c&&1===l.parent.childCount?d===a.pos:ln.atStart(o).from===s;return!(!i||!u.type.isTextblock||u.textContent.length||!f||f&&"paragraph"===a.parent.type.name)&&t.clearNodes()}))},function(){return t.deleteSelection()},function(){return t.joinBackward()},function(){return t.selectNodeBackward()}]}))},n=function(){return e.editor.commands.first((function(e){var t=e.commands;return[function(){return t.deleteSelection()},function(){return t.deleteCurrentNode()},function(){return t.joinForward()},function(){return t.selectNodeForward()}]}))},r={Enter:function(){return e.editor.commands.first((function(e){var t=e.commands;return[function(){return t.newlineInCode()},function(){return t.createParagraphNear()},function(){return t.liftEmptyBlock()},function(){return t.splitBlock()}]}))},"Mod-Enter":function(){return e.editor.commands.exitCode()},Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:n,"Mod-Delete":n,"Mod-a":function(){return e.editor.commands.selectAll()}},o=rs({},r),i=rs(rs({},r),{},{"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":n,"Ctrl-Alt-Backspace":n,"Alt-Delete":n,"Alt-d":n,"Ctrl-a":function(){return e.editor.commands.selectTextblockStart()},"Ctrl-e":function(){return e.editor.commands.selectTextblockEnd()}});return Ks()||Qs()?i:o},addProseMirrorPlugins:function(){var e=this;return[new Fn({key:new Bn("clearDocument"),appendTransaction:function(t,n,r){if(!t.some((function(e){return e.getMeta("composition")}))){var o=t.some((function(e){return e.docChanged}))&&!n.doc.eq(r.doc),i=t.some((function(e){return e.getMeta("preventClearDocument")}));if(o&&!i){var a=n.selection,s=a.empty,u=a.from,l=a.to,c=ln.atStart(n.doc).from,d=ln.atEnd(n.doc).to;if(!s&&u===c&&l===d&&mu(r.doc)){var f=r.tr,p=ss({state:r,transaction:f});if(new us({editor:e.editor,state:p}).commands.clearNodes(),f.steps.length)return f}}}}})]}}),Fu=js.create({name:"paste",addProseMirrorPlugins:function(){var e=this;return[new Fn({key:new Bn("tiptapPaste"),props:{handlePaste:function(t,n,r){e.editor.emit("paste",{editor:e.editor,event:n,slice:r})}}})]}}),Ou=js.create({name:"tabindex",addProseMirrorPlugins:function(){var e=this;return[new Fn({key:new Bn("tabindex"),props:{attributes:function(){return e.editor.isEditable?{tabindex:"0"}:{}}}})]}}),Mu=Object.freeze({__proto__:null,ClipboardTextSerializer:Ls,Commands:Cu,Drop:ku,Editable:Eu,FocusEvents:Su,Keymap:Au,Paste:Fu,Tabindex:Ou,focusEventsPluginKey:xu}),Bu=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Qa(this,e),this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=o}return ts(e,[{key:"name",get:function(){return this.node.type.name}},{key:"node",get:function(){return this.currentNode||this.resolvedPos.node()}},{key:"element",get:function(){return this.editor.view.domAtPos(this.pos).node}},{key:"depth",get:function(){var e;return null!==(e=this.actualDepth)&&void 0!==e?e:this.resolvedPos.depth}},{key:"pos",get:function(){return this.resolvedPos.pos}},{key:"content",get:function(){return this.node.content},set:function(e){var t=this.from,n=this.to;if(this.isBlock){if(0===this.content.size)return void console.error("You can’t set content on a block node. Tried to set content on ".concat(this.name," at ").concat(this.pos));t=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:t,to:n},e)}},{key:"attributes",get:function(){return this.node.attrs}},{key:"textContent",get:function(){return this.node.textContent}},{key:"size",get:function(){return this.node.nodeSize}},{key:"from",get:function(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}},{key:"range",get:function(){return{from:this.from,to:this.to}}},{key:"to",get:function(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}},{key:"parent",get:function(){if(0===this.depth)return null;var t=this.resolvedPos.start(this.resolvedPos.depth-1);return new e(this.resolvedPos.doc.resolve(t),this.editor)}},{key:"before",get:function(){var t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new e(t,this.editor)}},{key:"after",get:function(){var t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new e(t,this.editor)}},{key:"children",get:function(){var t=this,n=[];return this.node.content.forEach((function(r,o){var i=r.isBlock&&!r.isTextblock,a=r.isAtom&&!r.isText,s=t.pos+o+(a?0:1),u=t.resolvedPos.doc.resolve(s);if(i||!(u.depth<=t.depth)){var l=new e(u,t.editor,i,i?r:null);i&&(l.actualDepth=t.depth+1),n.push(new e(u,t.editor,i,i?r:null))}})),n}},{key:"firstChild",get:function(){return this.children[0]||null}},{key:"lastChild",get:function(){var e=this.children;return e[e.length-1]||null}},{key:"closest",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=this.parent;r&&!n;){if(r.node.type.name===e)if(Object.keys(t).length>0)for(var o=r.node.attrs,i=Object.keys(t),a=0;a<i.length;a+=1){var s=i[a];if(o[s]!==t[s])break}else n=r;r=r.parent}return n}},{key:"querySelector",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.querySelectorAll(e,t,!0)[0]||null}},{key:"querySelectorAll",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];if(!this.children||0===this.children.length)return r;var o=Object.keys(t);return this.children.forEach((function(i){if(!(n&&r.length>0)){if(i.node.type.name===e){var a=o.every((function(e){return t[e]===i.node.attrs[e]}));a&&r.push(i)}n&&r.length>0||(r=r.concat(i.querySelectorAll(e,t,n)))}})),r}},{key:"setAttribute",value:function(e){var t=this.editor.state.tr;t.setNodeMarkup(this.from,void 0,rs(rs({},this.node.attrs),e)),this.editor.view.dispatch(t)}}])}(),Pu=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Qa(this,t),(e=function(e,t,n){return t=Wa(t),function(e,t){if(t&&("object"==Ka(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ga()?Reflect.construct(t,n||[],Wa(e).constructor):t.apply(e,n))}(this,t)).isFocused=!1,e.isInitialized=!1,e.extensionStorage={},e.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:function(){return null},onCreate:function(){return null},onUpdate:function(){return null},onSelectionUpdate:function(){return null},onTransaction:function(){return null},onFocus:function(){return null},onBlur:function(){return null},onDestroy:function(){return null},onContentError:function(e){throw e.error},onPaste:function(){return null},onDrop:function(){return null}},e.isCapturingTransaction=!1,e.capturedTransaction=null,e.setOptions(n),e.createExtensionManager(),e.createCommandManager(),e.createSchema(),e.on("beforeCreate",e.options.onBeforeCreate),e.emit("beforeCreate",{editor:e}),e.on("contentError",e.options.onContentError),e.createView(),e.injectCSS(),e.on("create",e.options.onCreate),e.on("update",e.options.onUpdate),e.on("selectionUpdate",e.options.onSelectionUpdate),e.on("transaction",e.options.onTransaction),e.on("focus",e.options.onFocus),e.on("blur",e.options.onBlur),e.on("destroy",e.options.onDestroy),e.on("drop",(function(t){var n=t.event,r=t.slice,o=t.moved;return e.options.onDrop(n,r,o)})),e.on("paste",(function(t){var n=t.event,r=t.slice;return e.options.onPaste(n,r)})),window.setTimeout((function(){e.isDestroyed||(e.commands.focus(e.options.autofocus),e.emit("create",{editor:e}),e.isInitialized=!0)}),0),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qa(e,t)}(t,e),ts(t,[{key:"storage",get:function(){return this.extensionStorage}},{key:"commands",get:function(){return this.commandManager.commands}},{key:"chain",value:function(){return this.commandManager.chain()}},{key:"can",value:function(){return this.commandManager.can()}},{key:"injectCSS",value:function(){this.options.injectCSS&&document&&(this.css=function(e,t){var n=document.querySelector("style[data-tiptap-style".concat("","]"));if(null!==n)return n;var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.setAttribute("data-tiptap-style".concat(""),""),r.innerHTML='.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 0 !important;\n  height: 0 !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',document.getElementsByTagName("head")[0].appendChild(r),r}(0,this.options.injectNonce))}},{key:"setOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=rs(rs({},this.options),e),this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}},{key:"setEditable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}},{key:"isEditable",get:function(){return this.options.editable&&this.view&&this.view.editable}},{key:"state",get:function(){return this.view.state}},{key:"registerPlugin",value:function(e,t){var n=vs(t)?t(e,Ja(this.state.plugins)):[].concat(Ja(this.state.plugins),[e]),r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}},{key:"unregisterPlugin",value:function(e){if(!this.isDestroyed){var t=this.state.plugins,n=t;if([].concat(e).forEach((function(e){var t="string"==typeof e?"".concat(e,"$"):e.key;n=n.filter((function(e){return!e.key.startsWith(t)}))})),t.length!==n.length){var r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}}}},{key:"createExtensionManager",value:function(){var e,t,n=this,r=this.options.enableCoreExtensions?[Eu,Ls.configure({blockSeparator:null===(t=null===(e=this.options.coreExtensionOptions)||void 0===e?void 0:e.clipboardTextSerializer)||void 0===t?void 0:t.blockSeparator}),Cu,Su,Au,Ou,ku,Fu].filter((function(e){return"object"!==Ka(n.options.enableCoreExtensions)||!1!==n.options.enableCoreExtensions[e.name]})):[],o=[].concat(Ja(r),Ja(this.options.extensions)).filter((function(e){return["extension","node","mark"].includes(null==e?void 0:e.type)}));this.extensionManager=new Ns(o,this)}},{key:"createCommandManager",value:function(){this.commandManager=new us({editor:this})}},{key:"createSchema",value:function(){this.schema=this.extensionManager.schema}},{key:"createView",value:function(){var e,t,n=this;try{t=ru(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error&&["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message)))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:function(){n.storage.collaboration&&(n.storage.collaboration.isDisabled=!0),n.options.extensions=n.options.extensions.filter((function(e){return"collaboration"!==e.name})),n.createExtensionManager()}}),t=ru(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}var r=Ws(t,this.options.autofocus);this.view=new ta(this.options.element,rs(rs({},this.options.editorProps),{},{attributes:rs({role:"textbox"},null===(e=this.options.editorProps)||void 0===e?void 0:e.attributes),dispatchTransaction:this.dispatchTransaction.bind(this),state:Sn.create({doc:t,selection:r||void 0})}));var o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass(),this.view.dom.editor=this}},{key:"createNodeViews",value:function(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}},{key:"prependClass",value:function(){this.view.dom.className="tiptap ".concat(this.view.dom.className)}},{key:"captureTransaction",value:function(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;var t=this.capturedTransaction;return this.capturedTransaction=null,t}},{key:"dispatchTransaction",value:function(e){var t=this;if(!this.view.isDestroyed){if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach((function(e){var n;return null===(n=t.capturedTransaction)||void 0===n?void 0:n.step(e)})):void(this.capturedTransaction=e);var n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});var o=e.getMeta("focus"),i=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:e})}}},{key:"getAttributes",value:function(e){return lu(this.state,e)}},{key:"isActive",value:function(e,t){var n="string"==typeof e?e:null,r="string"==typeof e?t:e;return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return eu(e,null,n)||pu(e,null,n);var r=tu(t,e.schema);return"node"===r?eu(e,t,n):"mark"===r&&pu(e,t,n)}(this.state,n,r)}},{key:"getJSON",value:function(){return this.state.doc.toJSON()}},{key:"getHTML",value:function(){return ks(this.state.doc.content,this.schema)}},{key:"getText",value:function(e){var t=e||{},n=t.blockSeparator,r=void 0===n?"\n\n":n,o=t.textSerializers,i=void 0===o?{}:o;return function(e,t){return _s(e,{from:0,to:e.content.size},t)}(this.state.doc,{blockSeparator:r,textSerializers:rs(rs({},Rs(this.schema)),i)})}},{key:"isEmpty",get:function(){return mu(this.state.doc)}},{key:"getCharacterCount",value:function(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}},{key:"destroy",value:function(){if(this.emit("destroy"),this.view){var e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}},{key:"isDestroyed",get:function(){var e;return!(null===(e=this.view)||void 0===e?void 0:e.docView)}},{key:"$node",value:function(e,t){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelector(e,t))||null}},{key:"$nodes",value:function(e,t){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelectorAll(e,t))||null}},{key:"$pos",value:function(e){var t=this.state.doc.resolve(e);return new Bu(t,this)}},{key:"$doc",get:function(){return this.$pos(0)}}])}(ls);function Tu(e){return new xs({find:e.find,handler:function(t){var n=t.state,r=t.range,o=t.match,i=gs(e.getAttributes,void 0,o);if(!1===i||null===i)return null;var a=n.tr,s=o[o.length-1],u=o[0];if(s){var l=u.search(/\S/),c=r.from+u.indexOf(s),d=c+s.length;if(du(r.from,r.to,n.doc).filter((function(t){return t.mark.type.excluded.find((function(n){return n===e.type&&n!==t.mark.type}))})).filter((function(e){return e.to>c})).length)return null;d<r.to&&a.delete(d,r.to),c>r.from&&a.delete(r.from+l,c);var f=r.from+l+s.length;a.addMark(r.from+l,f,e.type.create(i||{})),a.removeStoredMark(e.type)}}})}var Nu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Qa(this,e),this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=rs(rs({},this.config),t),this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=gs(cs(this,"addOptions",{name:this.name}))),this.storage=gs(cs(this,"addStorage",{name:this.name,options:this.options}))||{}}return ts(e,[{key:"configure",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.extend(rs(rs({},this.config),{},{addOptions:function(){return Os(e.options,t)}}));return n.name=this.name,n.parent=this.parent,n}},{key:"extend",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new e(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(n.name,'".')),n.options=gs(cs(n,"addOptions",{name:n.name})),n.storage=gs(cs(n,"addStorage",{name:n.name,options:n.options})),n}}],[{key:"create",value:function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}}])}(),ju=function(){return ts((function e(t,n,r){Qa(this,e),this.isDragging=!1,this.component=t,this.editor=n.editor,this.options=rs({stopEvent:null,ignoreMutation:null},r),this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.innerDecorations=n.innerDecorations,this.view=n.view,this.HTMLAttributes=n.HTMLAttributes,this.getPos=n.getPos,this.mount()}),[{key:"mount",value:function(){}},{key:"dom",get:function(){return this.editor.view.dom}},{key:"contentDOM",get:function(){return null}},{key:"onDragStart",value:function(e){var t,n,r,o,i,a,s,u=this.editor.view,l=e.target,c=3===l.nodeType?null===(t=l.parentElement)||void 0===t?void 0:t.closest("[data-drag-handle]"):l.closest("[data-drag-handle]");if(this.dom&&!(null===(n=this.contentDOM)||void 0===n?void 0:n.contains(l))&&c){var d=0,f=0;if(this.dom!==c){var p=this.dom.getBoundingClientRect(),h=c.getBoundingClientRect(),m=null!==(r=e.offsetX)&&void 0!==r?r:null===(o=e.nativeEvent)||void 0===o?void 0:o.offsetX,v=null!==(i=e.offsetY)&&void 0!==i?i:null===(a=e.nativeEvent)||void 0===a?void 0:a.offsetY;d=h.x-p.x+m,f=h.y-p.y+v}var g=this.dom.cloneNode(!0);null===(s=e.dataTransfer)||void 0===s||s.setDragImage(g,d,f);var y=this.getPos();if("number"==typeof y){var b=mn.create(u.state.doc,y),D=u.state.tr.setSelection(b);u.dispatch(D)}}}},{key:"stopEvent",value:function(e){var t,n=this;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:e});var r=e.target;if(!this.dom.contains(r)||(null===(t=this.contentDOM)||void 0===t?void 0:t.contains(r)))return!1;var o=e.type.startsWith("drag"),i="drop"===e.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!i&&!o)return!0;var a=this.editor.isEditable,s=this.isDragging,u=!!this.node.type.spec.draggable,l=mn.isSelectable(this.node),c="copy"===e.type,d="paste"===e.type,f="cut"===e.type,p="mousedown"===e.type;if(!u&&l&&o&&e.target===this.dom&&e.preventDefault(),u&&o&&!s&&e.target===this.dom)return e.preventDefault(),!1;if(u&&a&&!s&&p){var h=r.closest("[data-drag-handle]");h&&(this.dom===h||this.dom.contains(h))&&(this.isDragging=!0,document.addEventListener("dragend",(function(){n.isDragging=!1}),{once:!0}),document.addEventListener("drop",(function(){n.isDragging=!1}),{once:!0}),document.addEventListener("mouseup",(function(){n.isDragging=!1}),{once:!0}))}return!(s||i||c||d||f||p&&l)}},{key:"ignoreMutation",value:function(e){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:e}):!(!this.node.isLeaf&&!this.node.isAtom)||"selection"!==e.type&&(!(this.dom.contains(e.target)&&"childList"===e.type&&(Ks()||qs())&&this.editor.isFocused&&[].concat(Ja(Array.from(e.addedNodes)),Ja(Array.from(e.removedNodes))).every((function(e){return e.isContentEditable})))&&(this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target))))}},{key:"updateAttributes",value:function(e){var t=this;this.editor.commands.command((function(n){var r=n.tr,o=t.getPos();return"number"==typeof o&&(r.setNodeMarkup(o,void 0,rs(rs({},t.node.attrs),e)),!0)}))}},{key:"deleteNode",value:function(){var e=this.getPos();if("number"==typeof e){var t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}}}])}();function _u(e){return new Bs({find:e.find,handler:function(t){var n=t.state,r=t.range,o=t.match,i=t.pasteEvent,a=gs(e.getAttributes,void 0,o,i);if(!1===a||null===a)return null;var s=n.tr,u=o[o.length-1],l=o[0],c=r.to;if(u){var d=l.search(/\S/),f=r.from+l.indexOf(u),p=f+u.length;if(du(r.from,r.to,n.doc).filter((function(t){return t.mark.type.excluded.find((function(n){return n===e.type&&n!==t.mark.type}))})).filter((function(e){return e.to>f})).length)return null;p<r.to&&s.delete(p,r.to),f>r.from&&s.delete(r.from+d,f),c=r.from+d+u.length,s.addMark(r.from+d,c,e.type.create(a||{})),s.removeStoredMark(e.type)}}})}var Ru,Lu=new Uint8Array(16);function Iu(){if(!Ru&&!(Ru="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ru(Lu)}const Hu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var zu=[],Vu=0;Vu<256;++Vu)zu.push((Vu+256).toString(16).substr(1));const $u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(zu[e[t+0]]+zu[e[t+1]]+zu[e[t+2]]+zu[e[t+3]]+"-"+zu[e[t+4]]+zu[e[t+5]]+"-"+zu[e[t+6]]+zu[e[t+7]]+"-"+zu[e[t+8]]+zu[e[t+9]]+"-"+zu[e[t+10]]+zu[e[t+11]]+zu[e[t+12]]+zu[e[t+13]]+zu[e[t+14]]+zu[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&Hu.test(e)}(n))throw TypeError("Stringified UUID is invalid");return n},Uu=function(e,t,n){var r=(e=e||{}).random||(e.rng||Iu)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return $u(r)};function Gu(e){return Gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gu(e)}function Wu(e){return function(e){if(Array.isArray(e))return Ju(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ku(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||Ku(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ku(e,t){if(e){if("string"==typeof e)return Ju(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ju(e,t):void 0}}function Ju(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Zu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xu(r.key),r)}}function Xu(e){var t=function(e){if("object"!=Gu(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Gu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Gu(t)?t:t+""}var Yu=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache=new Map(t)}return function(e,t){return t&&Zu(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(e,[{key:"get",value:function(e){return this.cache.get(e)}},{key:"set",value:function(e,t,n){e<0||this.cache.set(e,[t,n])}},{key:"replace",value:function(e,t,n,r){this.remove(e),this.set(t,n,r)}},{key:"remove",value:function(e){this.cache.delete(e)}},{key:"invalidate",value:function(t){var n=new e(this.cache),r=t.mapping;return this.cache.forEach((function(e,o){var i=qu(e,2),a=i[0],s=i[1];if(!(o<0)){var u=r.mapResult(o),l=t.doc.nodeAt(u.pos);if(u.deleted||!(null==l?void 0:l.eq(a)))n.remove(o);else if(o!==u.pos){var c=s.map((function(e){return e.map(r,0,0)})).filter((function(e){return null!=e}));n.replace(o,u.pos,l,c)}}})),n}}])}();function Qu(e){var t=e.parser,n=e.nodeTypes,r=void 0===n?["code_block","codeBlock"]:n,o=e.languageExtractor,i=void 0===o?function(e){return e.attrs.language}:o,a=new Bn("prosemirror-highlight");return new Fn({key:a,state:{init:function(e,n){var o=new Yu,a=qu(el(n.doc,t,r,i,o),2);return{cache:o,decorations:a[0],promises:a[1]}},apply:function(e,n){var o=n.cache.invalidate(e),a=!!e.getMeta("prosemirror-highlight-refresh");if(!e.docChanged&&!a)return{cache:o,decorations:n.decorations.map(e.mapping,e.doc),promises:n.promises};var s=qu(el(e.doc,t,r,i,o),2);return{cache:o,decorations:s[0],promises:s[1]}}},view:function(e){var t=new Set,n=function(){var n,r,o=a.getState(e.state),i=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Ku(e))){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==t.return||t.return()}finally{if(a)throw o}}}}(null!=(n=null==o?void 0:o.promises)?n:[]);try{var s=function(){var n=r.value;t.add(n),n.then((function(){t.delete(n),function(){if(!(t.size>0)){var n=e.state.tr.setMeta("prosemirror-highlight-refresh",!0);e.dispatch(n)}}()})).catch((function(){t.delete(n)}))};for(i.s();!(r=i.n()).done;)s()}catch(e){i.e(e)}finally{i.f()}};return n(),{update:function(){n()}}},props:{decorations:function(e){var t;return null==(t=this.getState(e))?void 0:t.decorations}}})}function el(e,t,n,r,o){var i=[],a=[];return e.descendants((function(e,s){if(!e.type.isTextblock)return!0;if(n.includes(e.type.name)){var u=r(e),l=o.get(s);if(l){var c=qu(l,2),d=(c[0],c[1]);i.push.apply(i,Wu(d))}else{var f=t({content:e.textContent,language:u||void 0,pos:s,size:e.nodeSize});f&&Array.isArray(f)?(o.set(s,e,f),i.push.apply(i,Wu(f))):f instanceof Promise&&(o.remove(s),a.push(f))}}return!1})),[Mi.create(e,i),a]}function tl(e){return tl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tl(e)}function nl(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=rl(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function rl(e,t){if(e){if("string"==typeof e)return ol(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ol(e,t):void 0}}function ol(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function il(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function al(e,t,n){return(t=function(e){var t=function(e){if("object"!=tl(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=tl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==tl(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sl(e){return"string"==typeof e?e:Object.entries(e).map((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||rl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),n=t[0],r=t[1];return"".concat(n,":").concat(r)})).join(";")}var ul,ll,cl=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,dl=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,fl=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,pl=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,hl=Ms.create({name:"bold",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){var e=this;return[{tag:"strong"},{tag:"b",getAttrs:function(e){return"normal"!==e.style.fontWeight&&null}},{style:"font-weight=400",clearMark:function(t){return t.type.name===e.name}},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}]},renderHTML:function(e){var t=e.HTMLAttributes;return["strong",hs(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{setBold:function(){return function(t){return t.commands.setMark(e.name)}},toggleBold:function(){return function(t){return t.commands.toggleMark(e.name)}},unsetBold:function(){return function(t){return t.commands.unsetMark(e.name)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-b":function(){return e.editor.commands.toggleBold()},"Mod-B":function(){return e.editor.commands.toggleBold()}}},addInputRules:function(){return[Tu({find:cl,type:this.type}),Tu({find:fl,type:this.type})]},addPasteRules:function(){return[_u({find:dl,type:this.type}),_u({find:pl,type:this.type})]}}),ml=/(^|[^`])`([^`]+)`(?!`)/,vl=/(^|[^`])`([^`]+)`(?!`)/g,gl=Ms.create({name:"code",addOptions:function(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML:function(){return[{tag:"code"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["code",hs(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{setCode:function(){return function(t){return t.commands.setMark(e.name)}},toggleCode:function(){return function(t){return t.commands.toggleMark(e.name)}},unsetCode:function(){return function(t){return t.commands.unsetMark(e.name)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-e":function(){return e.editor.commands.toggleCode()}}},addInputRules:function(){return[Tu({find:ml,type:this.type})]},addPasteRules:function(){return[_u({find:vl,type:this.type})]}}),yl=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,bl=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Dl=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,wl=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Cl=Ms.create({name:"italic",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){var e=this;return[{tag:"em"},{tag:"i",getAttrs:function(e){return"normal"!==e.style.fontStyle&&null}},{style:"font-style=normal",clearMark:function(t){return t.type.name===e.name}},{style:"font-style=italic"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["em",hs(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{setItalic:function(){return function(t){return t.commands.setMark(e.name)}},toggleItalic:function(){return function(t){return t.commands.toggleMark(e.name)}},unsetItalic:function(){return function(t){return t.commands.unsetMark(e.name)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-i":function(){return e.editor.commands.toggleItalic()},"Mod-I":function(){return e.editor.commands.toggleItalic()}}},addInputRules:function(){return[Tu({find:yl,type:this.type}),Tu({find:Dl,type:this.type})]},addPasteRules:function(){return[_u({find:bl,type:this.type}),_u({find:wl,type:this.type})]}}),kl=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,El=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,xl=Ms.create({name:"strike",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:function(e){return!!e.includes("line-through")&&{}}}]},renderHTML:function(e){var t=e.HTMLAttributes;return["s",hs(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{setStrike:function(){return function(t){return t.commands.setMark(e.name)}},toggleStrike:function(){return function(t){return t.commands.toggleMark(e.name)}},unsetStrike:function(){return function(t){return t.commands.unsetMark(e.name)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-Shift-s":function(){return e.editor.commands.toggleStrike()}}},addInputRules:function(){return[Tu({find:kl,type:this.type})]},addPasteRules:function(){return[_u({find:El,type:this.type})]}}),Sl=Ms.create({name:"underline",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:function(e){return!!e.includes("underline")&&{}}}]},renderHTML:function(e){var t=e.HTMLAttributes;return["u",hs(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{setUnderline:function(){return function(t){return t.commands.setMark(e.name)}},toggleUnderline:function(){return function(t){return t.commands.toggleMark(e.name)}},unsetUnderline:function(){return function(t){return t.commands.unsetMark(e.name)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-u":function(){return e.editor.commands.toggleUnderline()},"Mod-U":function(){return e.editor.commands.toggleUnderline()}}}}),Al=Nu.create({name:"tableCell",addOptions:function(){return{HTMLAttributes:{}}},content:"block+",addAttributes:function(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:function(e){var t=e.getAttribute("colwidth");return t?t.split(",").map((function(e){return parseInt(e,10)})):null}}}},tableRole:"cell",isolating:!0,parseHTML:function(){return[{tag:"td"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["td",hs(this.options.HTMLAttributes,t),0]}}),Fl=Nu.create({name:"tableHeader",addOptions:function(){return{HTMLAttributes:{}}},content:"block+",addAttributes:function(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:function(e){var t=e.getAttribute("colwidth");return t?t.split(",").map((function(e){return parseInt(e,10)})):null}}}},tableRole:"header_cell",isolating:!0,parseHTML:function(){return[{tag:"th"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["th",hs(this.options.HTMLAttributes,t),0]}});function Ol(e){return Ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ol(e)}function Ml(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ml=function(){return!!e})()}function Bl(e){return Bl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bl(e)}function Pl(e,t){return Pl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pl(e,t)}function Tl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tl(Object(n),!0).forEach((function(t){jl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jl(e,t,n){return(t=Il(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Il(r.key),r)}}function Ll(e,t,n){return t&&Rl(e.prototype,t),n&&Rl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Il(e){var t=function(e){if("object"!=Ol(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ol(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ol(t)?t:t+""}if("undefined"!=typeof WeakMap){var Hl=new WeakMap;ul=function(e){return Hl.get(e)},ll=function(e,t){return Hl.set(e,t),t}}else{var zl=[],Vl=0;ul=function(e){for(var t=0;t<zl.length;t+=2)if(zl[t]==e)return zl[t+1]},ll=function(e,t){return 10==Vl&&(Vl=0),zl[Vl++]=e,zl[Vl++]=t}}var $l=function(){return Ll((function e(t,n,r,o){_l(this,e),this.width=t,this.height=n,this.map=r,this.problems=o}),[{key:"findCell",value:function(e){for(var t=0;t<this.map.length;t++){var n=this.map[t];if(n==e){for(var r=t%this.width,o=t/this.width|0,i=r+1,a=o+1,s=1;i<this.width&&this.map[t+s]==n;s++)i++;for(var u=1;a<this.height&&this.map[t+this.width*u]==n;u++)a++;return{left:r,top:o,right:i,bottom:a}}}throw new RangeError("No cell with offset ".concat(e," found"))}},{key:"colCount",value:function(e){for(var t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError("No cell with offset ".concat(e," found"))}},{key:"nextCell",value:function(e,t,n){var r=this.findCell(e),o=r.left,i=r.right,a=r.top,s=r.bottom;return"horiz"==t?(n<0?0==o:i==this.width)?null:this.map[a*this.width+(n<0?o-1:i)]:(n<0?0==a:s==this.height)?null:this.map[o+this.width*(n<0?a-1:s)]}},{key:"rectBetween",value:function(e,t){var n=this.findCell(e),r=n.left,o=n.right,i=n.top,a=n.bottom,s=this.findCell(t),u=s.left,l=s.right,c=s.top,d=s.bottom;return{left:Math.min(r,u),top:Math.min(i,c),right:Math.max(o,l),bottom:Math.max(a,d)}}},{key:"cellsInRect",value:function(e){for(var t=[],n={},r=e.top;r<e.bottom;r++)for(var o=e.left;o<e.right;o++){var i=r*this.width+o,a=this.map[i];n[a]||(n[a]=!0,o==e.left&&o&&this.map[i-1]==a||r==e.top&&r&&this.map[i-this.width]==a||t.push(a))}return t}},{key:"positionAt",value:function(e,t,n){for(var r=0,o=0;;r++){var i=o+n.child(r).nodeSize;if(r==e){for(var a=t+e*this.width,s=(e+1)*this.width;a<s&&this.map[a]<o;)a++;return a==s?i-1:this.map[a]}o=i}}}],[{key:"get",value:function(e){return ul(e)||ll(e,function(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);for(var t=function(e){for(var t=-1,n=!1,r=0;r<e.childCount;r++){var o=e.child(r),i=0;if(n)for(var a=0;a<r;a++)for(var s=e.child(a),u=0;u<s.childCount;u++){var l=s.child(u);a+l.attrs.rowspan>r&&(i+=l.attrs.colspan)}for(var c=0;c<o.childCount;c++){var d=o.child(c);i+=d.attrs.colspan,d.attrs.rowspan>1&&(n=!0)}-1==t?t=i:t!=i&&(t=Math.max(t,i))}return t}(e),n=e.childCount,r=[],o=0,i=null,a=[],s=0,u=t*n;s<u;s++)r[s]=0;for(var l=0,c=0;l<n;l++){var d=e.child(l);c++;for(var f=0;;f++){for(;o<r.length&&0!=r[o];)o++;if(f==d.childCount)break;for(var p=d.child(f),h=p.attrs,m=h.colspan,v=h.rowspan,g=h.colwidth,y=0;y<v;y++){if(y+l>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:c,n:v-y});break}for(var b=o+y*t,D=0;D<m;D++){0==r[b+D]?r[b+D]=c:(i||(i=[])).push({type:"collision",row:l,pos:c,n:m-D});var w=g&&g[D];if(w){var C=(b+D)%t*2,k=a[C];null==k||k!=w&&1==a[C+1]?(a[C]=w,a[C+1]=1):k==w&&a[C+1]++}}}o+=m,c+=p.nodeSize}for(var E=(l+1)*t,x=0;o<E;)0==r[o++]&&x++;x&&(i||(i=[])).push({type:"missing",row:l,n:x}),c++}0!==t&&0!==n||(i||(i=[])).push({type:"zero_sized"});for(var S=new $l(t,n,r,i),A=!1,F=0;!A&&F<a.length;F+=2)null!=a[F]&&a[F+1]<n&&(A=!0);return A&&function(e,t,n){e.problems||(e.problems=[]);for(var r={},o=0;o<e.map.length;o++){var i=e.map[o];if(!r[i]){r[i]=!0;var a=n.nodeAt(i);if(!a)throw new RangeError("No cell with offset ".concat(i," found"));for(var s=null,u=a.attrs,l=0;l<u.colspan;l++){var c=t[(o+l)%e.width*2];null==c||u.colwidth&&u.colwidth[l]==c||((s||(s=Ul(u)))[l]=c)}s&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:s})}}}(S,a,e),S}(e))}}])}();function Ul(e){if(e.colwidth)return e.colwidth.slice();for(var t=[],n=0;n<e.colspan;n++)t.push(0);return t}function Gl(e){var t=e.cached.tableNodeTypes;if(!t)for(var n in t=e.cached.tableNodeTypes={},e.nodes){var r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}return t}var Wl=new Bn("selectingCells");function ql(e){for(var t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function Kl(e){for(var t=e.selection.$head,n=t.depth;n>0;n--)if("row"==t.node(n).type.spec.tableRole)return!0;return!1}function Jl(e){var t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&"cell"==t.node.type.spec.tableRole)return t.$anchor;var n=ql(t.$head)||function(e){for(var t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){var r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n)}for(var o=e.nodeBefore,i=e.pos;o;o=o.lastChild,i--){var a=o.type.spec.tableRole;if("cell"==a||"header_cell"==a)return e.doc.resolve(i-o.nodeSize)}}(t.$head);if(n)return n;throw new RangeError("No cell found around position ".concat(t.head))}function Zl(e){return"row"==e.parent.type.spec.tableRole&&!!e.nodeAfter}function Xl(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function Yl(e,t,n){var r=e.node(-1),o=$l.get(r),i=e.start(-1),a=o.nextCell(e.pos-i,t,n);return null==a?null:e.node(0).resolve(i+a)}function Ql(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=Nl(Nl({},e),{},{colspan:e.colspan-n});return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some((function(e){return e>0}))||(r.colwidth=null)),r}function ec(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=Nl(Nl({},e),{},{colspan:e.colspan+n});if(r.colwidth){r.colwidth=r.colwidth.slice();for(var o=0;o<n;o++)r.colwidth.splice(t,0,0)}return r}var tc=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;_l(this,t);var o=e.node(-1),i=$l.get(o),a=e.start(-1),s=i.rectBetween(e.pos-a,r.pos-a),u=e.node(0),l=i.cellsInRect(s).filter((function(e){return e!=r.pos-a}));l.unshift(r.pos-a);var c=l.map((function(e){var t=o.nodeAt(e);if(!t)throw RangeError("No cell with offset ".concat(e," found"));var n=a+e+1;return new cn(u.resolve(n),u.resolve(n+t.content.size))}));return(n=function(e,t,n){return t=Bl(t),function(e,t){if(t&&("object"==Ol(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ml()?Reflect.construct(t,n||[],Bl(e).constructor):t.apply(e,n))}(this,t,[c[0].$from,c[0].$to,c])).$anchorCell=e,n.$headCell=r,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pl(e,t)}(t,e),Ll(t,[{key:"map",value:function(e,n){var r=e.resolve(n.map(this.$anchorCell.pos)),o=e.resolve(n.map(this.$headCell.pos));if(Zl(r)&&Zl(o)&&Xl(r,o)){var i=this.$anchorCell.node(-1)!=r.node(-1);return i&&this.isRowSelection()?t.rowSelection(r,o):i&&this.isColSelection()?t.colSelection(r,o):new t(r,o)}return pn.between(r,o)}},{key:"content",value:function(){for(var e=this.$anchorCell.node(-1),t=$l.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},i=[],a=r.top;a<r.bottom;a++){for(var s=[],u=a*t.width+r.left,l=r.left;l<r.right;l++,u++){var c=t.map[u];if(!o[c]){o[c]=!0;var d=t.findCell(c),f=e.nodeAt(c);if(!f)throw RangeError("No cell with offset ".concat(c," found"));var p=r.left-d.left,h=d.right-r.right;if(p>0||h>0){var m=f.attrs;if(p>0&&(m=Ql(m,0,p)),h>0&&(m=Ql(m,m.colspan-h,h)),d.left<r.left){if(!(f=f.type.createAndFill(m)))throw RangeError("Could not create cell with attrs ".concat(JSON.stringify(m)))}else f=f.type.create(m,f.content)}if(d.top<r.top||d.bottom>r.bottom){var v=Nl(Nl({},f.attrs),{},{rowspan:Math.min(d.bottom,r.bottom)-Math.max(d.top,r.top)});f=d.top<r.top?f.type.createAndFill(v):f.type.create(v,f.content)}s.push(f)}}i.push(e.child(a).copy($.from(s)))}var g=this.isColSelection()&&this.isRowSelection()?e:i;return new J($.from(g),1,1)}},{key:"replace",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:J.empty,n=e.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],a=i.$from,s=i.$to,u=e.mapping.slice(n);e.replace(u.map(a.pos),u.map(s.pos),o?J.empty:t)}var l=ln.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);l&&e.setSelection(l)}},{key:"replaceWith",value:function(e,t){this.replace(e,new J($.from(t),0,0))}},{key:"forEachCell",value:function(e){for(var t=this.$anchorCell.node(-1),n=$l.get(t),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r)),i=0;i<o.length;i++)e(t.nodeAt(o[i]),r+o[i])}},{key:"isColSelection",value:function(){var e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;var n=e+this.$anchorCell.nodeAfter.attrs.rowspan,r=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount}},{key:"isRowSelection",value:function(){var e=this.$anchorCell.node(-1),t=$l.get(e),n=this.$anchorCell.start(-1),r=t.colCount(this.$anchorCell.pos-n),o=t.colCount(this.$headCell.pos-n);if(Math.min(r,o)>0)return!1;var i=r+this.$anchorCell.nodeAfter.attrs.colspan,a=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,a)==t.width}},{key:"eq",value:function(e){return e instanceof t&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}},{key:"toJSON",value:function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}},{key:"getBookmark",value:function(){return new nc(this.$anchorCell.pos,this.$headCell.pos)}}],[{key:"colSelection",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=e.node(-1),o=$l.get(r),i=e.start(-1),a=o.findCell(e.pos-i),s=o.findCell(n.pos-i),u=e.node(0);return a.top<=s.top?(a.top>0&&(e=u.resolve(i+o.map[a.left])),s.bottom<o.height&&(n=u.resolve(i+o.map[o.width*(o.height-1)+s.right-1]))):(s.top>0&&(n=u.resolve(i+o.map[s.left])),a.bottom<o.height&&(e=u.resolve(i+o.map[o.width*(o.height-1)+a.right-1]))),new t(e,n)}},{key:"rowSelection",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=e.node(-1),o=$l.get(r),i=e.start(-1),a=o.findCell(e.pos-i),s=o.findCell(n.pos-i),u=e.node(0);return a.left<=s.left?(a.left>0&&(e=u.resolve(i+o.map[a.top*o.width])),s.right<o.width&&(n=u.resolve(i+o.map[o.width*(s.top+1)-1]))):(s.left>0&&(n=u.resolve(i+o.map[s.top*o.width])),a.right<o.width&&(e=u.resolve(i+o.map[o.width*(a.top+1)-1]))),new t(e,n)}},{key:"fromJSON",value:function(e,n){return new t(e.resolve(n.anchor),e.resolve(n.head))}},{key:"create",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;return new t(e.resolve(n),e.resolve(r))}}])}(ln);tc.prototype.visible=!1,ln.jsonID("cell",tc);var nc=function(){function e(t,n){_l(this,e),this.anchor=t,this.head=n}return Ll(e,[{key:"map",value:function(t){return new e(t.map(this.anchor),t.map(this.head))}},{key:"resolve",value:function(e){var t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&Xl(t,n)?new tc(t,n):ln.near(n,1)}}])}();function rc(e){if(!(e.selection instanceof tc))return null;var t=[];return e.selection.forEachCell((function(e,n){t.push(Ai.node(n,n+e.nodeSize,{class:"selectedCell"}))})),Mi.create(e.doc,t)}var oc=new Bn("fix-tables");function ic(e,t,n,r){var o=e.childCount,i=t.childCount;e:for(var a=0,s=0;a<i;a++){for(var u=t.child(a),l=s,c=Math.min(o,a+3);l<c;l++)if(e.child(l)==u){s=l+1,n+=u.nodeSize;continue e}r(u,n),s<o&&e.child(s).sameMarkup(u)?ic(e.child(s),u,n+1,r):u.nodesBetween(0,u.content.size,r,n+1),n+=u.nodeSize}}function ac(e,t){var n,r=function(t,r){"table"==t.type.spec.tableRole&&(n=function(e,t,n,r){var o=$l.get(t);if(!o.problems)return r;r||(r=e.tr);for(var i,a,s=[],u=0;u<o.height;u++)s.push(0);for(var l=0;l<o.problems.length;l++){var c=o.problems[l];if("collision"==c.type){var d=t.nodeAt(c.pos);if(!d)continue;for(var f=d.attrs,p=0;p<f.rowspan;p++)s[c.row+p]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,Ql(f,f.colspan-c.n,c.n))}else if("missing"==c.type)s[c.row]+=c.n;else if("overlong_rowspan"==c.type){var h=t.nodeAt(c.pos);if(!h)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,Nl(Nl({},h.attrs),{},{rowspan:h.attrs.rowspan-c.n}))}else if("colwidth mismatch"==c.type){var m=t.nodeAt(c.pos);if(!m)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,Nl(Nl({},m.attrs),{},{colwidth:c.colwidth}))}else if("zero_sized"==c.type){var v=r.mapping.map(n);r.delete(v,v+t.nodeSize)}}for(var g=0;g<s.length;g++)s[g]&&(null==i&&(i=g),a=g);for(var y=0,b=n+1;y<o.height;y++){var D=t.child(y),w=b+D.nodeSize,C=s[y];if(C>0){var k="cell";D.firstChild&&(k=D.firstChild.type.spec.tableRole);for(var E=[],x=0;x<C;x++){var S=Gl(e.schema)[k].createAndFill();S&&E.push(S)}var A=0!=y&&i!=y-1||a!=y?w-1:b+1;r.insert(r.mapping.map(A),E)}b=w}return r.setMeta(oc,{fixTables:!0})}(e,t,r,n))};return t?t.doc!=e.doc&&ic(t.doc,e.doc,0,r):e.doc.descendants(r),n}function sc(e){var t=e.selection,n=Jl(e),r=n.node(-1),o=n.start(-1),i=$l.get(r);return Nl(Nl({},t instanceof tc?i.rectBetween(t.$anchorCell.pos-o,t.$headCell.pos-o):i.findCell(n.pos-o)),{},{tableStart:o,map:i,table:r})}function uc(e,t,n){var r=t.map,o=t.tableStart,i=t.table,a=n>0?-1:0;(function(e,t,n){for(var r=Gl(t.type.schema).header_cell,o=0;o<e.height;o++)if(t.nodeAt(e.map[n+o*e.width]).type!=r)return!1;return!0})(r,i,n+a)&&(a=0==n||n==r.width?null:0);for(var s=0;s<r.height;s++){var u=s*r.width+n;if(n>0&&n<r.width&&r.map[u-1]==r.map[u]){var l=r.map[u],c=i.nodeAt(l);e.setNodeMarkup(e.mapping.map(o+l),null,ec(c.attrs,n-r.colCount(l))),s+=c.attrs.rowspan-1}else{var d=null==a?Gl(i.type.schema).cell:i.nodeAt(r.map[u+a]).type,f=r.positionAt(s,n,i);e.insert(e.mapping.map(o+f),d.createAndFill())}}return e}function lc(e,t,n){for(var r=t.map,o=t.table,i=t.tableStart,a=e.mapping.maps.length,s=0;s<r.height;){var u=s*r.width+n,l=r.map[u],c=o.nodeAt(l),d=c.attrs;if(n>0&&r.map[u-1]==l||n<r.width-1&&r.map[u+1]==l)e.setNodeMarkup(e.mapping.slice(a).map(i+l),null,Ql(d,n-r.colCount(l)));else{var f=e.mapping.slice(a).map(i+l);e.delete(f,f+c.nodeSize)}s+=d.rowspan}}function cc(e,t,n){for(var r,o=t.map,i=t.tableStart,a=t.table,s=i,u=0;u<n;u++)s+=a.child(u).nodeSize;var l=[],c=n>0?-1:0;(function(e,t,n){for(var r,o=Gl(t.type.schema).header_cell,i=0;i<e.width;i++)if((null==(r=t.nodeAt(e.map[i+n*e.width]))?void 0:r.type)!=o)return!1;return!0})(o,a,n+c)&&(c=0==n||n==o.height?null:0);for(var d=0,f=o.width*n;d<o.width;d++,f++)if(n>0&&n<o.height&&o.map[f]==o.map[f-o.width]){var p=o.map[f],h=a.nodeAt(p).attrs;e.setNodeMarkup(i+p,null,Nl(Nl({},h),{},{rowspan:h.rowspan+1})),d+=h.colspan-1}else{var m=null==c?Gl(a.type.schema).cell:null==(r=a.nodeAt(o.map[f+c*o.width]))?void 0:r.type,v=null==m?void 0:m.createAndFill();v&&l.push(v)}return e.insert(s,Gl(a.type.schema).row.create(null,l)),e}function dc(e,t,n){for(var r=t.map,o=t.table,i=t.tableStart,a=0,s=0;s<n;s++)a+=o.child(s).nodeSize;var u=a+o.child(n).nodeSize,l=e.mapping.maps.length;e.delete(a+i,u+i);for(var c=new Set,d=0,f=n*r.width;d<r.width;d++,f++){var p=r.map[f];if(!c.has(p))if(c.add(p),n>0&&p==r.map[f-r.width]){var h=o.nodeAt(p).attrs;e.setNodeMarkup(e.mapping.slice(l).map(p+i),null,Nl(Nl({},h),{},{rowspan:h.rowspan-1})),d+=h.colspan-1}else if(n<r.height&&p==r.map[f+r.width]){var m=o.nodeAt(p),v=m.attrs,g=m.type.create(Nl(Nl({},v),{},{rowspan:m.attrs.rowspan-1}),m.content),y=r.positionAt(n+1,d,o);e.insert(e.mapping.slice(l).map(i+y),g),d+=v.colspan-1}}}function fc(e){var t=e.content;return 1==t.childCount&&t.child(0).isTextblock&&0==t.child(0).childCount}function pc(e,t,n){for(var r=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1}),o=0;o<r.length;o++){var i=t.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function hc(e,t){return(t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(e){return function(t,n){if(!Kl(t))return!1;if(n){for(var r=Gl(t.schema),o=sc(t),i=t.tr,a=o.map.cellsInRect("column"==e?{left:o.left,top:0,right:o.right,bottom:o.map.height}:"row"==e?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),s=a.map((function(e){return o.table.nodeAt(e)})),u=0;u<a.length;u++)s[u].type==r.header_cell&&i.setNodeMarkup(o.tableStart+a[u],r.cell,s[u].attrs);if(0==i.steps.length)for(var l=0;l<a.length;l++)i.setNodeMarkup(o.tableStart+a[l],r.header_cell,s[l].attrs);n(i)}return!0}}(e):function(t,n){if(!Kl(t))return!1;if(n){var r=Gl(t.schema),o=sc(t),i=t.tr,a=pc("row",o,r),s=pc("column",o,r),u=("column"===e?a:"row"===e&&s)?1:0,l="column"==e?{left:0,top:u,right:1,bottom:o.map.height}:"row"==e?{left:u,top:0,right:o.map.width,bottom:1}:o,c="column"==e?s?r.cell:r.header_cell:"row"==e?a?r.cell:r.header_cell:r.cell;o.map.cellsInRect(l).forEach((function(e){var t=e+o.tableStart,n=i.doc.nodeAt(t);n&&i.setNodeMarkup(t,c,n.attrs)})),n(i)}return!0}}function mc(e){return function(t,n){if(!Kl(t))return!1;var r,o=function(e,t){if(t<0){var n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(var r=e.index(-1)-1,o=e.before();r>=0;r--){var i=e.node(-1).child(r),a=i.lastChild;if(a)return o-1-a.nodeSize;o-=i.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;for(var s=e.node(-1),u=e.indexAfter(-1),l=e.after();u<s.childCount;u++){var c=s.child(u);if(c.childCount)return l+1;l+=c.nodeSize}}return null}(Jl(t),e);if(null==o)return!1;if(n){var i=t.doc.resolve(o);n(t.tr.setSelection(pn.between(i,(r=i,r.node(0).resolve(r.pos+r.nodeAfter.nodeSize)))).scrollIntoView())}return!0}}function vc(e,t){var n=e.selection;if(!(n instanceof tc))return!1;if(t){var r=e.tr,o=Gl(e.schema).cell.createAndFill().content;n.forEachCell((function(e,t){e.content.eq(o)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new J(o,0,0))})),r.docChanged&&t(r)}return!0}function gc(e,t){var n=e.createAndFill();return new Kt(n).replace(0,n.content.size,t).doc}function yc(e,t,n,r,o,i,a,s){if(0==a||a==t.height)return!1;for(var u=!1,l=o;l<i;l++){var c=a*t.width+l,d=t.map[c];if(t.map[c-t.width]==d){u=!0;var f=n.nodeAt(d),p=t.findCell(d),h=p.top,m=p.left;e.setNodeMarkup(e.mapping.slice(s).map(d+r),null,Nl(Nl({},f.attrs),{},{rowspan:a-h})),e.insert(e.mapping.slice(s).map(t.positionAt(a,m,n)),f.type.createAndFill(Nl(Nl({},f.attrs),{},{rowspan:h+f.attrs.rowspan-a}))),l+=f.attrs.colspan-1}}return u}function bc(e,t,n,r,o,i,a,s){if(0==a||a==t.width)return!1;for(var u=!1,l=o;l<i;l++){var c=l*t.width+a,d=t.map[c];if(t.map[c-1]==d){u=!0;var f=n.nodeAt(d),p=t.colCount(d),h=e.mapping.slice(s).map(d+r);e.setNodeMarkup(h,null,Ql(f.attrs,a-p,f.attrs.colspan-(a-p))),e.insert(h+f.nodeSize,f.type.createAndFill(Ql(f.attrs,0,a-p))),l+=f.attrs.rowspan-1}}return u}function Dc(e,t,n,r,o){var i=n?e.doc.nodeAt(n-1):e.doc;if(!i)throw new Error("No table found");var a=$l.get(i),s=r.top,u=r.left,l=u+o.width,c=s+o.height,d=e.tr,f=0;function p(){if(!(i=n?d.doc.nodeAt(n-1):d.doc))throw new Error("No table found");a=$l.get(i),f=d.mapping.maps.length}(function(e,t,n,r,o,i,a){var s,u,l=Gl(e.doc.type.schema);if(o>t.width)for(var c=0,d=0;c<t.height;c++){var f=n.child(c);d+=f.nodeSize;var p,h=[];p=null==f.lastChild||f.lastChild.type==l.cell?s||(s=l.cell.createAndFill()):u||(u=l.header_cell.createAndFill());for(var m=t.width;m<o;m++)h.push(p);e.insert(e.mapping.slice(a).map(d-1+r),h)}if(i>t.height){for(var v=[],g=0,y=(t.height-1)*t.width;g<Math.max(t.width,o);g++){var b=!(g>=t.width)&&n.nodeAt(t.map[y+g]).type==l.header_cell;v.push(b?u||(u=l.header_cell.createAndFill()):s||(s=l.cell.createAndFill()))}for(var D=l.row.create(null,$.from(v)),w=[],C=t.height;C<i;C++)w.push(D);e.insert(e.mapping.slice(a).map(r+n.nodeSize-2),w)}return!(!s&&!u)})(d,a,i,n,l,c,f)&&p(),yc(d,a,i,n,u,l,s,f)&&p(),yc(d,a,i,n,u,l,c,f)&&p(),bc(d,a,i,n,s,c,u,f)&&p(),bc(d,a,i,n,s,c,l,f)&&p();for(var h=s;h<c;h++){var m=a.positionAt(h,u,i),v=a.positionAt(h,l,i);d.replace(d.mapping.slice(f).map(m+n),d.mapping.slice(f).map(v+n),new J(o.rows[h-s],0,0))}p(),d.setSelection(new tc(d.doc.resolve(n+a.positionAt(s,u,i)),d.doc.resolve(n+a.positionAt(c-1,l-1,i)))),t(d)}hc("row",{useDeprecatedLogic:!0}),hc("column",{useDeprecatedLogic:!0}),hc("cell",{useDeprecatedLogic:!0});var wc=ga({ArrowLeft:kc("horiz",-1),ArrowRight:kc("horiz",1),ArrowUp:kc("vert",-1),ArrowDown:kc("vert",1),"Shift-ArrowLeft":Ec("horiz",-1),"Shift-ArrowRight":Ec("horiz",1),"Shift-ArrowUp":Ec("vert",-1),"Shift-ArrowDown":Ec("vert",1),Backspace:vc,"Mod-Backspace":vc,Delete:vc,"Mod-Delete":vc});function Cc(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function kc(e,t){return function(n,r,o){if(!o)return!1;var i=n.selection;if(i instanceof tc)return Cc(n,r,ln.near(i.$headCell,t));if("horiz"!=e&&!i.empty)return!1;var a=Fc(o,e,t);if(null==a)return!1;if("horiz"==e)return Cc(n,r,ln.near(n.doc.resolve(i.head+t),t));var s,u=n.doc.resolve(a),l=Yl(u,e,t);return s=l?ln.near(l,1):t<0?ln.near(n.doc.resolve(u.before(-1)),-1):ln.near(n.doc.resolve(u.after(-1)),1),Cc(n,r,s)}}function Ec(e,t){return function(n,r,o){if(!o)return!1;var i,a=n.selection;if(a instanceof tc)i=a;else{var s=Fc(o,e,t);if(null==s)return!1;i=new tc(n.doc.resolve(s))}var u=Yl(i.$headCell,e,t);return!!u&&Cc(n,r,new tc(i.$anchorCell,u))}}function xc(e,t){var n=ql(e.state.doc.resolve(t));return!!n&&(e.dispatch(e.state.tr.setSelection(new tc(n))),!0)}function Sc(e,t,n){if(!Kl(e.state))return!1;var r=function(e){if(!e.size)return null;for(var t=e.content,n=e.openStart,r=e.openEnd;1==t.childCount&&(n>0&&r>0||"table"==t.child(0).type.spec.tableRole);)n--,r--,t=t.child(0).content;var o=t.child(0),i=o.type.spec.tableRole,a=o.type.schema,s=[];if("row"==i)for(var u=0;u<t.childCount;u++){var l=t.child(u).content,c=u?0:Math.max(0,n-1),d=u<t.childCount-1?0:Math.max(0,r-1);(c||d)&&(l=gc(Gl(a).row,new J(l,c,d)).content),s.push(l)}else{if("cell"!=i&&"header_cell"!=i)return null;s.push(n||r?gc(Gl(a).row,new J(t,n,r)).content:t)}return function(e,t){for(var n=[],r=0;r<t.length;r++)for(var o=t[r],i=o.childCount-1;i>=0;i--)for(var a=o.child(i).attrs,s=a.rowspan,u=a.colspan,l=r;l<r+s;l++)n[l]=(n[l]||0)+u;for(var c=0,d=0;d<n.length;d++)c=Math.max(c,n[d]);for(var f=0;f<n.length;f++)if(f>=t.length&&t.push($.empty),n[f]<c){for(var p=Gl(e).cell.createAndFill(),h=[],m=n[f];m<c;m++)h.push(p);t[f]=t[f].append($.from(h))}return{height:t.length,width:c,rows:t}}(a,s)}(n),o=e.state.selection;if(o instanceof tc){r||(r={width:1,height:1,rows:[$.from(gc(Gl(e.state.schema).cell,n))]});var i=o.$anchorCell.node(-1),a=o.$anchorCell.start(-1),s=$l.get(i).rectBetween(o.$anchorCell.pos-a,o.$headCell.pos-a);return r=function(e,t,n){var r=e.width,o=e.height,i=e.rows;if(r!=t){for(var a=[],s=[],u=0;u<i.length;u++){for(var l=i[u],c=[],d=a[u]||0,f=0;d<t;f++){var p=l.child(f%l.childCount);d+p.attrs.colspan>t&&(p=p.type.createChecked(Ql(p.attrs,p.attrs.colspan,d+p.attrs.colspan-t),p.content)),c.push(p),d+=p.attrs.colspan;for(var h=1;h<p.attrs.rowspan;h++)a[u+h]=(a[u+h]||0)+p.attrs.colspan}s.push($.from(c))}i=s,r=t}if(o!=n){for(var m=[],v=0,g=0;v<n;v++,g++){for(var y=[],b=i[g%o],D=0;D<b.childCount;D++){var w=b.child(D);v+w.attrs.rowspan>n&&(w=w.type.create(Nl(Nl({},w.attrs),{},{rowspan:Math.max(1,n-w.attrs.rowspan)}),w.content)),y.push(w)}m.push($.from(y))}i=m,o=n}return{width:r,height:o,rows:i}}(r,s.right-s.left,s.bottom-s.top),Dc(e.state,e.dispatch,a,s,r),!0}if(r){var u=Jl(e.state),l=u.start(-1);return Dc(e.state,e.dispatch,l,$l.get(u.node(-1)).findCell(u.pos-l),r),!0}return!1}function Ac(e,t){var n;if(!t.ctrlKey&&!t.metaKey){var r,o=Oc(e,t.target);if(t.shiftKey&&e.state.selection instanceof tc)i(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&o&&null!=(r=ql(e.state.selection.$anchor))&&(null==(n=Mc(e,t))?void 0:n.pos)!=r.pos)i(r,t),t.preventDefault();else if(!o)return;e.root.addEventListener("mouseup",a),e.root.addEventListener("dragstart",a),e.root.addEventListener("mousemove",s)}function i(t,n){var r=Mc(e,n),o=null==Wl.getState(e.state);if(!r||!Xl(t,r)){if(!o)return;r=t}var i=new tc(t,r);if(o||!e.state.selection.eq(i)){var a=e.state.tr.setSelection(i);o&&a.setMeta(Wl,t.pos),e.dispatch(a)}}function a(){e.root.removeEventListener("mouseup",a),e.root.removeEventListener("dragstart",a),e.root.removeEventListener("mousemove",s),null!=Wl.getState(e.state)&&e.dispatch(e.state.tr.setMeta(Wl,-1))}function s(n){var r,s=n,u=Wl.getState(e.state);if(null!=u)r=e.state.doc.resolve(u);else if(Oc(e,s.target)!=o&&!(r=Mc(e,t)))return a();r&&i(r,s)}}function Fc(e,t,n){if(!(e.state.selection instanceof pn))return null;for(var r=e.state.selection.$head,o=r.depth-1;o>=0;o--){var i=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:i.childCount))return null;if("cell"==i.type.spec.tableRole||"header_cell"==i.type.spec.tableRole){var a=r.before(o),s="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(s)?a:null}}return null}function Oc(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t;return null}function Mc(e,t){var n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?ql(e.state.doc.resolve(n.pos)):null}var Bc=function(){return Ll((function e(t,n){_l(this,e),this.node=t,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width","".concat(n,"px")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Pc(t,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}),[{key:"update",value:function(e){return e.type==this.node.type&&(this.node=e,Pc(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}},{key:"ignoreMutation",value:function(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))}}])}();function Pc(e,t,n,r,o,i){var a,s=0,u=!0,l=t.firstChild,c=e.firstChild;if(c){for(var d=0,f=0;d<c.childCount;d++)for(var p=c.child(d).attrs,h=p.colspan,m=p.colwidth,v=0;v<h;v++,f++){var g=o==f?i:m&&m[v],y=g?g+"px":"";if(s+=g||r,g||(u=!1),l)l.style.width!=y&&(l.style.width=y),l=l.nextSibling;else{var b=document.createElement("col");b.style.width=y,t.appendChild(b)}}for(;l;){var D=l.nextSibling;null==(a=l.parentNode)||a.removeChild(l),l=D}u?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}}var Tc=new Bn("tableColumnResizing");function Nc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.handleWidth,n=void 0===t?5:t,r=e.cellMinWidth,o=void 0===r?25:r,i=e.defaultCellMinWidth,a=void 0===i?100:i,s=e.View,u=void 0===s?Bc:s,l=e.lastColumnResizable,c=void 0===l||l,d=new Fn({key:Tc,state:{init:function(e,t){var n,r,o=null==(r=null==(n=d.spec)?void 0:n.props)?void 0:r.nodeViews,i=Gl(t.schema).table.name;return u&&o&&(o[i]=function(e,t){return new u(e,a,t)}),new jc(-1,!1)},apply:function(e,t){return t.apply(e)}},props:{attributes:function(e){var t=Tc.getState(e);return t&&t.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:function(e,t){!function(e,t,n,r){if(e.editable){var o=Tc.getState(e.state);if(o&&!o.dragging){var i=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target),a=-1;if(i){var s=i.getBoundingClientRect(),u=s.left,l=s.right;t.clientX-u<=n?a=_c(e,t,"left",n):l-t.clientX<=n&&(a=_c(e,t,"right",n))}if(a!=o.activeHandle){if(!r&&-1!==a){var c=e.state.doc.resolve(a),d=c.node(-1),f=$l.get(d),p=c.start(-1);if(f.colCount(c.pos-p)+c.nodeAfter.attrs.colspan-1==f.width-1)return}Lc(e,a)}}}}(e,t,n,c)},mouseleave:function(e){!function(e){if(e.editable){var t=Tc.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&Lc(e,-1)}}(e)},mousedown:function(e,t){!function(e,t,n,r){var o;if(!e.editable)return!1;var i=null!=(o=e.dom.ownerDocument.defaultView)?o:window,a=Tc.getState(e.state);if(!a||-1==a.activeHandle||a.dragging)return!1;var s=e.state.doc.nodeAt(a.activeHandle),u=function(e,t,n){var r=n.colspan,o=n.colwidth,i=o&&o[o.length-1];if(i)return i;var a=e.domAtPos(t),s=a.node.childNodes[a.offset].offsetWidth,u=r;if(o)for(var l=0;l<r;l++)o[l]&&(s-=o[l],u--);return s/u}(e,a.activeHandle,s.attrs);function l(t){i.removeEventListener("mouseup",l),i.removeEventListener("mousemove",c);var r=Tc.getState(e.state);(null==r?void 0:r.dragging)&&(function(e,t,n){for(var r=e.state.doc.resolve(t),o=r.node(-1),i=$l.get(o),a=r.start(-1),s=i.colCount(r.pos-a)+r.nodeAfter.attrs.colspan-1,u=e.state.tr,l=0;l<i.height;l++){var c=l*i.width+s;if(!l||i.map[c]!=i.map[c-i.width]){var d=i.map[c],f=o.nodeAt(d).attrs,p=1==f.colspan?0:s-i.colCount(d);if(!f.colwidth||f.colwidth[p]!=n){var h=f.colwidth?f.colwidth.slice():(m=f.colspan,Array(m).fill(0));h[p]=n,u.setNodeMarkup(a+d,null,Nl(Nl({},f),{},{colwidth:h}))}}}var m;u.docChanged&&e.dispatch(u)}(e,r.activeHandle,Rc(r.dragging,t,n)),e.dispatch(e.state.tr.setMeta(Tc,{setDragging:null})))}function c(t){if(!t.which)return l(t);var o=Tc.getState(e.state);if(o&&o.dragging){var i=Rc(o.dragging,t,n);Ic(e,o.activeHandle,i,r)}}e.dispatch(e.state.tr.setMeta(Tc,{setDragging:{startX:t.clientX,startWidth:u}})),Ic(e,a.activeHandle,u,r),i.addEventListener("mouseup",l),i.addEventListener("mousemove",c),t.preventDefault()}(e,t,o,a)}},decorations:function(e){var t=Tc.getState(e);if(t&&t.activeHandle>-1)return function(e,t){var n,r=[],o=e.doc.resolve(t),i=o.node(-1);if(!i)return Mi.empty;for(var a=$l.get(i),s=o.start(-1),u=a.colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1,l=0;l<a.height;l++){var c=u+l*a.width;if(!(u!=a.width-1&&a.map[c]==a.map[c+1]||0!=l&&a.map[c]==a.map[c-a.width])){var d=a.map[c],f=s+d+i.nodeAt(d).nodeSize-1,p=document.createElement("div");p.className="column-resize-handle",(null==(n=Tc.getState(e))?void 0:n.dragging)&&r.push(Ai.node(s+d,s+d+i.nodeAt(d).nodeSize,{class:"column-resize-dragging"})),r.push(Ai.widget(f,p))}}return Mi.create(e.doc,r)}(e,t.activeHandle)},nodeViews:{}}});return d}var jc=function(){function e(t,n){_l(this,e),this.activeHandle=t,this.dragging=n}return Ll(e,[{key:"apply",value:function(t){var n=this,r=t.getMeta(Tc);if(r&&null!=r.setHandle)return new e(r.setHandle,!1);if(r&&void 0!==r.setDragging)return new e(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&t.docChanged){var o=t.mapping.map(n.activeHandle,-1);return Zl(t.doc.resolve(o))||(o=-1),new e(o,n.dragging)}return n}}])}();function _c(e,t,n,r){var o="right"==n?-r:r,i=e.posAtCoords({left:t.clientX+o,top:t.clientY});if(!i)return-1;var a=i.pos,s=ql(e.state.doc.resolve(a));if(!s)return-1;if("right"==n)return s.pos;var u=$l.get(s.node(-1)),l=s.start(-1),c=u.map.indexOf(s.pos-l);return c%u.width==0?-1:l+u.map[c-1]}function Rc(e,t,n){var r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function Lc(e,t){e.dispatch(e.state.tr.setMeta(Tc,{setHandle:t}))}function Ic(e,t,n,r){for(var o=e.state.doc.resolve(t),i=o.node(-1),a=o.start(-1),s=$l.get(i).colCount(o.pos-a)+o.nodeAfter.attrs.colspan-1,u=e.domAtPos(o.start(-1)).node;u&&"TABLE"!=u.nodeName;)u=u.parentNode;u&&Pc(i,u.firstChild,u,r,s,n)}function Hc(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).allowTableNodeSelection,t=void 0!==e&&e;return new Fn({key:Wl,state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(Wl);if(null!=n)return-1==n?null:n;if(null==t||!e.docChanged)return t;var r=e.mapping.mapResult(t),o=r.deleted,i=r.pos;return o?null:i}},props:{decorations:rc,handleDOMEvents:{mousedown:Ac},createSelectionBetween:function(e){return null!=Wl.getState(e.state)?e.state.selection:null},handleTripleClick:xc,handleKeyDown:wc,handlePaste:Sc},appendTransaction:function(e,n,r){return function(e,t,n){var r,o,i=(t||e).selection,a=(t||e).doc;if(i instanceof mn&&(o=i.node.type.spec.tableRole)){if("cell"==o||"header_cell"==o)r=tc.create(a,i.from);else if("row"==o){var s=a.resolve(i.from+1);r=tc.rowSelection(s,s)}else if(!n){var u=$l.get(i.node),l=i.from+1,c=l+u.map[u.width*u.height-1];r=tc.create(a,l+1,c)}}else i instanceof pn&&function(e){var t=e.$from,n=e.$to;if(t.pos==n.pos||t.pos<n.pos-6)return!1;for(var r=t.pos,o=n.pos,i=t.depth;i>=0&&!(t.after(i+1)<t.end(i));i--,r++);for(var a=n.depth;a>=0&&!(n.before(a+1)>n.start(a));a--,o--);return r==o&&/row|table/.test(t.node(i).type.spec.tableRole)}(i)?r=pn.create(a,i.from):i instanceof pn&&function(e){for(var t,n,r=e.$from,o=e.$to,i=r.depth;i>0;i--){var a=r.node(i);if("cell"===a.type.spec.tableRole||"header_cell"===a.type.spec.tableRole){t=a;break}}for(var s=o.depth;s>0;s--){var u=o.node(s);if("cell"===u.type.spec.tableRole||"header_cell"===u.type.spec.tableRole){n=u;break}}return t!==n&&0===o.parentOffset}(i)&&(r=pn.create(a,i.$from.start(),i.$from.end()));return r&&(t||(t=e.tr)).setSelection(r),t}(r,ac(r,n),t)}})}function zc(e){return zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zc(e)}function Vc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gc(r.key),r)}}function Uc(e,t,n){return t&&$c(e.prototype,t),n&&$c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gc(e){var t=function(e){if("object"!=zc(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=zc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==zc(t)?t:t+""}function Wc(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Wc=function(){return!!e})()}function qc(e){return qc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qc(e)}function Kc(e,t){return Kc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kc(e,t)}var Jc=function(e){function t(e){return Vc(this,t),function(e,t,n){return t=qc(t),function(e,t){if(t&&("object"==zc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Wc()?Reflect.construct(t,n||[],qc(e).constructor):t.apply(e,n))}(this,t,[e,e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kc(e,t)}(t,e),Uc(t,[{key:"map",value:function(e,n){var r=e.resolve(n.map(this.head));return t.valid(r)?new t(r):ln.near(r)}},{key:"content",value:function(){return J.empty}},{key:"eq",value:function(e){return e instanceof t&&e.head==this.head}},{key:"toJSON",value:function(){return{type:"gapcursor",pos:this.head}}},{key:"getBookmark",value:function(){return new Zc(this.anchor)}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(e.resolve(n.pos))}},{key:"valid",value:function(e){var t=e.parent;if(t.isTextblock||!function(e){for(var t=e.depth;t>=0;t--){var n=e.index(t),r=e.node(t);if(0!=n)for(var o=r.child(n-1);;o=o.lastChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e)||!function(e){for(var t=e.depth;t>=0;t--){var n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(var o=r.child(n);;o=o.firstChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e))return!1;var n=t.type.spec.allowGapCursor;if(null!=n)return n;var r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}},{key:"findGapCursorFrom",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e:for(;;){if(!r&&t.valid(e))return e;for(var o=e.pos,i=null,a=e.depth;;a--){var s=e.node(a);if(n>0?e.indexAfter(a)<s.childCount:e.index(a)>0){i=s.child(n>0?e.indexAfter(a):e.index(a)-1);break}if(0==a)return null;o+=n;var u=e.doc.resolve(o);if(t.valid(u))return u}for(;;){var l=n>0?i.firstChild:i.lastChild;if(!l){if(i.isAtom&&!i.isText&&!mn.isSelectable(i)){e=e.doc.resolve(o+i.nodeSize*n),r=!1;continue e}break}i=l,o+=n;var c=e.doc.resolve(o);if(t.valid(c))return c}return null}}}])}(ln);Jc.prototype.visible=!1,Jc.findFrom=Jc.findGapCursorFrom,ln.jsonID("gapcursor",Jc);var Zc=function(){function e(t){Vc(this,e),this.pos=t}return Uc(e,[{key:"map",value:function(t){return new e(t.map(this.pos))}},{key:"resolve",value:function(e){var t=e.resolve(this.pos);return Jc.valid(t)?new Jc(t):ln.near(t)}}])}(),Xc=ga({ArrowLeft:Yc("horiz",-1),ArrowRight:Yc("horiz",1),ArrowUp:Yc("vert",-1),ArrowDown:Yc("vert",1)});function Yc(e,t){var n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,o){var i=e.selection,a=t>0?i.$to:i.$from,s=i.empty;if(i instanceof pn){if(!o.endOfTextblock(n)||0==a.depth)return!1;s=!1,a=e.doc.resolve(t>0?a.after():a.before())}var u=Jc.findGapCursorFrom(a,t,s);return!!u&&(r&&r(e.tr.setSelection(new Jc(u))),!0)}}function Qc(e,t,n){if(!e||!e.editable)return!1;var r=e.state.doc.resolve(t);if(!Jc.valid(r))return!1;var o=e.posAtCoords({left:n.clientX,top:n.clientY});return!(o&&o.inside>-1&&mn.isSelectable(e.state.doc.nodeAt(o.inside))||(e.dispatch(e.state.tr.setSelection(new Jc(r))),0))}function ed(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof Jc))return!1;var n=e.state.selection.$from,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;for(var o=$.empty,i=r.length-1;i>=0;i--)o=$.from(r[i].createAndFill(null,o));var a=e.state.tr.replace(n.pos,n.pos,new J(o,0,0));return a.setSelection(pn.near(a.doc.resolve(n.pos+1))),e.dispatch(a),!1}function td(e){if(!(e.selection instanceof Jc))return null;var t=document.createElement("div");return t.className="ProseMirror-gapcursor",Mi.create(e.doc,[Ai.widget(e.selection.head,t,{key:"gapcursor"})])}var nd=js.create({name:"gapCursor",addProseMirrorPlugins:function(){return[new Fn({props:{decorations:td,createSelectionBetween:function(e,t,n){return t.pos==n.pos&&Jc.valid(n)?new Jc(n):null},handleClick:Qc,handleKeyDown:Xc,handleDOMEvents:{beforeinput:ed}}})]},extendNodeSchema:function(e){var t;return{allowGapCursor:null!==(t=gs(cs(e,"allowGapCursor",{name:e.name,options:e.options,storage:e.storage})))&&void 0!==t?t:null}}}),rd=200,od=function(){};od.prototype.append=function(e){return e.length?(e=od.from(e),!this.length&&e||e.length<rd&&this.leafAppend(e)||this.length<rd&&e.leafPrepend(this)||this.appendInner(e)):this},od.prototype.prepend=function(e){return e.length?od.from(e).append(this):this},od.prototype.appendInner=function(e){return new ad(this,e)},od.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?od.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},od.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},od.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},od.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},od.from=function(e){return e instanceof od?e:e&&e.length?new id(e):od.empty};var id=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var o=t;o<n;o++)if(!1===e(this.values[o],r+o))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var o=t-1;o>=n;o--)if(!1===e(this.values[o],r+o))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=rd)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=rd)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(od);od.empty=new id([]);var ad=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var o=this.left.length;return!(t<o&&!1===this.left.forEachInner(e,t,Math.min(n,o),r))&&!(n>o&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,n)-o,r+o))&&void 0},t.prototype.forEachInvertedInner=function(e,t,n,r){var o=this.left.length;return!(t>o&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(n,o)-o,r+o))&&!(n<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),n,r))&&void 0},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(od);const sd=od;function ud(e){return ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ud(e)}function ld(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fd(r.key),r)}}function dd(e,t,n){return t&&cd(e.prototype,t),n&&cd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function fd(e){var t=function(e){if("object"!=ud(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ud(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ud(t)?t:t+""}var pd=function(){function e(t,n){ld(this,e),this.items=t,this.eventCount=n}return dd(e,[{key:"popEvent",value:function(t,n){var r=this;if(0==this.eventCount)return null;for(var o,i,a=this.items.length;;a--)if(this.items.get(a-1).selection){--a;break}n&&(o=this.remapping(a,this.items.length),i=o.maps.length);var s,u,l=t.tr,c=[],d=[];return this.items.forEach((function(t,n){if(!t.step)return o||(o=r.remapping(a,n+1),i=o.maps.length),i--,void d.push(t);if(o){d.push(new hd(t.map));var f,p=t.step.map(o.slice(i));p&&l.maybeStep(p).doc&&(f=l.mapping.maps[l.mapping.maps.length-1],c.push(new hd(f,void 0,void 0,c.length+d.length))),i--,f&&o.appendMap(f,i)}else l.maybeStep(t.step);return t.selection?(s=o?t.selection.map(o.slice(i)):t.selection,u=new e(r.items.slice(0,a).append(d.reverse().concat(c)),r.eventCount-1),!1):void 0}),this.items.length,0),{remaining:u,transform:l,selection:s}}},{key:"addTransform",value:function(t,n,r,o){for(var i=[],a=this.eventCount,s=this.items,u=!o&&s.length?s.get(s.length-1):null,l=0;l<t.steps.length;l++){var c,d=t.steps[l].invert(t.docs[l]),f=new hd(t.mapping.maps[l],d,n);(c=u&&u.merge(f))&&(f=c,l?i.pop():s=s.slice(0,s.length-1)),i.push(f),n&&(a++,n=void 0),o||(u=f)}var p,h,m,v=a-r.depth;return v>vd&&(h=v,(p=s).forEach((function(e,t){if(e.selection&&0==h--)return m=t,!1})),s=p.slice(m),a-=v),new e(s.append(i),a)}},{key:"remapping",value:function(e,t){var n=new dt;return this.items.forEach((function(t,r){var o=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,o)}),e,t),n}},{key:"addMaps",value:function(t){return 0==this.eventCount?this:new e(this.items.append(t.map((function(e){return new hd(e)}))),this.eventCount)}},{key:"rebased",value:function(t,n){if(!this.eventCount)return this;var r=[],o=Math.max(0,this.items.length-n),i=t.mapping,a=t.steps.length,s=this.eventCount;this.items.forEach((function(e){e.selection&&s--}),o);var u=n;this.items.forEach((function(e){var n=i.getMirror(--u);if(null!=n){a=Math.min(a,n);var o=i.maps[n];if(e.step){var l=t.steps[n].invert(t.docs[n]),c=e.selection&&e.selection.map(i.slice(u+1,n));c&&s++,r.push(new hd(o,l,c))}else r.push(new hd(o))}}),o);for(var l=[],c=n;c<a;c++)l.push(new hd(i.maps[c]));var d=new e(this.items.slice(0,o).append(l).append(r),s);return d.emptyItemCount()>500&&(d=d.compress(this.items.length-r.length)),d}},{key:"emptyItemCount",value:function(){var e=0;return this.items.forEach((function(t){t.step||e++})),e}},{key:"compress",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items.length,n=this.remapping(0,t),r=n.maps.length,o=[],i=0;return this.items.forEach((function(e,a){if(a>=t)o.push(e),e.selection&&i++;else if(e.step){var s=e.step.map(n.slice(r)),u=s&&s.getMap();if(r--,u&&n.appendMap(u,r),s){var l=e.selection&&e.selection.map(n.slice(r));l&&i++;var c,d=new hd(u.invert(),s,l),f=o.length-1;(c=o.length&&o[f].merge(d))?o[f]=c:o.push(d)}}else e.map&&r--}),this.items.length,0),new e(sd.from(o.reverse()),i)}}])}();pd.empty=new pd(sd.empty,0);var hd=function(){function e(t,n,r,o){ld(this,e),this.map=t,this.step=n,this.selection=r,this.mirrorOffset=o}return dd(e,[{key:"merge",value:function(t){if(this.step&&t.step&&!t.selection){var n=t.step.merge(this.step);if(n)return new e(n.getMap().invert(),n,this.selection)}}}])}(),md=dd((function e(t,n,r,o,i){ld(this,e),this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=i})),vd=20;function gd(e){for(var t=[],n=e.length-1;n>=0&&0==t.length;n--)e[n].forEach((function(e,n,r,o){return t.push(r,o)}));return t}function yd(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var o=t.map(e[r],1),i=t.map(e[r+1],-1);o<=i&&n.push(o,i)}return n}var bd=!1,Dd=null;function wd(e){var t=e.plugins;if(Dd!=t){bd=!1,Dd=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){bd=!0;break}}return bd}var Cd=new Bn("history"),kd=new Bn("closeHistory");function Ed(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Fn({key:Cd,state:{init:function(){return new md(pd.empty,pd.empty,null,0,-1)},apply:function(t,n,r){return function(e,t,n,r){var o,i=n.getMeta(Cd);if(i)return i.historyState;n.getMeta(kd)&&(e=new md(e.done,e.undone,null,0,-1));var a=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(a&&a.getMeta(Cd))return a.getMeta(Cd).redo?new md(e.done.addTransform(n,void 0,r,wd(t)),e.undone,gd(n.mapping.maps),e.prevTime,e.prevComposition):new md(e.done,e.undone.addTransform(n,void 0,r,wd(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||a&&!1===a.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new md(e.done.rebased(n,o),e.undone.rebased(n,o),yd(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new md(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),yd(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);var s=n.getMeta("composition"),u=0==e.prevTime||!a&&e.prevComposition!=s&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach((function(e,r){for(var o=0;o<t.length;o+=2)e<=t[o+1]&&r>=t[o]&&(n=!0)})),n}(n,e.prevRanges)),l=a?yd(e.prevRanges,n.mapping):gd(n.mapping.maps);return new md(e.done.addTransform(n,u?t.selection.getBookmark():void 0,r,wd(t)),pd.empty,l,n.time,null==s?e.prevComposition:s)}(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput:function(e,t){var n=t.inputType,r="historyUndo"==n?Sd:"historyRedo"==n?Ad:null;return!!r&&(t.preventDefault(),r(e.state,e.dispatch))}}}})}function xd(e,t){return function(n,r){var o=Cd.getState(n);if(!o||0==(e?o.undone:o.done).eventCount)return!1;if(r){var i=function(e,t,n){var r=wd(t),o=Cd.get(t).spec.config,i=(n?e.undone:e.done).popEvent(t,r);if(!i)return null;var a=i.selection.resolve(i.transform.doc),s=(n?e.done:e.undone).addTransform(i.transform,t.selection.getBookmark(),o,r),u=new md(n?s:i.remaining,n?i.remaining:s,null,0,-1);return i.transform.setSelection(a).setMeta(Cd,{redo:n,historyState:u})}(o,n,e);i&&r(t?i.scrollIntoView():i)}return!0}}var Sd=xd(!1,!0),Ad=xd(!0,!0);xd(!1,!1),xd(!0,!1);var Fd=js.create({name:"history",addOptions:function(){return{depth:100,newGroupDelay:500}},addCommands:function(){return{undo:function(){return function(e){var t=e.state,n=e.dispatch;return Sd(t,n)}},redo:function(){return function(e){var t=e.state,n=e.dispatch;return Ad(t,n)}}}},addProseMirrorPlugins:function(){return[Ed(this.options)]},addKeyboardShortcuts:function(){var e=this;return{"Mod-z":function(){return e.editor.commands.undo()},"Shift-Mod-z":function(){return e.editor.commands.redo()},"Mod-y":function(){return e.editor.commands.redo()},"Mod-я":function(){return e.editor.commands.undo()},"Shift-Mod-я":function(){return e.editor.commands.redo()}}}});const Od=(e,t)=>{for(const n in t)e[n]=t[n];return e},Md="numeric",Bd="ascii",Pd="alpha",Td="asciinumeric",Nd="alphanumeric",jd="domain",_d="emoji",Rd="scheme",Ld="slashscheme",Id="whitespace";function Hd(e,t){return e in t||(t[e]=[]),t[e]}function zd(e,t,n){t[Md]&&(t[Td]=!0,t[Nd]=!0),t[Bd]&&(t[Td]=!0,t[Pd]=!0),t[Td]&&(t[Nd]=!0),t[Pd]&&(t[Nd]=!0),t[Nd]&&(t[jd]=!0),t[_d]&&(t[jd]=!0);for(const r in t){const t=Hd(r,n);t.indexOf(e)<0&&t.push(e)}}function Vd(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}Vd.groups={},Vd.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let n=0;n<t.jr.length;n++){const r=t.jr[n][0],o=t.jr[n][1];if(o&&r.test(e))return o}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let o=0;o<e.length;o++)this.tt(e[o],t,n,r)},tr(e,t,n,r){let o;return r=r||Vd.groups,t&&t.j?o=t:(o=new Vd(t),n&&r&&zd(t,n,r)),this.jr.push([e,o]),o},ts(e,t,n,r){let o=this;const i=e.length;if(!i)return o;for(let t=0;t<i-1;t++)o=o.tt(e[t]);return o.tt(e[i-1],t,n,r)},tt(e,t,n,r){r=r||Vd.groups;const o=this;if(t&&t.j)return o.j[e]=t,t;const i=t;let a,s=o.go(e);if(s?(a=new Vd,Od(a.j,s.j),a.jr.push.apply(a.jr,s.jr),a.jd=s.jd,a.t=s.t):a=new Vd,i){if(r)if(a.t&&"string"==typeof a.t){const e=Od(function(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}(a.t,r),n);zd(i,e,r)}else n&&zd(i,n,r);a.t=i}return o.j[e]=a,a}};const $d=(e,t,n,r,o)=>e.ta(t,n,r,o),Ud=(e,t,n,r,o)=>e.tr(t,n,r,o),Gd=(e,t,n,r,o)=>e.ts(t,n,r,o),Wd=(e,t,n,r,o)=>e.tt(t,n,r,o),qd="WORD",Kd="UWORD",Jd="ASCIINUMERICAL",Zd="ALPHANUMERICAL",Xd="LOCALHOST",Yd="TLD",Qd="UTLD",ef="SCHEME",tf="SLASH_SCHEME",nf="NUM",rf="WS",of="NL",af="OPENBRACE",sf="CLOSEBRACE",uf="OPENBRACKET",lf="CLOSEBRACKET",cf="OPENPAREN",df="CLOSEPAREN",ff="OPENANGLEBRACKET",pf="CLOSEANGLEBRACKET",hf="FULLWIDTHLEFTPAREN",mf="FULLWIDTHRIGHTPAREN",vf="LEFTCORNERBRACKET",gf="RIGHTCORNERBRACKET",yf="LEFTWHITECORNERBRACKET",bf="RIGHTWHITECORNERBRACKET",Df="FULLWIDTHLESSTHAN",wf="FULLWIDTHGREATERTHAN",Cf="AMPERSAND",kf="APOSTROPHE",Ef="ASTERISK",xf="AT",Sf="BACKSLASH",Af="BACKTICK",Ff="CARET",Of="COLON",Mf="COMMA",Bf="DOLLAR",Pf="DOT",Tf="EQUALS",Nf="EXCLAMATION",jf="HYPHEN",_f="PERCENT",Rf="PIPE",Lf="PLUS",If="POUND",Hf="QUERY",zf="QUOTE",Vf="FULLWIDTHMIDDLEDOT",$f="SEMI",Uf="SLASH",Gf="TILDE",Wf="UNDERSCORE",qf="EMOJI",Kf="SYM";var Jf=Object.freeze({__proto__:null,ALPHANUMERICAL:Zd,AMPERSAND:Cf,APOSTROPHE:kf,ASCIINUMERICAL:Jd,ASTERISK:Ef,AT:xf,BACKSLASH:Sf,BACKTICK:Af,CARET:Ff,CLOSEANGLEBRACKET:pf,CLOSEBRACE:sf,CLOSEBRACKET:lf,CLOSEPAREN:df,COLON:Of,COMMA:Mf,DOLLAR:Bf,DOT:Pf,EMOJI:qf,EQUALS:Tf,EXCLAMATION:Nf,FULLWIDTHGREATERTHAN:wf,FULLWIDTHLEFTPAREN:hf,FULLWIDTHLESSTHAN:Df,FULLWIDTHMIDDLEDOT:Vf,FULLWIDTHRIGHTPAREN:mf,HYPHEN:jf,LEFTCORNERBRACKET:vf,LEFTWHITECORNERBRACKET:yf,LOCALHOST:Xd,NL:of,NUM:nf,OPENANGLEBRACKET:ff,OPENBRACE:af,OPENBRACKET:uf,OPENPAREN:cf,PERCENT:_f,PIPE:Rf,PLUS:Lf,POUND:If,QUERY:Hf,QUOTE:zf,RIGHTCORNERBRACKET:gf,RIGHTWHITECORNERBRACKET:bf,SCHEME:ef,SEMI:$f,SLASH:Uf,SLASH_SCHEME:tf,SYM:Kf,TILDE:Gf,TLD:Yd,UNDERSCORE:Wf,UTLD:Qd,UWORD:Kd,WORD:qd,WS:rf});const Zf=/[a-z]/,Xf=/\p{L}/u,Yf=/\p{Emoji}/u,Qf=/\d/,ep=/\s/;let tp=null,np=null;function rp(e,t){const n=function(e){const t=[],n=e.length;let r=0;for(;r<n;){let o,i=e.charCodeAt(r),a=i<55296||i>56319||r+1===n||(o=e.charCodeAt(r+1))<56320||o>57343?e[r]:e.slice(r,r+2);t.push(a),r+=a.length}return t}(t.replace(/[A-Z]/g,(e=>e.toLowerCase()))),r=n.length,o=[];let i=0,a=0;for(;a<r;){let s=e,u=null,l=0,c=null,d=-1,f=-1;for(;a<r&&(u=s.go(n[a]));)s=u,s.accepts()?(d=0,f=0,c=s):d>=0&&(d+=n[a].length,f++),l+=n[a].length,i+=n[a].length,a++;i-=d,a-=f,l-=d,o.push({t:c.t,v:t.slice(i-l,i),s:i-l,e:i})}return o}function op(e,t,n,r,o){let i;const a=t.length;for(let n=0;n<a-1;n++){const a=t[n];e.j[a]?i=e.j[a]:(i=new Vd(r),i.jr=o.slice(),e.j[a]=i),e=i}return i=new Vd(n),i.jr=o.slice(),e.j[t[a-1]]=i,i}function ip(e){const t=[],n=[];let r=0;for(;r<e.length;){let o=0;for(;"0123456789".indexOf(e[r+o])>=0;)o++;if(o>0){t.push(n.join(""));for(let t=parseInt(e.substring(r,r+o),10);t>0;t--)n.pop();r+=o}else n.push(e[r]),r++}return t}const ap={defaultProtocol:"http",events:null,format:up,formatHref:up,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function sp(e,t=null){let n=Od({},ap);e&&(n=Od(n,e instanceof sp?e.o:e));const r=n.ignoreTags,o=[];for(let e=0;e<r.length;e++)o.push(r[e].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=o}function up(e){return e}function lp(e,t){this.t="token",this.v=e,this.tk=t}function cp(e,t){class n extends lp{constructor(t,n){super(t,n),this.t=e}}for(const e in t)n.prototype[e]=t[e];return n.t=e,n}sp.prototype={o:ap,ignoreTags:[],defaultRender:e=>e,check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=null!=t;let o=this.o[e];return o?("object"==typeof o?(o=n.t in o?o[n.t]:ap[e],"function"==typeof o&&r&&(o=o(t,n))):"function"==typeof o&&r&&(o=o(t,n.t,n)),o):o},getObj(e,t,n){let r=this.o[e];return"function"==typeof r&&null!=t&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}},lp.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"…":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=ap.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),o=e.get("tagName",n,t),i=this.toFormattedString(e),a={},s=e.get("className",n,t),u=e.get("target",n,t),l=e.get("rel",n,t),c=e.getObj("attributes",n,t),d=e.getObj("events",n,t);return a.href=r,s&&(a.class=s),u&&(a.target=u),l&&(a.rel=l),c&&Od(a,c),{tagName:o,attributes:a,content:i,eventListeners:d}}};const dp=cp("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),fp=cp("text"),pp=cp("nl"),hp=cp("url",{isLink:!0,toHref(e=ap.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==Xd&&e[1].t===Of}}),mp=e=>new Vd(e);function vp(e,t,n){const r=n[0].s,o=n[n.length-1].e;return new e(t.slice(r,o),n)}const gp="undefined"!=typeof console&&console&&console.warn||(()=>{}),yp={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function bp(e,t=!1){if(yp.initialized&&gp(`linkifyjs: already initialized - will not register custom scheme "${e}" until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error('linkifyjs: incorrect scheme format.\n1. Must only contain digits, lowercase ASCII letters or "-"\n2. Cannot start or end with "-"\n3. "-" cannot repeat');yp.customSchemes.push([e,t])}function Dp(e){return yp.initialized||function(){yp.scanner=function(e=[]){const t={};Vd.groups=t;const n=new Vd;null==tp&&(tp=ip("aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2")),null==np&&(np=ip("ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2")),Wd(n,"'",kf),Wd(n,"{",af),Wd(n,"}",sf),Wd(n,"[",uf),Wd(n,"]",lf),Wd(n,"(",cf),Wd(n,")",df),Wd(n,"<",ff),Wd(n,">",pf),Wd(n,"（",hf),Wd(n,"）",mf),Wd(n,"「",vf),Wd(n,"」",gf),Wd(n,"『",yf),Wd(n,"』",bf),Wd(n,"＜",Df),Wd(n,"＞",wf),Wd(n,"&",Cf),Wd(n,"*",Ef),Wd(n,"@",xf),Wd(n,"`",Af),Wd(n,"^",Ff),Wd(n,":",Of),Wd(n,",",Mf),Wd(n,"$",Bf),Wd(n,".",Pf),Wd(n,"=",Tf),Wd(n,"!",Nf),Wd(n,"-",jf),Wd(n,"%",_f),Wd(n,"|",Rf),Wd(n,"+",Lf),Wd(n,"#",If),Wd(n,"?",Hf),Wd(n,'"',zf),Wd(n,"/",Uf),Wd(n,";",$f),Wd(n,"~",Gf),Wd(n,"_",Wf),Wd(n,"\\",Sf),Wd(n,"・",Vf);const r=Ud(n,Qf,nf,{[Md]:!0});Ud(r,Qf,r);const o=Ud(r,Zf,Jd,{[Td]:!0}),i=Ud(r,Xf,Zd,{[Nd]:!0}),a=Ud(n,Zf,qd,{[Bd]:!0});Ud(a,Qf,o),Ud(a,Zf,a),Ud(o,Qf,o),Ud(o,Zf,o);const s=Ud(n,Xf,Kd,{[Pd]:!0});Ud(s,Zf),Ud(s,Qf,i),Ud(s,Xf,s),Ud(i,Qf,i),Ud(i,Zf),Ud(i,Xf,i);const u=Wd(n,"\n",of,{[Id]:!0}),l=Wd(n,"\r",rf,{[Id]:!0}),c=Ud(n,ep,rf,{[Id]:!0});Wd(n,"￼",c),Wd(l,"\n",u),Wd(l,"￼",c),Ud(l,ep,c),Wd(c,"\r"),Wd(c,"\n"),Ud(c,ep,c),Wd(c,"￼",c);const d=Ud(n,Yf,qf,{[_d]:!0});Wd(d,"#"),Ud(d,Yf,d),Wd(d,"️",d);const f=Wd(d,"‍");Wd(f,"#"),Ud(f,Yf,d);const p=[[Zf,a],[Qf,o]],h=[[Zf,null],[Xf,s],[Qf,i]];for(let e=0;e<tp.length;e++)op(n,tp[e],Yd,qd,p);for(let e=0;e<np.length;e++)op(n,np[e],Qd,Kd,h);zd(Yd,{tld:!0,ascii:!0},t),zd(Qd,{utld:!0,alpha:!0},t),op(n,"file",ef,qd,p),op(n,"mailto",ef,qd,p),op(n,"http",tf,qd,p),op(n,"https",tf,qd,p),op(n,"ftp",tf,qd,p),op(n,"ftps",tf,qd,p),zd(ef,{scheme:!0,ascii:!0},t),zd(tf,{slashscheme:!0,ascii:!0},t),e=e.sort(((e,t)=>e[0]>t[0]?1:-1));for(let t=0;t<e.length;t++){const r=e[t][0],o=e[t][1]?{[Rd]:!0}:{[Ld]:!0};r.indexOf("-")>=0?o[jd]=!0:Zf.test(r)?Qf.test(r)?o[Td]=!0:o[Bd]=!0:o[Md]=!0,Gd(n,r,r,o)}return Gd(n,"localhost",Xd,{ascii:!0}),n.jd=new Vd(Kf),{start:n,tokens:Od({groups:t},Jf)}}(yp.customSchemes);for(let e=0;e<yp.tokenQueue.length;e++)yp.tokenQueue[e][1]({scanner:yp.scanner});yp.parser=function({groups:e}){const t=e.domain.concat([Cf,Ef,xf,Sf,Af,Ff,Bf,Tf,jf,nf,_f,Rf,Lf,If,Uf,Kf,Gf,Wf]),n=[kf,Of,Mf,Pf,Nf,_f,Hf,zf,$f,ff,pf,af,sf,lf,uf,cf,df,hf,mf,vf,gf,yf,bf,Df,wf],r=[Cf,kf,Ef,Sf,Af,Ff,Bf,Tf,jf,af,sf,_f,Rf,Lf,If,Hf,Uf,Kf,Gf,Wf],o=mp(),i=Wd(o,Gf);$d(i,r,i),$d(i,e.domain,i);const a=mp(),s=mp(),u=mp();$d(o,e.domain,a),$d(o,e.scheme,s),$d(o,e.slashscheme,u),$d(a,r,i),$d(a,e.domain,a);const l=Wd(a,xf);Wd(i,xf,l),Wd(s,xf,l),Wd(u,xf,l);const c=Wd(i,Pf);$d(c,r,i),$d(c,e.domain,i);const d=mp();$d(l,e.domain,d),$d(d,e.domain,d);const f=Wd(d,Pf);$d(f,e.domain,d);const p=mp(dp);$d(f,e.tld,p),$d(f,e.utld,p),Wd(l,Xd,p);const h=Wd(d,jf);Wd(h,jf,h),$d(h,e.domain,d),$d(p,e.domain,d),Wd(p,Pf,f),Wd(p,jf,h);const m=Wd(p,Of);$d(m,e.numeric,dp);const v=Wd(a,jf),g=Wd(a,Pf);Wd(v,jf,v),$d(v,e.domain,a),$d(g,r,i),$d(g,e.domain,a);const y=mp(hp);$d(g,e.tld,y),$d(g,e.utld,y),$d(y,e.domain,a),$d(y,r,i),Wd(y,Pf,g),Wd(y,jf,v),Wd(y,xf,l);const b=Wd(y,Of),D=mp(hp);$d(b,e.numeric,D);const w=mp(hp),C=mp();$d(w,t,w),$d(w,n,C),$d(C,t,w),$d(C,n,C),Wd(y,Uf,w),Wd(D,Uf,w);const k=Wd(s,Of),E=Wd(u,Of),x=Wd(E,Uf),S=Wd(x,Uf);$d(s,e.domain,a),Wd(s,Pf,g),Wd(s,jf,v),$d(u,e.domain,a),Wd(u,Pf,g),Wd(u,jf,v),$d(k,e.domain,w),Wd(k,Uf,w),Wd(k,Hf,w),$d(S,e.domain,w),$d(S,t,w),Wd(S,Uf,w);const A=[[af,sf],[uf,lf],[cf,df],[ff,pf],[hf,mf],[vf,gf],[yf,bf],[Df,wf]];for(let e=0;e<A.length;e++){const[r,o]=A[e],i=Wd(w,r);Wd(C,r,i),Wd(i,o,w);const a=mp(hp);$d(i,t,a);const s=mp();$d(i,n),$d(a,t,a),$d(a,n,s),$d(s,t,a),$d(s,n,s),Wd(a,o,w),Wd(s,o,w)}return Wd(o,Xd,y),Wd(o,of,pp),{start:o,tokens:Jf}}(yp.scanner.tokens);for(let e=0;e<yp.pluginQueue.length;e++)yp.pluginQueue[e][1]({scanner:yp.scanner,parser:yp.parser});yp.initialized=!0}(),function(e,t,n){let r=n.length,o=0,i=[],a=[];for(;o<r;){let s=e,u=null,l=null,c=0,d=null,f=-1;for(;o<r&&!(u=s.go(n[o].t));)a.push(n[o++]);for(;o<r&&(l=u||s.go(n[o].t));)u=null,s=l,s.accepts()?(f=0,d=s):f>=0&&f++,o++,c++;if(f<0)o-=c,o<r&&(a.push(n[o]),o++);else{a.length>0&&(i.push(vp(fp,t,a)),a=[]),o-=f,c-=f;const e=d.t,r=n.slice(o-c,o);i.push(vp(e,t,r))}}return a.length>0&&i.push(vp(fp,t,a)),i}(yp.parser.start,e,rp(yp.scanner.start,e))}function wp(e,t=null,n=null){if(t&&"object"==typeof t){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new sp(n),o=Dp(e),i=[];for(let e=0;e<o.length;e++){const n=o[e];!n.isLink||t&&n.t!==t||!r.check(n)||i.push(n.toFormattedObject(r))}return i}function Cp(e){return Cp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cp(e)}function kp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ep(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kp(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xp(e,t,n){return(t=function(e){var t=function(e){if("object"!=Cp(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Cp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Cp(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Dp.scan=rp;var Ap=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function Fp(e,t){var n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach((function(e){var t="string"==typeof e?e:e.scheme;t&&n.push(t)})),!e||e.replace(Ap,"").match(new RegExp("^(?:(?:".concat(n.join("|"),"):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))"),"i"))}var Op=Ms.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate:function(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach((function(e){"string"!=typeof e?bp(e.scheme,e.optionalSlashes):bp(e)}))},onDestroy:function(){Vd.groups={},yp.scanner=null,yp.parser=null,yp.tokenQueue=[],yp.pluginQueue=[],yp.customSchemes=[],yp.initialized=!1},inclusive:function(){return this.options.autolink},addOptions:function(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:function(e,t){return!!Fp(e,t.protocols)},validate:function(e){return!!e},shouldAutoLink:function(e){return!!e}}},addAttributes:function(){return{href:{default:null,parseHTML:function(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML:function(){var e=this;return[{tag:"a[href]",getAttrs:function(t){var n=t.getAttribute("href");return!(!n||!e.options.isAllowedUri(n,{defaultValidate:function(t){return!!Fp(t,e.options.protocols)},protocols:e.options.protocols,defaultProtocol:e.options.defaultProtocol}))&&null}}]},renderHTML:function(e){var t=this,n=e.HTMLAttributes;return this.options.isAllowedUri(n.href,{defaultValidate:function(e){return!!Fp(e,t.options.protocols)},protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",hs(this.options.HTMLAttributes,n),0]:["a",hs(this.options.HTMLAttributes,Ep(Ep({},n),{},{href:""})),0]},addCommands:function(){var e=this;return{setLink:function(t){return function(n){var r=n.chain,o=t.href;return!!e.options.isAllowedUri(o,{defaultValidate:function(t){return!!Fp(t,e.options.protocols)},protocols:e.options.protocols,defaultProtocol:e.options.defaultProtocol})&&r().setMark(e.name,t).setMeta("preventAutolink",!0).run()}},toggleLink:function(t){return function(n){var r=n.chain,o=t.href;return!!e.options.isAllowedUri(o,{defaultValidate:function(t){return!!Fp(t,e.options.protocols)},protocols:e.options.protocols,defaultProtocol:e.options.defaultProtocol})&&r().toggleMark(e.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},unsetLink:function(){return function(t){return(0,t.chain)().unsetMark(e.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}}}},addPasteRules:function(){var e=this;return[_u({find:function(t){var n=[];if(t){var r=e.options,o=r.protocols,i=r.defaultProtocol,a=wp(t).filter((function(t){return t.isLink&&e.options.isAllowedUri(t.value,{defaultValidate:function(e){return!!Fp(e,o)},protocols:o,defaultProtocol:i})}));a.length&&a.forEach((function(e){return n.push({text:e.value,data:{href:e.href},index:e.start})}))}return n},type:this.type,getAttributes:function(e){var t;return{href:null===(t=e.data)||void 0===t?void 0:t.href}}})]},addProseMirrorPlugins:function(){var e=this,t=[],n=this.options,r=n.protocols,o=n.defaultProtocol;return this.options.autolink&&t.push(function(e){return new Fn({key:new Bn("autolink"),appendTransaction:function(t,n,r){var o=t.some((function(e){return e.docChanged}))&&!n.doc.eq(r.doc),i=t.some((function(e){return e.getMeta("preventAutolink")}));if(o&&!i){var a=r.tr;if(cu(iu(n.doc,function(e){return function(e){if(Array.isArray(e))return Sp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Sp(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sp(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t))).forEach((function(t){var n,o,i,s=t.newRange,u=su(r.doc,s,(function(e){return e.isTextblock}));if(u.length>1?(n=u[0],o=r.doc.textBetween(n.pos,n.pos+n.node.nodeSize,void 0," ")):u.length&&r.doc.textBetween(s.from,s.to," "," ").endsWith(" ")&&(n=u[0],o=r.doc.textBetween(n.pos,s.to,void 0," ")),n&&o){var l=o.split(" ").filter((function(e){return""!==e}));if(l.length<=0)return!1;var c=l[l.length-1],d=n.pos+o.lastIndexOf(c);if(!c)return!1;var f=Dp(c).map((function(t){return t.toObject(e.defaultProtocol)}));if(!(1===(i=f).length?i[0].isLink:3===i.length&&i[1].isLink&&["()","[]"].includes(i[0].value+i[2].value)))return!1;f.filter((function(e){return e.isLink})).map((function(e){return Ep(Ep({},e),{},{from:d+e.start+1,to:d+e.end+1})})).filter((function(e){return!r.schema.marks.code||!r.doc.rangeHasMark(e.from,e.to,r.schema.marks.code)})).filter((function(t){return e.validate(t.value)})).filter((function(t){return e.shouldAutoLink(t.value)})).forEach((function(t){du(t.from,t.to,r.doc).some((function(t){return t.mark.type===e.type}))||a.addMark(t.from,t.to,e.type.create({href:t.href}))}))}})),a.steps.length)return a}}})}({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:function(t){return e.options.isAllowedUri(t,{defaultValidate:function(e){return!!Fp(e,r)},protocols:r,defaultProtocol:o})},shouldAutoLink:this.options.shouldAutoLink})),!0===this.options.openOnClick&&t.push(function(e){return new Fn({key:new Bn("handleClickLink"),props:{handleClick:function(t,n,r){var o,i;if(0!==r.button)return!1;if(!t.editable)return!1;for(var a=r.target,s=[];"DIV"!==a.nodeName;)s.push(a),a=a.parentNode;if(!s.find((function(e){return"A"===e.nodeName})))return!1;var u=lu(t.state,e.type.name),l=r.target,c=null!==(o=null==l?void 0:l.href)&&void 0!==o?o:u.href,d=null!==(i=null==l?void 0:l.target)&&void 0!==i?i:u.target;return!(!l||!c||(window.open(c,d),0))}}})}({type:this.type})),this.options.linkOnPaste&&t.push(function(e){return new Fn({key:new Bn("handlePasteLink"),props:{handlePaste:function(t,n,r){if(t.state.selection.empty)return!1;var o="";r.content.forEach((function(e){o+=e.textContent}));var i=wp(o,{defaultProtocol:e.defaultProtocol}).find((function(e){return e.isLink&&e.value===o}));return!(!o||!i)&&e.editor.commands.setMark(e.type,{href:i.href})}}})}({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),Mp=Nu.create({name:"text",group:"inline"});function Bp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||Tp(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pp(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Tp(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Tp(e,t){if(e){if("string"==typeof e)return Np(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Np(e,t):void 0}}function Np(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var jp=function(){return new Map},_p=function(e){var t=jp();return e.forEach((function(e,n){t.set(n,e)})),t},Rp=function(e,t,n){var r=e.get(t);return void 0===r&&e.set(t,r=n()),r},Lp=function(){return new Set},Ip=function(e){return e[e.length-1]},Hp=function(e,t){for(var n=0;n<t.length;n++)e.push(t[n])},zp=Array.from,Vp=Array.isArray;function $p(e){return $p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$p(e)}function Up(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Gp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Wp(r.key),r)}}function Wp(e){var t=function(e){if("object"!=$p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=$p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$p(t)?t:t+""}var qp=function(){return function(e,t,n){return t&&Gp(e.prototype,t),n&&Gp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._observers=jp()}),[{key:"on",value:function(e,t){return Rp(this._observers,e,Lp).add(t),t}},{key:"once",value:function(e,t){var n=this,r=function(){n.off(e,r),t.apply(void 0,arguments)};this.on(e,r)}},{key:"off",value:function(e,t){var n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}},{key:"emit",value:function(e,t){return zp((this._observers.get(e)||jp()).values()).forEach((function(e){return e.apply(void 0,function(e){return function(e){if(Array.isArray(e))return Up(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Up(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Up(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t))}))}},{key:"destroy",value:function(){this._observers=jp()}}])}(),Kp=Math.floor,Jp=(Math.ceil,Math.abs),Zp=(Math.imul,Math.round,Math.log10,Math.log2,Math.log,Math.sqrt,function(e,t){return e<t?e:t}),Xp=function(e,t){return e>t?e:t},Yp=(Number.isNaN,Math.pow,Math.sign,function(e){return 0!==e?e<0:1/e<0}),Qp=64,eh=128,th=127,nh=Number.MAX_SAFE_INTEGER,rh=(Number.MIN_SAFE_INTEGER,Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Kp(e)===e}),oh=(Number.isNaN,Number.parseInt,String.fromCharCode),ih=(String.fromCodePoint,oh(65535),/^\s*/g),ah=/([A-Z])/g,sh=function(e,t){return function(e){return e.replace(ih,"")}(e.replace(ah,(function(e){return"".concat(t).concat(function(e){return e.toLowerCase()}(e))})))},uh="undefined"!=typeof TextEncoder?new TextEncoder:null,lh=uh?function(e){return uh.encode(e)}:function(e){for(var t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=t.codePointAt(o);return r},ch="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});function dh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dh=function(){return!!e})()}function fh(e){return fh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fh(e)}function ph(e,t){return ph=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ph(e,t)}function hh(e){return hh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hh(e)}function mh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gh(r.key),r)}}function vh(e,t,n){return t&&mh(e.prototype,t),n&&mh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function gh(e){var t=function(e){if("object"!=hh(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=hh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==hh(t)?t:t+""}function yh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}ch&&1===ch.decode(new Uint8Array).length&&(ch=null);var bh=vh((function e(){yh(this,e),this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]})),Dh=function(){return new bh},wh=function(e){for(var t=new Uint8Array(function(e){for(var t=e.cpos,n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t}(e)),n=0,r=0;r<e.bufs.length;r++){var o=e.bufs[r];t.set(o,n),n+=o.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},Ch=function(e,t){var n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},kh=Ch,Eh=function(e,t){for(;t>th;)Ch(e,eh|th&t),t=Kp(t/128);Ch(e,th&t)},xh=function(e,t){var n=Yp(t);for(n&&(t=-t),Ch(e,(t>63?eh:0)|(n?Qp:0)|63&t),t=Kp(t/64);t>0;)Ch(e,(t>th?eh:0)|th&t),t=Kp(t/128)},Sh=new Uint8Array(3e4),Ah=Sh.length/3,Fh=uh&&uh.encodeInto?function(e,t){if(t.length<Ah){var n=uh.encodeInto(t,Sh).written||0;Eh(e,n);for(var r=0;r<n;r++)Ch(e,Sh[r])}else Mh(e,lh(t))}:function(e,t){var n=unescape(encodeURIComponent(t)),r=n.length;Eh(e,r);for(var o=0;o<r;o++)Ch(e,n.codePointAt(o))},Oh=function(e,t){var n=e.cbuf.length,r=e.cpos,o=Zp(n-r,t.length),i=t.length-o;e.cbuf.set(t.subarray(0,o),r),e.cpos+=o,i>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(Xp(2*n,i)),e.cbuf.set(t.subarray(o)),e.cpos=i)},Mh=function(e,t){Eh(e,t.byteLength),Oh(e,t)},Bh=function(e,t){!function(e,t){var n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*Xp(n,t)),e.cpos=0)}(e,t);var n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},Ph=new DataView(new ArrayBuffer(4)),Th=function(e,t){switch(hh(t)){case"string":Ch(e,119),Fh(e,t);break;case"number":rh(t)&&Jp(t)<=2147483647?(Ch(e,125),xh(e,t)):(a=t,Ph.setFloat32(0,a),Ph.getFloat32(0)===a?(Ch(e,124),function(e,t){Bh(e,4).setFloat32(0,t,!1)}(e,t)):(Ch(e,123),function(e,t){Bh(e,8).setFloat64(0,t,!1)}(e,t)));break;case"bigint":Ch(e,122),function(e,t){Bh(e,8).setBigInt64(0,t,!1)}(e,t);break;case"object":if(null===t)Ch(e,126);else if(Vp(t)){Ch(e,117),Eh(e,t.length);for(var n=0;n<t.length;n++)Th(e,t[n])}else if(t instanceof Uint8Array)Ch(e,116),Mh(e,t);else{Ch(e,118);var r=Object.keys(t);Eh(e,r.length);for(var o=0;o<r.length;o++){var i=r[o];Fh(e,i),Th(e,t[i])}}break;case"boolean":Ch(e,t?120:121);break;default:Ch(e,127)}var a},Nh=function(e){function t(e){var n;return yh(this,t),(n=function(e,t,n){return t=fh(t),function(e,t){if(t&&("object"==hh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,dh()?Reflect.construct(t,n||[],fh(e).constructor):t.apply(e,n))}(this,t)).w=e,n.s=null,n.count=0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ph(e,t)}(t,e),vh(t,[{key:"write",value:function(e){this.s===e?this.count++:(this.count>0&&Eh(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}])}(bh),jh=function(e){e.count>0&&(xh(e.encoder,1===e.count?e.s:-e.s),e.count>1&&Eh(e.encoder,e.count-2))},_h=function(){return vh((function e(){yh(this,e),this.encoder=new bh,this.s=0,this.count=0}),[{key:"write",value:function(e){this.s===e?this.count++:(jh(this),this.count=1,this.s=e)}},{key:"toUint8Array",value:function(){return jh(this),wh(this.encoder)}}])}(),Rh=function(e){if(e.count>0){var t=2*e.diff+(1===e.count?0:1);xh(e.encoder,t),e.count>1&&Eh(e.encoder,e.count-2)}},Lh=function(){return vh((function e(){yh(this,e),this.encoder=new bh,this.s=0,this.count=0,this.diff=0}),[{key:"write",value:function(e){this.diff===e-this.s?(this.s=e,this.count++):(Rh(this),this.count=1,this.diff=e-this.s,this.s=e)}},{key:"toUint8Array",value:function(){return Rh(this),wh(this.encoder)}}])}(),Ih=function(){return vh((function e(){yh(this,e),this.sarr=[],this.s="",this.lensE=new _h}),[{key:"write",value:function(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}},{key:"toUint8Array",value:function(){var e=new bh;return this.sarr.push(this.s),this.s="",Fh(e,this.sarr.join("")),Oh(e,this.lensE.toUint8Array()),wh(e)}}])}(),Hh=function(e){return new Error(e)},zh=function(){throw Hh("Method unimplemented")},Vh=function(){throw Hh("Unexpected case")};function $h(e){return $h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$h(e)}function Uh(e,t,n){return t=Wh(t),function(e,t){if(t&&("object"==$h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Gh()?Reflect.construct(t,n||[],Wh(e).constructor):t.apply(e,n))}function Gh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Gh=function(){return!!e})()}function Wh(e){return Wh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wh(e)}function qh(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kh(e,t)}function Kh(e,t){return Kh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kh(e,t)}function Jh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xh(r.key),r)}}function Zh(e,t,n){return t&&Jh(e.prototype,t),n&&Jh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xh(e){var t=function(e){if("object"!=$h(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=$h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$h(t)?t:t+""}function Yh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Qh=Hh("Unexpected end of array"),em=Hh("Integer out of Range"),tm=Zh((function e(t){Yh(this,e),this.arr=t,this.pos=0})),nm=function(e){return new tm(e)},rm=function(e){return function(e,t){var n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n}(e,im(e))},om=function(e){return e.arr[e.pos++]},im=function(e){for(var t=0,n=1,r=e.arr.length;e.pos<r;){var o=e.arr[e.pos++];if(t+=(o&th)*n,n*=128,o<eh)return t;if(t>nh)throw em}throw Qh},am=function(e){var t=e.arr[e.pos++],n=63&t,r=64,o=(t&Qp)>0?-1:1;if(!(t&eh))return o*n;for(var i=e.arr.length;e.pos<i;){if(n+=((t=e.arr[e.pos++])&th)*r,r*=128,t<eh)return o*n;if(n>nh)throw em}throw Qh},sm=ch?function(e){return ch.decode(rm(e))}:function(e){var t=im(e);if(0===t)return"";var n=String.fromCodePoint(om(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(om(e));else for(;t>0;){var r=t<1e4?t:1e4,o=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,o),t-=r}return decodeURIComponent(escape(n))},um=function(e,t){var n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},lm=[function(e){},function(e){return null},am,function(e){return um(e,4).getFloat32(0,!1)},function(e){return um(e,8).getFloat64(0,!1)},function(e){return um(e,8).getBigInt64(0,!1)},function(e){return!1},function(e){return!0},sm,function(e){for(var t=im(e),n={},r=0;r<t;r++)n[sm(e)]=cm(e);return n},function(e){for(var t=im(e),n=[],r=0;r<t;r++)n.push(cm(e));return n},rm],cm=function(e){return lm[127-om(e)](e)},dm=function(e){function t(e,n){var r;return Yh(this,t),(r=Uh(this,t,[e])).reader=n,r.s=null,r.count=0,r}return qh(t,e),Zh(t,[{key:"read",value:function(){return 0===this.count&&(this.s=this.reader(this),(e=this).pos!==e.arr.length?this.count=im(this)+1:this.count=-1),this.count--,this.s;var e}}])}(tm),fm=function(e){function t(e){var n;return Yh(this,t),(n=Uh(this,t,[e])).s=0,n.count=0,n}return qh(t,e),Zh(t,[{key:"read",value:function(){if(0===this.count){this.s=am(this);var e=Yp(this.s);this.count=1,e&&(this.s=-this.s,this.count=im(this)+2)}return this.count--,this.s}}])}(tm),pm=function(e){function t(e){var n;return Yh(this,t),(n=Uh(this,t,[e])).s=0,n.count=0,n.diff=0,n}return qh(t,e),Zh(t,[{key:"read",value:function(){if(0===this.count){var e=am(this),t=1&e;this.diff=Kp(e/2),this.count=1,t&&(this.count=im(this)+2)}return this.s+=this.diff,this.count--,this.s}}])}(tm),hm=function(){return Zh((function e(t){Yh(this,e),this.decoder=new fm(t),this.str=sm(this.decoder),this.spos=0}),[{key:"read",value:function(){var e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}])}(),mm=(crypto.subtle,crypto.getRandomValues.bind(crypto)),vm=Math.random,gm=function(){return mm(new Uint32Array(1))[0]},ym=[1e7]+-1e3+-4e3+-8e3+-1e11,bm=function(){return ym.replace(/[018]/g,(function(e){return(e^gm()&15>>e/4).toString(16)}))},Dm=function(e){return new Promise(e)},wm=(Promise.all.bind(Promise),function(e){return void 0===e?null:e});function Cm(e){return Cm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cm(e)}function km(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Em(r.key),r)}}function Em(e){var t=function(e){if("object"!=Cm(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Cm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Cm(t)?t:t+""}var xm=function(){return function(e,t){return t&&km(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=new Map}),[{key:"setItem",value:function(e,t){this.map.set(e,t)}},{key:"getItem",value:function(e){return this.map.get(e)}}])}(),Sm=new xm;try{"undefined"!=typeof localStorage&&localStorage&&(Sm=localStorage)}catch(e){}var Am=Sm;function Fm(e){return function(e){if(Array.isArray(e))return Om(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Om(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Om(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Om(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Mm=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{for(;n<e.length;n++)e[n].apply(e,Fm(t))}finally{n<e.length&&Mm(e,t,n+1)}},Bm=function(e){return e};function Pm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Tm(e){return Tm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tm(e)}var Nm,jm,_m="undefined"!=typeof process&&process.release&&/node|io\.js/.test(process.release.name)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0),Rm="undefined"!=typeof window&&"undefined"!=typeof document&&!_m,Lm=("undefined"!=typeof navigator&&/Mac/.test(navigator.platform),[]),Im=function(){if(void 0===Nm)if(_m){Nm=jp();for(var e=process.argv,t=null,n=0;n<e.length;n++){var r=e[n];"-"===r[0]?(null!==t&&Nm.set(t,""),t=r):null!==t?(Nm.set(t,r),t=null):Lm.push(r)}null!==t&&Nm.set(t,"")}else"object"===("undefined"==typeof location?"undefined":Tm(location))?(Nm=jp(),(location.search||"?").slice(1).split("&").forEach((function(e){if(0!==e.length){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pm(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pm(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.split("="),2),n=t[0],r=t[1];Nm.set("--".concat(sh(n,"-")),r),Nm.set("-".concat(sh(n,"-")),r)}}))):Nm=jp();return Nm},Hm=function(e){return Im().has(e)},zm=function(e){return wm(_m?process.env[e.toUpperCase().replaceAll("-","_")]:Am.getItem(e))},Vm=function(e){return Hm("--"+e)||null!==zm(e)},$m=(Vm("production"),_m&&(jm=process.env.FORCE_COLOR,["true","1","2"].includes(jm)))||!Hm("--no-colors")&&!Vm("no-color")&&(!_m||process.stdout.isTTY)&&(!_m||Hm("--color")||null!==zm("COLORTERM")||(zm("TERM")||"").includes("color")),Um=Rm?function(e){for(var t="",n=0;n<e.byteLength;n++)t+=oh(e[n]);return btoa(t)}:function(e){return Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64")},Gm=function(e){return function(){var t=Dh();return function(t){Th(t,e)}(t),wh(t)}()};function Wm(e){return Wm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wm(e)}function qm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Jm(r.key),r)}}function Km(e,t,n){return t&&qm(e.prototype,t),n&&qm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jm(e){var t=function(e){if("object"!=Wm(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Wm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Wm(t)?t:t+""}var Zm=Km((function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.left=t,this.right=n})),Xm=function(e,t){return new Zm(e,t)},Ym="undefined"!=typeof document?document:{},Qm=("undefined"!=typeof DOMParser&&new DOMParser,function(e){return function(e,t){var n,r=[],o=Pp(e);try{for(o.s();!(n=o.n()).done;){var i=Bp(n.value,2),a=i[0],s=i[1];r.push(t(s,a))}}catch(e){o.e(e)}finally{o.f()}return r}(e,(function(e,t){return"".concat(t,":").concat(e,";")})).join("")});Ym.ELEMENT_NODE,Ym.TEXT_NODE,Ym.CDATA_SECTION_NODE,Ym.COMMENT_NODE,Ym.DOCUMENT_NODE,Ym.DOCUMENT_TYPE_NODE,Ym.DOCUMENT_FRAGMENT_NODE;var ev=Symbol,tv=Date.now,nv=ev(),rv=ev(),ov=ev(),iv=ev(),av=ev(),sv=ev(),uv=ev(),lv=ev(),cv=ev();function dv(e){return dv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dv(e)}function fv(e){return function(e){if(Array.isArray(e))return pv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return pv(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pv(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function hv(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=dv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=dv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dv(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}tv();var mv=hv(hv(hv(hv(hv(hv(hv(hv(hv({},nv,Xm("font-weight","bold")),rv,Xm("font-weight","normal")),ov,Xm("color","blue")),av,Xm("color","green")),iv,Xm("color","grey")),sv,Xm("color","red")),uv,Xm("color","purple")),lv,Xm("color","orange")),cv,Xm("color","black")),vv=$m?function(e){var t;1===e.length&&(null===(t=e[0])||void 0===t?void 0:t.constructor)===Function&&(e=e[0]());for(var n=[],r=[],o=jp(),i=[],a=0;a<e.length;a++){var s=e[a],u=mv[s];if(void 0!==u)o.set(u.left,u.right);else{if(void 0===s)break;if(s.constructor!==String&&s.constructor!==Number)break;var l=Qm(o);a>0||l.length>0?(n.push("%c"+s),r.push(l)):n.push(s)}}for(a>0&&(i=r).unshift(n.join(""));a<e.length;a++){var c=e[a];c instanceof Symbol||i.push(c)}return i}:function(e){var t;1===e.length&&(null===(t=e[0])||void 0===t?void 0:t.constructor)===Function&&(e=e[0]());for(var n=[],r=[],o=0;o<e.length;o++){var i=e[o];if(void 0===i)break;if(i.constructor===String||i.constructor===Number)n.push(i);else if(i.constructor===Object)break}for(o>0&&r.push(n.join(""));o<e.length;o++){var a=e[o];a instanceof Symbol||r.push(a)}return r},gv=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).warn.apply(e,fv(vv(n))),n.unshift(lv),yv.forEach((function(e){return e.print(n)}))},yv=Lp();function bv(e){return bv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bv(e)}function Dv(e,t,n){return(t=function(e){var t=function(e){if("object"!=bv(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=bv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==bv(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wv=function(e){return Dv(Dv({},Symbol.iterator,(function(){return this})),"next",e)},Cv=function(e,t){return wv((function(){var n=e.next(),r=n.done,o=n.value;return{done:r,value:r?void 0:t(o)}}))};function kv(e){return kv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kv(e)}var Ev=Object.assign,xv=Object.keys,Sv=function(e){return xv(e).length},Av=function(e,t){for(var n in e)if(!t(e[n],n))return!1;return!0},Fv=Object.freeze,Ov=function(e){for(var t in e){var n=e[t];"object"!==kv(n)&&"function"!=typeof n||Ov(e[t])}return Fv(e)};class Mv{constructor(e,t){this.clock=e,this.len=t}}class Bv{constructor(){this.clients=new Map}}const Pv=(e,t,n)=>t.clients.forEach(((t,r)=>{const o=e.doc.store.clients.get(r);if(null!=o){const r=o[o.length-1],i=r.id.clock+r.length;for(let r=0,a=t[r];r<t.length&&a.clock<i;a=t[++r])Tg(e,o,a.clock,a.len,n)}})),Tv=(e,t)=>{const n=e.clients.get(t.client);return void 0!==n&&null!==((e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const o=Kp((n+r)/2),i=e[o],a=i.clock;if(a<=t){if(t<a+i.len)return o;n=o+1}else r=o-1}return null})(n,t.clock)},Nv=e=>{e.clients.forEach((e=>{let t,n;for(e.sort(((e,t)=>e.clock-t.clock)),t=1,n=1;t<e.length;t++){const r=e[n-1],o=e[t];r.clock+r.len>=o.clock?r.len=Xp(r.len,o.clock+o.len-r.clock):(n<t&&(e[n]=o),n++)}e.length=n}))},jv=e=>{const t=new Bv;for(let n=0;n<e.length;n++)e[n].clients.forEach(((r,o)=>{if(!t.clients.has(o)){const i=r.slice();for(let t=n+1;t<e.length;t++)Hp(i,e[t].clients.get(o)||[]);t.clients.set(o,i)}}));return Nv(t),t},_v=(e,t,n,r)=>{Rp(e.clients,t,(()=>[])).push(new Mv(n,r))},Rv=()=>new Bv,Lv=e=>{const t=Rv();return e.clients.forEach(((e,n)=>{const r=[];for(let t=0;t<e.length;t++){const n=e[t];if(n.deleted){const o=n.id.clock;let i=n.length;if(t+1<e.length)for(let n=e[t+1];t+1<e.length&&n.deleted;n=e[1+ ++t])i+=n.length;r.push(new Mv(o,i))}}r.length>0&&t.clients.set(n,r)})),t},Iv=(e,t)=>{Eh(e.restEncoder,t.clients.size),zp(t.clients.entries()).sort(((e,t)=>t[0]-e[0])).forEach((([t,n])=>{e.resetDsCurVal(),Eh(e.restEncoder,t);const r=n.length;Eh(e.restEncoder,r);for(let t=0;t<r;t++){const r=n[t];e.writeDsClock(r.clock),e.writeDsLen(r.len)}}))},Hv=e=>{const t=new Bv,n=im(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();const n=im(e.restDecoder),r=im(e.restDecoder);if(r>0){const o=Rp(t.clients,n,(()=>[]));for(let t=0;t<r;t++)o.push(new Mv(e.readDsClock(),e.readDsLen()))}}return t},zv=(e,t,n)=>{const r=new Bv,o=im(e.restDecoder);for(let i=0;i<o;i++){e.resetDsCurVal();const o=im(e.restDecoder),i=im(e.restDecoder),a=n.clients.get(o)||[],s=Sg(n,o);for(let n=0;n<i;n++){const n=e.readDsClock(),i=n+e.readDsLen();if(n<s){s<i&&_v(r,o,s,i-s);let e=Fg(a,n),u=a[e];for(!u.deleted&&u.id.clock<n&&(a.splice(e+1,0,kb(t,u,n-u.id.clock)),e++);e<a.length&&(u=a[e++],u.id.clock<i);)u.deleted||(i<u.id.clock+u.length&&a.splice(e,0,kb(t,u,i-u.id.clock)),u.delete(t))}else _v(r,o,n,i-n)}}if(r.clients.size>0){const e=new Xv;return Eh(e.restEncoder,0),Iv(e,r),e.toUint8Array()}return null},Vv=gm;class $v extends qp{constructor({guid:e=bm(),collectionid:t=null,gc:n=!0,gcFilter:r=()=>!0,meta:o=null,autoLoad:i=!1,shouldLoad:a=!0}={}){super(),this.gc=n,this.gcFilter=r,this.clientID=Vv(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new Eg,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=i,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=Dm((e=>{this.on("load",(()=>{this.isLoaded=!0,e(this)}))}));const s=()=>Dm((e=>{const t=n=>{void 0!==n&&!0!==n||(this.off("sync",t),e())};this.on("sync",t)}));this.on("sync",(e=>{!1===e&&this.isSynced&&(this.whenSynced=s()),this.isSynced=void 0===e||!0===e,this.isSynced&&!this.isLoaded&&this.emit("load",[this])})),this.whenSynced=s()}load(){const e=this._item;null===e||this.shouldLoad||Ig(e.parent.doc,(e=>{e.subdocsLoaded.add(this)}),null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(zp(this.subdocs).map((e=>e.guid)))}transact(e,t=null){return Ig(this,e,t)}get(e,t=cy){const n=Rp(this.share,e,(()=>{const e=new t;return e._integrate(this,null),e})),r=n.constructor;if(t!==cy&&r!==t){if(r===cy){const r=new t;r._map=n._map,n._map.forEach((e=>{for(;null!==e;e=e.left)e.parent=r})),r._start=n._start;for(let e=r._start;null!==e;e=e.right)e.parent=r;return r._length=n._length,this.share.set(e,r),r._integrate(this,null),r}throw new Error(`Type with the name ${e} has already been defined with a different constructor`)}return n}getArray(e=""){return this.get(e,Oy)}getText(e=""){return this.get(e,qy)}getMap(e=""){return this.get(e,By)}getXmlElement(e=""){return this.get(e,Zy)}getXmlFragment(e=""){return this.get(e,Jy)}toJSON(){const e={};return this.share.forEach(((t,n)=>{e[n]=t.toJSON()})),e}destroy(){this.isDestroyed=!0,zp(this.subdocs).forEach((e=>e.destroy()));const e=this._item;if(null!==e){this._item=null;const t=e.content;t.doc=new $v({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,Ig(e.parent.doc,(n=>{const r=t.doc;e.deleted||n.subdocsAdded.add(r),n.subdocsRemoved.add(this)}),null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class Uv{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return im(this.restDecoder)}readDsLen(){return im(this.restDecoder)}}class Gv extends Uv{readLeftID(){return cg(im(this.restDecoder),im(this.restDecoder))}readRightID(){return cg(im(this.restDecoder),im(this.restDecoder))}readClient(){return im(this.restDecoder)}readInfo(){return om(this.restDecoder)}readString(){return sm(this.restDecoder)}readParentInfo(){return 1===im(this.restDecoder)}readTypeRef(){return im(this.restDecoder)}readLen(){return im(this.restDecoder)}readAny(){return cm(this.restDecoder)}readBuf(){return t=rm(this.restDecoder),(e=t.byteLength,n=new Uint8Array(e)).set(t),n;var e,t,n}readJSON(){return JSON.parse(sm(this.restDecoder))}readKey(){return sm(this.restDecoder)}}class Wv{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=im(this.restDecoder),this.dsCurrVal}readDsLen(){const e=im(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class qv extends Wv{constructor(e){super(e),this.keys=[],im(e),this.keyClockDecoder=new pm(rm(e)),this.clientDecoder=new fm(rm(e)),this.leftClockDecoder=new pm(rm(e)),this.rightClockDecoder=new pm(rm(e)),this.infoDecoder=new dm(rm(e),om),this.stringDecoder=new hm(rm(e)),this.parentInfoDecoder=new dm(rm(e),om),this.typeRefDecoder=new fm(rm(e)),this.lenDecoder=new fm(rm(e))}readLeftID(){return new ug(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new ug(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return cm(this.restDecoder)}readBuf(){return rm(this.restDecoder)}readJSON(){return cm(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const e=this.stringDecoder.read();return this.keys.push(e),e}}}class Kv{constructor(){this.restEncoder=Dh()}toUint8Array(){return wh(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Eh(this.restEncoder,e)}writeDsLen(e){Eh(this.restEncoder,e)}}class Jv extends Kv{writeLeftID(e){Eh(this.restEncoder,e.client),Eh(this.restEncoder,e.clock)}writeRightID(e){Eh(this.restEncoder,e.client),Eh(this.restEncoder,e.clock)}writeClient(e){Eh(this.restEncoder,e)}writeInfo(e){kh(this.restEncoder,e)}writeString(e){Fh(this.restEncoder,e)}writeParentInfo(e){Eh(this.restEncoder,e?1:0)}writeTypeRef(e){Eh(this.restEncoder,e)}writeLen(e){Eh(this.restEncoder,e)}writeAny(e){Th(this.restEncoder,e)}writeBuf(e){Mh(this.restEncoder,e)}writeJSON(e){Fh(this.restEncoder,JSON.stringify(e))}writeKey(e){Fh(this.restEncoder,e)}}class Zv{constructor(){this.restEncoder=Dh(),this.dsCurrVal=0}toUint8Array(){return wh(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,Eh(this.restEncoder,t)}writeDsLen(e){0===e&&Vh(),Eh(this.restEncoder,e-1),this.dsCurrVal+=e}}class Xv extends Zv{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Lh,this.clientEncoder=new _h,this.leftClockEncoder=new Lh,this.rightClockEncoder=new Lh,this.infoEncoder=new Nh(kh),this.stringEncoder=new Ih,this.parentInfoEncoder=new Nh(kh),this.typeRefEncoder=new _h,this.lenEncoder=new _h}toUint8Array(){const e=Dh();return Eh(e,0),Mh(e,this.keyClockEncoder.toUint8Array()),Mh(e,this.clientEncoder.toUint8Array()),Mh(e,this.leftClockEncoder.toUint8Array()),Mh(e,this.rightClockEncoder.toUint8Array()),Mh(e,wh(this.infoEncoder)),Mh(e,this.stringEncoder.toUint8Array()),Mh(e,wh(this.parentInfoEncoder)),Mh(e,this.typeRefEncoder.toUint8Array()),Mh(e,this.lenEncoder.toUint8Array()),Oh(e,wh(this.restEncoder)),wh(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Th(this.restEncoder,e)}writeBuf(e){Mh(this.restEncoder,e)}writeJSON(e){Th(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}const Yv=(e,t,n)=>{const r=new Map;n.forEach(((e,n)=>{Sg(t,n)>e&&r.set(n,e)})),xg(t).forEach(((e,t)=>{n.has(t)||r.set(t,0)})),Eh(e.restEncoder,r.size),zp(r.entries()).sort(((e,t)=>t[0]-e[0])).forEach((([n,r])=>{((e,t,n,r)=>{r=Xp(r,t[0].id.clock);const o=Fg(t,r);Eh(e.restEncoder,t.length-o),e.writeClient(n),Eh(e.restEncoder,r);const i=t[o];i.write(e,r-i.id.clock);for(let n=o+1;n<t.length;n++)t[n].write(e,0)})(e,t.clients.get(n),n,r)}))},Qv=(e,t,n,r=qv)=>{const o=nm(t);((e,t,n,r=new qv(e))=>{Ig(t,(e=>{e.local=!1;let t=!1;const n=e.doc,o=n.store,i=((e,t)=>{const n=jp(),r=im(e.restDecoder);for(let o=0;o<r;o++){const r=im(e.restDecoder),o=new Array(r),i=e.readClient();let a=im(e.restDecoder);n.set(i,{i:0,refs:o});for(let n=0;n<r;n++){const r=e.readInfo();switch(31&r){case 0:{const t=e.readLen();o[n]=new tb(cg(i,a),t),a+=t;break}case 10:{const t=im(e.restDecoder);o[n]=new Ob(cg(i,a),t),a+=t;break}default:{const s=!(192&r),u=new Sb(cg(i,a),null,(r&eh)===eh?e.readLeftID():null,null,(r&Qp)===Qp?e.readRightID():null,s?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,!s||32&~r?null:e.readString(),Ab(e,r));o[n]=u,a+=u.length}}}}return n})(r,n),a=((e,t,n)=>{const r=[];let o=zp(n.keys()).sort(((e,t)=>e-t));if(0===o.length)return null;const i=()=>{if(0===o.length)return null;let e=n.get(o[o.length-1]);for(;e.refs.length===e.i;){if(o.pop(),!(o.length>0))return null;e=n.get(o[o.length-1])}return e};let a=i();if(null===a)return null;const s=new Eg,u=new Map,l=(e,t)=>{const n=u.get(e);(null==n||n>t)&&u.set(e,t)};let c=a.refs[a.i++];const d=new Map,f=()=>{for(const e of r){const t=e.id.client,r=n.get(t);r?(r.i--,s.clients.set(t,r.refs.slice(r.i)),n.delete(t),r.i=0,r.refs=[]):s.clients.set(t,[e]),o=o.filter((e=>e!==t))}r.length=0};for(;;){if(c.constructor!==Ob){const o=Rp(d,c.id.client,(()=>Sg(t,c.id.client)))-c.id.clock;if(o<0)r.push(c),l(c.id.client,c.id.clock-1),f();else{const i=c.getMissing(e,t);if(null!==i){r.push(c);const e=n.get(i)||{refs:[],i:0};if(e.refs.length!==e.i){c=e.refs[e.i++];continue}l(i,Sg(t,i)),f()}else(0===o||o<c.length)&&(c.integrate(e,o),d.set(c.id.client,c.id.clock+c.length))}}if(r.length>0)c=r.pop();else if(null!==a&&a.i<a.refs.length)c=a.refs[a.i++];else{if(a=i(),null===a)break;c=a.refs[a.i++]}}if(s.clients.size>0){const e=new Xv;return Yv(e,s,new Map),Eh(e.restEncoder,0),{missing:u,update:e.toUint8Array()}}return null})(e,o,i),s=o.pendingStructs;if(s){for(const[e,n]of s.missing)if(n<Sg(o,e)){t=!0;break}if(a){for(const[e,t]of a.missing){const n=s.missing.get(e);(null==n||n>t)&&s.missing.set(e,t)}s.update=Kg([s.update,a.update])}}else o.pendingStructs=a;const u=zv(r,e,o);if(o.pendingDs){const t=new qv(nm(o.pendingDs));im(t.restDecoder);const n=zv(t,e,o);o.pendingDs=u&&n?Kg([u,n]):u||n}else o.pendingDs=u;if(t){const t=o.pendingStructs.update;o.pendingStructs=null,Qv(e.doc,t)}}),n,!1)})(o,e,n,new r(o))},eg=(e,t,n)=>Qv(e,t,n,Gv),tg=(e,t)=>((e,t=new Uint8Array([0]),n=new Xv)=>{((e,t,n=new Map)=>{Yv(e,t.store,n),Iv(e,Lv(t.store))})(n,e,ng(t));const r=[n.toUint8Array()];if(e.store.pendingDs&&r.push(e.store.pendingDs),e.store.pendingStructs&&r.push(Jg(e.store.pendingStructs.update,t)),r.length>1){if(n.constructor===Jv)return Wg(r.map(((e,t)=>0===t?e:Qg(e))));if(n.constructor===Xv)return Kg(r)}return r[0]})(e,t,new Jv),ng=e=>(e=>{const t=new Map,n=im(e.restDecoder);for(let r=0;r<n;r++){const n=im(e.restDecoder),r=im(e.restDecoder);t.set(n,r)}return t})(new Uv(nm(e)));class rg{constructor(){this.l=[]}}const og=()=>new rg,ig=(e,t)=>e.l.push(t),ag=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter((e=>t!==e)),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},sg=(e,t,n)=>Mm(e.l,[t,n]);class ug{constructor(e,t){this.client=e,this.clock=t}}const lg=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,cg=(e,t)=>new ug(e,t),dg=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw Vh()},fg=(e,t)=>{for(;null!==t;){if(t.parent===e)return!0;t=t.parent._item}return!1};class pg{constructor(e,t,n,r=0){this.type=e,this.tname=t,this.item=n,this.assoc=r}}const hg=e=>new pg(null==e.type?null:cg(e.type.client,e.type.clock),e.tname??null,null==e.item?null:cg(e.item.client,e.item.clock),null==e.assoc?0:e.assoc);class mg{constructor(e,t,n=0){this.type=e,this.index=t,this.assoc=n}}const vg=(e,t,n)=>{let r=null,o=null;return null===e._item?o=dg(e):r=cg(e._item.id.client,e._item.id.clock),new pg(r,o,t,n)},gg=(e,t,n=0)=>{let r=e._start;if(n<0){if(0===t)return vg(e,null,n);t--}for(;null!==r;){if(!r.deleted&&r.countable){if(r.length>t)return vg(e,cg(r.id.client,r.id.clock+t),n);t-=r.length}if(null===r.right&&n<0)return vg(e,r.lastId,n);r=r.right}return vg(e,null,n)},yg=(e,t)=>e===t||null!==e&&null!==t&&e.tname===t.tname&&lg(e.item,t.item)&&lg(e.type,t.type)&&e.assoc===t.assoc;class bg{constructor(e,t){this.ds=e,this.sv=t}}const Dg=(e,t)=>new bg(e,t),wg=(Dg(Rv(),new Map),e=>Dg(Lv(e.store),xg(e.store))),Cg=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!Tv(t.ds,e.id),kg=(e,t)=>{const n=Rp(e.meta,kg,Lp),r=e.doc.store;n.has(t)||(t.sv.forEach(((t,n)=>{t<Sg(r,n)&&Bg(e,cg(n,t))})),Pv(e,t.ds,(e=>{})),n.add(t))};class Eg{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const xg=e=>{const t=new Map;return e.clients.forEach(((e,n)=>{const r=e[e.length-1];t.set(n,r.id.clock+r.length)})),t},Sg=(e,t)=>{const n=e.clients.get(t);if(void 0===n)return 0;const r=n[n.length-1];return r.id.clock+r.length},Ag=(e,t)=>{let n=e.clients.get(t.id.client);if(void 0===n)n=[],e.clients.set(t.id.client,n);else{const e=n[n.length-1];if(e.id.clock+e.length!==t.id.clock)throw Vh()}n.push(t)},Fg=(e,t)=>{let n=0,r=e.length-1,o=e[r],i=o.id.clock;if(i===t)return r;let a=Kp(t/(i+o.length-1)*r);for(;n<=r;){if(o=e[a],i=o.id.clock,i<=t){if(t<i+o.length)return a;n=a+1}else r=a-1;a=Kp((n+r)/2)}throw Vh()},Og=(e,t)=>{const n=e.clients.get(t.client);return n[Fg(n,t.clock)]},Mg=(e,t,n)=>{const r=Fg(t,n),o=t[r];return o.id.clock<n&&o instanceof Sb?(t.splice(r+1,0,kb(e,o,n-o.id.clock)),r+1):r},Bg=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[Mg(e,n,t.clock)]},Pg=(e,t,n)=>{const r=t.clients.get(n.client),o=Fg(r,n.clock),i=r[o];return n.clock!==i.id.clock+i.length-1&&i.constructor!==tb&&r.splice(o+1,0,kb(e,i,n.clock-i.id.clock+1)),i},Tg=(e,t,n,r,o)=>{if(0===r)return;const i=n+r;let a,s=Mg(e,t,n);do{a=t[s++],i<a.id.clock+a.length&&Mg(e,t,i),o(a)}while(s<t.length&&t[s].id.clock<i)};class Ng{constructor(e,t,n){this.doc=e,this.deleteSet=new Bv,this.beforeState=xg(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const jg=(e,t)=>!(0===t.deleteSet.clients.size&&!function(e,t){var n,r=Pp(e);try{for(r.s();!(n=r.n()).done;){var o=Bp(n.value,2),i=o[0];if(t(o[1],i))return!0}}catch(e){r.e(e)}finally{r.f()}return!1}(t.afterState,((e,n)=>t.beforeState.get(n)!==e))||(Nv(t.deleteSet),((e,t)=>{Yv(e,t.doc.store,t.beforeState)})(e,t),Iv(e,t.deleteSet),0)),_g=(e,t,n)=>{const r=t._item;(null===r||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&Rp(e.changed,t,Lp).add(n)},Rg=(e,t)=>{let n=e[t],r=e[t-1],o=t;for(;o>0&&r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n);n=r,r=e[--o-1])n instanceof Sb&&null!==n.parentSub&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);const i=t-o;return i&&e.splice(t+1-i,i),i},Lg=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,o=r.store,i=n.deleteSet,a=n._mergeStructs;try{Nv(i),n.afterState=xg(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const e=[];n.changed.forEach(((t,r)=>e.push((()=>{null!==r._item&&r._item.deleted||r._callObserver(n,t)})))),e.push((()=>{n.changedParentTypes.forEach(((e,t)=>{t._dEH.l.length>0&&(null===t._item||!t._item.deleted)&&((e=e.filter((e=>null===e.target._item||!e.target._item.deleted))).forEach((e=>{e.currentTarget=t,e._path=null})),e.sort(((e,t)=>e.path.length-t.path.length)),sg(t._dEH,e,n))}))})),e.push((()=>r.emit("afterTransaction",[n,r]))),Mm(e,[]),n._needFormattingCleanup&&Uy(n)}finally{r.gc&&((e,t,n)=>{for(const[r,o]of e.clients.entries()){const e=t.clients.get(r);for(let r=o.length-1;r>=0;r--){const i=o[r],a=i.clock+i.len;for(let r=Fg(e,i.clock),o=e[r];r<e.length&&o.id.clock<a;o=e[++r]){const o=e[r];if(i.clock+i.len<=o.id.clock)break;o instanceof Sb&&o.deleted&&!o.keep&&n(o)&&o.gc(t,!1)}}}})(i,o,r.gcFilter),((e,t)=>{e.clients.forEach(((e,n)=>{const r=t.clients.get(n);for(let t=e.length-1;t>=0;t--){const n=e[t];for(let e=Zp(r.length-1,1+Fg(r,n.clock+n.len-1)),t=r[e];e>0&&t.id.clock>=n.clock;t=r[e])e-=1+Rg(r,e)}}))})(i,o),n.afterState.forEach(((e,t)=>{const r=n.beforeState.get(t)||0;if(r!==e){const e=o.clients.get(t),n=Xp(Fg(e,r),1);for(let t=e.length-1;t>=n;)t-=1+Rg(e,t)}}));for(let e=a.length-1;e>=0;e--){const{client:t,clock:n}=a[e].id,r=o.clients.get(t),i=Fg(r,n);i+1<r.length&&Rg(r,i+1)>1||i>0&&Rg(r,i)}if(n.local||n.afterState.get(r.clientID)===n.beforeState.get(r.clientID)||(function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,fv(vv(n))),yv.forEach((function(e){return e.print(n)}))}(lv,nv,"[yjs] ",rv,sv,"Changed the client-id because another client seems to be using it."),r.clientID=Vv()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const e=new Jv;jg(e,n)&&r.emit("update",[e.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const e=new Xv;jg(e,n)&&r.emit("updateV2",[e.toUint8Array(),n.origin,r,n])}const{subdocsAdded:s,subdocsLoaded:u,subdocsRemoved:l}=n;(s.size>0||l.size>0||u.size>0)&&(s.forEach((e=>{e.clientID=r.clientID,null==e.collectionid&&(e.collectionid=r.collectionid),r.subdocs.add(e)})),l.forEach((e=>r.subdocs.delete(e))),r.emit("subdocs",[{loaded:u,added:s,removed:l},r,n]),l.forEach((e=>e.destroy()))),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):Lg(e,t+1)}}},Ig=(e,t,n=null,r=!0)=>{const o=e._transactionCleanups;let i=!1,a=null;null===e._transaction&&(i=!0,e._transaction=new Ng(e,n,r),o.push(e._transaction),1===o.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{a=t(e._transaction)}finally{if(i){const t=e._transaction===o[0];e._transaction=null,t&&Lg(o,0)}}return a};class Hg{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}}const zg=(e,t,n)=>{Pv(e,n.deletions,(n=>{n instanceof Sb&&t.scope.some((t=>t===e.doc||fg(t,n)))&&Cb(n,!1)}))},Vg=(e,t,n)=>{let r=null;const o=e.doc,i=e.scope;Ig(o,(n=>{for(;t.length>0&&null===e.currStackItem;){const r=o.store,a=t.pop(),s=new Set,u=[];let l=!1;Pv(n,a.insertions,(e=>{if(e instanceof Sb){if(null!==e.redone){let{item:t,diff:o}=wb(r,e.id);o>0&&(t=Bg(n,cg(t.id.client,t.id.clock+o))),e=t}!e.deleted&&i.some((t=>t===n.doc||fg(t,e)))&&u.push(e)}})),Pv(n,a.deletions,(e=>{e instanceof Sb&&i.some((t=>t===n.doc||fg(t,e)))&&!Tv(a.insertions,e.id)&&s.add(e)})),s.forEach((t=>{l=null!==xb(n,t,s,a.insertions,e.ignoreRemoteMapChanges,e)||l}));for(let t=u.length-1;t>=0;t--){const r=u[t];e.deleteFilter(r)&&(r.delete(n),l=!0)}e.currStackItem=l?a:null}n.changed.forEach(((e,t)=>{e.has(null)&&t._searchMarker&&(t._searchMarker.length=0)})),r=n}),e);const a=e.currStackItem;if(null!=a){const t=r.changedParentTypes;e.emit("stack-item-popped",[{stackItem:a,type:n,changedParentTypes:t,origin:e},e]),e.currStackItem=null}return a};class $g extends qp{constructor(e,{captureTimeout:t=500,captureTransaction:n=e=>!0,deleteFilter:r=()=>!0,trackedOrigins:o=new Set([null]),ignoreRemoteMapChanges:i=!1,doc:a=(Vp(e)?e[0].doc:e instanceof $v?e:e.doc)}={}){super(),this.scope=[],this.doc=a,this.addToScope(e),this.deleteFilter=r,o.add(this),this.trackedOrigins=o,this.captureTransaction=n,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=i,this.captureTimeout=t,this.afterTransactionHandler=e=>{if(!(this.captureTransaction(e)&&this.scope.some((t=>e.changedParentTypes.has(t)||t===this.doc))&&(this.trackedOrigins.has(e.origin)||e.origin&&this.trackedOrigins.has(e.origin.constructor))))return;const t=this.undoing,n=this.redoing,r=t?this.redoStack:this.undoStack;t?this.stopCapturing():n||this.clear(!1,!0);const o=new Bv;e.afterState.forEach(((t,n)=>{const r=e.beforeState.get(n)||0,i=t-r;i>0&&_v(o,n,r,i)}));const i=tv();let a=!1;if(this.lastChange>0&&i-this.lastChange<this.captureTimeout&&r.length>0&&!t&&!n){const t=r[r.length-1];t.deletions=jv([t.deletions,e.deleteSet]),t.insertions=jv([t.insertions,o])}else r.push(new Hg(e.deleteSet,o)),a=!0;t||n||(this.lastChange=i),Pv(e,e.deleteSet,(t=>{t instanceof Sb&&this.scope.some((n=>n===e.doc||fg(n,t)))&&Cb(t,!0)}));const s=[{stackItem:r[r.length-1],origin:e.origin,type:t?"redo":"undo",changedParentTypes:e.changedParentTypes},this];a?this.emit("stack-item-added",s):this.emit("stack-item-updated",s)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",(()=>{this.destroy()}))}addToScope(e){const t=new Set(this.scope);(e=Vp(e)?e:[e]).forEach((e=>{t.has(e)||(t.add(e),(e instanceof cy?e.doc!==this.doc:e!==this.doc)&&gv("[yjs#509] Not same Y.Doc"),this.scope.push(e))}))}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,t=!0){(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact((n=>{e&&(this.undoStack.forEach((e=>zg(n,this,e))),this.undoStack=[]),t&&(this.redoStack.forEach((e=>zg(n,this,e))),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])}))}stopCapturing(){this.lastChange=0}undo(){let e;this.undoing=!0;try{e=Vg(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){let e;this.redoing=!0;try{e=Vg(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}class Ug{constructor(e,t){this.gen=function*(e){const t=im(e.restDecoder);for(let n=0;n<t;n++){const t=im(e.restDecoder),n=e.readClient();let r=im(e.restDecoder);for(let o=0;o<t;o++){const t=e.readInfo();if(10===t){const t=im(e.restDecoder);yield new Ob(cg(n,r),t),r+=t}else if(31&t){const o=!(192&t),i=new Sb(cg(n,r),null,(t&eh)===eh?e.readLeftID():null,null,(t&Qp)===Qp?e.readRightID():null,o?e.readParentInfo()?e.readString():e.readLeftID():null,!o||32&~t?null:e.readString(),Ab(e,t));yield i,r+=i.length}else{const t=e.readLen();yield new tb(cg(n,r),t),r+=t}}}}(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}next(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===Ob);return this.curr}}class Gg{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const Wg=e=>Kg(e,Gv,Jv),qg=(e,t)=>{if(e.constructor===tb){const{client:n,clock:r}=e.id;return new tb(cg(n,r+t),e.length-t)}if(e.constructor===Ob){const{client:n,clock:r}=e.id;return new Ob(cg(n,r+t),e.length-t)}{const n=e,{client:r,clock:o}=n.id;return new Sb(cg(r,o+t),null,cg(r,o+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},Kg=(e,t=qv,n=Xv)=>{if(1===e.length)return e[0];const r=e.map((e=>new t(nm(e))));let o=r.map((e=>new Ug(e,!0))),i=null;const a=new n,s=new Gg(a);for(;o=o.filter((e=>null!==e.curr)),o.sort(((e,t)=>{if(e.curr.id.client===t.curr.id.client){const n=e.curr.id.clock-t.curr.id.clock;return 0===n?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===Ob?1:-1:n}return t.curr.id.client-e.curr.id.client})),0!==o.length;){const e=o[0],t=e.curr.id.client;if(null!==i){let n=e.curr,r=!1;for(;null!==n&&n.id.clock+n.length<=i.struct.id.clock+i.struct.length&&n.id.client>=i.struct.id.client;)n=e.next(),r=!0;if(null===n||n.id.client!==t||r&&n.id.clock>i.struct.id.clock+i.struct.length)continue;if(t!==i.struct.id.client)Xg(s,i.struct,i.offset),i={struct:n,offset:0},e.next();else if(i.struct.id.clock+i.struct.length<n.id.clock)if(i.struct.constructor===Ob)i.struct.length=n.id.clock+n.length-i.struct.id.clock;else{Xg(s,i.struct,i.offset);const e=n.id.clock-i.struct.id.clock-i.struct.length;i={struct:new Ob(cg(t,i.struct.id.clock+i.struct.length),e),offset:0}}else{const t=i.struct.id.clock+i.struct.length-n.id.clock;t>0&&(i.struct.constructor===Ob?i.struct.length-=t:n=qg(n,t)),i.struct.mergeWith(n)||(Xg(s,i.struct,i.offset),i={struct:n,offset:0},e.next())}}else i={struct:e.curr,offset:0},e.next();for(let n=e.curr;null!==n&&n.id.client===t&&n.id.clock===i.struct.id.clock+i.struct.length&&n.constructor!==Ob;n=e.next())Xg(s,i.struct,i.offset),i={struct:n,offset:0}}null!==i&&(Xg(s,i.struct,i.offset),i=null),Yg(s);const u=r.map((e=>Hv(e))),l=jv(u);return Iv(a,l),a.toUint8Array()},Jg=(e,t,n=qv,r=Xv)=>{const o=ng(t),i=new r,a=new Gg(i),s=new n(nm(e)),u=new Ug(s,!1);for(;u.curr;){const e=u.curr,t=e.id.client,n=o.get(t)||0;if(u.curr.constructor!==Ob)if(e.id.clock+e.length>n)for(Xg(a,e,Xp(n-e.id.clock,0)),u.next();u.curr&&u.curr.id.client===t;)Xg(a,u.curr,0),u.next();else for(;u.curr&&u.curr.id.client===t&&u.curr.id.clock+u.curr.length<=n;)u.next();else u.next()}Yg(a);const l=Hv(s);return Iv(i,l),i.toUint8Array()},Zg=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:wh(e.encoder.restEncoder)}),e.encoder.restEncoder=Dh(),e.written=0)},Xg=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&Zg(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),Eh(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},Yg=e=>{Zg(e);const t=e.encoder.restEncoder;Eh(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const r=e.clientStructs[n];Eh(t,r.written),Oh(t,r.restEncoder)}},Qg=e=>((e,t,n,r)=>{const o=new n(nm(e)),i=new Ug(o,!1),a=new r,s=new Gg(a);for(let e=i.curr;null!==e;e=i.next())Xg(s,t(e),0);Yg(s);const u=Hv(o);return Iv(a,u),a.toUint8Array()})(e,Bm,qv,Jv),ey="You must not compute changes after the event-handler fired.";class ty{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=ny(this.currentTarget,this.target))}deletes(e){return Tv(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw Hh(ey);const e=new Map,t=this.target;this.transaction.changed.get(t).forEach((n=>{if(null!==n){const r=t._map.get(n);let o,i;if(this.adds(r)){let e=r.left;for(;null!==e&&this.adds(e);)e=e.left;if(this.deletes(r)){if(null===e||!this.deletes(e))return;o="delete",i=Ip(e.content.getContent())}else null!==e&&this.deletes(e)?(o="update",i=Ip(e.content.getContent())):(o="add",i=void 0)}else{if(!this.deletes(r))return;o="delete",i=Ip(r.content.getContent())}e.set(n,{action:o,oldValue:i})}})),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){if(0===this.transaction.doc._transactionCleanups.length)throw Hh(ey);const t=this.target,n=Lp(),r=Lp(),o=[];if(e={added:n,deleted:r,delta:o,keys:this.keys},this.transaction.changed.get(t).has(null)){let e=null;const i=()=>{e&&o.push(e)};for(let o=t._start;null!==o;o=o.right)o.deleted?this.deletes(o)&&!this.adds(o)&&(null!==e&&void 0!==e.delete||(i(),e={delete:0}),e.delete+=o.length,r.add(o)):this.adds(o)?(null!==e&&void 0!==e.insert||(i(),e={insert:[]}),e.insert=e.insert.concat(o.content.getContent()),n.add(o)):(null!==e&&void 0!==e.retain||(i(),e={retain:0}),e.retain+=o.length);null!==e&&void 0===e.retain&&i()}this._changes=e}return e}}const ny=(e,t)=>{const n=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)n.unshift(t._item.parentSub);else{let e=0,r=t._item.parent._start;for(;r!==t._item&&null!==r;)!r.deleted&&r.countable&&(e+=r.length),r=r.right;n.unshift(e)}t=t._item.parent}return n},ry=()=>{gv("Invalid access: Add Yjs type to a document before reading data.")};let oy=0;class iy{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=oy++}}const ay=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=oy++},sy=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;const n=0===e._searchMarker.length?null:e._searchMarker.reduce(((e,n)=>Jp(t-e.index)<Jp(t-n.index)?e:n));let r=e._start,o=0;for(null!==n&&(r=n.p,o=n.index,(e=>{e.timestamp=oy++})(n));null!==r.right&&o<t;){if(!r.deleted&&r.countable){if(t<o+r.length)break;o+=r.length}r=r.right}for(;null!==r.left&&o>t;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);for(;null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);return null!==n&&Jp(n.index-o)<r.parent.length/80?(ay(n,r,o),n):((e,t,n)=>{if(e.length>=80){const r=e.reduce(((e,t)=>e.timestamp<t.timestamp?e:t));return ay(r,t,n),r}{const r=new iy(t,n);return e.push(r),r}})(e._searchMarker,r,o)},uy=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const o=e[r];if(n>0){let t=o.p;for(t.marker=!1;t&&(t.deleted||!t.countable);)t=t.left,t&&!t.deleted&&t.countable&&(o.index-=t.length);if(null===t||!0===t.marker){e.splice(r,1);continue}o.p=t,t.marker=!0}(t<o.index||n>0&&t===o.index)&&(o.index=Xp(t,o.index+n))}},ly=(e,t,n)=>{const r=e,o=t.changedParentTypes;for(;Rp(o,e,(()=>[])).push(n),null!==e._item;)e=e._item.parent;sg(r._eH,n,t)};class cy{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=og(),this._dEH=og(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw zh()}clone(){throw zh()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){ig(this._eH,e)}observeDeep(e){ig(this._dEH,e)}unobserve(e){ag(this._eH,e)}unobserveDeep(e){ag(this._dEH,e)}toJSON(){}}const dy=(e,t,n)=>{e.doc??ry(),t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const o=[];let i=e._start;for(;null!==i&&r>0;){if(i.countable&&!i.deleted){const e=i.content.getContent();if(e.length<=t)t-=e.length;else{for(let n=t;n<e.length&&r>0;n++)o.push(e[n]),r--;t=0}}i=i.right}return o},fy=e=>{e.doc??ry();const t=[];let n=e._start;for(;null!==n;){if(n.countable&&!n.deleted){const e=n.content.getContent();for(let n=0;n<e.length;n++)t.push(e[n])}n=n.right}return t},py=(e,t)=>{const n=[];let r=e._start;for(;null!==r;){if(r.countable&&Cg(r,t)){const e=r.content.getContent();for(let t=0;t<e.length;t++)n.push(e[t])}r=r.right}return n},hy=(e,t)=>{let n=0,r=e._start;for(e.doc??ry();null!==r;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let r=0;r<o.length;r++)t(o[r],n++,e)}r=r.right}},my=(e,t)=>{const n=[];return hy(e,((r,o)=>{n.push(t(r,o,e))})),n},vy=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===n){for(;null!==t&&t.deleted;)t=t.right;if(null===t)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const e=n[r++];return n.length<=r&&(n=null),{done:!1,value:e}}}},gy=(e,t)=>{e.doc??ry();const n=sy(e,t);let r=e._start;for(null!==n&&(r=n.p,t-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},yy=(e,t,n,r)=>{let o=n;const i=e.doc,a=i.clientID,s=i.store,u=null===n?t._start:n.right;let l=[];const c=()=>{l.length>0&&(o=new Sb(cg(a,Sg(s,a)),o,o&&o.lastId,u,u&&u.id,t,null,new cb(l)),o.integrate(e,0),l=[])};r.forEach((n=>{if(null===n)l.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:l.push(n);break;default:switch(c(),n.constructor){case Uint8Array:case ArrayBuffer:o=new Sb(cg(a,Sg(s,a)),o,o&&o.lastId,u,u&&u.id,t,null,new nb(new Uint8Array(n))),o.integrate(e,0);break;case $v:o=new Sb(cg(a,Sg(s,a)),o,o&&o.lastId,u,u&&u.id,t,null,new ib(n)),o.integrate(e,0);break;default:if(!(n instanceof cy))throw new Error("Unexpected content type in insert operation");o=new Sb(cg(a,Sg(s,a)),o,o&&o.lastId,u,u&&u.id,t,null,new Db(n)),o.integrate(e,0)}}})),c()},by=()=>Hh("Length exceeded!"),Dy=(e,t,n,r)=>{if(n>t._length)throw by();if(0===n)return t._searchMarker&&uy(t._searchMarker,n,r.length),yy(e,t,null,r);const o=n,i=sy(t,n);let a=t._start;for(null!==i&&(a=i.p,0==(n-=i.index)&&(a=a.prev,n+=a&&a.countable&&!a.deleted?a.length:0));null!==a;a=a.right)if(!a.deleted&&a.countable){if(n<=a.length){n<a.length&&Bg(e,cg(a.id.client,a.id.clock+n));break}n-=a.length}return t._searchMarker&&uy(t._searchMarker,o,r.length),yy(e,t,a,r)},wy=(e,t,n,r)=>{if(0===r)return;const o=n,i=r,a=sy(t,n);let s=t._start;for(null!==a&&(s=a.p,n-=a.index);null!==s&&n>0;s=s.right)!s.deleted&&s.countable&&(n<s.length&&Bg(e,cg(s.id.client,s.id.clock+n)),n-=s.length);for(;r>0&&null!==s;)s.deleted||(r<s.length&&Bg(e,cg(s.id.client,s.id.clock+r)),s.delete(e),r-=s.length),s=s.right;if(r>0)throw by();t._searchMarker&&uy(t._searchMarker,o,-i+r)},Cy=(e,t,n)=>{const r=t._map.get(n);void 0!==r&&r.delete(e)},ky=(e,t,n,r)=>{const o=t._map.get(n)||null,i=e.doc,a=i.clientID;let s;if(null==r)s=new cb([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:s=new cb([r]);break;case Uint8Array:s=new nb(r);break;case $v:s=new ib(r);break;default:if(!(r instanceof cy))throw new Error("Unexpected content type");s=new Db(r)}new Sb(cg(a,Sg(i.store,a)),o,o&&o.lastId,null,null,t,n,s).integrate(e,0)},Ey=(e,t)=>{e.doc??ry();const n=e._map.get(t);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},xy=e=>{const t={};return e.doc??ry(),e._map.forEach(((e,n)=>{e.deleted||(t[n]=e.content.getContent()[e.length-1])})),t},Sy=(e,t)=>{e.doc??ry();const n=e._map.get(t);return void 0!==n&&!n.deleted},Ay=e=>(e.doc??ry(),function(e){return wv((function(){var t;do{t=e.next()}while(!t.done&&t.value[1].deleted);return t}))}(e._map.entries()));class Fy extends ty{}class Oy extends cy{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new Oy;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Oy}clone(){const e=new Oy;return e.insert(0,this.toArray().map((e=>e instanceof cy?e.clone():e))),e}get length(){return this.doc??ry(),this._length}_callObserver(e,t){super._callObserver(e,t),ly(this,e,new Fy(this,e))}insert(e,t){null!==this.doc?Ig(this.doc,(n=>{Dy(n,this,e,t)})):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?Ig(this.doc,(t=>{((e,t,n)=>{let r=(t._searchMarker||[]).reduce(((e,t)=>t.index>e.index?t:e),{index:0,p:t._start}).p;if(r)for(;r.right;)r=r.right;yy(e,t,r,n)})(t,this,e)})):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){null!==this.doc?Ig(this.doc,(n=>{wy(n,this,e,t)})):this._prelimContent.splice(e,t)}get(e){return gy(this,e)}toArray(){return fy(this)}slice(e=0,t=this.length){return dy(this,e,t)}toJSON(){return this.map((e=>e instanceof cy?e.toJSON():e))}map(e){return my(this,e)}forEach(e){hy(this,e)}[Symbol.iterator](){return vy(this)}_write(e){e.writeTypeRef(pb)}}class My extends ty{constructor(e,t,n){super(e,t),this.keysChanged=n}}class By extends cy{constructor(e){super(),this._prelimContent=null,this._prelimContent=void 0===e?new Map:new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach(((e,t)=>{this.set(t,e)})),this._prelimContent=null}_copy(){return new By}clone(){const e=new By;return this.forEach(((t,n)=>{e.set(n,t instanceof cy?t.clone():t)})),e}_callObserver(e,t){ly(this,e,new My(this,e,t))}toJSON(){this.doc??ry();const e={};return this._map.forEach(((t,n)=>{if(!t.deleted){const r=t.content.getContent()[t.length-1];e[n]=r instanceof cy?r.toJSON():r}})),e}get size(){return[...Ay(this)].length}keys(){return Cv(Ay(this),(e=>e[0]))}values(){return Cv(Ay(this),(e=>e[1].content.getContent()[e[1].length-1]))}entries(){return Cv(Ay(this),(e=>[e[0],e[1].content.getContent()[e[1].length-1]]))}forEach(e){this.doc??ry(),this._map.forEach(((t,n)=>{t.deleted||e(t.content.getContent()[t.length-1],n,this)}))}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?Ig(this.doc,(t=>{Cy(t,this,e)})):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?Ig(this.doc,(n=>{ky(n,this,e,t)})):this._prelimContent.set(e,t),t}get(e){return Ey(this,e)}has(e){return Sy(this,e)}clear(){null!==this.doc?Ig(this.doc,(e=>{this.forEach((function(t,n,r){Cy(e,r,n)}))})):this._prelimContent.clear()}_write(e){e.writeTypeRef(hb)}}const Py=(e,t)=>e===t||"object"==typeof e&&"object"==typeof t&&e&&t&&function(e,t){return e===t||Sv(e)===Sv(t)&&Av(e,(function(e,n){return(void 0!==e||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(t,n))&&t[n]===e}))}(e,t);class Ty{constructor(e,t,n,r){this.left=e,this.right=t,this.index=n,this.currentAttributes=r}forward(){null===this.right&&Vh(),this.right.content.constructor===sb?this.right.deleted||Ry(this.currentAttributes,this.right.content):this.right.deleted||(this.index+=this.right.length),this.left=this.right,this.right=this.right.right}}const Ny=(e,t,n)=>{for(;null!==t.right&&n>0;)t.right.content.constructor===sb?t.right.deleted||Ry(t.currentAttributes,t.right.content):t.right.deleted||(n<t.right.length&&Bg(e,cg(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length),t.left=t.right,t.right=t.right.right;return t},jy=(e,t,n,r)=>{const o=new Map,i=r?sy(t,n):null;if(i){const t=new Ty(i.p.left,i.p,i.index,o);return Ny(e,t,n-i.index)}{const r=new Ty(null,t._start,0,o);return Ny(e,r,n)}},_y=(e,t,n,r)=>{for(;null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===sb&&Py(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const o=e.doc,i=o.clientID;r.forEach(((r,a)=>{const s=n.left,u=n.right,l=new Sb(cg(i,Sg(o.store,i)),s,s&&s.lastId,u,u&&u.id,t,null,new sb(a,r));l.integrate(e,0),n.right=l,n.forward()}))},Ry=(e,t)=>{const{key:n,value:r}=t;null===r?e.delete(n):e.set(n,r)},Ly=(e,t)=>{for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===sb&&Py(t[e.right.content.key]??null,e.right.content.value));)e.forward()},Iy=(e,t,n,r)=>{const o=e.doc,i=o.clientID,a=new Map;for(const s in r){const u=r[s],l=n.currentAttributes.get(s)??null;if(!Py(l,u)){a.set(s,l);const{left:r,right:c}=n;n.right=new Sb(cg(i,Sg(o.store,i)),r,r&&r.lastId,c,c&&c.id,t,null,new sb(s,u)),n.right.integrate(e,0),n.forward()}}return a},Hy=(e,t,n,r,o)=>{n.currentAttributes.forEach(((e,t)=>{void 0===o[t]&&(o[t]=null)}));const i=e.doc,a=i.clientID;Ly(n,o);const s=Iy(e,t,n,o),u=r.constructor===String?new db(r):r instanceof cy?new Db(r):new ab(r);let{left:l,right:c,index:d}=n;t._searchMarker&&uy(t._searchMarker,n.index,u.getLength()),c=new Sb(cg(a,Sg(i.store,a)),l,l&&l.lastId,c,c&&c.id,t,null,u),c.integrate(e,0),n.right=c,n.index=d,n.forward(),_y(e,t,n,s)},zy=(e,t,n,r,o)=>{const i=e.doc,a=i.clientID;Ly(n,o);const s=Iy(e,t,n,o);e:for(;null!==n.right&&(r>0||s.size>0&&(n.right.deleted||n.right.content.constructor===sb));){if(!n.right.deleted)switch(n.right.content.constructor){case sb:{const{key:t,value:i}=n.right.content,a=o[t];if(void 0!==a){if(Py(a,i))s.delete(t);else{if(0===r)break e;s.set(t,i)}n.right.delete(e)}else n.currentAttributes.set(t,i);break}default:r<n.right.length&&Bg(e,cg(n.right.id.client,n.right.id.clock+r)),r-=n.right.length}n.forward()}if(r>0){let o="";for(;r>0;r--)o+="\n";n.right=new Sb(cg(a,Sg(i.store,a)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new db(o)),n.right.integrate(e,0),n.forward()}_y(e,t,n,s)},Vy=(e,t,n,r,o)=>{let i=t;const a=jp();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===sb){const e=i.content;a.set(e.key,e)}i=i.right}let s=0,u=!1;for(;t!==i;){if(n===t&&(u=!0),!t.deleted){const n=t.content;switch(n.constructor){case sb:{const{key:i,value:l}=n,c=r.get(i)??null;a.get(i)===n&&c!==l||(t.delete(e),s++,u||(o.get(i)??null)!==l||c===l||(null===c?o.delete(i):o.set(i,c))),u||t.deleted||Ry(o,n);break}}}t=t.right}return s},$y=e=>{let t=0;return Ig(e.doc,(n=>{let r=e._start,o=e._start,i=jp();const a=_p(i);for(;o;)!1===o.deleted&&(o.content.constructor===sb?Ry(a,o.content):(t+=Vy(n,r,o,i,a),i=_p(a),r=o)),o=o.right})),t},Uy=e=>{const t=new Set,n=e.doc;for(const[r,o]of e.afterState.entries()){const i=e.beforeState.get(r)||0;o!==i&&Tg(e,n.store.clients.get(r),i,o,(e=>{e.deleted||e.content.constructor!==sb||e.constructor===tb||t.add(e.parent)}))}Ig(n,(n=>{Pv(e,e.deleteSet,(e=>{if(e instanceof tb||!e.parent._hasFormatting||t.has(e.parent))return;const r=e.parent;e.content.constructor===sb?t.add(r):((e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===sb){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}})(n,e)}));for(const e of t)$y(e)}))},Gy=(e,t,n)=>{const r=n,o=_p(t.currentAttributes),i=t.right;for(;n>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case Db:case ab:case db:n<t.right.length&&Bg(e,cg(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e)}t.forward()}i&&Vy(e,i,t.right,o,t.currentAttributes);const a=(t.left||t.right).parent;return a._searchMarker&&uy(a._searchMarker,t.index,-r+n),t};class Wy extends ty{constructor(e,t,n){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,n.forEach((e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)}))}get changes(){if(null===this._changes){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){const e=this.target.doc,t=[];Ig(e,(e=>{const n=new Map,r=new Map;let o=this.target._start,i=null;const a={};let s="",u=0,l=0;const c=()=>{if(null!==i){let e=null;switch(i){case"delete":l>0&&(e={delete:l}),l=0;break;case"insert":("object"==typeof s||s.length>0)&&(e={insert:s},n.size>0&&(e.attributes={},n.forEach(((t,n)=>{null!==t&&(e.attributes[n]=t)})))),s="";break;case"retain":u>0&&(e={retain:u},function(e){for(var t in e)return!1;return!0}(a)||(e.attributes=Ev({},a))),u=0}e&&t.push(e),i=null}};for(;null!==o;){switch(o.content.constructor){case Db:case ab:this.adds(o)?this.deletes(o)||(c(),i="insert",s=o.content.getContent()[0],c()):this.deletes(o)?("delete"!==i&&(c(),i="delete"),l+=1):o.deleted||("retain"!==i&&(c(),i="retain"),u+=1);break;case db:this.adds(o)?this.deletes(o)||("insert"!==i&&(c(),i="insert"),s+=o.content.str):this.deletes(o)?("delete"!==i&&(c(),i="delete"),l+=o.length):o.deleted||("retain"!==i&&(c(),i="retain"),u+=o.length);break;case sb:{const{key:t,value:s}=o.content;if(this.adds(o)){if(!this.deletes(o)){const u=n.get(t)??null;Py(u,s)?null!==s&&o.delete(e):("retain"===i&&c(),Py(s,r.get(t)??null)?delete a[t]:a[t]=s)}}else if(this.deletes(o)){r.set(t,s);const e=n.get(t)??null;Py(e,s)||("retain"===i&&c(),a[t]=e)}else if(!o.deleted){r.set(t,s);const n=a[t];void 0!==n&&(Py(n,s)?null!==n&&o.delete(e):("retain"===i&&c(),null===s?delete a[t]:a[t]=s))}o.deleted||("insert"===i&&c(),Ry(n,o.content));break}}o=o.right}for(c();t.length>0;){const e=t[t.length-1];if(void 0===e.retain||void 0!==e.attributes)break;t.pop()}})),this._delta=t}return this._delta}}class qy extends cy{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??ry(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach((e=>e()))}catch(e){console.error(e)}this._pending=null}_copy(){return new qy}clone(){const e=new qy;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const n=new Wy(this,e,t);ly(this,e,n),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??ry();let e="",t=this._start;for(;null!==t;)!t.deleted&&t.countable&&t.content.constructor===db&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){null!==this.doc?Ig(this.doc,(n=>{const r=new Ty(null,this._start,0,new Map);for(let o=0;o<e.length;o++){const i=e[o];if(void 0!==i.insert){const a=t||"string"!=typeof i.insert||o!==e.length-1||null!==r.right||"\n"!==i.insert.slice(-1)?i.insert:i.insert.slice(0,-1);("string"!=typeof a||a.length>0)&&Hy(n,this,r,a,i.attributes||{})}else void 0!==i.retain?zy(n,this,r,i.retain,i.attributes||{}):void 0!==i.delete&&Gy(n,r,i.delete)}})):this._pending.push((()=>this.applyDelta(e)))}toDelta(e,t,n){this.doc??ry();const r=[],o=new Map,i=this.doc;let a="",s=this._start;function u(){if(a.length>0){const e={};let t=!1;o.forEach(((n,r)=>{t=!0,e[r]=n}));const n={insert:a};t&&(n.attributes=e),r.push(n),a=""}}const l=()=>{for(;null!==s;){if(Cg(s,e)||void 0!==t&&Cg(s,t))switch(s.content.constructor){case db:{const r=o.get("ychange");void 0===e||Cg(s,e)?void 0===t||Cg(s,t)?void 0!==r&&(u(),o.delete("ychange")):void 0!==r&&r.user===s.id.client&&"added"===r.type||(u(),o.set("ychange",n?n("added",s.id):{type:"added"})):void 0!==r&&r.user===s.id.client&&"removed"===r.type||(u(),o.set("ychange",n?n("removed",s.id):{type:"removed"})),a+=s.content.str;break}case Db:case ab:{u();const e={insert:s.content.getContent()[0]};if(o.size>0){const t={};e.attributes=t,o.forEach(((e,n)=>{t[n]=e}))}r.push(e);break}case sb:Cg(s,e)&&(u(),Ry(o,s.content))}s=s.right}u()};return e||t?Ig(i,(n=>{e&&kg(n,e),t&&kg(n,t),l()}),"cleanup"):l(),r}insert(e,t,n){if(t.length<=0)return;const r=this.doc;null!==r?Ig(r,(r=>{const o=jy(r,this,e,!n);n||(n={},o.currentAttributes.forEach(((e,t)=>{n[t]=e}))),Hy(r,this,o,t,n)})):this._pending.push((()=>this.insert(e,t,n)))}insertEmbed(e,t,n){const r=this.doc;null!==r?Ig(r,(r=>{const o=jy(r,this,e,!n);Hy(r,this,o,t,n||{})})):this._pending.push((()=>this.insertEmbed(e,t,n||{})))}delete(e,t){if(0===t)return;const n=this.doc;null!==n?Ig(n,(n=>{Gy(n,jy(n,this,e,!0),t)})):this._pending.push((()=>this.delete(e,t)))}format(e,t,n){if(0===t)return;const r=this.doc;null!==r?Ig(r,(r=>{const o=jy(r,this,e,!1);null!==o.right&&zy(r,this,o,t,n)})):this._pending.push((()=>this.format(e,t,n)))}removeAttribute(e){null!==this.doc?Ig(this.doc,(t=>{Cy(t,this,e)})):this._pending.push((()=>this.removeAttribute(e)))}setAttribute(e,t){null!==this.doc?Ig(this.doc,(n=>{ky(n,this,e,t)})):this._pending.push((()=>this.setAttribute(e,t)))}getAttribute(e){return Ey(this,e)}getAttributes(){return xy(this)}_write(e){e.writeTypeRef(mb)}}class Ky{constructor(e,t=()=>!0){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??ry()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do{if(t=e.content.type,e.deleted||t.constructor!==Zy&&t.constructor!==Jy||null===t._start)for(;null!==e;){const t=e.next;if(null!==t){e=t;break}e=e.parent===this._root?null:e.parent._item}else e=t._start}while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Jy extends cy{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Jy}clone(){const e=new Jy;return e.insert(0,this.toArray().map((e=>e instanceof cy?e.clone():e))),e}get length(){return this.doc??ry(),null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new Ky(this,e)}querySelector(e){e=e.toUpperCase();const t=new Ky(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),zp(new Ky(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)))}_callObserver(e,t){ly(this,e,new Xy(this,t,e))}toString(){return my(this,(e=>e.toString())).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},n){const r=e.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),hy(this,(o=>{r.insertBefore(o.toDOM(e,t,n),null)})),r}insert(e,t){null!==this.doc?Ig(this.doc,(n=>{Dy(n,this,e,t)})):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)Ig(this.doc,(n=>{const r=e&&e instanceof cy?e._item:e;yy(n,this,r,t)}));else{const n=this._prelimContent,r=null===e?0:n.findIndex((t=>t===e))+1;if(0===r&&null!==e)throw Hh("Reference item not found");n.splice(r,0,...t)}}delete(e,t=1){null!==this.doc?Ig(this.doc,(n=>{wy(n,this,e,t)})):this._prelimContent.splice(e,t)}toArray(){return fy(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return gy(this,e)}slice(e=0,t=this.length){return dy(this,e,t)}forEach(e){hy(this,e)}_write(e){e.writeTypeRef(gb)}}class Zy extends Jy{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach(((e,t)=>{this.setAttribute(t,e)})),this._prelimAttrs=null}_copy(){return new Zy(this.nodeName)}clone(){const e=new Zy(this.nodeName);return function(e,t){for(var n in e)t(e[n],n)}(this.getAttributes(),((t,n)=>{"string"==typeof t&&e.setAttribute(n,t)})),e.insert(0,this.toArray().map((e=>e instanceof cy?e.clone():e))),e}toString(){const e=this.getAttributes(),t=[],n=[];for(const t in e)n.push(t);n.sort();const r=n.length;for(let o=0;o<r;o++){const r=n[o];t.push(r+'="'+e[r]+'"')}const o=this.nodeName.toLocaleLowerCase();return`<${o}${t.length>0?" "+t.join(" "):""}>${super.toString()}</${o}>`}removeAttribute(e){null!==this.doc?Ig(this.doc,(t=>{Cy(t,this,e)})):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?Ig(this.doc,(n=>{ky(n,this,e,t)})):this._prelimAttrs.set(e,t)}getAttribute(e){return Ey(this,e)}hasAttribute(e){return Sy(this,e)}getAttributes(e){return e?((e,t)=>{const n={};return this._map.forEach(((e,r)=>{let o=e;for(;null!==o&&(!t.sv.has(o.id.client)||o.id.clock>=(t.sv.get(o.id.client)||0));)o=o.left;null!==o&&Cg(o,t)&&(n[r]=o.content.getContent()[o.length-1])})),n})(0,e):xy(this)}toDOM(e=document,t={},n){const r=e.createElement(this.nodeName),o=this.getAttributes();for(const e in o){const t=o[e];"string"==typeof t&&r.setAttribute(e,t)}return hy(this,(o=>{r.appendChild(o.toDOM(e,t,n))})),void 0!==n&&n._createAssociation(r,this),r}_write(e){e.writeTypeRef(vb),e.writeKey(this.nodeName)}}class Xy extends ty{constructor(e,t,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach((e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)}))}}class Yy extends By{constructor(e){super(),this.hookName=e}_copy(){return new Yy(this.hookName)}clone(){const e=new Yy(this.hookName);return this.forEach(((t,n)=>{e.set(n,t)})),e}toDOM(e=document,t={},n){const r=t[this.hookName];let o;return o=void 0!==r?r.createDom(this):document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),void 0!==n&&n._createAssociation(o,this),o}_write(e){e.writeTypeRef(yb),e.writeKey(this.hookName)}}class Qy extends qy{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new Qy}clone(){const e=new Qy;return e.applyDelta(this.toDelta()),e}toDOM(e=document,t,n){const r=e.createTextNode(this.toString());return void 0!==n&&n._createAssociation(r,this),r}toString(){return this.toDelta().map((e=>{const t=[];for(const n in e.attributes){const r=[];for(const t in e.attributes[n])r.push({key:t,value:e.attributes[n][t]});r.sort(((e,t)=>e.key<t.key?-1:1)),t.push({nodeName:n,attrs:r})}t.sort(((e,t)=>e.nodeName<t.nodeName?-1:1));let n="";for(let e=0;e<t.length;e++){const r=t[e];n+=`<${r.nodeName}`;for(let e=0;e<r.attrs.length;e++){const t=r.attrs[e];n+=` ${t.key}="${t.value}"`}n+=">"}n+=e.insert;for(let e=t.length-1;e>=0;e--)n+=`</${t[e].nodeName}>`;return n})).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(bb)}}class eb{constructor(e,t){this.id=e,this.length=t}get deleted(){throw zh()}mergeWith(e){return!1}write(e,t,n){throw zh()}integrate(e,t){throw zh()}}class tb extends eb{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),Ag(e.doc.store,this)}write(e,t){e.writeInfo(0),e.writeLen(this.length-t)}getMissing(e,t){return null}}class nb{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new nb(this.content)}splice(e){throw zh()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class rb{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new rb(this.len)}splice(e){const t=new rb(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){_v(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}const ob=(e,t)=>new $v({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class ib{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new ib(ob(this.doc.guid,this.opts))}splice(e){throw zh()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class ab{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new ab(this.embed)}splice(e){throw zh()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class sb{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new sb(this.key,this.value)}splice(e){throw zh()}mergeWith(e){return!1}integrate(e,t){const n=t.parent;n._searchMarker=null,n._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}class ub{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new ub(this.arr)}splice(e){const t=new ub(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeString(void 0===t?"undefined":JSON.stringify(t))}}getRef(){return 2}}const lb="development"===zm("node_env");class cb{constructor(e){this.arr=e,lb&&Ov(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new cb(this.arr)}splice(e){const t=new cb(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeAny(t)}}getRef(){return 8}}class db{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new db(this.str)}splice(e){const t=new db(this.str.slice(e));this.str=this.str.slice(0,e);const n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"�",t.str="�"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}const fb=[e=>new Oy,e=>new By,e=>new qy,e=>new Zy(e.readKey()),e=>new Jy,e=>new Yy(e.readKey()),e=>new Qy],pb=0,hb=1,mb=2,vb=3,gb=4,yb=5,bb=6;class Db{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Db(this.type._copy())}splice(e){throw zh()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach((t=>{t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e)})),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach((t=>{for(;null!==t;)t.gc(e,!0),t=t.left})),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const wb=(e,t)=>{let n,r=t,o=0;do{o>0&&(r=cg(r.client,r.clock+o)),n=Og(e,r),o=r.clock-n.id.clock,r=n.redone}while(null!==r&&n instanceof Sb);return{item:n,diff:o}},Cb=(e,t)=>{for(;null!==e&&e.keep!==t;)e.keep=t,e=e.parent._item},kb=(e,t,n)=>{const{client:r,clock:o}=t.id,i=new Sb(cg(r,o+n),t,cg(r,o+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&i.markDeleted(),t.keep&&(i.keep=!0),null!==t.redone&&(i.redone=cg(t.redone.client,t.redone.clock+n)),t.right=i,null!==i.right&&(i.right.left=i),e._mergeStructs.push(i),null!==i.parentSub&&null===i.right&&i.parent._map.set(i.parentSub,i),t.length=n,i},Eb=(e,t)=>function(e){for(var n=0;n<e.length;n++)if(r=e[n],Tv(r.deletions,t))return!0;var r;return!1}(e),xb=(e,t,n,r,o,i)=>{const a=e.doc,s=a.store,u=a.clientID,l=t.redone;if(null!==l)return Bg(e,l);let c,d=t.parent._item,f=null;if(null!==d&&!0===d.deleted){if(null===d.redone&&(!n.has(d)||null===xb(e,d,n,r,o,i)))return null;for(;null!==d.redone;)d=Bg(e,d.redone)}const p=null===d?t.parent:d.content.type;if(null===t.parentSub){for(f=t.left,c=t;null!==f;){let t=f;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:Bg(e,t.redone);if(null!==t&&t.parent._item===d){f=t;break}f=f.left}for(;null!==c;){let t=c;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:Bg(e,t.redone);if(null!==t&&t.parent._item===d){c=t;break}c=c.right}}else if(c=null,t.right&&!o){for(f=t;null!==f&&null!==f.right&&(f.right.redone||Tv(r,f.right.id)||Eb(i.undoStack,f.right.id)||Eb(i.redoStack,f.right.id));)for(f=f.right;f.redone;)f=Bg(e,f.redone);if(f&&null!==f.right)return null}else f=p._map.get(t.parentSub)||null;const h=Sg(s,u),m=cg(u,h),v=new Sb(m,f,f&&f.lastId,c,c&&c.id,p,t.parentSub,t.content.copy());return t.redone=m,Cb(v,!0),v.integrate(e,0),v};class Sb extends eb{constructor(e,t,n,r,o,i,a,s){super(e,s.getLength()),this.origin=n,this.left=t,this.right=r,this.rightOrigin=o,this.parent=i,this.parentSub=a,this.redone=null,this.content=s,this.info=this.content.isCountable()?2:0}set marker(e){(8&this.info)>0!==e&&(this.info^=8)}get marker(){return(8&this.info)>0}get keep(){return(1&this.info)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(2&this.info)>0}get deleted(){return(4&this.info)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Sg(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Sg(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===ug&&this.id.client!==this.parent.client&&this.parent.clock>=Sg(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Pg(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Bg(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===tb||this.right&&this.right.constructor===tb)this.parent=null;else if(this.parent){if(this.parent.constructor===ug){const e=Og(t,this.parent);e.constructor===tb?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===Sb?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Sb&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=Pg(e,e.doc.store,cg(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,n=this.left;if(null!==n)t=n.right;else if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start;const r=new Set,o=new Set;for(;null!==t&&t!==this.right;){if(o.add(t),r.add(t),lg(this.origin,t.origin)){if(t.id.client<this.id.client)n=t,r.clear();else if(lg(this.rightOrigin,t.rightOrigin))break}else{if(null===t.origin||!o.has(Og(e.doc.store,t.origin)))break;r.has(Og(e.doc.store,t.origin))||(n=t,r.clear())}t=t.right}this.left=n}if(null!==this.left){const e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Ag(e.doc.store,this),this.content.integrate(e,this),_g(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new tb(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:cg(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&lg(e.origin,this.lastId)&&this.right===e&&lg(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach((t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))})),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),_v(e.deleteSet,this.id.client,this.id.clock,this.length),_g(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw Vh();this.content.gc(e),t?((e,t,n)=>{const r=e.clients.get(t.id.client);r[Fg(r,t.id.clock)]=n})(e,this,new tb(this.id,this.length)):this.content=new rb(this.length)}write(e,t){const n=t>0?cg(this.id.client,this.id.clock+t-1):this.origin,r=this.rightOrigin,o=this.parentSub,i=31&this.content.getRef()|(null===n?0:eh)|(null===r?0:Qp)|(null===o?0:32);if(e.writeInfo(i),null!==n&&e.writeLeftID(n),null!==r&&e.writeRightID(r),null===n&&null===r){const t=this.parent;if(void 0!==t._item){const n=t._item;if(null===n){const n=dg(t);e.writeParentInfo(!0),e.writeString(n)}else e.writeParentInfo(!1),e.writeLeftID(n.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===ug?(e.writeParentInfo(!1),e.writeLeftID(t)):Vh();null!==o&&e.writeString(o)}this.content.write(e,t)}}const Ab=(e,t)=>Fb[31&t](e),Fb=[()=>{Vh()},e=>new rb(e.readLen()),e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++){const t=e.readString();"undefined"===t?n.push(void 0):n.push(JSON.parse(t))}return new ub(n)},e=>new nb(e.readBuf()),e=>new db(e.readString()),e=>new ab(e.readJSON()),e=>new sb(e.readKey(),e.readJSON()),e=>new Db(fb[e.readTypeRef()](e)),e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new cb(n)},e=>new ib(ob(e.readString(),e.readAny())),()=>{Vh()}];class Ob extends eb{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){Vh()}write(e,t){e.writeInfo(10),Eh(e.restEncoder,this.length-t)}getMissing(e,t){return null}}const Mb="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},Bb="__ $YJS$ __";!0===Mb[Bb]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),Mb[Bb]=!0;var Pb=new Bn("y-sync"),Tb=new Bn("y-undo"),Nb=new Bn("yjs-cursor");function jb(e){return jb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jb(e)}function _b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Rb(r.key),r)}}function Rb(e){var t=function(e){if("object"!=jb(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=jb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==jb(t)?t:t+""}var Lb=function(e){return function(){return function(e,t){return t&&_b(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._=t}),[{key:"destroy",value:function(){e(this._)}}])}()},Ib=Lb(clearTimeout),Hb=function(e,t){return new Ib(setTimeout(t,e))},zb=(Lb(clearInterval),Lb((function(e){return"undefined"!=typeof requestAnimationFrame&&cancelAnimationFrame(e)})),Lb((function(e){return"undefined"!=typeof cancelIdleCallback&&cancelIdleCallback(e)})),null),Vb=function(){var e=zb;zb=null,e.forEach((function(e,t){var n=t.state.tr,r=Pb.getState(t.state);r&&r.binding&&!r.binding.isDestroyed&&(e.forEach((function(e,t){n.setMeta(t,e)})),t.dispatch(n))}))},$b=function(e,t,n){if(0===e)return gg(t,0,-1);for(var r=null===t._first?null:t._first.content.type;null!==r&&t!==r;){if(r instanceof Qy){if(r._length>=e)return gg(r,e,-1);if(e-=r._length,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{do{r=null===r._item?null:r._item.parent,e--}while(r!==t&&null!==r&&null!==r._item&&null===r._item.next);null!==r&&r!==t&&(r=null===r._item?null:r._item.next.content.type)}}else{var o=(n.get(r)||{nodeSize:0}).nodeSize;if(null!==r._first&&e<o)r=r._first.content.type,e--;else{if(1===e&&0===r._length&&o>1)return new pg(null===r._item?null:r._item.id,null===r._item?dg(r):null,null);if(e-=o,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{if(0===e)return r=null===r._item?r:r._item.parent,new pg(null===r._item?null:r._item.id,null===r._item?dg(r):null,null);do{r=r._item.parent,e--}while(r!==t&&null===r._item.next);r!==t&&(r=r._item.next.content.type)}}}if(null===r)throw Vh();if(0===e&&r.constructor!==Qy&&r!==t)return Ub(r._item.parent,r._item)}return gg(t,t._length,-1)},Ub=function(e,t){var n=null,r=null;return null===e._item?r=dg(e):n=cg(e._item.id.client,e._item.id.clock),new pg(n,r,t.id)},Gb=function(e,t,n,r){var o=((e,t,n=!0)=>{const r=t.store,o=e.item,i=e.type,a=e.tname,s=e.assoc;let u=null,l=0;if(null!==o){if(Sg(r,o.client)<=o.clock)return null;const e=n?wb(r,o):((e,t)=>{const n=Og(e,t);return{item:n,diff:t.clock-n.id.clock}})(r,o),t=e.item;if(!(t instanceof Sb))return null;if(u=t.parent,null===u._item||!u._item.deleted){l=t.deleted||!t.countable?0:e.diff+(s>=0?0:1);let n=t.left;for(;null!==n;)!n.deleted&&n.countable&&(l+=n.length),n=n.left}}else{if(null!==a)u=t.get(a);else{if(null===i)throw Vh();{if(Sg(r,i.client)<=i.clock)return null;const{item:e}=n?wb(r,i):{item:Og(r,i)};if(!(e instanceof Sb&&e.content instanceof Db))return null;u=e.content.type}}l=s>=0?u._length:0}return((e,t,n=0)=>new mg(e,t,n))(u,l,e.assoc)})(n,e);if(null===o||o.type!==t&&!fg(t,o.type._item))return null;var i=o.type,a=0;if(i.constructor===Qy)a=o.index;else if(null===i._item||!i._item.deleted){for(var s=i._first,u=0;u<i._length&&u<o.index&&null!==s;){if(!s.deleted){var l=s.content.type;u++,a+=l instanceof Qy?l._length:r.get(l).nodeSize}s=s.right}a+=1}for(;i!==t&&null!==i._item;){var c=i._item.parent;if(null===c._item||!c._item.deleted){a+=1;for(var d=c._first;null!==d;){var f=d.content.type;if(f===i)break;d.deleted||(a+=f instanceof Qy?f._length:r.get(f).nodeSize),d=d.right}}i=c}return a-1},Wb=function(e,t,n){return e!==t},qb=function(e){var t=document.createElement("span");t.classList.add("ProseMirror-yjs-cursor"),t.setAttribute("style","border-color: ".concat(e.color));var n=document.createElement("div");n.setAttribute("style","background-color: ".concat(e.color)),n.insertBefore(document.createTextNode(e.name),null);var r=document.createTextNode("⁠"),o=document.createTextNode("⁠");return t.insertBefore(r,null),t.insertBefore(n,null),t.insertBefore(o,null),t},Kb=function(e){return{style:"background-color: ".concat(e.color,"70"),class:"ProseMirror-yjs-selection"}},Jb=/^#[0-9a-fA-F]{6}$/,Zb=function(e,t,n,r,o){var i=Pb.getState(e),a=i.doc,s=[];return null!=i.snapshot||null!=i.prevSnapshot||0===i.binding.mapping.size?Mi.create(e.doc,[]):(t.getStates().forEach((function(t,u){if(n(a.clientID,u,t)&&null!=t.cursor){var l=t.user||{};null==l.color?l.color="#ffa500":Jb.test(l.color)||console.warn("A user uses an unsupported color format",l),null==l.name&&(l.name="User: ".concat(u));var c=Gb(a,i.type,hg(t.cursor.anchor),i.binding.mapping),d=Gb(a,i.type,hg(t.cursor.head),i.binding.mapping);if(null!==c&&null!==d){var f=Xp(e.doc.content.size-1,0);c=Zp(c,f),d=Zp(d,f),s.push(Ai.widget(d,(function(){return r(l,u)}),{key:u+"",side:10}));var p=Zp(c,d),h=Xp(c,d);s.push(Ai.inline(p,h,o(l,u),{inclusiveEnd:!0,inclusiveStart:!1}))}}})),Mi.create(e.doc,s))},Xb=/[\uD800-\uDBFF]/,Yb=/[\uDC00-\uDFFF]/;function Qb(e){return Qb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qb(e)}function eD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tD(r.key),r)}}function tD(e){var t=function(e){if("object"!=Qb(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Qb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Qb(t)?t:t+""}var nD=function(e,t){return e>>>t|e<<32-t},rD=function(e){return nD(e,2)^nD(e,13)^nD(e,22)},oD=function(e){return nD(e,6)^nD(e,11)^nD(e,25)},iD=function(e){return nD(e,7)^nD(e,18)^e>>>3},aD=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),sD=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),uD=function(){return function(e,t){return t&&eD(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=new ArrayBuffer(320);this._H=new Uint32Array(t,0,8),this._H.set(sD),this._W=new Uint32Array(t,64,64)}),[{key:"_updateHash",value:function(){for(var e=this._H,t=this._W,n=16;n<64;n++)t[n]=(r=t[n-2],(nD(r,17)^nD(r,19)^r>>>10)+t[n-7]+iD(t[n-15])+t[n-16]);for(var r,o,i,a=e[0],s=e[1],u=e[2],l=e[3],c=e[4],d=e[5],f=e[6],p=e[7],h=0;h<64;h++)o=p+oD(c)+(c&d^~c&f)+aD[h]+t[h]>>>0,i=rD(a)+(a&s^a&u^s&u)>>>0,p=f,f=d,d=c,c=l+o>>>0,l=u,u=s,s=a,a=o+i>>>0;e[0]+=a,e[1]+=s,e[2]+=u,e[3]+=l,e[4]+=c,e[5]+=d,e[6]+=f,e[7]+=p}},{key:"digest",value:function(e){for(var t=0;t+56<=e.length;){for(var n=0;n<16&&t+3<e.length;n++)this._W[n]=e[t++]<<24|e[t++]<<16|e[t++]<<8|e[t++];if(t%64!=0){for(this._W.fill(0,n,16);t<e.length;)this._W[n]|=e[t]<<8*(3-t%4),t++;this._W[n]|=eh<<8*(3-t%4)}this._updateHash()}var r=t%64!=0;this._W.fill(0,0,16);for(var o=0;t<e.length;o++)for(var i=3;i>=0&&t<e.length;i--)this._W[o]|=e[t++]<<8*i;r||(this._W[o-(t%4==0?0:1)]|=eh<<8*(3-t%4)),this._W[14]=e.byteLength/536870912,this._W[15]=8*e.byteLength,this._updateHash();for(var a=new Uint8Array(32),s=0;s<this._H.length;s++)for(var u=0;u<4;u++)a[4*s+u]=this._H[s]>>>8*(3-u);return a}}])}();function lD(e){return lD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lD(e)}function cD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function dD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fD(r.key),r)}}function fD(e){var t=function(e){if("object"!=lD(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=lD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==lD(t)?t:t+""}var pD=function(e,t){return void 0===t?!e.deleted:t.sv.has(e.id.client)&&t.sv.get(e.id.client)>e.id.clock&&!Tv(t.ds,e.id)},hD=[{light:"#ecd44433",dark:"#ecd444"}],mD=function(e,t,n){if(!e.has(n)){if(e.size<t.length){var r=Lp();e.forEach((function(e){return r.add(e)})),t=t.filter((function(e){return!r.has(e)}))}e.set(n,(o=t)[Kp(vm()*o.length)])}var o;return e.get(n)},vD=function(e,t){return{type:t.selection.jsonID,anchor:$b(t.selection.anchor,e.type,e.mapping),head:$b(t.selection.head,e.type,e.mapping)}},gD=function(){return function(e,t){return t&&dD(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var n,r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.prosemirrorView=null,this.mux=(n=!0,function(e,t){if(n){n=!1;try{e()}finally{n=!0}}else void 0!==t&&t()}),this.mapping=o,this.isOMark=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=t.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=function(){null===r.beforeTransactionSelection&&null!=r.prosemirrorView&&(r.beforeTransactionSelection=vD(r,r.prosemirrorView.state))},this.afterAllTransactions=function(){r.beforeTransactionSelection=null},this._domSelectionInView=null}),[{key:"_tr",get:function(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}},{key:"_isLocalCursorInView",value:function(){var e=this;return!!this.prosemirrorView.hasFocus()&&(Rm&&null===this._domSelectionInView&&(Hb(0,(function(){e._domSelectionInView=null})),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView)}},{key:"_isDomSelectionInView",value:function(){var e=this.prosemirrorView._root.getSelection();if(null==e||null==e.anchorNode)return!1;var t=this.prosemirrorView._root.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset),0===t.getClientRects().length&&t.startContainer&&t.collapsed&&t.selectNodeContents(t.startContainer);var n=t.getBoundingClientRect(),r=Ym.documentElement;return n.bottom>=0&&n.right>=0&&n.left<=(window.innerWidth||r.clientWidth||0)&&n.top<=(window.innerHeight||r.clientHeight||0)}},{key:"renderSnapshot",value:function(e,t){t||(t=Dg(Rv(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(Pb,{snapshot:e,prevSnapshot:t}))}},{key:"unrenderSnapshot",value:function(){var e=this;this.mapping.clear(),this.mux((function(){var t=e.type.toArray().map((function(t){return bD(t,e.prosemirrorView.state.schema,e)})).filter((function(e){return null!==e})),n=e._tr.replace(0,e.prosemirrorView.state.doc.content.size,new J($.from(t),0,0));n.setMeta(Pb,{snapshot:null,prevSnapshot:null}),e.prosemirrorView.dispatch(n)}))}},{key:"_forceRerender",value:function(){var e=this;this.mapping.clear(),this.mux((function(){var t=null!==e.beforeTransactionSelection?null:e.prosemirrorView.state.selection,n=e.type.toArray().map((function(t){return bD(t,e.prosemirrorView.state.schema,e)})).filter((function(e){return null!==e})),r=e._tr.replace(0,e.prosemirrorView.state.doc.content.size,new J($.from(n),0,0));if(t){var o=Zp(Xp(t.anchor,0),r.doc.content.size),i=Zp(Xp(t.head,0),r.doc.content.size);r.setSelection(pn.create(r.doc,o,i))}e.prosemirrorView.dispatch(r.setMeta(Pb,{isChangeOrigin:!0,binding:e}))}))}},{key:"_renderSnapshot",value:function(e,t,n){var r=this,o=this.doc,i=this.type;if(e||(e=wg(this.doc)),e instanceof Uint8Array||t instanceof Uint8Array)if(e instanceof Uint8Array&&t instanceof Uint8Array||Vh(),o=new $v({gc:!1}),Qv(o,t),t=wg(o),Qv(o,e),e=wg(o),null===i._item){var a=Array.from(this.doc.share.keys()).find((function(e){return r.doc.share.get(e)===r.type}));i=o.getXmlFragment(a)}else{var s,u=null!==(s=o.store.clients.get(i._item.id.client))&&void 0!==s?s:[],l=u[Fg(u,i._item.id.clock)].content;i=l.type}this.mapping.clear(),this.mux((function(){o.transact((function(o){var a=n.permanentUserData;a&&a.dss.forEach((function(e){Pv(o,e,(function(e){}))}));var s=function(e,t){var r="added"===e?a.getUserByClientId(t.client):a.getUserByDeletedId(t);return{user:r,type:e,color:mD(n.colorMapping,n.colors,r)}},u=py(i,new bg(t.ds,e.sv)).map((function(n){return!n._item.deleted||pD(n._item,e)||pD(n._item,t)?bD(n,r.prosemirrorView.state.schema,{mapping:new Map,isOMark:new Map},e,t,s):null})).filter((function(e){return null!==e})),l=r._tr.replace(0,r.prosemirrorView.state.doc.content.size,new J($.from(u),0,0));r.prosemirrorView.dispatch(l.setMeta(Pb,{isChangeOrigin:!0}))}),Pb)}))}},{key:"_typeChanged",value:function(e,t){var n=this;if(null!=this.prosemirrorView){var r=Pb.getState(this.prosemirrorView.state);0!==e.length&&null==r.snapshot&&null==r.prevSnapshot?this.mux((function(){var e=function(e,t){return n.mapping.delete(t)};Pv(t,t.deleteSet,(function(e){if(e.constructor===Sb){var t=e.content.type;t&&n.mapping.delete(t)}})),t.changed.forEach(e),t.changedParentTypes.forEach(e);var r=n.type.toArray().map((function(e){return yD(e,n.prosemirrorView.state.schema,n)})).filter((function(e){return null!==e})),o=n._tr.replace(0,n.prosemirrorView.state.doc.content.size,new J($.from(r),0,0));!function(e,t,n){if(null!==t&&null!==t.anchor&&null!==t.head)if("all"===t.type)e.setSelection(new gn(e.doc));else if("node"===t.type){var r=Gb(n.doc,n.type,t.anchor,n.mapping);e.setSelection(mn.create(e.doc,r))}else{var o=Gb(n.doc,n.type,t.anchor,n.mapping),i=Gb(n.doc,n.type,t.head,n.mapping);null!==o&&null!==i&&e.setSelection(pn.between(e.doc.resolve(o),e.doc.resolve(i)))}}(o,n.beforeTransactionSelection,n),o=o.setMeta(Pb,{isChangeOrigin:!0,isUndoRedoOperation:t.origin instanceof $g}),null!==n.beforeTransactionSelection&&n._isLocalCursorInView()&&o.scrollIntoView(),n.prosemirrorView.dispatch(o)})):this.renderSnapshot(r.snapshot,r.prevSnapshot)}}},{key:"_prosemirrorChanged",value:function(e){var t=this;this.doc.transact((function(){ND(t.doc,t.type,e,t),t.beforeTransactionSelection=vD(t,t.prosemirrorView.state)}),Pb)}},{key:"initView",value:function(e){null!=this.prosemirrorView&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}},{key:"destroy",value:function(){null!=this.prosemirrorView&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}])}(),yD=function(e,t,n,r,o,i){var a=n.mapping.get(e);if(void 0===a){if(e instanceof Zy)return bD(e,t,n,r,o,i);throw zh()}return a},bD=function(e,t,n,r,o,i){var a=[],s=function(e){if(e instanceof Zy){var s=yD(e,t,n,r,o,i);null!==s&&a.push(s)}else{var u,l=null===(u=e._item.right)||void 0===u||null===(u=u.content)||void 0===u?void 0:u.type;l instanceof qy&&!l._item.deleted&&l._item.id.client===l.doc.clientID&&(e.applyDelta([{retain:e.length}].concat(function(e){return function(e){if(Array.isArray(e))return cD(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return cD(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cD(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(l.toDelta()))),l.doc.transact((function(e){l._item.delete(e)})));var c=DD(e,t,n,r,o,i);null!==c&&c.forEach((function(e){null!==e&&a.push(e)}))}};void 0===r||void 0===o?e.toArray().forEach(s):py(e,new bg(o.ds,r.sv)).forEach(s);try{var u=e.getAttributes(r);void 0!==r&&(pD(e._item,r)?pD(e._item,o)||(u.ychange=i?i("added",e._item.id):{type:"added"}):u.ychange=i?i("removed",e._item.id):{type:"removed"});var l=t.node(e.nodeName,u,a);return n.mapping.set(e,l),l}catch(t){return e.doc.transact((function(t){e._item.delete(t)}),Pb),n.mapping.delete(e),null}},DD=function(e,t,n,r,o,i){var a=[],s=e.toDelta(r,o,i);try{for(var u=0;u<s.length;u++){var l=s[u];a.push(t.text(l.insert,PD(l.attributes,t)))}}catch(t){return e.doc.transact((function(t){e._item.delete(t)}),Pb),null}return a},wD=function(e,t){return e instanceof Array?function(e,t){var n=new Qy,r=e.map((function(e){return{insert:e.text,attributes:TD(e.marks,t)}}));return n.applyDelta(r),t.mapping.set(n,e),n}(e,t):function(e,t){var n=new Zy(e.type.name);for(var r in e.attrs){var o=e.attrs[r];null!==o&&"ychange"!==r&&n.setAttribute(r,o)}return n.insert(0,ED(e).map((function(e){return wD(e,t)}))),t.mapping.set(n,e),n}(e,t)},CD=function(e){return"object"===lD(e)&&null!==e},kD=function(e,t){for(var n=Object.keys(e).filter((function(t){return null!==e[t]})),r=n.length===(null==t?0:Object.keys(t).filter((function(e){return null!==t[e]})).length),o=0;o<n.length&&r;o++){var i=n[o],a=e[i],s=t[i];r="ychange"===i||a===s||CD(a)&&CD(s)&&kD(a,s)}return r},ED=function(e){for(var t=e.content.content,n=[],r=0;r<t.length;r++){var o=t[r];if(o.isText){for(var i=[],a=t[r];r<t.length&&a.isText;a=t[++r])i.push(a);r--,n.push(i)}else n.push(o)}return n},xD=function(e,t){var n=e.toDelta();return n.length===t.length&&n.every((function(e,n){return e.insert===t[n].text&&xv(e.attributes||{}).length===t[n].marks.length&&Av(e.attributes,(function(e,r){var o,i=BD(r),a=t[n].marks;return kD(e,null===(o=a.find((function(e){return e.type.name===i})))||void 0===o?void 0:o.attrs)}))}))},SD=function(e,t){if(e instanceof Zy&&!(t instanceof Array)&&jD(e,t)){var n=ED(t);return e._length===n.length&&kD(e.getAttributes(),t.attrs)&&e.toArray().every((function(e,t){return SD(e,n[t])}))}return e instanceof Qy&&t instanceof Array&&xD(e,t)},AD=function(e,t){return e===t||e instanceof Array&&t instanceof Array&&e.length===t.length&&e.every((function(e,n){return t[n]===e}))},FD=function(e,t,n){for(var r=e.toArray(),o=ED(t),i=o.length,a=r.length,s=Zp(a,i),u=0,l=0,c=!1;u<s;u++){var d=r[u],f=o[u];if(AD(n.mapping.get(d),f))c=!0;else if(!SD(d,f))break}for(;u+l<s;l++){var p=r[a-l-1],h=o[i-l-1];if(AD(n.mapping.get(p),h))c=!0;else if(!SD(p,h))break}return{equalityFactor:u+l,foundMappedChild:c}},OD=function(e,t,n){n.mapping.set(e,t);var r=function(e){for(var t="",n=e._start,r={};null!==n;)n.deleted||(n.countable&&n.content instanceof db?t+=n.content.str:n.content instanceof sb&&(r[n.content.key]=null)),n=n.right;return{str:t,nAttrs:r}}(e),o=r.nAttrs,i=r.str,a=t.map((function(e){return{insert:e.text,attributes:Object.assign({},o,TD(e.marks,n))}})),s=function(e,t){for(var n=0,r=0;n<e.length&&n<t.length&&e[n]===t[n];)n++;for(n>0&&Xb.test(e[n-1])&&n--;r+n<e.length&&r+n<t.length&&e[e.length-r-1]===t[t.length-r-1];)r++;return r>0&&Yb.test(e[e.length-r])&&r--,{index:n,remove:e.length-n-r,insert:t.slice(n,t.length-r)}}(i,a.map((function(e){return e.insert})).join("")),u=s.insert,l=s.remove,c=s.index;e.delete(c,l),e.insert(c,u),e.applyDelta(a.map((function(e){return{retain:e.insert.length,attributes:e.attributes}})))},MD=/(.*)(--[a-zA-Z0-9+/=]{8})$/,BD=function(e){var t,n;return null!==(t=null===(n=MD.exec(e))||void 0===n?void 0:n[1])&&void 0!==t?t:e},PD=function(e,t){var n=[];for(var r in e)n.push(t.mark(BD(r),e[r]));return n},TD=function(e,t){var n={};return e.forEach((function(e){if("ychange"!==e.type.name){var r=Rp(t.isOMark,e.type,(function(){return!e.type.excludes(e.type)}));n[r?"".concat(e.type.name,"--").concat((o=e.toJSON(),Um(function(e){for(var t=6;t<e.length;t++)e[t%6]=e[t%6]^e[t];return e.slice(0,6)}((i=Gm(o),(new uD).digest(i)))))):e.type.name]=e.attrs}var o,i})),n},ND=function(e,t,n,r){if(t instanceof Zy&&t.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.mapping.set(t,n),t instanceof Zy){var o=t.getAttributes(),i=n.attrs;for(var a in i)null!==i[a]?o[a]!==i[a]&&"ychange"!==a&&t.setAttribute(a,i[a]):t.removeAttribute(a);for(var s in o)void 0===i[s]&&t.removeAttribute(s)}for(var u=ED(n),l=u.length,c=t.toArray(),d=c.length,f=Zp(l,d),p=0,h=0;p<f;p++){var m=c[p],v=u[p];if(!AD(r.mapping.get(m),v)){if(!SD(m,v))break;r.mapping.set(m,v)}}for(;h+p+1<f;h++){var g=c[d-h-1],y=u[l-h-1];if(!AD(r.mapping.get(g),y)){if(!SD(g,y))break;r.mapping.set(g,y)}}e.transact((function(){for(;d-p-h>0&&l-p-h>0;){var n=c[p],o=u[p],i=c[d-h-1],a=u[l-h-1];if(n instanceof Qy&&o instanceof Array)xD(n,o)||OD(n,o,r),p+=1;else{var s=n instanceof Zy&&jD(n,o),f=i instanceof Zy&&jD(i,a);if(s&&f){var m=FD(n,o,r),v=FD(i,a,r);m.foundMappedChild&&!v.foundMappedChild?f=!1:!m.foundMappedChild&&v.foundMappedChild||m.equalityFactor<v.equalityFactor?s=!1:f=!1}s?(ND(e,n,o,r),p+=1):f?(ND(e,i,a,r),h+=1):(r.mapping.delete(t.get(p)),t.delete(p,1),t.insert(p,[wD(o,r)]),p+=1)}}var g=d-p-h;if(1===d&&0===l&&c[0]instanceof Qy?(r.mapping.delete(c[0]),c[0].delete(0,c[0].length)):g>0&&(t.slice(p,p+g).forEach((function(e){return r.mapping.delete(e)})),t.delete(p,g)),p+h<l){for(var y=[],b=p;b<l-h;b++)y.push(wD(u[b],r));t.insert(p,y)}}),Pb)},jD=function(e,t){return!(t instanceof Array)&&e.nodeName===t.type.name},_D=function(e,t){var n;return null==t?null===(n=Tb.getState(e))||void 0===n||null===(n=n.undoManager)||void 0===n?void 0:n.canUndo():function(e){var t;return null!=(null===(t=Tb.getState(e))||void 0===t||null===(t=t.undoManager)||void 0===t?void 0:t.undo())}(e)},RD=function(e,t){var n;return null==t?null===(n=Tb.getState(e))||void 0===n||null===(n=n.undoManager)||void 0===n?void 0:n.canRedo():function(e){var t;return null!=(null===(t=Tb.getState(e))||void 0===t||null===(t=t.undoManager)||void 0===t?void 0:t.redo())}(e)},LD=new Set(["paragraph"]);function ID(e){return ID="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ID(e)}function HD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zD(r.key),r)}}function zD(e){var t=function(e){if("object"!=ID(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ID(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ID(t)?t:t+""}function VD(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Fn({view:function(t){return new $D(t,e)}})}var $D=function(){return function(e,t){return t&&HD(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n){var r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(r=n.width)&&void 0!==r?r:1,this.color=!1===n.color?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map((function(e){var n=function(t){o[e](t)};return t.dom.addEventListener(e,n),{name:e,handler:n}}))}),[{key:"destroy",value:function(){var e=this;this.handlers.forEach((function(t){var n=t.name,r=t.handler;return e.editorView.dom.removeEventListener(n,r)}))}},{key:"update",value:function(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}},{key:"setCursor",value:function(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}},{key:"updateOverlay",value:function(){var e,t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r=this.editorView.dom,o=r.getBoundingClientRect(),i=o.width/r.offsetWidth,a=o.height/r.offsetHeight;if(n){var s=t.nodeBefore,u=t.nodeAfter;if(s||u){var l=this.editorView.nodeDOM(this.cursorPos-(s?s.nodeSize:0));if(l){var c=l.getBoundingClientRect(),d=s?c.bottom:c.top;s&&u&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);var f=this.width/2*a;e={left:c.left,right:c.right,top:d-f,bottom:d+f}}}}if(!e){var p=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*i;e={left:p.left-h,right:p.left+h,top:p.top,bottom:p.bottom}}var m,v,g=this.editorView.dom.offsetParent;if(this.element||(this.element=g.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!g||g==document.body&&"static"==getComputedStyle(g).position)m=-pageXOffset,v=-pageYOffset;else{var y=g.getBoundingClientRect(),b=y.width/g.offsetWidth,D=y.height/g.offsetHeight;m=y.left-g.scrollLeft*b,v=y.top-g.scrollTop*D}this.element.style.left=(e.left-m)/i+"px",this.element.style.top=(e.top-v)/a+"px",this.element.style.width=(e.right-e.left)/i+"px",this.element.style.height=(e.bottom-e.top)/a+"px"}},{key:"scheduleRemoval",value:function(e){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return t.setCursor(null)}),e)}},{key:"dragover",value:function(e){if(this.editorView.editable){var t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=n&&n.type.spec.disableDropCursor,o="function"==typeof r?r(this.editorView,t,e):r;if(t&&!o){var i=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){var a=Nt(this.editorView.state.doc,i,this.editorView.dragging.slice);null!=a&&(i=a)}this.setCursor(i),this.scheduleRemoval(5e3)}}}},{key:"dragend",value:function(){this.scheduleRemoval(20)}},{key:"drop",value:function(){this.scheduleRemoval(20)}},{key:"dragleave",value:function(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}])}(),UD={slash_menu:{heading:{title:"Heading 1",subtext:"Top-level heading",aliases:["h","heading1","h1"],group:"Headings"},heading_2:{title:"Heading 2",subtext:"Key section heading",aliases:["h2","heading2","subheading"],group:"Headings"},heading_3:{title:"Heading 3",subtext:"Subsection and group heading",aliases:["h3","heading3","subheading"],group:"Headings"},quote:{title:"Quote",subtext:"Quote or excerpt",aliases:["quotation","blockquote","bq"],group:"Basic blocks"},numbered_list:{title:"Numbered List",subtext:"List with ordered items",aliases:["ol","li","list","numberedlist","numbered list"],group:"Basic blocks"},bullet_list:{title:"Bullet List",subtext:"List with unordered items",aliases:["ul","li","list","bulletlist","bullet list"],group:"Basic blocks"},check_list:{title:"Check List",subtext:"List with checkboxes",aliases:["ul","li","list","checklist","check list","checked list","checkbox"],group:"Basic blocks"},paragraph:{title:"Paragraph",subtext:"The body of your document",aliases:["p","paragraph"],group:"Basic blocks"},code_block:{title:"Code Block",subtext:"Code block with syntax highlighting",aliases:["code","pre"],group:"Basic blocks"},page_break:{title:"Page Break",subtext:"Page separator",aliases:["page","break","separator"],group:"Basic blocks"},table:{title:"Table",subtext:"Table with editable cells",aliases:["table"],group:"Advanced"},image:{title:"Image",subtext:"Resizable image with caption",aliases:["image","imageUpload","upload","img","picture","media","url"],group:"Media"},video:{title:"Video",subtext:"Resizable video with caption",aliases:["video","videoUpload","upload","mp4","film","media","url"],group:"Media"},audio:{title:"Audio",subtext:"Embedded audio with caption",aliases:["audio","audioUpload","upload","mp3","sound","media","url"],group:"Media"},file:{title:"File",subtext:"Embedded file",aliases:["file","upload","embed","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Search for and insert an emoji",aliases:["emoji","emote","emotion","face"],group:"Others"}},placeholders:{default:"Enter text or type '/' for commands",heading:"Heading",bulletListItem:"List",numberedListItem:"List",checkListItem:"List",emptyDocument:void 0,new_comment:"Write a comment...",edit_comment:"Edit comment...",comment_reply:"Add comment..."},file_blocks:{image:{add_button_text:"Add image"},video:{add_button_text:"Add video"},audio:{add_button_text:"Add audio"},file:{add_button_text:"Add file"}},side_menu:{add_block_label:"Add block",drag_handle_label:"Open block menu"},drag_handle:{delete_menuitem:"Delete",colors_menuitem:"Colors",header_row_menuitem:"Header row",header_column_menuitem:"Header column"},table_handle:{delete_column_menuitem:"Delete column",delete_row_menuitem:"Delete row",add_left_menuitem:"Add column left",add_right_menuitem:"Add column right",add_above_menuitem:"Add row above",add_below_menuitem:"Add row below",split_cell_menuitem:"Split cell",merge_cells_menuitem:"Merge cells",background_color_menuitem:"Background color"},suggestion_menu:{no_items_title:"No items found"},color_picker:{text_title:"Text",background_title:"Background",colors:{default:"Default",gray:"Gray",brown:"Brown",red:"Red",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"}},formatting_toolbar:{bold:{tooltip:"Bold",secondary_tooltip:"Mod+B"},italic:{tooltip:"Italic",secondary_tooltip:"Mod+I"},underline:{tooltip:"Underline",secondary_tooltip:"Mod+U"},strike:{tooltip:"Strike",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Colors"},link:{tooltip:"Create link",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Edit caption",input_placeholder:"Edit caption"},file_replace:{tooltip:{image:"Replace image",video:"Replace video",audio:"Replace audio",file:"Replace file"}},file_rename:{tooltip:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"},input_placeholder:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"}},file_download:{tooltip:{image:"Download image",video:"Download video",audio:"Download audio",file:"Download file"}},file_delete:{tooltip:{image:"Delete image",video:"Delete video",audio:"Delete audio",file:"Delete file"}},file_preview_toggle:{tooltip:"Toggle preview"},nest:{tooltip:"Nest block",secondary_tooltip:"Tab"},unnest:{tooltip:"Unnest block",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Align text left"},align_center:{tooltip:"Align text center"},align_right:{tooltip:"Align text right"},align_justify:{tooltip:"Justify text"},table_cell_merge:{tooltip:"Merge cells"},comment:{tooltip:"Add comment"}},file_panel:{upload:{title:"Upload",file_placeholder:{image:"Upload image",video:"Upload video",audio:"Upload audio",file:"Upload file"},upload_error:"Error: Upload failed"},embed:{title:"Embed",embed_button:{image:"Embed image",video:"Embed video",audio:"Embed audio",file:"Embed file"},url_placeholder:"Enter URL"}},link_toolbar:{delete:{tooltip:"Remove link"},edit:{text:"Edit link",tooltip:"Edit"},open:{tooltip:"Open in new tab"},form:{title_placeholder:"Edit title",url_placeholder:"Edit URL"}},comments:{actions:{add_reaction:"Add reaction",resolve:"Resolve",edit_comment:"Edit comment",delete_comment:"Delete comment",more_actions:"More actions"},reactions:{reacted_by:"Reacted by"},sidebar:{marked_as_resolved:"Marked as resolved",more_replies:function(e){return"".concat(e," more replies")}}},generic:{ctrl_shortcut:"Ctrl"}},GD=["data-test"],WD=["start"],qD=["default","emptyDocument"];function KD(){KD=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),s=new M(r||[]);return o(a,"_invoke",{value:S(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function g(){}function y(){}function b(){}var D={};l(D,a,(function(){return this}));var w=Object.getPrototypeOf,C=w&&w(w(B([])));C&&C!==n&&r.call(C,a)&&(D=C);var k=b.prototype=g.prototype=Object.create(D);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,s){var u=d(e[o],e,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==gw(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(c).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function S(t,n,r){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=A(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function A(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function F(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(F,this),this.reset(!0)}function B(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(gw(t)+" is not iterable")}return y.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},E(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(k),l(k,u,"Generator"),l(k,a,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=B,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:B(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function JD(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function ZD(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){JD(i,r,o,a,s,"next",e)}function s(e){JD(i,r,o,a,s,"throw",e)}a(void 0)}))}}function XD(){return XD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=fw(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},XD.apply(null,arguments)}function YD(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=tw(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function QD(e){return function(e){if(Array.isArray(e))return nw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tw(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ew(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||tw(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tw(e,t){if(e){if("string"==typeof e)return nw(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nw(e,t):void 0}}function nw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function rw(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ow(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vw(r.key),r)}}function iw(e,t,n){return t&&ow(e.prototype,t),n&&ow(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function aw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sw(e,t,n){return t=fw(t),function(e,t){if(t&&("object"==gw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,cw()?Reflect.construct(t,n||[],fw(e).constructor):t.apply(e,n))}function uw(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dw(e,t)}function lw(e){var t="function"==typeof Map?new Map:void 0;return lw=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(cw())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&dw(o,n.prototype),o}(e,arguments,fw(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),dw(n,e)},lw(e)}function cw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cw=function(){return!!e})()}function dw(e,t){return dw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dw(e,t)}function fw(e){return fw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fw(e)}function pw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pw(Object(n),!0).forEach((function(t){mw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mw(e,t,n){return(t=vw(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vw(e){var t=function(e){if("object"!=gw(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=gw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==gw(t)?t:t+""}function gw(e){return gw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gw(e)}var yw=Object.defineProperty,bw=function(e,t,n){return function(e,t,n){return t in e?yw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=gw(t)?t+"":t,n)};var Dw=js.create({name:"uniqueID",priority:1e4,addOptions:function(){return{attributeName:"id",types:[],setIdAttribute:!1,generateID:function(){if(("undefined"==typeof window?"undefined":gw(window))<"u"&&window.__TEST_OPTIONS){var e=window.__TEST_OPTIONS;return void 0===e.mockID?e.mockID=0:e.mockID++,e.mockID.toString()}return Uu()},filterTransaction:null}},addGlobalAttributes:function(){var e=this;return[{types:this.options.types,attributes:mw({},this.options.attributeName,{default:null,parseHTML:function(t){return t.getAttribute("data-".concat(e.options.attributeName))},renderHTML:function(t){var n=mw({},"data-".concat(e.options.attributeName),t[e.options.attributeName]);return e.options.setIdAttribute?hw(hw({},n),{},{id:t[e.options.attributeName]}):n}})}]},addProseMirrorPlugins:function(){var e=this,t=null,n=!1;return[new Fn({key:new Bn("uniqueID"),appendTransaction:function(t,n,r){var o=t.some((function(e){return e.docChanged}))&&!n.doc.eq(r.doc),i=e.options.filterTransaction&&t.some((function(t){var n,r;return!(null!==(r=(n=e.options).filterTransaction)&&void 0!==r&&r.call(n,t))}));if(o&&!i){var a=r.tr,s=e.options,u=s.types,l=s.attributeName,c=s.generateID,d=iu(n.doc,t),f=d.mapping;return cu(d).forEach((function(e){var t=e.newRange,o=su(r.doc,t,(function(e){return u.includes(e.type.name)})),i=function(e){var t=e.filter((function(t,n){return e.indexOf(t)!==n}));return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify,n={};return e.filter((function(e){var r=t(e);return!Object.prototype.hasOwnProperty.call(n,r)&&(n[r]=!0)}))}(t)}(o.map((function(e){return e.node.attrs[l]})).filter((function(e){return null!==e})));o.forEach((function(e){var t,o=e.node,s=e.pos,u=null===(t=a.doc.nodeAt(s))||void 0===t?void 0:t.attrs[l];if(null!==u)f.invert().mapResult(s).deleted&&i.includes(u)&&a.setNodeMarkup(s,void 0,hw(hw({},o.attrs),{},mw({},l,c())));else{var d=n.doc.type.createAndFill().content;if(null===n.doc.content.findDiffStart(d)){var p=JSON.parse(JSON.stringify(r.doc.toJSON()));if(p.content[0].content[0].attrs.id="initialBlockId",JSON.stringify(p.content)===JSON.stringify(d.toJSON()))return void a.setNodeMarkup(s,void 0,hw(hw({},o.attrs),{},mw({},l,"initialBlockId")))}a.setNodeMarkup(s,void 0,hw(hw({},o.attrs),{},mw({},l,c())))}}))})),a.steps.length?a:void 0}},view:function(e){var n=function(n){var r;t=null!==(r=e.dom.parentElement)&&void 0!==r&&r.contains(n.target)?e.dom.parentElement:null};return window.addEventListener("dragstart",n),{destroy:function(){window.removeEventListener("dragstart",n)}}},props:{handleDOMEvents:{drop:function(e,r){var o;return n=t!==e.dom.parentElement||"copy"===(null===(o=r.dataTransfer)||void 0===o?void 0:o.effectAllowed),t=null,!1},paste:function(){return n=!0,!1}},transformPasted:function(t){if(!n)return t;var r=e.options,o=r.types,i=r.attributeName,a=function(e){var t=[];return e.forEach((function(e){if(e.isText)t.push(e);else if(o.includes(e.type.name)){var n=e.type.create(hw(hw({},e.attrs),{},mw({},i,null)),a(e.content),e.marks);t.push(n)}else t.push(e.copy(a(e.content)))})),$.from(t)};return n=!1,new J(a(t.content),t.openStart,t.openEnd)}}})]}});function ww(e){return"link"===e.type}function Cw(e){return"string"!=typeof e&&"link"===e.type}function kw(e){return"string"!=typeof e&&"text"===e.type}function Ew(e){var t,n,r,o,i,a,s,u,l,c;return Sw(e)?hw({},e):xw(e)?{type:"tableCell",content:[].concat(e.content),props:{backgroundColor:null!==(t=null==(a=e.props)?void 0:a.backgroundColor)&&void 0!==t?t:"default",textColor:null!==(n=null==(s=e.props)?void 0:s.textColor)&&void 0!==n?n:"default",textAlignment:null!==(r=null==(u=e.props)?void 0:u.textAlignment)&&void 0!==r?r:"left",colspan:null!==(o=null==(l=e.props)?void 0:l.colspan)&&void 0!==o?o:1,rowspan:null!==(i=null==(c=e.props)?void 0:c.rowspan)&&void 0!==i?i:1}}:{type:"tableCell",content:[].concat(e),props:{backgroundColor:"default",textColor:"default",textAlignment:"left",colspan:1,rowspan:1}}}function xw(e){return null!=e&&"string"!=typeof e&&!Array.isArray(e)&&"tableCell"===e.type}function Sw(e){return xw(e)&&void 0!==e.props&&void 0!==e.content}function Aw(e){var t;return Sw(e)&&null!==(t=e.props.colspan)&&void 0!==t?t:1}function Fw(e){var t;return Sw(e)&&null!==(t=e.props.rowspan)&&void 0!==t?t:1}var Ow=function(e){function t(e){return aw(this,t),sw(this,t,["Unreachable case: ".concat(e)])}return uw(t,e),iw(t)}(lw(Error));function Mw(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(e["data-test"],rw(e,GD));if(Object.keys(n).length>0&&t)throw new Error("Object must be empty "+JSON.stringify(e))}function Bw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Ctrl";return("undefined"==typeof navigator?"undefined":gw(navigator))<"u"&&(/Mac/.test(navigator.platform)||/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent))?e.replace("Mod","⌘"):e.replace("Mod",t)}function Pw(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}var Tw=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)};function Nw(e,t,n,r){var o=document.createElement("div");o.className=Pw("bn-block-content",n.class),o.setAttribute("data-content-type",e);for(var i=0,a=Object.entries(n);i<a.length;i++){var s=ew(a[i],2),u=s[0],l=s[1];"class"!==u&&o.setAttribute(u,l)}var c=document.createElement(t);c.className=Pw("bn-inline-content",r.class);for(var d=0,f=Object.entries(r);d<f.length;d++){var p=ew(f[d],2),h=p[0],m=p[1];"class"!==h&&c.setAttribute(h,m)}return o.appendChild(c),{dom:o,contentDOM:c}}var jw=function(e,t){var n=PC(e,t.pmSchema);"blockContainer"===n.type.name&&(n=n.firstChild);var r=t.pmSchema.nodes[n.type.name].spec.toDOM;if(void 0===r)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");var o=r(n);if("object"!=gw(o)||!("dom"in o))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap node's `renderHTML` function does not return an object with the `dom` property.");return o},_w={backgroundColor:{default:"default"},textColor:{default:"default"},textAlignment:{default:"left",values:["left","center","right","justify"]}},Rw=["backgroundColor","textColor"];function Lw(e){return"data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Iw(e){var t=e.split("/");return t.length&&""!==t[t.length-1]?t[t.length-1]:e}function Hw(e){var t={};return Object.entries(e).filter((function(e){var t=ew(e,2),n=t[0];return t[1],!Rw.includes(n)})).forEach((function(e){var n=ew(e,2),r=n[0],o=n[1];t[r]={default:o.default,keepOnSplit:!0,parseHTML:function(e){var t=e.getAttribute(Lw(r));if(null===t)return null;if(void 0===o.default&&"boolean"===o.type||void 0!==o.default&&"boolean"==typeof o.default)return"true"===t||"false"!==t&&null;if(void 0===o.default&&"number"===o.type||void 0!==o.default&&"number"==typeof o.default){var n=parseFloat(t);return!Number.isNaN(n)&&Number.isFinite(n)?n:null}return t},renderHTML:function(e){return e[r]!==o.default?mw({},Lw(r),e[r]):{}}}})),t}function zw(e,t,n,r){if("boolean"==typeof e)throw new Error("Cannot find node position as getPos is a boolean, not a function.");var o=e(),i=n.state.doc.resolve(o).node().attrs.id;if(!i)throw new Error("Block doesn't have id");var a=t.getBlock(i);if(a.type!==r)throw new Error("Block type does not match");return a}function Vw(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5?arguments[5]:void 0,a=document.createElement("div");if(void 0!==i)for(var s=0,u=Object.entries(i);s<u.length;s++){var l=ew(u[s],2),c=l[0],d=l[1];"class"!==c&&a.setAttribute(c,d)}a.className=Pw("bn-block-content",(null==i?void 0:i.class)||""),a.setAttribute("data-content-type",t);for(var f=0,p=Object.entries(n);f<p.length;f++){var h=ew(p[f],2),m=h[0],v=h[1],g=r[m].default;!Rw.includes(m)&&v!==g&&a.setAttribute(Lw(m),v)}return o&&a.setAttribute("data-file-block",""),a.appendChild(e.dom),void 0!==e.contentDOM&&(e.contentDOM.className=Pw("bn-inline-content",e.contentDOM.className)),hw(hw({},e),{},{dom:a})}function $w(e){return Nu.create(e)}function Uw(e,t){return{config:e,implementation:t}}function Gw(e,t,n){return Uw({type:e.name,content:"inline*"===e.config.content?"inline":"tableRow+"===e.config.content?"table":"none",propSchema:t},{node:e,requiredExtensions:n,toInternalHTML:jw,toExternalHTML:jw})}function Ww(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=ew(e,2);return[t[0],t[1].config]})))}function qw(e,t){e.stopEvent=function(e){return"mousedown"===e.type&&setTimeout((function(){t.view.dom.blur()}),10),!0}}function Kw(e,t){var n=[{tag:"[data-content-type="+e.type+"]",contentElement:".bn-inline-content"}];return t&&n.push({tag:"*",getAttrs:function(e){if("string"==typeof e)return!1;var n=null==t?void 0:t(e);return void 0!==n&&n}}),n}function Jw(e,t){var n,r=$w({name:e.type,content:"inline"===e.content?"inline*":"",group:"blockContent",selectable:null===(n=e.isSelectable)||void 0===n||n,isolating:!0,addAttributes:function(){return Hw(e.propSchema)},parseHTML:function(){return Kw(e,t.parse)},renderHTML:function(t){var n=t.HTMLAttributes,r=document.createElement("div");return Vw({dom:r,contentDOM:"inline"===e.content?r:void 0},e.type,{},e.propSchema,e.isFileBlock,n)},addNodeView:function(){var n=this;return function(r){var o,i=r.getPos,a=n.options.editor,s=zw(i,a,n.editor,e.type),u=(null==(o=n.options.domAttributes)?void 0:o.blockContent)||{},l=Vw(t.render(s,a),s.type,s.props,e.propSchema,u);return!1===e.isSelectable&&qw(l,n.editor),l}}});if(r.name!==e.type)throw new Error("Node name does not match block type. This is a bug in BlockNote.");return Uw(e,{node:r,toInternalHTML:function(n,o){var i,a=(null==(i=r.options.domAttributes)?void 0:i.blockContent)||{};return Vw(t.render(n,o),n.type,n.props,e.propSchema,e.isFileBlock,a)},toExternalHTML:function(n,o){var i,a,s=(null==(i=r.options.domAttributes)?void 0:i.blockContent)||{},u=null==(a=t.toExternalHTML)?void 0:a.call(t,n,o);return void 0===u&&(u=t.render(n,o)),Vw(u,n.type,n.props,e.propSchema,s)}})}function Zw(e,t){var n=e.resolve(t);if(n.nodeAfter&&n.nodeAfter.type.isInGroup("bnBlock"))return{posBeforeNode:n.pos,node:n.nodeAfter};for(var r=n.depth,o=n.node(r);r>0;){if(o.type.isInGroup("bnBlock"))return{posBeforeNode:n.before(r),node:o};r--,o=n.node(r)}var i=[];e.descendants((function(e,t){e.type.isInGroup("bnBlock")&&i.push(t)})),console.warn("Position ".concat(t," is not within a blockContainer node."));var a=e.resolve(i.find((function(e){return e>=t}))||i[i.length-1]);return{posBeforeNode:a.pos,node:a.nodeAfter}}function Xw(e,t){if(!e.type.isInGroup("bnBlock"))throw new Error("Attempted to get bnBlock node at position but found node of different type ".concat(e.type.name));var n=e,r=t,o=r+n.nodeSize,i={node:n,beforePos:r,afterPos:o};if("blockContainer"===n.type.name){var a,s;if(n.forEach((function(e,t){if("blockContent"===e.type.spec.group){var n=e,o=r+t+1,i=o+e.nodeSize;a={node:n,beforePos:o,afterPos:i}}else if("blockGroup"===e.type.name){var u=e,l=r+t+1,c=l+e.nodeSize;s={node:u,beforePos:l,afterPos:c}}})),!a)throw new Error("blockContainer node does not contain a blockContent node in its children: ".concat(n));return{isBlockContainer:!0,bnBlock:i,blockContent:a,childContainer:s,blockNoteType:a.node.type.name}}if(!i.node.type.isInGroup("childContainer"))throw new Error("bnBlock node is not in the childContainer group: ".concat(i.node));return{isBlockContainer:!1,bnBlock:i,childContainer:i,blockNoteType:i.node.type.name}}function Yw(e){return Xw(e.node,e.posBeforeNode)}function Qw(e){if(!e.nodeAfter)throw new Error("Attempted to get blockContainer node at position ".concat(e.pos," but a node at this position does not exist"));return Xw(e.nodeAfter,e.pos)}function eC(e){return Yw(Zw(e.doc,e.selection.anchor))}function tC(e){return Yw(Zw(e.doc,e.selection.anchor))}function nC(e){return"doc"in e?e.doc.type.schema:e.type.schema}function rC(e){return e.cached.blockNoteEditor}function oC(e){return rC(e).schema}function iC(e){return oC(e).blockSchema}function aC(e){return oC(e).inlineContentSchema}function sC(e){return oC(e).styleSchema}function uC(e){return rC(e).blockCache}function lC(e,t,n){var r,o,i={type:"tableContent",columnWidths:[],headerRows:void 0,headerCols:void 0,rows:[]},a=[];e.content.forEach((function(e,r,o){var s={cells:[]};0===o&&e.content.forEach((function(e){var t,n,r=e.attrs.colwidth;null==r&&(r=new Array(null!==(t=e.attrs.colspan)&&void 0!==t?t:1).fill(void 0)),(n=i.columnWidths).push.apply(n,QD(r))})),s.cells=e.content.content.map((function(e,r){return a[o]||(a[o]=[]),a[o][r]="tableHeader"===e.type.name,{type:"tableCell",content:e.content.content.map((function(e){return cC(e,t,n)})).reduce((function(e,t){if(!e.length)return t;var n=e[e.length-1],r=t[0];return r&&kw(n)&&kw(r)&&JSON.stringify(n.styles)===JSON.stringify(r.styles)?(n.text+="\n"+r.text,e.push.apply(e,QD(t.slice(1))),e):(e.push.apply(e,QD(t)),e)}),[]),props:{colspan:e.attrs.colspan,rowspan:e.attrs.rowspan,backgroundColor:e.attrs.backgroundColor,textColor:e.attrs.textColor,textAlignment:e.attrs.textAlignment}}})),i.rows.push(s)}));for(var s=0;s<a.length;s++){var u;null!=(r=a[s])&&r.every((function(e){return e}))&&(i.headerRows=(null!==(u=i.headerRows)&&void 0!==u?u:0)+1)}for(var l=function(e){var t;null!=a&&a.every((function(t){return t[e]}))&&(i.headerCols=(null!==(t=i.headerCols)&&void 0!==t?t:0)+1)},c=0;c<(null==(o=a[0])?void 0:o.length);c++)l(c);return i}function cC(e,t,n){var r,o=[];return e.content.forEach((function(e){if("hardBreak"!==e.type.name){if("link"!==e.type.name&&"text"!==e.type.name)return t[e.type.name]?(r&&(o.push(r),r=void 0),void o.push(dC(e,t,n))):void console.warn("unrecognized inline content type",e.type.name);var i,a,s={},u=YD(e.marks);try{for(u.s();!(a=u.n()).done;){var l=a.value;if("link"===l.type.name)i=l;else{var c=n[l.type.name];if(!c){if(l.type.spec.blocknoteIgnore)continue;throw new Error("style ".concat(l.type.name," not found in styleSchema"))}if("boolean"===c.propSchema)s[c.type]=!0;else{if("string"!==c.propSchema)throw new Ow(c.propSchema);s[c.type]=l.attrs.stringValue}}}}catch(e){u.e(e)}finally{u.f()}r?kw(r)?i?(o.push(r),r={type:"link",href:i.attrs.href,content:[{type:"text",text:e.textContent,styles:s}]}):JSON.stringify(r.styles)===JSON.stringify(s)?r.text+=e.textContent:(o.push(r),r={type:"text",text:e.textContent,styles:s}):ww(r)&&(i?r.href===i.attrs.href?JSON.stringify(r.content[r.content.length-1].styles)===JSON.stringify(s)?r.content[r.content.length-1].text+=e.textContent:r.content.push({type:"text",text:e.textContent,styles:s}):(o.push(r),r={type:"link",href:i.attrs.href,content:[{type:"text",text:e.textContent,styles:s}]}):(o.push(r),r={type:"text",text:e.textContent,styles:s})):r=i?{type:"link",href:i.attrs.href,content:[{type:"text",text:e.textContent,styles:s}]}:{type:"text",text:e.textContent,styles:s}}else if(r)if(kw(r))r.text+="\n";else{if(!ww(r))throw new Error("unexpected");r.content[r.content.length-1].text+="\n"}else r={type:"text",text:"\n",styles:{}}})),r&&o.push(r),o}function dC(e,t,n){if("text"===e.type.name||"link"===e.type.name)throw new Error("unexpected");for(var r,o={},i=t[e.type.name],a=0,s=Object.entries(e.attrs);a<s.length;a++){var u=ew(s[a],2),l=u[0],c=u[1];if(!i)throw Error("ic node is of an unrecognized type: "+e.type.name);l in i.propSchema&&(o[l]=c)}return r="styled"===i.content?cC(e,t,n):void 0,{type:e.type.name,props:o,content:r}}function fC(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:iC(t),o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:aC(t),i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:sC(t),a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:uC(t);if(!e.type.isInGroup("bnBlock"))throw Error("Node should be a bnBlock, but is instead: "+e.type.name);var s=null==a?void 0:a.get(e);if(s)return s;var u=Xw(e,0),l=u.bnBlock.node.attrs.id;null===l&&(l=Dw.options.generateID());var c=r[u.blockNoteType];if(!c)throw Error("Block is of an unrecognized type: "+u.blockNoteType);for(var d={},f=0,p=Object.entries(hw(hw({},e.attrs),u.isBlockContainer?u.blockContent.node.attrs:{}));f<p.length;f++){var h=ew(p[f],2),m=h[0],v=h[1],g=c.propSchema;m in g&&(void 0!==g[m].default||void 0!==v)&&(d[m]=v)}var y,b=r[u.blockNoteType],D=[];if(null==(n=u.childContainer)||n.node.forEach((function(e){D.push(fC(e,t,r,o,i,a))})),"inline"===b.content){if(!u.isBlockContainer)throw new Error("impossible");y=cC(u.blockContent.node,o,i)}else if("table"===b.content){if(!u.isBlockContainer)throw new Error("impossible");y=lC(u.blockContent.node,o,i)}else{if("none"!==b.content)throw new Ow(b.content);y=void 0}var w={id:l,type:b.type,props:d,content:y,children:D};return null==a||a.set(e,w),w}function pC(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=ew(e,2);return[t[0],t[1].config]})))}function hC(e,t){return function(e,t){return{config:e,implementation:t}}({type:e.name,propSchema:t},{mark:e})}function mC(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=ew(e,2);return[t[0],t[1].config]})))}function vC(e){for(var t=bC(e),n=t.height,r=t.width,o=new Array(n).fill(!1).map((function(){return new Array(r).fill(null)})),i=function(e,t){for(var i=e;i<n;i++)for(var a=t;a<r;a++)if(!o[i][a])return{row:i,col:a};throw new Error("Unable to create occupancy grid for table, no more available cells")},a=0;a<e.content.rows.length;a++)for(var s=0;s<e.content.rows[a].cells.length;s++)for(var u=Ew(e.content.rows[a].cells[s]),l=Fw(u),c=Aw(u),d=i(a,s),f=d.row,p=d.col,h=f;h<f+l;h++)for(var m=p;m<p+c;m++){if(o[h][m])throw new Error("Unable to create occupancy grid for table, cell at ".concat(h,",").concat(m," is already occupied"));o[h][m]={row:a,col:s,rowspan:l,colspan:c,cell:u}}return o}function gC(e){var t=new Set;return e.map((function(e){return{cells:e.map((function(e){return!t.has(e.row+":"+e.col)&&(t.add(e.row+":"+e.col),e.cell)})).filter((function(e){return!1!==e}))}}))}function yC(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vC(t),r=0;r<n.length;r++)for(var o=0;o<n[r].length;o++){var i=n[r][o];if(i.row===e.row&&i.col===e.col)return{row:r,col:o,cell:i.cell}}throw new Error("Unable to resolve relative table cell indices for table, cell at ".concat(e.row,",").concat(e.col," is not occupied"))}function bC(e){var t=e.content.rows.length,n=0;return e.content.rows.forEach((function(e){var t=0;e.cells.forEach((function(e){t+=Aw(e)})),n=Math.max(n,t)})),{height:t,width:n}}function DC(e,t){var n,r=null==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:vC(t))[e.row])?void 0:n[e.col];if(r)return{row:r.row,col:r.col,cell:r.cell}}function wC(e,t){var n,r=vC(e);if(t<0||t>=r.length)return[];for(var o=0,i=0;i<t;i++){var a=null==(n=r[o])?void 0:n[0];if(!a)return[];o+=a.rowspan}var s=new Array(r[0].length).fill(!1).map((function(t,n){return DC({row:o,col:n},e,r)})).filter((function(e){return void 0!==e}));return s.filter((function(e,t){return s.findIndex((function(t){return t.row===e.row&&t.col===e.col}))===t}))}function CC(e,t){var n,r=vC(e);if(t<0||t>=r[0].length)return[];for(var o=0,i=0;i<t;i++){var a=null==(n=r[0])?void 0:n[o];if(!a)return[];o+=a.colspan}var s=new Array(r.length).fill(!1).map((function(t,n){return DC({row:n,col:o},e,r)})).filter((function(e){return void 0!==e}));return s.filter((function(e,t){return s.findIndex((function(t){return t.row===e.row&&t.col===e.col}))===t}))}function kC(e){return!e||(xw(e)?kC(e.content):"string"==typeof e?0===e.length:!!Array.isArray(e)&&e.every((function(e){return"string"==typeof e?0===e.length:kw(e)?0===e.text.length:!!Cw(e)&&("string"==typeof e.content?0===e.content.length:e.content.every((function(e){return 0===e.text.length})))})))}function EC(e,t,n){var r=wC(e,n);if(!r.some((function(e){return Fw(e.cell)>1})))return!0;var o=n,i=n;return r.forEach((function(e){var t=Fw(e.cell);o=Math.max(o,e.row+t-1),i=Math.min(i,e.row)})),t<n?n===o:n===i}function xC(e,t,n){var r=CC(e,n);if(!r.some((function(e){return Aw(e.cell)>1})))return!0;var o=n,i=n;return r.forEach((function(e){var t=Aw(e.cell);o=Math.max(o,e.col+t-1),i=Math.min(i,e.col)})),t<n?n===o:n===i}function SC(e,t,n,r){for(var o=[],i=0,a=Object.entries(e.styles||{});i<a.length;i++){var s=ew(a[i],2),u=s[0],l=s[1],c=n[u];if(!c)throw new Error("style ".concat(u," not found in styleSchema"));if("boolean"===c.propSchema)o.push(t.mark(u));else{if("string"!==c.propSchema)throw new Ow(c.propSchema);o.push(t.mark(u,{stringValue:l}))}}return r&&t.nodes[r].spec.code?e.text.length>0?[t.text(e.text,o)]:[]:e.text.split(/(\n)/g).filter((function(e){return e.length>0})).map((function(e){return"\n"===e?t.nodes.hardBreak.createChecked():t.text(e,o)}))}function AC(e,t,n){var r=t.marks.link.create({href:e.href});return FC(e.content,t,n).map((function(e){if("text"===e.type.name)return e.mark([].concat(QD(e.marks),[r]));if("hardBreak"===e.type.name)return e;throw new Error("unexpected node type")}))}function FC(e,t,n,r){var o=[];if("string"==typeof e)return o.push.apply(o,QD(SC({text:e,styles:{}},t,n,r))),o;var i,a=YD(e);try{for(a.s();!(i=a.n()).done;){var s=i.value;o.push.apply(o,QD(SC(s,t,n,r)))}}catch(e){a.e(e)}finally{a.f()}return o}function OC(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:sC(t),i=[],a=YD(e);try{for(a.s();!(r=a.n()).done;){var s=r.value;"string"==typeof s?i.push.apply(i,QD(FC(s,t,o,n))):Cw(s)?i.push.apply(i,QD(AC(s,t,o))):kw(s)?i.push.apply(i,QD(FC([s],t,o,n))):i.push(BC(s,t,o))}}catch(e){a.e(e)}finally{a.f()}return i}function MC(e,t){for(var n,r,o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sC(t),a=[],s=new Array(null!==(n=e.headerRows)&&void 0!==n?n:0).fill(!0),u=new Array(null!==(r=e.headerCols)&&void 0!==r?r:0).fill(!0),l=null!==(o=e.columnWidths)&&void 0!==o?o:[],c=0;c<e.rows.length;c++){for(var d=e.rows[c],f=[],p=s[c],h=function(){var n=d.cells[m],r=u[m],o=null,a=yC({row:c,col:m},{content:e}),s=l[a.col]?[l[a.col]]:null;if(n)if("string"==typeof n)o=t.text(n);else if(xw(n)){n.content&&(o=OC(n.content,t,"tableParagraph",i));var h=Aw(n);h>1&&(s=new Array(h).fill(!1).map((function(e,t){var n;return null!==(n=l[a.col+t])&&void 0!==n?n:void 0})))}else o=OC(n,t,"tableParagraph",i);var v=t.nodes[r||p?"tableHeader":"tableCell"].createChecked(hw(hw({},xw(n)?n.props:{}),{},{colwidth:s}),t.nodes.tableParagraph.createChecked(void 0,o));f.push(v)},m=0;m<d.cells.length;m++)h();var v=t.nodes.tableRow.createChecked({},f);a.push(v)}return a}function BC(e,t,n){var r,o=e.type;if(void 0===o&&(o="paragraph"),!t.nodes[o])throw new Error("node type ".concat(o," not found in schema"));if(e.content)if("string"==typeof e.content){var i=OC([e.content],t,o,n);r=t.nodes[o].createChecked(e.props,i)}else if(Array.isArray(e.content)){var a=OC(e.content,t,o,n);r=t.nodes[o].createChecked(e.props,a)}else{if("tableContent"!==e.content.type)throw new Ow(e.content.type);var s=MC(e.content,t,n);r=t.nodes[o].createChecked(e.props,s)}else r=t.nodes[o].createChecked(e.props);return r}function PC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sC(t),r=e.id;void 0===r&&(r=Dw.options.generateID());var o=[];if(e.children){var i,a=YD(e.children);try{for(a.s();!(i=a.n()).done;){var s=i.value;o.push(PC(s,t,n))}}catch(e){a.e(e)}finally{a.f()}}if(!e.type||t.nodes[e.type].isInGroup("blockContent")){var u=BC(e,t,n),l=o.length>0?t.nodes.blockGroup.createChecked({},o):void 0;return t.nodes.blockContainer.createChecked(hw({id:r},e.props),l?[u,l]:u)}if(t.nodes[e.type].isInGroup("bnBlock"))return t.nodes[e.type].createChecked(hw({id:r},e.props),o);throw new Error("block type ".concat(e.type," doesn't match blockContent or bnBlock group"))}function TC(e,t){var n,r;if(t.firstChild.descendants((function(t,o){return!(n||NC(t)&&t.attrs.id===e&&(n=t,r=o+1,1))})),void 0!==n&&void 0!==r)return{node:n,posBeforeNode:r}}function NC(e){return e.type.isInGroup("bnBlock")}function jC(e,t){return e.id!==t.id||e.type!==t.type||JSON.stringify(e.props)!==JSON.stringify(t.props)||JSON.stringify(e.content)!==JSON.stringify(t.content)}function _C(e,t,n){var r=nC(e),o=n.map((function(e){return PC(e,r)})),i=new Set(t.map((function(e){return"string"==typeof e?e:e.id}))),a=[],s="string"==typeof t[0]?t[0]:t[0].id,u=0;if(e.doc.descendants((function(t,l){if(0===i.size)return!1;if(!t.type.isInGroup("bnBlock")||!i.has(t.attrs.id))return!0;if(a.push(fC(t,r)),i.delete(t.attrs.id),n.length>0&&t.attrs.id===s){var c=e.doc.nodeSize;e.insert(l,o);var d=e.doc.nodeSize;u+=c-d}var f=e.doc.nodeSize,p=e.doc.resolve(l-u);"blockGroup"===p.node().type.name&&"doc"!==p.node(p.depth-1).type.name&&1===p.node().childCount?e.delete(p.before(),p.after()):e.delete(l-u,l-u+t.nodeSize);var h=e.doc.nodeSize;return u+=f-h,!1})),i.size>0){var l=QD(i).join("\n");throw Error("Blocks with the following IDs could not be found in the editor: "+l)}return{insertedBlocks:o.map((function(e){return fC(e,r)})),removedBlocks:a}}var RC=function(e,t){return function(n){var r=n.tr;return n.dispatch&&LC(r,e,t),!0}};function LC(e,t,n,r,o){var i=Qw(e.doc.resolve(t)),a=nC(e);if(void 0!==r&&void 0!==o&&r>o)throw new Error("Invalid replaceFromPos or replaceToPos");var s=a.nodes[i.blockNoteType],u=a.nodes[n.type||i.blockNoteType],l=u.isInGroup("bnBlock")?u:a.nodes.blockContainer;if(i.isBlockContainer&&u.isInGroup("blockContent")){var c=void 0!==r&&r>i.blockContent.beforePos&&r<i.blockContent.afterPos?r-i.blockContent.beforePos-1:void 0,d=void 0!==o&&o>i.blockContent.beforePos&&o<i.blockContent.afterPos?o-i.blockContent.beforePos-1:void 0;IC(n,e,i),function(e,t,n,r,o,i,a){var s=nC(t),u="keep";if(e.content)if("string"==typeof e.content)u=OC([e.content],s,r.name);else if(Array.isArray(e.content))u=OC(e.content,s,r.name);else{if("tableContent"!==e.content.type)throw new Ow(e.content.type);u=MC(e.content,s)}else""===n.spec.content||r.spec.content!==n.spec.content&&(u=[]);if("keep"===u)t.setNodeMarkup(o.blockContent.beforePos,r,hw(hw({},o.blockContent.node.attrs),e.props));else if(void 0!==i||void 0!==a){t.setNodeMarkup(o.blockContent.beforePos,r,hw(hw({},o.blockContent.node.attrs),e.props));var l=o.blockContent.beforePos+1+(null!=i?i:0),c=o.blockContent.beforePos+1+(null!=a?a:o.blockContent.node.content.size),d=t.doc.resolve(o.blockContent.beforePos).depth,f=t.doc.resolve(l).depth,p=t.doc.resolve(c).depth;t.replace(l,c,new J($.from(u),f-d-1,p-d-1))}else t.replaceWith(o.blockContent.beforePos,o.blockContent.afterPos,r.createChecked(hw(hw({},o.blockContent.node.attrs),e.props),u))}(n,e,s,u,i,c,d)}else{if(i.isBlockContainer||!u.isInGroup("bnBlock")){var f=fC(i.bnBlock.node,a);return void e.replaceWith(i.bnBlock.beforePos,i.bnBlock.afterPos,PC(hw({children:f.children},n),a))}IC(n,e,i)}e.setNodeMarkup(i.bnBlock.beforePos,l,hw(hw({},i.bnBlock.node.attrs),n.props))}function IC(e,t,n){var r=nC(t);if(void 0!==e.children&&e.children.length>0){var o=e.children.map((function(e){return PC(e,r)}));if(n.childContainer)t.step(new Dt(n.childContainer.beforePos+1,n.childContainer.afterPos-1,new J($.from(o),0,0)));else{if(!n.isBlockContainer)throw new Error("impossible");t.insert(n.blockContent.afterPos,r.nodes.blockGroup.createChecked({},o))}}}function HC(e){var t=Array.from(e.classList).filter((function(e){return!e.startsWith("bn-")}))||[];t.length>0?e.className=t.join(" "):e.removeAttribute("class")}function zC(e,t,n,r){var o;if(!t)throw new Error("blockContent is required");if("string"==typeof t)o=OC([t],e.pmSchema);else if(Array.isArray(t))o=OC(t,e.pmSchema);else{if("tableContent"!==t.type)throw new Ow(t.type);o=MC(t,e.pmSchema)}var i=n.serializeFragment($.from(o),r);return 1===i.nodeType&&HC(i),i}function VC(e,t,n,r,o,i,a){var s,u,l,c,d,f,p,h,m,v=null!==(s=null==a?void 0:a.document)&&void 0!==s?s:document,g=t.pmSchema.nodes.blockContainer,y=n.props;if(!n.props){y={};for(var b=0,D=Object.entries(t.schema.blockSchema[n.type].propSchema);b<D.length;b++){var w=ew(D[b],2),C=w[0],k=w[1];void 0!==k.default&&(y[C]=k.default)}}var E,x=null==(l=null==(u=g.spec)?void 0:u.toDOM)?void 0:l.call(u,g.create(hw({id:n.id},y))),S=Array.from(x.dom.attributes),A=t.blockImplementations[n.type].implementation.toExternalHTML(hw(hw({},n),{},{props:y}),t),F=v.createDocumentFragment();if(A.dom.classList.contains("bn-block-content")){var O,M=[].concat(S,QD(Array.from(A.dom.attributes))).filter((function(e){return e.name.startsWith("data")&&"data-content-type"!==e.name&&"data-file-block"!==e.name&&"data-node-view-wrapper"!==e.name&&"data-node-type"!==e.name&&"data-id"!==e.name&&"data-index"!==e.name&&"data-editable"!==e.name})),B=YD(M);try{for(B.s();!(O=B.n()).done;){var P=O.value;A.dom.firstChild.setAttribute(P.name,P.value)}}catch(e){B.e(e)}finally{B.f()}HC(A.dom.firstChild),F.append.apply(F,QD(Array.from(A.dom.childNodes)))}else F.append(A.dom);if(A.contentDOM&&n.content){var T=zC(t,n.content,r,a);A.contentDOM.appendChild(T)}if(o.has(n.type)?E="OL":i.has(n.type)&&(E="UL"),E){if((null==(c=e.lastChild)?void 0:c.nodeName)!==E){var N=v.createElement(E);"OL"===E&&null!=y&&y.start&&1!==(null==y?void 0:y.start)&&N.setAttribute("start",y.start+""),e.append(N)}var j=v.createElement("li");j.append(F),e.lastChild.appendChild(j)}else e.append(F);if(n.children&&n.children.length>0){var _=v.createDocumentFragment();if($C(_,t,n.children,r,o,i,a),"UL"===(null==(d=e.lastChild)?void 0:d.nodeName)||"OL"===(null==(f=e.lastChild)?void 0:f.nodeName))for(;"UL"===(null==(p=_.firstChild)?void 0:p.nodeName)||"OL"===(null==(h=_.firstChild)?void 0:h.nodeName);)e.lastChild.lastChild.appendChild(_.firstChild);t.pmSchema.nodes[n.type].isInGroup("blockContent")?e.append(_):null==(m=A.contentDOM)||m.append(_)}}var $C=function(e,t,n,r,o,i,a){var s,u=YD(n);try{for(u.s();!(s=u.n()).done;)VC(e,t,s.value,r,o,i,a)}catch(e){u.e(e)}finally{u.f()}},UC=function(e,t){var n=Ge.fromSchema(e);return{exportBlocks:function(e,r){var o=function(e,t,n,r,o,i){var a,s=(null!==(a=null==i?void 0:i.document)&&void 0!==a?a:document).createDocumentFragment();return $C(s,e,t,n,r,o,i),s}(t,e,n,new Set(["numberedListItem"]),new Set(["bulletListItem","checkListItem"]),r),i=document.createElement("div");return i.append(o),i.innerHTML},exportInlineContent:function(e,r){var o=zC(t,e,n,r),i=document.createElement("div");return i.append(o.cloneNode(!0)),i.innerHTML}}};function GC(e,t,n,r,o){var i,a,s,u,l,c=e.pmSchema.nodes.blockContainer,d=t.props;if(!t.props){d={};for(var f=0,p=Object.entries(e.schema.blockSchema[t.type].propSchema);f<p.length;f++){var h=ew(p[f],2),m=h[0],v=h[1];void 0!==v.default&&(d[m]=v.default)}}var g=e.blockImplementations[t.type].implementation.toInternalHTML(hw(hw({},t),{},{props:d}),e);if("numberedListItem"===t.type&&g.dom.setAttribute("data-index",r.toString()),g.contentDOM&&t.content){var y=function(e,t,n,r,o){var i;if(!t)throw new Error("blockContent is required");if("string"==typeof t)i=OC([t],e.pmSchema,r);else if(Array.isArray(t))i=OC(t,e.pmSchema,r);else{if("tableContent"!==t.type)throw new Ow(t.type);i=MC(t,e.pmSchema)}return n.serializeFragment($.from(i),o)}(e,t.content,n,t.type,o);g.contentDOM.appendChild(y)}if(e.pmSchema.nodes[t.type].isInGroup("bnBlock")){if(t.children&&t.children.length>0){var b=WC(e,t.children,n,o);null==(i=g.contentDOM)||i.append(b)}return g.dom}var D=null==(s=null==(a=c.spec)?void 0:a.toDOM)?void 0:s.call(a,c.create(hw({id:t.id},d)));return null==(u=D.contentDOM)||u.appendChild(g.dom),t.children&&t.children.length>0&&(null==(l=D.contentDOM)||l.appendChild(qC(e,t.children,n,o))),D.dom}function WC(e,t,n,r){var o,i,a=(null!==(o=null==r?void 0:r.document)&&void 0!==o?o:document).createDocumentFragment(),s=0,u=YD(t);try{for(u.s();!(i=u.n()).done;){var l=i.value;"numberedListItem"===l.type?s++:s=0;var c=GC(e,l,n,s,r);a.appendChild(c)}}catch(e){u.e(e)}finally{u.f()}return a}var qC=function(e,t,n,r){var o,i=e.pmSchema.nodes.blockGroup,a=i.spec.toDOM(i.create({})),s=WC(e,t,n,r);return null==(o=a.contentDOM)||o.appendChild(s),a.dom},KC=function(e,t){var n=Ge.fromSchema(e);return{serializeBlocks:function(e,r){return qC(t,e,n,r).outerHTML}}},JC=function(e,t){var n,r=e.querySelector(t);if(r){var o=e.querySelector("figcaption");return{targetElement:r,caption:null!==(n=null==o?void 0:o.textContent)&&void 0!==n?n:void 0}}},ZC=function(e,t,n,r,o){var i=document.createElement("div");if(i.className="bn-file-block-content-wrapper",""===e.props.url){var a=function(e,t,n,r){var o=document.createElement("div");o.className="bn-add-file-button";var i=document.createElement("div");i.className="bn-add-file-button-icon",r?i.appendChild(r):i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',o.appendChild(i);var a=document.createElement("p");a.className="bn-add-file-button-text",a.innerHTML=n||t.dictionary.file_blocks.file.add_button_text,o.appendChild(a);var s=function(e){e.preventDefault()},u=function(){t.transact((function(n){return n.setMeta(t.filePanel.plugins[0],{block:e})}))};return o.addEventListener("mousedown",s,!0),o.addEventListener("click",u,!0),{dom:o,destroy:function(){o.removeEventListener("mousedown",s,!0),o.removeEventListener("click",u,!0)}}}(e,t,r,o);i.appendChild(a.dom);var s=t.onUploadStart((function(t){if(t===e.id){i.removeChild(a.dom);var n=document.createElement("div");n.className="bn-file-loading-preview",n.textContent="Loading...",i.appendChild(n)}}));return{dom:i,destroy:function(){s(),a.destroy()}}}var u={dom:i};if(!1!==e.props.showPreview&&n)i.appendChild(n.dom);else{var l=function(e){var t=document.createElement("div");t.className="bn-file-name-with-icon";var n=document.createElement("div");n.className="bn-file-icon",n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',t.appendChild(n);var r=document.createElement("p");return r.className="bn-file-name",r.textContent=e.props.name,t.appendChild(r),{dom:t}}(e);i.appendChild(l.dom),u.destroy=function(){var e;null==(e=l.destroy)||e.call(l)}}if(e.props.caption){var c=document.createElement("p");c.className="bn-file-caption",c.textContent=e.props.caption,i.appendChild(c)}return u},XC=function(e,t){var n=document.createElement("figure"),r=document.createElement("figcaption");return r.textContent=t,n.appendChild(e),n.appendChild(r),{dom:n}},YC=function(e,t){var n=document.createElement("div"),r=document.createElement("p");return r.textContent=t,n.appendChild(e),n.appendChild(r),{dom:n}},QC=function(e){return{url:e.src||void 0}},ek={type:"audio",propSchema:{backgroundColor:_w.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0}},content:"none",isFileBlock:!0,fileBlockAccept:["audio/*"]},tk=function(e){if("AUDIO"===e.tagName)return e.closest("figure")?void 0:QC(e);if("FIGURE"===e.tagName){var t=JC(e,"audio");if(!t)return;var n=t.targetElement,r=t.caption;return hw(hw({},QC(n)),{},{caption:r})}},nk=Jw(ek,{render:function(e,t){var n=document.createElement("div");n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"></path></svg>';var r=document.createElement("audio");return r.className="bn-audio",t.resolveFileUrl?t.resolveFileUrl(e.props.url).then((function(e){r.src=e})):r.src=e.props.url,r.controls=!0,r.contentEditable="false",r.draggable=!1,ZC(e,t,{dom:r},t.dictionary.file_blocks.audio.add_button_text,n.firstElementChild)},parse:tk,toExternalHTML:function(e){if(!e.props.url){var t=document.createElement("p");return t.textContent="Add audio",{dom:t}}var n;return e.props.showPreview?(n=document.createElement("audio")).src=e.props.url:((n=document.createElement("a")).href=e.props.url,n.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?XC(n,e.props.caption):YC(n,e.props.caption):{dom:n}}}),rk=Symbol.for("blocknote.shikiParser"),ok=Symbol.for("blocknote.shikiHighlighterPromise"),ik=$w({name:"codeBlock",content:"inline*",group:"blockContent",marks:"insertion deletion modification",code:!0,defining:!0,addOptions:function(){return{defaultLanguage:"text",indentLineWithTab:!0,supportedLanguages:{}}},addAttributes:function(){var e=this.options;return{language:{default:e.editor.settings.codeBlock.defaultLanguage,parseHTML:function(t){var n,r=t,o=null;"DIV"===(null==r?void 0:r.tagName)&&"codeBlock"===(null==r?void 0:r.dataset.contentType)&&(r=r.children[0]),"PRE"===(null==r?void 0:r.tagName)&&(r=null==r?void 0:r.children[0]);var i=null==r?void 0:r.getAttribute("data-language");if(i)o=i.toLowerCase();else{var a=QD((null==r?void 0:r.className.split(" "))||[]).filter((function(e){return e.startsWith("language-")})).map((function(e){return e.replace("language-","")}));a.length>0&&(o=a[0].toLowerCase())}return o?null!==(n=sk(e.editor.settings.codeBlock,o))&&void 0!==n?n:o:null},renderHTML:function(e){return e.language?{class:"language-".concat(e.language),"data-language":e.language}:{}}}}},parseHTML:function(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"pre",preserveWhitespace:"full"}]},renderHTML:function(e){var t,n,r=e.HTMLAttributes,o=document.createElement("pre"),i=Nw(this.name,"code",(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{},hw(hw({},(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{}),r)),a=i.dom,s=i.contentDOM;return a.removeChild(s),a.appendChild(o),o.appendChild(s),{dom:a,contentDOM:s}},addNodeView:function(){var e=this,t=this.options;return function(n){var r,o,i=n.editor,a=n.node,s=n.getPos,u=n.HTMLAttributes,l=document.createElement("pre"),c=document.createElement("select"),d=document.createElement("div"),f=Nw(e.name,"code",hw(hw({},(null==(r=e.options.domAttributes)?void 0:r.blockContent)||{}),u),(null==(o=e.options.domAttributes)?void 0:o.inlineContent)||{}),p=f.dom,h=f.contentDOM,m=function(e){var t=e.target.value;i.commands.command((function(e){return e.tr.setNodeAttribute(s(),"language",t),!0}))};return Object.entries(t.editor.settings.codeBlock.supportedLanguages).forEach((function(e){var t=ew(e,2),n=t[0],r=t[1].name,o=document.createElement("option");o.value=n,o.text=r,c.appendChild(o)})),d.contentEditable="false",c.value=a.attrs.language||t.editor.settings.codeBlock.defaultLanguage,p.removeChild(h),p.appendChild(d),p.appendChild(l),l.appendChild(h),d.appendChild(c),c.addEventListener("change",m),{dom:p,contentDOM:h,update:function(t){return t.type===e.type},destroy:function(){c.removeEventListener("change",m)}}}},addProseMirrorPlugins:function(){var e,t,n=this.options,r=globalThis;return[Qu({parser:function(o){if(!n.editor.settings.codeBlock.createHighlighter)return[];if(!e)return r[ok]=r[ok]||n.editor.settings.codeBlock.createHighlighter(),r[ok].then((function(t){e=t}));var i=sk(n.editor.settings.codeBlock,o.language);return i&&"text"!==i&&"none"!==i&&"plaintext"!==i&&"txt"!==i?e.getLoadedLanguages().includes(i)?(t||(t=r[rk]||function(e,t){return function(n){var r,o=n.content,i=n.language,a=n.pos,s=n.size,u=[],l=e.codeToTokens(o,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?il(Object(n),!0).forEach((function(t){al(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):il(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({lang:i},null!=t?t:{theme:e.getLoadedThemes()[0]})),c=l.tokens,d=l.fg,f=l.bg,p=l.rootStyle||(d&&f?"--prosemirror-highlight:".concat(d,";--prosemirror-highlight-bg:").concat(f):"");if(p){var h=Ai.node(a,a+s,{style:p});u.push(h)}var m,v=a+1,g=nl(c);try{for(g.s();!(m=g.n()).done;){var y,b=nl(m.value);try{for(b.s();!(y=b.n()).done;){var D=y.value,w=v+D.content.length,C=Ai.inline(v,w,{style:sl(null!=(r=D.htmlStyle)?r:"color: ".concat(D.color)),class:"shiki"});u.push(C),v=w}}catch(e){b.e(e)}finally{b.f()}v+=1}}catch(e){g.e(e)}finally{g.f()}return u}}(e),r[rk]=t),t(o)):e.loadLanguage(i):[]},languageExtractor:function(e){return e.attrs.language},nodeTypes:[this.name]})]},addInputRules:function(){var e=this,t=this.options;return[new xs({find:/^```(.*?)\s$/,handler:function(n){var r,o=n.state,i=n.range,a=n.match,s=o.doc.resolve(i.from),u=a[1].trim(),l={language:null!==(r=sk(t.editor.settings.codeBlock,u))&&void 0!==r?r:u};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e.type))return null;o.tr.delete(i.from,i.to).setBlockType(i.from,i.from,e.type,l).setSelection(pn.create(o.tr.doc,i.from))}})]},addKeyboardShortcuts:function(){var e=this;return{Delete:function(t){var n=t.editor,r=n.state.selection,o=r.$from;if(n.isActive(e.name)&&!o.parent.textContent&&Us(r)){var i=o.pos-o.parentOffset-2;return n.chain().setNodeSelection(i).deleteSelection().run(),!0}return!1},Tab:function(t){var n=t.editor;return!(!e.options.indentLineWithTab||!n.isActive(e.name)||(n.commands.insertContent("  "),0))},Enter:function(t){var n=t.editor,r=n.state.selection.$from;if(!n.isActive(e.name))return!1;var o=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith("\n\n");return o&&i?n.chain().command((function(e){return e.tr.delete(r.pos-2,r.pos),!0})).exitCode().run():(n.commands.insertContent("\n"),!0)},"Shift-Enter":function(t){var n=t.editor,r=n.state.selection.$from;return!!n.isActive(e.name)&&(n.chain().insertContentAt(r.pos-r.parentOffset+r.parent.nodeSize,{type:"paragraph"}).run(),!0)}}}}),ak=Gw(ik,{language:{default:"text"}});function sk(e,t){var n;return null==(n=Object.entries(e.supportedLanguages).find((function(e){var n=ew(e,2),r=n[0],o=n[1].aliases;return(null==o?void 0:o.includes(t))||r===t})))?void 0:n[0]}var uk=hC(Ms.create({name:"backgroundColor",addAttributes:function(){return{stringValue:{default:void 0,parseHTML:function(e){return e.getAttribute("data-background-color")},renderHTML:function(e){return{"data-background-color":e.stringValue}}}}},parseHTML:function(){return[{tag:"span",getAttrs:function(e){return"string"!=typeof e&&!!e.hasAttribute("data-background-color")&&{stringValue:e.getAttribute("data-background-color")}}}]},renderHTML:function(e){return["span",e.HTMLAttributes,0]}}),"string"),lk=hC(Ms.create({name:"textColor",addAttributes:function(){return{stringValue:{default:void 0,parseHTML:function(e){return e.getAttribute("data-text-color")},renderHTML:function(e){return{"data-text-color":e.stringValue}}}}},parseHTML:function(){return[{tag:"span",getAttrs:function(e){return"string"!=typeof e&&!!e.hasAttribute("data-text-color")&&{stringValue:e.getAttribute("data-text-color")}}}]},renderHTML:function(e){return["span",e.HTMLAttributes,0]}}),"string"),ck=function(e){return{url:e.src||void 0}},dk={type:"file",propSchema:{backgroundColor:_w.backgroundColor,name:{default:""},url:{default:""},caption:{default:""}},content:"none",isFileBlock:!0},fk=function(e){if("EMBED"===e.tagName)return e.closest("figure")?void 0:ck(e);if("FIGURE"===e.tagName){var t=JC(e,"embed");if(!t)return;var n=t.targetElement,r=t.caption;return hw(hw({},ck(n)),{},{caption:r})}},pk=Jw(dk,{render:function(e,t){return ZC(e,t)},parse:fk,toExternalHTML:function(e){if(!e.props.url){var t=document.createElement("p");return t.textContent="Add file",{dom:t}}var n=document.createElement("a");return n.href=e.props.url,n.textContent=e.props.name||e.props.url,e.props.caption?YC(n,e.props.caption):{dom:n}}}),hk=hw(hw({},_w),{},{level:{default:1,values:[1,2,3]}}),mk=$w({name:"heading",content:"inline*",group:"blockContent",addAttributes:function(){return Hw(hk)},addInputRules:function(){return QD([1,2,3].map((function(e){return new xs({find:new RegExp("^(#{".concat(e,"})\\s$")),handler:function(t){var n=t.state,r=t.chain,o=t.range,i=eC(n);!i.isBlockContainer||"inline*"!==i.blockContent.node.type.spec.content||r().command(RC(i.bnBlock.beforePos,{type:"heading",props:{level:e}})).deleteRange({from:o.from,to:o.to}).run()}})})))},addKeyboardShortcuts:function(){var e=this;return{"Mod-Alt-1":function(){var t=eC(e.editor.state);return!t.isBlockContainer||"inline*"!==t.blockContent.node.type.spec.content||e.editor.commands.command(RC(t.bnBlock.beforePos,{type:"heading",props:{level:1}}))},"Mod-Alt-2":function(){var t=eC(e.editor.state);return!t.isBlockContainer||"inline*"!==t.blockContent.node.type.spec.content||e.editor.commands.command(RC(t.bnBlock.beforePos,{type:"heading",props:{level:2}}))},"Mod-Alt-3":function(){var t=eC(e.editor.state);return!t.isBlockContainer||"inline*"!==t.blockContent.node.type.spec.content||e.editor.commands.command(RC(t.bnBlock.beforePos,{type:"heading",props:{level:3}}))}}},parseHTML:function(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"h1",attrs:{level:1},node:"heading"},{tag:"h2",attrs:{level:2},node:"heading"},{tag:"h3",attrs:{level:3},node:"heading"}]},renderHTML:function(e){var t,n,r=e.node,o=e.HTMLAttributes;return Nw(this.name,"h".concat(r.attrs.level),hw(hw({},(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{}),o),(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{})}}),vk=Gw(mk,hk),gk=function(e,t,n,r,o,i){var a=ZC(e,t,n,o,i),s=a.dom,u=a.destroy,l=s;e.props.url&&e.props.showPreview&&(e.props.previewWidth?l.style.width="".concat(e.props.previewWidth,"px"):l.style.width="fit-content");var c=document.createElement("div");c.className="bn-resize-handle",c.style.left="4px";var d=document.createElement("div");d.className="bn-resize-handle",d.style.right="4px";var f,p=e.props.previewWidth,h=function(n){var o,i,a;f?(a="center"===e.props.textAlignment?"left"===f.handleUsed?f.initialWidth+2*(f.initialClientX-n.clientX):f.initialWidth+2*(n.clientX-f.initialClientX):"left"===f.handleUsed?f.initialWidth+f.initialClientX-n.clientX:f.initialWidth+n.clientX-f.initialClientX,p=Math.min(Math.max(a,64),(null==(i=null==(o=t.domElement)?void 0:o.firstElementChild)?void 0:i.clientWidth)||Number.MAX_VALUE),l.style.width="".concat(p,"px")):!t.isEditable&&r.contains(c)&&r.contains(d)&&(r.removeChild(c),r.removeChild(d))},m=function(n){(!n.target||!l.contains(n.target)||!t.isEditable)&&r.contains(c)&&r.contains(d)&&(r.removeChild(c),r.removeChild(d)),f&&(f=void 0,t.updateBlock(e,{props:{previewWidth:p}}))},v=function(){t.isEditable&&(r.appendChild(c),r.appendChild(d))},g=function(e){e.relatedTarget===c||e.relatedTarget===d||f||t.isEditable&&r.contains(c)&&r.contains(d)&&(r.removeChild(c),r.removeChild(d))},y=function(e){e.preventDefault(),f={handleUsed:"left",initialWidth:l.clientWidth,initialClientX:e.clientX}},b=function(e){e.preventDefault(),f={handleUsed:"right",initialWidth:l.clientWidth,initialClientX:e.clientX}};return window.addEventListener("mousemove",h),window.addEventListener("mouseup",m),l.addEventListener("mouseenter",v),l.addEventListener("mouseleave",g),c.addEventListener("mousedown",y),d.addEventListener("mousedown",b),{dom:l,destroy:function(){null==u||u(),window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",m),l.removeEventListener("mouseenter",v),l.removeEventListener("mouseleave",g),c.removeEventListener("mousedown",y),d.removeEventListener("mousedown",b)}}},yk=function(e){return{url:e.src||void 0,previewWidth:e.width||void 0}},bk={type:"image",propSchema:{textAlignment:_w.textAlignment,backgroundColor:_w.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},content:"none",isFileBlock:!0,fileBlockAccept:["image/*"]},Dk=function(e){if("IMG"===e.tagName)return e.closest("figure")?void 0:yk(e);if("FIGURE"===e.tagName){var t=JC(e,"img");if(!t)return;var n=t.targetElement,r=t.caption;return hw(hw({},yk(n)),{},{caption:r})}},wk=Jw(bk,{render:function(e,t){var n=document.createElement("div");n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"></path></svg>';var r=document.createElement("div");r.className="bn-visual-media-wrapper";var o=document.createElement("img");return o.className="bn-visual-media",t.resolveFileUrl?t.resolveFileUrl(e.props.url).then((function(e){o.src=e})):o.src=e.props.url,o.alt=e.props.name||e.props.caption||"BlockNote image",o.contentEditable="false",o.draggable=!1,r.appendChild(o),gk(e,t,{dom:r},r,t.dictionary.file_blocks.image.add_button_text,n.firstElementChild)},parse:Dk,toExternalHTML:function(e){if(!e.props.url){var t=document.createElement("p");return t.textContent="Add image",{dom:t}}var n;return e.props.showPreview?((n=document.createElement("img")).src=e.props.url,n.alt=e.props.name||e.props.caption||"BlockNote image",e.props.previewWidth&&(n.width=e.props.previewWidth)):((n=document.createElement("a")).href=e.props.url,n.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?XC(n,e.props.caption):YC(n,e.props.caption):{dom:n}}});function Ck(e,t,n){var r,o,i,a=je.fromSchema(t),s=e,u=document.createElement("div");u.setAttribute("data-node-type","blockGroup");for(var l=0,c=Array.from(s.childNodes);l<c.length;l++){var d=c[l];u.appendChild(d.cloneNode(!0))}var f=a.parse(u,{topNode:t.nodes.blockGroup.create()});"checkListItem"===(null==(o=null==(r=f.firstChild)?void 0:r.firstChild)?void 0:o.type.name)&&(f=f.copy(f.content.cut(f.firstChild.firstChild.nodeSize+2)));var p=null==(i=f.firstChild)?void 0:i.firstChild;if(null==p||!p.isTextblock)return $.from(f);var h=t.nodes[n].create({},p.content),m=f.content.cut(p.nodeSize+2);if(m.size>0){var v=f.copy(m);return h.content.addToEnd(v)}return h.content}var kk=function(e,t,n){return function(r){var o=r.state,i=r.dispatch,a=Yw(Zw(o.doc,e));if(!a.isBlockContainer)throw new Error("BlockContainer expected when calling splitBlock, position ".concat(e));var s=[{type:a.bnBlock.node.type,attrs:n?hw(hw({},a.bnBlock.node.attrs),{},{id:void 0}):{}},{type:t?a.blockContent.node.type:o.schema.nodes.paragraph,attrs:n?hw({},a.blockContent.node.attrs):{}}];return i&&o.tr.split(e,2,s),!0}},Ek=function(e){var t=e.transact((function(e){return{blockInfo:tC(e),selectionEmpty:e.selection.anchor===e.selection.head}})),n=t.blockInfo,r=t.selectionEmpty;if(!n.isBlockContainer)return!1;var o=n.bnBlock,i=n.blockContent;return!("bulletListItem"!==i.node.type.name&&"numberedListItem"!==i.node.type.name&&"checkListItem"!==i.node.type.name||!r)&&e._tiptapEditor.commands.first((function(e){var t=e.state,n=e.chain,r=e.commands;return[function(){return r.command((function(){return 0===i.node.childCount&&r.command(RC(o.beforePos,{type:"paragraph",props:{}}))}))},function(){return r.command((function(){return i.node.childCount>0&&(n().deleteSelection().command(kk(t.selection.from,!0)).run(),!0)}))}]}))},xk=hw({},_w),Sk=$w({name:"bulletListItem",content:"inline*",group:"blockContent",priority:90,addInputRules:function(){return[new xs({find:new RegExp("^[-+*]\\s$"),handler:function(e){var t=e.state,n=e.chain,r=e.range,o=eC(t);!o.isBlockContainer||"inline*"!==o.blockContent.node.type.spec.content||n().command(RC(o.bnBlock.beforePos,{type:"bulletListItem",props:{}})).deleteRange({from:r.from,to:r.to})}})]},addKeyboardShortcuts:function(){var e=this;return{Enter:function(){return Ek(e.options.editor)},"Mod-Shift-8":function(){var t=eC(e.editor.state);return!t.isBlockContainer||"inline*"!==t.blockContent.node.type.spec.content||e.editor.commands.command(RC(t.bnBlock.beforePos,{type:"bulletListItem",props:{}}))}}},parseHTML:function(){var e=this;return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:function(e){var t;if("string"==typeof e)return!1;var n=e.parentElement;return null!==n&&("UL"===n.tagName||"DIV"===n.tagName&&"UL"===(null==(t=n.parentElement)?void 0:t.tagName))&&{}},getContent:function(t,n){return Ck(t,n,e.name)},node:"bulletListItem"}]},renderHTML:function(e){var t,n,r=e.HTMLAttributes;return Nw(this.name,"p",hw(hw({},(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{}),r),(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{})}}),Ak=Gw(Sk,xk),Fk=hw(hw({},_w),{},{checked:{default:!1}}),Ok=$w({name:"checkListItem",content:"inline*",group:"blockContent",addAttributes:function(){return Hw(Fk)},addInputRules:function(){return[new xs({find:new RegExp("\\[\\s*\\]\\s$"),handler:function(e){var t=e.state,n=e.chain,r=e.range,o=eC(t);!o.isBlockContainer||"inline*"!==o.blockContent.node.type.spec.content||n().command(RC(o.bnBlock.beforePos,{type:"checkListItem",props:{checked:!1}})).deleteRange({from:r.from,to:r.to})}}),new xs({find:new RegExp("\\[[Xx]\\]\\s$"),handler:function(e){var t=e.state,n=e.chain,r=e.range,o=eC(t);!o.isBlockContainer||"inline*"!==o.blockContent.node.type.spec.content||n().command(RC(o.bnBlock.beforePos,{type:"checkListItem",props:{checked:!0}})).deleteRange({from:r.from,to:r.to})}})]},addKeyboardShortcuts:function(){var e=this;return{Enter:function(){return Ek(e.options.editor)},"Mod-Shift-9":function(){var t=eC(e.editor.state);return!t.isBlockContainer||"inline*"!==t.blockContent.node.type.spec.content||e.editor.commands.command(RC(t.bnBlock.beforePos,{type:"checkListItem",props:{}}))}}},parseHTML:function(){var e=this;return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"input",getAttrs:function(e){return"string"!=typeof e&&!e.closest("[data-content-type]")&&!e.closest("li")&&"checkbox"===e.type&&{checked:e.checked}},node:"checkListItem"},{tag:"li",getAttrs:function(e){var t;if("string"==typeof e)return!1;var n=e.parentElement;if(null===n)return!1;if("UL"===n.tagName||"DIV"===n.tagName&&"UL"===(null==(t=n.parentElement)?void 0:t.tagName)){var r=e.querySelector("input[type=checkbox]")||null;return null!==r&&{checked:r.checked}}return!1},getContent:function(t,n){return Ck(t,n,e.name)},node:"checkListItem"}]},renderHTML:function(e){var t,n,r=e.node,o=e.HTMLAttributes,i=document.createElement("input");i.type="checkbox",i.checked=r.attrs.checked,r.attrs.checked&&i.setAttribute("checked","");var a=Nw(this.name,"p",hw(hw({},(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{}),o),(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{}),s=a.dom,u=a.contentDOM;return s.insertBefore(i,u),{dom:s,contentDOM:u}},addNodeView:function(){var e=this;return function(t){var n,r,o=t.node,i=t.getPos,a=t.editor,s=t.HTMLAttributes,u=document.createElement("div"),l=document.createElement("div");l.contentEditable="false";var c=document.createElement("input");c.type="checkbox",c.checked=o.attrs.checked,o.attrs.checked&&c.setAttribute("checked","");var d=function(){if(a.isEditable){if("boolean"!=typeof i){var t=Zw(a.state.doc,i());if("blockContainer"!==t.node.type.name)throw new Error("Expected blockContainer node, got ".concat(t.node.type.name));e.editor.commands.command(RC(t.posBeforeNode,{type:"checkListItem",props:{checked:c.checked}}))}}else c.checked=!c.checked};c.addEventListener("change",d);var f=Nw(e.name,"p",hw(hw({},(null==(n=e.options.domAttributes)?void 0:n.blockContent)||{}),s),(null==(r=e.options.domAttributes)?void 0:r.inlineContent)||{}),p=f.dom,h=f.contentDOM;if("boolean"!=typeof i){var m="label-"+e.editor.state.doc.resolve(i()).node().attrs.id;c.setAttribute("aria-labelledby",m),h.id=m}return p.removeChild(h),p.appendChild(u),u.appendChild(l),u.appendChild(h),l.appendChild(c),{dom:p,contentDOM:h,destroy:function(){c.removeEventListener("change",d)}}}}}),Mk=Gw(Ok,Fk),Bk=new Bn("numbered-list-indexing"),Pk=hw(hw({},_w),{},{start:{default:void 0,type:"number"}}),Tk=$w({name:"numberedListItem",content:"inline*",group:"blockContent",priority:90,addAttributes:function(){return hw(hw({},Hw(Pk)),{},{index:{default:null,parseHTML:function(e){return e.getAttribute("data-index")},renderHTML:function(e){return{"data-index":e.index}}}})},addInputRules:function(){return[new xs({find:new RegExp("^(\\d+)\\.\\s$"),handler:function(e){var t=e.state,n=e.chain,r=e.range,o=e.match,i=eC(t);if(i.isBlockContainer&&"inline*"===i.blockContent.node.type.spec.content&&"numberedListItem"!==i.blockNoteType){var a=parseInt(o[1]);n().command(RC(i.bnBlock.beforePos,{type:"numberedListItem",props:1===a&&{}||{start:a}})).deleteRange({from:r.from,to:r.to})}}})]},addKeyboardShortcuts:function(){var e=this;return{Enter:function(){return Ek(e.options.editor)},"Mod-Shift-7":function(){var t=eC(e.editor.state);return!t.isBlockContainer||"inline*"!==t.blockContent.node.type.spec.content||e.editor.commands.command(RC(t.bnBlock.beforePos,{type:"numberedListItem",props:{}}))}}},addProseMirrorPlugins:function(){return[new Fn({key:Bk,appendTransaction:function(e,t,n){var r=n.tr;r.setMeta("numberedListIndexing",!0);var o=!1;return n.doc.descendants((function(e,t){var n;if("blockContainer"===e.type.name&&"numberedListItem"===e.firstChild.type.name){var i="".concat(e.firstChild.attrs.start||1),a=Yw({posBeforeNode:t,node:e});if(!a.isBlockContainer)throw new Error("impossible");var s=r.doc.resolve(a.bnBlock.beforePos).nodeBefore;if(s){var u=Yw({posBeforeNode:a.bnBlock.beforePos-s.nodeSize,node:s});if("numberedListItem"===u.blockNoteType){if(!u.isBlockContainer)throw new Error("impossible");var l=u.blockContent.node.attrs.index;i=(parseInt(l)+1).toString()}}var c=a.blockContent.node,d=c.attrs.index,f="numberedListItem"!==(null==(n=null==s?void 0:s.firstChild)?void 0:n.type.name);if(d!==i||c.attrs.start&&!f){o=!0;var p=c.attrs,h=p.start,m=rw(p,WD);r.setNodeMarkup(a.blockContent.beforePos,void 0,hw(hw({},m),{},{index:i},"number"==typeof h&&f&&{start:h}))}}})),o?r:null}})]},parseHTML:function(){var e=this;return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:function(e){var t;if("string"==typeof e)return!1;var n=e.parentElement;if(null===n)return!1;if("OL"===n.tagName||"DIV"===n.tagName&&"OL"===(null==(t=n.parentElement)?void 0:t.tagName)){var r=parseInt(n.getAttribute("start")||"1")||1;return e.previousSibling||1===r?{}:{start:r}}return!1},getContent:function(t,n){return Ck(t,n,e.name)},priority:300,node:"numberedListItem"}]},renderHTML:function(e){var t,n,r=e.HTMLAttributes;return Nw(this.name,"p",hw(hw({},(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{}),r),(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{})}}),Nk=Gw(Tk,Pk),jk=hw({},_w),_k=$w({name:"paragraph",content:"inline*",group:"blockContent",addKeyboardShortcuts:function(){var e=this;return{"Mod-Alt-0":function(){var t=eC(e.editor.state);return!t.isBlockContainer||"inline*"!==t.blockContent.node.type.spec.content||e.editor.commands.command(RC(t.bnBlock.beforePos,{type:"paragraph",props:{}}))}}},parseHTML:function(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"p",getAttrs:function(e){var t;return!("string"==typeof e||null==(t=e.textContent)||!t.trim())&&{}},node:"paragraph"}]},renderHTML:function(e){var t,n,r=e.HTMLAttributes;return Nw(this.name,"p",hw(hw({},(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{}),r),(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{})}}),Rk=Gw(_k,jk),Lk=hw({},_w),Ik=$w({name:"quote",content:"inline*",group:"blockContent",addInputRules:function(){return[new xs({find:new RegExp("^>\\s$"),handler:function(e){var t=e.state,n=e.chain,r=e.range,o=eC(t);!o.isBlockContainer||"inline*"!==o.blockContent.node.type.spec.content||n().command(RC(o.bnBlock.beforePos,{type:"quote",props:{}})).deleteRange({from:r.from,to:r.to})}})]},addKeyboardShortcuts:function(){var e=this;return{"Mod-Alt-q":function(){var t=eC(e.editor.state);return!t.isBlockContainer||"inline*"!==t.blockContent.node.type.spec.content||e.editor.commands.command(RC(t.bnBlock.beforePos,{type:"quote"}))}}},parseHTML:function(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"blockquote",node:"quote"}]},renderHTML:function(e){var t,n,r=e.HTMLAttributes;return Nw(this.name,"blockquote",hw(hw({},(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{}),r),(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{})}}),Hk=Gw(Ik,Lk),zk=js.create({name:"BlockNoteTableExtension",addProseMirrorPlugins:function(){return[Nc({cellMinWidth:35,defaultCellMinWidth:120,View:null}),Hc()]},addKeyboardShortcuts:function(){var e=this;return{Enter:function(){return!(!e.editor.state.selection.empty||"tableParagraph"!==e.editor.state.selection.$head.parent.type.name||(e.editor.commands.insertContent({type:"hardBreak"}),0))},Backspace:function(){var t=e.editor.state.selection,n=t.empty,r=0===t.$head.parentOffset,o="tableParagraph"===t.$head.node().type.name;return n&&r&&o},Tab:function(){return e.editor.commands.command((function(e){var t=e.state,n=e.dispatch,r=e.view;return mc(1)(t,n,r)}))},"Shift-Tab":function(){return e.editor.commands.command((function(e){var t=e.state,n=e.dispatch,r=e.view;return mc(-1)(t,n,r)}))}}},extendNodeSchema:function(e){return{tableRole:gs(cs(e,"tableRole",{name:e.name,options:e.options,storage:e.storage}))}}}),Vk={textColor:_w.textColor},$k=$w({name:"table",content:"tableRow+",group:"blockContent",tableRole:"table",marks:"deletion insertion modification",isolating:!0,parseHTML:function(){return[{tag:"table"}]},renderHTML:function(e){var t,n,r=e.HTMLAttributes;return Nw(this.name,"table",hw(hw({},(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{}),r),(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{})},addNodeView:function(){var e=this;return function(t){var n,r=t.node,o=t.HTMLAttributes,i=function(e){function t(e,n,r){var o;aw(this,t),(o=sw(this,t,[e,n])).node=e,o.cellMinWidth=n,o.blockContentHTMLAttributes=r;var i=document.createElement("div");i.className=Pw("bn-block-content",r.class),i.setAttribute("data-content-type","table");for(var a=0,s=Object.entries(r);a<s.length;a++){var u=ew(s[a],2),l=u[0],c=u[1];"class"!==l&&i.setAttribute(l,c)}var d=o.dom,f=document.createElement("div");f.className="tableWrapper-inner",f.appendChild(d.firstChild),d.appendChild(f),i.appendChild(d);var p=document.createElement("div");return p.className="table-widgets-container",p.style.position="relative",d.appendChild(p),o.dom=i,o}return uw(t,e),iw(t,[{key:"ignoreMutation",value:function(e){return!e.target.closest(".tableWrapper-inner")||function(e,t,n){var r=XD(fw(e.prototype),"ignoreMutation",n);return"function"==typeof r?function(e){return r.apply(n,e)}:r}(t,0,this)([e])}}])}(Bc);return new i(r,120,hw(hw({},(null==(n=e.options.domAttributes)?void 0:n.blockContent)||{}),o))}}}),Uk=$w({name:"tableParagraph",group:"tableContent",content:"inline*",parseHTML:function(){return[{tag:"p",getAttrs:function(e){if("string"==typeof e||!e.textContent||!e.closest("[data-content-type]"))return!1;var t=e.parentElement;return null!==t&&("TD"===t.tagName||"TH"===t.tagName)&&{}},node:"tableParagraph"}]},renderHTML:function(e){return["p",e.HTMLAttributes,0]}}),Gk=Nu.create({name:"tableRow",addOptions:function(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)+",tableRole:"row",marks:"deletion insertion modification",parseHTML:function(){return[{tag:"tr"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["tr",hs(this.options.HTMLAttributes,t),0]}});function Wk(e,t){var n=je.fromSchema(t).parse(e,{topNode:t.nodes.blockGroup.create()}),r=[];return n.content.descendants((function(e){if(e.isInline)return r.push(e),!1})),$.fromArray(r)}var qk=Gw($k,Vk,[zk,Uk,Fl.extend({content:"tableContent+",parseHTML:function(){return[{tag:"th",getContent:function(e,t){return Wk(e,t)}}]}}),Al.extend({content:"tableContent+",parseHTML:function(){return[{tag:"td",getContent:function(e,t){return Wk(e,t)}}]}}),Gk]),Kk=function(e){return{url:e.src||void 0,previewWidth:e.width||void 0}},Jk={type:"video",propSchema:{textAlignment:_w.textAlignment,backgroundColor:_w.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},content:"none",isFileBlock:!0,fileBlockAccept:["video/*"]},Zk=function(e){if("VIDEO"===e.tagName)return e.closest("figure")?void 0:Kk(e);if("FIGURE"===e.tagName){var t=JC(e,"video");if(!t)return;var n=t.targetElement,r=t.caption;return hw(hw({},Kk(n)),{},{caption:r})}},Xk=Jw(Jk,{render:function(e,t){var n=document.createElement("div");n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"></path></svg>';var r=document.createElement("div");r.className="bn-visual-media-wrapper";var o=document.createElement("video");return o.className="bn-visual-media",t.resolveFileUrl?t.resolveFileUrl(e.props.url).then((function(e){o.src=e})):o.src=e.props.url,o.controls=!0,o.contentEditable="false",o.draggable=!1,o.width=e.props.previewWidth,r.appendChild(o),gk(e,t,{dom:r},r,t.dictionary.file_blocks.video.add_button_text,n.firstElementChild)},parse:Zk,toExternalHTML:function(e){if(!e.props.url){var t=document.createElement("p");return t.textContent="Add video",{dom:t}}var n;return e.props.showPreview?((n=document.createElement("video")).src=e.props.url,e.props.previewWidth&&(n.width=e.props.previewWidth)):((n=document.createElement("a")).href=e.props.url,n.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?XC(n,e.props.caption):YC(n,e.props.caption):{dom:n}}}),Yk={paragraph:Rk,heading:vk,quote:Hk,codeBlock:ak,bulletListItem:Ak,numberedListItem:Nk,checkListItem:Mk,table:qk,file:pk,image:wk,video:Xk,audio:nk},Qk=Ww(Yk),eE={bold:hC(hl,"boolean"),italic:hC(Cl,"boolean"),underline:hC(Sl,"boolean"),strike:hC(xl,"boolean"),code:hC(gl,"boolean"),textColor:lk,backgroundColor:uk},tE=(mC(eE),{text:{config:"text",implementation:{}},link:{config:"link",implementation:{}}}),nE=pC(tE);function rE(e,t){return e in t.schema.blockSchema&&t.schema.blockSchema[e]===Qk[e]}function oE(e,t){return e in t.schema.inlineContentSchema&&t.schema.inlineContentSchema[e]===nE[e]}function iE(e,t){return e.type in t.schema.blockSchema&&t.schema.blockSchema[e.type].isFileBlock||!1}function aE(e,t){return t.schema.blockSchema[e.type].isFileBlock&&!e.props.url}function sE(e,t,n){return t in n.schema.blockSchema&&e in n.schema.blockSchema[t].propSchema&&n.schema.blockSchema[t].propSchema[e]===_w[e]}function uE(e,t,n){return sE(e,t.type,n)}function lE(e){return e instanceof tc}function cE(e,t){var n,r=e.getTextCursorPosition().block;if(void 0===r.content)throw new Error("Slash Menu open in a block that doesn't contain content.");return Array.isArray(r.content)&&(1===r.content.length&&kw(r.content[0])&&"text"===r.content[0].type&&"/"===r.content[0].text||0===r.content.length)?(n=e.updateBlock(r,t),e.setTextCursorPosition(n)):(n=e.insertBlocks([t],r,"after")[0],e.setTextCursorPosition(e.getTextCursorPosition().nextBlock)),function(e){for(var t=e.getTextCursorPosition().block,n=e.schema.blockSchema[t.type].content;"none"===n;){if(void 0===(t=e.getTextCursorPosition().nextBlock))return;n=e.schema.blockSchema[t.type].content,e.setTextCursorPosition(t,"end")}}(e),n}function dE(e,t){return e.filter((function(e){var n=e.title,r=e.aliases;return n.toLowerCase().includes(t.toLowerCase())||r&&0!==r.filter((function(e){return e.toLowerCase().includes(t.toLowerCase())})).length}))}function fE(e){return e&&Object.fromEntries(Object.entries(e).filter((function(e){return void 0!==ew(e,2)[1]})))}var pE,hE=function(){function e(t){aw(this,e),bw(this,"blockSpecs"),bw(this,"inlineContentSpecs"),bw(this,"styleSpecs"),bw(this,"blockSchema"),bw(this,"inlineContentSchema"),bw(this,"styleSchema"),bw(this,"BlockNoteEditor","only for types"),bw(this,"Block","only for types"),bw(this,"PartialBlock","only for types"),this.blockSpecs=fE(null==t?void 0:t.blockSpecs)||Yk,this.inlineContentSpecs=fE(null==t?void 0:t.inlineContentSpecs)||tE,this.styleSpecs=fE(null==t?void 0:t.styleSpecs)||eE,this.blockSchema=Ww(this.blockSpecs),this.inlineContentSchema=pC(this.inlineContentSpecs),this.styleSchema=mC(this.styleSpecs)}return iw(e,null,[{key:"create",value:function(t){return new e(t)}}])}(),mE=Jw({type:"pageBreak",propSchema:{},content:"none",isFileBlock:!1,isSelectable:!1},{render:function(){var e=document.createElement("div");return e.className="bn-page-break",e.setAttribute("data-page-break",""),{dom:e}},parse:function(e){if("DIV"===e.tagName&&e.hasAttribute("data-page-break"))return{type:"pageBreak"}},toExternalHTML:function(){var e=document.createElement("div");return e.setAttribute("data-page-break",""),{dom:e}}});function vE(e){return e.map((function(e){return"columnList"===e.type?e.children.map((function(e){return vE(e.children)})).flat():hw(hw({},e),{},{children:vE(e.children)})})).flat()}function gE(e,t,n){e.transact((function(r){var o,i=(null==(o=e.getSelection())?void 0:o.blocks)||[e.getTextCursorPosition().block],a=function(e){return e.transact((function(e){var t=Zw(e.doc,e.selection.anchor);if(e.selection instanceof tc)return{type:"cell",anchorBlockId:t.node.attrs.id,anchorCellOffset:e.selection.$anchorCell.pos-t.posBeforeNode,headCellOffset:e.selection.$headCell.pos-t.posBeforeNode};if(e.selection instanceof mn)return{type:"node",anchorBlockId:t.node.attrs.id};var n=Zw(e.doc,e.selection.head);return{type:"text",anchorBlockId:t.node.attrs.id,headBlockId:n.node.attrs.id,anchorOffset:e.selection.anchor-t.posBeforeNode,headOffset:e.selection.head-n.posBeforeNode}}))}(e);e.removeBlocks(i),e.insertBlocks(vE(i),t,n),function(e,t){var n,r,o,i=null==(n=TC(t.anchorBlockId,e.doc))?void 0:n.posBeforeNode;if(void 0===i)throw new Error("Could not find block with ID ".concat(t.anchorBlockId," to update selection"));if("cell"===t.type)o=tc.create(e.doc,i+t.anchorCellOffset,i+t.headCellOffset);else if("node"===t.type)o=mn.create(e.doc,i+1);else{var a=null==(r=TC(t.headBlockId,e.doc))?void 0:r.posBeforeNode;if(void 0===a)throw new Error("Could not find block with ID ".concat(t.headBlockId," to update selection"));o=pn.create(e.doc,i+t.anchorOffset,a+t.headOffset)}e.setSelection(o)}(r,a)}))}function yE(e){return!e||"columnList"!==e.type}function bE(e,t,n){var r,o;if(t?t.children.length>0?(r=t.children[t.children.length-1],o="after"):(r=t,o="before"):n&&(r=n,o="before"),r&&o){var i=e.getParentBlock(r);return yE(i)?{referenceBlock:r,placement:o}:bE(e,"after"===o?r:e.getPrevBlock(r),i)}}function DE(e,t,n){var r,o;if(t?t.children.length>0?(r=t.children[0],o="before"):(r=t,o="after"):n&&(r=n,o="after"),r&&o){var i=e.getParentBlock(r);return yE(i)?{referenceBlock:r,placement:o}:DE(e,"before"===o?r:e.getNextBlock(r),i)}}function wE(e){e.transact((function(){var t=e.getSelection(),n=(null==t?void 0:t.blocks[0])||e.getTextCursorPosition().block,r=bE(e,e.getPrevBlock(n),e.getParentBlock(n));r&&gE(e,r.referenceBlock,r.placement)}))}function CE(e){e.transact((function(){var t=e.getSelection(),n=(null==t?void 0:t.blocks[(null==t?void 0:t.blocks.length)-1])||e.getTextCursorPosition().block,r=DE(e,e.getNextBlock(n),e.getParentBlock(n));r&&gE(e,r.referenceBlock,r.placement)}))}function kE(e){return e.exec((function(e,t){return function(e,t){return function(n,r){var o=n.selection,i=o.$from,a=o.$to,s=i.blockRange(a,(function(e){return e.childCount>0&&("blockGroup"===e.type.name||"column"===e.type.name)}));if(!s)return!1;var u=s.startIndex;if(0===u)return!1;var l=s.parent.child(u-1);if(l.type!==e)return!1;if(r){var c=l.lastChild&&l.lastChild.type===t,d=$.from(c?e.create():null),f=new J($.from(e.create(null,$.from(t.create(null,d)))),c?3:1,0),p=s.start,h=s.end;r(n.tr.step(new wt(p-(c?3:1),h,p,h,f,1,!0)).scrollIntoView())}return!0}}(e.schema.nodes.blockContainer,e.schema.nodes.blockGroup)(e,t)}))}function EE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"start",r="string"==typeof t?t:t.id,o=oC(nC(e.doc)),i=TC(r,e.doc);if(!i)throw new Error("Block with ID ".concat(r," not found"));var a=Yw(i),s=o.blockSchema[a.blockNoteType].content;if(a.isBlockContainer){var u=a.blockContent;if("none"===s)return void e.setSelection(mn.create(e.doc,u.beforePos));if("inline"===s)"start"===n?e.setSelection(pn.create(e.doc,u.beforePos+1)):e.setSelection(pn.create(e.doc,u.afterPos-1));else{if("table"!==s)throw new Ow(s);"start"===n?e.setSelection(pn.create(e.doc,u.beforePos+4)):e.setSelection(pn.create(e.doc,u.afterPos-4))}}else EE(e,("start"===n?a.childContainer.node.firstChild:a.childContainer.node.lastChild).attrs.id,n)}function xE(){return SE.apply(this,arguments)}function SE(){return(SE=ZD(KD().mark((function e(){var t;return KD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!pE){e.next=2;break}return e.abrupt("return",pE);case 2:return e.next=4,Promise.all([Promise.all([a.e(5039),a.e(3059)]).then(a.bind(a,3059)),a.e(3861).then(a.bind(a,3861)),Promise.all([a.e(5039),a.e(55)]).then(a.bind(a,55)),a.e(6753).then(a.bind(a,6753)),Promise.all([a.e(2643),a.e(6592),a.e(3119)]).then(a.bind(a,3119)),Promise.resolve().then(a.t.bind(a,9349,19)),Promise.all([a.e(2643),a.e(1691)]).then(a.bind(a,1691)),a.e(7043).then(a.bind(a,7043)),Promise.all([a.e(2643),a.e(6531)]).then(a.bind(a,6531)),Promise.all([a.e(2643),a.e(6592),a.e(7172)]).then(a.bind(a,7172))]);case 4:return t=e.sent,e.abrupt("return",pE={rehypeParse:t[0],rehypeStringify:t[1],unified:t[2],hastUtilFromDom:t[3],rehypeRemark:t[4],remarkGfm:t[5],remarkStringify:t[6],remarkParse:t[7],remarkRehype:t[8],rehypeFormat:t[9]});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function AE(){var e=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(t){for(var n=t.children.length,r=0;r<n;r++){var o=t.children[r];if("element"===o.type&&(e(o),"u"===o.tagName))if(o.children.length>0){var i;(i=t.children).splice.apply(i,[r,1].concat(QD(o.children)));var a=o.children.length-1;n+=a,r+=a}else t.children.splice(r,1),n--,r--}}));return e}function FE(){var e=pE;if(!e)throw new Error("addSpacesToCheckboxes requires ESM dependencies to be initialized");var t=function(n){var r;if(n.children&&"length"in n.children&&n.children.length)for(var o=n.children.length-1;o>=0;o--){var i=n.children[o],a=o+1<n.children.length?n.children[o+1]:void 0;"element"===i.type&&"input"===i.tagName&&"checkbox"===(null==(r=i.properties)?void 0:r.type)&&"element"===(null==a?void 0:a.type)&&"p"===a.tagName?(a.tagName="span",a.children.splice(0,0,e.hastUtilFromDom.fromDom(document.createTextNode(" ")))):t(i)}};return t}function OE(e){var t=pE;if(!t)throw new Error("cleanHTMLToMarkdown requires ESM dependencies to be initialized");return t.unified.unified().use(t.rehypeParse.default,{fragment:!0}).use(AE).use(FE).use(t.rehypeRemark.default).use(t.remarkGfm.default).use(t.remarkStringify.default,{handlers:{text:function(e){return e.value}}}).processSync(e).value}function ME(e,t,n,r){return BE.apply(this,arguments)}function BE(){return BE=ZD(KD().mark((function e(t,n,r,o){var i;return KD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xE();case 2:return i=UC(n,r).exportBlocks(t,o),e.abrupt("return",OE(i));case 4:case"end":return e.stop()}}),e)}))),BE.apply(this,arguments)}hE.create({blockSpecs:{pageBreak:mE}});var PE=null;function TE(e){if("string"==typeof e){var t=(PE||(PE=document.implementation.createHTMLDocument("title"))).createElement("div");t.innerHTML=e,e=t}return function(e){e.querySelectorAll("li > ul, li > ol").forEach((function(e){var t=function(e){return Array.prototype.indexOf.call(e.parentElement.childNodes,e)}(e),n=e.parentElement,r=Array.from(n.childNodes).slice(t+1);e.remove(),r.forEach((function(e){e.remove()})),n.insertAdjacentElement("afterend",e),r.reverse().forEach((function(t){if(!function(e){return 3===e.nodeType&&!/\S/.test(e.nodeValue||"")}(t)){var n=document.createElement("li");n.append(t),e.insertAdjacentElement("afterend",n)}})),0===n.childNodes.length&&n.remove()}))}(e),function(e){e.querySelectorAll("li + ul, li + ol").forEach((function(e){var t,n,r=e.previousElementSibling,o=document.createElement("div");r.insertAdjacentElement("afterend",o),o.append(r);var i=document.createElement("div");for(i.setAttribute("data-node-type","blockGroup"),o.append(i);"UL"===(null==(t=o.nextElementSibling)?void 0:t.nodeName)||"OL"===(null==(n=o.nextElementSibling)?void 0:n.nodeName);)i.append(o.nextElementSibling)}))}(e),e}function NE(e,t){return jE.apply(this,arguments)}function jE(){return jE=ZD(KD().mark((function e(t,n){var r,o,i,a;return KD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=TE(t),o=je.fromSchema(n).parse(r,{topNode:n.nodes.blockGroup.create()}),i=[],a=0;a<o.childCount;a++)i.push(fC(o.child(a),n));return e.abrupt("return",i);case 3:case"end":return e.stop()}}),e)}))),jE.apply(this,arguments)}function _E(e,t){var n=t.value?t.value:"",r={};t.lang&&(r["data-language"]=t.lang);var o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(o.data={meta:t.meta}),e.patch(t,o),o={type:"element",tagName:"pre",properties:{},children:[o=e.applyData(t,o)]},e.patch(t,o),o}function RE(e){return LE.apply(this,arguments)}function LE(){return(LE=ZD(KD().mark((function e(t){var n;return KD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xE();case 2:return n=e.sent,e.abrupt("return",n.unified.unified().use(n.remarkParse.default).use(n.remarkGfm.default).use(n.remarkRehype.default,{handlers:hw(hw({},n.remarkRehype.defaultHandlers),{},{code:_E})}).use(n.rehypeStringify.default).processSync(t).value);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function IE(e,t){return HE.apply(this,arguments)}function HE(){return HE=ZD(KD().mark((function e(t,n){var r;return KD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RE(t);case 2:return r=e.sent,e.abrupt("return",NE(r,n));case 4:case"end":return e.stop()}}),e)}))),HE.apply(this,arguments)}var zE=["vscode-editor-data","blocknote/html","text/markdown","text/html","text/plain","Files"];function VE(e,t){if(!e.startsWith(".")||!t.startsWith("."))throw new Error("The strings provided are not valid file extensions.");return e===t}function $E(e,t){var n=e.split("/"),r=t.split("/");if(2!==n.length)throw new Error("The string ".concat(e," is not a valid MIME type."));if(2!==r.length)throw new Error("The string ".concat(t," is not a valid MIME type."));return"*"===n[1]||"*"===r[1]?n[0]===r[0]:("*"===n[0]||"*"===r[0]||n[0]===r[0])&&n[1]===r[1]}function UE(e,t,n){return Array.isArray(t.content)&&0===t.content.length?e.updateBlock(t,n).id:e.insertBlocks([n],t,"after")[0].id}function GE(e,t){return WE.apply(this,arguments)}function WE(){return WE=ZD(KD().mark((function e(t,n){var r,o,i,a,s,u,l,c,d,f,p;return KD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.uploadFile){e.next=3;break}return console.warn("Attempted ot insert file, but uploadFile is not set in the BlockNote editor options"),e.abrupt("return");case 3:if(null!==(o="dataTransfer"in t?t.dataTransfer:t.clipboardData)){e.next=6;break}return e.abrupt("return");case 6:i=null,a=YD(zE),e.prev=8,a.s();case 10:if((s=a.n()).done){e.next=17;break}if(u=s.value,!o.types.includes(u)){e.next=15;break}return i=u,e.abrupt("break",17);case 15:e.next=10;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),a.e(e.t0);case 22:return e.prev=22,a.f(),e.finish(22);case 25:if("Files"===i){e.next=27;break}return e.abrupt("return");case 27:if(l=o.items){e.next=30;break}return e.abrupt("return");case 30:t.preventDefault(),c=Object.values(n.schema.blockSchema).filter((function(e){return e.isFileBlock})),d=KD().mark((function e(){var o,i,a,s,u,d,f,h,m,v,g,y,b,D,w,C,k;return KD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o="file",i=YD(c),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=27;break}s=a.value,u=YD(s.fileBlockAccept||[]),e.prev=7,u.s();case 9:if((d=u.n()).done){e.next=17;break}if(f=d.value,h=f.startsWith("."),!(m=l[p].getAsFile())||!(!h&&m.type&&$E(l[p].type,f)||h&&VE("."+m.name.split(".").pop(),f))){e.next=15;break}return o=s.type,e.abrupt("break",17);case 15:e.next=9;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),u.e(e.t0);case 22:return e.prev=22,u.f(),e.finish(22);case 25:e.next=4;break;case 27:e.next=32;break;case 29:e.prev=29,e.t1=e.catch(2),i.e(e.t1);case 32:return e.prev=32,i.f(),e.finish(32);case 35:if(!(v=l[p].getAsFile())){e.next=56;break}if(g={type:o,props:{name:v.name}},"paste"!==t.type){e.next=43;break}b=n.getTextCursorPosition().block,y=UE(n,b,g),e.next=51;break;case 43:if("drop"!==t.type){e.next=50;break}if(D={left:t.clientX,top:t.clientY},w=null==(r=n.prosemirrorView)?void 0:r.posAtCoords(D)){e.next=47;break}return e.abrupt("return",{v:void 0});case 47:y=n.transact((function(e){var t=Zw(e.doc,w.pos);return UE(n,n.getBlock(t.node.attrs.id),g)})),e.next=51;break;case 50:return e.abrupt("return",{v:void 0});case 51:return e.next=53,n.uploadFile(v,y);case 53:C=e.sent,k="string"==typeof C?{props:{url:C}}:hw({},C),n.updateBlock(y,k);case 56:case"end":return e.stop()}}),e,null,[[2,29,32,35],[7,19,22,25]])})),p=0;case 34:if(!(p<l.length)){e.next=42;break}return e.delegateYield(d(),"t1",36);case 36:if(!(f=e.t1)){e.next=39;break}return e.abrupt("return",f.v);case 39:p++,e.next=34;break;case 42:case"end":return e.stop()}}),e,null,[[8,19,22,25]])}))),WE.apply(this,arguments)}var qE=function(e){return js.create({name:"dropFile",addProseMirrorPlugins:function(){return[new Fn({props:{handleDOMEvents:{drop:function(t,n){if(e.isEditable){for(var r=null,o=0,i=zE;o<i.length;o++){var a=i[o];if(n.dataTransfer.types.includes(a)){r=a;break}}return null===r||"Files"===r&&(GE(n,e),!0)}}}}})]}})},KE=/(^|\n) {0,3}#{1,6} {1,8}[^\n]{1,64}\r?\n\r?\n\s{0,32}\S/,JE=new RegExp("(?:\\s|^)(_|__|\\*|\\*\\*|~~|==|\\+\\+)(?!\\s).{1,64}(?<!\\s)(?=\\1)"),ZE=/\[[^\]]{1,128}\]\(https?:\/\/\S{1,999}\)/,XE=new RegExp("(?:\\s|^)`(?!\\s)[^`]{1,48}(?<!\\s)`([^\\w]|$)"),YE=/(?:^|\n)\s{0,5}-\s{1}[^\n]+\n\s{0,15}-\s/,QE=/(?:^|\n)\s{0,5}\d+\.\s{1}[^\n]+\n\s{0,15}\d+\.\s/,ex=/\n{2} {0,3}-{2,48}\n{2}/,tx=/(?:\n|^)(```|~~~|\$\$)(?!`|~)[^\s]{0,64} {0,64}[^\n]{0,64}\n[\s\S]{0,9999}?\s*\1 {0,64}(?:\n+|$)/,nx=/(?:\n|^)(?!\s)\w[^\n]{0,64}\r?\n(-|=)\1{0,64}\n\n\s{0,64}(\w|$)/,rx=/(?:^|(\r?\n\r?\n))( {0,3}>[^\n]{1,333}\n){1,999}($|(\r?\n))/,ox=/^\s*\|(.+\|)+\s*$/m,ix=/^\s*\|(\s*[-:]+[-:]\s*\|)+\s*$/m,ax=/^\s*\|(.+\|)+\s*$/m;function sx(){return sx=ZD(KD().mark((function e(t,n){var r,o,i,a,s;return KD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.state.schema,t.clipboardData){e.next=3;break}return e.abrupt("return",!1);case 3:if(o=t.clipboardData.getData("text/plain")){e.next=6;break}return e.abrupt("return",!1);case 6:if(r.nodes.codeBlock){e.next=8;break}return e.abrupt("return",(n.pasteText(o),!0));case 8:return i=t.clipboardData.getData("vscode-editor-data"),a=i?JSON.parse(i):void 0,s=null==a?void 0:a.mode,e.abrupt("return",!!s&&(n.pasteHTML('<pre><code class="language-'.concat(s,'">').concat(o.replace(/\r\n?/g,"\n"),"</code></pre>")),!0));case 10:case"end":return e.stop()}}),e)}))),sx.apply(this,arguments)}var ux=function(e,t){return js.create({name:"pasteFromClipboard",addProseMirrorPlugins:function(){return[new Fn({props:{handleDOMEvents:{paste:function(n,r){if(r.preventDefault(),e.isEditable)return t({event:r,editor:e,defaultPasteHandler:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.prioritizeMarkdownOverHTML,o=void 0===n||n,i=t.plainTextAsMarkdown;return function(e){var t,n,r=e.event,o=e.editor,i=e.prioritizeMarkdownOverHTML,a=e.plainTextAsMarkdown;if(o.transact((function(e){return e.selection.$from.parent.type.spec.code&&e.selection.$to.parent.type.spec.code}))){var s=null==(t=r.clipboardData)?void 0:t.getData("text/plain");if(s)return o.pasteText(s),!0}for(var u=0,l=zE;u<l.length;u++){var c=l[u];if(r.clipboardData.types.includes(c)){n=c;break}}if(!n)return!0;if("vscode-editor-data"===n)return function(e,t){sx.apply(this,arguments)}(r,o.prosemirrorView),!0;if("Files"===n)return GE(r,o),!0;var d=r.clipboardData.getData(n);if("blocknote/html"===n)return o.pasteHTML(d,!0),!0;if("text/markdown"===n)return o.pasteMarkdown(d),!0;if(i){var f=r.clipboardData.getData("text/plain");if(function(e){return KE.test(e)||JE.test(e)||ZE.test(e)||XE.test(e)||YE.test(e)||QE.test(e)||ex.test(e)||tx.test(e)||nx.test(e)||rx.test(e)||ox.test(e)||ix.test(e)||ax.test(e)}(f))return o.pasteMarkdown(f),!0}return"text/html"===n?(o.pasteHTML(d),!0):a?(o.pasteMarkdown(d),!0):(o.pasteText(d),!0)}({event:r,editor:e,prioritizeMarkdownOverHTML:o,plainTextAsMarkdown:void 0===i||i})}})}}}})]}})};function lx(e){var t=[];return e.descendants((function(e){var n,r,o=nC(e);return"blockContainer"===e.type.name&&"blockGroup"===(null==(n=e.firstChild)?void 0:n.type.name)||("columnList"===e.type.name&&1===e.childCount?(null==(r=e.firstChild)||r.forEach((function(e){t.push(fC(e,o))})),!1):!e.type.isInGroup("bnBlock")||(t.push(fC(e,o)),!1))})),t}function cx(e,t){"node"in e.state.selection&&"blockContent"===e.state.selection.node.type.spec.group&&t.transact((function(t){return t.setSelection(new mn(t.doc.resolve(e.state.selection.from-1)))}));var n=e.serializeForClipboard(e.state.selection.content()).dom.innerHTML,r=e.state.selection.content().content,o=function(e,t,n){var r,o,i=!1,a=e.state.selection instanceof tc;if(!a){for(var s=e.state.doc.slice(e.state.selection.from,e.state.selection.to,!1).content,u=[],l=0;l<s.childCount;l++)u.push(s.child(l));i=void 0===u.find((function(e){return e.type.isInGroup("bnBlock")||"blockGroup"===e.type.name||"blockContent"===e.type.spec.group})),i&&(t=s)}var c=UC(e.state.schema,n);if(a){"table"===(null==(r=t.firstChild)?void 0:r.type.name)&&(t=t.firstChild.content);var d=lC(t,n.schema.inlineContentSchema,n.schema.styleSchema);o="<table>".concat(c.exportInlineContent(d,{}),"</table>")}else if(i){var f=cC(t,n.schema.inlineContentSchema,n.schema.styleSchema);o=c.exportInlineContent(f,{})}else{var p=lx(t);o=c.exportBlocks(p,{})}return o}(e,r,t);return{clipboardHTML:n,externalHTML:o,markdown:OE(o)}}var dx=function(){var e=window.getSelection();if(!e||e.isCollapsed)return!0;for(var t=e.focusNode;t;){if(t instanceof HTMLElement&&"false"===t.getAttribute("contenteditable"))return!0;t=t.parentElement}return!1},fx=function(e,t,n){n.preventDefault(),n.clipboardData.clearData();var r=cx(t,e),o=r.clipboardHTML,i=r.externalHTML,a=r.markdown;n.clipboardData.setData("blocknote/html",o),n.clipboardData.setData("text/html",i),n.clipboardData.setData("text/plain",a)},px=function(e){return js.create({name:"copyToClipboard",addProseMirrorPlugins:function(){return[new Fn({props:{handleDOMEvents:{copy:function(t,n){return dx()||fx(e,t,n),!0},cut:function(t,n){return dx()||(fx(e,t,n),t.editable&&t.dispatch(t.state.tr.deleteSelection())),!0},dragstart:function(t,n){if("node"in t.state.selection&&"blockContent"===t.state.selection.node.type.spec.group){e.transact((function(e){return e.setSelection(new mn(e.doc.resolve(t.state.selection.from-1)))})),n.preventDefault(),n.dataTransfer.clearData();var r=cx(t,e),o=r.clipboardHTML,i=r.externalHTML,a=r.markdown;return n.dataTransfer.setData("blocknote/html",o),n.dataTransfer.setData("text/html",i),n.dataTransfer.setData("text/plain",a),!0}}}}})]}})},hx=js.create({name:"blockBackgroundColor",addGlobalAttributes:function(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{backgroundColor:{default:_w.backgroundColor.default,parseHTML:function(e){return e.hasAttribute("data-background-color")?e.getAttribute("data-background-color"):_w.backgroundColor.default},renderHTML:function(e){return e.backgroundColor===_w.backgroundColor.default?{}:{"data-background-color":e.backgroundColor}}}}}]}}),mx=function(){return iw((function e(){aw(this,e),bw(this,"callbacks",{})}),[{key:"on",value:function(e,t){var n=this;return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),function(){return n.off(e,t)}}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=this.callbacks[e];i&&i.forEach((function(e){return e.apply(t,r)}))}},{key:"off",value:function(e,t){var n=this.callbacks[e];n&&(t?this.callbacks[e]=n.filter((function(e){return e!==t})):delete this.callbacks[e])}},{key:"removeAllListeners",value:function(){this.callbacks={}}}])}(),vx=function(e){function t(){var e;return aw(this,t),e=sw(this,t),bw(e,"plugins",[]),e}return uw(t,e),iw(t,[{key:"addProsemirrorPlugin",value:function(e){this.plugins.push(e)}},{key:"priority",get:function(){}}],[{key:"key",value:function(){throw new Error("You must implement the key method in your extension")}}])}(mx),gx=function(e){function t(e){var n;return aw(this,t),n=sw(this,t),bw(n,"provider"),bw(n,"recentlyUpdatedCursors"),bw(n,"renderCursor",(function(e,r){var o=n.recentlyUpdatedCursors.get(r);if(!o){var i,a=(null!==(i=n.collaboration.renderCursor)&&void 0!==i?i:t.defaultCursorRender)(e);"always"!==n.collaboration.showCursorLabels&&(a.addEventListener("mouseenter",(function(){var e=n.recentlyUpdatedCursors.get(r);e.element.setAttribute("data-active",""),e.hideTimeout&&(clearTimeout(e.hideTimeout),n.recentlyUpdatedCursors.set(r,{element:e.element,hideTimeout:void 0}))})),a.addEventListener("mouseleave",(function(){var e=n.recentlyUpdatedCursors.get(r);n.recentlyUpdatedCursors.set(r,{element:e.element,hideTimeout:setTimeout((function(){e.element.removeAttribute("data-active")}),2e3)})}))),o={element:a,hideTimeout:void 0},n.recentlyUpdatedCursors.set(r,o)}return o.element})),bw(n,"updateUser",(function(e){n.provider.awareness.setLocalStateField("user",e)})),n.collaboration=e,n.provider=e.provider,n.recentlyUpdatedCursors=new Map,n.provider.awareness.setLocalStateField("user",e.user),"always"!==e.showCursorLabels&&n.provider.awareness.on("change",(function(e){var t,r=YD(e.updated);try{var o=function(){var e=t.value,r=n.recentlyUpdatedCursors.get(e);r&&(r.element.setAttribute("data-active",""),r.hideTimeout&&clearTimeout(r.hideTimeout),n.recentlyUpdatedCursors.set(e,{element:r.element,hideTimeout:setTimeout((function(){r.element.removeAttribute("data-active")}),2e3)}))};for(r.s();!(t=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}})),n.addProsemirrorPlugin(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.awarenessStateFilter,r=void 0===n?Wb:n,o=t.cursorBuilder,i=void 0===o?qb:o,a=t.selectionBuilder,s=void 0===a?Kb:a,u=t.getSelection,l=void 0===u?function(e){return e.selection}:u,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cursor";return new Fn({key:Nb,state:{init:function(t,n){return Zb(n,e,r,i,s)},apply:function(t,n,o,a){var u=Pb.getState(a),l=t.getMeta(Nb);return u&&u.isChangeOrigin||l&&l.awarenessUpdated?Zb(a,e,r,i,s):n.map(t.mapping,t.doc)}},props:{decorations:function(e){return Nb.getState(e)}},view:function(t){var n=function(){t.docView&&function(e,t){zb||(zb=new Map,Hb(0,Vb)),Rp(zb,e,jp).set(t,{awarenessUpdated:!0})}(t,Nb)},r=function(){var n=Pb.getState(t.state),r=e.getLocalState()||{};if(t.hasFocus()){var o=l(t.state),i=$b(o.anchor,n.type,n.binding.mapping),a=$b(o.head,n.type,n.binding.mapping);null!=r.cursor&&yg(hg(r.cursor.anchor),i)&&yg(hg(r.cursor.head),a)||e.setLocalStateField(c,{anchor:i,head:a})}else null!=r.cursor&&null!==Gb(n.doc,n.type,hg(r.cursor.anchor),n.binding.mapping)&&e.setLocalStateField(c,null)};return e.on("change",n),t.dom.addEventListener("focusin",r),t.dom.addEventListener("focusout",r),{update:r,destroy:function(){t.dom.removeEventListener("focusin",r),t.dom.removeEventListener("focusout",r),e.off("change",n),e.setLocalStateField(c,null)}}}})}(n.provider.awareness,{selectionBuilder:Kb,cursorBuilder:n.renderCursor})),n}return uw(t,e),iw(t,[{key:"priority",get:function(){return 999}}],[{key:"key",value:function(){return"yCursorPlugin"}}])}(vx);bw(gx,"defaultCursorRender",(function(e){var t=document.createElement("span");t.classList.add("bn-collaboration-cursor__base");var n=document.createElement("span");n.setAttribute("contentedEditable","false"),n.classList.add("bn-collaboration-cursor__caret"),n.setAttribute("style","background-color: ".concat(e.color));var r=document.createElement("span");return r.classList.add("bn-collaboration-cursor__label"),r.setAttribute("style","background-color: ".concat(e.color)),r.insertBefore(document.createTextNode(e.name),null),n.insertBefore(r,null),t.insertBefore(document.createTextNode("⁠"),null),t.insertBefore(n,null),t.insertBefore(document.createTextNode("⁠"),null),t}));var yx=gx,bx=function(e){function t(e){var n;return aw(this,t),(n=sw(this,t)).addProsemirrorPlugin(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.colors,r=void 0===n?hD:n,o=t.colorMapping,i=void 0===o?new Map:o,a=t.permanentUserData,s=void 0===a?null:a,u=t.onFirstRender,l=void 0===u?function(){}:u,c=t.mapping,d=!1,f=new gD(e,c),p=new Fn({props:{editable:function(e){var t=Pb.getState(e);return null==t.snapshot&&null==t.prevSnapshot}},key:Pb,state:{init:function(t,n){return{type:e,doc:e.doc,binding:f,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:r,colorMapping:i,permanentUserData:s}},apply:function(e,t){var n=e.getMeta(Pb);if(void 0!==n)for(var r in t=Object.assign({},t),n)t[r]=n[r];return t.addToHistory=!1!==e.getMeta("addToHistory"),t.isChangeOrigin=void 0!==n&&!!n.isChangeOrigin,t.isUndoRedoOperation=void 0!==n&&!!n.isChangeOrigin&&!!n.isUndoRedoOperation,null!==f.prosemirrorView&&(void 0===n||null==n.snapshot&&null==n.prevSnapshot||Hb(0,(function(){null!=f.prosemirrorView&&(null==n.restore?f._renderSnapshot(n.snapshot,n.prevSnapshot,t):(f._renderSnapshot(n.snapshot,n.snapshot,t),delete t.restore,delete t.snapshot,delete t.prevSnapshot,f.mux((function(){f._prosemirrorChanged(f.prosemirrorView.state.doc)}))))}))),t}},view:function(e){return f.initView(e),null==c&&f._forceRerender(),l(),{update:function(){var t=p.getState(e.state);if(null==t.snapshot&&null==t.prevSnapshot&&(d||null!==e.state.doc.content.findDiffStart(e.state.doc.type.createAndFill().content))){if(d=!0,!1===t.addToHistory&&!t.isChangeOrigin){var n=Tb.getState(e.state),r=n&&n.undoManager;r&&r.stopCapturing()}f.mux((function(){t.doc.transact((function(n){n.meta.set("addToHistory",t.addToHistory),f._prosemirrorChanged(e.state.doc)}),Pb)}))}},destroy:function(){f.destroy()}}}});return p}(e)),n}return uw(t,e),iw(t,[{key:"priority",get:function(){return 1001}}],[{key:"key",value:function(){return"ySyncPlugin"}}])}(vx),Dx=function(e){function t(){var e;return aw(this,t),(e=sw(this,t)).addProsemirrorPlugin(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.protectedNodes,n=void 0===t?LD:t,r=e.trackedOrigins,o=void 0===r?[]:r,i=e.undoManager,a=void 0===i?null:i;return new Fn({key:Tb,state:{init:function(e,t){var r=Pb.getState(t),i=a||new $g(r.type,{trackedOrigins:new Set([Pb].concat(o)),deleteFilter:function(e){return function(e,t){return!(e instanceof Sb&&e.content instanceof Db&&(e.content.type instanceof qy||e.content.type instanceof Zy&&t.has(e.content.type.nodeName))&&0!==e.content.type._length)}(e,n)},captureTransaction:function(e){return!1!==e.meta.get("addToHistory")}});return{undoManager:i,prevSel:null,hasUndoOps:i.undoStack.length>0,hasRedoOps:i.redoStack.length>0}},apply:function(e,t,n,r){var o=Pb.getState(r).binding,i=t.undoManager,a=i.undoStack.length>0,s=i.redoStack.length>0;return o?{undoManager:i,prevSel:vD(o,n),hasUndoOps:a,hasRedoOps:s}:a!==t.hasUndoOps||s!==t.hasRedoOps?Object.assign({},t,{hasUndoOps:i.undoStack.length>0,hasRedoOps:i.redoStack.length>0}):t}},view:function(e){var t=Pb.getState(e.state),n=Tb.getState(e.state).undoManager;return n.on("stack-item-added",(function(n){var r=n.stackItem,o=t.binding;o&&r.meta.set(o,Tb.getState(e.state).prevSel)})),n.on("stack-item-popped",(function(e){var n=e.stackItem,r=t.binding;r&&(r.beforeTransactionSelection=n.meta.get(r)||r.beforeTransactionSelection)})),{destroy:function(){n.destroy()}}}})}()),e}return uw(t,e),iw(t,[{key:"priority",get:function(){return 1e3}}],[{key:"key",value:function(){return"yUndoPlugin"}}])}(vx),wx=Ms.create({name:"comment",excludes:"",inclusive:!1,keepOnSplit:!0,addAttributes:function(){return{orphan:{parseHTML:function(e){return!!e.getAttribute("data-orphan")},renderHTML:function(e){return e.orphan?{"data-orphan":"true"}:{}},default:!1},threadId:{parseHTML:function(e){return e.getAttribute("data-bn-thread-id")},renderHTML:function(e){return{"data-bn-thread-id":e.threadId}},default:""}}},renderHTML:function(e){return["span",hs(e.HTMLAttributes,{class:"bn-thread-mark"})]},parseHTML:function(){return[{tag:"span.bn-thread-mark"}]},extendMarkSchema:function(e){return"comment"===e.name?{blocknoteIgnore:!0}:{}}}),Cx=function(e){function t(e){var n;return aw(this,t),n=sw(this,t),bw(n,"userCache",new Map),bw(n,"loadingUsers",new Set),n.resolveUsers=e,n}return uw(t,e),iw(t,[{key:"loadUsers",value:(n=ZD(KD().mark((function e(t){var n,r,o,i,a,s,u,l,c,d,f,p=this;return KD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.filter((function(e){return!p.userCache.has(e)&&!p.loadingUsers.has(e)})),0===n.length){e.next=15;break}r=YD(n);try{for(r.s();!(o=r.n()).done;)i=o.value,this.loadingUsers.add(i)}catch(e){r.e(e)}finally{r.f()}return e.prev=4,e.next=7,this.resolveUsers(n);case 7:a=e.sent,s=YD(a);try{for(s.s();!(u=s.n()).done;)l=u.value,this.userCache.set(l.id,l)}catch(e){s.e(e)}finally{s.f()}this.emit("update",this.userCache);case 11:e.prev=11,c=YD(n);try{for(c.s();!(d=c.n()).done;)f=d.value,this.loadingUsers.delete(f)}catch(e){c.e(e)}finally{c.f()}return e.finish(11);case 15:case"end":return e.stop()}}),e,this,[[4,,11,15]])}))),function(e){return n.apply(this,arguments)})},{key:"getUser",value:function(e){return this.userCache.get(e)}},{key:"subscribe",value:function(e){return this.on("update",e)}}]);var n}(mx),kx=new Bn("blocknote-comments"),Ex=function(e){function t(e,n,r){var o;if(aw(this,t),o=sw(this,t),bw(o,"userStore"),bw(o,"pendingComment",!1),bw(o,"selectedThreadId"),bw(o,"threadPositions",new Map),bw(o,"updateMarksFromThreads",(function(e){o.editor.transact((function(t){t.doc.descendants((function(n,r){n.marks.forEach((function(i){if(i.type.name===o.markType){var a=i.type,s=i.attrs.threadId,u=e.get(s),l=!(u&&!u.resolved&&!u.deletedAt);if(l!==i.attrs.orphan){var c=Math.max(r,0),d=Math.min(r+n.nodeSize,t.doc.content.size-1,t.doc.content.size-1);t.removeMark(c,d,i),t.addMark(c,d,a.create(hw(hw({},i.attrs),{},{orphan:l}))),l&&o.selectedThreadId===s&&(o.selectedThreadId=void 0,o.emitStateUpdate())}}}))}))}))})),o.editor=e,o.threadStore=n,o.markType=r,!e.resolveUsers)throw new Error("resolveUsers is required for comments");o.userStore=new Cx(e.resolveUsers),o.threadStore.subscribe(o.updateMarksFromThreads),e.onCreate((function(){o.updateMarksFromThreads(o.threadStore.getThreads()),e.onSelectionChange((function(){o.pendingComment&&(o.pendingComment=!1,o.emitStateUpdate())}))}));var i=o;return o.addProsemirrorPlugin(new Fn({key:kx,state:{init:function(){return{decorations:Mi.empty}},apply:function(e,t){var n=e.getMeta(kx);if(!e.docChanged&&!n)return t;var r=e.docChanged?function(e,t){var n=new Map;return e.descendants((function(e,r){e.marks.forEach((function(o){if(o.type.name===t){var i,a=o.attrs.threadId;if(!a)return;var s=r,u=s+e.nodeSize,l=null!==(i=n.get(a))&&void 0!==i?i:{from:1/0,to:0};n.set(a,{from:Math.min(s,l.from),to:Math.max(u,l.to)})}}))})),n}(e.doc,i.markType):i.threadPositions;(r.size>0||i.threadPositions.size>0)&&(i.threadPositions=r,i.emitStateUpdate());var o=[];if(i.selectedThreadId){var a=r.get(i.selectedThreadId);a&&o.push(Ai.inline(a.from,a.to,{class:"bn-thread-mark-selected"}))}return{decorations:Mi.create(e.doc,o)}}},props:{decorations:function(e){var t,n;return null!==(t=null==(n=kx.getState(e))?void 0:n.decorations)&&void 0!==t?t:Mi.empty},handleClick:function(e,t,n){if(0===n.button){var o=e.state.doc.nodeAt(t);if(o){var a=o.marks.find((function(e){return e.type.name===r&&!0!==e.attrs.orphan})),s=null==a?void 0:a.attrs.threadId;i.selectThread(s,!1)}else i.selectThread(void 0)}}}})),o}return uw(t,e),iw(t,[{key:"emitStateUpdate",value:function(){this.emit("update",{selectedThreadId:this.selectedThreadId,pendingComment:this.pendingComment,threadPositions:this.threadPositions})}},{key:"onUpdate",value:function(e){return this.on("update",e)}},{key:"selectThread",value:function(e){var t,n,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.selectedThreadId!==e&&(this.selectedThreadId=e,this.emitStateUpdate(),this.editor.transact((function(e){return e.setMeta(kx,{name:"SET_SELECTED_THREAD_ID"})})),e&&r)){var o=this.threadPositions.get(e);if(!o)return;null==(n=null==(t=this.editor.prosemirrorView)?void 0:t.domAtPos(o.from).node)||n.scrollIntoView({behavior:"smooth",block:"center"})}}},{key:"startPendingComment",value:function(){this.pendingComment=!0,this.emitStateUpdate()}},{key:"stopPendingComment",value:function(){this.pendingComment=!1,this.emitStateUpdate()}},{key:"createThread",value:(n=ZD(KD().mark((function e(t){var n,r,o,i,a;return KD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.threadStore.createThread(t);case 2:if(n=e.sent,!this.threadStore.addThreadToDocument){e.next=9;break}return r=this.editor.prosemirrorView,o=r.state.selection,i=Pb.getState(r.state),a={prosemirror:{head:o.head,anchor:o.anchor},yjs:i?vD(i.binding,r.state):void 0},e.next=7,this.threadStore.addThreadToDocument({threadId:n.id,selection:a});case 7:e.next=10;break;case 9:this.editor._tiptapEditor.commands.setMark(this.markType,{orphan:!1,threadId:n.id});case 10:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}],[{key:"key",value:function(){return"comments"}}]);var n}(vx),xx=function(){return iw((function e(t,n,r,o){var i=this;aw(this,e),bw(this,"state"),bw(this,"emitUpdate"),bw(this,"mouseDownHandler",(function(){var e;null!=(e=i.state)&&e.show&&(i.state.show=!1,i.emitUpdate())})),bw(this,"dragstartHandler",(function(){var e;null!=(e=i.state)&&e.show&&(i.state.show=!1,i.emitUpdate())})),bw(this,"scrollHandler",(function(){var e;if(null!=(e=i.state)&&e.show){var t=i.pmView.root.querySelector('[data-node-type="blockContainer"][data-id="'.concat(i.state.block.id,'"]'));if(!t)return;i.state.referencePos=t.getBoundingClientRect(),i.emitUpdate()}})),bw(this,"closeMenu",(function(){var e;null!=(e=i.state)&&e.show&&(i.state.show=!1,i.emitUpdate())})),this.editor=t,this.pluginKey=n,this.pmView=r,this.emitUpdate=function(){if(!i.state)throw new Error("Attempting to update uninitialized file panel");o(i.state)},r.dom.addEventListener("mousedown",this.mouseDownHandler),r.dom.addEventListener("dragstart",this.dragstartHandler),r.root.addEventListener("scroll",this.scrollHandler,!0)}),[{key:"update",value:function(e,t){var n,r,o=this.pluginKey.getState(e.state),i=this.pluginKey.getState(t);if((null==(n=this.state)||!n.show)&&null!=o&&o.block&&this.editor.isEditable){var a=this.pmView.root.querySelector('[data-node-type="blockContainer"][data-id="'.concat(o.block.id,'"]'));if(!a)return;return this.state={show:!0,referencePos:a.getBoundingClientRect(),block:o.block},void this.emitUpdate()}var s=(null==o?void 0:o.block)&&!(null!=i&&i.block),u=!(null!=o&&o.block)&&(null==i?void 0:i.block);s&&this.state&&!this.state.show&&(this.state.show=!0,this.emitUpdate()),u&&null!=(r=this.state)&&r.show&&(this.state.show=!1,this.emitUpdate())}},{key:"destroy",value:function(){this.pmView.dom.removeEventListener("mousedown",this.mouseDownHandler),this.pmView.dom.removeEventListener("dragstart",this.dragstartHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}}])}(),Sx=new Bn("FilePanelPlugin"),Ax=function(e){function t(e){var n;return aw(this,t),n=sw(this,t),bw(n,"view"),bw(n,"closeMenu",(function(){var e;return null==(e=n.view)?void 0:e.closeMenu()})),n.addProsemirrorPlugin(new Fn({key:Sx,view:function(t){return n.view=new xx(e,Sx,t,(function(e){n.emit("update",e)})),n.view},props:{handleKeyDown:function(e,t){var r;return!("Escape"!==t.key||!n.shown||(null==(r=n.view)||r.closeMenu(),0))}},state:{init:function(){return{block:void 0}},apply:function(e,t){return e.getMeta(Sx)||(e.getMeta(Pb)||!e.selectionSet&&!e.docChanged?t:{block:void 0})}}})),n}return uw(t,e),iw(t,[{key:"shown",get:function(){var e,t;return(null==(t=null==(e=this.view)?void 0:e.state)?void 0:t.show)||!1}},{key:"onUpdate",value:function(e){return this.on("update",e)}}],[{key:"key",value:function(){return"filePanel"}}])}(vx),Fx=function(){return iw((function e(t,n,r){var o=this;aw(this,e),bw(this,"state"),bw(this,"emitUpdate"),bw(this,"preventHide",!1),bw(this,"preventShow",!1),bw(this,"shouldShow",(function(e){var t=e.view,n=e.state,r=e.from,i=e.to,a=n.doc,s=n.selection,u=s.empty,l=!a.textBetween(r,i).length&&Us(n.selection);if(s.$from.parent.type.spec.code||vu(s)&&s.node.type.spec.code||u||l)return!1;var c=document.activeElement;return!(!o.isElementWithinEditorWrapper(c)&&t.editable)})),bw(this,"blurHandler",(function(e){var t;if(o.preventHide)o.preventHide=!1;else{var n=o.pmView.dom.parentElement;e&&e.relatedTarget&&(n===e.relatedTarget||n.contains(e.relatedTarget)||e.relatedTarget.matches(".bn-ui-container, .bn-ui-container *"))||null!=(t=o.state)&&t.show&&(o.state.show=!1,o.emitUpdate())}})),bw(this,"isElementWithinEditorWrapper",(function(e){if(!e)return!1;var t=o.pmView.dom.parentElement;return!!t&&t.contains(e)})),bw(this,"viewMousedownHandler",(function(e){o.isElementWithinEditorWrapper(e.target)||(o.preventShow=!0)})),bw(this,"mouseupHandler",(function(){o.preventShow&&(o.preventShow=!1,setTimeout((function(){return o.update(o.pmView)})))})),bw(this,"dragHandler",(function(){var e;null!=(e=o.state)&&e.show&&(o.state.show=!1,o.emitUpdate())})),bw(this,"scrollHandler",(function(){var e;null!=(e=o.state)&&e.show&&(o.state.referencePos=o.getSelectionBoundingBox(),o.emitUpdate())})),bw(this,"closeMenu",(function(){var e;null!=(e=o.state)&&e.show&&(o.state.show=!1,o.emitUpdate())})),this.editor=t,this.pmView=n,this.emitUpdate=function(){if(!o.state)throw new Error("Attempting to update uninitialized formatting toolbar");r(o.state)},n.dom.addEventListener("mousedown",this.viewMousedownHandler),n.root.addEventListener("mouseup",this.mouseupHandler),n.dom.addEventListener("dragstart",this.dragHandler),n.dom.addEventListener("dragover",this.dragHandler),n.dom.addEventListener("blur",this.blurHandler),n.root.addEventListener("scroll",this.scrollHandler,!0)}),[{key:"update",value:function(e,t){var n,r,o,i=e.state,a=e.composing,s=i.doc,u=i.selection,l=t&&t.doc.eq(s)&&t.selection.eq(u);if(!a&&!l){var c=u.ranges,d=Math.min.apply(Math,QD(c.map((function(e){return e.$from.pos})))),f=Math.max.apply(Math,QD(c.map((function(e){return e.$to.pos})))),p=this.shouldShow({view:e,state:i,from:d,to:f}),h=gw(Range.prototype.getClientRects)>"u";if(this.preventShow||!p&&!this.preventHide||h)return null==(o=this.state)||!o.show||this.preventHide||p&&!this.preventShow&&this.editor.isEditable?void 0:(this.state.show=!1,void this.emitUpdate());var m={show:!0,referencePos:this.getSelectionBoundingBox()};(m.show!==(null==(n=this.state)?void 0:n.show)||m.referencePos.toJSON()!==(null==(r=this.state)?void 0:r.referencePos.toJSON()))&&(this.state=m,this.emitUpdate())}}},{key:"destroy",value:function(){this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("mouseup",this.mouseupHandler),this.pmView.dom.removeEventListener("dragstart",this.dragHandler),this.pmView.dom.removeEventListener("dragover",this.dragHandler),this.pmView.dom.removeEventListener("blur",this.blurHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}},{key:"getSelectionBoundingBox",value:function(){var e=this.pmView.state.selection,t=e.ranges,n=Math.min.apply(Math,QD(t.map((function(e){return e.$from.pos})))),r=Math.max.apply(Math,QD(t.map((function(e){return e.$to.pos}))));if(vu(e)){var o=this.pmView.nodeDOM(n);if(o)return o.getBoundingClientRect()}return gu(this.pmView,n,r)}}])}(),Ox=new Bn("FormattingToolbarPlugin"),Mx=function(e){function t(e){var n;return aw(this,t),n=sw(this,t),bw(n,"view"),bw(n,"closeMenu",(function(){return n.view.closeMenu()})),n.addProsemirrorPlugin(new Fn({key:Ox,view:function(t){return n.view=new Fx(e,t,(function(e){n.emit("update",e)})),n.view},props:{handleKeyDown:function(e,t){return!("Escape"!==t.key||!n.shown||(n.view.closeMenu(),0))}}})),n}return uw(t,e),iw(t,[{key:"shown",get:function(){var e,t;return(null==(t=null==(e=this.view)?void 0:e.state)?void 0:t.show)||!1}},{key:"onUpdate",value:function(e){return this.on("update",e)}}],[{key:"key",value:function(){return"formattingToolbar"}}])}(vx),Bx=Nu.create({name:"hardBreak",inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,priority:10,parseHTML:function(){return[{tag:"br"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["br",hs(this.options.HTMLAttributes,t)]},renderText:function(){return"\n"}}),Px=function(e,t){var n=e.resolve(t);if(!(n.depth<=1)){var r=n.posAtIndex(n.index(n.depth-1),n.depth-1);return Qw(e.resolve(r))}},Tx=function(e,t){var n=e.resolve(t),r=n.index();if(0!==r){var o=n.posAtIndex(r-1);return Qw(e.resolve(o))}},Nx=function(e,t){for(;t.childContainer;){var n=t.childContainer.node,r=e.resolve(t.childContainer.beforePos+1).posAtIndex(n.childCount-1);t=Qw(e.resolve(r))}return t},jx=function(e){return function(t){var n=t.state,r=t.dispatch,o=Qw(n.doc.resolve(e)),i=Tx(n.doc,o.bnBlock.beforePos);if(!i)return!1;var a=Nx(n.doc,i);return!!function(e,t){return e.isBlockContainer&&"inline*"===e.blockContent.node.type.spec.content&&e.blockContent.node.childCount>0&&t.isBlockContainer&&"inline*"===t.blockContent.node.type.spec.content}(a,o)&&function(e,t,n,r){if(!r.isBlockContainer)throw new Error("Attempted to merge block at position ".concat(r.bnBlock.beforePos," into previous block at position ").concat(n.bnBlock.beforePos,", but next block is not a block container"));if(r.childContainer){var o=e.doc.resolve(r.childContainer.beforePos+1),i=e.doc.resolve(r.childContainer.afterPos-1),a=o.blockRange(i);if(t){var s=e.doc.resolve(r.bnBlock.beforePos);e.tr.lift(a,s.depth)}}if(t){if(!n.isBlockContainer)throw new Error("Attempted to merge block at position ".concat(r.bnBlock.beforePos," into previous block at position ").concat(n.bnBlock.beforePos,", but previous block is not a block container"));t(e.tr.delete(n.blockContent.afterPos-1,r.blockContent.beforePos+1))}return!0}(n,r,a,o)}},_x=js.create({priority:50,addKeyboardShortcuts:function(){var e=this,t=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e.editor.commands.first((function(n){var r=n.commands;return[function(){return r.command((function(e){var t=e.state,n=eC(t);if(!n.isBlockContainer)return!1;var o=n.bnBlock,i=n.blockContent,a=t.doc.resolve(o.beforePos).depth,s=0===t.selection.$anchor.parentOffset,u=t.selection.anchor===t.selection.head,l=0===i.node.childCount;return!!(s&&u&&l&&a>1)&&r.liftListItem("blockContainer")}))},function(){return r.command((function(n){var o,i=eC(n.state),a=null!==(o=e.options.editor.schema.blockSchema[i.blockNoteType].hardBreakShortcut)&&void 0!==o?o:"shift+enter";return"none"!==a&&!!("shift+enter"===a&&t||"enter"===a)&&r.insertContent({type:"hardBreak"})}))},function(){return r.command((function(e){var t=e.state,n=e.dispatch,r=eC(t);if(!r.isBlockContainer)return!1;var o=r.bnBlock,i=r.blockContent,a=0===t.selection.$anchor.parentOffset,s=t.selection.anchor===t.selection.head,u=0===i.node.childCount;if(a&&s&&u){var l=o.afterPos,c=l+2;if(n){var d=t.schema.nodes.blockContainer.createAndFill();t.tr.insert(l,d).scrollIntoView(),t.tr.setSelection(new pn(t.doc.resolve(c)))}return!0}return!1}))},function(){return r.command((function(e){var t=e.state,n=e.chain,r=eC(t);if(!r.isBlockContainer)return!1;var o=r.blockContent,i=0===t.selection.$anchor.parentOffset;return 0!==o.node.childCount&&(n().deleteSelection().command(kk(t.selection.from,i,i)).run(),!0)}))}]}))};return{Backspace:function(){return e.editor.commands.first((function(e){var t=e.chain,n=e.commands;return[function(){return n.deleteSelection()},function(){return n.undoInputRule()},function(){return n.command((function(e){var t=e.state,r=eC(t);if(!r.isBlockContainer)return!1;var o=t.selection.from===r.blockContent.beforePos+1,i="paragraph"===r.blockContent.node.type.name;return!(!o||i)&&n.command(RC(r.bnBlock.beforePos,{type:"paragraph",props:{}}))}))},function(){return n.command((function(e){var t=e.state,r=eC(t);if(!r.isBlockContainer)return!1;var o=r.blockContent;return t.selection.from===o.beforePos+1&&n.liftListItem("blockContainer")}))},function(){return n.command((function(e){var n=e.state,r=eC(n);if(!r.isBlockContainer)return!1;var o=r.bnBlock,i=r.blockContent,a=n.selection.from===i.beforePos+1,s=n.selection.empty,u=o.beforePos;return!(!a||!s)&&t().command(jx(u)).scrollIntoView().run()}))},function(){return n.command((function(e){var t=e.state,n=e.dispatch,r=eC(t);if(!r.isBlockContainer||t.selection.from!==r.blockContent.beforePos+1||Tx(t.doc,r.bnBlock.beforePos))return!1;var o=Px(t.doc,r.bnBlock.beforePos);if("column"!==(null==o?void 0:o.blockNoteType))return!1;var i=o,a=Px(t.doc,i.bnBlock.beforePos);if("columnList"!==(null==a?void 0:a.blockNoteType))throw new Error("parent of column is not a column list");var s=1===i.childContainer.node.childCount,u=s&&2===a.childContainer.node.childCount,l=a.childContainer.node.firstChild===i.bnBlock.node;if(n){var c=t.doc.slice(r.bnBlock.beforePos,r.bnBlock.afterPos,!1);if(u)if(l){t.tr.step(new wt(a.bnBlock.beforePos,a.bnBlock.afterPos,i.bnBlock.afterPos+1,a.bnBlock.afterPos-2,c,c.size,!1));var d=t.tr.doc.resolve(i.bnBlock.beforePos);t.tr.setSelection(pn.between(d,d))}else{t.tr.step(new wt(a.bnBlock.beforePos,a.bnBlock.afterPos,a.bnBlock.beforePos+2,i.bnBlock.beforePos-1,c,0,!1));var f=t.tr.doc.resolve(t.tr.mapping.map(i.bnBlock.beforePos-1));t.tr.setSelection(pn.between(f,f))}else if(s)if(l){t.tr.delete(i.bnBlock.beforePos,i.bnBlock.afterPos),t.tr.insert(a.bnBlock.beforePos,c.content);var p=t.tr.doc.resolve(a.bnBlock.beforePos);t.tr.setSelection(pn.between(p,p))}else t.tr.delete(i.bnBlock.beforePos-1,i.bnBlock.beforePos+1);else{t.tr.delete(r.bnBlock.beforePos,r.bnBlock.afterPos),l?t.tr.insert(a.bnBlock.beforePos-1,c.content):t.tr.insert(i.bnBlock.beforePos-1,c.content);var h=t.tr.doc.resolve(i.bnBlock.beforePos-1);t.tr.setSelection(pn.between(h,h))}}return!0}))},function(){return n.command((function(e){var n=e.state,r=eC(n);if(!r.isBlockContainer)return!1;if(0===r.blockContent.node.childCount&&"inline*"===r.blockContent.node.type.spec.content){var o=Tx(n.doc,r.bnBlock.beforePos);if(!o||!o.isBlockContainer)return!1;var i=t();if("tableRow+"===o.blockContent.node.type.spec.content){var a=r.bnBlock.beforePos-1-1-1-1-1;i=i.setTextSelection(a)}else if(""===o.blockContent.node.type.spec.content){var s=o.blockContent.afterPos-o.blockContent.node.nodeSize;i=i.setNodeSelection(s)}else{var u=o.blockContent.afterPos-o.blockContent.node.nodeSize;i=i.setTextSelection(u)}return i.deleteRange({from:r.bnBlock.beforePos,to:r.bnBlock.afterPos}).scrollIntoView().run()}return!1}))},function(){return n.command((function(e){var n=e.state,r=eC(n);if(!r.isBlockContainer)throw new Error("todo");var o=n.selection.from===r.blockContent.beforePos+1,i=n.selection.empty,a=Tx(n.doc,r.bnBlock.beforePos);if(a&&o&&i){var s=Nx(n.doc,a);if(!s.isBlockContainer)throw new Error("todo");if(""===s.blockContent.node.type.spec.content||"inline*"===s.blockContent.node.type.spec.content&&0===s.blockContent.node.childCount)return t().cut({from:r.bnBlock.beforePos,to:r.bnBlock.afterPos},s.bnBlock.afterPos).deleteRange({from:s.bnBlock.beforePos,to:s.bnBlock.afterPos}).run()}return!1}))}]}))},Delete:function(){return e.editor.commands.first((function(e){var t=e.commands;return[function(){return t.deleteSelection()},function(){return t.command((function(e){var n=e.state,r=eC(n);if(!r.isBlockContainer)return!1;var o=r.bnBlock,i=r.blockContent,a=r.childContainer,s=n.doc.resolve(o.beforePos).depth,u=o.afterPos===n.doc.nodeSize-3,l=n.selection.from===i.afterPos-1,c=n.selection.empty;if(!u&&l&&c&&void 0===a){for(var d=s,f=o.afterPos+1,p=n.doc.resolve(f).depth;p<d;)d=p,f+=2,p=n.doc.resolve(f).depth;return t.command(jx(f-1))}return!1}))}]}))},Enter:function(){return t()},"Shift-Enter":function(){return t(!0)},Tab:function(){var t,n,r;return("prefer-indent"===e.options.tabBehavior||!(null!=(t=e.options.editor.formattingToolbar)&&t.shown||null!=(n=e.options.editor.linkToolbar)&&n.shown||null!=(r=e.options.editor.filePanel)&&r.shown))&&kE(e.options.editor)},"Shift-Tab":function(){var t,n,r;return!("prefer-indent"!==e.options.tabBehavior&&(null!=(t=e.options.editor.formattingToolbar)&&t.shown||null!=(n=e.options.editor.linkToolbar)&&n.shown||null!=(r=e.options.editor.filePanel)&&r.shown)||(e.editor.commands.liftListItem("blockContainer"),0))},"Shift-Mod-ArrowUp":function(){return e.options.editor.moveBlocksUp(),!0},"Shift-Mod-ArrowDown":function(){return e.options.editor.moveBlocksDown(),!0},"Mod-z":function(){return e.options.editor.undo()},"Mod-y":function(){return e.options.editor.redo()},"Shift-Mod-z":function(){return e.options.editor.redo()}}}}),Rx=function(){return iw((function e(t,n,r){var o=this;aw(this,e),bw(this,"state"),bw(this,"emitUpdate"),bw(this,"menuUpdateTimer"),bw(this,"startMenuUpdateTimer"),bw(this,"stopMenuUpdateTimer"),bw(this,"mouseHoveredLinkMark"),bw(this,"mouseHoveredLinkMarkRange"),bw(this,"keyboardHoveredLinkMark"),bw(this,"keyboardHoveredLinkMarkRange"),bw(this,"linkMark"),bw(this,"linkMarkRange"),bw(this,"mouseOverHandler",(function(e){if(o.mouseHoveredLinkMark=void 0,o.mouseHoveredLinkMarkRange=void 0,o.stopMenuUpdateTimer(),e.target instanceof HTMLAnchorElement&&"A"===e.target.nodeName){var t,n=e.target,r=o.pmView.posAtDOM(n,0)+1,i=o.pmView.state.doc.resolve(r),a=YD(i.marks());try{for(a.s();!(t=a.n()).done;){var s=t.value;if(s.type.name===o.pmView.state.schema.mark("link").type.name){o.mouseHoveredLinkMark=s,o.mouseHoveredLinkMarkRange=Vs(i,s.type,s.attrs)||void 0;break}}}catch(e){a.e(e)}finally{a.f()}}return o.startMenuUpdateTimer(),!1})),bw(this,"clickHandler",(function(e){var t,n=o.pmView.dom.parentElement;o.linkMark&&e&&e.target&&n!==e.target&&!n.contains(e.target)&&null!=(t=o.state)&&t.show&&(o.state.show=!1,o.emitUpdate())})),bw(this,"scrollHandler",(function(){var e;void 0!==o.linkMark&&null!=(e=o.state)&&e.show&&(o.state.referencePos=gu(o.pmView,o.linkMarkRange.from,o.linkMarkRange.to),o.emitUpdate())})),bw(this,"closeMenu",(function(){var e;null!=(e=o.state)&&e.show&&(o.state.show=!1,o.emitUpdate())})),this.editor=t,this.pmView=n,this.emitUpdate=function(){if(!o.state)throw new Error("Attempting to update uninitialized link toolbar");r(o.state)},this.startMenuUpdateTimer=function(){o.menuUpdateTimer=setTimeout((function(){o.update(o.pmView,void 0,!0)}),250)},this.stopMenuUpdateTimer=function(){return o.menuUpdateTimer&&(clearTimeout(o.menuUpdateTimer),o.menuUpdateTimer=void 0),!1},this.pmView.dom.addEventListener("mouseover",this.mouseOverHandler),this.pmView.root.addEventListener("click",this.clickHandler,!0),this.pmView.root.addEventListener("scroll",this.scrollHandler,!0)}),[{key:"editLink",value:function(e,t){var n,r=this;this.editor.transact((function(n){var o=nC(n);n.insertText(t,r.linkMarkRange.from,r.linkMarkRange.to),n.addMark(r.linkMarkRange.from,r.linkMarkRange.from+t.length,o.mark("link",{href:e}))})),this.pmView.focus(),null!=(n=this.state)&&n.show&&(this.state.show=!1,this.emitUpdate())}},{key:"deleteLink",value:function(){var e,t=this;this.editor.transact((function(e){return e.removeMark(t.linkMarkRange.from,t.linkMarkRange.to,t.linkMark.type).setMeta("preventAutolink",!0)})),this.pmView.focus(),null!=(e=this.state)&&e.show&&(this.state.show=!1,this.emitUpdate())}},{key:"update",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.state;if((!t||t.selection.from!==o.selection.from||t.selection.to!==o.selection.to)&&this.pmView.hasFocus()){var i=this.linkMark;if(this.linkMark=void 0,this.linkMarkRange=void 0,this.keyboardHoveredLinkMark=void 0,this.keyboardHoveredLinkMarkRange=void 0,this.pmView.state.selection.empty){var a,s=YD(this.pmView.state.selection.$from.marks());try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.type.name===this.pmView.state.schema.mark("link").type.name){this.keyboardHoveredLinkMark=u,this.keyboardHoveredLinkMarkRange=Vs(this.pmView.state.selection.$from,u.type,u.attrs)||void 0;break}}}catch(e){s.e(e)}finally{s.f()}}return this.mouseHoveredLinkMark&&r&&(this.linkMark=this.mouseHoveredLinkMark,this.linkMarkRange=this.mouseHoveredLinkMarkRange),this.keyboardHoveredLinkMark&&(this.linkMark=this.keyboardHoveredLinkMark,this.linkMarkRange=this.keyboardHoveredLinkMarkRange),this.linkMark&&this.editor.isEditable?(this.state={show:!0,referencePos:gu(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),url:this.linkMark.attrs.href,text:this.pmView.state.doc.textBetween(this.linkMarkRange.from,this.linkMarkRange.to)},void this.emitUpdate()):null==(n=this.state)||!n.show||!i||this.linkMark&&this.editor.isEditable?void 0:(this.state.show=!1,void this.emitUpdate())}}},{key:"destroy",value:function(){this.pmView.dom.removeEventListener("mouseover",this.mouseOverHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0),this.pmView.root.removeEventListener("click",this.clickHandler,!0)}}])}(),Lx=new Bn("LinkToolbarPlugin"),Ix=function(e){function t(e){var n;return aw(this,t),n=sw(this,t),bw(n,"view"),bw(n,"editLink",(function(e,t){n.view.editLink(e,t)})),bw(n,"deleteLink",(function(){n.view.deleteLink()})),bw(n,"startHideTimer",(function(){n.view.startMenuUpdateTimer()})),bw(n,"stopHideTimer",(function(){n.view.stopMenuUpdateTimer()})),bw(n,"closeMenu",(function(){return n.view.closeMenu()})),n.addProsemirrorPlugin(new Fn({key:Lx,view:function(t){return n.view=new Rx(e,t,(function(e){n.emit("update",e)})),n.view},props:{handleKeyDown:function(e,t){return!("Escape"!==t.key||!n.shown||(n.view.closeMenu(),0))}}})),n}return uw(t,e),iw(t,[{key:"onUpdate",value:function(e){return this.on("update",e)}},{key:"shown",get:function(){var e,t;return(null==(t=null==(e=this.view)?void 0:e.state)?void 0:t.show)||!1}}],[{key:"key",value:function(){return"linkToolbar"}}])}(vx),Hx=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"],zx="https",Vx=new Bn("node-selection-keyboard"),$x=function(e){function t(){var e;return aw(this,t),(e=sw(this,t)).addProsemirrorPlugin(new Fn({key:Vx,props:{handleKeyDown:function(e,t){if("node"in e.state.selection){if(t.ctrlKey||t.metaKey)return!1;if(1===t.key.length)return t.preventDefault(),!0;if(!("Enter"!==t.key||t.shiftKey||t.altKey||t.ctrlKey||t.metaKey)){var n=e.state.tr;return e.dispatch(n.insert(e.state.tr.selection.$to.after(),e.state.schema.nodes.paragraph.createChecked()).setSelection(new pn(n.doc.resolve(e.state.tr.selection.$to.after()+1)))),!0}}return!1}}})),e}return uw(t,e),iw(t,null,[{key:"key",value:function(){return"nodeSelectionKeyboard"}}])}(vx),Ux=new Bn("blocknote-placeholder"),Gx=function(e){function t(e,n){var r;return aw(this,t),(r=sw(this,t)).addProsemirrorPlugin(new Fn({key:Ux,view:function(t){var r,o,i="placeholder-selector-".concat(Uu());t.dom.classList.add(i);var a=document.createElement("style"),s=e._tiptapEditor.options.injectNonce;s&&a.setAttribute("nonce",s),(null==(r=e.prosemirrorView)?void 0:r.root)instanceof ShadowRoot?e.prosemirrorView.root.append(a):null==(o=e.prosemirrorView)||o.root.head.appendChild(a);var u=a.sheet,l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return".".concat(i," .bn-block-content").concat(e," .bn-inline-content:has(> .ProseMirror-trailingBreak:only-child):before")};try{for(var c=n.default,d=n.emptyDocument,f=rw(n,qD),p=0,h=Object.entries(f);p<h.length;p++){var m=ew(h[p],2),v=m[0],g=m[1],y='[data-content-type="'.concat(v,'"]');u.insertRule("".concat(l(y)," { content: ").concat(JSON.stringify(g),"; }"))}u.insertRule("".concat(l("[data-is-only-empty-block]")," { content: ").concat(JSON.stringify(d),"; }")),u.insertRule("".concat(l("[data-is-empty-and-focused]")," { content: ").concat(JSON.stringify(c),"; }"))}catch(c){console.warn("Failed to insert placeholder CSS rule - this is likely due to the browser not supporting certain CSS pseudo-element selectors (:has, :only-child:, or :before)",c)}return{destroy:function(){var t,n;(null==(t=e.prosemirrorView)?void 0:t.root)instanceof ShadowRoot?e.prosemirrorView.root.removeChild(a):null==(n=e.prosemirrorView)||n.root.head.removeChild(a)}}},props:{decorations:function(t){var n=t.doc,r=t.selection;if(e.isEditable&&r.empty&&!r.$from.parent.type.spec.code){var o=[];6===t.doc.content.size&&o.push(Ai.node(2,4,{"data-is-only-empty-block":"true"}));var i=r.$anchor,a=i.parent;if(0===a.content.size){var s=i.before();o.push(Ai.node(s,s+a.nodeSize,{"data-is-empty-and-focused":"true"}))}return Mi.create(n,o)}}}})),r}return uw(t,e),iw(t,null,[{key:"key",value:function(){return"placeholder"}}])}(vx),Wx=new Bn("previous-blocks"),qx={index:"index",level:"level",type:"type",depth:"depth","depth-change":"depth-change"},Kx=function(e){function t(){var e,n;return aw(this,t),(e=sw(this,t)).addProsemirrorPlugin(new Fn({key:Wx,view:function(e){var t,r=this;return{update:(t=ZD(KD().mark((function e(t,o){var i;return KD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null==(i=r.key)?void 0:i.getState(t.state).updatedBlocks.size)>0&&(n=setTimeout((function(){t.dispatch(t.state.tr.setMeta(Wx,{clearUpdate:!0}))}),0));case 1:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)}),destroy:function(){n&&clearTimeout(n)}}},state:{init:function(){return{prevTransactionOldBlockAttrs:{},currentTransactionOldBlockAttrs:{},updatedBlocks:new Set}},apply:function(e,t,n,r){if(t.currentTransactionOldBlockAttrs={},t.updatedBlocks.clear(),!e.docChanged||n.doc.eq(r.doc))return t;var o,i={},a=au(n.doc,(function(e){return e.attrs.id})),s=new Map(a.map((function(e){return[e.node.attrs.id,e]}))),u=au(r.doc,(function(e){return e.attrs.id})),l=YD(u);try{for(l.s();!(o=l.n()).done;){var c=o.value,d=s.get(c.node.attrs.id),f=null==d?void 0:d.node.firstChild,p=c.node.firstChild;if(d&&f&&p){var h={index:p.attrs.index,level:p.attrs.level,type:p.type.name,depth:r.doc.resolve(c.pos).depth},m={index:f.attrs.index,level:f.attrs.level,type:f.type.name,depth:n.doc.resolve(d.pos).depth};i[c.node.attrs.id]=m,e.getMeta("numberedListIndexing")&&(c.node.attrs.id in t.prevTransactionOldBlockAttrs&&(m=t.prevTransactionOldBlockAttrs[c.node.attrs.id]),"numberedListItem"===h.type&&(m.index=h.index)),t.currentTransactionOldBlockAttrs[c.node.attrs.id]=m,JSON.stringify(m)!==JSON.stringify(h)&&(m["depth-change"]=m.depth-h.depth,t.updatedBlocks.add(c.node.attrs.id))}}}catch(e){l.e(e)}finally{l.f()}return t.prevTransactionOldBlockAttrs=i,t}},props:{decorations:function(e){var t=this.getState(e);if(0!==t.updatedBlocks.size){var n=[];return e.doc.descendants((function(e,r){if(e.attrs.id&&t.updatedBlocks.has(e.attrs.id)){for(var o=t.currentTransactionOldBlockAttrs[e.attrs.id],i={},a=0,s=Object.entries(o);a<s.length;a++){var u=ew(s[a],2),l=u[0],c=u[1];i["data-prev-"+qx[l]]=c||"none"}var d=Ai.node(r,r+e.nodeSize,hw({},i));n.push(d)}})),Mi.create(e.doc,n)}}}})),e}return uw(t,e),iw(t,null,[{key:"key",value:function(){return"previousBlockType"}}])}(vx),Jx=new Bn("blocknote-show-selection"),Zx=function(e){function t(e){var n;return aw(this,t),n=sw(this,t),bw(n,"enabled",!1),n.editor=e,n.addProsemirrorPlugin(new Fn({key:Jx,props:{decorations:function(e){var t=e.doc,r=e.selection;if(!n.enabled)return Mi.empty;var o=Ai.inline(r.from,r.to,{"data-show-selection":"true"});return Mi.create(t,[o])}}})),n}return uw(t,e),iw(t,[{key:"setEnabled",value:function(e){this.enabled!==e&&(this.enabled=e,this.editor.transact((function(e){return e.setMeta(Jx,{})})))}},{key:"getEnabled",value:function(){return this.enabled}}],[{key:"key",value:function(){return"showSelection"}}])}(vx);function Xx(e,t){for(var n,r;e&&e.parentElement&&e.parentElement!==t.dom&&"blockContainer"!==(null==(n=e.getAttribute)?void 0:n.call(e,"data-node-type"));)e=e.parentElement;if("blockContainer"===(null==(r=e.getAttribute)?void 0:r.call(e,"data-node-type")))return{node:e,id:e.getAttribute("data-id")}}var Yx,Qx=function(e){function t(e,n){var r;aw(this,t),r=sw(this,t,[e,n]),bw(r,"nodes");var o=e.node();return r.nodes=[],e.doc.nodesBetween(e.pos,n.pos,(function(e,t,n){if(null!==n&&n.eq(o))return r.nodes.push(e),!1})),r}return uw(t,e),iw(t,[{key:"content",value:function(){return new J($.from(this.nodes),0,0)}},{key:"eq",value:function(e){if(!(e instanceof t)||this.nodes.length!==e.nodes.length||this.from!==e.from||this.to!==e.to)return!1;for(var n=0;n<this.nodes.length;n++)if(!this.nodes[n].eq(e.nodes[n]))return!1;return!0}},{key:"map",value:function(e,n){var r=n.mapResult(this.from),o=n.mapResult(this.to);return o.deleted?ln.near(e.resolve(r.pos)):r.deleted?ln.near(e.resolve(o.pos)):new t(e.resolve(r.pos),e.resolve(o.pos))}},{key:"toJSON",value:function(){return{type:"multiple-node",anchor:this.anchor,head:this.head}}}],[{key:"create",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;return new t(e.resolve(n),e.resolve(r))}}])}(ln);function eS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;t===n&&(n+=e.state.doc.resolve(t+1).node().nodeSize);for(var r=e.domAtPos(t).node.cloneNode(!0),o=e.domAtPos(t).node,i=function(e,t){return Array.prototype.indexOf.call(e.children,t)},a=i(o,e.domAtPos(t+1).node.parentElement),s=i(o,e.domAtPos(n-1).node.parentElement),u=o.childElementCount-1;u>=0;u--)(u>s||u<a)&&r.removeChild(r.children[u]);tS(e.root);for(var l=(Yx=r).getElementsByTagName("iframe"),c=0;c<l.length;c++){var d=l[c],f=d.parentElement;f&&f.removeChild(d)}var p=e.dom.className.split(" ").filter((function(e){return"ProseMirror"!==e&&"bn-root"!==e&&"bn-editor"!==e})).join(" ");Yx.className=Yx.className+" bn-drag-preview "+p,e.root instanceof ShadowRoot?e.root.appendChild(Yx):e.root.body.appendChild(Yx)}function tS(e){void 0!==Yx&&(e instanceof ShadowRoot?e.removeChild(Yx):e.body.removeChild(Yx),Yx=void 0)}ln.jsonID("multiple-node",Qx);var nS=.1;function rS(e,t,n){var r,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=YD(e.root.elementsFromPoint(t.left+("editor"===n?50:0),t.top));try{for(i.s();!(r=i.n()).done;){var a=r.value;if(e.dom.contains(a))return o&&a.closest("[data-node-type=columnList]")?rS(e,{left:t.left+50,top:t.top},n,!1):Xx(a,e)}}catch(e){i.e(e)}finally{i.f()}}var oS=function(){return iw((function e(t,n,r,o){var i=this;aw(this,e),bw(this,"state"),bw(this,"emitUpdate"),bw(this,"mousePos"),bw(this,"hoveredBlock"),bw(this,"menuFrozen",!1),bw(this,"isDragOrigin",!1),bw(this,"updateState",(function(e){i.state=e,i.emitUpdate(i.state)})),bw(this,"updateStateFromMousePos",(function(){var e,t,n,r;if(!i.menuFrozen&&i.mousePos){var o=function(e,t,n){if(t.dom.firstChild){var r=t.dom.firstChild.getBoundingClientRect(),o={left:e.x,top:e.y},i=o.left<r.left,a=o.left>r.right;"viewport"===n&&(i&&(o.left=r.left+10),a&&(o.left=r.right-10));var s=rS(t,o,n);if(!a&&s){var u=s.node.getBoundingClientRect();o.left=u.right-10,s=rS(t,o,"viewport",!1)}return s}}(i.mousePos,i.pmView,i.sideMenuDetection);if(o&&i.editor.isEditable){if(null==(t=i.state)||!t.show||null==(n=i.hoveredBlock)||!n.hasAttribute("data-id")||(null==(r=i.hoveredBlock)?void 0:r.getAttribute("data-id"))!==o.id){i.hoveredBlock=o.node;var a=o.node.firstChild;if(a&&i.editor.isEditable){var s=a.getBoundingClientRect(),u=o.node.closest("[data-node-type=column]");i.updateState({show:!0,referencePos:new DOMRect(u?u.firstElementChild.getBoundingClientRect().x:i.pmView.dom.firstChild.getBoundingClientRect().x,s.y,s.width,s.height),block:i.editor.getBlock(i.hoveredBlock.getAttribute("data-id"))})}}}else null!=(e=i.state)&&e.show&&(i.state.show=!1,i.updateState(i.state))}})),bw(this,"onDrop",(function(e){var t,n;if(null!==i.pmView.dragging){i.editor._tiptapEditor.commands.blur();var r=e.target instanceof Node&&(null==(t=e.target instanceof HTMLElement?e.target:e.target.parentElement)?void 0:t.closest(".bn-editor"))||null;if(r&&(i.isDragOrigin||i.pmView.dom!==r?i.isDragOrigin&&i.pmView.dom!==r&&setTimeout((function(){return i.pmView.dispatch(i.pmView.state.tr.deleteSelection())}),0):i.pmView.dispatch(i.pmView.state.tr.setSelection(pn.create(i.pmView.state.tr.doc,i.pmView.state.tr.selection.to)))),"editor"!==i.sideMenuDetection&&!e.synthetic&&null!=(n=e.dataTransfer)&&n.types.includes("blocknote/html")){var o=i.pmView.posAtCoords({left:e.clientX,top:e.clientY});if(!o||-1===o.inside){var a=i.createSyntheticEvent(e);i.pmView.dom.dispatchEvent(a)}}}})),bw(this,"onDragEnd",(function(){i.pmView.dragging=null})),bw(this,"onDragStart",(function(e){var t,n=null==(t=e.dataTransfer)?void 0:t.getData("blocknote/html");if(n){if(i.pmView.dragging)throw new Error("New drag was started while an existing drag is ongoing");var r=document.createElement("div");r.innerHTML=n;var o=je.fromSchema(i.pmView.state.schema).parse(r,{topNode:i.pmView.state.schema.nodes.blockGroup.create()});i.pmView.dragging={slice:new J(o.content,0,0),move:!0}}})),bw(this,"onDragOver",(function(e){var t;if("editor"!==i.sideMenuDetection&&!e.synthetic&&null!=(t=e.dataTransfer)&&t.types.includes("blocknote/html")){var n=i.pmView.posAtCoords({left:e.clientX,top:e.clientY});if(!n||-1===n.inside&&i.pmView.dom.firstChild){var r=i.createSyntheticEvent(e);i.pmView.dom.dispatchEvent(r)}}})),bw(this,"onKeyDown",(function(e){var t;null!=(t=i.state)&&t.show&&i.editor.isFocused()&&(i.state.show=!1,i.emitUpdate(i.state))})),bw(this,"onMouseMove",(function(e){var t;if(!i.menuFrozen){i.mousePos={x:e.clientX,y:e.clientY};var n=i.pmView.dom.getBoundingClientRect(),r=i.mousePos.x>n.left&&i.mousePos.x<n.right&&i.mousePos.y>n.top&&i.mousePos.y<n.bottom,o=i.pmView.dom.parentElement;r&&e&&e.target&&o!==e.target&&!o.contains(e.target)?null!=(t=i.state)&&t.show&&(i.state.show=!1,i.emitUpdate(i.state)):i.updateStateFromMousePos()}})),bw(this,"onScroll",(function(){var e;null!=(e=i.state)&&e.show&&(i.state.referencePos=i.hoveredBlock.getBoundingClientRect(),i.emitUpdate(i.state))})),this.editor=t,this.sideMenuDetection=n,this.pmView=r,this.emitUpdate=function(){if(!i.state)throw new Error("Attempting to update uninitialized side menu");o(i.state)},this.pmView.root.addEventListener("dragstart",this.onDragStart),this.pmView.root.addEventListener("dragover",this.onDragOver),this.pmView.root.addEventListener("drop",this.onDrop,!0),this.pmView.root.addEventListener("dragend",this.onDragEnd,!0),xE(),this.pmView.root.addEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.addEventListener("keydown",this.onKeyDown,!0),r.root.addEventListener("scroll",this.onScroll,!0)}),[{key:"createSyntheticEvent",value:function(e){var t=new Event(e.type,e),n=this.pmView.dom.firstChild.getBoundingClientRect();return t.clientX=e.clientX,t.clientY=e.clientY,e.clientX<n.left&&e.clientX>n.left-n.width*nS?t.clientX=n.left+n.width*nS/2:e.clientX>n.right&&e.clientX<n.right+n.width*nS?t.clientX=n.right-n.width*nS/2:(e.clientX<n.left||e.clientX>n.right)&&(t.clientX=n.left+nS*n.width*2),t.clientY=Math.min(Math.max(e.clientY,n.top),n.top+n.height),t.dataTransfer=e.dataTransfer,t.preventDefault=function(){return e.preventDefault()},t.synthetic=!0,t}},{key:"update",value:function(e,t){var n;!t.doc.eq(this.pmView.state.doc)&&null!=(n=this.state)&&n.show&&this.updateStateFromMousePos()}},{key:"destroy",value:function(){var e;null!=(e=this.state)&&e.show&&(this.state.show=!1,this.emitUpdate(this.state)),this.pmView.root.removeEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.removeEventListener("dragstart",this.onDragStart),this.pmView.root.removeEventListener("dragover",this.onDragOver),this.pmView.root.removeEventListener("drop",this.onDrop,!0),this.pmView.root.removeEventListener("dragend",this.onDragEnd,!0),this.pmView.root.removeEventListener("keydown",this.onKeyDown,!0),this.pmView.root.removeEventListener("scroll",this.onScroll,!0)}}])}(),iS=new Bn("SideMenuPlugin"),aS=function(e){function t(e,n){var r;return aw(this,t),r=sw(this,t),bw(r,"view"),bw(r,"blockDragStart",(function(e,t){r.view&&(r.view.isDragOrigin=!0),function(e,t,n){if(e.dataTransfer){var r=n.prosemirrorView;if(r){var o=TC(t.id,r.state.doc);if(!o)throw new Error("Block with ID ".concat(t.id," not found"));var i=o.posBeforeNode;if(null!=i){var a=r.state.selection,s=r.state.doc,u=function(e,t){var n,r,o="blockContent"===t.resolve(e.from).node().type.spec.group,i="blockContent"===t.resolve(e.to).node().type.spec.group,a=Math.min(e.$anchor.depth,e.$head.depth);if(o&&i){var s=e.$from.start(a-1),u=e.$to.end(a-1);n=t.resolve(s-1).pos,r=t.resolve(u+1).pos}else n=e.from,r=e.to;return{from:n,to:r}}(a,s),l=u.from,c=u.to,d=l<=i&&i<c,f=a.$anchor.node()!==a.$head.node()||a instanceof Qx;d&&f?(r.dispatch(r.state.tr.setSelection(Qx.create(s,l,c))),eS(r,l,c)):(r.dispatch(r.state.tr.setSelection(mn.create(r.state.doc,i))),eS(r,i));var p=r.state.selection.content(),h=n.pmSchema,m=r.serializeForClipboard(p).dom.innerHTML,v=UC(h,n),g=lx(p.content),y=v.exportBlocks(g,{}),b=OE(y);e.dataTransfer.clearData(),e.dataTransfer.setData("blocknote/html",m),e.dataTransfer.setData("text/html",y),e.dataTransfer.setData("text/plain",b),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(Yx,0,0)}}}}(e,t,r.editor)})),bw(r,"blockDragEnd",(function(){r.editor.prosemirrorView&&tS(r.editor.prosemirrorView.root),r.view&&(r.view.isDragOrigin=!1)})),bw(r,"freezeMenu",(function(){r.view.menuFrozen=!0,r.view.state.show=!0,r.view.emitUpdate(r.view.state)})),bw(r,"unfreezeMenu",(function(){r.view.menuFrozen=!1,r.view.state.show=!1,r.view.emitUpdate(r.view.state)})),r.editor=e,r.addProsemirrorPlugin(new Fn({key:iS,view:function(t){return r.view=new oS(e,n,t,(function(e){r.emit("update",e)})),r.view}})),r}return uw(t,e),iw(t,[{key:"onUpdate",value:function(e){return this.on("update",e)}}],[{key:"key",value:function(){return"sideMenu"}}])}(vx),sS=new Map;var uS,lS=uu((function(e){return"blockContainer"===e.type.name})),cS=function(){return iw((function e(t,n){var r,o,i=this;aw(this,e),bw(this,"state"),bw(this,"emitUpdate"),bw(this,"rootEl"),bw(this,"pluginState"),bw(this,"handleScroll",(function(){var e,t;if(null!=(e=i.state)&&e.show){var n=null==(t=i.rootEl)?void 0:t.querySelector('[data-decoration-id="'.concat(i.pluginState.decorationId,'"]'));if(!n)return;i.state.referencePos=n.getBoundingClientRect(),i.emitUpdate(i.pluginState.triggerCharacter)}})),bw(this,"closeMenu",(function(){i.editor.transact((function(e){return e.setMeta(dS,null)}))})),bw(this,"clearQuery",(function(){void 0!==i.pluginState&&i.editor._tiptapEditor.chain().focus().deleteRange({from:i.pluginState.queryStartPos()-(i.pluginState.deleteTriggerCharacter?i.pluginState.triggerCharacter.length:0),to:i.editor.transact((function(e){return e.selection.from}))}).run()})),this.editor=t,this.pluginState=void 0,this.emitUpdate=function(e){var t;if(!i.state)throw new Error("Attempting to update uninitialized suggestions menu");n(e,hw(hw({},i.state),{},{ignoreQueryLength:null==(t=i.pluginState)?void 0:t.ignoreQueryLength}))},this.rootEl=null==(r=this.editor.prosemirrorView)?void 0:r.root,null==(o=this.rootEl)||o.addEventListener("scroll",this.handleScroll,!0)}),[{key:"update",value:function(e,t){var n,r=dS.getState(t),o=dS.getState(e.state),i=void 0!==r&&void 0===o;if(void 0===r&&void 0!==o||void 0!==r&&void 0!==o||i){if(this.pluginState=i?r:o,i||!this.editor.isEditable)return this.state&&(this.state.show=!1),void this.emitUpdate(this.pluginState.triggerCharacter);var a=null==(n=this.rootEl)?void 0:n.querySelector('[data-decoration-id="'.concat(this.pluginState.decorationId,'"]'));this.editor.isEditable&&a&&(this.state={show:!0,referencePos:a.getBoundingClientRect(),query:this.pluginState.query},this.emitUpdate(this.pluginState.triggerCharacter))}}},{key:"destroy",value:function(){var e;null==(e=this.rootEl)||e.removeEventListener("scroll",this.handleScroll,!0)}}])}(),dS=new Bn("SuggestionMenuPlugin"),fS=function(e){function t(e){var n;aw(this,t),n=sw(this,t),bw(n,"view"),bw(n,"triggerCharacters",[]),bw(n,"addTriggerCharacter",(function(e){n.triggerCharacters.push(e)})),bw(n,"removeTriggerCharacter",(function(e){n.triggerCharacters=n.triggerCharacters.filter((function(t){return t!==e}))})),bw(n,"closeMenu",(function(){return n.view.closeMenu()})),bw(n,"clearQuery",(function(){return n.view.clearQuery()}));var r=n.triggerCharacters;return n.addProsemirrorPlugin(new Fn({key:dS,view:function(){return n.view=new cS(e,(function(e,t){n.emit("update ".concat(e),t)})),n.view},state:{init:function(){},apply:function(t,r,o,i){if(void 0!==t.getMeta("orderedListIndexing")||t.selection.$from.parent.type.spec.code)return r;var a=t.getMeta(dS);if("object"==gw(a)&&null!==a){r&&n.closeMenu();var s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",r=Pb.getState(e._tiptapEditor.state);if(!r){var o=function(e){if(sS.has(e))return sS.get(e);var t=new dt;return e._tiptapEditor.on("transaction",(function(e){var n=e.transaction;t.appendMapping(n.mapping)})),e._tiptapEditor.on("destroy",(function(){sS.delete(e)})),sS.set(e,t),t}(e),i=o.maps.length;return function(){return o.slice(i).map(t,"left"===n?-1:1)}}var a=$b(t+("right"===n?1:0),r.binding.type,r.binding.mapping);return function(){var t=Pb.getState(e._tiptapEditor.state),r=Gb(t.doc,t.binding.type,a,t.binding.mapping);if(null===r)throw new Error("Position not found, cannot track positions");return r+("right"===n?-1:0)}}(e,i.selection.from-a.triggerCharacter.length);return{triggerCharacter:a.triggerCharacter,deleteTriggerCharacter:!1!==a.deleteTriggerCharacter,queryStartPos:function(){return s()+a.triggerCharacter.length},query:"",decorationId:"id_".concat(Math.floor(4294967295*Math.random())),ignoreQueryLength:null==a?void 0:a.ignoreQueryLength}}if(void 0===r)return r;if(!(i.selection.from!==i.selection.to||null===a||t.getMeta("focus")||t.getMeta("blur")||t.getMeta("pointer")||void 0!==r.triggerCharacter&&i.selection.from<r.queryStartPos())&&i.selection.$from.sameParent(i.doc.resolve(r.queryStartPos()))){var u=hw({},r);return u.query=i.doc.textBetween(r.queryStartPos(),i.selection.from),u}}},props:{handleTextInput:function(e,t,n,o){return!!r.includes(o)&&(e.dispatch(e.state.tr.insertText(o)),e.dispatch(e.state.tr.setMeta(dS,{triggerCharacter:o}).scrollIntoView()),!0)},decorations:function(e){var t=this.getState(e);if(void 0===t)return null;if(!t.deleteTriggerCharacter){var n=lS(e.selection);if(n)return Mi.create(e.doc,[Ai.node(n.pos,n.pos+n.node.nodeSize,{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":t.decorationId})])}return Mi.create(e.doc,[Ai.inline(t.queryStartPos()-t.triggerCharacter.length,t.queryStartPos(),{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":t.decorationId})])}}})),n}return uw(t,e),iw(t,[{key:"onUpdate",value:function(e,t){return this.triggerCharacters.includes(e)||this.addTriggerCharacter(e),this.on("update ".concat(e),t)}},{key:"shown",get:function(){var e,t;return(null==(t=null==(e=this.view)?void 0:e.state)?void 0:t.show)||!1}}],[{key:"key",value:function(){return"suggestionMenu"}}])}(vx),pS=Ms.create({name:"insertion",inclusive:!1,excludes:"deletion modification insertion",addAttributes:function(){return{id:{default:null,validate:"number"}}},extendMarkSchema:function(e){return"insertion"!==e.name?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM:function(e,t){return["ins",hw({"data-id":String(e.attrs.id),"data-inline":String(t)},!t&&{style:"display: contents"}),0]},parseDOM:[{tag:"ins",getAttrs:function(e){return!!e.dataset.id&&{id:parseInt(e.dataset.id,10)}}}]}}}),hS=Ms.create({name:"deletion",inclusive:!1,excludes:"insertion modification deletion",addAttributes:function(){return{id:{default:null,validate:"number"}}},extendMarkSchema:function(e){return"deletion"!==e.name?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM:function(e,t){return["del",hw({"data-id":String(e.attrs.id),"data-inline":String(t)},!t&&{style:"display: contents"}),0]},parseDOM:[{tag:"del",getAttrs:function(e){return!!e.dataset.id&&{id:parseInt(e.dataset.id,10)}}}]}}}),mS=Ms.create({name:"modification",inclusive:!1,excludes:"deletion insertion",addAttributes:function(){return{id:{default:null,validate:"number"},type:{validate:"string"},attrName:{default:null,validate:"string|null"},previousValue:{default:null},newValue:{default:null}}},extendMarkSchema:function(e){return"modification"!==e.name?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM:function(e,t){return[t?"span":"div",{"data-type":"modification","data-id":String(e.attrs.id),"data-mod-type":e.attrs.type,"data-mod-prev-val":JSON.stringify(e.attrs.previousValue),"data-mod-new-val":JSON.stringify(e.attrs.newValue)},0]},parseDOM:[{tag:"span[data-type='modification']",getAttrs:function(e){return!!e.dataset.id&&{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal,newValue:e.dataset.modNewVal}}},{tag:"div[data-type='modification']",getAttrs:function(e){return!!e.dataset.id&&{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal}}}]}}});function vS(e){uS||((uS=document.createElement("div")).innerHTML="_",uS.style.opacity="0",uS.style.height="1px",uS.style.width="1px",e instanceof Document?e.body.appendChild(uS):e.appendChild(uS))}function gS(e){return Array.prototype.indexOf.call(e.parentElement.childNodes,e)}var yS=function(){return iw((function e(t,n,r){var o=this;aw(this,e),bw(this,"state"),bw(this,"emitUpdate"),bw(this,"tableId"),bw(this,"tablePos"),bw(this,"tableElement"),bw(this,"menuFrozen",!1),bw(this,"mouseState","up"),bw(this,"prevWasEditable",null),bw(this,"viewMousedownHandler",(function(){o.mouseState="down"})),bw(this,"mouseUpHandler",(function(e){o.mouseState="up",o.mouseMoveHandler(e)})),bw(this,"mouseMoveHandler",(function(e){var t,n,r,i,a,s,u;if(!o.menuFrozen&&"selecting"!==o.mouseState&&e.target instanceof Element&&o.pmView.dom.contains(e.target)){var l=function(e){for(var t=e;t&&"TD"!==t.nodeName&&"TH"!==t.nodeName&&!t.classList.contains("tableWrapper");){if(t.classList.contains("ProseMirror"))return;var n=t.parentNode;if(!(n&&n instanceof Element))return;t=n}return"TD"===t.nodeName||"TH"===t.nodeName?{type:"cell",domNode:t,tbodyNode:t.closest("tbody")}:{type:"wrapper",domNode:t,tbodyNode:t.querySelector("tbody")}}(e.target);if("cell"===(null==l?void 0:l.type)&&"down"===o.mouseState&&(null==(t=o.state)||!t.draggingState))return o.mouseState="selecting",void(null!=(n=o.state)&&n.show&&(o.state.show=!1,o.state.showAddOrRemoveRowsButton=!1,o.state.showAddOrRemoveColumnsButton=!1,o.emitUpdate()));if(l&&o.editor.isEditable){if(l.tbodyNode){var c=l.tbodyNode.getBoundingClientRect(),d=Xx(l.domNode,o.pmView);if(d){var f;o.tableElement=d.node;var p=o.editor.transact((function(e){return TC(d.id,e.doc)}));if(!p)throw new Error("Block with ID ".concat(d.id," not found"));var h=fC(p.node,o.editor.pmSchema,o.editor.schema.blockSchema,o.editor.schema.inlineContentSchema,o.editor.schema.styleSchema);if(function(e,t,n){return"table"===t.type&&t.type in n.schema.blockSchema&&rE(t.type,n)}(0,h,o.editor)&&(o.tablePos=p.posBeforeNode+1,f=h),f){o.tableId=d.id;var m=null==(i=l.domNode.closest(".tableWrapper"))?void 0:i.querySelector(".table-widgets-container");if("wrapper"===(null==l?void 0:l.type)){var v=e.clientY>=c.bottom-1&&e.clientY<c.bottom+20,g=e.clientX>=c.right-1&&e.clientX<c.right+20,y=e.clientX>c.right||e.clientY>c.bottom;o.state=hw(hw({},o.state),{},{show:!0,showAddOrRemoveRowsButton:v,showAddOrRemoveColumnsButton:g,referencePosTable:c,block:f,widgetContainer:m,colIndex:y||null==(a=o.state)?void 0:a.colIndex,rowIndex:y||null==(s=o.state)?void 0:s.rowIndex,referencePosCell:y||null==(u=o.state)?void 0:u.referencePosCell})}else{var b=gS(l.domNode),D=gS(l.domNode.parentElement),w=l.domNode.getBoundingClientRect();if(void 0!==o.state&&o.state.show&&o.tableId===d.id&&o.state.rowIndex===D&&o.state.colIndex===b)return;o.state={show:!0,showAddOrRemoveColumnsButton:b===f.content.rows[0].cells.length-1,showAddOrRemoveRowsButton:D===f.content.rows.length-1,referencePosTable:c,block:f,draggingState:void 0,referencePosCell:w,colIndex:b,rowIndex:D,widgetContainer:m}}return o.emitUpdate(),!1}}}}else null!=(r=o.state)&&r.show&&(o.state.show=!1,o.state.showAddOrRemoveRowsButton=!1,o.state.showAddOrRemoveColumnsButton=!1,o.emitUpdate())}})),bw(this,"dragOverHandler",(function(e){var t;if(void 0!==(null==(t=o.state)?void 0:t.draggingState)){e.preventDefault(),e.dataTransfer.dropEffect="move",function(e,t){for(var n=t.querySelectorAll(".prosemirror-dropcursor-block, .prosemirror-dropcursor-inline"),r=0;r<n.length;r++)n[r].style.visibility="hidden"}(0,o.pmView.root);var n={left:Math.min(Math.max(e.clientX,o.state.referencePosTable.left+1),o.state.referencePosTable.right-1),top:Math.min(Math.max(e.clientY,o.state.referencePosTable.top+1),o.state.referencePosTable.bottom-1)},r=o.pmView.root.elementsFromPoint(n.left,n.top).filter((function(e){return"TD"===e.tagName||"TH"===e.tagName}));if(0!==r.length){var i=r[0],a=!1,s=gS(i.parentElement),u=gS(i),l="row"===o.state.draggingState.draggedCellOrientation?o.state.rowIndex:o.state.colIndex,c=("row"===o.state.draggingState.draggedCellOrientation?s:u)!==l;(o.state.rowIndex!==s||o.state.colIndex!==u)&&(o.state.rowIndex=s,o.state.colIndex=u,o.state.referencePosCell=i.getBoundingClientRect(),a=!0);var d="row"===o.state.draggingState.draggedCellOrientation?n.top:n.left;o.state.draggingState.mousePos!==d&&(o.state.draggingState.mousePos=d,a=!0),a&&o.emitUpdate(),c&&o.editor.transact((function(e){return e.setMeta(bS,!0)}))}}})),bw(this,"dropHandler",(function(e){if(o.mouseState="up",void 0===o.state||void 0===o.state.draggingState)return!1;if(void 0===o.state.rowIndex||void 0===o.state.colIndex)throw new Error("Attempted to drop table row or column, but no table block was hovered prior.");e.preventDefault();var t=o.state,n=t.draggingState,r=t.colIndex,i=t.rowIndex,a=o.state.block.content.columnWidths;if("row"===n.draggedCellOrientation){if(!EC(o.state.block,n.originalIndex,i))return!1;var s=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:vC(e),o=yC({row:t,col:0},e,r).row,i=yC({row:n,col:0},e,r).row,a=ew(r.splice(o,1),1)[0];return r.splice(i,0,a),gC(r)}(o.state.block,n.originalIndex,i);o.editor.updateBlock(o.state.block,{type:"table",content:hw(hw({},o.state.block.content),{},{rows:s})})}else{if(!xC(o.state.block,n.originalIndex,r))return!1;var u=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:vC(e),o=yC({row:0,col:t},e,r).col,i=yC({row:0,col:n},e,r).col;return r.forEach((function(e){var t=ew(e.splice(o,1),1)[0];e.splice(i,0,t)})),gC(r)}(o.state.block,n.originalIndex,r),l=ew(a.splice(n.originalIndex,1),1)[0];a.splice(r,0,l),o.editor.updateBlock(o.state.block,{type:"table",content:hw(hw({},o.state.block.content),{},{columnWidths:a,rows:u})})}return o.editor.setTextCursorPosition(o.state.block.id),!0})),this.editor=t,this.pmView=n,this.emitUpdate=function(){if(!o.state)throw new Error("Attempting to update uninitialized image toolbar");r(o.state)},n.dom.addEventListener("mousemove",this.mouseMoveHandler),n.dom.addEventListener("mousedown",this.viewMousedownHandler),window.addEventListener("mouseup",this.mouseUpHandler),n.root.addEventListener("dragover",this.dragOverHandler),n.root.addEventListener("drop",this.dropHandler)}),[{key:"update",value:function(){var e;if(this.state&&this.state.show){if(this.state.block=this.editor.getBlock(this.state.block.id),!this.state.block||"table"!==this.state.block.type||null==(e=this.tableElement)||!e.isConnected)return this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,void this.emitUpdate();var t=bC(this.state.block),n=t.height,r=t.width;void 0!==this.state.rowIndex&&void 0!==this.state.colIndex&&(this.state.rowIndex>=n&&(this.state.rowIndex=n-1),this.state.colIndex>=r&&(this.state.colIndex=r-1));var o=this.tableElement.querySelector("tbody");if(!o)throw new Error("Table block does not contain a 'tbody' HTML element. This should never happen.");if(void 0!==this.state.rowIndex&&void 0!==this.state.colIndex){var i=o.children[this.state.rowIndex].children[this.state.colIndex];i?this.state.referencePosCell=i.getBoundingClientRect():(this.state.rowIndex=void 0,this.state.colIndex=void 0)}this.state.referencePosTable=o.getBoundingClientRect(),this.emitUpdate()}}},{key:"destroy",value:function(){this.pmView.dom.removeEventListener("mousemove",this.mouseMoveHandler),window.removeEventListener("mouseup",this.mouseUpHandler),this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("dragover",this.dragOverHandler),this.pmView.root.removeEventListener("drop",this.dropHandler)}}])}(),bS=new Bn("TableHandlesPlugin"),DS=function(e){function t(e){var n;return aw(this,t),n=sw(this,t),bw(n,"view"),bw(n,"colDragStart",(function(e){if(void 0===n.view.state||void 0===n.view.state.colIndex)throw new Error("Attempted to drag table column, but no table block was hovered prior.");if(n.view.state.draggingState={draggedCellOrientation:"col",originalIndex:n.view.state.colIndex,mousePos:e.clientX},n.view.emitUpdate(),n.editor.transact((function(e){return e.setMeta(bS,{draggedCellOrientation:n.view.state.draggingState.draggedCellOrientation,originalIndex:n.view.state.colIndex,newIndex:n.view.state.colIndex,tablePos:n.view.tablePos})})),!n.editor.prosemirrorView)throw new Error("Editor view not initialized.");vS(n.editor.prosemirrorView.root),e.dataTransfer.setDragImage(uS,0,0),e.dataTransfer.effectAllowed="move"})),bw(n,"rowDragStart",(function(e){if(void 0===n.view.state||void 0===n.view.state.rowIndex)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(n.view.state.draggingState={draggedCellOrientation:"row",originalIndex:n.view.state.rowIndex,mousePos:e.clientY},n.view.emitUpdate(),n.editor.transact((function(e){return e.setMeta(bS,{draggedCellOrientation:n.view.state.draggingState.draggedCellOrientation,originalIndex:n.view.state.rowIndex,newIndex:n.view.state.rowIndex,tablePos:n.view.tablePos})})),!n.editor.prosemirrorView)throw new Error("Editor view not initialized.");vS(n.editor.prosemirrorView.root),e.dataTransfer.setDragImage(uS,0,0),e.dataTransfer.effectAllowed="copyMove"})),bw(n,"dragEnd",(function(){if(void 0===n.view.state)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(n.view.state.draggingState=void 0,n.view.emitUpdate(),n.editor.transact((function(e){return e.setMeta(bS,null)})),!n.editor.prosemirrorView)throw new Error("Editor view not initialized.");var e;e=n.editor.prosemirrorView.root,uS&&(e instanceof Document?e.body.removeChild(uS):e.removeChild(uS),uS=void 0)})),bw(n,"freezeHandles",(function(){n.view.menuFrozen=!0})),bw(n,"unfreezeHandles",(function(){n.view.menuFrozen=!1})),bw(n,"getCellsAtRowHandle",(function(e,t){return wC(e,t)})),bw(n,"getCellsAtColumnHandle",(function(e,t){return CC(e,t)})),bw(n,"setCellSelection",(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,o=n.view;if(!o)throw new Error("Table handles view not initialized");var i=e.doc.resolve(o.tablePos+1),a=e.doc.resolve(i.posAtIndex(t.row)+1),s=e.doc.resolve(a.posAtIndex(t.col)),u=e.doc.resolve(i.posAtIndex(r.row)+1),l=e.doc.resolve(u.posAtIndex(r.col)),c=e.tr;return c.setSelection(new tc(s,l)),e.apply(c)})),bw(n,"addRowOrColumn",(function(e,t){n.editor.exec((function(r,o){var i=n.setCellSelection(r,"row"===t.orientation?{row:e,col:0}:{row:0,col:e});return"row"===t.orientation?"above"===t.side?function(e,t){if(!Kl(e))return!1;if(t){var n=sc(e);t(cc(e.tr,n,n.top))}return!0}(i,o):function(e,t){if(!Kl(e))return!1;if(t){var n=sc(e);t(cc(e.tr,n,n.bottom))}return!0}(i,o):"left"===t.side?function(e,t){if(!Kl(e))return!1;if(t){var n=sc(e);t(uc(e.tr,n,n.left))}return!0}(i,o):function(e,t){if(!Kl(e))return!1;if(t){var n=sc(e);t(uc(e.tr,n,n.right))}return!0}(i,o)}))})),bw(n,"removeRowOrColumn",(function(e,t){return"row"===t?n.editor.exec((function(t,r){return function(e,t){if(!Kl(e))return!1;if(t){var n=sc(e),r=e.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(var o=n.bottom-1;dc(r,n,o),o!=n.top;o--){var i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=$l.get(n.table)}t(r)}return!0}(n.setCellSelection(t,{row:e,col:0}),r)})):n.editor.exec((function(t,r){return function(e,t){if(!Kl(e))return!1;if(t){var n=sc(e),r=e.tr;if(0==n.left&&n.right==n.map.width)return!1;for(var o=n.right-1;lc(r,n,o),o!=n.left;o--){var i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=$l.get(i)}t(r)}return!0}(n.setCellSelection(t,{row:0,col:e}),r)}))})),bw(n,"mergeCells",(function(e){return n.editor.exec((function(t,r){return function(e,t){var n=e.selection;if(!(n instanceof tc)||n.$anchorCell.pos==n.$headCell.pos)return!1;var r=sc(e),o=r.map;if(function(e,t){for(var n=e.width,r=e.height,o=e.map,i=t.top*n+t.left,a=i,s=(t.bottom-1)*n+t.left,u=i+(t.right-t.left-1),l=t.top;l<t.bottom;l++){if(t.left>0&&o[a]==o[a-1]||t.right<n&&o[u]==o[u+1])return!0;a+=n,u+=n}for(var c=t.left;c<t.right;c++){if(t.top>0&&o[i]==o[i-n]||t.bottom<r&&o[s]==o[s+n])return!0;i++,s++}return!1}(o,r))return!1;if(t){for(var i,a,s=e.tr,u={},l=$.empty,c=r.top;c<r.bottom;c++)for(var d=r.left;d<r.right;d++){var f=o.map[c*o.width+d],p=r.table.nodeAt(f);if(!u[f]&&p)if(u[f]=!0,null==i)i=f,a=p;else{fc(p)||(l=l.append(p.content));var h=s.mapping.map(f+r.tableStart);s.delete(h,h+p.nodeSize)}}if(null==i||null==a)return!0;if(s.setNodeMarkup(i+r.tableStart,null,Nl(Nl({},ec(a.attrs,a.attrs.colspan,r.right-r.left-a.attrs.colspan)),{},{rowspan:r.bottom-r.top})),l.size){var m=i+1+a.content.size,v=fc(a)?i+1:m;s.replaceWith(v+r.tableStart,m+r.tableStart,l)}s.setSelection(new tc(s.doc.resolve(i+r.tableStart))),t(s)}return!0}(e?n.setCellSelection(t,e.relativeStartCell,e.relativeEndCell):t,r)}))})),bw(n,"splitCell",(function(e){return n.editor.exec((function(t,r){return o=e?n.setCellSelection(t,e):t,i=r,s=Gl(o.schema),(a=function(e){var t=e.node;return s[t.type.spec.tableRole]},function(e,t){var n,r,o,i=e.selection;if(i instanceof tc){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;r=i.$anchorCell.nodeAfter,o=i.$anchorCell.pos}else{if(!(r=function(e){for(var t=e.depth;t>0;t--){var n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}(i.$from)))return!1;o=null==(n=ql(i.$from))?void 0:n.pos}if(null==r||null==o)return!1;if(1==r.attrs.colspan&&1==r.attrs.rowspan)return!1;if(t){var s=r.attrs,u=[],l=s.colwidth;s.rowspan>1&&(s=Nl(Nl({},s),{},{rowspan:1})),s.colspan>1&&(s=Nl(Nl({},s),{},{colspan:1}));for(var c,d=sc(e),f=e.tr,p=0;p<d.right-d.left;p++)u.push(l?Nl(Nl({},s),{},{colwidth:l&&l[p]?[l[p]]:null}):s);for(var h=d.top;h<d.bottom;h++){var m=d.map.positionAt(h,d.left,d.table);h==d.top&&(m+=r.nodeSize);for(var v=d.left,g=0;v<d.right;v++,g++)v==d.left&&h==d.top||f.insert(c=f.mapping.map(m+d.tableStart,1),a({node:r,row:h,col:v}).createAndFill(u[g]))}f.setNodeMarkup(o,a({node:r,row:d.top,col:d.left}),u[0]),i instanceof tc&&f.setSelection(new tc(f.doc.resolve(i.$anchorCell.pos),c?f.doc.resolve(c):void 0)),t(f)}return!0})(o,i);var o,i,a,s}))})),bw(n,"getCellSelection",(function(){return n.editor.transact((function(e){var t=e.selection,n=t.$from,r=t.$to;if(lE(t))t.ranges.forEach((function(e){var t,o;n=e.$from.min(null!==(t=n)&&void 0!==t?t:e.$from),r=e.$to.max(null!==(o=r)&&void 0!==o?o:e.$to)}));else if(n=e.doc.resolve(t.$from.pos-t.$from.parentOffset-1),r=e.doc.resolve(t.$to.pos-t.$to.parentOffset-1),0===n.pos||0===r.pos)return;for(var o=e.doc.resolve(n.pos-n.parentOffset-1),i=e.doc.resolve(r.pos-r.parentOffset-1),a=e.doc.resolve(o.pos-o.parentOffset-1),s=n.index(o.depth),u=o.index(a.depth),l=r.index(i.depth),c=i.index(a.depth),d=[],f=u;f<=c;f++)for(var p=s;p<=l;p++)d.push({row:f,col:p});return{from:{row:u,col:s},to:{row:c,col:l},cells:d}}))})),bw(n,"getMergeDirection",(function(e){return n.editor.transact((function(t){var r=lE(t.selection)?t.selection:void 0;if(r&&e&&!(r.ranges.length<=1)){var o=n.getCellSelection();return o?function(e,t,n){var r=yC(e,n),o=yC(t,n);return r.col===o.col}(o.from,o.to,e)?"vertical":"horizontal":void 0}}))})),bw(n,"cropEmptyRowsOrColumns",(function(e,t){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vC(e);if("columns"===t){for(var r=0,o=n[0].length-1;o>=0&&n.every((function(e){return kC(e[o].cell)&&1===e[o].colspan}));o--)r++;for(var i=n.length-1;i>=0;i--){var a=Math.max(n[i].length-r,1);n[i]=n[i].slice(0,a)}return gC(n)}for(var s=0,u=n.length-1;u>=0&&n[u].every((function(e){return kC(e.cell)&&1===e.rowspan}));u--)s++;var l=Math.min(s,n.length-1);return n.splice(n.length-l,l),gC(n)}(e,t)})),bw(n,"addRowsOrColumns",(function(e,t,n){return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:vC(e),o=bC(e),i=o.width,a=o.height;if("columns"===t)r.forEach((function(e,t){if(n>=0)for(var r=0;r<n;r++)e.push({row:t,col:Math.max.apply(Math,QD(e.map((function(e){return e.col}))))+1,rowspan:1,colspan:1,cell:Ew("")});else e.splice(i+n,-1*n)}));else if(n>0)for(var s=function(e){var t=new Array(i).fill(null).map((function(t,n){return{row:a+e,col:n,rowspan:1,colspan:1,cell:Ew("")}}));r.push(t)},u=0;u<n;u++)s(u);else n<0&&r.splice(a+n,-1*n);return gC(r)}(e,t,n)})),n.editor=e,n.addProsemirrorPlugin(new Fn({key:bS,view:function(t){return n.view=new yS(e,t,(function(e){n.emit("update",e)})),n.view},props:{decorations:function(e){if(void 0!==n.view&&void 0!==n.view.state&&void 0!==n.view.state.draggingState&&void 0!==n.view.tablePos){var t="row"===n.view.state.draggingState.draggedCellOrientation?n.view.state.rowIndex:n.view.state.colIndex;if(void 0!==t){var r=[],o=n.view.state,i=o.block,a=o.draggingState,s=a.originalIndex,u=a.draggedCellOrientation;if(t===s||!i||"row"===u&&!EC(i,s,t)||"col"===u&&!xC(i,s,t))return Mi.create(e.doc,r);var l=e.doc.resolve(n.view.tablePos+1);return"row"===n.view.state.draggingState.draggedCellOrientation?wC(n.view.state.block,t).forEach((function(n){var o=n.row,i=n.col,a=e.doc.resolve(l.posAtIndex(o)+1),u=e.doc.resolve(a.posAtIndex(i)+1),c=u.node(),d=u.pos+(t>s?c.nodeSize-2:0);r.push(Ai.widget(d,(function(){var e=document.createElement("div");return e.className="bn-table-drop-cursor",e.style.left="0",e.style.right="0",t>s?e.style.bottom="-2px":e.style.top="-3px",e.style.height="4px",e})))})):CC(n.view.state.block,t).forEach((function(n){var o=n.row,i=n.col,a=e.doc.resolve(l.posAtIndex(o)+1),u=e.doc.resolve(a.posAtIndex(i)+1),c=u.node(),d=u.pos+(t>s?c.nodeSize-2:0);r.push(Ai.widget(d,(function(){var e=document.createElement("div");return e.className="bn-table-drop-cursor",e.style.top="0",e.style.bottom="0",t>s?e.style.right="-2px":e.style.left="-3px",e.style.width="4px",e})))})),Mi.create(e.doc,r)}}}}})),n}return uw(t,e),iw(t,[{key:"onUpdate",value:function(e){return this.on("update",e)}}],[{key:"key",value:function(){return"tableHandles"}}])}(vx),wS=js.create({name:"textAlignment",addGlobalAttributes:function(){return[{types:["paragraph","heading","bulletListItem","numberedListItem","checkListItem","tableCell","tableHeader"],attributes:{textAlignment:{default:"left",parseHTML:function(e){return e.getAttribute("data-text-alignment")},renderHTML:function(e){return"left"===e.textAlignment?{}:{"data-text-alignment":e.textAlignment}}}}}]}}),CS=js.create({name:"blockTextColor",addGlobalAttributes:function(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{textColor:{default:_w.textColor.default,parseHTML:function(e){return e.hasAttribute("data-text-color")?e.getAttribute("data-text-color"):_w.textColor.default},renderHTML:function(e){return e.textColor===_w.textColor.default?{}:{"data-text-color":e.textColor}}}}}]}}),kS=js.create({name:"trailingNode",addProseMirrorPlugins:function(){var e=new Bn(this.name);return[new Fn({key:e,appendTransaction:function(t,n,r){var o=r.doc,i=r.tr,a=r.schema,s=e.getState(r),u=o.content.size-2,l=a.nodes.blockContainer,c=a.nodes.paragraph;if(s)return i.insert(u,l.create(void 0,c.create()))},state:{init:function(e,t){},apply:function(e,t){if(!e.docChanged)return t;var n=e.doc.lastChild;if(!n||"blockGroup"!==n.type.name)throw new Error("Expected blockGroup");if(!(n=n.lastChild)||"blockContainer"!==n.type.name)return!0;var r=n.firstChild;if(!r)throw new Error("Expected blockContent");return n.nodeSize>4||"inline*"!==r.type.spec.content}}})]}}),ES={blockColor:"data-block-color",blockStyle:"data-block-style",id:"data-id",depth:"data-depth",depthChange:"data-depth-change"},xS=Nu.create({name:"blockContainer",group:"blockGroupChild bnBlock",content:"blockContent blockGroup?",priority:50,defining:!0,marks:"insertion modification deletion",parseHTML:function(){return[{tag:"div[data-node-type="+this.name+"]",getAttrs:function(e){if("string"==typeof e)return!1;for(var t={},n=0,r=Object.entries(ES);n<r.length;n++){var o=ew(r[n],2),i=o[0],a=o[1];e.getAttribute(a)&&(t[i]=e.getAttribute(a))}return t}},{tag:'div[data-node-type="blockOuter"]',skip:!0}]},renderHTML:function(e){var t,n=e.HTMLAttributes,r=document.createElement("div");r.className="bn-block-outer",r.setAttribute("data-node-type","blockOuter");for(var o=0,i=Object.entries(n);o<i.length;o++){var a=ew(i[o],2),s=a[0],u=a[1];"class"!==s&&r.setAttribute(s,u)}var l=hw(hw({},(null==(t=this.options.domAttributes)?void 0:t.block)||{}),n),c=document.createElement("div");c.className=Pw("bn-block",l.class),c.setAttribute("data-node-type",this.name);for(var d=0,f=Object.entries(l);d<f.length;d++){var p=ew(f[d],2),h=p[0],m=p[1];"class"!==h&&c.setAttribute(h,m)}return r.appendChild(c),{dom:r,contentDOM:c}}}),SS=Nu.create({name:"blockGroup",group:"childContainer",content:"blockGroupChild+",marks:"deletion insertion modification",parseHTML:function(){return[{tag:"div",getAttrs:function(e){return"string"!=typeof e&&"blockGroup"===e.getAttribute("data-node-type")&&null}}]},renderHTML:function(e){var t,n=e.HTMLAttributes,r=hw(hw({},(null==(t=this.options.domAttributes)?void 0:t.blockGroup)||{}),n),o=document.createElement("div");o.className=Pw("bn-block-group",r.class),o.setAttribute("data-node-type","blockGroup");for(var i=0,a=Object.entries(r);i<a.length;i++){var s=ew(a[i],2),u=s[0],l=s[1];"class"!==u&&o.setAttribute(u,l)}return{dom:o,contentDOM:o}}}),AS=Nu.create({name:"doc",topNode:!0,content:"blockGroup",marks:"insertion modification deletion"}),FS=function(e){function t(e){var n,r=e.editor,o=e.collaboration;return aw(this,t),n=sw(this,t,[r]),bw(n,"editor"),bw(n,"collaboration"),bw(n,"forkedState"),n.editor=r,n.collaboration=o,n}return uw(t,e),iw(t,[{key:"findTypeInOtherYdoc",value:function(e,t){var n=e.doc;if(null===e._item){var r=Array.from(n.share.keys()).find((function(t){return n.share.get(t)===e}));if(null==r)throw new Error("type does not exist in other ydoc");return t.get(r,e.constructor)}var o,i=e._item,a=null!==(o=t.store.clients.get(i.id.client))&&void 0!==o?o:[];return a[Fg(a,i.id.clock)].content.type}},{key:"isForkedFromRemote",get:function(){return void 0!==this.forkedState}},{key:"fork",value:function(){if(!this.isForkedFromRemote){var e=this.collaboration.fragment;if(!e)throw new Error("No fragment to fork from");var t=new $v;eg(t,tg(e.doc));var n=this.findTypeInOtherYdoc(e,t);this.forkedState={originalFragment:e,forkedFragment:n},this.editor._tiptapEditor.unregisterPlugin([Nb,Tb,Pb]),this.editor._tiptapEditor.registerPlugin(new bx(n).plugins[0]),this.editor._tiptapEditor.registerPlugin((new Dx).plugins[0]),this.emit("forked",!0)}}},{key:"merge",value:function(e){var t=e.keepChanges;if(this.forkedState){this.editor._tiptapEditor.unregisterPlugin(Pb),this.editor._tiptapEditor.unregisterPlugin(Tb);var n=this.forkedState,r=n.originalFragment,o=n.forkedFragment;if(t){var i=tg(o.doc);eg(r.doc,i)}this.editor.extensions.ySyncPlugin=new bx(r),this.editor.extensions.yCursorPlugin=new yx(this.collaboration),this.editor.extensions.yUndoPlugin=new Dx,this.editor._tiptapEditor.registerPlugin(this.editor.extensions.ySyncPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yCursorPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yUndoPlugin.plugins[0]),this.forkedState=void 0,this.emit("forked",!1)}}}],[{key:"key",value:function(){return"ForkYDocPlugin"}}])}(vx),OS=!1;function MS(e,t){var n=[];return e.forEach((function(e,r,o){o!==t&&n.push(e)})),$.from(n)}function BS(e,t){var n=$.from(e.content);if(n=function(e,t){for(var n=[],r=0;r<e.childCount;r++)if("tableRow"===e.child(r).type.name)if(n.length>0&&"table"===n[n.length-1].type.name){var o=n[n.length-1],i=o.copy(o.content.addToEnd(e.child(r)));n[n.length-1]=i}else{var a=t.nodes.table.createChecked(void 0,e.child(r));n.push(a)}else n.push(e.child(r));return $.from(n)}(n,t.state.schema),!function(e,t){var n,r,o=1===e.childCount,i="inline*"===(null==(n=e.firstChild)?void 0:n.type.spec.content),a="tableRow+"===(null==(r=e.firstChild)?void 0:r.type.spec.content);if(o){if(i)return!1;if(a){var s=eC(t.state);if(s.isBlockContainer)return!("tableRow+"===s.blockContent.node.type.spec.content)}}return!0}(n,t))return new J(n,e.openStart,e.openEnd);for(var r=0;r<n.childCount;r++)if("blockContent"===n.child(r).type.spec.group){var o=[n.child(r)];if(r+1<n.childCount&&"blockGroup"===n.child(r+1).type.name){var i=n.child(r+1).child(0).child(0);("bulletListItem"===i.type.name||"numberedListItem"===i.type.name||"checkListItem"===i.type.name)&&(o.push(n.child(r+1)),n=MS(n,r+1))}var a=t.state.schema.nodes.blockContainer.createChecked(void 0,o);n=n.replaceChild(r,a)}return new J(n,e.openStart,e.openEnd)}var PS=function(e){function t(e,n){var r;aw(this,t),r=sw(this,t,[hw(hw({},e),{},{content:void 0})]),bw(r,"_state"),bw(r,"mount",(function(e,t,n){t?(r.options.element=t,r.createViewAlternative(e,n)):r.destroy()}));var o,i,a=r.schema,s=a.nodes.doc.createAndFill;a.nodes.doc.createAndFill=function(){if(o)return o;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=s.apply(a.nodes.doc,t),i=JSON.parse(JSON.stringify(r.toJSON()));return i.content[0].content[0].attrs.id="initialBlockId",o=pe.fromJSON(a,i)};try{var u;i=ru({type:"doc",content:[{type:"blockGroup",content:null==e?void 0:e.content.map((function(e){return PC(e,r.schema,n).toJSON()}))}]},r.schema,r.options.parseOptions)}catch(u){throw console.error("Error creating document from blocks passed as `initialContent`. Caused by exception: ",u),new Error("Error creating document from blocks passed as `initialContent`:\n"+ +JSON.stringify(e.content))}return r._state=Sn.create({doc:i,schema:r.schema}),r}return uw(t,e),iw(t,[{key:"state",get:function(){return this.view&&(this._state=this.view.state),this._state}},{key:"dispatch",value:function(e){if(!this.view)return this._state=this.state.apply(e),void this.emit("transaction",{editor:this,transaction:e});if(!this.view.isDestroyed)if(this.isCapturingTransaction)this.dispatchTransaction(e);else{var t=this.state.applyTransaction(e),n=t.state,r=t.transactions,o=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),o&&this.emit("selectionUpdate",{editor:this,transaction:e});var i=e.getMeta("focus"),a=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),a&&this.emit("blur",{editor:this,event:a.event,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&(this.emit("update",{editor:this,transaction:e}),this.emit("v3-update",{editor:this,transaction:e,appendedTransactions:r.slice(1)}))}}},{key:"forceEnablePlugins",value:function(){if(this.view)throw new Error("forcePluginsEnabled called after view has been initialized");this._state=this.state.reconfigure({plugins:this.extensionManager.plugins})}},{key:"createViewAlternative",value:function(e,t){this.contentComponent=t;var n={};this.extensionManager.extensions.forEach((function(t){"mark"===t.type&&t.config.addMarkView&&(n[t.name]=t.config.addMarkView(e))})),this.view=new ta({mount:this.options.element},hw(hw({},this.options.editorProps),{},{dispatchTransaction:this.dispatch.bind(this),state:this.state,markViews:n,nodeViews:this.extensionManager.nodeViews}));var r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.commands.focus(this.options.autofocus||"true"===this.options.element.getAttribute("data-bn-autofocus"),{scrollIntoView:!1}),this.emit("create",{editor:this}),this.isInitialized=!0}}])}(Pu);bw(PS,"create",(function(e,t){var n,r,o=null==(n=null==globalThis?void 0:globalThis.window)?void 0:n.setTimeout;gw(null==(r=null==globalThis?void 0:globalThis.window)?void 0:r.setTimeout)<"u"&&(globalThis.window.setTimeout=function(){return 0});try{return new PS(e,t)}finally{o&&(globalThis.window.setTimeout=o)}}));var TS=PS;TS.prototype.createView=function(){this.options.onPaste=this.options.onDrop=void 0};var NS,jS={enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!1},_S=function(e){function t(e){var n,r,o,i,a,s,u,l,c,d,f,p,h,m,v,g,y,b,D,w,C,k,E,x,S,A;aw(this,t),f=sw(this,t),bw(f,"pmSchema"),bw(f,"extensions",{}),bw(f,"headless",!1),bw(f,"_tiptapEditor"),bw(f,"elementRenderer",null),bw(f,"blockCache",new WeakMap),bw(f,"dictionary"),bw(f,"schema"),bw(f,"blockImplementations"),bw(f,"inlineContentImplementations"),bw(f,"styleImplementations"),bw(f,"formattingToolbar"),bw(f,"linkToolbar"),bw(f,"sideMenu"),bw(f,"suggestionMenus"),bw(f,"filePanel"),bw(f,"tableHandles"),bw(f,"comments"),bw(f,"showSelectionPlugin"),bw(f,"forkYDocPlugin"),bw(f,"uploadFile"),bw(f,"onUploadStartCallbacks",[]),bw(f,"onUploadEndCallbacks",[]),bw(f,"resolveFileUrl"),bw(f,"resolveUsers"),bw(f,"settings"),bw(f,"activeTransaction",null),bw(f,"mount",(function(e,t){f._tiptapEditor.mount(f,e,t)})),f.options=e;var F=e;if(F.onEditorContentChange)throw new Error("onEditorContentChange initialization option is deprecated, use <BlockNoteView onChange={...} />, the useEditorChange(...) hook, or editor.onChange(...)");if(F.onTextCursorPositionChange)throw new Error("onTextCursorPositionChange initialization option is deprecated, use <BlockNoteView onSelectionChange={...} />, the useEditorSelectionChange(...) hook, or editor.onSelectionChange(...)");if(F.onEditorReady)throw new Error("onEditorReady is deprecated. Editor is immediately ready for use after creation.");if(F.editable)throw new Error("editable initialization option is deprecated, use <BlockNoteView editable={true/false} />, or alternatively editor.isEditable = true/false");f.dictionary=e.dictionary||UD,f.settings={tables:{splitCells:null!==(n=null==(p=null==e?void 0:e.tables)?void 0:p.splitCells)&&void 0!==n&&n,cellBackgroundColor:null!==(r=null==(h=null==e?void 0:e.tables)?void 0:h.cellBackgroundColor)&&void 0!==r&&r,cellTextColor:null!==(o=null==(m=null==e?void 0:e.tables)?void 0:m.cellTextColor)&&void 0!==o&&o,headers:null!==(i=null==(v=null==e?void 0:e.tables)?void 0:v.headers)&&void 0!==i&&i},codeBlock:{indentLineWithTab:null===(a=null==(g=null==e?void 0:e.codeBlock)?void 0:g.indentLineWithTab)||void 0===a||a,defaultLanguage:null!==(s=null==(y=null==e?void 0:e.codeBlock)?void 0:y.defaultLanguage)&&void 0!==s?s:"text",supportedLanguages:null!==(u=null==(b=null==e?void 0:e.codeBlock)?void 0:b.supportedLanguages)&&void 0!==u?u:{},createHighlighter:null!==(l=null==(D=null==e?void 0:e.codeBlock)?void 0:D.createHighlighter)&&void 0!==l?l:void 0}};var O=hw(hw({defaultStyles:!0,schema:e.schema||hE.create(),_headless:!1},e),{},{placeholders:hw(hw({},f.dictionary.placeholders),e.placeholders)});if(O.comments&&!O.resolveUsers)throw new Error("resolveUsers is required when using comments");f.resolveUsers=O.resolveUsers,f.schema=O.schema,f.blockImplementations=O.schema.blockSpecs,f.inlineContentImplementations=O.schema.inlineContentSpecs,f.styleImplementations=O.schema.styleSpecs,f.extensions=function(e){var t,n,r,o={},i=YD(function(e){var t=[Mu.ClipboardTextSerializer,Mu.Commands,Mu.Editable,Mu.FocusEvents,Mu.Tabindex,nd,js.create({name:"dropCursor",addProseMirrorPlugins:function(){return[e.dropCursor({width:5,color:"#ddeeff",editor:e.editor})]}}),Dw.configure({types:["blockContainer","columnList","column"],setIdAttribute:e.setIdAttribute}),Bx,Mp,pS,hS,mS,Op.extend({inclusive:!1}).configure({defaultProtocol:zx,protocols:OS?[]:Hx})].concat(QD(Object.values(e.styleSpecs).map((function(t){return t.implementation.mark.configure({editor:e.editor})}))),[CS,hx,wS,js.create({name:"OverrideEscape",addKeyboardShortcuts:function(){var t=this;return{Escape:function(){return!e.editor.suggestionMenus.shown&&t.editor.commands.blur()}}}}),AS,xS.configure({editor:e.editor,domAttributes:e.domAttributes}),_x.configure({editor:e.editor,tabBehavior:e.tabBehavior}),SS.configure({domAttributes:e.domAttributes})],QD(Object.values(e.inlineContentSpecs).filter((function(e){return"link"!==e.config&&"text"!==e.config})).map((function(t){return t.implementation.node.configure({editor:e.editor})}))),QD(Object.values(e.blockSpecs).flatMap((function(t){return[].concat(QD((t.implementation.requiredExtensions||[]).map((function(t){return t.configure({editor:e.editor,domAttributes:e.domAttributes})}))),[t.implementation.node.configure({editor:e.editor,domAttributes:e.domAttributes})])}))),[px(e.editor),ux(e.editor,e.pasteHandler||function(e){return e.defaultPasteHandler()}),qE(e.editor)],QD(void 0===e.trailingBlock||e.trailingBlock?[kS]:[]),QD(e.comments?[wx]:[]));return OS=!0,e.collaboration||t.push(Fd),t}(e));try{for(i.s();!(r=i.n()).done;){var a=r.value;o[a.name]=a}}catch(e){i.e(e)}finally{i.f()}e.collaboration&&(o.ySyncPlugin=new bx(e.collaboration.fragment),o.yUndoPlugin=new Dx,null!=(n=e.collaboration.provider)&&n.awareness&&(o.yCursorPlugin=new yx(e.collaboration)),o.forkYDocPlugin=new FS({editor:e.editor,collaboration:e.collaboration})),o.formattingToolbar=new Mx(e.editor),o.linkToolbar=new Ix(e.editor),o.sideMenu=new aS(e.editor,e.sideMenuDetection),o.suggestionMenus=new fS(e.editor),o.filePanel=new Ax(e.editor),o.placeholder=new Gx(e.editor,e.placeholders),(null===(t=e.animations)||void 0===t||t)&&(o.animations=new Kx),e.tableHandles&&(o.tableHandles=new DS(e.editor)),o.nodeSelectionKeyboard=new $x,o.showSelection=new Zx(e.editor),e.comments&&(o.comments=new Ex(e.editor,e.comments.threadStore,wx.name));var s,u=YD(e.disableExtensions||[]);try{for(u.s();!(s=u.n()).done;)delete o[s.value]}catch(e){u.e(e)}finally{u.f()}return o}({editor:f,domAttributes:O.domAttributes||{},blockSpecs:f.schema.blockSpecs,styleSpecs:f.schema.styleSpecs,inlineContentSpecs:f.schema.inlineContentSpecs,collaboration:O.collaboration,trailingBlock:O.trailingBlock,disableExtensions:O.disableExtensions,setIdAttribute:O.setIdAttribute,animations:null===(c=O.animations)||void 0===c||c,tableHandles:rE("table",f),dropCursor:null!==(d=f.options.dropCursor)&&void 0!==d?d:VD,placeholders:O.placeholders,tabBehavior:O.tabBehavior,sideMenuDetection:O.sideMenuDetection||"viewport",comments:O.comments,pasteHandler:O.pasteHandler}),((null==(w=O._tiptapOptions)?void 0:w.extensions)||[]).forEach((function(e){f.extensions[e.name]=e}));var M,B=YD(O.extensions||[]);try{for(B.s();!(M=B.n()).done;){var P=M.value;"function"==typeof P&&(P=P(f));var T=P.constructor.key();if(!T)throw new Error("Extension ".concat(P.constructor.name," does not have a key method"));if(f.extensions[T])throw new Error("Extension ".concat(P.constructor.name," already exists with key ").concat(T));f.extensions[T]=P}}catch(e){B.e(e)}finally{B.f()}if(Object.entries(O._extensions||{}).forEach((function(e){var t=ew(e,2),n=t[0],r=t[1],o="function"==typeof r?r(f):r;f.extensions[n]="plugin"in o?new(function(e){function t(){var e;return aw(this,t),(e=sw(this,t)).addProsemirrorPlugin(o.plugin),e}return uw(t,e),iw(t,[{key:"priority",get:function(){return o.priority}}],[{key:"key",value:function(){return n}}])}(vx)):o})),f.formattingToolbar=f.extensions.formattingToolbar,f.linkToolbar=f.extensions.linkToolbar,f.sideMenu=f.extensions.sideMenu,f.suggestionMenus=f.extensions.suggestionMenus,f.filePanel=f.extensions.filePanel,f.tableHandles=f.extensions.tableHandles,f.comments=f.extensions.comments,f.showSelectionPlugin=f.extensions.showSelection,f.forkYDocPlugin=f.extensions.forkYDocPlugin,O.uploadFile){var N=O.uploadFile;f.uploadFile=function(){var e=ZD(KD().mark((function e(t,n){return KD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.onUploadStartCallbacks.forEach((function(e){return e.apply(f,[n])})),e.prev=1,e.next=4,N(t,n);case 4:return e.abrupt("return",e.sent);case 5:return e.prev=5,f.onUploadEndCallbacks.forEach((function(e){return e.apply(f,[n])})),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[1,,5,8]])})));return function(t,n){return e.apply(this,arguments)}}()}f.resolveFileUrl=O.resolveFileUrl,f.headless=O._headless;var j="ySyncPlugin"in f.extensions||"liveblocksExtension"in f.extensions;j&&O.initialContent&&console.warn("When using Collaboration, initialContent might cause conflicts, because changes should come from the collaboration provider");var _=O.initialContent||(j?[{type:"paragraph",id:"initialBlockId"}]:[{type:"paragraph",id:Dw.options.generateID()}]);if(!Array.isArray(_)||0===_.length)throw new Error("initialContent must be a non-empty array of blocks, received: "+_);var R=QD(Object.entries(f.extensions).map((function(e){var t=ew(e,2),n=t[0],r=t[1];return r instanceof js||r instanceof Nu||r instanceof Ms?r:r instanceof vx&&!r.plugins.length?void 0:js.create({name:n,priority:r.priority,addProseMirrorPlugins:function(){return r.plugins}})}))).filter((function(e){return void 0!==e})),L=hw(hw(hw({},jS),O._tiptapOptions),{},{content:_,extensions:R,editorProps:hw(hw({},null==(C=O._tiptapOptions)?void 0:C.editorProps),{},{attributes:hw(hw(hw({tabIndex:"0"},null==(E=null==(k=O._tiptapOptions)?void 0:k.editorProps)?void 0:E.attributes),null==(x=O.domAttributes)?void 0:x.editor),{},{class:Pw("bn-editor",O.defaultStyles?"bn-default-styles":"",(null==(A=null==(S=O.domAttributes)?void 0:S.editor)?void 0:A.class)||"")}),transformPasted:BS})});return f.headless?f.pmSchema=function(e,t){return Ds(Ns.resolve(e),t)}(L.extensions):(f._tiptapEditor=TS.create(L,f.schema.styleSchema),f.pmSchema=f._tiptapEditor.schema),f.pmSchema.cached.blockNoteEditor=f,f.emit("create"),f}return uw(t,e),iw(t,[{key:"exec",value:function(e){var t=this;if(this.activeTransaction)throw new Error("`exec` should not be called within a `transact` call, move the `exec` call outside of the `transact` call");return e(this._tiptapEditor.state,(function(e){return t._tiptapEditor.dispatch(e)}),this._tiptapEditor.view)}},{key:"canExec",value:function(e){if(this.activeTransaction)throw new Error("`canExec` should not be called within a `transact` call, move the `canExec` call outside of the `transact` call");return e(this._tiptapEditor.state,void 0,this._tiptapEditor.view)}},{key:"transact",value:function(e){if(this.activeTransaction)return e(this.activeTransaction);try{this.activeTransaction=this._tiptapEditor.state.tr;var t=e(this.activeTransaction),n=this.activeTransaction;return this.activeTransaction=null,n&&(n.docChanged||n.selectionSet||n.scrolledIntoView||n.storedMarksSet||!n.isGeneric)&&this._tiptapEditor.dispatch(n),t}finally{this.activeTransaction=null}}},{key:"extension",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.key(),n=this.extensions[t];if(!n)throw new Error("Extension ".concat(t," not found"));return n}},{key:"prosemirrorState",get:function(){if(this.activeTransaction)throw new Error("`prosemirrorState` should not be called within a `transact` call, move the `prosemirrorState` call outside of the `transact` call or use `editor.transact` to read the current editor state");return this._tiptapEditor.state}},{key:"prosemirrorView",get:function(){return this._tiptapEditor.view}},{key:"domElement",get:function(){var e;return null==(e=this.prosemirrorView)?void 0:e.dom}},{key:"isFocused",value:function(){var e;return(null==(e=this.prosemirrorView)?void 0:e.hasFocus())||!1}},{key:"focus",value:function(){var e;null==(e=this.prosemirrorView)||e.focus()}},{key:"onUploadStart",value:function(e){var t=this;return this.onUploadStartCallbacks.push(e),function(){var n=t.onUploadStartCallbacks.indexOf(e);n>-1&&t.onUploadStartCallbacks.splice(n,1)}}},{key:"onUploadEnd",value:function(e){var t=this;return this.onUploadEndCallbacks.push(e),function(){var n=t.onUploadEndCallbacks.indexOf(e);n>-1&&t.onUploadEndCallbacks.splice(n,1)}}},{key:"topLevelBlocks",get:function(){return this.document}},{key:"document",get:function(){var e=this;return this.transact((function(t){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:iC(t),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:aC(t),o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:sC(t),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:uC(t),a=[];return e.firstChild.descendants((function(e){return a.push(fC(e,t,n,r,o,i)),!1})),a}(t.doc,e.pmSchema)}))}},{key:"getBlock",value:function(e){return this.transact((function(t){return function(e,t){var n="string"==typeof t?t:t.id,r=nC(e),o=TC(n,e);if(o)return fC(o.node,r)}(t.doc,e)}))}},{key:"getPrevBlock",value:function(e){return this.transact((function(t){return function(e,t){var n=TC("string"==typeof t?t:t.id,e),r=nC(e);if(n){var o=e.resolve(n.posBeforeNode).nodeBefore;return o?fC(o,r):void 0}}(t.doc,e)}))}},{key:"getNextBlock",value:function(e){return this.transact((function(t){return function(e,t){var n=TC("string"==typeof t?t:t.id,e),r=nC(e);if(n){var o=e.resolve(n.posBeforeNode+n.node.nodeSize).nodeAfter;return o?fC(o,r):void 0}}(t.doc,e)}))}},{key:"getParentBlock",value:function(e){return this.transact((function(t){return function(e,t){var n="string"==typeof t?t:t.id,r=nC(e),o=TC(n,e);if(o){var i=e.resolve(o.posBeforeNode),a=i.node(),s=i.node(-1),u="doc"!==s.type.name?"blockGroup"===a.type.name?s:a:void 0;return u?fC(u,r):void 0}}(t.doc,e)}))}},{key:"forEachBlock",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.document.slice();t&&n.reverse(),function n(r){var o,i=YD(r);try{for(i.s();!(o=i.n()).done;){var a=o.value;if(!1===e(a))return!1;if(!n(t?a.children.slice().reverse():a.children))return!1}}catch(e){i.e(e)}finally{i.f()}return!0}(n)}},{key:"onEditorContentChange",value:function(e){this._tiptapEditor.on("update",e)}},{key:"onEditorSelectionChange",value:function(e){this._tiptapEditor.on("selectionUpdate",e)}},{key:"getTextCursorPosition",value:function(){return this.transact((function(e){return function(e){var t,n=tC(e).bnBlock,r=nC(e.doc),o=e.doc.resolve(n.beforePos),i=o.nodeBefore,a=e.doc.resolve(n.afterPos).nodeAfter;return o.depth>1&&((t=o.node()).type.isInGroup("bnBlock")||(t=o.node(o.depth-1))),{block:fC(n.node,r),prevBlock:null===i?void 0:fC(i,r),nextBlock:null===a?void 0:fC(a,r),parentBlock:void 0===t?void 0:fC(t,r)}}(e)}))}},{key:"setTextCursorPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"start";return this.transact((function(n){return EE(n,e,t)}))}},{key:"getSelection",value:function(){return this.transact((function(e){return function(e){var t=nC(e);if(!e.selection.empty&&!("node"in e.selection)){var n=e.doc.resolve(Zw(e.doc,e.selection.from).posBeforeNode),r=e.doc.resolve(Zw(e.doc,e.selection.to).posBeforeNode),o=function(r,o){var i=n.posAtIndex(r,o),a=e.doc.resolve(i).nodeAfter;if(!a)throw new Error("Error getting selection - node not found at position ".concat(i));return fC(a,t)},i=[],a=n.sharedDepth(r.pos),s=n.index(a),u=r.index(a);if(n.depth>a){i.push(fC(n.nodeAfter,t));for(var l=n.depth;l>a;l--)if(n.node(l).type.isInGroup("childContainer"))for(var c=n.index(l)+1,d=n.node(l).childCount,f=c;f<d;f++)i.push(o(f,l))}else i.push(o(s,a));for(var p=s+1;p<=u;p++)i.push(o(p,a));if(0===i.length)throw new Error("Error getting selection - selection doesn't span any blocks (".concat(e.selection,")"));return{blocks:i}}}(e)}))}},{key:"getSelectionCutBlocks",value:function(){return this.transact((function(e){return function(e){for(var t=nC(e),n=e.selection.$from,r=e.selection.$to;r.parentOffset>=r.parent.nodeSize-2&&r.depth>0;)r=e.doc.resolve(r.pos+1);for(;0===r.parentOffset&&r.depth>0;)r=e.doc.resolve(r.pos-1);for(;0===n.parentOffset&&n.depth>0;)n=e.doc.resolve(n.pos-1);for(;n.parentOffset>=n.parent.nodeSize-2&&n.depth>0;)n=e.doc.resolve(n.pos+1);var o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:iC(t),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:aC(t),o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:sC(t),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:uC(t);if(0===e.content.childCount)return{blocks:[],blockCutAtStart:void 0,blockCutAtEnd:void 0};if(1!==e.content.childCount)throw new Error("slice must be a single block, did you forget includeParents=true?");return function e(a,s,u){if("blockGroup"!==a.type.name)throw new Error("unexpected");var l,c,d=[];return a.forEach((function(f,p,h){if("blockContainer"!==f.type.name)throw new Error("unexpected");if(0!==f.childCount){if(0===f.childCount||f.childCount>2)throw new Error("unexpected, blockContainer.childCount: "+f.childCount);var m=0===h,v=h===a.childCount-1;if("blockGroup"===f.firstChild.type.name){if(!m)throw new Error("unexpected");var g=e(f.firstChild,Math.max(0,s-1),v?Math.max(0,u-1):0);return l=g.blockCutAtStart,v&&(c=g.blockCutAtEnd),void d.push.apply(d,QD(g.blocks))}var y=fC(f,t,n,r,o,i),b=f.childCount>1?f.child(1):void 0,D=[];if(b){var w=e(b,0,v?Math.max(0,u-1):0);D=w.blocks,v&&(c=w.blockCutAtEnd)}v&&!b&&u>1&&(c=y.id),m&&s>1&&(l=y.id),d.push(hw(hw({},y),{},{children:D}))}})),{blocks:d,blockCutAtStart:l,blockCutAtEnd:c}}(e.content.firstChild,Math.max(e.openStart-1,0),Math.max(e.openEnd-1,0))}(e.doc.slice(n.pos,r.pos,!0),t);return hw({_meta:{startPos:n.pos,endPos:r.pos}},o)}(e)}))}},{key:"setSelection",value:function(e,t){return this.transact((function(n){return function(e,t,n){var r="string"==typeof t?t:t.id,o="string"==typeof n?n:n.id,i=oC(nC(e));if(r===o)throw new Error("Attempting to set selection with the same anchor and head blocks (id ".concat(r,")"));var a=TC(r,e.doc);if(!a)throw new Error("Block with ID ".concat(r," not found"));var s=TC(o,e.doc);if(!s)throw new Error("Block with ID ".concat(o," not found"));var u,l,c=Yw(a),d=Yw(s),f=i.blockSchema[c.blockNoteType],p=i.blockSchema[d.blockNoteType];if(!c.isBlockContainer||"none"===f.content)throw new Error("Attempting to set selection anchor in block without content (id ".concat(r,")"));if(!d.isBlockContainer||"none"===p.content)throw new Error("Attempting to set selection anchor in block without content (id ".concat(o,")"));if("table"===f.content){var h=$l.get(c.blockContent.node);u=c.blockContent.beforePos+h.positionAt(0,0,c.blockContent.node)+1+2}else u=c.blockContent.beforePos+1;if("table"===p.content){var m=$l.get(d.blockContent.node),v=d.blockContent.beforePos+m.positionAt(m.height-1,m.width-1,d.blockContent.node)+1;l=v+e.doc.resolve(v).nodeAfter.nodeSize-2}else l=d.blockContent.afterPos-1;e.setSelection(pn.create(e.doc,u,l))}(n,e,t)}))}},{key:"isEditable",get:function(){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return!1}return void 0===this._tiptapEditor.isEditable||this._tiptapEditor.isEditable},set:function(e){if(this._tiptapEditor)this._tiptapEditor.options.editable!==e&&this._tiptapEditor.setEditable(e);else if(!this.headless)throw new Error("no editor, but also not headless?")}},{key:"insertBlocks",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"before";return this.transact((function(r){return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"before",o="string"==typeof n?n:n.id,i=nC(e),a=t.map((function(e){return PC(e,i)})),s=TC(o,e.doc);if(!s)throw new Error("Block with ID ".concat(o," not found"));var u=s.posBeforeNode;return"after"===r&&(u+=s.node.nodeSize),e.step(new Dt(u,u,new J($.from(a),0,0))),a.map((function(e){return fC(e,i)}))}(r,e,t,n)}))}},{key:"updateBlock",value:function(e,t){return this.transact((function(n){return function(e,t,n){var r="string"==typeof t?t:t.id,o=TC(r,e.doc);if(!o)throw new Error("Block with ID ".concat(r," not found"));return LC(e,o.posBeforeNode,n,void 0,void 0),fC(e.doc.resolve(o.posBeforeNode+1).node(),nC(e))}(n,e,t)}))}},{key:"removeBlocks",value:function(e){return this.transact((function(t){return _C(t,e,[]).removedBlocks}))}},{key:"replaceBlocks",value:function(e,t){return this.transact((function(n){return _C(n,e,t)}))}},{key:"undo",value:function(){return this.options.collaboration?this.exec(_D):this.exec(Sd)}},{key:"redo",value:function(){return this.options.collaboration?this.exec(RD):this.exec(Ad)}},{key:"insertInlineContent",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).updateSelection,n=void 0!==t&&t,r=OC(e,this.pmSchema);this.transact((function(e){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{updateSelection:!0},o="number"==typeof t?{from:t,to:t}:{from:t.from,to:t.to},i=o.from,a=o.to,s=!0,u=!0,l="";if(n.forEach((function(e){e.check(),s&&e.isText&&0===e.marks.length?l+=e.text:s=!1,u=!!u&&e.isBlock})),i===a&&u){var c=e.doc.resolve(i).parent;c.isTextblock&&!c.type.spec.code&&!c.childCount&&(i-=1,a+=1)}s?e.insertText(l,i,a):e.replaceWith(i,a,n),r.updateSelection&&Ys(e,e.steps.length-1,-1)}(e,{from:e.selection.from,to:e.selection.to},r,{updateSelection:n})}))}},{key:"getActiveStyles",value:function(){var e=this;return this.transact((function(t){var n,r={},o=YD(t.selection.$to.marks());try{for(o.s();!(n=o.n()).done;){var i=n.value,a=e.schema.styleSchema[i.type.name];a?"boolean"===a.propSchema?r[a.type]=!0:r[a.type]=i.attrs.stringValue:"link"!==i.type.name&&!i.type.spec.blocknoteIgnore&&console.warn("mark not found in styleschema",i.type.name)}}catch(e){o.e(e)}finally{o.f()}return r}))}},{key:"addStyles",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=ew(n[t],2),o=r[0],i=r[1],a=this.schema.styleSchema[o];if(!a)throw new Error("style ".concat(o," not found in styleSchema"));if("boolean"===a.propSchema)this._tiptapEditor.commands.setMark(o);else{if("string"!==a.propSchema)throw new Ow(a.propSchema);this._tiptapEditor.commands.setMark(o,{stringValue:i})}}}},{key:"removeStyles",value:function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];this._tiptapEditor.commands.unsetMark(r)}}},{key:"toggleStyles",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=ew(n[t],2),o=r[0],i=r[1],a=this.schema.styleSchema[o];if(!a)throw new Error("style ".concat(o," not found in styleSchema"));if("boolean"===a.propSchema)this._tiptapEditor.commands.toggleMark(o);else{if("string"!==a.propSchema)throw new Ow(a.propSchema);this._tiptapEditor.commands.toggleMark(o,{stringValue:i})}}}},{key:"getSelectedText",value:function(){return this.transact((function(e){return e.doc.textBetween(e.selection.from,e.selection.to)}))}},{key:"getSelectedLinkUrl",value:function(){return this._tiptapEditor.getAttributes("link").href}},{key:"createLink",value:function(e,t){if(""!==e){var n=this.pmSchema.mark("link",{href:e});this.transact((function(e){var r=e.selection,o=r.from,i=r.to;t?e.insertText(t,o,i).addMark(o,o+t.length,n):e.setSelection(pn.create(e.doc,i)).addMark(o,i,n)}))}}},{key:"canNestBlock",value:function(){return this.transact((function(e){var t=tC(e).bnBlock;return null!==e.doc.resolve(t.beforePos).nodeBefore}))}},{key:"nestBlock",value:function(){kE(this)}},{key:"canUnnestBlock",value:function(){return this.transact((function(e){var t=tC(e).bnBlock;return e.doc.resolve(t.beforePos).depth>1}))}},{key:"unnestBlock",value:function(){this._tiptapEditor.commands.liftListItem("blockContainer")}},{key:"moveBlocksUp",value:function(){return wE(this)}},{key:"moveBlocksDown",value:function(){return CE(this)}},{key:"blocksToHTMLLossy",value:(s=ZD(KD().mark((function e(){var t,n=arguments;return KD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:this.document,e.abrupt("return",UC(this.pmSchema,this).exportBlocks(t,{}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"blocksToFullHTML",value:(a=ZD(KD().mark((function e(t){return KD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",KC(this.pmSchema,this).serializeBlocks(t,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"tryParseHTMLToBlocks",value:(i=ZD(KD().mark((function e(t){return KD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",NE(t,this.pmSchema));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"blocksToMarkdownLossy",value:(o=ZD(KD().mark((function e(){var t,n=arguments;return KD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:this.document,e.abrupt("return",ME(t,this.pmSchema,this,{}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"tryParseMarkdownToBlocks",value:(r=ZD(KD().mark((function e(t){return KD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",IE(t,this.pmSchema));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"updateCollaborationUserInfo",value:function(e){if(!this.options.collaboration)throw new Error("Cannot update collaboration user info when collaboration is disabled.");this.extensions.yCursorPlugin.updateUser(e)}},{key:"onChange",value:function(e){var t=this;if(!this.headless){var n=function(n){var r=n.transaction,o=n.appendedTransactions;e(t,{getChanges:function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={type:"local"};e.getMeta("paste")?n={type:"paste"}:"drop"===e.getMeta("uiEvent")?n={type:"drop"}:e.getMeta("history$")?n={type:e.getMeta("history$").redo?"redo":"undo"}:e.getMeta("y-sync$")&&(n=e.getMeta("y-sync$").isUndoRedoOperation?{type:"undo-redo"}:{type:"yjs-remote"});var r,o=nC(e),i=iu(e.before,[e].concat(QD(t))),a=cu(i),s=a.flatMap((function(e){return su(i.before,e.oldRange,NC)})).map((function(e){return fC(e.node,o)})),u=a.flatMap((function(e){return su(i.doc,e.newRange,NC)})).map((function(e){return fC(e.node,o)})),l=new Map(u.map((function(e){return[e.id,e]}))),c=new Map(s.map((function(e){return[e.id,e]}))),d=[],f=YD(l);try{for(f.s();!(r=f.n()).done;){var p=ew(r.value,2),h=p[0],m=p[1];c.has(h)||d.push({type:"insert",block:m,source:n,prevBlock:void 0})}}catch(e){f.e(e)}finally{f.f()}var v,g=YD(c);try{for(g.s();!(v=g.n()).done;){var y=ew(v.value,2),b=y[0],D=y[1];l.has(b)||d.push({type:"delete",block:D,source:n,prevBlock:void 0})}}catch(e){g.e(e)}finally{g.f()}var w,C=YD(l);try{for(C.s();!(w=C.n()).done;){var k=ew(w.value,2),E=k[0],x=k[1];if(c.has(E)){var S=c.get(E);jC(S,x)&&d.push({type:"update",block:x,prevBlock:S,source:n})}}}catch(e){C.e(e)}finally{C.f()}return d}(r,o)}})};return this._tiptapEditor.on("v3-update",n),function(){t._tiptapEditor.off("v3-update",n)}}}},{key:"onSelectionChange",value:function(e,t){var n=this;if(!this.headless){var r=function(r){r.transaction.getMeta(Pb)&&!t||e(n)};return this._tiptapEditor.on("selectionUpdate",r),function(){n._tiptapEditor.off("selectionUpdate",r)}}}},{key:"onCreate",value:function(e){var t=this;return this.on("create",e),function(){t.off("create",e)}}},{key:"getSelectionBoundingBox",value:function(){if(this.prosemirrorView){var e=this.prosemirrorState.selection,t=e.ranges,n=Math.min.apply(Math,QD(t.map((function(e){return e.$from.pos})))),r=Math.max.apply(Math,QD(t.map((function(e){return e.$to.pos}))));if(vu(e)){var o=this.prosemirrorView.nodeDOM(n);if(o)return o.getBoundingClientRect()}return gu(this.prosemirrorView,n,r)}}},{key:"isEmpty",get:function(){var e=this.document;return 0===e.length||1===e.length&&"paragraph"===e[0].type&&0===e[0].content.length}},{key:"openSuggestionMenu",value:function(e,t){var n=this;this.prosemirrorView&&(this.focus(),this.transact((function(r){null!=t&&t.deleteTriggerCharacter&&r.insertText(e),r.scrollIntoView().setMeta(n.suggestionMenus.plugins[0],{triggerCharacter:e,deleteTriggerCharacter:(null==t?void 0:t.deleteTriggerCharacter)||!1,ignoreQueryLength:(null==t?void 0:t.ignoreQueryLength)||!1})})))}},{key:"getForceSelectionVisible",value:function(){return this.showSelectionPlugin.getEnabled()}},{key:"setForceSelectionVisible",value:function(e){this.showSelectionPlugin.setEnabled(e)}},{key:"convertHtmlToBlockNoteHtml",value:function(e){return TE(e.trim()).innerHTML}},{key:"pasteHTML",value:function(e){var t,n=e;arguments.length>1&&void 0!==arguments[1]&&arguments[1]||(n=this.convertHtmlToBlockNoteHtml(e)),n&&(null==(t=this.prosemirrorView)||t.pasteHTML(n))}},{key:"pasteText",value:function(e){var t;return null==(t=this.prosemirrorView)?void 0:t.pasteText(e)}},{key:"pasteMarkdown",value:(n=ZD(KD().mark((function e(t){return KD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,RE(t);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.pasteHTML.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}],[{key:"create",value:function(){return new t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}}]);var n,r,o,i,a,s}(mx);function RS(){return LS.apply(this,arguments)}function LS(){return LS=ZD(KD().mark((function e(){return KD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",NS||(NS=ZD(KD().mark((function e(){var t,n,r,o,i,s;return KD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([a.e(8517).then(a.bind(a,8517)),a.e(3274).then(a.t.bind(a,3274,17))]);case 2:return t=e.sent,n=ew(t,2),r=n[0],o=n[1],i="default"in r?r.default:r,s="default"in o?o.default:o,e.next=10,i.init({data:s});case 10:return e.abrupt("return",{emojiMart:i,emojiData:s});case 11:case"end":return e.stop()}}),e)})))(),NS));case 1:case"end":return e.stop()}}),e)}))),LS.apply(this,arguments)}function IS(e,t){return HS.apply(this,arguments)}function HS(){return HS=ZD(KD().mark((function e(t,n){var r,o,i;return KD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(oE("text",t)){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,RS();case 4:if(r=e.sent,o=r.emojiData,i=r.emojiMart,""!==n.trim()){e.next=11;break}e.t0=Object.values(o.emojis),e.next=14;break;case 11:return e.next=13,i.SearchIndex.search(n);case 13:e.t0=e.sent;case 14:return e.abrupt("return",e.t0.map((function(e){return{id:e.skins[0].native,onItemClick:function(){return t.insertInlineContent(e.skins[0].native+" ")}}})));case 15:case"end":return e.stop()}}),e)}))),HS.apply(this,arguments)}function zS(){return"undefined"!=typeof window}function VS(e){return GS(e)?(e.nodeName||"").toLowerCase():"#document"}function $S(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function US(e){var t;return null==(t=(GS(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function GS(e){return!!zS()&&(e instanceof Node||e instanceof $S(e).Node)}function WS(e){return!!zS()&&(e instanceof Element||e instanceof $S(e).Element)}function qS(e){return!!zS()&&(e instanceof HTMLElement||e instanceof $S(e).HTMLElement)}function KS(e){return!(!zS()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof $S(e).ShadowRoot)}function JS(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=tA(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function ZS(e){return["table","td","th"].includes(VS(e))}function XS(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(e){return!1}}))}function YS(e){const t=QS(),n=WS(e)?tA(e):e;return["transform","translate","scale","rotate","perspective"].some((e=>!!n[e]&&"none"!==n[e]))||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function QS(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function eA(e){return["html","body","#document"].includes(VS(e))}function tA(e){return $S(e).getComputedStyle(e)}function nA(e){return WS(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function rA(e){if("html"===VS(e))return e;const t=e.assignedSlot||e.parentNode||KS(e)&&e.host||US(e);return KS(t)?t.host:t}function oA(e){const t=rA(e);return eA(t)?e.ownerDocument?e.ownerDocument.body:e.body:qS(t)&&JS(t)?t:oA(t)}function iA(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const o=oA(e),i=o===(null==(r=e.ownerDocument)?void 0:r.body),a=$S(o);if(i){const e=aA(a);return t.concat(a,a.visualViewport||[],JS(o)?o:[],e&&n?iA(e):[])}return t.concat(o,iA(o,[],n))}function aA(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function sA(e){let t=e.activeElement;for(;null!=(null==(n=t)||null==(n=n.shadowRoot)?void 0:n.activeElement);){var n;t=t.shadowRoot.activeElement}return t}function uA(e,t){if(!e||!t)return!1;const n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&KS(n)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function lA(){const e=navigator.userAgentData;return null!=e&&e.platform?e.platform:navigator.platform}function cA(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map((e=>{let{brand:t,version:n}=e;return t+"/"+n})).join(" "):navigator.userAgent}function dA(){return/apple/i.test(navigator.vendor)}function fA(){const e=/android/i;return e.test(lA())||e.test(cA())}function pA(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function hA(e){return(null==e?void 0:e.ownerDocument)||document}function mA(e,t){if(null==t)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return null!=n.target&&t.contains(n.target)}function vA(e){return"composedPath"in e?e.composedPath()[0]:e.target}var gA=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"].join(","),yA="undefined"==typeof Element,bA=yA?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,DA=!yA&&Element.prototype.getRootNode?function(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null==e?void 0:e.ownerDocument},wA=function e(t,n){var r;void 0===n&&(n=!0);var o=null==t||null===(r=t.getAttribute)||void 0===r?void 0:r.call(t,"inert");return""===o||"true"===o||n&&t&&e(t.parentNode)},CA=function e(t,n,r){for(var o=[],i=Array.from(t);i.length;){var a=i.shift();if(!wA(a,!1))if("SLOT"===a.tagName){var s=a.assignedElements(),u=e(s.length?s:a.children,!0,r);r.flatten?o.push.apply(o,u):o.push({scopeParent:a,candidates:u})}else{bA.call(a,gA)&&r.filter(a)&&(n||!t.includes(a))&&o.push(a);var l=a.shadowRoot||"function"==typeof r.getShadowRoot&&r.getShadowRoot(a),c=!wA(l,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(l&&c){var d=e(!0===l?a.children:l.children,!0,r);r.flatten?o.push.apply(o,d):o.push({scopeParent:a,candidates:d})}else i.unshift.apply(i,a.children)}}return o},kA=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},EA=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||function(e){var t,n=null==e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===n||"true"===n}(e))&&!kA(e)?0:e.tabIndex},xA=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},SA=function(e){return"INPUT"===e.tagName},AA=function(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return 0===n&&0===r},FA=function(e,t){return!(t.disabled||wA(t)||function(e){return SA(e)&&"hidden"===e.type}(t)||function(e,t){var n=t.displayCheck,r=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var o=bA.call(e,"details>summary:first-of-type")?e.parentElement:e;if(bA.call(o,"details:not([open]) *"))return!0;if(n&&"full"!==n&&"legacy-full"!==n){if("non-zero-area"===n)return AA(e)}else{if("function"==typeof r){for(var i=e;e;){var a=e.parentElement,s=DA(e);if(a&&!a.shadowRoot&&!0===r(a))return AA(e);e=e.assignedSlot?e.assignedSlot:a||s===e.ownerDocument?a:s.host}e=i}if(function(e){var t,n,r,o,i=e&&DA(e),a=null===(t=i)||void 0===t?void 0:t.host,s=!1;if(i&&i!==e)for(s=!!(null!==(n=a)&&void 0!==n&&null!==(r=n.ownerDocument)&&void 0!==r&&r.contains(a)||null!=e&&null!==(o=e.ownerDocument)&&void 0!==o&&o.contains(e));!s&&a;){var u,l,c;s=!(null===(l=a=null===(u=i=DA(a))||void 0===u?void 0:u.host)||void 0===l||null===(c=l.ownerDocument)||void 0===c||!c.contains(a))}return s}(e))return!e.getClientRects().length;if("legacy-full"!==n)return!0}return!1}(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}))}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var r=t.children.item(n);if("LEGEND"===r.tagName)return!!bA.call(t,"fieldset[disabled] *")||!r.contains(e)}return!0}t=t.parentElement}return!1}(t))},OA=function(e,t){return!(function(e){return function(e){return SA(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,n=e.form||DA(e),r=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=r(window.CSS.escape(e.name));else try{t=r(e.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message),!1}var o=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(t,e.form);return!o||o===e}(e)}(t)||EA(t)<0||!FA(e,t))},MA=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},BA=function e(t){var n=[],r=[];return t.forEach((function(t,o){var i=!!t.scopeParent,a=i?t.scopeParent:t,s=function(e,t){var n=EA(e);return n<0&&t&&!kA(e)?0:n}(a,i),u=i?e(t.candidates):a;0===s?i?n.push.apply(n,u):n.push(a):r.push({documentOrder:o,tabIndex:s,item:t,isScope:i,content:u})})),r.sort(xA).reduce((function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e}),[]).concat(n)},PA=function(e,t){var n;return n=(t=t||{}).getShadowRoot?CA([e],t.includeContainer,{filter:OA.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:MA}):function(e,t,n){if(wA(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(gA));return t&&bA.call(e,gA)&&r.unshift(e),r.filter(n)}(e,t.includeContainer,OA.bind(null,t)),BA(n)},TA=a(2326);const NA=Math.min,jA=Math.max,_A=Math.round,RA=Math.floor,LA=e=>({x:e,y:e}),IA={left:"right",right:"left",bottom:"top",top:"bottom"},HA={start:"end",end:"start"};function zA(e,t,n){return jA(e,NA(t,n))}function VA(e,t){return"function"==typeof e?e(t):e}function $A(e){return e.split("-")[0]}function UA(e){return e.split("-")[1]}function GA(e){return"x"===e?"y":"x"}function WA(e){return"y"===e?"height":"width"}function qA(e){return["top","bottom"].includes($A(e))?"y":"x"}function KA(e){return GA(qA(e))}function JA(e){return e.replace(/start|end/g,(e=>HA[e]))}function ZA(e){return e.replace(/left|right|bottom|top/g,(e=>IA[e]))}function XA(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function YA(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function QA(e,t,n){let{reference:r,floating:o}=e;const i=qA(t),a=KA(t),s=WA(a),u=$A(t),l="y"===i,c=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,f=r[s]/2-o[s]/2;let p;switch(u){case"top":p={x:c,y:r.y-o.height};break;case"bottom":p={x:c,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-o.width,y:d};break;default:p={x:r.x,y:r.y}}switch(UA(t)){case"start":p[a]-=f*(n&&l?-1:1);break;case"end":p[a]+=f*(n&&l?-1:1)}return p}async function eF(e,t){var n;void 0===t&&(t={});const{x:r,y:o,platform:i,rects:a,elements:s,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=VA(t,e),h=XA(p),m=s[f?"floating"===d?"reference":"floating":d],v=YA(await i.getClippingRect({element:null==(n=await(null==i.isElement?void 0:i.isElement(m)))||n?m:m.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(s.floating)),boundary:l,rootBoundary:c,strategy:u})),g="floating"===d?{x:r,y:o,width:a.floating.width,height:a.floating.height}:a.reference,y=await(null==i.getOffsetParent?void 0:i.getOffsetParent(s.floating)),b=await(null==i.isElement?void 0:i.isElement(y))&&await(null==i.getScale?void 0:i.getScale(y))||{x:1,y:1},D=YA(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:g,offsetParent:y,strategy:u}):g);return{top:(v.top-D.top+h.top)/b.y,bottom:(D.bottom-v.bottom+h.bottom)/b.y,left:(v.left-D.left+h.left)/b.x,right:(D.right-v.right+h.right)/b.x}}function tF(e){const t=NA(...e.map((e=>e.left))),n=NA(...e.map((e=>e.top)));return{x:t,y:n,width:jA(...e.map((e=>e.right)))-t,height:jA(...e.map((e=>e.bottom)))-n}}function nF(e){const t=tA(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=qS(e),i=o?e.offsetWidth:n,a=o?e.offsetHeight:r,s=_A(n)!==i||_A(r)!==a;return s&&(n=i,r=a),{width:n,height:r,$:s}}function rF(e){return WS(e)?e:e.contextElement}function oF(e){const t=rF(e);if(!qS(t))return LA(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:i}=nF(t);let a=(i?_A(n.width):n.width)/r,s=(i?_A(n.height):n.height)/o;return a&&Number.isFinite(a)||(a=1),s&&Number.isFinite(s)||(s=1),{x:a,y:s}}const iF=LA(0);function aF(e){const t=$S(e);return QS()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:iF}function sF(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const o=e.getBoundingClientRect(),i=rF(e);let a=LA(1);t&&(r?WS(r)&&(a=oF(r)):a=oF(e));const s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==$S(e))&&t}(i,n,r)?aF(i):LA(0);let u=(o.left+s.x)/a.x,l=(o.top+s.y)/a.y,c=o.width/a.x,d=o.height/a.y;if(i){const e=$S(i),t=r&&WS(r)?$S(r):r;let n=e,o=aA(n);for(;o&&r&&t!==n;){const e=oF(o),t=o.getBoundingClientRect(),r=tA(o),i=t.left+(o.clientLeft+parseFloat(r.paddingLeft))*e.x,a=t.top+(o.clientTop+parseFloat(r.paddingTop))*e.y;u*=e.x,l*=e.y,c*=e.x,d*=e.y,u+=i,l+=a,n=$S(o),o=aA(n)}}return YA({width:c,height:d,x:u,y:l})}function uF(e,t){const n=nA(e).scrollLeft;return t?t.left+n:sF(US(e)).left+n}function lF(e,t,n){void 0===n&&(n=!1);const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:uF(e,r)),y:r.top+t.scrollTop}}function cF(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=$S(e),r=US(e),o=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,s=0,u=0;if(o){i=o.width,a=o.height;const e=QS();(!e||e&&"fixed"===t)&&(s=o.offsetLeft,u=o.offsetTop)}return{width:i,height:a,x:s,y:u}}(e,n);else if("document"===t)r=function(e){const t=US(e),n=nA(e),r=e.ownerDocument.body,o=jA(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=jA(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+uF(e);const s=-n.scrollTop;return"rtl"===tA(r).direction&&(a+=jA(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:a,y:s}}(US(e));else if(WS(t))r=function(e,t){const n=sF(e,!0,"fixed"===t),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=qS(e)?oF(e):LA(1);return{width:e.clientWidth*i.x,height:e.clientHeight*i.y,x:o*i.x,y:r*i.y}}(t,n);else{const n=aF(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return YA(r)}function dF(e,t){const n=rA(e);return!(n===t||!WS(n)||eA(n))&&("fixed"===tA(n).position||dF(n,t))}function fF(e,t,n){const r=qS(t),o=US(t),i="fixed"===n,a=sF(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const u=LA(0);function l(){u.x=uF(o)}if(r||!r&&!i)if(("body"!==VS(t)||JS(o))&&(s=nA(t)),r){const e=sF(t,!0,i,t);u.x=e.x+t.clientLeft,u.y=e.y+t.clientTop}else o&&l();i&&!r&&o&&l();const c=!o||r||i?LA(0):lF(o,s);return{x:a.left+s.scrollLeft-u.x-c.x,y:a.top+s.scrollTop-u.y-c.y,width:a.width,height:a.height}}function pF(e){return"static"===tA(e).position}function hF(e,t){if(!qS(e)||"fixed"===tA(e).position)return null;if(t)return t(e);let n=e.offsetParent;return US(e)===n&&(n=n.ownerDocument.body),n}function mF(e,t){const n=$S(e);if(XS(e))return n;if(!qS(e)){let t=rA(e);for(;t&&!eA(t);){if(WS(t)&&!pF(t))return t;t=rA(t)}return n}let r=hF(e,t);for(;r&&ZS(r)&&pF(r);)r=hF(r,t);return r&&eA(r)&&pF(r)&&!YS(r)?n:r||function(e){let t=rA(e);for(;qS(t)&&!eA(t);){if(YS(t))return t;if(XS(t))return null;t=rA(t)}return null}(e)||n}const vF={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const i="fixed"===o,a=US(r),s=!!t&&XS(t.floating);if(r===a||s&&i)return n;let u={scrollLeft:0,scrollTop:0},l=LA(1);const c=LA(0),d=qS(r);if((d||!d&&!i)&&(("body"!==VS(r)||JS(a))&&(u=nA(r)),qS(r))){const e=sF(r);l=oF(r),c.x=e.x+r.clientLeft,c.y=e.y+r.clientTop}const f=!a||d||i?LA(0):lF(a,u,!0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x+f.x,y:n.y*l.y-u.scrollTop*l.y+c.y+f.y}},getDocumentElement:US,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i="clippingAncestors"===n?XS(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=iA(e,[],!1).filter((e=>WS(e)&&"body"!==VS(e))),o=null;const i="fixed"===tA(e).position;let a=i?rA(e):e;for(;WS(a)&&!eA(a);){const t=tA(a),n=YS(a);n||"fixed"!==t.position||(o=null),(i?!n&&!o:!n&&"static"===t.position&&o&&["absolute","fixed"].includes(o.position)||JS(a)&&!n&&dF(e,a))?r=r.filter((e=>e!==a)):o=t,a=rA(a)}return t.set(e,r),r}(t,this._c):[].concat(n),a=[...i,r],s=a[0],u=a.reduce(((e,n)=>{const r=cF(t,n,o);return e.top=jA(r.top,e.top),e.right=NA(r.right,e.right),e.bottom=NA(r.bottom,e.bottom),e.left=jA(r.left,e.left),e}),cF(t,s,o));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}},getOffsetParent:mF,getElementRects:async function(e){const t=this.getOffsetParent||mF,n=this.getDimensions,r=await n(e.floating);return{reference:fF(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=nF(e);return{width:t,height:n}},getScale:oF,isElement:WS,isRTL:function(e){return"rtl"===tA(e).direction}};function gF(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}const yF=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:i,placement:a,middlewareData:s}=t,u=await async function(e,t){const{placement:n,platform:r,elements:o}=e,i=await(null==r.isRTL?void 0:r.isRTL(o.floating)),a=$A(n),s=UA(n),u="y"===qA(n),l=["left","top"].includes(a)?-1:1,c=i&&u?-1:1,d=VA(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:h}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&"number"==typeof h&&(p="end"===s?-1*h:h),u?{x:p*c,y:f*l}:{x:f*l,y:p*c}}(t,e);return a===(null==(n=s.offset)?void 0:n.placement)&&null!=(r=s.arrow)&&r.alignmentOffset?{}:{x:o+u.x,y:i+u.y,data:{...u,placement:a}}}}},bF=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:s={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...u}=VA(e,t),l={x:n,y:r},c=await eF(t,u),d=qA($A(o)),f=GA(d);let p=l[f],h=l[d];if(i){const e="y"===f?"bottom":"right";p=zA(p+c["y"===f?"top":"left"],p,p-c[e])}if(a){const e="y"===d?"bottom":"right";h=zA(h+c["y"===d?"top":"left"],h,h-c[e])}const m=s.fn({...t,[f]:p,[d]:h});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:i,[d]:a}}}}}},DF=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:i,rects:a,initialPlacement:s,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:m=!0,...v}=VA(e,t);if(null!=(n=i.arrow)&&n.alignmentOffset)return{};const g=$A(o),y=qA(s),b=$A(s)===s,D=await(null==u.isRTL?void 0:u.isRTL(l.floating)),w=f||(b||!m?[ZA(s)]:function(e){const t=ZA(e);return[JA(e),t,JA(t)]}(s)),C="none"!==h;!f&&C&&w.push(...function(e,t,n,r){const o=UA(e);let i=function(e,t,n){const r=["left","right"],o=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?i:a;default:return[]}}($A(e),"start"===n,r);return o&&(i=i.map((e=>e+"-"+o)),t&&(i=i.concat(i.map(JA)))),i}(s,m,h,D));const k=[s,...w],E=await eF(t,v),x=[];let S=(null==(r=i.flip)?void 0:r.overflows)||[];if(c&&x.push(E[g]),d){const e=function(e,t,n){void 0===n&&(n=!1);const r=UA(e),o=KA(e),i=WA(o);let a="x"===o?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=ZA(a)),[a,ZA(a)]}(o,a,D);x.push(E[e[0]],E[e[1]])}if(S=[...S,{placement:o,overflows:x}],!x.every((e=>e<=0))){var A,F;const e=((null==(A=i.flip)?void 0:A.index)||0)+1,t=k[e];if(t&&("alignment"!==d||y===qA(t)||S.every((e=>e.overflows[0]>0&&qA(e.placement)===y))))return{data:{index:e,overflows:S},reset:{placement:t}};let n=null==(F=S.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:F.placement;if(!n)switch(p){case"bestFit":{var O;const e=null==(O=S.filter((e=>{if(C){const t=qA(e.placement);return t===y||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:O[0];e&&(n=e);break}case"initialPlacement":n=s}if(o!==n)return{reset:{placement:n}}}return{}}}},wF=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:i,platform:a,elements:s}=t,{apply:u=()=>{},...l}=VA(e,t),c=await eF(t,l),d=$A(o),f=UA(o),p="y"===qA(o),{width:h,height:m}=i.floating;let v,g;"top"===d||"bottom"===d?(v=d,g=f===(await(null==a.isRTL?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(g=d,v="end"===f?"top":"bottom");const y=m-c.top-c.bottom,b=h-c.left-c.right,D=NA(m-c[v],y),w=NA(h-c[g],b),C=!t.middlewareData.shift;let k=D,E=w;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(E=b),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(k=y),C&&!f){const e=jA(c.left,0),t=jA(c.right,0),n=jA(c.top,0),r=jA(c.bottom,0);p?E=h-2*(0!==e||0!==t?e+t:jA(c.left,c.right)):k=m-2*(0!==n||0!==r?n+r:jA(c.top,c.bottom))}await u({...t,availableWidth:E,availableHeight:k});const x=await a.getDimensions(s.floating);return h!==x.width||m!==x.height?{reset:{rects:!0}}:{}}}},CF=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:i,platform:a,elements:s,middlewareData:u}=t,{element:l,padding:c=0}=VA(e,t)||{};if(null==l)return{};const d=XA(c),f={x:n,y:r},p=KA(o),h=WA(p),m=await a.getDimensions(l),v="y"===p,g=v?"top":"left",y=v?"bottom":"right",b=v?"clientHeight":"clientWidth",D=i.reference[h]+i.reference[p]-f[p]-i.floating[h],w=f[p]-i.reference[p],C=await(null==a.getOffsetParent?void 0:a.getOffsetParent(l));let k=C?C[b]:0;k&&await(null==a.isElement?void 0:a.isElement(C))||(k=s.floating[b]||i.floating[h]);const E=D/2-w/2,x=k/2-m[h]/2-1,S=NA(d[g],x),A=NA(d[y],x),F=S,O=k-m[h]-A,M=k/2-m[h]/2+E,B=zA(F,M,O),P=!u.arrow&&null!=UA(o)&&M!==B&&i.reference[h]/2-(M<F?S:A)-m[h]/2<0,T=P?M<F?M-F:M-O:0;return{[p]:f[p]+T,data:{[p]:B,centerOffset:M-B-T,...P&&{alignmentOffset:T}},reset:P}}}),kF=function(e){return void 0===e&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:o,platform:i,strategy:a}=t,{padding:s=2,x:u,y:l}=VA(e,t),c=Array.from(await(null==i.getClientRects?void 0:i.getClientRects(r.reference))||[]),d=function(e){const t=e.slice().sort(((e,t)=>e.y-t.y)),n=[];let r=null;for(let e=0;e<t.length;e++){const o=t[e];!r||o.y-r.y>r.height/2?n.push([o]):n[n.length-1].push(o),r=o}return n.map((e=>YA(tF(e))))}(c),f=YA(tF(c)),p=XA(s),h=await i.getElementRects({reference:{getBoundingClientRect:function(){if(2===d.length&&d[0].left>d[1].right&&null!=u&&null!=l)return d.find((e=>u>e.left-p.left&&u<e.right+p.right&&l>e.top-p.top&&l<e.bottom+p.bottom))||f;if(d.length>=2){if("y"===qA(n)){const e=d[0],t=d[d.length-1],r="top"===$A(n),o=e.top,i=t.bottom,a=r?e.left:t.left,s=r?e.right:t.right;return{top:o,bottom:i,left:a,right:s,width:s-a,height:i-o,x:a,y:o}}const e="left"===$A(n),t=jA(...d.map((e=>e.right))),r=NA(...d.map((e=>e.left))),o=d.filter((n=>e?n.left===r:n.right===t)),i=o[0].top,a=o[o.length-1].bottom;return{top:i,bottom:a,left:r,right:t,width:t-r,height:a-i,x:r,y:i}}return f}},floating:r.floating,strategy:a});return o.reference.x!==h.reference.x||o.reference.y!==h.reference.y||o.reference.width!==h.reference.width||o.reference.height!==h.reference.height?{reset:{rects:h}}:{}}}},EF=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:i,middlewareData:a}=t,{offset:s=0,mainAxis:u=!0,crossAxis:l=!0}=VA(e,t),c={x:n,y:r},d=qA(o),f=GA(d);let p=c[f],h=c[d];const m=VA(s,t),v="number"==typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const e="y"===f?"height":"width",t=i.reference[f]-i.floating[e]+v.mainAxis,n=i.reference[f]+i.reference[e]-v.mainAxis;p<t?p=t:p>n&&(p=n)}if(l){var g,y;const e="y"===f?"width":"height",t=["top","left"].includes($A(o)),n=i.reference[d]-i.floating[e]+(t&&(null==(g=a.offset)?void 0:g[d])||0)+(t?0:v.crossAxis),r=i.reference[d]+i.reference[e]+(t?0:(null==(y=a.offset)?void 0:y[d])||0)-(t?v.crossAxis:0);h<n?h=n:h>r&&(h=r)}return{[f]:p,[d]:h}}}},xF=(e,t,n)=>{const r=new Map,o={platform:vF,...n},i={...o.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:a}=n,s=i.filter(Boolean),u=await(null==a.isRTL?void 0:a.isRTL(t));let l=await a.getElementRects({reference:e,floating:t,strategy:o}),{x:c,y:d}=QA(l,r,u),f=r,p={},h=0;for(let n=0;n<s.length;n++){const{name:i,fn:m}=s[n],{x:v,y:g,data:y,reset:b}=await m({x:c,y:d,initialPlacement:r,placement:f,strategy:o,middlewareData:p,rects:l,platform:a,elements:{reference:e,floating:t}});c=null!=v?v:c,d=null!=g?g:d,p={...p,[i]:{...p[i],...y}},b&&h<=50&&(h++,"object"==typeof b&&(b.placement&&(f=b.placement),b.rects&&(l=!0===b.rects?await a.getElementRects({reference:e,floating:t,strategy:o}):b.rects),({x:c,y:d}=QA(l,f,u))),n=-1)}return{x:c,y:d,placement:f,strategy:o,middlewareData:p}})(e,t,{...o,platform:i})};var SF="undefined"!=typeof document?o.useLayoutEffect:function(){};function AF(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!=r--;)if(!AF(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;0!=r--;){const n=o[r];if(!("_owner"===n&&e.$$typeof||AF(e[n],t[n])))return!1}return!0}return e!=e&&t!=t}function FF(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function OF(e,t){const n=FF(e);return Math.round(t*n)/n}function MF(e){const t=o.useRef(e);return SF((()=>{t.current=e})),t}const BF=e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"==typeof e?e(t):e;return n&&(o=n,{}.hasOwnProperty.call(o,"current"))?null!=n.current?CF({element:n.current,padding:r}).fn(t):{}:n?CF({element:n,padding:r}).fn(t):{};var o}}),PF=(e,t)=>({...yF(e),options:[e,t]}),TF=(e,t)=>({...bF(e),options:[e,t]}),NF=(e,t)=>({...EF(e),options:[e,t]}),jF=(e,t)=>({...DF(e),options:[e,t]}),_F=(e,t)=>({...wF(e),options:[e,t]}),RF=(e,t)=>({...kF(e),options:[e,t]}),LF=(e,t)=>({...BF(e),options:[e,t]}),IF={...i},HF=IF.useInsertionEffect||(e=>e());function zF(e){const t=o.useRef((()=>{}));return HF((()=>{t.current=e})),o.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}var VF="undefined"!=typeof document?o.useLayoutEffect:o.useEffect;function $F(){return $F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$F.apply(this,arguments)}let UF=!1,GF=0;const WF=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+GF++,qF=IF.useId||function(){const[e,t]=o.useState((()=>UF?WF():void 0));return VF((()=>{null==e&&t(WF())}),[]),o.useEffect((()=>{UF=!0}),[]),e};const KF=o.createContext(null),JF=o.createContext(null),ZF=()=>{var e;return(null==(e=o.useContext(KF))?void 0:e.id)||null},XF=()=>o.useContext(JF);function YF(e){return"data-floating-ui-"+e}function QF(e){const t=(0,o.useRef)(e);return VF((()=>{t.current=e})),t}const eO=YF("safe-polygon");function tO(e,t,n){return n&&!pA(n)?0:"number"==typeof e?e:null==e?void 0:e[t]}function nO(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:a,elements:s}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:d=!1,restMs:f=0,move:p=!0}=t,h=XF(),m=ZF(),v=QF(c),g=QF(l),y=QF(n),b=o.useRef(),D=o.useRef(-1),w=o.useRef(),C=o.useRef(-1),k=o.useRef(!0),E=o.useRef(!1),x=o.useRef((()=>{})),S=o.useRef(!1),A=o.useCallback((()=>{var e;const t=null==(e=i.current.openEvent)?void 0:e.type;return(null==t?void 0:t.includes("mouse"))&&"mousedown"!==t}),[i]);o.useEffect((()=>{if(u)return a.on("openchange",e),()=>{a.off("openchange",e)};function e(e){let{open:t}=e;t||(clearTimeout(D.current),clearTimeout(C.current),k.current=!0,S.current=!1)}}),[u,a]),o.useEffect((()=>{if(!u)return;if(!v.current)return;if(!n)return;function e(e){A()&&r(!1,e,"hover")}const t=hA(s.floating).documentElement;return t.addEventListener("mouseleave",e),()=>{t.removeEventListener("mouseleave",e)}}),[s.floating,n,r,u,v,A]);const F=o.useCallback((function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="hover");const o=tO(g.current,"close",b.current);o&&!w.current?(clearTimeout(D.current),D.current=window.setTimeout((()=>r(!1,e,n)),o)):t&&(clearTimeout(D.current),r(!1,e,n))}),[g,r]),O=zF((()=>{x.current(),w.current=void 0})),M=zF((()=>{if(E.current){const e=hA(s.floating).body;e.style.pointerEvents="",e.removeAttribute(eO),E.current=!1}})),B=zF((()=>!!i.current.openEvent&&["click","mousedown"].includes(i.current.openEvent.type)));o.useEffect((()=>{if(u&&WS(s.domReference)){var e;const r=s.domReference;return n&&r.addEventListener("mouseleave",a),null==(e=s.floating)||e.addEventListener("mouseleave",a),p&&r.addEventListener("mousemove",t,{once:!0}),r.addEventListener("mouseenter",t),r.addEventListener("mouseleave",o),()=>{var e;n&&r.removeEventListener("mouseleave",a),null==(e=s.floating)||e.removeEventListener("mouseleave",a),p&&r.removeEventListener("mousemove",t),r.removeEventListener("mouseenter",t),r.removeEventListener("mouseleave",o)}}function t(e){if(clearTimeout(D.current),k.current=!1,d&&!pA(b.current)||f>0&&!tO(g.current,"open"))return;const t=tO(g.current,"open",b.current);t?D.current=window.setTimeout((()=>{y.current||r(!0,e,"hover")}),t):n||r(!0,e,"hover")}function o(e){if(B())return;x.current();const t=hA(s.floating);if(clearTimeout(C.current),S.current=!1,v.current&&i.current.floatingContext){n||clearTimeout(D.current),w.current=v.current({...i.current.floatingContext,tree:h,x:e.clientX,y:e.clientY,onClose(){M(),O(),B()||F(e,!0,"safe-polygon")}});const r=w.current;return t.addEventListener("mousemove",r),void(x.current=()=>{t.removeEventListener("mousemove",r)})}("touch"!==b.current||!uA(s.floating,e.relatedTarget))&&F(e)}function a(e){B()||i.current.floatingContext&&(null==v.current||v.current({...i.current.floatingContext,tree:h,x:e.clientX,y:e.clientY,onClose(){M(),O(),B()||F(e)}})(e))}}),[s,u,e,d,f,p,F,O,M,r,n,y,h,g,v,i,B]),VF((()=>{var e;if(u&&n&&null!=(e=v.current)&&e.__options.blockPointerEvents&&A()){E.current=!0;const e=s.floating;if(WS(s.domReference)&&e){var t;const n=hA(s.floating).body;n.setAttribute(eO,"");const r=s.domReference,o=null==h||null==(t=h.nodesRef.current.find((e=>e.id===m)))||null==(t=t.context)?void 0:t.elements.floating;return o&&(o.style.pointerEvents=""),n.style.pointerEvents="none",r.style.pointerEvents="auto",e.style.pointerEvents="auto",()=>{n.style.pointerEvents="",r.style.pointerEvents="",e.style.pointerEvents=""}}}}),[u,n,m,s,h,v,A]),VF((()=>{n||(b.current=void 0,S.current=!1,O(),M())}),[n,O,M]),o.useEffect((()=>()=>{O(),clearTimeout(D.current),clearTimeout(C.current),M()}),[u,s.domReference,O,M]);const P=o.useMemo((()=>{function e(e){b.current=e.pointerType}return{onPointerDown:e,onPointerEnter:e,onMouseMove(e){const{nativeEvent:t}=e;function o(){k.current||y.current||r(!0,t,"hover")}d&&!pA(b.current)||n||0===f||S.current&&e.movementX**2+e.movementY**2<2||(clearTimeout(C.current),"touch"===b.current?o():(S.current=!0,C.current=window.setTimeout(o,f)))}}}),[d,r,n,y,f]),T=o.useMemo((()=>({onMouseEnter(){clearTimeout(D.current)},onMouseLeave(e){B()||F(e.nativeEvent,!1)}})),[F,B]);return o.useMemo((()=>u?{reference:P,floating:T}:{}),[u,P,T])}const rO=()=>{},oO=o.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:rO,setState:rO,isInstantPhase:!1});function iO(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,a]=o.useReducer(((e,t)=>({...e,...t})),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),s=o.useRef(null),u=o.useCallback((e=>{a({currentId:e})}),[]);return VF((()=>{i.currentId?null===s.current?s.current=i.currentId:i.isInstantPhase||a({isInstantPhase:!0}):(i.isInstantPhase&&a({isInstantPhase:!1}),s.current=null)}),[i.currentId,i.isInstantPhase]),o.createElement(oO.Provider,{value:o.useMemo((()=>({...i,setState:a,setCurrentId:u})),[i,u])},t)}function aO(e,t){let n=e.filter((e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)})),r=n;for(;r.length;)r=e.filter((e=>{var t;return null==(t=r)?void 0:t.some((t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)}))})),n=n.concat(r);return n}const sO=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function uO(e,t){const n=PA(e,sO());"prev"===t&&n.reverse();const r=n.indexOf(sA(hA(e)));return n.slice(r+1)[0]}function lO(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!uA(n,r)}function cO(e){PA(e,sO()).forEach((e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")}))}function dO(e){e.querySelectorAll("[data-tabindex]").forEach((e=>{const t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}))}const fO={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};function pO(e){"Tab"===e.key&&(e.target,clearTimeout(void 0))}const hO=o.forwardRef((function(e,t){const[n,r]=o.useState();VF((()=>(dA()&&r("button"),document.addEventListener("keydown",pO),()=>{document.removeEventListener("keydown",pO)})),[]);const i={ref:t,tabIndex:0,role:n,"aria-hidden":!n||void 0,[YF("focus-guard")]:"",style:fO};return o.createElement("span",$F({},e,i))})),mO=o.createContext(null),vO=YF("portal");function gO(e){const{children:t,id:n,root:r,preserveTabOrder:i=!0}=e,a=function(e){void 0===e&&(e={});const{id:t,root:n}=e,r=qF(),i=yO(),[a,s]=o.useState(null),u=o.useRef(null);return VF((()=>()=>{null==a||a.remove(),queueMicrotask((()=>{u.current=null}))}),[a]),VF((()=>{if(!r)return;if(u.current)return;const e=t?document.getElementById(t):null;if(!e)return;const n=document.createElement("div");n.id=r,n.setAttribute(vO,""),e.appendChild(n),u.current=n,s(n)}),[t,r]),VF((()=>{if(null===n)return;if(!r)return;if(u.current)return;let e=n||(null==i?void 0:i.portalNode);e&&!WS(e)&&(e=e.current),e=e||document.body;let o=null;t&&(o=document.createElement("div"),o.id=t,e.appendChild(o));const a=document.createElement("div");a.id=r,a.setAttribute(vO,""),e=o||e,e.appendChild(a),u.current=a,s(a)}),[t,n,r,i]),a}({id:n,root:r}),[s,u]=o.useState(null),l=o.useRef(null),c=o.useRef(null),d=o.useRef(null),f=o.useRef(null),p=null==s?void 0:s.modal,h=null==s?void 0:s.open,m=!!s&&!s.modal&&s.open&&i&&!(!r&&!a);return o.useEffect((()=>{if(a&&i&&!p)return a.addEventListener("focusin",e,!0),a.addEventListener("focusout",e,!0),()=>{a.removeEventListener("focusin",e,!0),a.removeEventListener("focusout",e,!0)};function e(e){a&&lO(e)&&("focusin"===e.type?dO:cO)(a)}}),[a,i,p]),o.useEffect((()=>{a&&(h||dO(a))}),[h,a]),o.createElement(mO.Provider,{value:o.useMemo((()=>({preserveTabOrder:i,beforeOutsideRef:l,afterOutsideRef:c,beforeInsideRef:d,afterInsideRef:f,portalNode:a,setFocusManagerState:u})),[i,a])},m&&a&&o.createElement(hO,{"data-type":"outside",ref:l,onFocus:e=>{if(lO(e,a)){var t;null==(t=d.current)||t.focus()}else{const e=uO(document.body,"prev")||(null==s?void 0:s.refs.domReference.current);null==e||e.focus()}}}),m&&a&&o.createElement("span",{"aria-owns":a.id,style:fO}),a&&TA.createPortal(t,a),m&&a&&o.createElement(hO,{"data-type":"outside",ref:c,onFocus:e=>{if(lO(e,a)){var t;null==(t=f.current)||t.focus()}else{const t=uO(document.body,"next")||(null==s?void 0:s.refs.domReference.current);null==t||t.focus(),(null==s?void 0:s.closeOnFocusOut)&&(null==s||s.onOpenChange(!1,e.nativeEvent,"focus-out"))}}}))}const yO=()=>o.useContext(mO),bO="data-floating-ui-focusable",DO={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},wO={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},CO=e=>{var t,n;return{escapeKey:"boolean"==typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"==typeof e?e:null==(n=null==e?void 0:e.outsidePress)||n}};function kO(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:a}=e,{enabled:s=!0,escapeKey:u=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:d=!1,referencePressEvent:f="pointerdown",ancestorScroll:p=!1,bubbles:h,capture:m}=t,v=XF(),g=zF("function"==typeof l?l:()=>!1),y="function"==typeof l?g:l,b=o.useRef(!1),D=o.useRef(!1),{escapeKey:w,outsidePress:C}=CO(h),{escapeKey:k,outsidePress:E}=CO(m),x=o.useRef(!1),S=zF((e=>{var t;if(!n||!s||!u||"Escape"!==e.key)return;if(x.current)return;const o=null==(t=a.current.floatingContext)?void 0:t.nodeId,i=v?aO(v.nodesRef.current,o):[];if(!w&&(e.stopPropagation(),i.length>0)){let e=!0;if(i.forEach((t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__escapeKeyBubbles||(e=!1)})),!e)return}r(!1,function(e){return"nativeEvent"in e}(e)?e.nativeEvent:e,"escape-key")})),A=zF((e=>{var t;const n=()=>{var t;S(e),null==(t=vA(e))||t.removeEventListener("keydown",n)};null==(t=vA(e))||t.addEventListener("keydown",n)})),F=zF((e=>{var t;const n=b.current;b.current=!1;const o=D.current;if(D.current=!1,"click"===c&&o)return;if(n)return;if("function"==typeof y&&!y(e))return;const s=vA(e),u="["+YF("inert")+"]",l=hA(i.floating).querySelectorAll(u);let d=WS(s)?s:null;for(;d&&!eA(d);){const e=rA(d);if(eA(e)||!WS(e))break;d=e}if(l.length&&WS(s)&&!s.matches("html,body")&&!uA(s,i.floating)&&Array.from(l).every((e=>!uA(d,e))))return;if(qS(s)&&B){const t=s.clientWidth>0&&s.scrollWidth>s.clientWidth,n=s.clientHeight>0&&s.scrollHeight>s.clientHeight;let r=n&&e.offsetX>s.clientWidth;if(n&&"rtl"===tA(s).direction&&(r=e.offsetX<=s.offsetWidth-s.clientWidth),r||t&&e.offsetY>s.clientHeight)return}const f=null==(t=a.current.floatingContext)?void 0:t.nodeId,p=v&&aO(v.nodesRef.current,f).some((t=>{var n;return mA(e,null==(n=t.context)?void 0:n.elements.floating)}));if(mA(e,i.floating)||mA(e,i.domReference)||p)return;const h=v?aO(v.nodesRef.current,f):[];if(h.length>0){let e=!0;if(h.forEach((t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__outsidePressBubbles||(e=!1)})),!e)return}r(!1,e,"outside-press")})),O=zF((e=>{var t;const n=()=>{var t;F(e),null==(t=vA(e))||t.removeEventListener(c,n)};null==(t=vA(e))||t.addEventListener(c,n)}));o.useEffect((()=>{if(!n||!s)return;a.current.__escapeKeyBubbles=w,a.current.__outsidePressBubbles=C;let e=-1;function t(e){r(!1,e,"ancestor-scroll")}function o(){window.clearTimeout(e),x.current=!0}function l(){e=window.setTimeout((()=>{x.current=!1}),QS()?5:0)}const d=hA(i.floating);u&&(d.addEventListener("keydown",k?A:S,k),d.addEventListener("compositionstart",o),d.addEventListener("compositionend",l)),y&&d.addEventListener(c,E?O:F,E);let f=[];return p&&(WS(i.domReference)&&(f=iA(i.domReference)),WS(i.floating)&&(f=f.concat(iA(i.floating))),!WS(i.reference)&&i.reference&&i.reference.contextElement&&(f=f.concat(iA(i.reference.contextElement)))),f=f.filter((e=>{var t;return e!==(null==(t=d.defaultView)?void 0:t.visualViewport)})),f.forEach((e=>{e.addEventListener("scroll",t,{passive:!0})})),()=>{u&&(d.removeEventListener("keydown",k?A:S,k),d.removeEventListener("compositionstart",o),d.removeEventListener("compositionend",l)),y&&d.removeEventListener(c,E?O:F,E),f.forEach((e=>{e.removeEventListener("scroll",t)})),window.clearTimeout(e)}}),[a,i,u,y,c,n,r,p,s,w,C,S,k,A,F,E,O]),o.useEffect((()=>{b.current=!1}),[y,c]);const M=o.useMemo((()=>({onKeyDown:S,[DO[f]]:e=>{d&&r(!1,e.nativeEvent,"reference-press")}})),[S,r,d,f]),B=o.useMemo((()=>({onKeyDown:S,onMouseDown(){D.current=!0},onMouseUp(){D.current=!0},[wO[c]]:()=>{b.current=!0}})),[S,c]);return o.useMemo((()=>s?{reference:M,floating:B}:{}),[s,M,B])}function EO(e){void 0===e&&(e={});const{nodeId:t}=e,n=function(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=qF(),a=o.useRef({}),[s]=o.useState((()=>function(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach((e=>e(n)))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter((e=>e!==n)))||[])}}}())),u=null!=ZF(),[l,c]=o.useState(r.reference),d=zF(((e,t,r)=>{a.current.openEvent=e?t:void 0,s.emit("openchange",{open:e,event:t,reason:r,nested:u}),null==n||n(e,t,r)})),f=o.useMemo((()=>({setPositionReference:c})),[]),p=o.useMemo((()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference})),[l,r.reference,r.floating]);return o.useMemo((()=>({dataRef:a,open:t,onOpenChange:d,elements:p,events:s,floatingId:i,refs:f})),[t,d,p,s,i,f])}({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[a,s]=o.useState(null),[u,l]=o.useState(null),c=(null==i?void 0:i.domReference)||a,d=o.useRef(null),f=XF();VF((()=>{c&&(d.current=c)}),[c]);const p=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:s}={},transform:u=!0,whileElementsMounted:l,open:c}=e,[d,f]=o.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,h]=o.useState(r);AF(p,r)||h(r);const[m,v]=o.useState(null),[g,y]=o.useState(null),b=o.useCallback((e=>{e!==k.current&&(k.current=e,v(e))}),[]),D=o.useCallback((e=>{e!==E.current&&(E.current=e,y(e))}),[]),w=a||m,C=s||g,k=o.useRef(null),E=o.useRef(null),x=o.useRef(d),S=null!=l,A=MF(l),F=MF(i),O=MF(c),M=o.useCallback((()=>{if(!k.current||!E.current)return;const e={placement:t,strategy:n,middleware:p};F.current&&(e.platform=F.current),xF(k.current,E.current,e).then((e=>{const t={...e,isPositioned:!1!==O.current};B.current&&!AF(x.current,t)&&(x.current=t,TA.flushSync((()=>{f(t)})))}))}),[p,t,n,F,O]);SF((()=>{!1===c&&x.current.isPositioned&&(x.current.isPositioned=!1,f((e=>({...e,isPositioned:!1}))))}),[c]);const B=o.useRef(!1);SF((()=>(B.current=!0,()=>{B.current=!1})),[]),SF((()=>{if(w&&(k.current=w),C&&(E.current=C),w&&C){if(A.current)return A.current(w,C,M);M()}}),[w,C,M,A,S]);const P=o.useMemo((()=>({reference:k,floating:E,setReference:b,setFloating:D})),[b,D]),T=o.useMemo((()=>({reference:w,floating:C})),[w,C]),N=o.useMemo((()=>{const e={position:n,left:0,top:0};if(!T.floating)return e;const t=OF(T.floating,d.x),r=OF(T.floating,d.y);return u?{...e,transform:"translate("+t+"px, "+r+"px)",...FF(T.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}}),[n,u,T.floating,d.x,d.y]);return o.useMemo((()=>({...d,update:M,refs:P,elements:T,floatingStyles:N})),[d,M,P,T,N])}({...e,elements:{...i,...u&&{reference:u}}}),h=o.useCallback((e=>{const t=WS(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;l(t),p.refs.setReference(t)}),[p.refs]),m=o.useCallback((e=>{(WS(e)||null===e)&&(d.current=e,s(e)),(WS(p.refs.reference.current)||null===p.refs.reference.current||null!==e&&!WS(e))&&p.refs.setReference(e)}),[p.refs]),v=o.useMemo((()=>({...p.refs,setReference:m,setPositionReference:h,domReference:d})),[p.refs,m,h]),g=o.useMemo((()=>({...p.elements,domReference:c})),[p.elements,c]),y=o.useMemo((()=>({...p,...r,refs:v,elements:g,nodeId:t})),[p,v,g,t,r]);return VF((()=>{r.dataRef.current.floatingContext=y;const e=null==f?void 0:f.nodesRef.current.find((e=>e.id===t));e&&(e.context=y)})),o.useMemo((()=>({...p,context:y,refs:v,elements:g})),[p,v,g,y])}function xO(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:a,elements:s}=e,{enabled:u=!0,visibleOnly:l=!0}=t,c=o.useRef(!1),d=o.useRef(),f=o.useRef(!0);o.useEffect((()=>{if(!u)return;const e=$S(s.domReference);function t(){!n&&qS(s.domReference)&&s.domReference===sA(hA(s.domReference))&&(c.current=!0)}function r(){f.current=!0}return e.addEventListener("blur",t),e.addEventListener("keydown",r,!0),()=>{e.removeEventListener("blur",t),e.removeEventListener("keydown",r,!0)}}),[s.domReference,n,u]),o.useEffect((()=>{if(u)return i.on("openchange",e),()=>{i.off("openchange",e)};function e(e){let{reason:t}=e;"reference-press"!==t&&"escape-key"!==t||(c.current=!0)}}),[i,u]),o.useEffect((()=>()=>{clearTimeout(d.current)}),[]);const p=o.useMemo((()=>({onPointerDown(e){(function(e){return!cA().includes("jsdom/")&&(!fA()&&0===e.width&&0===e.height||fA()&&1===e.width&&1===e.height&&0===e.pressure&&0===e.detail&&"mouse"===e.pointerType||e.width<1&&e.height<1&&0===e.pressure&&0===e.detail&&"touch"===e.pointerType)})(e.nativeEvent)||(f.current=!1)},onMouseLeave(){c.current=!1},onFocus(e){if(c.current)return;const t=vA(e.nativeEvent);if(l&&WS(t))try{if(dA()&&lA().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints)throw Error();if(!t.matches(":focus-visible"))return}catch(e){if(!f.current&&(!qS(n=t)||!n.matches("input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])")))return}var n;r(!0,e.nativeEvent,"focus")},onBlur(e){c.current=!1;const t=e.relatedTarget,n=e.nativeEvent,o=WS(t)&&t.hasAttribute(YF("focus-guard"))&&"outside"===t.getAttribute("data-type");d.current=window.setTimeout((()=>{var e;const i=sA(s.domReference?s.domReference.ownerDocument:document);(t||i!==s.domReference)&&(uA(null==(e=a.current.floatingContext)?void 0:e.refs.floating.current,i)||uA(s.domReference,i)||o||r(!1,n,"focus"))}))}})),[a,s.domReference,r,l]);return o.useMemo((()=>u?{reference:p}:{}),[u,p])}const SO="active",AO="selected";function FO(e,t,n){const r=new Map,o="item"===n;let i=e;if(o&&e){const{[SO]:t,[AO]:n,...r}=e;i=r}return{..."floating"===n&&{tabIndex:-1,[bO]:""},...i,...t.map((t=>{const r=t?t[n]:null;return"function"==typeof r?e?r(e):null:r})).concat(e).reduce(((e,t)=>t?(Object.entries(t).forEach((t=>{let[n,i]=t;var a;o&&[SO,AO].includes(n)||(0===n.indexOf("on")?(r.has(n)||r.set(n,[]),"function"==typeof i&&(null==(a=r.get(n))||a.push(i),e[n]=function(){for(var e,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return null==(e=r.get(n))?void 0:e.map((e=>e(...o))).find((e=>void 0!==e))})):e[n]=i)})),e):e),{})}}function OO(e){void 0===e&&(e=[]);const t=e.map((e=>null==e?void 0:e.reference)),n=e.map((e=>null==e?void 0:e.floating)),r=e.map((e=>null==e?void 0:e.item)),i=o.useCallback((t=>FO(t,e,"reference")),t),a=o.useCallback((t=>FO(t,e,"floating")),n),s=o.useCallback((t=>FO(t,e,"item")),r);return o.useMemo((()=>({getReferenceProps:i,getFloatingProps:a,getItemProps:s})),[i,a,s])}const MO=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function BO(e,t){var n;void 0===t&&(t={});const{open:r,floatingId:i}=e,{enabled:a=!0,role:s="dialog"}=t,u=null!=(n=MO.get(s))?n:s,l=qF(),c=null!=ZF(),d=o.useMemo((()=>"tooltip"===u||"label"===s?{["aria-"+("label"===s?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":"alertdialog"===u?"dialog":u,"aria-controls":r?i:void 0,..."listbox"===u&&{role:"combobox"},..."menu"===u&&{id:l},..."menu"===u&&c&&{role:"menuitem"},..."select"===s&&{"aria-autocomplete":"none"},..."combobox"===s&&{"aria-autocomplete":"list"}}),[u,i,c,r,l,s]),f=o.useMemo((()=>{const e={id:i,...u&&{role:u}};return"tooltip"===u||"label"===s?e:{...e,..."menu"===u&&{"aria-labelledby":l}}}),[u,i,l,s]),p=o.useCallback((e=>{let{active:t,selected:n}=e;const r={role:"option",...t&&{id:i+"-option"}};switch(s){case"select":return{...r,"aria-selected":t&&n};case"combobox":return{...r,...t&&{"aria-selected":!0}}}return{}}),[i,s]);return o.useMemo((()=>a?{reference:d,floating:f,item:p}:{}),[a,d,f,p])}const PO=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,((e,t)=>(t?"-":"")+e.toLowerCase()));function TO(e,t){return"function"==typeof e?e(t):e}function NO(e,t){void 0===t&&(t={});const{initial:n={opacity:0},open:r,close:i,common:a,duration:s=250}=t,u=e.placement,l=u.split("-")[0],c=o.useMemo((()=>({side:l,placement:u})),[l,u]),d="number"==typeof s,f=(d?s:s.open)||0,p=(d?s:s.close)||0,[h,m]=o.useState((()=>({...TO(a,c),...TO(n,c)}))),{isMounted:v,status:g}=function(e,t){void 0===t&&(t={});const{open:n,elements:{floating:r}}=e,{duration:i=250}=t,a=("number"==typeof i?i:i.close)||0,[s,u]=o.useState("unmounted"),l=function(e,t){const[n,r]=o.useState(e);return e&&!n&&r(!0),o.useEffect((()=>{if(!e&&n){const e=setTimeout((()=>r(!1)),t);return()=>clearTimeout(e)}}),[e,n,t]),n}(n,a);return l||"close"!==s||u("unmounted"),VF((()=>{if(r){if(n){u("initial");const e=requestAnimationFrame((()=>{u("open")}));return()=>{cancelAnimationFrame(e)}}u("close")}}),[n,r]),{isMounted:l,status:s}}(e,{duration:s}),y=QF(n),b=QF(r),D=QF(i),w=QF(a);return VF((()=>{const e=TO(y.current,c),t=TO(D.current,c),n=TO(w.current,c),r=TO(b.current,c)||Object.keys(e).reduce(((e,t)=>(e[t]="",e)),{});if("initial"===g&&m((t=>({transitionProperty:t.transitionProperty,...n,...e}))),"open"===g&&m({transitionProperty:Object.keys(r).map(PO).join(","),transitionDuration:f+"ms",...n,...r}),"close"===g){const r=t||e;m({transitionProperty:Object.keys(r).map(PO).join(","),transitionDuration:p+"ms",...n,...r})}}),[p,D,y,b,w,f,g,c]),{isMounted:v,styles:h}}function jO(e){return jO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jO(e)}function _O(e){return function(e){if(Array.isArray(e))return RO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return RO(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?RO(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function LO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qO(r.key),r)}}function HO(e,t,n){return t&&IO(e.prototype,t),n&&IO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function zO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zO=function(){return!!e})()}function VO(e){return VO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},VO(e)}function $O(e,t){return $O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$O(e,t)}function UO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UO(Object(n),!0).forEach((function(t){WO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function WO(e,t,n){return(t=qO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qO(e){var t=function(e){if("object"!=jO(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=jO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==jO(t)?t:t+""}var KO,JO={exports:{}},ZO={};JO.exports=function(){if(KO)return ZO;KO=1;var e=o,t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=e.useState,r=e.useEffect,i=e.useLayoutEffect,a=e.useDebugValue;function s(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!t(e,r)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var o=t(),u=n({inst:{value:o,getSnapshot:t}}),l=u[0].inst,c=u[1];return i((function(){l.value=o,l.getSnapshot=t,s(l)&&c({inst:l})}),[e,o,t]),r((function(){return s(l)&&c({inst:l}),e((function(){s(l)&&c({inst:l})}))}),[e]),a(o),o};return ZO.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:u,ZO}();var XO=JO.exports;o.Component;var YO,QO={exports:{}},eM={};QO.exports=function(){if(YO)return eM;YO=1;var e=o,t=XO,n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=t.useSyncExternalStore,i=e.useRef,a=e.useEffect,s=e.useMemo,u=e.useDebugValue;return eM.useSyncExternalStoreWithSelector=function(e,t,o,l,c){var d=i(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=s((function(){function e(e){if(!a){if(a=!0,r=e,e=l(e),void 0!==c&&f.hasValue){var t=f.value;if(c(t,e))return i=t}return i=e}if(t=i,n(r,e))return t;var o=l(e);return void 0!==c&&c(t,o)?t:(r=e,i=o)}var r,i,a=!1,s=void 0===o?null:o;return[function(){return e(t())},null===s?void 0:function(){return e(s())}]}),[t,o,l,c]);var p=r(e,d[0],d[1]);return a((function(){f.hasValue=!0,f.value=p}),[p]),u(p),p},eM}(),QO.exports,"undefined"!=typeof window?o.useLayoutEffect:o.useEffect,"undefined"==typeof window||Boolean("undefined"!=typeof window&&window.next),(0,o.createContext)({editor:null}).Consumer;var tM=(0,o.createContext)({onDragStart:void 0}),nM=function(){return(0,o.useContext)(tM)},rM=o.forwardRef((function(e,t){var n=nM().onDragStart,r=e.as||"div";return o.createElement(r,GO(GO({},e),{},{ref:t,"data-node-view-wrapper":"",onDragStart:n,style:GO({whiteSpace:"normal"},e.style)}))})),oM=function(){return HO((function e(t,n){var r,o=this,i=n.editor,a=n.props,s=void 0===a?{}:a,u=n.as,l=void 0===u?"div":u,c=n.className,d=void 0===c?"":c;LO(this,e),this.ref=null,this.id=Math.floor(4294967295*Math.random()).toString(),this.component=t,this.editor=i,this.props=s,this.element=document.createElement(l),this.element.classList.add("react-renderer"),d&&(r=this.element.classList).add.apply(r,_O(d.split(" "))),this.editor.isInitialized?(0,TA.flushSync)((function(){o.render()})):this.render()}),[{key:"render",value:function(){var e,t=this,n=this.component,r=this.props,i=this.editor;(function(e){return!("function"!=typeof e||!e.prototype||!e.prototype.isReactComponent)}(n)||function(e){var t;return!("object"!==jO(e)||"Symbol(react.forward_ref)"!==(null===(t=e.$$typeof)||void 0===t?void 0:t.toString()))}(n))&&(r.ref=function(e){t.ref=e}),this.reactElement=o.createElement(n,GO({},r)),null===(e=null==i?void 0:i.contentComponent)||void 0===e||e.setRenderer(this.id,this)}},{key:"updateProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props=GO(GO({},this.props),e),this.render()}},{key:"destroy",value:function(){var e,t=this.editor;null===(e=null==t?void 0:t.contentComponent)||void 0===e||e.removeRenderer(this.id)}},{key:"updateAttributes",value:function(e){var t=this;Object.keys(e).forEach((function(n){t.element.setAttribute(n,e[n])}))}}])}(),iM=function(e){function t(){return LO(this,t),function(e,t,n){return t=VO(t),function(e,t){if(t&&("object"==jO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,zO()?Reflect.construct(t,n||[],VO(e).constructor):t.apply(e,n))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$O(e,t)}(t,e),HO(t,[{key:"mount",value:function(){var e,t=this,n={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:function(){return t.getPos()},updateAttributes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.updateAttributes(e)},deleteNode:function(){return t.deleteNode()}};this.component.displayName||(this.component.displayName=(e=this.extension.name).charAt(0).toUpperCase()+e.substring(1));var r={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:function(e){e&&t.contentDOMElement&&e.firstChild!==t.contentDOMElement&&e.appendChild(t.contentDOMElement)}},i=this.component,a=o.memo((function(e){return o.createElement(tM.Provider,{value:r},o.createElement(i,e))}));a.displayName="ReactNodeView",this.node.isLeaf?this.contentDOMElement=null:this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.style.whiteSpace="inherit");var s=this.node.isInline?"span":"div";this.options.as&&(s=this.options.as);var u=this.options.className,l=void 0===u?"":u;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new oM(a,{editor:this.editor,props:n,as:s,className:"node-".concat(this.node.type.name," ").concat(l).trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}},{key:"dom",get:function(){var e;if(this.renderer.element.firstElementChild&&!(null===(e=this.renderer.element.firstElementChild)||void 0===e?void 0:e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}},{key:"contentDOM",get:function(){return this.node.isLeaf?null:this.contentDOMElement}},{key:"handleSelectionUpdate",value:function(){var e=this.editor.state.selection,t=e.from,n=e.to,r=this.getPos();if("number"==typeof r)if(t<=r&&n>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}},{key:"update",value:function(e,t,n){var r=this,o=function(e){r.renderer.updateProps(e),"function"==typeof r.options.attrs&&r.updateElementAttributes()};if(e.type!==this.node.type)return!1;if("function"==typeof this.options.update){var i=this.node,a=this.decorations,s=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=n,this.options.update({oldNode:i,oldDecorations:a,newNode:e,newDecorations:t,oldInnerDecorations:s,innerDecorations:n,updateProps:function(){return o({node:e,decorations:t,innerDecorations:n})}})}return e===this.node&&this.decorations===t&&this.innerDecorations===n||(this.node=e,this.decorations=t,this.innerDecorations=n,o({node:e,decorations:t,innerDecorations:n})),!0}},{key:"selectNode",value:function(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}},{key:"deselectNode",value:function(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}},{key:"destroy",value:function(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}},{key:"updateElementAttributes",value:function(){if(this.options.attrs){var e={};if("function"==typeof this.options.attrs){var t=this.editor.extensionManager.attributes,n=ms(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:n})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}])}(ju);function aM(e,t){return function(n){return n.editor.contentComponent?new iM(e,n,t):{}}}var sM=a(7384),uM=["show","referencePos"],lM=["show","referencePos"],cM=["show","referencePos"],dM=["editor","className","theme","children","editable","onSelectionChange","onChange","formattingToolbar","linkToolbar","slashMenu","emojiPicker","sideMenu","filePanel","tableHandles","comments","autoFocus","renderEditor"],fM=["className","renderEditor","editorColorScheme","children"];function pM(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=CM(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function hM(){hM=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),s=new M(r||[]);return o(a,"_invoke",{value:S(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function g(){}function y(){}function b(){}var D={};l(D,a,(function(){return this}));var w=Object.getPrototypeOf,C=w&&w(w(B([])));C&&C!==n&&r.call(C,a)&&(D=C);var k=b.prototype=g.prototype=Object.create(D);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,s){var u=d(e[o],e,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==EM(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(c).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function S(t,n,r){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=A(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function A(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function F(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(F,this),this.reset(!0)}function B(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(EM(t)+" is not iterable")}return y.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},E(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(k),l(k,u,"Generator"),l(k,a,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=B,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:B(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function mM(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function vM(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){mM(i,r,o,a,s,"next",e)}function s(e){mM(i,r,o,a,s,"throw",e)}a(void 0)}))}}function gM(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function yM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yM(Object(n),!0).forEach((function(t){DM(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function DM(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=EM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=EM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==EM(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||CM(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CM(e,t){if(e){if("string"==typeof e)return kM(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kM(e,t):void 0}}function kM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function EM(e){return EM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EM(e)}Object.defineProperty;var xM=(0,o.createContext)(void 0);function SM(e){return(0,o.useContext)(xM)}function AM(e){var t=SM();if(null==t||!t.editor)throw new Error("useBlockNoteEditor was called outside of a BlockNoteContext provider or BlockNoteView component");return t.editor}function FM(e,t,n){var r=SM();t||(t=null==r?void 0:r.editor),(0,o.useEffect)((function(){if(!t)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return t.onSelectionChange(e,n)}),[e,t,n])}function OM(e,t,n,r){var i=EO(bM({open:e},r)),a=i.refs,s=i.update,u=i.context,l=i.floatingStyles,c=i.isPositioned,d=NO(u),f=d.isMounted,p=d.styles,h=OO([kO(u,"object"==EM(null==r?void 0:r.canDismiss)?r.canDismiss:{enabled:null==r?void 0:r.canDismiss})]),m=h.getReferenceProps,v=h.getFloatingProps;return(0,o.useEffect)((function(){s()}),[t,s]),(0,o.useEffect)((function(){null!==t&&(t instanceof HTMLElement||function(e){return void 0!==e.getBoundingClientRect}(t)?a.setReference(t):a.setReference({getBoundingClientRect:function(){return t}}))}),[t,a]),(0,o.useMemo)((function(){return{isMounted:f,ref:a.setFloating,setReference:a.setReference,style:bM(bM(bM({display:"flex"},p),l),{},{zIndex:n}),getFloatingProps:v,getReferenceProps:m,isPositioned:c}}),[c,l,f,a.setFloating,a.setReference,p,n,v,m])}function MM(e){var t=wM((0,o.useState)(),2),n=t[0],r=t[1];return(0,o.useEffect)((function(){return e((function(e){r(bM({},e))}))}),[e]),n}var BM=(0,o.createContext)(void 0);function PM(){return(0,o.useContext)(BM)}var TM=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,o.useMemo)((function(){var t=_S.create(e);return window&&(window.ProseMirror=t._tiptapEditor),t}),t)};function NM(){return SM().editor.dictionary}function jM(e,t){var n=SM();t||(t=null==n?void 0:n.editor),(0,o.useEffect)((function(){if(!t)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return t.onChange(e)}),[e,t])}var _M=function(e){var t=wM((0,o.useState)(!1),2),n=t[0],r=t[1],i=wM((0,o.useState)(e.editor.isEmpty),2),a=i[0],s=i[1],u=PM();jM((function(){s(e.editor.isEmpty)}),e.editor);var l=(0,o.useCallback)((function(){r(!0)}),[]),c=(0,o.useCallback)((function(){r(!1)}),[]);return(0,o.useEffect)((function(){e.editable&&e.autoFocus&&e.editor.focus()}),[e.autoFocus,e.editable,e.editor]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(u.Comments.Editor,{autoFocus:e.autoFocus,className:"bn-comment-editor",editor:e.editor,onFocus:l,onBlur:c,editable:e.editable}),e.actions&&(0,x.jsx)("div",{className:"bn-comment-actions-wrapper",children:(0,x.jsx)(e.actions,{isFocused:n,isEmpty:a})})]})},RM=Gw($w(Yk.paragraph.implementation.node.config),{}),LM=gM(eE,["textColor","backgroundColor"]),IM=hE.create({blockSpecs:{paragraph:RM},styleSpecs:LM});function HM(){var e=AM();if(!e.comments)throw new Error("Comments plugin not found");var t=e.comments,n=PM(),r=NM(),o=TM({trailingBlock:!1,dictionary:bM(bM({},r),{},{placeholders:{emptyDocument:r.placeholders.new_comment}}),schema:IM,sideMenuDetection:"editor"});return(0,x.jsx)(n.Comments.Card,{className:"bn-thread",children:(0,x.jsx)(_M,{autoFocus:!0,editable:!0,editor:o,actions:function(e){var r,i=e.isEmpty;return(0,x.jsx)(n.Generic.Toolbar.Root,{className:Pw("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:(0,x.jsx)(n.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Save",variant:"compact",isDisabled:i,onClick:(r=vM(hM().mark((function e(){return hM().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.createThread({initialComment:{body:o.document}});case 2:t.stopPendingComment();case 3:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)}),children:"Save"})})}})})}var zM,VM=function(e){var t=AM();if(!t.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");var n=t.comments;(0,o.useEffect)((function(){var e=n.onUpdate((function(e){return t.setForceSelectionVisible(e.pendingComment)}));return function(){return e()}}),[n,t]);var r=MM(n.onUpdate.bind(n)),i=function(e,t){var n=AM();t=t||n;var r=wM((0,o.useState)((function(){if(e)return t.getSelectionBoundingBox()})),2),i=r[0],a=r[1];return FM((0,o.useCallback)((function(){if(e){var n=t.getSelectionBoundingBox();a(n)}}),[t,e]),t,!0),(0,o.useEffect)((function(){a(e?t.getSelectionBoundingBox():void 0)}),[e,t]),i}(null==r?void 0:r.pendingComment),a=OM((null==r?void 0:r.pendingComment)||!1,i||null,5e3,bM({placement:"bottom",middleware:[PF(10),TF(),jF()],onOpenChange:function(e){e||(n.stopPendingComment(),t.focus())}},e.floatingOptions)),s=a.isMounted,u=a.ref,l=a.style,c=a.getFloatingProps;if(!s||!r)return null;var d=e.floatingComposer||HM;return(0,x.jsx)("div",bM(bM({ref:u,style:l},c()),{},{children:(0,x.jsx)(d,{})}))},$M={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},UM=o.createContext&&o.createContext($M),GM=["attr","size","title"];function WM(){return WM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WM.apply(this,arguments)}function qM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function KM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qM(Object(n),!0).forEach((function(t){JM(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function JM(e,t,n){return t=function(e){var t=function(e,t){if("object"!=EM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=EM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==EM(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZM(e){return e&&e.map((function(e,t){return o.createElement(e.tag,KM({key:t},e.attr),ZM(e.child))}))}function XM(e){return function(t){return o.createElement(YM,WM({attr:KM({},e.attr)},t),ZM(e.child))}}function YM(e){var t=function(t){var n,r=e.attr,i=e.size,a=e.title,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,GM),u=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),o.createElement("svg",WM({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,s,{className:n,style:KM(KM({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),a&&o.createElement("title",null,a),e.children)};return void 0!==UM?o.createElement(UM.Consumer,null,(function(e){return t(e)})):t($M)}function QM(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 7V11L2 6L8 1V5H13C17.4183 5 21 8.58172 21 13C21 17.4183 17.4183 21 13 21H4V19H13C16.3137 19 19 16.3137 19 13C19 9.68629 16.3137 7 13 7H8Z"},child:[]}]})(e)}function eB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.29117 20.8242L2 22L3.17581 16.7088C2.42544 15.3056 2 13.7025 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.2975 22 8.6944 21.5746 7.29117 20.8242ZM7.58075 18.711L8.23428 19.0605C9.38248 19.6745 10.6655 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 13.3345 4.32549 14.6175 4.93949 15.7657L5.28896 16.4192L4.63416 19.3658L7.58075 18.711Z"},child:[]}]})(e)}function tB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.24264 17.9967H3V13.754L14.435 2.319C14.8256 1.92848 15.4587 1.92848 15.8492 2.319L18.6777 5.14743C19.0682 5.53795 19.0682 6.17112 18.6777 6.56164L7.24264 17.9967ZM3 19.9967H21V21.9967H3V19.9967Z"},child:[]}]})(e)}function nB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"},child:[]}]})(e)}function rB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.55397 22H3.3999L10.9999 3H12.9999L20.5999 22H18.4458L16.0458 16H7.95397L5.55397 22ZM8.75397 14H15.2458L11.9999 5.88517L8.75397 14Z"},child:[]}]})(e)}function oB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM21.0005 8V20H19.0005L19 10.204L17 10.74V8.67L19.5005 8H21.0005Z"},child:[]}]})(e)}function iB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 8C20.5711 8 22.25 9.67893 22.25 11.75C22.25 12.6074 21.9623 13.3976 21.4781 14.0292L21.3302 14.2102L18.0343 18H22V20H15L14.9993 18.444L19.8207 12.8981C20.0881 12.5908 20.25 12.1893 20.25 11.75C20.25 10.7835 19.4665 10 18.5 10C17.5818 10 16.8288 10.7071 16.7558 11.6065L16.75 11.75H14.75C14.75 9.67893 16.4289 8 18.5 8Z"},child:[]}]})(e)}function aB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8L21.9984 10L19.4934 12.883C21.0823 13.3184 22.25 14.7728 22.25 16.5C22.25 18.5711 20.5711 20.25 18.5 20.25C16.674 20.25 15.1528 18.9449 14.8184 17.2166L16.7821 16.8352C16.9384 17.6413 17.6481 18.25 18.5 18.25C19.4665 18.25 20.25 17.4665 20.25 16.5C20.25 15.5335 19.4665 14.75 18.5 14.75C18.214 14.75 17.944 14.8186 17.7056 14.9403L16.3992 13.3932L19.3484 10H15V8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(e)}function sB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM3 12.5L7 9V16L3 12.5Z"},child:[]}]})(e)}function uB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM7 12.5L3 16V9L7 12.5Z"},child:[]}]})(e)}function lB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 5H11V19H8V21H16V19H13V5H16V3H8V5ZM2 7C1.44772 7 1 7.44772 1 8V16C1 16.5523 1.44772 17 2 17H8V15H3V9H8V7H2ZM16 9H21V15H16V17H22C22.5523 17 23 16.5523 23 16V8C23 7.44772 22.5523 7 22 7H16V9Z"},child:[]}]})(e)}function cB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 17H22V19H19V22H17V17ZM7 7H2V5H5V2H7V7ZM18.364 15.5355L16.9497 14.1213L18.364 12.7071C20.3166 10.7545 20.3166 7.58866 18.364 5.63604C16.4113 3.68342 13.2455 3.68342 11.2929 5.63604L9.87868 7.05025L8.46447 5.63604L9.87868 4.22183C12.6123 1.48816 17.0445 1.48816 19.7782 4.22183C22.5118 6.9555 22.5118 11.3877 19.7782 14.1213L18.364 15.5355ZM15.5355 18.364L14.1213 19.7782C11.3877 22.5118 6.9555 22.5118 4.22183 19.7782C1.48816 17.0445 1.48816 12.6123 4.22183 9.87868L5.63604 8.46447L7.05025 9.87868L5.63604 11.2929C3.68342 13.2455 3.68342 16.4113 5.63604 18.364C7.58866 20.3166 10.7545 20.3166 12.7071 18.364L14.1213 16.9497L15.5355 18.364ZM14.8284 7.75736L16.2426 9.17157L9.17157 16.2426L7.75736 14.8284L14.8284 7.75736Z"},child:[]}]})(e)}function dB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.3638 15.5355L16.9496 14.1213L18.3638 12.7071C20.3164 10.7545 20.3164 7.58866 18.3638 5.63604C16.4112 3.68341 13.2453 3.68341 11.2927 5.63604L9.87849 7.05025L8.46428 5.63604L9.87849 4.22182C12.6122 1.48815 17.0443 1.48815 19.778 4.22182C22.5117 6.95549 22.5117 11.3876 19.778 14.1213L18.3638 15.5355ZM15.5353 18.364L14.1211 19.7782C11.3875 22.5118 6.95531 22.5118 4.22164 19.7782C1.48797 17.0445 1.48797 12.6123 4.22164 9.87868L5.63585 8.46446L7.05007 9.87868L5.63585 11.2929C3.68323 13.2455 3.68323 16.4113 5.63585 18.364C7.58847 20.3166 10.7543 20.3166 12.7069 18.364L14.1211 16.9497L15.5353 18.364ZM14.8282 7.75736L16.2425 9.17157L9.17139 16.2426L7.75717 14.8284L14.8282 7.75736Z"},child:[]}]})(e)}function fB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.00008 6V9H5.00008V6H8.00008ZM3.00008 4V11H10.0001V4H3.00008ZM13.0001 4H21.0001V6H13.0001V4ZM13.0001 11H21.0001V13H13.0001V11ZM13.0001 18H21.0001V20H13.0001V18ZM10.7072 16.2071L9.29297 14.7929L6.00008 18.0858L4.20718 16.2929L2.79297 17.7071L6.00008 20.9142L10.7072 16.2071Z"},child:[]}]})(e)}function pB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM5 3V6H6V7H3V6H4V4H3V3H5ZM3 14V11.5H5V11H3V10H6V12.5H4V13H6V14H3ZM5 19.5H3V18.5H5V18H3V17H6V21H3V20H5V19.5ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(e)}function hB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM4.5 6.5C3.67157 6.5 3 5.82843 3 5C3 4.17157 3.67157 3.5 4.5 3.5C5.32843 3.5 6 4.17157 6 5C6 5.82843 5.32843 6.5 4.5 6.5ZM4.5 13.5C3.67157 13.5 3 12.8284 3 12C3 11.1716 3.67157 10.5 4.5 10.5C5.32843 10.5 6 11.1716 6 12C6 12.8284 5.32843 13.5 4.5 13.5ZM4.5 20.4C3.67157 20.4 3 19.7284 3 18.9C3 18.0716 3.67157 17.4 4.5 17.4C5.32843 17.4 6 18.0716 6 18.9C6 19.7284 5.32843 20.4 4.5 20.4ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(e)}function mB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM11 5H5V10.999H7V9L10 12L7 15V13H5V19H11V17H13V19H19V13H17V15L14 12L17 9V10.999H19V5H13V7H11V5ZM13 13V15H11V13H13ZM13 9V11H11V9H13Z"},child:[]}]})(e)}function vB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20C20.5523 3 21 3.44772 21 4V20ZM19 11V5H13.001V7H15L12 10L9 7H11V5H5V11H7V13H5V19H11V17H9L12 14L15 17H13.001V19H19V13H17V11H19ZM11 13H9V11H11V13ZM15 13H13V11H15V13Z"},child:[]}]})(e)}function gB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 4H3V6H21V4ZM21 11H8V13H21V11ZM21 18H8V20H21V18ZM5 11H3V20H5V11Z"},child:[]}]})(e)}function yB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 6V21H11V6H5V4H19V6H13Z"},child:[]}]})(e)}function bB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"},child:[]}]})(e)}function DB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 15V18H24V20H21V23H19V20H16V18H19V15H21ZM21.0082 3C21.556 3 22 3.44495 22 3.9934L22.0007 13.3417C21.3749 13.1204 20.7015 13 20 13V5H4L4.001 19L13.2929 9.70715C13.6528 9.34604 14.22 9.31823 14.6123 9.62322L14.7065 9.70772L18.2521 13.2586C15.791 14.0069 14 16.2943 14 19C14 19.7015 14.1204 20.3749 14.3417 21.0007L2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7Z"},child:[]}]})(e)}function wB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V5.757L19 7.757V5H5V13.1L9 9.1005L13.328 13.429L12.0012 14.7562L11.995 18.995L16.2414 19.0012L17.571 17.671L18.8995 19H19V16.242L21 14.242V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM21.7782 7.80761L23.1924 9.22183L15.4142 17L13.9979 16.9979L14 15.5858L21.7782 7.80761ZM15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7Z"},child:[]}]})(e)}function CB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 3.9934C3 3.44476 3.44495 3 3.9934 3H20.0066C20.5552 3 21 3.44495 21 3.9934V20.0066C21 20.5552 20.5551 21 20.0066 21H3.9934C3.44476 21 3 20.5551 3 20.0066V3.9934ZM10.6219 8.41459C10.5562 8.37078 10.479 8.34741 10.4 8.34741C10.1791 8.34741 10 8.52649 10 8.74741V15.2526C10 15.3316 10.0234 15.4088 10.0672 15.4745C10.1897 15.6583 10.4381 15.708 10.6219 15.5854L15.5008 12.3328C15.5447 12.3035 15.5824 12.2658 15.6117 12.2219C15.7343 12.0381 15.6846 11.7897 15.5008 11.6672L10.6219 8.41459Z"},child:[]}]})(e)}function kB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"},child:[]}]})(e)}function EB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"},child:[]}]})(e)}function xB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"},child:[]}]})(e)}function SB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 4V6H15V4H9Z"},child:[]}]})(e)}function AB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM9 11V17H11V11H9ZM13 11V17H15V11H13ZM9 4V6H15V4H9Z"},child:[]}]})(e)}function FB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 19H20V12H22V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V12H4V19ZM14 9H19L12 16L5 9H10V3H14V9Z"},child:[]}]})(e)}function OB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10 6V8H5V19H16V14H18V20C18 20.5523 17.5523 21 17 21H4C3.44772 21 3 20.5523 3 20V7C3 6.44772 3.44772 6 4 6H10ZM21 3V12L17.206 8.207L11.2071 14.2071L9.79289 12.7929L15.792 6.793L12 3H21Z"},child:[]}]})(e)}function MB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 10C3.9 10 3 10.9 3 12C3 13.1 3.9 14 5 14C6.1 14 7 13.1 7 12C7 10.9 6.1 10 5 10ZM19 10C17.9 10 17 10.9 17 12C17 13.1 17.9 14 19 14C20.1 14 21 13.1 21 12C21 10.9 20.1 10 19 10ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z"},child:[]}]})(e)}function BB(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM8 13H16C16 15.2091 14.2091 17 12 17C9.79086 17 8 15.2091 8 13ZM8 11C7.17157 11 6.5 10.3284 6.5 9.5C6.5 8.67157 7.17157 8 8 8C8.82843 8 9.5 8.67157 9.5 9.5C9.5 10.3284 8.82843 11 8 11ZM16 11C15.1716 11 14.5 10.3284 14.5 9.5C14.5 8.67157 15.1716 8 16 8C16.8284 8 17.5 8.67157 17.5 9.5C17.5 10.3284 16.8284 11 16 11Z"},child:[]}]})(e)}function PB(){return TB.apply(this,arguments)}function TB(){return TB=vM(hM().mark((function e(){return hM().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zM||(zM=vM(hM().mark((function e(){var t,n,r,o,i,s;return hM().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([a.e(8517).then(a.bind(a,8517)),a.e(3274).then(a.t.bind(a,3274,17))]);case 2:return t=e.sent,n=wM(t,2),r=n[0],o=n[1],i="default"in r?r.default:r,s="default"in o?o.default:o,e.next=10,i.init({data:s});case 10:return e.abrupt("return",{emojiMart:i,emojiData:s});case 11:case"end":return e.stop()}}),e)})))(),zM));case 1:case"end":return e.stop()}}),e)}))),TB.apply(this,arguments)}function NB(e){var t=(0,o.useRef)(null),n=(0,o.useRef)(null);return n.current&&n.current.update(e),(0,o.useEffect)((function(){return vM(hM().mark((function r(){var o,i;return hM().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,PB();case 2:o=r.sent,i=o.emojiMart,n.current=new i.Picker(bM(bM({},e),{},{ref:t}));case 5:case"end":return r.stop()}}),r)})))(),function(){n.current=null}}),[]),o.createElement("div",{ref:t})}var jB=function(e){var t=wM((0,o.useState)(!1),2),n=t[0],r=t[1],i=PM(),a=SM();return(0,x.jsxs)(i.Generic.Popover.Root,{opened:n,children:[(0,x.jsx)(i.Generic.Popover.Trigger,{children:(0,x.jsx)("div",{onClick:function(e){e.preventDefault(),e.stopPropagation(),r(!n)},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.children})}),(0,x.jsx)(i.Generic.Popover.Content,{variant:"panel-popover",children:(0,x.jsx)(NB,{perLine:7,onClickOutside:function(){return r(!1)},onEmojiSelect:function(t){e.onEmojiSelect(t),r(!1)},theme:null==a?void 0:a.colorSchemePreference})})]})};function _B(e,t){var n=e.comments;if(!n)throw new Error("Comments plugin not found");var r=n.userStore,i=(0,o.useCallback)((function(){var e,n=new Map,o=pM(t);try{for(o.s();!(e=o.n()).done;){var i=e.value,a=r.getUser(i);a&&n.set(i,a)}}catch(e){o.e(e)}finally{o.f()}return n}),[r,t]),a=(0,o.useMemo)((function(){return{current:i()}}),[i]),s=(0,o.useCallback)((function(e){var n=r.subscribe((function(t){a.current=i(),e()}));return r.loadUsers(t),n}),[r,i,t,a]);return(0,o.useSyncExternalStore)(s,(function(){return a.current}))}var RB=function(e){var t=PM(),n=NM(),r=AM();if(!r.comments)throw new Error("ReactionBadge must be used inside a BlockNote editor with comments enabled");var i=e.comment.reactions.find((function(t){return t.emoji===e.emoji}));if(!i)throw new Error("Trying to render reaction badge for non-existing reaction");var a=wM((0,o.useState)([]),2),s=a[0],u=a[1],l=_B(r,s);return(0,x.jsx)(t.Generic.Badge.Root,{className:Pw("bn-badge","bn-comment-reaction"),text:i.userIds.length.toString(),icon:i.emoji,isSelected:r.comments.threadStore.auth.canDeleteReaction(e.comment,i.emoji),onClick:function(){return e.onReactionSelect(i.emoji)},onMouseEnter:function(){return u(i.userIds)},mainTooltip:n.comments.reactions.reacted_by,secondaryTooltip:"".concat(Array.from(l.values()).map((function(e){return e.username})).join("\n"))},i.emoji)},LB=function(e){var t=e.comment,n=e.thread,r=e.showResolveButton,i=NM(),a=TM({initialContent:t.body,trailingBlock:!1,dictionary:bM(bM({},i),{},{placeholders:{emptyDocument:i.placeholders.edit_comment}}),schema:IM,sideMenuDetection:"editor"},[t.body]),s=PM(),u=wM((0,o.useState)(!1),2),l=u[0],c=u[1],d=AM();if(!d.comments)throw new Error("Comments plugin not found");var f,p=d.comments.threadStore,h=(0,o.useCallback)((function(){c(!0)}),[]),m=(0,o.useCallback)((function(){a.replaceBlocks(a.document,t.body),c(!1)}),[a,t.body]),v=(0,o.useCallback)(function(){var e=vM(hM().mark((function e(r){return hM().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.updateComment({commentId:t.id,comment:{body:a.document},threadId:n.id});case 2:c(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,n.id,a,p]),g=(0,o.useCallback)(vM(hM().mark((function e(){return hM().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.deleteComment({commentId:t.id,threadId:n.id});case 2:case"end":return e.stop()}}),e)}))),[t,n.id,p]),y=(0,o.useCallback)(function(){var e=vM(hM().mark((function e(r){return hM().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p.auth.canAddReaction(t,r)){e.next=5;break}return e.next=3,p.addReaction({threadId:n.id,commentId:t.id,emoji:r});case 3:e.next=9;break;case 5:if(e.t0=p.auth.canDeleteReaction(t,r),!e.t0){e.next=9;break}return e.next=9,p.deleteReaction({threadId:n.id,commentId:t.id,emoji:r});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p,t,n.id]),b=(0,o.useCallback)(vM(hM().mark((function e(){return hM().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.resolveThread({threadId:n.id});case 2:case"end":return e.stop()}}),e)}))),[n.id,p]),D=(0,o.useCallback)(vM(hM().mark((function e(){return hM().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.unresolveThread({threadId:n.id});case 2:case"end":return e.stop()}}),e)}))),[n.id,p]),w=function(e,t){return _B(e,[t]).get(t)}(d,t.userId);if(!t.body)return null;var C=p.auth.canAddReaction(t),k=p.auth.canDeleteComment(t),E=p.auth.canUpdateComment(t),S=r&&(n.resolved?p.auth.canUnresolveThread(n):p.auth.canResolveThread(n));l||(f=(0,x.jsxs)(s.Generic.Toolbar.Root,{className:Pw("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:[C&&(0,x.jsx)(jB,{onEmojiSelect:function(e){return y(e.native)},children:(0,x.jsx)(s.Generic.Toolbar.Button,{mainTooltip:i.comments.actions.add_reaction,variant:"compact",children:(0,x.jsx)(BB,{size:16})},"add-reaction")}),S&&(n.resolved?(0,x.jsx)(s.Generic.Toolbar.Button,{mainTooltip:"Re-open",variant:"compact",onClick:D,children:(0,x.jsx)(QM,{size:16})},"reopen"):(0,x.jsx)(s.Generic.Toolbar.Button,{mainTooltip:i.comments.actions.resolve,variant:"compact",onClick:b,children:(0,x.jsx)(xB,{size:16})},"resolve")),(k||E)&&(0,x.jsxs)(s.Generic.Menu.Root,{position:"bottom-start",children:[(0,x.jsx)(s.Generic.Menu.Trigger,{children:(0,x.jsx)(s.Generic.Toolbar.Button,{mainTooltip:i.comments.actions.more_actions,variant:"compact",children:(0,x.jsx)(MB,{size:16})},"more-actions")}),(0,x.jsxs)(s.Generic.Menu.Dropdown,{className:"bn-menu-dropdown",children:[E&&(0,x.jsx)(s.Generic.Menu.Item,{icon:(0,x.jsx)(tB,{}),onClick:h,children:i.comments.actions.edit_comment},"edit-comment"),k&&(0,x.jsx)(s.Generic.Menu.Item,{icon:(0,x.jsx)(AB,{}),onClick:g,children:i.comments.actions.delete_comment},"delete-comment")]})]})]}));var A=t.createdAt.toLocaleDateString(void 0,{month:"short",day:"numeric"});if(!t.body)throw new Error("soft deletes are not yet supported");return(0,x.jsx)(s.Comments.Comment,{authorInfo:null!=w?w:"loading",timeString:A,edited:t.updatedAt.getTime()!==t.createdAt.getTime(),showActions:"hover",actions:f,className:"bn-thread-comment",children:(0,x.jsx)(_M,{autoFocus:l,editor:a,editable:l,actions:t.reactions.length>0||l?function(e){var n=e.isEmpty;return(0,x.jsxs)(x.Fragment,{children:[t.reactions.length>0&&!l&&(0,x.jsxs)(s.Generic.Badge.Group,{className:Pw("bn-badge-group","bn-comment-reactions"),children:[t.reactions.map((function(e){return(0,x.jsx)(RB,{comment:t,emoji:e.emoji,onReactionSelect:y},e.emoji)})),(0,x.jsx)(jB,{onEmojiSelect:function(e){return y(e.native)},children:(0,x.jsx)(s.Generic.Badge.Root,{className:Pw("bn-badge","bn-comment-add-reaction"),text:"+",icon:(0,x.jsx)(BB,{size:16}),mainTooltip:i.comments.actions.add_reaction})})]}),l&&(0,x.jsxs)(s.Generic.Toolbar.Root,{variant:"action-toolbar",className:Pw("bn-action-toolbar","bn-comment-actions"),children:[(0,x.jsx)(s.Generic.Toolbar.Button,{mainTooltip:"Save",variant:"compact",onClick:v,isDisabled:n,children:"Save"}),(0,x.jsx)(s.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Cancel",variant:"compact",onClick:m,children:"Cancel"})]})]})}:void 0})})},IB=function(e){var t=e.thread,n=e.maxCommentsBeforeCollapse,r=PM(),o=NM(),i=_B(AM(),t.resolvedBy?[t.resolvedBy]:[]),a=t.comments.map((function(e,n){return(0,x.jsx)(LB,{thread:t,comment:e,showResolveButton:0===n},e.id)}));if(t.resolved&&t.resolvedUpdatedAt&&t.resolvedBy){if(!i.get(t.resolvedBy))throw new Error("User ".concat(t.resolvedBy," resolved thread ").concat(t.id,", but their data could not be found."));var s=t.comments.findLastIndex((function(e){return t.resolvedUpdatedAt.getTime()>e.createdAt.getTime()}))+1;a.splice(s,0,(0,x.jsx)(r.Comments.Comment,{className:"bn-thread-comment",authorInfo:t.resolvedBy&&i.get(t.resolvedBy)||"loading",timeString:t.resolvedUpdatedAt.toLocaleDateString(void 0,{month:"short",day:"numeric"}),edited:!1,showActions:!1,children:(0,x.jsx)("div",{className:"bn-resolved-text",children:o.comments.sidebar.marked_as_resolved})},"resolved-comment"))}return n&&a.length>n&&a.splice(1,a.length-2,(0,x.jsx)(r.Comments.ExpandSectionsPrompt,{className:"bn-thread-expand-prompt",children:o.comments.sidebar.more_replies(t.comments.length-2)},"expand-prompt")),a},HB=function(e){var t=e.thread,n=e.selected,r=e.referenceText,i=e.maxCommentsBeforeCollapse,a=e.onFocus,s=e.onBlur,u=e.tabIndex,l=PM(),c=NM(),d=AM().comments;if(!d)throw new Error("Comments plugin not found");var f=TM({trailingBlock:!1,dictionary:bM(bM({},c),{},{placeholders:{emptyDocument:c.placeholders.comment_reply}}),schema:IM,sideMenuDetection:"editor"}),p=(0,o.useCallback)(vM(hM().mark((function e(){return hM().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.threadStore.addComment({comment:{body:f.document},threadId:t.id});case 2:f.removeBlocks(f.document);case 3:case"end":return e.stop()}}),e)}))),[d,f,t.id]);return(0,x.jsxs)(l.Comments.Card,{className:"bn-thread",headerText:r,onFocus:a,onBlur:s,selected:n,tabIndex:u,children:[(0,x.jsx)(l.Comments.CardSection,{className:"bn-thread-comments",children:(0,x.jsx)(IB,{thread:t,maxCommentsBeforeCollapse:n?void 0:i||5})}),n&&(0,x.jsx)(l.Comments.CardSection,{className:"bn-thread-composer",children:(0,x.jsx)(_M,{autoFocus:!1,editable:!0,editor:f,actions:function(e){var t=e.isEmpty;return t?null:(0,x.jsx)(l.Generic.Toolbar.Root,{variant:"action-toolbar",className:Pw("bn-action-toolbar","bn-comment-actions"),children:(0,x.jsx)(l.Generic.Toolbar.Button,{mainTooltip:"Save",variant:"compact",isDisabled:t,onClick:p,children:"Save"})})}})})]})};var zB=function(e){var t=AM();if(!t.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");var n=MM(t.comments.onUpdate.bind(t.comments)),r=OM(!(null==n||!n.selectedThreadId),null,5e3,bM({placement:"bottom",middleware:[PF(10),TF(),jF()],onOpenChange:function(e){var n;e||(null==(n=t.comments)||n.selectThread(void 0),t.focus())}},e.floatingOptions)),i=r.isMounted,a=r.ref,s=r.style,u=r.getFloatingProps,l=r.setReference,c=(0,o.useCallback)((function(){var e;if(null!=n&&n.selectedThreadId){var r=null==(e=t.domElement)?void 0:e.querySelector('[data-bn-thread-id="'.concat(null==n?void 0:n.selectedThreadId,'"]'));r&&l(r)}}),[l,t,null==n?void 0:n.selectedThreadId]);(0,o.useEffect)((function(){if(null!=n&&n.selectedThreadId)return t.onChange((function(){c()}))}),[t,c,null==n?void 0:n.selectedThreadId]),(0,o.useLayoutEffect)(c,[c]);var d=function(e){var t=e.comments;if(!t)throw new Error("Comments plugin not found");var n=t.threadStore,r=(0,o.useRef)();r.current||(r.current=n.getThreads());var i=(0,o.useCallback)((function(e){return n.subscribe((function(t){r.current=t,e()}))}),[n]);return(0,o.useSyncExternalStore)(i,(function(){return r.current}))}(t);if(!i||!n||!n.selectedThreadId)return null;var f=e.floatingThread||HB;return(0,x.jsx)("div",bM(bM({ref:a,style:s},u()),{},{children:(0,x.jsx)(f,{thread:d.get(n.selectedThreadId),selected:!0})}))},VB=function(e){var t=PM(),n=NM(),r=e.block,i=AM(),a=wM((0,o.useState)(""),2),s=a[0],u=a[1],l=(0,o.useCallback)((function(e){u(e.currentTarget.value)}),[]),c=(0,o.useCallback)((function(e){"Enter"===e.key&&(e.preventDefault(),i.updateBlock(r,{props:{name:Iw(s),url:s}}))}),[i,r,s]),d=(0,o.useCallback)((function(){i.updateBlock(r,{props:{name:Iw(s),url:s}})}),[i,r,s]);return(0,x.jsxs)(t.FilePanel.TabPanel,{className:"bn-tab-panel",children:[(0,x.jsx)(t.FilePanel.TextInput,{className:"bn-text-input",placeholder:n.file_panel.embed.url_placeholder,value:s,onChange:l,onKeyDown:c,"data-test":"embed-input"}),(0,x.jsx)(t.FilePanel.Button,{className:"bn-button",onClick:d,"data-test":"embed-input-button",children:n.file_panel.embed.embed_button[r.type]||n.file_panel.embed.embed_button.file})]})},$B=function(e){var t,n=PM(),r=NM(),i=e.block,a=e.setLoading,s=AM(),u=wM((0,o.useState)(!1),2),l=u[0],c=u[1];(0,o.useEffect)((function(){l&&setTimeout((function(){c(!1)}),3e3)}),[l]);var d=(0,o.useCallback)((function(e){function t(){return t=vM(hM().mark((function e(t){var n;return hM().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(!0),void 0===s.uploadFile){e.next=14;break}return e.prev=1,e.next=4,s.uploadFile(t,i.id);case 4:"string"==typeof(n=e.sent)&&(n={props:{name:t.name,url:n}}),s.updateBlock(i,n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),c(!0);case 11:return e.prev=11,a(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])}))),t.apply(this,arguments)}null!==e&&function(e){t.apply(this,arguments)}(e)}),[i,s,a]),f=s.schema.blockSchema[i.type],p=f.isFileBlock&&null!=(t=f.fileBlockAccept)&&t.length?f.fileBlockAccept.join(","):"*/*";return(0,x.jsxs)(n.FilePanel.TabPanel,{className:"bn-tab-panel",children:[(0,x.jsx)(n.FilePanel.FileInput,{className:"bn-file-input","data-test":"upload-input",accept:p,placeholder:r.file_panel.upload.file_placeholder[i.type]||r.file_panel.upload.file_placeholder.file,value:null,onChange:d}),l&&(0,x.jsx)("div",{className:"bn-error-text",children:r.file_panel.upload.upload_error})]})},UB=function(e){var t,n=PM(),r=NM(),i=AM(),a=wM((0,o.useState)(!1),2),s=a[0],u=a[1],l=null!==(t=e.tabs)&&void 0!==t?t:[].concat(function(e){return function(e){if(Array.isArray(e))return kM(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||CM(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(void 0!==i.uploadFile?[{name:r.file_panel.upload.title,tabPanel:(0,x.jsx)($B,{block:e.block,setLoading:u})}]:[]),[{name:r.file_panel.embed.title,tabPanel:(0,x.jsx)(VB,{block:e.block})}]),c=wM((0,o.useState)(e.defaultOpenTab||l[0].name),2),d=c[0],f=c[1];return(0,x.jsx)(n.FilePanel.Root,{className:"bn-panel",defaultOpenTab:d,openTab:d,setOpenTab:f,tabs:l,loading:s})},GB=function(e){var t=AM();if(!t.filePanel)throw new Error("FileToolbarController can only be used when BlockNote editor schema contains file block");var n=MM(t.filePanel.onUpdate.bind(t.filePanel)),r=OM((null==n?void 0:n.show)||!1,(null==n?void 0:n.referencePos)||null,5e3,bM({placement:"bottom",middleware:[PF(10),jF()],onOpenChange:function(e){e||(t.filePanel.closeMenu(),t.focus())}},e.floatingOptions)),o=r.isMounted,i=r.ref,a=r.style,s=r.getFloatingProps;if(!o||!n)return null;n.show,n.referencePos;var u=gM(n,uM),l=e.filePanel||UB;return(0,x.jsx)("div",bM(bM({ref:i,style:a},s()),{},{children:(0,x.jsx)(l,bM({},u))}))};function WB(e,t){jM(e,t),FM(e,t)}function qB(e){return function(t){e.forEach((function(e){"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}function KB(e){var t=SM();if(e||(e=null==t?void 0:t.editor),!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");var n=e,r=wM((0,o.useState)((function(){var e;return(null==(e=n.getSelection())?void 0:e.blocks)||[n.getTextCursorPosition().block]})),2),i=r[0],a=r[1];return WB((function(){var e;return a((null==(e=n.getSelection())?void 0:e.blocks)||[n.getTextCursorPosition().block])}),n),i}var JB={bold:function(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 11H12.5C13.8807 11 15 9.88071 15 8.5C15 7.11929 13.8807 6 12.5 6H8V11ZM18 15.5C18 17.9853 15.9853 20 13.5 20H6V4H12.5C14.9853 4 17 6.01472 17 8.5C17 9.70431 16.5269 10.7981 15.7564 11.6058C17.0979 12.3847 18 13.837 18 15.5ZM8 13V18H13.5C14.8807 18 16 16.8807 16 15.5C16 14.1193 14.8807 13 13.5 13H8Z"},child:[]}]})(e)},italic:function(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15 20H7V18H9.92661L12.0425 6H9V4H17V6H14.0734L11.9575 18H15V20Z"},child:[]}]})(e)},underline:function(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 3V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V3H18V12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12V3H8ZM4 20H20V22H4V20Z"},child:[]}]})(e)},strike:function(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.1538 14C17.3846 14.5161 17.5 15.0893 17.5 15.7196C17.5 17.0625 16.9762 18.1116 15.9286 18.867C14.8809 19.6223 13.4335 20 11.5862 20C9.94674 20 8.32335 19.6185 6.71592 18.8555V16.6009C8.23538 17.4783 9.7908 17.917 11.3822 17.917C13.9333 17.917 15.2128 17.1846 15.2208 15.7196C15.2208 15.0939 15.0049 14.5598 14.5731 14.1173C14.5339 14.0772 14.4939 14.0381 14.4531 14H3V12H21V14H17.1538ZM13.076 11H7.62908C7.4566 10.8433 7.29616 10.6692 7.14776 10.4778C6.71592 9.92084 6.5 9.24559 6.5 8.45207C6.5 7.21602 6.96583 6.165 7.89749 5.299C8.82916 4.43299 10.2706 4 12.2219 4C13.6934 4 15.1009 4.32808 16.4444 4.98426V7.13591C15.2448 6.44921 13.9293 6.10587 12.4978 6.10587C10.0187 6.10587 8.77917 6.88793 8.77917 8.45207C8.77917 8.87172 8.99709 9.23796 9.43293 9.55079C9.86878 9.86362 10.4066 10.1135 11.0463 10.3004C11.6665 10.4816 12.3431 10.7148 13.076 11H13.076Z"},child:[]}]})(e)},code:function(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M23 12L15.9289 19.0711L14.5147 17.6569L20.1716 12L14.5147 6.34317L15.9289 4.92896L23 12ZM3.82843 12L9.48528 17.6569L8.07107 19.0711L1 12L8.07107 4.92896L9.48528 6.34317L3.82843 12Z"},child:[]}]})(e)}},ZB=function(e){var t=NM(),n=PM(),r=AM(),i=function(e,t){return e in t.schema.styleSchema&&t.schema.styleSchema[e].type===e&&"boolean"===t.schema.styleSchema[e].propSchema}(e.basicTextStyle,r),a=KB(r),s=wM((0,o.useState)(e.basicTextStyle in r.getActiveStyles()),2),u=s[0],l=s[1];if(WB((function(){i&&l(e.basicTextStyle in r.getActiveStyles())}),r),!(0,o.useMemo)((function(){return!!i&&!!a.find((function(e){return void 0!==e.content}))}),[i,a])||!r.isEditable)return null;var c=JB[e.basicTextStyle];return(0,x.jsx)(n.FormattingToolbar.Button,{className:"bn-button","data-test":e.basicTextStyle,onClick:function(){return function(e){if(r.focus(),i){if("boolean"!==r.schema.styleSchema[e].propSchema)throw new Error("can only toggle boolean styles");r.toggleStyles(DM({},e,!0))}}(e.basicTextStyle)},isSelected:u,label:t.formatting_toolbar[e.basicTextStyle].tooltip,mainTooltip:t.formatting_toolbar[e.basicTextStyle].tooltip,secondaryTooltip:Bw(t.formatting_toolbar[e.basicTextStyle].secondary_tooltip,t.generic.ctrl_shortcut),icon:(0,x.jsx)(c,{})})},XB=function(e){var t=e.textColor||"default",n=e.backgroundColor||"default",r=e.size||16,i=(0,o.useMemo)((function(){return{pointerEvents:"none",fontSize:(.75*r).toString()+"px",height:r.toString()+"px",lineHeight:r.toString()+"px",textAlign:"center",width:r.toString()+"px"}}),[r]);return(0,x.jsx)("div",{className:"bn-color-icon","data-background-color":n,"data-text-color":t,style:i,children:"A"})},YB=["default","gray","brown","red","orange","yellow","green","blue","purple","pink"],QB=function(e){var t=PM(),n=NM();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)((function(){return e.text?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(t.Generic.Menu.Label,{children:n.color_picker.text_title}),YB.map((function(r){return(0,x.jsx)(t.Generic.Menu.Item,{onClick:function(){e.onClick&&e.onClick(),e.text.setColor(r)},"data-test":"text-color-"+r,icon:(0,x.jsx)(XB,{textColor:r,size:e.iconSize}),checked:e.text.color===r,children:n.color_picker.colors[r]},"text-color-"+r)}))]}):null}),{}),(0,x.jsx)((function(){return e.background?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(t.Generic.Menu.Label,{children:n.color_picker.background_title}),YB.map((function(r){return(0,x.jsx)(t.Generic.Menu.Item,{onClick:function(){e.onClick&&e.onClick(),e.background.setColor(r)},"data-test":"background-color-"+r,icon:(0,x.jsx)(XB,{backgroundColor:r,size:e.iconSize}),checked:e.background.color===r,children:n.color_picker.colors[r]},"background-color-"+r)}))]}):null}),{})]})};function eP(e,t){return"".concat(e,"Color")in t.schema.styleSchema&&t.schema.styleSchema["".concat(e,"Color")].type==="".concat(e,"Color")&&"string"===t.schema.styleSchema["".concat(e,"Color")].propSchema}var tP=function(){var e=PM(),t=NM(),n=AM(),r=eP("text",n),i=eP("background",n),a=KB(n),s=wM((0,o.useState)(r&&n.getActiveStyles().textColor||"default"),2),u=s[0],l=s[1],c=wM((0,o.useState)(i&&n.getActiveStyles().backgroundColor||"default"),2),d=c[0],f=c[1];WB((function(){r&&l(n.getActiveStyles().textColor||"default"),i&&f(n.getActiveStyles().backgroundColor||"default")}),n);var p=(0,o.useCallback)((function(e){if(!r)throw Error("Tried to set text color, but style does not exist in editor schema.");"default"===e?n.removeStyles({textColor:e}):n.addStyles({textColor:e}),setTimeout((function(){n.focus()}))}),[n,r]),h=(0,o.useCallback)((function(e){if(!i)throw Error("Tried to set background color, but style does not exist in editor schema.");"default"===e?n.removeStyles({backgroundColor:e}):n.addStyles({backgroundColor:e}),setTimeout((function(){n.focus()}))}),[i,n]);return(0,o.useMemo)((function(){if(!r&&!i)return!1;var e,t=pM(a);try{for(t.s();!(e=t.n()).done;)if(void 0!==e.value.content)return!0}catch(e){t.e(e)}finally{t.f()}return!1}),[i,a,r])&&n.isEditable?(0,x.jsxs)(e.Generic.Menu.Root,{children:[(0,x.jsx)(e.Generic.Menu.Trigger,{children:(0,x.jsx)(e.FormattingToolbar.Button,{className:"bn-button","data-test":"colors",label:t.formatting_toolbar.colors.tooltip,mainTooltip:t.formatting_toolbar.colors.tooltip,icon:(0,x.jsx)(XB,{textColor:u,backgroundColor:d,size:20})})}),(0,x.jsx)(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-color-picker-dropdown",children:(0,x.jsx)(QB,{text:r?{color:u,setColor:p}:void 0,background:i?{color:d,setColor:h}:void 0})})]}):null},nP=function(e){var t,n=pM(Hx);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.startsWith(r))return e}}catch(e){n.e(e)}finally{n.f()}return"".concat(zx,"://").concat(e)},rP=function(e){var t=PM(),n=NM(),r=e.url,i=e.text,a=e.editLink,s=e.showTextField,u=wM((0,o.useState)(r),2),l=u[0],c=u[1],d=wM((0,o.useState)(i),2),f=d[0],p=d[1];(0,o.useEffect)((function(){c(r),p(i)}),[i,r]);var h=(0,o.useCallback)((function(e){"Enter"===e.key&&(e.preventDefault(),a(nP(l),f))}),[a,l,f]),m=(0,o.useCallback)((function(e){return c(e.currentTarget.value)}),[]),v=(0,o.useCallback)((function(e){return p(e.currentTarget.value)}),[]),g=(0,o.useCallback)((function(){return a(nP(l),f)}),[a,l,f]);return(0,x.jsxs)(t.Generic.Form.Root,{children:[(0,x.jsx)(t.Generic.Form.TextInput,{className:"bn-text-input",name:"url",icon:(0,x.jsx)(dB,{}),autoFocus:!0,placeholder:n.link_toolbar.form.url_placeholder,value:l,onKeyDown:h,onChange:m,onSubmit:g}),!1!==s&&(0,x.jsx)(t.Generic.Form.TextInput,{className:"bn-text-input",name:"title",icon:(0,x.jsx)(yB,{}),placeholder:n.link_toolbar.form.title_placeholder,value:f,onKeyDown:h,onChange:v,onSubmit:g})]})},oP=function(){var e,t=AM(),n=PM(),r=NM(),i=function(e){return"link"in e.schema.inlineContentSchema&&"link"===e.schema.inlineContentSchema.link}(t),a=KB(t),s=wM((0,o.useState)(!1),2),u=s[0],l=s[1],c=wM((0,o.useState)(t.getSelectedLinkUrl()||""),2),d=c[0],f=c[1],p=wM((0,o.useState)(t.getSelectedText()),2),h=p[0],m=p[1];WB((function(){m(t.getSelectedText()||""),f(t.getSelectedLinkUrl()||"")}),t),(0,o.useEffect)((function(){var e,n=function(e){(e.ctrlKey||e.metaKey)&&"k"===e.key&&(l(!0),e.preventDefault())};return null==(e=t.prosemirrorView)||e.dom.addEventListener("keydown",n),function(){var e;null==(e=t.prosemirrorView)||e.dom.removeEventListener("keydown",n)}}),[null==(e=t.prosemirrorView)?void 0:e.dom]);var v=(0,o.useCallback)((function(e){t.createLink(e),t.focus()}),[t]),g=t.transact((function(e){return lE(e.selection)}));return(0,o.useMemo)((function(){if(!i)return!1;var e,t=pM(a);try{for(t.s();!(e=t.n()).done;)if(void 0===e.value.content)return!1}catch(e){t.e(e)}finally{t.f()}return!g}),[i,a,g])&&"link"in t.schema.inlineContentSchema&&t.isEditable?(0,x.jsxs)(n.Generic.Popover.Root,{opened:u,children:[(0,x.jsx)(n.Generic.Popover.Trigger,{children:(0,x.jsx)(n.FormattingToolbar.Button,{className:"bn-button","data-test":"createLink",label:r.formatting_toolbar.link.tooltip,mainTooltip:r.formatting_toolbar.link.tooltip,secondaryTooltip:Bw(r.formatting_toolbar.link.secondary_tooltip,r.generic.ctrl_shortcut),icon:(0,x.jsx)(dB,{}),onClick:function(){return l(!0)}})}),(0,x.jsx)(n.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:(0,x.jsx)(rP,{url:d,text:h,editLink:v,showTextField:!1})})]}):null},iP=function(){var e=NM(),t=PM(),n=AM(),r=wM((0,o.useState)(),2),i=r[0],a=r[1],s=KB(n),u=(0,o.useMemo)((function(){if(1===s.length){var e=s[0];return iE(e,n)?(a(e.props.caption),e):void 0}}),[n,s]),l=(0,o.useCallback)((function(e){u&&"Enter"===e.key&&(e.preventDefault(),n.updateBlock(u,{props:{caption:i}}))}),[i,n,u]),c=(0,o.useCallback)((function(e){return a(e.currentTarget.value)}),[]);return u&&!aE(u,n)&&n.isEditable?(0,x.jsxs)(t.Generic.Popover.Root,{children:[(0,x.jsx)(t.Generic.Popover.Trigger,{children:(0,x.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_caption.tooltip,mainTooltip:e.formatting_toolbar.file_caption.tooltip,icon:(0,x.jsx)(lB,{}),isSelected:""!==u.props.caption})}),(0,x.jsx)(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:(0,x.jsx)(t.Generic.Form.Root,{children:(0,x.jsx)(t.Generic.Form.TextInput,{name:"file-caption",icon:(0,x.jsx)(lB,{}),value:i||"",autoFocus:!0,placeholder:e.formatting_toolbar.file_caption.input_placeholder,onKeyDown:l,onChange:c})})})]}):null},aP=function(){var e=NM(),t=PM(),n=AM(),r=KB(n),i=(0,o.useMemo)((function(){if(1===r.length){var e=r[0];return iE(e,n)?e:void 0}}),[n,r]),a=(0,o.useCallback)((function(){n.focus(),n.removeBlocks([i])}),[n,i]);return i&&!aE(i,n)&&n.isEditable?(0,x.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_delete.tooltip[i.type]||e.formatting_toolbar.file_delete.tooltip.file,mainTooltip:e.formatting_toolbar.file_delete.tooltip[i.type]||e.formatting_toolbar.file_delete.tooltip.file,icon:(0,x.jsx)(SB,{}),onClick:a}):null},sP=function(){var e=NM(),t=PM(),n=AM(),r=wM((0,o.useState)(),2),i=r[0],a=r[1],s=KB(n),u=(0,o.useMemo)((function(){if(1===s.length){var e=s[0];return iE(e,n)?(a(e.props.name),e):void 0}}),[n,s]),l=(0,o.useCallback)((function(e){u&&"Enter"===e.key&&(e.preventDefault(),n.updateBlock(u,{props:{name:i}}))}),[i,n,u]),c=(0,o.useCallback)((function(e){return a(e.currentTarget.value)}),[]);return u&&!aE(u,n)&&n.isEditable?(0,x.jsxs)(t.Generic.Popover.Root,{children:[(0,x.jsx)(t.Generic.Popover.Trigger,{children:(0,x.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_rename.tooltip[u.type]||e.formatting_toolbar.file_rename.tooltip.file,mainTooltip:e.formatting_toolbar.file_rename.tooltip[u.type]||e.formatting_toolbar.file_rename.tooltip.file,icon:(0,x.jsx)(rB,{})})}),(0,x.jsx)(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:(0,x.jsx)(t.Generic.Form.Root,{children:(0,x.jsx)(t.Generic.Form.TextInput,{name:"file-name",icon:(0,x.jsx)(rB,{}),value:i||"",autoFocus:!0,placeholder:e.formatting_toolbar.file_rename.input_placeholder[u.type]||e.formatting_toolbar.file_rename.input_placeholder.file,onKeyDown:l,onChange:c})})})]}):null},uP=function(){var e=NM(),t=PM(),n=AM(),r=KB(n),i=wM((0,o.useState)(!1),2),a=i[0],s=i[1];(0,o.useEffect)((function(){s(!1)}),[r]);var u=1===r.length?r[0]:void 0;return void 0!==u&&iE(u,n)&&n.isEditable?(0,x.jsxs)(t.Generic.Popover.Root,{opened:a,position:"bottom",children:[(0,x.jsx)(t.Generic.Popover.Trigger,{children:(0,x.jsx)(t.FormattingToolbar.Button,{className:"bn-button",onClick:function(){return s(!a)},isSelected:a,mainTooltip:e.formatting_toolbar.file_replace.tooltip[u.type]||e.formatting_toolbar.file_replace.tooltip.file,label:e.formatting_toolbar.file_replace.tooltip[u.type]||e.formatting_toolbar.file_replace.tooltip.file,icon:(0,x.jsx)(wB,{})})}),(0,x.jsx)(t.Generic.Popover.Content,{className:"bn-popover-content bn-panel-popover",variant:"panel-popover",children:(0,x.jsx)(UB,{block:u})})]}):null},lP=function(){var e=NM(),t=PM(),n=AM(),r=KB(n),i=wM((0,o.useState)((function(){return n.canNestBlock()})),2),a=i[0],s=i[1];WB((function(){s(n.canNestBlock())}),n);var u=(0,o.useCallback)((function(){n.focus(),n.nestBlock()}),[n]);return(0,o.useMemo)((function(){return!r.find((function(e){return"inline"!==n.schema.blockSchema[e.type].content}))}),[n.schema.blockSchema,r])&&n.isEditable?(0,x.jsx)(t.FormattingToolbar.Button,{className:"bn-button","data-test":"nestBlock",onClick:u,isDisabled:!a,label:e.formatting_toolbar.nest.tooltip,mainTooltip:e.formatting_toolbar.nest.tooltip,secondaryTooltip:Bw(e.formatting_toolbar.nest.secondary_tooltip,e.generic.ctrl_shortcut),icon:(0,x.jsx)(uB,{})}):null},cP=function(){var e=NM(),t=PM(),n=AM(),r=KB(n),i=wM((0,o.useState)((function(){return n.canUnnestBlock()})),2),a=i[0],s=i[1];WB((function(){s(n.canUnnestBlock())}),n);var u=(0,o.useCallback)((function(){n.focus(),n.unnestBlock()}),[n]);return(0,o.useMemo)((function(){return!r.find((function(e){return"inline"!==n.schema.blockSchema[e.type].content}))}),[n.schema.blockSchema,r])&&n.isEditable?(0,x.jsx)(t.FormattingToolbar.Button,{className:"bn-button","data-test":"unnestBlock",onClick:u,isDisabled:!a,label:e.formatting_toolbar.unnest.tooltip,mainTooltip:e.formatting_toolbar.unnest.tooltip,secondaryTooltip:Bw(e.formatting_toolbar.unnest.secondary_tooltip,e.generic.ctrl_shortcut),icon:(0,x.jsx)(sB,{})}):null},dP=function(e){var t=PM(),n=NM(),r=AM(),i=KB(r),a=wM((0,o.useState)(r.getTextCursorPosition().block),2),s=a[0],u=a[1],l=(0,o.useMemo)((function(){return(e.items||function(e){return[{name:e.slash_menu.paragraph.title,type:"paragraph",icon:yB,isSelected:function(e){return"paragraph"===e.type}},{name:e.slash_menu.heading.title,type:"heading",props:{level:1},icon:oB,isSelected:function(e){return"heading"===e.type&&"level"in e.props&&1===e.props.level}},{name:e.slash_menu.heading_2.title,type:"heading",props:{level:2},icon:iB,isSelected:function(e){return"heading"===e.type&&"level"in e.props&&2===e.props.level}},{name:e.slash_menu.heading_3.title,type:"heading",props:{level:3},icon:aB,isSelected:function(e){return"heading"===e.type&&"level"in e.props&&3===e.props.level}},{name:e.slash_menu.quote.title,type:"quote",icon:gB,isSelected:function(e){return"quote"===e.type}},{name:e.slash_menu.bullet_list.title,type:"bulletListItem",icon:hB,isSelected:function(e){return"bulletListItem"===e.type}},{name:e.slash_menu.numbered_list.title,type:"numberedListItem",icon:pB,isSelected:function(e){return"numberedListItem"===e.type}},{name:e.slash_menu.check_list.title,type:"checkListItem",icon:fB,isSelected:function(e){return"checkListItem"===e.type}}]}(n)).filter((function(e){return e.type in r.schema.blockSchema}))}),[r,n,e.items]),c=(0,o.useMemo)((function(){return void 0!==l.find((function(e){return e.type===s.type}))}),[s.type,l]),d=(0,o.useMemo)((function(){return l.map((function(e){var t=e.icon;return{text:e.name,icon:(0,x.jsx)(t,{size:16}),onClick:function(){return function(e){r.focus(),r.transact((function(){var t,n=pM(i);try{for(n.s();!(t=n.n()).done;){var o=t.value;r.updateBlock(o,{type:e.type,props:e.props})}}catch(e){n.e(e)}finally{n.f()}}))}(e)},isSelected:e.isSelected(s)}}))}),[s,l,r,i]);return WB((function(){u(r.getTextCursorPosition().block)}),r),c&&r.isEditable?(0,x.jsx)(t.FormattingToolbar.Select,{className:"bn-select",items:d}):null},fP=function(){var e=NM(),t=PM(),n=AM(),r=(0,o.useCallback)((function(){var e;null==(e=n.comments)||e.startPendingComment(),n.formattingToolbar.closeMenu()}),[n]);return n.comments?(0,x.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.comment.tooltip,mainTooltip:e.formatting_toolbar.comment.tooltip,icon:(0,x.jsx)(eB,{}),onClick:r}):null},pP=function(){var e=NM(),t=PM(),n=AM(),r=(0,o.useCallback)((function(){n._tiptapEditor.chain().focus().addPendingComment().run()}),[n]);return n._tiptapEditor.commands.addPendingComment&&n.isEditable?(0,x.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.comment.tooltip,mainTooltip:e.formatting_toolbar.comment.tooltip,icon:(0,x.jsx)(eB,{}),onClick:r}):null};function hP(e,t){try{var n=new URL(e,t);if("javascript:"!==n.protocol)return n.href}catch(e){}return"#"}var mP=function(){var e=NM(),t=PM(),n=AM(),r=KB(n),i=(0,o.useMemo)((function(){if(1===r.length){var e=r[0];return iE(e,n)?e:void 0}}),[n,r]),a=(0,o.useCallback)((function(){i&&i.props.url&&(n.focus(),n.resolveFileUrl?n.resolveFileUrl(i.props.url).then((function(e){return window.open(hP(e,window.location.href))})):window.open(hP(i.props.url,window.location.href)))}),[n,i]);return!i||aE(i,n)?null:(0,x.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_download.tooltip[i.type]||e.formatting_toolbar.file_download.tooltip.file,mainTooltip:e.formatting_toolbar.file_download.tooltip[i.type]||e.formatting_toolbar.file_download.tooltip.file,icon:(0,x.jsx)(FB,{}),onClick:a})},vP=function(){var e=NM(),t=PM(),n=AM(),r=KB(n),i=(0,o.useMemo)((function(){if(1===r.length){var e=r[0];return function(e,t){return e.type in t.schema.blockSchema&&t.schema.blockSchema[e.type].isFileBlock&&"showPreview"in t.schema.blockSchema[e.type].propSchema||!1}(e,n)?e:void 0}}),[n,r]),a=(0,o.useCallback)((function(){i&&n.updateBlock(i,{props:{showPreview:!i.props.showPreview}})}),[n,i]);return i&&!aE(i,n)&&n.isEditable?(0,x.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:"Toggle preview",mainTooltip:e.formatting_toolbar.file_preview_toggle.tooltip,icon:(0,x.jsx)(DB,{}),isSelected:i.props.showPreview,onClick:a}):null},gP=function(){var e=NM(),t=PM(),n=AM(),r=KB(n),i=(0,o.useMemo)((function(){var e;if(1===r.length){var t=r[0];return"table"===t.type?null==(e=n.tableHandles)?void 0:e.getMergeDirection(t):void 0}}),[n,r]),a=(0,o.useCallback)((function(){var e;null==(e=n.tableHandles)||e.mergeCells()}),[n]);return n.isEditable&&void 0!==i&&n.settings.tables.splitCells?(0,x.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.table_cell_merge.tooltip,mainTooltip:e.formatting_toolbar.table_cell_merge.tooltip,icon:"horizontal"===i?(0,x.jsx)(mB,{}):(0,x.jsx)(vB,{}),onClick:a}):null},yP={left:function(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H17V21H3V19ZM3 14H21V16H3V14ZM3 9H17V11H3V9Z"},child:[]}]})(e)},center:function(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM5 19H19V21H5V19ZM3 14H21V16H3V14ZM5 9H19V11H5V9Z"},child:[]}]})(e)},right:function(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM7 19H21V21H7V19ZM3 14H21V16H3V14ZM7 9H21V11H7V9Z"},child:[]}]})(e)},justify:function(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM3 14H21V16H3V14ZM3 9H21V11H3V9Z"},child:[]}]})(e)}},bP=function(e){var t=PM(),n=NM(),r=AM(),i=KB(r),a=(0,o.useMemo)((function(){var e,t=i[0];if(uE("textAlignment",t,r))return t.props.textAlignment;if("table"===t.type){var n=null==(e=r.tableHandles)?void 0:e.getCellSelection();if(!n)return;var o=n.cells.map((function(e){var n=e.row,r=e.col;return Ew(t.content.rows[n].cells[r]).props.textAlignment})),a=o[0];if(o.every((function(e){return e===a})))return a}}),[r,i]),s=(0,o.useCallback)((function(e){var t;r.focus();var n,o=pM(i);try{var a=function(){var o=n.value;if(sE("textAlignment",o.type,r))r.updateBlock(o,{props:{textAlignment:e}});else if("table"===o.type){var i=null==(t=r.tableHandles)?void 0:t.getCellSelection();if(!i)return 1;var a=o.content.rows.map((function(e){return bM(bM({},e),{},{cells:e.cells.map((function(e){return Ew(e)}))})}));i.cells.forEach((function(t){var n=t.row,r=t.col;a[n].cells[r].props.textAlignment=e})),r.updateBlock(o,{type:"table",content:bM(bM({},o.content),{},{type:"tableContent",rows:a})}),r.setTextCursorPosition(o)}};for(o.s();!(n=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}}),[r,i]);if(!(0,o.useMemo)((function(){return!!i.find((function(e){return"textAlignment"in e.props||"table"===e.type&&e.children}))}),[i])||!r.isEditable)return null;var u=yP[e.textAlignment];return(0,x.jsx)(t.FormattingToolbar.Button,{className:"bn-button","data-test":"alignText".concat(e.textAlignment.slice(0,1).toUpperCase()+e.textAlignment.slice(1)),onClick:function(){return s(e.textAlignment)},isSelected:a===e.textAlignment,label:n.formatting_toolbar["align_".concat(e.textAlignment)].tooltip,mainTooltip:n.formatting_toolbar["align_".concat(e.textAlignment)].tooltip,icon:(0,x.jsx)(u,{})})},DP=function(e){return[(0,x.jsx)(dP,{items:e},"blockTypeSelect"),(0,x.jsx)(gP,{},"tableCellMergeButton"),(0,x.jsx)(iP,{},"fileCaptionButton"),(0,x.jsx)(uP,{},"replaceFileButton"),(0,x.jsx)(sP,{},"fileRenameButton"),(0,x.jsx)(aP,{},"fileDeleteButton"),(0,x.jsx)(mP,{},"fileDownloadButton"),(0,x.jsx)(vP,{},"filePreviewButton"),(0,x.jsx)(ZB,{basicTextStyle:"bold"},"boldStyleButton"),(0,x.jsx)(ZB,{basicTextStyle:"italic"},"italicStyleButton"),(0,x.jsx)(ZB,{basicTextStyle:"underline"},"underlineStyleButton"),(0,x.jsx)(ZB,{basicTextStyle:"strike"},"strikeStyleButton"),(0,x.jsx)(bP,{textAlignment:"left"},"textAlignLeftButton"),(0,x.jsx)(bP,{textAlignment:"center"},"textAlignCenterButton"),(0,x.jsx)(bP,{textAlignment:"right"},"textAlignRightButton"),(0,x.jsx)(tP,{},"colorStyleButton"),(0,x.jsx)(lP,{},"nestBlockButton"),(0,x.jsx)(cP,{},"unnestBlockButton"),(0,x.jsx)(oP,{},"createLinkButton"),(0,x.jsx)(fP,{},"addCommentButton"),(0,x.jsx)(pP,{},"addTiptapCommentButton")]},wP=function(e){var t=PM();return(0,x.jsx)(t.FormattingToolbar.Root,{className:"bn-toolbar bn-formatting-toolbar",children:e.children||DP(e.blockTypeSelectItems)})},CP=function(e){switch(e){case"left":default:return"top-start";case"center":return"top";case"right":return"top-end"}},kP=function(e){var t=(0,o.useRef)(null),n=AM(),r=wM((0,o.useState)((function(){var e=n.getTextCursorPosition().block;return"textAlignment"in e.props?CP(e.props.textAlignment):"top-start"})),2),i=r[0],a=r[1];WB((function(){var e=n.getTextCursorPosition().block;"textAlignment"in e.props?a(CP(e.props.textAlignment)):a("top-start")}),n);var s=MM(n.formattingToolbar.onUpdate.bind(n.formattingToolbar)),u=OM((null==s?void 0:s.show)||!1,(null==s?void 0:s.referencePos)||null,3e3,bM({placement:i,middleware:[PF(10),TF(),jF()],onOpenChange:function(e,t){e||(n.formattingToolbar.closeMenu(),n.focus())}},e.floatingOptions)),l=u.isMounted,c=u.ref,d=u.style,f=u.getFloatingProps,p=(0,o.useMemo)((function(){return qB([t,c])}),[t,c]);if(!l||!s)return null;if(!s.show&&t.current)return(0,x.jsx)("div",{ref:p,style:d,dangerouslySetInnerHTML:{__html:t.current.innerHTML}});var h=e.formattingToolbar||wP;return(0,x.jsx)("div",bM(bM({ref:p,style:d},f()),{},{children:(0,x.jsx)(h,{})}))},EP=function(e){var t=PM(),n=NM();return(0,x.jsx)(t.LinkToolbar.Button,{className:"bn-button",label:n.link_toolbar.delete.tooltip,mainTooltip:n.link_toolbar.delete.tooltip,isSelected:!1,onClick:e.deleteLink,icon:(0,x.jsx)(cB,{})})},xP=function(e){var t=PM(),n=NM();return(0,x.jsxs)(t.Generic.Popover.Root,{children:[(0,x.jsx)(t.Generic.Popover.Trigger,{children:(0,x.jsx)(t.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.edit.tooltip,isSelected:!1,children:n.link_toolbar.edit.text})}),(0,x.jsx)(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:(0,x.jsx)(rP,bM({},e))})]})},SP=function(e){var t=PM(),n=NM();return(0,x.jsx)(t.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.open.tooltip,label:n.link_toolbar.open.tooltip,isSelected:!1,onClick:function(){window.open(hP(e.url,window.location.href),"_blank")},icon:(0,x.jsx)(OB,{})})},AP=function(e){var t=PM();return e.children?(0,x.jsx)(t.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",children:e.children}):(0,x.jsxs)(t.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",onMouseEnter:e.stopHideTimer,onMouseLeave:e.startHideTimer,children:[(0,x.jsx)(xP,{url:e.url,text:e.text,editLink:e.editLink}),(0,x.jsx)(SP,{url:e.url}),(0,x.jsx)(EP,{deleteLink:e.deleteLink})]})},FP=function(e){var t=AM(),n={deleteLink:t.linkToolbar.deleteLink,editLink:t.linkToolbar.editLink,startHideTimer:t.linkToolbar.startHideTimer,stopHideTimer:t.linkToolbar.stopHideTimer},r=MM(t.linkToolbar.onUpdate.bind(t.linkToolbar)),o=OM((null==r?void 0:r.show)||!1,(null==r?void 0:r.referencePos)||null,4e3,bM({placement:"top-start",middleware:[PF(10),jF()],onOpenChange:function(e){e||(t.linkToolbar.closeMenu(),t.focus())}},e.floatingOptions)),i=o.isMounted,a=o.ref,s=o.style,u=o.getFloatingProps;if(!i||!r)return null;r.show,r.referencePos;var l=gM(r,lM),c=e.linkToolbar||AP;return(0,x.jsx)("div",bM(bM({ref:a,style:s},u()),{},{children:(0,x.jsx)(c,bM(bM({},l),n))}))};function OP(e){return XM({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"},child:[]},{tag:"path",attr:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},child:[]}]})(e)}var MP=function(e){var t=PM(),n=NM(),r=AM(),i=(0,o.useCallback)((function(){var t=e.block.content;if(void 0!==t&&Array.isArray(t)&&0===t.length)r.setTextCursorPosition(e.block),r.openSuggestionMenu("/");else{var n=r.insertBlocks([{type:"paragraph"}],e.block,"after")[0];r.setTextCursorPosition(n),r.openSuggestionMenu("/")}}),[r,e.block]);return(0,x.jsx)(t.SideMenu.Button,{className:"bn-button",label:n.side_menu.add_block_label,icon:(0,x.jsx)(OP,{size:24,onClick:i,"data-test":"dragHandleAdd"})})};function BP(e){return XM({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(e)}function PP(e){return XM({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(e)}var TP=function(e){var t=PM(),n=AM();return sE("textColor",e.block.type,n)||sE("backgroundColor",e.block.type,n)?(0,x.jsxs)(t.Generic.Menu.Root,{position:"right",sub:!0,children:[(0,x.jsx)(t.Generic.Menu.Trigger,{sub:!0,children:(0,x.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children})}),(0,x.jsx)(t.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:(0,x.jsx)(QB,{iconSize:18,text:sE("textColor",e.block.type,n)&&uE("textColor",e.block,n)?{color:e.block.props.textColor,setColor:function(t){return n.updateBlock(e.block,{type:e.block.type,props:{textColor:t}})}}:void 0,background:sE("backgroundColor",e.block.type,n)&&uE("backgroundColor",e.block,n)?{color:e.block.props.backgroundColor,setColor:function(t){return n.updateBlock(e.block,{props:{backgroundColor:t}})}}:void 0})})]}):null},NP=function(e){var t=PM(),n=AM();return(0,x.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",onClick:function(){return n.removeBlocks([e.block])},children:e.children})},jP=function(e){var t=PM(),n=AM();if("table"!==e.block.type||!n.settings.tables.headers)return null;var r=!!e.block.content.headerRows;return(0,x.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:function(){var t=n.getBlock(e.block.id);t&&n.updateBlock(t,bM(bM({},t),{},{content:bM(bM({},t.content),{},{headerRows:r?void 0:1})}))},children:e.children})},_P=function(e){var t=PM(),n=AM();if("table"!==e.block.type||!n.settings.tables.headers)return null;var r=!!e.block.content.headerCols;return(0,x.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:function(){n.updateBlock(e.block,{type:"table",content:bM(bM({},e.block.content),{},{type:"tableContent",headerCols:r?void 0:1})})},children:e.children})},RP=function(e){var t=PM(),n=NM();return(0,x.jsx)(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:e.children||(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(NP,bM(bM({},e),{},{children:n.drag_handle.delete_menuitem})),(0,x.jsx)(TP,bM(bM({},e),{},{children:n.drag_handle.colors_menuitem})),(0,x.jsx)(jP,bM(bM({},e),{},{children:n.drag_handle.header_row_menuitem})),(0,x.jsx)(_P,bM(bM({},e),{},{children:n.drag_handle.header_column_menuitem}))]})})},LP=function(e){var t=PM(),n=NM(),r=e.dragHandleMenu||RP;return(0,x.jsxs)(t.Generic.Menu.Root,{onOpenChange:function(t){t?e.freezeMenu():e.unfreezeMenu()},position:"left",children:[(0,x.jsx)(t.Generic.Menu.Trigger,{children:(0,x.jsx)(t.SideMenu.Button,{label:n.side_menu.drag_handle_label,draggable:!0,onDragStart:function(t){return e.blockDragStart(t,e.block)},onDragEnd:e.blockDragEnd,className:"bn-button",icon:(0,x.jsx)(BP,{size:24,"data-test":"dragHandle"})})}),(0,x.jsx)(r,{block:e.block,children:e.children})]})},IP=function(e){var t=PM(),n=(0,o.useMemo)((function(){var t={"data-block-type":e.block.type};return"heading"===e.block.type&&(t["data-level"]=e.block.props.level.toString()),e.editor.schema.blockSchema[e.block.type].isFileBlock&&(e.block.props.url?t["data-url"]="true":t["data-url"]="false"),t}),[e.block,e.editor.schema.blockSchema]);return(0,x.jsx)(t.SideMenu.Root,bM(bM({className:"bn-side-menu"},n),{},{children:e.children||(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(MP,bM({},e)),(0,x.jsx)(LP,bM({},e))]})}))},HP=function(e){var t=AM(),n={blockDragStart:t.sideMenu.blockDragStart,blockDragEnd:t.sideMenu.blockDragEnd,freezeMenu:t.sideMenu.freezeMenu,unfreezeMenu:t.sideMenu.unfreezeMenu},r=MM(t.sideMenu.onUpdate.bind(t.sideMenu)),o=OM((null==r?void 0:r.show)||!1,(null==r?void 0:r.referencePos)||null,1e3,bM({placement:"left-start"},e.floatingOptions)),i=o.isMounted,a=o.ref,s=o.style,u=o.getFloatingProps;if(!i||!r)return null;r.show,r.referencePos;var l=gM(r,cM),c=e.sideMenu||IP;return(0,x.jsx)("div",bM(bM({ref:a,style:s},u()),{},{children:(0,x.jsx)(c,bM(bM(bM({},l),n),{},{editor:t}))}))};function zP(e,t){return VP.apply(this,arguments)}function VP(){return VP=vM(hM().mark((function e(t,n){return hM().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,IS(t,n);case 2:return e.abrupt("return",e.sent.map((function(e){var t=e.id;return{id:t,onItemClick:e.onItemClick,icon:t}})));case 3:case"end":return e.stop()}}),e)}))),VP.apply(this,arguments)}function $P(e){var t=PM(),n=NM(),r=e.items,i=e.loadingState,a=e.selectedIndex,s=e.onItemClick,u=e.columns,l="loading-initial"===i||"loading"===i?(0,x.jsx)(t.GridSuggestionMenu.Loader,{className:"bn-grid-suggestion-menu-loader",columns:u}):null,c=(0,o.useMemo)((function(){for(var e=[],n=function(){var n=r[o];e.push((0,x.jsx)(t.GridSuggestionMenu.Item,{className:"bn-grid-suggestion-menu-item",item:n,id:"bn-grid-suggestion-menu-item-".concat(o),isSelected:o===a,onClick:function(){return null==s?void 0:s(n)}},n.id))},o=0;o<r.length;o++)n();return e}),[t,r,s,a]);return(0,x.jsxs)(t.GridSuggestionMenu.Root,{id:"bn-grid-suggestion-menu",columns:u,className:"bn-grid-suggestion-menu",children:[l,c,0===c.length&&"loaded"===e.loadingState&&(0,x.jsx)(t.GridSuggestionMenu.EmptyItem,{className:"bn-grid-suggestion-menu-empty-item",columns:u,children:n.suggestion_menu.no_items_title})]})}function UP(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=(0,o.useRef)(0);(0,o.useEffect)((function(){void 0!==t&&(e.length>0?i.current=t.length:t.length-i.current>r&&n())}),[n,r,e.length,t])}function GP(e,t){var n=wM((0,o.useState)([]),2),r=n[0],i=n[1],a=wM((0,o.useState)(!1),2),s=a[0],u=a[1],l=(0,o.useRef)(),c=(0,o.useRef)();return(0,o.useEffect)((function(){var n=e;l.current=e,u(!0),t(e).then((function(e){l.current===n&&(i(e),u(!1),c.current=n)}))}),[e,t]),{items:r||[],usedQuery:c.current,loadingState:void 0===c.current?"loading-initial":s?"loading":"loaded"}}function WP(e){var t=SM().setContentEditableProps,n=AM(),r=e.getItems,i=e.gridSuggestionMenuComponent,a=e.query,s=e.clearQuery,u=e.closeMenu,l=e.onItemClick,c=e.columns,d=(0,o.useCallback)((function(e){u(),s(),null==l||l(e)}),[l,u,s]),f=GP(a,r),p=f.items,h=f.usedQuery,m=f.loadingState;UP(p,h,u);var v=function(e,t,n,r,i){var a=wM((0,o.useState)(0),2),s=a[0],u=a[1],l=void 0!==r&&r>1;return(0,o.useEffect)((function(){var t,o=function(e){return"ArrowLeft"===e.key&&(e.preventDefault(),n.length&&u((s-1+n.length)%n.length)),"ArrowRight"===e.key&&(e.preventDefault(),n.length&&u((s+1+n.length)%n.length)),"ArrowUp"===e.key?(e.preventDefault(),n.length&&u((s-r+n.length)%n.length),!0):"ArrowDown"===e.key?(e.preventDefault(),n.length&&u((s+r)%n.length),!0):"Enter"===e.key&&!e.isComposing&&(e.stopPropagation(),e.preventDefault(),n.length&&(null==i||i(n[s])),!0)};return null==(t=e.domElement)||t.addEventListener("keydown",o,!0),function(){var t;null==(t=e.domElement)||t.removeEventListener("keydown",o,!0)}}),[e.domElement,n,s,i,r,l]),(0,o.useEffect)((function(){u(0)}),[t]),{selectedIndex:0===n.length?void 0:s}}(n,a,p,c,d),g=v.selectedIndex;return(0,o.useEffect)((function(){return t((function(e){return bM(bM({},e),{},{"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})})),function(){t((function(e){return bM(bM({},e),{},{"aria-expanded":!1,"aria-controls":void 0})}))}}),[t]),(0,o.useEffect)((function(){return t((function(e){return bM(bM({},e),{},{"aria-activedescendant":g?"bn-suggestion-menu-item-"+g:void 0})})),function(){t((function(e){return bM(bM({},e),{},{"aria-activedescendant":void 0})}))}}),[t,g]),(0,x.jsx)(i,{items:p,onItemClick:d,loadingState:m,selectedIndex:g,columns:c})}function qP(e){var t=AM(),n=e.triggerCharacter,r=e.gridSuggestionMenuComponent,i=e.columns,a=e.minQueryLength,s=e.onItemClick,u=e.getItems,l=e.floatingOptions,c=(0,o.useMemo)((function(){return s||function(e){e.onItemClick(t)}}),[t,s]),d=(0,o.useMemo)((function(){return u||function(){var e=vM(hM().mark((function e(n){return hM().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zP(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),[t,u]),f={closeMenu:t.suggestionMenus.closeMenu,clearQuery:t.suggestionMenus.clearQuery},p=MM((0,o.useCallback)((function(e){return t.suggestionMenus.onUpdate(n,e)}),[t.suggestionMenus,n])),h=OM((null==p?void 0:p.show)||!1,(null==p?void 0:p.referencePos)||null,2e3,bM({placement:"bottom-start",middleware:[PF(10),jF(),_F({apply:function(e){var t=e.availableHeight,n=e.elements;Object.assign(n.floating.style,{maxHeight:"".concat(t-10,"px")})}})],onOpenChange:function(e){e||t.suggestionMenus.closeMenu()}},l)),m=h.isMounted,v=h.ref,g=h.style,y=h.getFloatingProps;return m&&p&&(null!=p&&p.ignoreQueryLength||!a||!(p.query.startsWith(" ")||p.query.length<a))?(0,x.jsx)("div",bM(bM({ref:v,style:g},y()),{},{children:(0,x.jsx)(WP,{query:p.query,closeMenu:f.closeMenu,clearQuery:f.clearQuery,getItems:d,columns:i,gridSuggestionMenuComponent:r||$P,onItemClick:c})})):null}function KP(e){var t=PM(),n=NM(),r=e.items,i=e.loadingState,a=e.selectedIndex,s=e.onItemClick,u="loading-initial"===i||"loading"===i?(0,x.jsx)(t.SuggestionMenu.Loader,{className:"bn-suggestion-menu-loader"}):null,l=(0,o.useMemo)((function(){for(var e,n=[],o=function(){var o=r[i];o.group!==e&&(e=o.group,n.push((0,x.jsx)(t.SuggestionMenu.Label,{className:"bn-suggestion-menu-label",children:e},e))),n.push((0,x.jsx)(t.SuggestionMenu.Item,{className:Pw("bn-suggestion-menu-item","small"===o.size?"bn-suggestion-menu-item-small":""),item:o,id:"bn-suggestion-menu-item-".concat(i),isSelected:i===a,onClick:function(){return null==s?void 0:s(o)}},o.title))},i=0;i<r.length;i++)o();return n}),[t,r,s,a]);return(0,x.jsxs)(t.SuggestionMenu.Root,{id:"bn-suggestion-menu",className:"bn-suggestion-menu",children:[l,0===l.length&&("loading"===e.loadingState||"loaded"===e.loadingState)&&(0,x.jsx)(t.SuggestionMenu.EmptyItem,{className:"bn-suggestion-menu-item",children:n.suggestion_menu.no_items_title}),u]})}function JP(e){var t=SM().setContentEditableProps,n=AM(),r=e.getItems,i=e.suggestionMenuComponent,a=e.query,s=e.clearQuery,u=e.closeMenu,l=e.onItemClick,c=(0,o.useCallback)((function(e){u(),s(),null==l||l(e)}),[l,u,s]),d=GP(a,r),f=d.items,p=d.usedQuery,h=d.loadingState;UP(f,p,u);var m=function(e,t,n,r,i){var a=function(e,t){var n=wM((0,o.useState)(0),2),r=n[0],i=n[1];return{selectedIndex:r,setSelectedIndex:i,handler:function(n){if("ArrowUp"===n.key)return n.preventDefault(),e.length&&i((r-1+e.length)%e.length),!0;if("ArrowDown"===n.key)return n.preventDefault(),e.length&&i((r+1)%e.length),!0;var o=function(e){return void 0!==e.nativeEvent}(n)?n.nativeEvent.isComposing:n.isComposing;return"Enter"===n.key&&!o&&(n.preventDefault(),n.stopPropagation(),e.length&&(null==t||t(e[r])),!0)}}}(n,r),s=a.selectedIndex,u=a.setSelectedIndex,l=a.handler;return(0,o.useEffect)((function(){var t;return null==(t=i||e.domElement)||t.addEventListener("keydown",l,!0),function(){var t;null==(t=i||e.domElement)||t.removeEventListener("keydown",l,!0)}}),[e.domElement,n,s,r,i,l]),(0,o.useEffect)((function(){u(0)}),[t,u]),{selectedIndex:0===n.length?void 0:s}}(n,a,f,c).selectedIndex;return(0,o.useEffect)((function(){return t((function(e){return bM(bM({},e),{},{"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})})),function(){t((function(e){return bM(bM({},e),{},{"aria-expanded":!1,"aria-controls":void 0})}))}}),[t]),(0,o.useEffect)((function(){return t((function(e){return bM(bM({},e),{},{"aria-activedescendant":m?"bn-suggestion-menu-item-"+m:void 0})})),function(){t((function(e){return bM(bM({},e),{},{"aria-activedescendant":void 0})}))}}),[t,m]),(0,x.jsx)(i,{items:f,onItemClick:c,loadingState:h,selectedIndex:m})}var ZP={heading:oB,heading_2:iB,heading_3:aB,quote:gB,numbered_list:pB,bullet_list:hB,check_list:fB,paragraph:yB,table:function(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 10V14H19V10H13ZM11 10H5V14H11V10ZM13 19H19V16H13V19ZM11 19V16H5V19H11ZM13 5V8H19V5H13ZM11 5H5V8H11V5ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3Z"},child:[]}]})(e)},image:bB,video:function(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"},child:[]}]})(e)},audio:kB,file:nB,emoji:function(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM8 13C8 15.2091 9.79086 17 12 17C14.2091 17 16 15.2091 16 13H8ZM8 11C8.82843 11 9.5 10.3284 9.5 9.5C9.5 8.67157 8.82843 8 8 8C7.17157 8 6.5 8.67157 6.5 9.5C6.5 10.3284 7.17157 11 8 11ZM16 11C16.8284 11 17.5 10.3284 17.5 9.5C17.5 8.67157 16.8284 8 16 8C15.1716 8 14.5 8.67157 14.5 9.5C14.5 10.3284 15.1716 11 16 11Z"},child:[]}]})(e)},code_block:function(e){return XM({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3.41436 5.99995L5.70726 3.70706L4.29304 2.29285L0.585938 5.99995L4.29304 9.70706L5.70726 8.29285L3.41436 5.99995ZM9.58594 5.99995L7.29304 3.70706L8.70726 2.29285L12.4144 5.99995L8.70726 9.70706L7.29304 8.29285L9.58594 5.99995ZM14.0002 2.99995H21.0002C21.5524 2.99995 22.0002 3.44767 22.0002 3.99995V20C22.0002 20.5522 21.5524 21 21.0002 21H3.00015C2.44787 21 2.00015 20.5522 2.00015 20V12H4.00015V19H20.0002V4.99995H14.0002V2.99995Z"},child:[]}]})(e)}};function XP(e){return function(e){var t=[];return rE("heading",e)&&t.push(hw({onItemClick:function(){cE(e,{type:"heading",props:{level:1}})},badge:Bw("Mod-Alt-1"),key:"heading"},e.dictionary.slash_menu.heading),hw({onItemClick:function(){cE(e,{type:"heading",props:{level:2}})},badge:Bw("Mod-Alt-2"),key:"heading_2"},e.dictionary.slash_menu.heading_2),hw({onItemClick:function(){cE(e,{type:"heading",props:{level:3}})},badge:Bw("Mod-Alt-3"),key:"heading_3"},e.dictionary.slash_menu.heading_3)),rE("quote",e)&&t.push(hw({onItemClick:function(){cE(e,{type:"quote"})},key:"quote"},e.dictionary.slash_menu.quote)),rE("numberedListItem",e)&&t.push(hw({onItemClick:function(){cE(e,{type:"numberedListItem"})},badge:Bw("Mod-Shift-7"),key:"numbered_list"},e.dictionary.slash_menu.numbered_list)),rE("bulletListItem",e)&&t.push(hw({onItemClick:function(){cE(e,{type:"bulletListItem"})},badge:Bw("Mod-Shift-8"),key:"bullet_list"},e.dictionary.slash_menu.bullet_list)),rE("checkListItem",e)&&t.push(hw({onItemClick:function(){cE(e,{type:"checkListItem"})},badge:Bw("Mod-Shift-9"),key:"check_list"},e.dictionary.slash_menu.check_list)),rE("paragraph",e)&&t.push(hw({onItemClick:function(){cE(e,{type:"paragraph"})},badge:Bw("Mod-Alt-0"),key:"paragraph"},e.dictionary.slash_menu.paragraph)),rE("codeBlock",e)&&t.push(hw({onItemClick:function(){cE(e,{type:"codeBlock"})},badge:Bw("Mod-Alt-c"),key:"code_block"},e.dictionary.slash_menu.code_block)),rE("table",e)&&t.push(hw({onItemClick:function(){cE(e,{type:"table",content:{type:"tableContent",rows:[{cells:["","",""]},{cells:["","",""]}]}})},badge:void 0,key:"table"},e.dictionary.slash_menu.table)),rE("image",e)&&t.push(hw({onItemClick:function(){var t=cE(e,{type:"image"});e.transact((function(n){return n.setMeta(e.filePanel.plugins[0],{block:t})}))},key:"image"},e.dictionary.slash_menu.image)),rE("video",e)&&t.push(hw({onItemClick:function(){var t=cE(e,{type:"video"});e.transact((function(n){return n.setMeta(e.filePanel.plugins[0],{block:t})}))},key:"video"},e.dictionary.slash_menu.video)),rE("audio",e)&&t.push(hw({onItemClick:function(){var t=cE(e,{type:"audio"});e.transact((function(n){return n.setMeta(e.filePanel.plugins[0],{block:t})}))},key:"audio"},e.dictionary.slash_menu.audio)),rE("file",e)&&t.push(hw({onItemClick:function(){var t=cE(e,{type:"file"});e.transact((function(n){return n.setMeta(e.filePanel.plugins[0],{block:t})}))},key:"file"},e.dictionary.slash_menu.file)),t.push(hw({onItemClick:function(){e.openSuggestionMenu(":",{deleteTriggerCharacter:!0,ignoreQueryLength:!0})},key:"emoji"},e.dictionary.slash_menu.emoji)),t}(e).map((function(e){var t=ZP[e.key];return bM(bM({},e),{},{icon:(0,x.jsx)(t,{size:18})})}))}function YP(e){var t=AM(),n=e.triggerCharacter,r=e.suggestionMenuComponent,i=e.minQueryLength,a=e.onItemClick,s=e.getItems,u=e.floatingOptions,l=(0,o.useMemo)((function(){return a||function(e){e.onItemClick(t)}}),[t,a]),c=(0,o.useMemo)((function(){return s||function(){var e=vM(hM().mark((function e(n){return hM().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dE(XP(t),n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),[t,s]),d={closeMenu:t.suggestionMenus.closeMenu,clearQuery:t.suggestionMenus.clearQuery},f=MM((0,o.useCallback)((function(e){return t.suggestionMenus.onUpdate(n,e)}),[t.suggestionMenus,n])),p=OM((null==f?void 0:f.show)||!1,(null==f?void 0:f.referencePos)||null,2e3,bM({placement:"bottom-start",middleware:[PF(10),jF({mainAxis:!0,crossAxis:!1}),TF(),_F({apply:function(e){var t=e.availableHeight,n=e.elements;Object.assign(n.floating.style,{maxHeight:"".concat(t-10,"px")})}})],onOpenChange:function(e){e||t.suggestionMenus.closeMenu()}},u)),h=p.isMounted,m=p.ref,v=p.style,g=p.getFloatingProps;return h&&f&&(null!=f&&f.ignoreQueryLength||!i||!(f.query.startsWith(" ")||f.query.length<i))?(0,x.jsx)("div",bM(bM({ref:m,style:v},g()),{},{children:(0,x.jsx)(JP,{query:f.query,closeMenu:d.closeMenu,clearQuery:d.clearQuery,getItems:c,suggestionMenuComponent:r||KP,onItemClick:l})})):null}var QP=function(e){var t=PM(),n=(0,o.useRef)(!1),r=wM((0,o.useState)(),2),i=r[0],a=r[1],s=(0,o.useCallback)((function(t){e.onMouseDown(),a({originalContent:e.block.content,originalCroppedContent:{rows:e.editor.tableHandles.cropEmptyRowsOrColumns(e.block,"addOrRemoveColumns"===e.orientation?"columns":"rows")},startPos:"addOrRemoveColumns"===e.orientation?t.clientX:t.clientY}),n.current=!1,t.preventDefault()}),[e]),u=(0,o.useCallback)((function(){n.current||e.editor.updateBlock(e.block,{type:"table",content:bM(bM({},e.block.content),{},{rows:"addOrRemoveColumns"===e.orientation?e.editor.tableHandles.addRowsOrColumns(e.block,"columns",1):e.editor.tableHandles.addRowsOrColumns(e.block,"rows",1)})})}),[e.block,e.orientation,e.editor]);return(0,o.useEffect)((function(){var t=function(t){var r,o,a,s;if(!i)throw new Error("editingState is undefined");n.current=!0;var u=("addOrRemoveColumns"===e.orientation?t.clientX:t.clientY)-i.startPos,l="addOrRemoveColumns"===e.orientation?null!==(r=null==(a=i.originalCroppedContent.rows[0])?void 0:a.cells.length)&&void 0!==r?r:0:i.originalCroppedContent.rows.length,c="addOrRemoveColumns"===e.orientation?null!==(o=null==(s=i.originalContent.rows[0])?void 0:s.cells.length)&&void 0!==o?o:0:i.originalContent.rows.length,d="addOrRemoveColumns"===e.orientation?e.block.content.rows[0].cells.length:e.block.content.rows.length,f=c+function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,n=Math.floor(e)+t,r=Math.ceil(e)-t;return e>=n&&e<=r?Math.round(e):e<n?Math.floor(e):Math.ceil(e)}(u/("addOrRemoveColumns"===e.orientation?120:31),.3);f>=l&&f>0&&f!==d&&(e.editor.updateBlock(e.block,{type:"table",content:bM(bM({},e.block.content),{},{rows:"addOrRemoveColumns"===e.orientation?e.editor.tableHandles.addRowsOrColumns({type:"table",content:i.originalCroppedContent},"columns",f-l):e.editor.tableHandles.addRowsOrColumns({type:"table",content:i.originalCroppedContent},"rows",f-l)})}),e.block.content&&e.editor.setTextCursorPosition(e.block))};return i&&window.addEventListener("mousemove",t),function(){window.removeEventListener("mousemove",t)}}),[i,e.block,e.editor,e.orientation]),(0,o.useEffect)((function(){var t=e.onMouseUp,n=function(){a(void 0),t()};return i&&window.addEventListener("mouseup",n),function(){window.removeEventListener("mouseup",n)}}),[i,e.onMouseUp]),(0,x.jsx)(t.TableHandle.ExtendButton,{className:Pw("bn-extend-button","addOrRemoveColumns"===e.orientation?"bn-extend-button-add-remove-columns":"bn-extend-button-add-remove-rows",null!==i?"bn-extend-button-editing":""),onClick:u,onMouseDown:s,children:e.children||(0,x.jsx)(EB,{size:18,"data-test":"extendButton"})})},eT=function(e){var t=PM(),n=NM(),r=AM().tableHandles;return r?(0,x.jsx)(t.Generic.Menu.Item,{onClick:function(){r.addRowOrColumn(e.index,"row"===e.orientation?{orientation:"row",side:e.side}:{orientation:"column",side:e.side})},children:n.table_handle["add_".concat(e.side,"_menuitem")]}):null},tT=function(e){var t=PM(),n=NM(),r=AM().tableHandles;return r?(0,x.jsx)(t.Generic.Menu.Item,{onClick:function(){r.removeRowOrColumn(e.index,e.orientation)},children:"row"===e.orientation?n.table_handle.delete_row_menuitem:n.table_handle.delete_column_menuitem}):null},nT=function(e){var t=PM(),n=NM(),r=AM(),i=r.tableHandles,a=(0,o.useMemo)((function(){return i&&e.block?"row"===e.orientation?i.getCellsAtRowHandle(e.block,e.index):i.getCellsAtColumnHandle(e.block,e.index):[]}),[e.block,e.index,e.orientation,i]),s=function(t,n){var o=e.block.content.rows.map((function(e){return bM(bM({},e),{},{cells:e.cells.map((function(e){return Ew(e)}))})}));a.forEach((function(e){var r=e.row,i=e.col;"text"===n?o[r].cells[i].props.textColor=t:o[r].cells[i].props.backgroundColor=t})),r.updateBlock(e.block,{type:"table",content:bM(bM({},e.block.content),{},{rows:o})}),r.setTextCursorPosition(e.block)};if(!a||!a[0]||!i||!1===r.settings.tables.cellTextColor&&!1===r.settings.tables.cellBackgroundColor)return null;var u=Ew(a[0].cell);return(0,x.jsxs)(t.Generic.Menu.Root,{position:"right",sub:!0,children:[(0,x.jsx)(t.Generic.Menu.Trigger,{sub:!0,children:(0,x.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children||n.drag_handle.colors_menuitem})}),(0,x.jsx)(t.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:(0,x.jsx)(QB,{iconSize:18,text:r.settings.tables.cellTextColor?{color:a.every((function(e){var t=e.cell;return Sw(t)&&t.props.textColor===u.props.textColor}))?u.props.textColor:"default",setColor:function(e){s(e,"text")}}:void 0,background:r.settings.tables.cellBackgroundColor?{color:a.every((function(e){var t=e.cell;return Sw(t)&&t.props.backgroundColor===u.props.backgroundColor}))?u.props.backgroundColor:"default",setColor:function(e){return s(e,"background")}}:void 0})})]})},rT=function(e){var t=PM(),n=NM(),r=AM();if(!r.tableHandles||0!==e.index||"row"!==e.orientation||!r.settings.tables.headers)return null;var o=!!e.block.content.headerRows;return(0,x.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:function(){var t=r.getBlock(e.block.id);t&&r.updateBlock(t,bM(bM({},t),{},{content:bM(bM({},t.content),{},{headerRows:o?void 0:1})}))},children:n.drag_handle.header_row_menuitem})},oT=function(e){var t=PM(),n=NM(),r=AM();if(!r.tableHandles||0!==e.index||"column"!==e.orientation||!r.settings.tables.headers)return null;var o=!!e.block.content.headerCols;return(0,x.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:function(){var t=r.getBlock(e.block.id);t&&r.updateBlock(t,bM(bM({},t),{},{content:bM(bM({},t.content),{},{headerCols:o?void 0:1})}))},children:n.drag_handle.header_column_menuitem})},iT=function(e){var t=PM();return(0,x.jsx)(t.Generic.Menu.Dropdown,{className:"bn-table-handle-menu",children:e.children||(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(tT,{orientation:e.orientation,block:e.block,index:e.index}),(0,x.jsx)(eT,{orientation:e.orientation,block:e.block,index:e.index,side:"row"===e.orientation?"above":"left"}),(0,x.jsx)(eT,{orientation:e.orientation,block:e.block,index:e.index,side:"row"===e.orientation?"below":"right"}),(0,x.jsx)(rT,{orientation:e.orientation,block:e.block,index:e.index}),(0,x.jsx)(oT,{orientation:e.orientation,block:e.block,index:e.index}),(0,x.jsx)(nT,{orientation:e.orientation,block:e.block,index:e.index})]})})},aT=function(e){var t=PM(),n=wM((0,o.useState)(!1),2),r=n[0],i=n[1],a=e.tableHandleMenu||iT,s=(0,o.useMemo)((function(){var t=e.editor.tableHandles;return!(!t||!e.block||"table"!==e.block.type)&&("column"===e.orientation?t.getCellsAtColumnHandle(e.block,e.index).every((function(e){return 1===Aw(e.cell)})):t.getCellsAtRowHandle(e.block,e.index).every((function(e){return 1===Fw(e.cell)})))}),[e.block,e.editor.tableHandles,e.index,e.orientation]);return(0,x.jsxs)(t.Generic.Menu.Root,{onOpenChange:function(t){t?(e.freezeHandles(),e.hideOtherSide()):(e.unfreezeHandles(),e.showOtherSide(),e.editor.focus())},position:"right",children:[(0,x.jsx)(t.Generic.Menu.Trigger,{children:(0,x.jsx)(t.TableHandle.Root,{className:Pw("bn-table-handle",r?"bn-table-handle-dragging":"",s?"":"bn-table-handle-not-draggable"),draggable:s,onDragStart:function(t){i(!0),e.dragStart(t)},onDragEnd:function(){e.dragEnd(),i(!1)},style:"column"===e.orientation?{transform:"rotate(0.25turn)"}:void 0,children:e.children||(0,x.jsx)(BP,{size:24,"data-test":"tableHandle"})})}),(0,TA.createPortal)((0,x.jsx)(a,{orientation:e.orientation,block:e.block,index:e.index}),e.menuContainer)]})};function sT(e,t,n){var r=EO({open:t,placement:"addOrRemoveColumns"===e?"right":"bottom",middleware:[_F({apply:function(t){var n=t.rects,r=t.elements;Object.assign(r.floating.style,"addOrRemoveColumns"===e?{height:"".concat(n.reference.height,"px")}:{width:"".concat(n.reference.width,"px")})}})]}),i=r.refs,a=r.update,s=r.context,u=r.floatingStyles,l=NO(s),c=l.isMounted,d=l.styles;return(0,o.useEffect)((function(){a()}),[n,a]),(0,o.useEffect)((function(){null!==n&&i.setReference({getBoundingClientRect:function(){return n}})}),[e,n,i]),(0,o.useMemo)((function(){return{isMounted:c,ref:i.setFloating,style:bM(bM({display:"flex"},d),u)}}),[u,c,i.setFloating,d])}function uT(e,t,n){return n&&"row"===n.draggedCellOrientation?new DOMRect(t.x,n.mousePos,t.width,0):new DOMRect(t.x,e.y,t.width,e.height)}function lT(e,t,n){return n&&"col"===n.draggedCellOrientation?new DOMRect(n.mousePos,t.y,0,t.height):new DOMRect(e.x,t.y,e.width,t.height)}function cT(e){return new DOMRect(e.x,e.y,e.width,0)}function dT(e,t,n,r,i){var a=EO({open:t,placement:"row"===e?"left":"col"===e?"top":"bottom-end",middleware:[PF("row"===e?-10:"col"===e?-12:{mainAxis:1,crossAxis:-1})]}),s=a.refs,u=a.update,l=a.context,c=a.floatingStyles,d=NO(l),f=d.isMounted,p=d.styles;return(0,o.useEffect)((function(){u()}),[n,r,u]),(0,o.useEffect)((function(){null===n||null===r||i&&"cell"===e||s.setReference({getBoundingClientRect:function(){return("row"===e?uT:"col"===e?lT:cT)(n,r,i)}})}),[i,e,n,r,s]),(0,o.useMemo)((function(){return{isMounted:f,ref:s.setFloating,style:bM(bM({display:"flex"},p),c)}}),[c,f,s.setFloating,p])}var fT=function(e){var t,n,r=PM(),o=NM(),i=AM(),a=function(t,n){var r=e.block.content.rows.map((function(e){return bM(bM({},e),{},{cells:e.cells.map((function(e){return Ew(e)}))})}));"text"===n?r[e.rowIndex].cells[e.colIndex].props.textColor=t:r[e.rowIndex].cells[e.colIndex].props.backgroundColor=t,i.updateBlock(e.block,{type:"table",content:bM(bM({},e.block.content),{},{rows:r})}),i.setTextCursorPosition(e.block)},s=null==(n=null==(t=e.block.content.rows[e.rowIndex])?void 0:t.cells)?void 0:n[e.colIndex];return!s||!1===i.settings.tables.cellTextColor&&!1===i.settings.tables.cellBackgroundColor?null:(0,x.jsxs)(r.Generic.Menu.Root,{position:"right",sub:!0,children:[(0,x.jsx)(r.Generic.Menu.Trigger,{sub:!0,children:(0,x.jsx)(r.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children||o.drag_handle.colors_menuitem})}),(0,x.jsx)(r.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:(0,x.jsx)(QB,{iconSize:18,text:i.settings.tables.cellTextColor?{color:Sw(s)?s.props.textColor:"default",setColor:function(e){return a(e,"text")}}:void 0,background:i.settings.tables.cellBackgroundColor?{color:Sw(s)?s.props.backgroundColor:"default",setColor:function(e){return a(e,"background")}}:void 0})})]})},pT=function(e){var t,n,r=PM(),o=NM(),i=AM(),a=null==(n=null==(t=e.block.content.rows[e.rowIndex])?void 0:t.cells)?void 0:n[e.colIndex];return a&&Sw(a)&&(1!==Fw(a)||1!==Aw(a))&&i.settings.tables.splitCells?(0,x.jsx)(r.Generic.Menu.Item,{onClick:function(){var t;null==(t=i.tableHandles)||t.splitCell({row:e.rowIndex,col:e.colIndex})},children:o.table_handle.split_cell_menuitem}):null},hT=function(e){var t=PM();return(0,x.jsx)(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:e.children||(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(pT,{block:e.block,rowIndex:e.rowIndex,colIndex:e.colIndex}),(0,x.jsx)(fT,{block:e.block,rowIndex:e.rowIndex,colIndex:e.colIndex})]})})},mT=function(e){var t=PM(),n=e.tableCellMenu||hT;return e.editor.settings.tables.splitCells||e.editor.settings.tables.cellBackgroundColor||e.editor.settings.tables.cellTextColor?(0,x.jsxs)(t.Generic.Menu.Root,{onOpenChange:function(t){t?e.freezeHandles():(e.unfreezeHandles(),e.editor.focus())},position:"right",children:[(0,x.jsx)(t.Generic.Menu.Trigger,{children:(0,x.jsx)(t.Generic.Menu.Button,{className:"bn-table-cell-handle",children:e.children||(0,x.jsx)(PP,{size:12,"data-test":"tableCellHandle"})})}),(0,TA.createPortal)((0,x.jsx)(n,{block:e.block,rowIndex:e.rowIndex,colIndex:e.colIndex}),e.menuContainer)]}):null},vT=function(e){var t,n,r=AM(),i=wM((0,o.useState)(null),2),a=i[0],s=i[1];if(!r.tableHandles)throw new Error("TableHandlesController can only be used when BlockNote editor schema contains table block");var u={rowDragStart:r.tableHandles.rowDragStart,colDragStart:r.tableHandles.colDragStart,dragEnd:r.tableHandles.dragEnd,freezeHandles:r.tableHandles.freezeHandles,unfreezeHandles:r.tableHandles.unfreezeHandles},l=u.freezeHandles,c=u.unfreezeHandles,d=(0,o.useCallback)((function(){l(),F(!0),E(!0)}),[l]),f=(0,o.useCallback)((function(){c(),F(!1),E(!1)}),[c]),p=MM(r.tableHandles.onUpdate.bind(r.tableHandles)),h=(0,o.useMemo)((function(){var e,t;return null!=p&&p.draggingState?{draggedCellOrientation:null==(e=null==p?void 0:p.draggingState)?void 0:e.draggedCellOrientation,mousePos:null==(t=null==p?void 0:p.draggingState)?void 0:t.mousePos}:void 0}),[null==p?void 0:p.draggingState,null==(t=null==p?void 0:p.draggingState)?void 0:t.draggedCellOrientation,null==(n=null==p?void 0:p.draggingState)?void 0:n.mousePos]),m=function(e,t,n,r){var i=dT("row",e,t,n,r),a=dT("col",e,t,n,r),s=dT("cell",e,t,n,r);return(0,o.useMemo)((function(){return{rowHandle:i,colHandle:a,cellHandle:s}}),[a,i,s])}((null==p?void 0:p.show)||!1,(null==p?void 0:p.referencePosCell)||null,(null==p?void 0:p.referencePosTable)||null,h),v=m.rowHandle,g=m.colHandle,y=m.cellHandle,b=function(e,t,n){var r=sT("addOrRemoveRows",t,n),i=sT("addOrRemoveColumns",e,n);return(0,o.useMemo)((function(){return{addOrRemoveRowsButton:r,addOrRemoveColumnsButton:i}}),[i,r])}((null==p?void 0:p.showAddOrRemoveColumnsButton)||!1,(null==p?void 0:p.showAddOrRemoveRowsButton)||!1,(null==p?void 0:p.referencePosTable)||null),D=b.addOrRemoveColumnsButton,w=b.addOrRemoveRowsButton,C=wM((0,o.useState)(!1),2),k=C[0],E=C[1],S=wM((0,o.useState)(!1),2),A=S[0],F=S[1];if(!p)return null;var O=e.tableHandle||aT,M=e.extendButton||QP,B=e.tableCellHandle||mT;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{ref:s}),(0,x.jsxs)(gO,{root:p.widgetContainer,children:[!k&&a&&v.isMounted&&void 0!==p.rowIndex&&(0,x.jsx)("div",{ref:v.ref,style:v.style,children:(0,x.jsx)(O,{editor:r,orientation:"row",showOtherSide:function(){return F(!1)},hideOtherSide:function(){return F(!0)},index:p.rowIndex,block:p.block,dragStart:u.rowDragStart,dragEnd:u.dragEnd,freezeHandles:u.freezeHandles,unfreezeHandles:u.unfreezeHandles,menuContainer:a})}),!A&&a&&g.isMounted&&void 0!==p.colIndex&&(0,x.jsx)("div",{ref:g.ref,style:g.style,children:(0,x.jsx)(O,{editor:r,orientation:"column",showOtherSide:function(){return E(!1)},hideOtherSide:function(){return E(!0)},index:p.colIndex,block:p.block,dragStart:u.colDragStart,dragEnd:u.dragEnd,freezeHandles:u.freezeHandles,unfreezeHandles:u.unfreezeHandles,menuContainer:a})}),a&&y.isMounted&&void 0!==p.colIndex&&void 0!==p.rowIndex&&(0,x.jsx)("div",{ref:y.ref,style:y.style,children:(0,x.jsx)(B,{editor:r,block:p.block,rowIndex:p.rowIndex,colIndex:p.colIndex,menuContainer:a,freezeHandles:u.freezeHandles,unfreezeHandles:u.unfreezeHandles})}),(0,x.jsx)("div",{ref:w.ref,style:w.style,children:(0,x.jsx)(M,{editor:r,orientation:"addOrRemoveRows",block:p.block,onMouseDown:d,onMouseUp:f})}),(0,x.jsx)("div",{ref:D.ref,style:D.style,children:(0,x.jsx)(M,{editor:r,orientation:"addOrRemoveColumns",block:p.block,onMouseDown:d,onMouseUp:f})})]})]})};function gT(e){var t=AM();if(!t)throw new Error("BlockNoteDefaultUI must be used within a BlockNoteContext.Provider");return(0,x.jsxs)(x.Fragment,{children:[!1!==e.formattingToolbar&&(0,x.jsx)(kP,{}),!1!==e.linkToolbar&&(0,x.jsx)(FP,{}),!1!==e.slashMenu&&(0,x.jsx)(YP,{triggerCharacter:"/"}),!1!==e.emojiPicker&&(0,x.jsx)(qP,{triggerCharacter:":",columns:10,minQueryLength:2}),!1!==e.sideMenu&&(0,x.jsx)(HP,{}),t.filePanel&&!1!==e.filePanel&&(0,x.jsx)(GB,{}),t.tableHandles&&!1!==e.tableHandles&&(0,x.jsx)(vT,{}),t.comments&&!1!==e.comments&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(VM,{}),(0,x.jsx)(zB,{})]})]})}var yT=function(){var e=(0,o.useMemo)((function(){var e;return null==(e=window.matchMedia)?void 0:e.call(window,"(prefers-color-scheme: dark)")}),[]),t=(0,o.useMemo)((function(){var e;return null==(e=window.matchMedia)?void 0:e.call(window,"(prefers-color-scheme: light)")}),[]),n=null==e?void 0:e.matches,r=null==t?void 0:t.matches,i=wM((0,o.useState)(n?"dark":r?"light":"no-preference"),2),a=i[0],s=i[1];return(0,o.useEffect)((function(){s(n?"dark":r?"light":"no-preference")}),[n,r]),(0,o.useEffect)((function(){if("function"==typeof(null==e?void 0:e.addEventListener)){var n=function(e){return e.matches&&s("dark")},r=function(e){return e.matches&&s("light")};return null==e||e.addEventListener("change",n),null==t||t.addEventListener("change",r),function(){null==e||e.removeEventListener("change",n),null==t||t.removeEventListener("change",r)}}var o=function(){return s(e.matches?"dark":t.matches?"light":"no-preference")};return null==e||e.addEventListener("change",o),null==t||t.addEventListener("change",o),function(){null==e||e.removeEventListener("change",o),null==t||t.removeEventListener("change",o)}}),[e,t]),window.matchMedia,a},bT=(0,o.createContext)(void 0),DT=function(e){var t=e.contentComponent,n=(0,o.useSyncExternalStore)(t.subscribe,t.getSnapshot,t.getServerSnapshot);return(0,x.jsx)(x.Fragment,{children:Object.values(n)})},wT=(0,o.forwardRef)((function(e,t){var n=wM((0,o.useState)(),2),r=n[0],i=n[1];return(0,o.useImperativeHandle)(t,(function(){return function(e,t){(0,TA.flushSync)((function(){i({node:e,container:t})})),i(void 0)}}),[]),(0,x.jsx)(x.Fragment,{children:r&&(0,TA.createPortal)(r.node,r.container)})})),CT=function(){};function kT(e,t){var n=e.editor,r=e.className,i=e.theme,a=e.children,s=e.editable,u=e.onSelectionChange,l=e.onChange,c=e.formattingToolbar,d=e.linkToolbar,f=e.slashMenu,p=e.emojiPicker,h=e.sideMenu,m=e.filePanel,v=e.tableHandles,g=e.comments,y=e.autoFocus,b=e.renderEditor,D=void 0===b?!n.headless:b,w=gM(e,dM),C=wM((0,o.useState)(),2),k=C[0],E=C[1],S=SM(),A=yT(),F=(null==S?void 0:S.colorSchemePreference)||A,O=i||("dark"===F?"dark":"light");jM(l||CT,n),FM(u||CT,n),(0,o.useEffect)((function(){n.isEditable=!1!==s}),[s,n]);var M=(0,o.useCallback)((function(e){n.elementRenderer=e}),[n]),B=(0,o.useMemo)((function(){return bM(bM({},S),{},{editor:n,setContentEditableProps:E})}),[S,n]),P={formattingToolbar:c,linkToolbar:d,slashMenu:f,emojiPicker:p,sideMenu:h,filePanel:m,tableHandles:v,comments:g},T={autoFocus:y,contentEditableProps:k};return(0,x.jsx)(xM.Provider,{value:B,children:(0,x.jsxs)(bT.Provider,{value:{editorProps:T,defaultUIProps:P},children:[(0,x.jsx)(wT,{ref:M}),(0,x.jsx)(ET,bM(bM({className:r,renderEditor:D,editorColorScheme:O,ref:t},w),{},{children:a}))]})})}var ET=o.forwardRef((function(e,t){var n=e.className,r=e.renderEditor,o=e.editorColorScheme,i=e.children,a=gM(e,fM);return(0,x.jsx)("div",bM(bM({className:Pw("bn-container",o,n),"data-color-scheme":o},a),{},{ref:t,children:r?(0,x.jsx)(ST,{children:i}):i}))})),xT=o.forwardRef(kT),ST=function(e){var t=(0,o.useContext)(bT),n=AM(),r=(0,o.useMemo)((function(){return function(){var e=new Set,t={};return{subscribe:function(t){return e.add(t),function(){e.delete(t)}},getSnapshot:function(){return t},getServerSnapshot:function(){return t},setRenderer:function(n,r){t=bM(bM({},t),{},DM({},n,(0,TA.createPortal)(r.reactElement,r.element,n))),e.forEach((function(e){return e()}))},removeRenderer:function(n){var r=bM({},t);delete r[n],t=r,e.forEach((function(e){return e()}))}}}()}),[]),i=(0,o.useCallback)((function(e){n.mount(e,r)}),[n,r]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(DT,{contentComponent:r}),(0,x.jsx)(AT,bM(bM(bM({},t.editorProps),e),{},{mount:i})),(0,x.jsx)(gT,bM({},t.defaultUIProps)),e.children]})},AT=function(e){var t=e.autoFocus,n=e.mount,r=e.contentEditableProps;return(0,x.jsx)("div",bM({"aria-autocomplete":"list","aria-haspopup":"listbox","data-bn-autofocus":t,ref:n},r))};function FT(e,t){var n,r,o=document.createElement("div");if(null!=t&&t.elementRenderer)t.elementRenderer(e((function(e){return n=e||void 0})),o);else{if(null==t||!t.headless)throw new Error("elementRenderer not available, expected headless editor");r=(0,sM.H)(o),(0,TA.flushSync)((function(){r.render(e((function(e){return n=e||void 0})))}))}if(!o.childElementCount)return console.warn("ReactInlineContentSpec: renderHTML() failed"),{dom:document.createElement("span")};null==n||n.setAttribute("data-tmp-find","true");var i=o.cloneNode(!0),a=i.firstElementChild,s=i.querySelector("[data-tmp-find]");return null==s||s.removeAttribute("data-tmp-find"),null==r||r.unmount(),{dom:a,contentDOM:s||void 0}}function OT(e){var t;return(0,x.jsx)(rM,bM(bM(bM({onDragOver:function(e){return e.preventDefault()}},Object.fromEntries(Object.entries(e.domAttributes||{}).filter((function(e){return"class"!==wM(e,1)[0]})))),{},{className:Pw("bn-block-content",(null==(t=e.domAttributes)?void 0:t.class)||""),"data-content-type":e.blockType},Object.fromEntries(Object.entries(e.blockProps).filter((function(t){var n=wM(t,2),r=n[0],o=n[1],i=e.propSchema[r];return!Rw.includes(r)&&o!==i.default})).map((function(e){var t=wM(e,2),n=t[0],r=t[1];return[Lw(n),r]})))),{},{"data-file-block":!0===e.isFileBlock||void 0,children:e.children}))}function MT(e,t){var n,r=$w({name:e.type,content:"inline"===e.content?"inline*":"",group:"blockContent",selectable:null===(n=e.isSelectable)||void 0===n||n,isolating:!0,addAttributes:function(){return Hw(e.propSchema)},parseHTML:function(){return Kw(e,t.parse)},renderHTML:function(t){var n=t.HTMLAttributes,r=document.createElement("div");return Vw({dom:r,contentDOM:"inline"===e.content?r:void 0},e.type,{},e.propSchema,e.isFileBlock,n)},addNodeView:function(){var n=this;return function(r){var o=aM((function(r){var o,i=n.options.editor,a=zw(r.getPos,i,n.editor,e.type),s=(null==(o=n.options.domAttributes)?void 0:o.blockContent)||{},u=nM().nodeViewContentRef;if(!u)throw new Error("nodeViewContentRef is not set");var l=t.render;return(0,x.jsx)(OT,{blockType:a.type,blockProps:a.props,propSchema:e.propSchema,isFileBlock:e.isFileBlock,domAttributes:s,children:(0,x.jsx)(l,{block:a,editor:i,contentRef:function(e){u(e),e&&(e.className=Pw("bn-inline-content",e.className))}})})}),{className:"bn-react-node-view-renderer"})(r);return!1===e.isSelectable&&qw(o,n.editor),o}}});return Uw(e,{node:r,toInternalHTML:function(n,o){var i,a=(null==(i=r.options.domAttributes)?void 0:i.blockContent)||{},s=t.render;return FT((function(t){return(0,x.jsx)(OT,{blockType:n.type,blockProps:n.props,propSchema:e.propSchema,domAttributes:a,children:(0,x.jsx)(s,{block:n,editor:o,contentRef:function(e){t(e),e&&(e.className=Pw("bn-inline-content",e.className))}})})}),o)},toExternalHTML:function(n,o){var i,a=(null==(i=r.options.domAttributes)?void 0:i.blockContent)||{},s=t.toExternalHTML||t.render;return FT((function(t){return(0,x.jsx)(OT,{blockType:n.type,blockProps:n.props,propSchema:e.propSchema,domAttributes:a,children:(0,x.jsx)(s,{block:n,editor:o,contentRef:function(e){t(e),e&&(e.className=Pw("bn-inline-content",e.className))}})})}),o)}})}function BT(e){var t=AM(),n=wM((0,o.useState)("loading"),2),r=n[0],i=n[1],a=wM((0,o.useState)(),2),s=a[0],u=a[1];if((0,o.useEffect)((function(){var n=!0;return vM(hM().mark((function r(){var o;return hM().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o="",i("loading"),r.prev=2,!t.resolveFileUrl){r.next=9;break}return r.next=6,t.resolveFileUrl(e);case 6:r.t0=r.sent,r.next=10;break;case 9:r.t0=e;case 10:o=r.t0,r.next=17;break;case 13:return r.prev=13,r.t1=r.catch(2),i("error"),r.abrupt("return");case 17:n&&(i("loaded"),u(o));case 18:case"end":return r.stop()}}),r,null,[[2,13]])})))(),function(){n=!1}}),[t,e]),"loaded"!==r)return{loadingState:r};if(!s)throw new Error("Finished fetching file but did not get download URL.");return{loadingState:r,downloadUrl:s}}var PT=function(e){return(0,x.jsxs)("figure",{children:[e.children,(0,x.jsx)("figcaption",{children:e.caption})]})};function TT(e){var t=wM((0,o.useState)(!1),2),n=t[0],r=t[1];return function(e){var t=AM();(0,o.useEffect)((function(){return t.onUploadStart(e)}),[e,t])}((function(t){t===e&&r(!0)})),function(e){var t=AM();(0,o.useEffect)((function(){return t.onUploadEnd(e)}),[e,t])}((function(t){t===e&&r(!1)})),n}var NT=function(e){var t=NM(),n=(0,o.useCallback)((function(e){e.preventDefault()}),[]),r=(0,o.useCallback)((function(){e.editor.transact((function(t){return t.setMeta(e.editor.filePanel.plugins[0],{block:e.block})}))}),[e.block,e.editor]);return(0,x.jsxs)("div",{className:"bn-add-file-button",onMouseDown:n,onClick:r,children:[(0,x.jsx)("div",{className:"bn-add-file-button-icon",children:e.buttonIcon||(0,x.jsx)(nB,{size:24})}),(0,x.jsx)("div",{className:"bn-add-file-button-text",children:e.buttonText||t.file_blocks.file.add_button_text})]})},jT=function(e){return(0,x.jsxs)("div",{className:"bn-file-name-with-icon",contentEditable:!1,draggable:!1,children:[(0,x.jsx)("div",{className:"bn-file-icon",children:(0,x.jsx)(nB,{size:24})}),(0,x.jsx)("p",{className:"bn-file-name",children:e.block.props.name})]})},_T=function(e){var t=TT(e.block.id);return(0,x.jsx)("div",{className:"bn-file-block-content-wrapper",onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,style:e.style,children:t?(0,x.jsx)("div",{className:"bn-file-loading-preview",children:"Loading..."}):""===e.block.props.url?(0,x.jsx)(NT,bM({},e)):(0,x.jsxs)(x.Fragment,{children:[!1!==e.block.props.showPreview&&e.children?e.children:(0,x.jsx)(jT,bM({},e)),e.block.props.caption&&(0,x.jsx)("p",{className:"bn-file-caption",children:e.block.props.caption})]})})},RT=function(e){return(0,x.jsxs)("div",{children:[e.children,(0,x.jsx)("p",{children:e.caption})]})},LT=function(e){var t=BT(e.block.props.url);return(0,x.jsx)("audio",{className:"bn-audio",src:"loading"===t.loadingState?e.block.props.url:t.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},IT=(MT(ek,{render:function(e){return(0,x.jsx)(_T,bM(bM({},e),{},{buttonText:e.editor.dictionary.file_blocks.audio.add_button_text,buttonIcon:(0,x.jsx)(kB,{size:24}),children:(0,x.jsx)(LT,bM({},e))}))},parse:tk,toExternalHTML:function(e){if(!e.block.props.url)return(0,x.jsx)("p",{children:"Add audio"});var t=e.block.props.showPreview?(0,x.jsx)("audio",{src:e.block.props.url}):(0,x.jsx)("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?e.block.props.showPreview?(0,x.jsx)(PT,{caption:e.block.props.caption,children:t}):(0,x.jsx)(RT,{caption:e.block.props.caption,children:t}):t}}),MT(dk,{render:function(e){return(0,x.jsx)(_T,bM({},e))},parse:fk,toExternalHTML:function(e){if(!e.block.props.url)return(0,x.jsx)("p",{children:"Add file"});var t=(0,x.jsx)("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?(0,x.jsx)(RT,{caption:e.block.props.caption,children:t}):t}}),function(e){var t=wM((0,o.useState)(void 0),2),n=t[0],r=t[1],i=wM((0,o.useState)(e.block.props.previewWidth),2),a=i[0],s=i[1],u=wM((0,o.useState)(!1),2),l=u[0],c=u[1],d=(0,o.useRef)(null);(0,o.useEffect)((function(){var t=function(t){var r,o,i;i="center"===e.block.props.textAlignment?"left"===n.handleUsed?n.initialWidth+2*(n.initialClientX-t.clientX):n.initialWidth+2*(t.clientX-n.initialClientX):"left"===n.handleUsed?n.initialWidth+n.initialClientX-t.clientX:n.initialWidth+t.clientX-n.initialClientX,s(Math.min(Math.max(i,64),(null==(o=null==(r=e.editor.domElement)?void 0:r.firstElementChild)?void 0:o.clientWidth)||Number.MAX_VALUE))},o=function(){r(void 0),e.editor.updateBlock(e.block,{props:{previewWidth:a}})};return n&&(window.addEventListener("mousemove",t),window.addEventListener("mouseup",o)),function(){window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",o)}}),[e,n,a]);var f=(0,o.useCallback)((function(){e.editor.isEditable&&c(!0)}),[e.editor.isEditable]),p=(0,o.useCallback)((function(){c(!1)}),[]),h=(0,o.useCallback)((function(e){e.preventDefault(),r({handleUsed:"left",initialWidth:d.current.clientWidth,initialClientX:e.clientX})}),[]),m=(0,o.useCallback)((function(e){e.preventDefault(),r({handleUsed:"right",initialWidth:d.current.clientWidth,initialClientX:e.clientX})}),[]),v=TT(e.block.id);return(0,x.jsx)(_T,bM(bM({},e),{},{onMouseEnter:f,onMouseLeave:p,style:e.block.props.url&&!v&&e.block.props.showPreview?{width:a?"".concat(a,"px"):"fit-content"}:void 0,children:(0,x.jsxs)("div",{className:"bn-visual-media-wrapper",ref:d,children:[e.children,(l||n)&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"bn-resize-handle",style:{left:"4px"},onMouseDown:h}),(0,x.jsx)("div",{className:"bn-resize-handle",style:{right:"4px"},onMouseDown:m})]})]})}))}),HT=function(e){var t=BT(e.block.props.url);return(0,x.jsx)("img",{className:"bn-visual-media",src:"loading"===t.loadingState?e.block.props.url:t.downloadUrl,alt:e.block.props.caption||"BlockNote image",contentEditable:!1,draggable:!1})};MT(bk,{render:function(e){return(0,x.jsx)(IT,bM(bM({},e),{},{buttonText:e.editor.dictionary.file_blocks.image.add_button_text,buttonIcon:(0,x.jsx)(bB,{size:24}),children:(0,x.jsx)(HT,bM({},e))}))},parse:Dk,toExternalHTML:function(e){if(!e.block.props.url)return(0,x.jsx)("p",{children:"Add image"});var t=e.block.props.showPreview?(0,x.jsx)("img",{src:e.block.props.url,alt:e.block.props.name||e.block.props.caption||"BlockNote image",width:e.block.props.previewWidth}):(0,x.jsx)("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?e.block.props.showPreview?(0,x.jsx)(PT,{caption:e.block.props.caption,children:t}):(0,x.jsx)(RT,{caption:e.block.props.caption,children:t}):t}});var zT=function(e){var t=BT(e.block.props.url);return(0,x.jsx)("video",{className:"bn-visual-media",src:"loading"===t.loadingState?e.block.props.url:t.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})};function VT(e){return(0,x.jsx)(rM,bM(bM({as:"span",className:"bn-inline-content-section","data-inline-content-type":e.inlineContentType},Object.fromEntries(Object.entries(e.inlineContentProps).filter((function(t){var n=wM(t,2),r=n[0];return n[1]!==e.propSchema[r].default})).map((function(e){var t=wM(e,2),n=t[0],r=t[1];return[Lw(n),r]})))),{},{children:e.children}))}function $T(e,t){var n=$w({name:e.type,inline:!0,group:"inline",selectable:"styled"===e.content,atom:"none"===e.content,content:"styled"===e.content?"inline*":"",addAttributes:function(){return Hw(e.propSchema)},addKeyboardShortcuts:function(){return function(e){return{Backspace:function(t){var n=t.editor,r=n.state.selection.$from;return n.state.selection.empty&&r.node().type.name===e.type&&0===r.parentOffset}}}(e)},parseHTML:function(){return function(e){return[{tag:'[data-inline-content-type="'.concat(e.type,'"]'),contentElement:function(e){var t=e;return t.matches("[data-editable]")?t:t.querySelector("[data-editable]")||t}}]}(e)},renderHTML:function(n){var r=n.node,o=this.options.editor,i=dC(r,o.schema.inlineContentSchema,o.schema.styleSchema),a=t.render;return function(e,t,n,r){return e.dom.setAttribute("data-inline-content-type",t),Object.entries(n).filter((function(e){var t=ew(e,2),n=t[0];return t[1]!==r[n].default})).map((function(e){var t=ew(e,2),n=t[0],r=t[1];return[Lw(n),r]})).forEach((function(t){var n=ew(t,2),r=n[0],o=n[1];return e.dom.setAttribute(r,o)})),void 0!==e.contentDOM&&e.contentDOM.setAttribute("data-editable",""),e}(FT((function(e){return(0,x.jsx)(a,{inlineContent:i,updateInlineContent:function(){},contentRef:e})}),o),e.type,r.attrs,e.propSchema)},addNodeView:function(){var n=this.options.editor;return function(r){return aM((function(r){var o=nM().nodeViewContentRef;if(!o)throw new Error("nodeViewContentRef is not set");var i=t.render;return(0,x.jsx)(VT,{inlineContentProps:r.node.attrs,inlineContentType:e.type,propSchema:e.propSchema,children:(0,x.jsx)(i,{contentRef:o,inlineContent:dC(r.node,n.schema.inlineContentSchema,n.schema.styleSchema),updateInlineContent:function(e){var t=OC([e],n.pmSchema);n.transact((function(e){return e.replaceWith(r.getPos(),r.getPos()+r.node.nodeSize,t)}))}})})}),{className:"bn-ic-react-node-view-renderer",as:"span"})(r)}}});return function(e,t){return{config:e,implementation:t}}(e,{node:n})}function UT(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=n.top<r.top,i=n.bottom>r.bottom;return o&&i?"both":o?"top":i?"bottom":"none"}function GT(e){if("number"==typeof e)return!0;if("string"==typeof e){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&""!==e.trim())return!0;const t=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every((e=>t.test(e)))}return!1}function WT(e){return"0rem"===e?"0rem":`calc(${e} * var(--mantine-scale))`}function qT(e,{shouldScale:t=!1}={}){return function n(r){if(0===r||"0"===r)return`0${e}`;if("number"==typeof r){const n=`${r/16}${e}`;return t?WT(n):n}if("string"==typeof r){if(""===r)return r;if(r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map((e=>n(e))).join(",");if(r.includes(" "))return r.split(" ").map((e=>n(e))).join(" ");if(r.includes(e))return t?WT(r):r;const o=r.replace("px","");if(!Number.isNaN(Number(o))){const n=`${Number(o)/16}${e}`;return t?WT(n):n}}return r}}MT(Jk,{render:function(e){return(0,x.jsx)(IT,bM(bM({},e),{},{buttonText:e.editor.dictionary.file_blocks.video.add_button_text,buttonIcon:(0,x.jsx)(CB,{size:24}),children:(0,x.jsx)(zT,bM({},e))}))},parse:Zk,toExternalHTML:function(e){if(!e.block.props.url)return(0,x.jsx)("p",{children:"Add video"});var t=e.block.props.showPreview?(0,x.jsx)("video",{src:e.block.props.url}):(0,x.jsx)("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?e.block.props.showPreview?(0,x.jsx)(PT,{caption:e.block.props.caption,children:t}):(0,x.jsx)(RT,{caption:e.block.props.caption,children:t}):t}}),new WeakSet;const KT=qT("rem",{shouldScale:!0}),JT=qT("em");function ZT(e,t="size",n=!0){if(void 0!==e)return GT(e)?n?KT(e):e:`var(--${t}-${e})`}function XT(e){return ZT(e,"mantine-spacing")}function YT(e){return void 0===e?"var(--mantine-radius-default)":ZT(e,"mantine-radius")}function QT(e){return ZT(e,"mantine-font-size")}function eN(e){return ZT(e,"mantine-line-height",!1)}function tN(e){if(e)return ZT(e,"mantine-shadow",!1)}function nN(e){return Object.keys(e).reduce(((t,n)=>(void 0!==e[n]&&(t[n]=e[n]),t)),{})}function rN(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)?function(e){let t=e.replace("#","");if(3===t.length){const e=t.split("");t=[e[0],e[0],e[1],e[1],e[2],e[2]].join("")}if(8===t.length){const e=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:e}}const n=parseInt(t,16);return{r:n>>16&255,g:n>>8&255,b:255&n,a:1}}(e):e.startsWith("rgb")?function(e){const[t,n,r,o]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:o||1}}(e):e.startsWith("hsl")?function(e){const t=e.match(/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i);if(!t)return{r:0,g:0,b:0,a:1};const n=parseInt(t[1],10),r=parseInt(t[2],10)/100,o=parseInt(t[3],10)/100,i=t[5]?parseFloat(t[5]):void 0,a=(1-Math.abs(2*o-1))*r,s=n/60,u=a*(1-Math.abs(s%2-1)),l=o-a/2;let c,d,f;return s>=0&&s<1?(c=a,d=u,f=0):s>=1&&s<2?(c=u,d=a,f=0):s>=2&&s<3?(c=0,d=a,f=u):s>=3&&s<4?(c=0,d=u,f=a):s>=4&&s<5?(c=u,d=0,f=a):(c=a,d=0,f=u),{r:Math.round(255*(c+l)),g:Math.round(255*(d+l)),b:Math.round(255*(f+l)),a:i||1}}(e):{r:0,g:0,b:0,a:1}}function oN(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${100*t}%)`;const{r:n,g:r,b:o,a:i}=rN(e),a=1-t,s=e=>Math.round(e*a);return`rgba(${s(n)}, ${s(r)}, ${s(o)}, ${i})`}function iN(e,t){return"number"==typeof e.primaryShade?e.primaryShade:"dark"===t?e.primaryShade.dark:e.primaryShade.light}function aN(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function sN(e,t=.179){return!e.startsWith("var(")&&function(e){if(e.startsWith("oklch("))return(function(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}(e)||0)/100;const{r:t,g:n,b:r}=rN(e),o=n/255,i=r/255;return.2126*aN(t/255)+.7152*aN(o)+.0722*aN(i)}(e)>t}function uN({color:e,theme:t,colorScheme:n}){if("string"!=typeof e)throw new Error("[@mantine/core] Failed to parse color. Expected color to be a string, instead got "+typeof e);if("bright"===e)return{color:e,value:"dark"===n?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:sN("dark"===n?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if("dimmed"===e)return{color:e,value:"dark"===n?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:sN("dark"===n?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if("white"===e||"black"===e)return{color:e,value:"white"===e?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:sN("white"===e?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,o]=e.split("."),i=o?Number(o):void 0,a=r in t.colors;if(a){const e=void 0!==i?t.colors[r][i]:t.colors[r][iN(t,n||"light")];return{color:r,value:e,shade:i,isThemeColor:a,isLight:sN(e,t.luminanceThreshold),variable:o?`--mantine-color-${r}-${i}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:a,isLight:sN(e,t.luminanceThreshold),shade:i,variable:void 0}}function lN(e,t){const n=uN({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function cN(e,t){const n={from:e?.from||t.defaultGradient.from,to:e?.to||t.defaultGradient.to,deg:e?.deg??t.defaultGradient.deg??0},r=lN(n.from,t),o=lN(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${o} 100%)`}function dN(e,t){if("string"!=typeof e||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var("))return`color-mix(in srgb, ${e}, transparent ${100*(1-t)}%)`;if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:o}=rN(e);return`rgba(${n}, ${r}, ${o}, ${t})`}const fN=dN,pN="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",hN={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:{dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:({color:e,theme:t,variant:n,gradient:r,autoContrast:o})=>{const i=uN({color:e,theme:t}),a="boolean"==typeof o?o:t.autoContrast;if("filled"===n){const t=a&&i.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return i.isThemeColor?void 0===i.shade?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:t,border:`${KT(1)} solid transparent`}:{background:`var(--mantine-color-${i.color}-${i.shade})`,hover:`var(--mantine-color-${i.color}-${9===i.shade?8:i.shade+1})`,color:t,border:`${KT(1)} solid transparent`}:{background:e,hover:oN(e,.1),color:t,border:`${KT(1)} solid transparent`}}if("light"===n){if(i.isThemeColor){if(void 0===i.shade)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${KT(1)} solid transparent`};const n=t.colors[i.color][i.shade];return{background:dN(n,.1),hover:dN(n,.12),color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${KT(1)} solid transparent`}}return{background:dN(e,.1),hover:dN(e,.12),color:e,border:`${KT(1)} solid transparent`}}return"outline"===n?i.isThemeColor?void 0===i.shade?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${KT(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:dN(t.colors[i.color][i.shade],.05),color:`var(--mantine-color-${i.color}-${i.shade})`,border:`${KT(1)} solid var(--mantine-color-${i.color}-${i.shade})`}:{background:"transparent",hover:dN(e,.05),color:e,border:`${KT(1)} solid ${e}`}:"subtle"===n?i.isThemeColor?void 0===i.shade?{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${KT(1)} solid transparent`}:{background:"transparent",hover:dN(t.colors[i.color][i.shade],.12),color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${KT(1)} solid transparent`}:{background:"transparent",hover:dN(e,.12),color:e,border:`${KT(1)} solid transparent`}:"transparent"===n?i.isThemeColor?void 0===i.shade?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${KT(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${KT(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${KT(1)} solid transparent`}:"white"===n?i.isThemeColor?void 0===i.shade?{background:"var(--mantine-color-white)",hover:oN(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${KT(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:oN(t.white,.01),color:`var(--mantine-color-${i.color}-${i.shade})`,border:`${KT(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:oN(t.white,.01),color:e,border:`${KT(1)} solid transparent`}:"gradient"===n?{background:cN(r,t),hover:cN(r,t),color:"var(--mantine-color-white)",border:"none"}:"default"===n?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${KT(1)} solid var(--mantine-color-default-border)`}:{}},autoContrast:!1,luminanceThreshold:.3,fontFamily:pN,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:pN,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:KT(34),lineHeight:"1.3"},h2:{fontSize:KT(26),lineHeight:"1.35"},h3:{fontSize:KT(22),lineHeight:"1.4"},h4:{fontSize:KT(18),lineHeight:"1.45"},h5:{fontSize:KT(16),lineHeight:"1.5"},h6:{fontSize:KT(14),lineHeight:"1.5"}}},fontSizes:{xs:KT(12),sm:KT(14),md:KT(16),lg:KT(18),xl:KT(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:KT(2),sm:KT(4),md:KT(8),lg:KT(16),xl:KT(32)},spacing:{xs:KT(10),sm:KT(12),md:KT(16),lg:KT(20),xl:KT(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${KT(1)} ${KT(3)} rgba(0, 0, 0, 0.05), 0 ${KT(1)} ${KT(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${KT(1)} ${KT(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${KT(10)} ${KT(15)} ${KT(-5)}, rgba(0, 0, 0, 0.04) 0 ${KT(7)} ${KT(7)} ${KT(-5)}`,md:`0 ${KT(1)} ${KT(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${KT(20)} ${KT(25)} ${KT(-5)}, rgba(0, 0, 0, 0.04) 0 ${KT(10)} ${KT(10)} ${KT(-5)}`,lg:`0 ${KT(1)} ${KT(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${KT(28)} ${KT(23)} ${KT(-7)}, rgba(0, 0, 0, 0.04) 0 ${KT(12)} ${KT(12)} ${KT(-7)}`,xl:`0 ${KT(1)} ${KT(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${KT(36)} ${KT(28)} ${KT(-7)}, rgba(0, 0, 0, 0.04) 0 ${KT(17)} ${KT(17)} ${KT(-7)}`},other:{},components:{}};function mN(e){return e&&"object"==typeof e&&!Array.isArray(e)}function vN(e,t){const n={...e},r=t;return mN(e)&&mN(t)&&Object.keys(t).forEach((t=>{mN(r[t])?n[t]=t in e?vN(n[t],r[t]):r[t]:n[t]=r[t]})),n}const gN="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function yN(e){return!(e<0||e>9)&&parseInt(e.toString(),10)===e}function bN(e){if(!(e.primaryColor in e.colors))throw new Error("[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color");if(!("object"!=typeof e.primaryShade||yN(e.primaryShade.dark)&&yN(e.primaryShade.light)))throw new Error(gN);if("number"==typeof e.primaryShade&&!yN(e.primaryShade))throw new Error(gN)}const DN=(0,o.createContext)(null);function wN(){const e=(0,o.useContext)(DN);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function CN({theme:e,children:t,inherit:n=!0}){const r=(0,o.useContext)(DN)||hN,i=(0,o.useMemo)((()=>function(e,t){if(!t)return bN(e),e;const n=vN(e,t);return t.fontFamily&&!t.headings?.fontFamily&&(n.headings.fontFamily=t.fontFamily),bN(n),n}(n?r:hN,e)),[e,r,n]);return(0,x.jsx)(DN.Provider,{value:i,children:t})}function kN(e,t,n){const r=wN(),o=r.components[e]?.defaultProps;return{...t,..."function"==typeof o?o(r):o,...nN(n)}}CN.displayName="@mantine/core/MantineThemeProvider";const EN=(0,o.createContext)(null);function xN(){const e=(0,o.useContext)(EN);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function SN(){return xN().getStyleNonce}function AN(){return xN().env||"default"}function FN(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=FN(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const ON=function(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=FN(e))&&(r&&(r+=" "),r+=t);return r},MN={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"},BN={};function PN({theme:e,classNames:t,props:n,stylesCtx:r}){return function(e){const t={};return e.forEach((e=>{Object.entries(e).forEach((([e,n])=>{t[e]?t[e]=ON(t[e],n):t[e]=n}))})),t}((Array.isArray(t)?t:[t]).map((t=>"function"==typeof t?t(e,n,r):t||BN)))}function TN({selector:e,stylesCtx:t,theme:n,classNames:r,props:o}){return PN({theme:n,classNames:r,props:o,stylesCtx:t})[e]}function NN({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:o,classNames:i,classes:a,unstyled:s,className:u,rootSelector:l,props:c,stylesCtx:d,withStaticClasses:f,headless:p,transformedStyles:h}){return ON(function({theme:e,options:t,unstyled:n}){return ON(t?.focusable&&!n&&(e.focusClassName||MN[e.focusRing]),t?.active&&!n&&e.activeClassName)}({theme:e,options:t,unstyled:s||p}),function({themeName:e,theme:t,selector:n,props:r,stylesCtx:o}){return e.map((e=>PN({theme:t,classNames:t.components[e]?.classNames,props:r,stylesCtx:o})?.[n]))}({theme:e,themeName:n,selector:r,props:c,stylesCtx:d}),function({options:e,classes:t,selector:n,unstyled:r}){return e?.variant&&!r?t[`${n}--${e.variant}`]:void 0}({options:t,classes:a,selector:r,unstyled:s}),TN({selector:r,stylesCtx:d,theme:e,classNames:i,props:c}),TN({selector:r,stylesCtx:d,theme:e,classNames:h,props:c}),function({selector:e,stylesCtx:t,options:n,props:r,theme:o}){return PN({theme:o,classNames:n?.classNames,props:n?.props||r,stylesCtx:t})[e]}({selector:r,stylesCtx:d,options:t,props:c,theme:e}),function({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}({rootSelector:l,selector:r,className:u}),function({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}({selector:r,classes:a,unstyled:s||p}),f&&!p&&function({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return!1===r?[]:e.map((e=>`${t}-${e}-${n}`))}({themeName:n,classNamesPrefix:o,selector:r,withStaticClass:t?.withStaticClass}),t?.className)}function jN({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce(((t,o)=>"function"==typeof o?{...t,...o(e,n,r)}:{...t,...o}),{})}function _N({theme:e,themeName:t,props:n,stylesCtx:r,selector:o}){return t.map((t=>jN({theme:e,styles:e.components[t]?.styles,props:n,stylesCtx:r})[o])).reduce(((e,t)=>({...e,...t})),{})}function RN({style:e,theme:t}){return Array.isArray(e)?[...e].reduce(((e,n)=>({...e,...RN({style:n,theme:t})})),{}):"function"==typeof e?e(t):null==e?{}:e}function LN({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:o,selector:i,themeName:a,headless:s}){return function(e){return e.reduce(((e,t)=>(t&&Object.keys(t).forEach((n=>{e[n]={...e[n],...nN(t[n])}})),e)),{})}([s?{}:t?.(n,r,o),...a.map((e=>n.components?.[e]?.vars?.(n,r,o))),e?.(n,r,o)])?.[i]}function IN({theme:e,themeName:t,selector:n,options:r,props:o,stylesCtx:i,rootSelector:a,styles:s,style:u,vars:l,varsResolver:c,headless:d,withStylesTransform:f}){return{...!f&&_N({theme:e,themeName:t,props:o,stylesCtx:i,selector:n}),...!f&&jN({theme:e,styles:s,props:o,stylesCtx:i})[n],...!f&&jN({theme:e,styles:r?.styles,props:r?.props||o,stylesCtx:i})[n],...LN({theme:e,props:o,stylesCtx:i,vars:l,varsResolver:c,selector:n,themeName:t,headless:d}),...a===n?RN({style:u,theme:e}):null,...RN({style:r?.style,theme:e})}}function HN({name:e,classes:t,props:n,stylesCtx:r,className:o,style:i,rootSelector:a="root",unstyled:s,classNames:u,styles:l,vars:c,varsResolver:d}){const f=wN(),p=xN().classNamesPrefix,h=xN().withStaticClasses,m=xN().headless,v=(Array.isArray(e)?e:[e]).filter((e=>e)),{withStylesTransform:g,getTransformedStyles:y}=function({props:e,stylesCtx:t,themeName:n}){const r=wN(),o=(xN().stylesTransform?.styles)?.();return{getTransformedStyles:i=>o?[...i.map((n=>o(n,{props:e,theme:r,ctx:t}))),...n.map((n=>o(r.components[n]?.styles,{props:e,theme:r,ctx:t})))].filter(Boolean):[],withStylesTransform:!!o}}({props:n,stylesCtx:r,themeName:v});return(e,b)=>({className:NN({theme:f,options:b,themeName:v,selector:e,classNamesPrefix:p,classNames:u,classes:t,unstyled:s,className:o,rootSelector:a,props:n,stylesCtx:r,withStaticClasses:h,headless:m,transformedStyles:y([b?.styles,l])}),style:IN({theme:f,themeName:v,selector:e,options:b,props:n,stylesCtx:r,rootSelector:a,styles:l,style:i,vars:c,varsResolver:d,headless:m,withStylesTransform:g})})}function zN(e){return Object.keys(e)}function VN(e){return zN(e).reduce(((t,n)=>{return void 0!==e[n]?`${t}${r=n,r.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}:${e[n]};`:t;var r}),"").trim()}function $N({selector:e,styles:t,media:n,container:r}){const o=t?VN(t):"",i=Array.isArray(n)?n.map((t=>`@media${t.query}{${e}{${VN(t.styles)}}}`)):[],a=Array.isArray(r)?r.map((t=>`@container ${t.query}{${e}{${VN(t.styles)}}}`)):[];return`${o?`${e}{${o}}`:""}${i.join("")}${a.join("")}`.trim()}function UN(e){const t=SN();return(0,x.jsx)("style",{"data-mantine-styles":"inline",nonce:t?.(),dangerouslySetInnerHTML:{__html:$N(e)}})}function GN(e){return e.startsWith("data-")?e:`data-${e}`}function WN(e){return e?"string"==typeof e?{[GN(e)]:!0}:Array.isArray(e)?[...e].reduce(((e,t)=>({...e,...WN(t)})),{}):(t=e,Object.keys(t).reduce(((e,n)=>{const r=t[n];return void 0===r||""===r||!1===r||null===r||(e[GN(n)]=t[n]),e}),{})):null;var t}function qN(e,t){return Array.isArray(e)?[...e].reduce(((e,n)=>({...e,...qN(n,t)})),{}):"function"==typeof e?e(t):null==e?{}:e}function KN({theme:e,style:t,vars:n,styleProps:r}){return{...qN(t,e),...qN(n,e),...r}}function JN(e){const{m:t,mx:n,my:r,mt:o,mb:i,ml:a,mr:s,me:u,ms:l,p:c,px:d,py:f,pt:p,pb:h,pl:m,pr:v,pe:g,ps:y,bd:b,bg:D,c:w,opacity:C,ff:k,fz:E,fw:x,lts:S,ta:A,lh:F,fs:O,tt:M,td:B,w:P,miw:T,maw:N,h:j,mih:_,mah:R,bgsz:L,bgp:I,bgr:H,bga:z,pos:V,top:$,left:U,bottom:G,right:W,inset:q,display:K,flex:J,hiddenFrom:Z,visibleFrom:X,lightHidden:Y,darkHidden:Q,sx:ee,...te}=e;return{styleProps:nN({m:t,mx:n,my:r,mt:o,mb:i,ml:a,mr:s,me:u,ms:l,p:c,px:d,py:f,pt:p,pb:h,pl:m,pr:v,pe:g,ps:y,bd:b,bg:D,c:w,opacity:C,ff:k,fz:E,fw:x,lts:S,ta:A,lh:F,fs:O,tt:M,td:B,w:P,miw:T,maw:N,h:j,mih:_,mah:R,bgsz:L,bgp:I,bgr:H,bga:z,pos:V,top:$,left:U,bottom:G,right:W,inset:q,display:K,flex:J,hiddenFrom:Z,visibleFrom:X,lightHidden:Y,darkHidden:Q,sx:ee}),rest:te}}const ZN={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function XN(e,t){const n=uN({color:e,theme:t});return"dimmed"===n.color?"var(--mantine-color-dimmed)":"bright"===n.color?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}const YN={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"},QN=["h1","h2","h3","h4","h5","h6"],ej=["h1","h2","h3","h4","h5","h6"],tj={color:XN,textColor:function(e,t){const n=uN({color:e,theme:t});return n.isThemeColor&&void 0===n.shade?`var(--mantine-color-${n.color}-text)`:XN(e,t)},fontSize:function(e,t){return"string"==typeof e&&e in t.fontSizes?`var(--mantine-font-size-${e})`:"string"==typeof e&&QN.includes(e)?`var(--mantine-${e}-font-size)`:"number"==typeof e||"string"==typeof e?KT(e):e},spacing:function(e,t){if("number"==typeof e)return KT(e);if("string"==typeof e){const n=e.replace("-","");if(!(n in t.spacing))return KT(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e},identity:function(e){return e},size:function(e){return"number"==typeof e?KT(e):e},lineHeight:function(e,t){return"string"==typeof e&&e in t.lineHeights?`var(--mantine-line-height-${e})`:"string"==typeof e&&ej.includes(e)?`var(--mantine-${e}-line-height)`:e},fontFamily:function(e){return"string"==typeof e&&e in YN?YN[e]:e},border:function(e,t){if("number"==typeof e)return KT(e);if("string"==typeof e){const[n,r,...o]=e.split(" ").filter((e=>""!==e.trim()));let i=`${KT(n)}`;return r&&(i+=` ${r}`),o.length>0&&(i+=` ${XN(o.join(" "),t)}`),i.trim()}return e}};function nj(e){return e.replace("(min-width: ","").replace("em)","")}function rj(e,t){return"object"==typeof e&&null!==e&&t in e?e[t]:e}function oj({styleProps:e,data:t,theme:n}){return function({media:e,...t}){const n=Object.keys(e).sort(((e,t)=>Number(nj(e))-Number(nj(t)))).map((t=>({query:t,styles:e[t]})));return{...t,media:n}}(zN(e).reduce(((r,o)=>{if("hiddenFrom"===o||"visibleFrom"===o||"sx"===o)return r;const i=t[o],a=Array.isArray(i.property)?i.property:[i.property],s="object"==typeof(u=e[o])&&null!==u?"base"in u?u.base:void 0:u;var u;if(!function(e){if("object"!=typeof e||null===e)return!1;const t=Object.keys(e);return 1!==t.length||"base"!==t[0]}(e[o]))return a.forEach((e=>{r.inlineStyles[e]=tj[i.type](s,n)})),r;r.hasResponsiveStyles=!0;const l=function(e){return"object"==typeof e&&null!==e?zN(e).filter((e=>"base"!==e)):[]}(e[o]);return a.forEach((t=>{s&&(r.styles[t]=tj[i.type](s,n)),l.forEach((a=>{const s=`(min-width: ${n.breakpoints[a]})`;r.media[s]={...r.media[s],[t]:tj[i.type](rj(e[o],a),n)}}))})),r}),{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function ij(){return`__m__-${(0,o.useId)().replace(/:/g,"")}`}const aj=(0,o.forwardRef)((({component:e,style:t,__vars:n,className:r,variant:o,mod:i,size:a,hiddenFrom:s,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:d,__size:f,...p},h)=>{const m=wN(),v=e||"div",{styleProps:g,rest:y}=JN(p),b=xN().stylesTransform?.sx,D=b?.()?.(g.sx),w=ij(),C=oj({styleProps:g,theme:m,data:ZN}),k={ref:h,style:KN({theme:m,style:t,vars:n,styleProps:C.inlineStyles}),className:ON(r,D,{[w]:C.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${s}`]:s,[`mantine-visible-from-${u}`]:u}),"data-variant":o,"data-size":GT(a)?void 0:a||void 0,size:f,...WN(i),...y};return(0,x.jsxs)(x.Fragment,{children:[C.hasResponsiveStyles&&(0,x.jsx)(UN,{selector:`.${w}`,styles:C.styles,media:C.media}),"function"==typeof d?d(k):(0,x.jsx)(v,{...k})]})}));aj.displayName="@mantine/core/Box";const sj=aj;function uj(e){return e}function lj(e){const t=(0,o.forwardRef)(e);return t.extend=uj,t.withProps=e=>{const n=(0,o.forwardRef)(((n,r)=>(0,x.jsx)(t,{...e,...n,ref:r})));return n.extend=t.extend,n.displayName=`WithProps(${t.displayName})`,n},t}var cj={root:"m_6d731127"};const dj={gap:"md",align:"stretch",justify:"flex-start"},fj=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":XT(t),"--stack-align":n,"--stack-justify":r}}),pj=lj(((e,t)=>{const n=kN("Stack",dj,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,align:l,justify:c,gap:d,variant:f,...p}=n,h=HN({name:"Stack",props:n,classes:cj,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:u,varsResolver:fj});return(0,x.jsx)(sj,{ref:t,...h("root"),variant:f,...p})}));function hj(e){const t=(0,o.forwardRef)(e);return t.withProps=e=>{const n=(0,o.forwardRef)(((n,r)=>(0,x.jsx)(t,{...e,...n,ref:r})));return n.extend=t.extend,n.displayName=`WithProps(${t.displayName})`,n},t.extend=uj,t}pj.classes=cj,pj.displayName="@mantine/core/Stack";var mj={root:"m_b6d8b162"};function vj(e){return"start"===e?"start":"end"===e||e?"end":void 0}const gj={inherit:!1},yj=(e,{variant:t,lineClamp:n,gradient:r,size:o,color:i})=>({root:{"--text-fz":QT(o),"--text-lh":eN(o),"--text-gradient":"gradient"===t?cN(r,e):void 0,"--text-line-clamp":"number"==typeof n?n.toString():void 0,"--text-color":i?lN(i,e):void 0}}),bj=hj(((e,t)=>{const n=kN("Text",gj,e),{lineClamp:r,truncate:o,inline:i,inherit:a,gradient:s,span:u,__staticSelector:l,vars:c,className:d,style:f,classNames:p,styles:h,unstyled:m,variant:v,mod:g,size:y,...b}=n,D=HN({name:["Text",l],props:n,classes:mj,className:d,style:f,classNames:p,styles:h,unstyled:m,vars:c,varsResolver:yj});return(0,x.jsx)(sj,{...D("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:v,mod:[{"data-truncate":vj(o),"data-line-clamp":"number"==typeof r,"data-inline":i,"data-inherit":a},g],size:y,...b})}));bj.classes=mj,bj.displayName="@mantine/core/Text";var Dj={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const wj=(0,o.forwardRef)((({className:e,...t},n)=>(0,x.jsxs)(sj,{component:"span",className:ON(Dj.barsLoader,e),...t,ref:n,children:[(0,x.jsx)("span",{className:Dj.bar}),(0,x.jsx)("span",{className:Dj.bar}),(0,x.jsx)("span",{className:Dj.bar})]})));wj.displayName="@mantine/core/Bars";const Cj=(0,o.forwardRef)((({className:e,...t},n)=>(0,x.jsxs)(sj,{component:"span",className:ON(Dj.dotsLoader,e),...t,ref:n,children:[(0,x.jsx)("span",{className:Dj.dot}),(0,x.jsx)("span",{className:Dj.dot}),(0,x.jsx)("span",{className:Dj.dot})]})));Cj.displayName="@mantine/core/Dots";const kj=(0,o.forwardRef)((({className:e,...t},n)=>(0,x.jsx)(sj,{component:"span",className:ON(Dj.ovalLoader,e),...t,ref:n})));kj.displayName="@mantine/core/Oval";const Ej={bars:wj,oval:kj,dots:Cj},xj={loaders:Ej,type:"oval"},Sj=(e,{size:t,color:n})=>({root:{"--loader-size":ZT(t,"loader-size"),"--loader-color":n?lN(n,e):void 0}}),Aj=lj(((e,t)=>{const n=kN("Loader",xj,e),{size:r,color:o,type:i,vars:a,className:s,style:u,classNames:l,styles:c,unstyled:d,loaders:f,variant:p,children:h,...m}=n,v=HN({name:"Loader",props:n,classes:Dj,className:s,style:u,classNames:l,styles:c,unstyled:d,vars:a,varsResolver:Sj});return h?(0,x.jsx)(sj,{...v("root"),ref:t,...m,children:h}):(0,x.jsx)(sj,{...v("root"),ref:t,component:f[i],variant:p,size:r,...m})}));Aj.defaultLoaders=Ej,Aj.classes=Dj,Aj.displayName="@mantine/core/Loader";const Fj=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${"bottom"===e?10:-10}px)`},transitionProperty:"transform, opacity"}),Oj={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...Fj("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...Fj("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...Fj("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...Fj("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...Fj("top"),common:{transformOrigin:"top right"}}},Mj={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function Bj({transition:e,state:t,duration:n,timingFunction:r}){const o={WebkitBackfaceVisibility:"hidden",willChange:"transform, opacity",transitionDuration:`${n}ms`,transitionTimingFunction:r};return"string"==typeof e?e in Oj?{transitionProperty:Oj[e].transitionProperty,...o,...Oj[e].common,...Oj[e][Mj[t]]}:{}:{transitionProperty:e.transitionProperty,...o,...e.common,...e[Mj[t]]}}function Pj(e,t){const n=(0,o.useRef)(!1);(0,o.useEffect)((()=>()=>{n.current=!1}),[]),(0,o.useEffect)((()=>{if(n.current)return e();n.current=!0}),t)}function Tj({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:a,onEntered:s,onExited:u,enterDelay:l,exitDelay:c}){const d=wN(),f=function(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=(0,o.useState)(n?t:function(e){return"undefined"!=typeof window&&"matchMedia"in window&&window.matchMedia(e).matches}(e)),a=(0,o.useRef)(null);return(0,o.useEffect)((()=>{if("matchMedia"in window)return a.current=window.matchMedia(e),i(a.current.matches),function(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch(n){return e.addListener(t),()=>e.removeListener(t)}}(a.current,(e=>i(e.matches)))}),[e]),r}("(prefers-reduced-motion: reduce)",void 0,void 0),p=!!d.respectReducedMotion&&f,[h,m]=(0,o.useState)(p?0:e),[v,g]=(0,o.useState)(r?"entered":"exited"),y=(0,o.useRef)(-1),b=(0,o.useRef)(-1),D=(0,o.useRef)(-1),w=n=>{const r=n?i:a,o=n?s:u;window.clearTimeout(y.current);const l=p?0:n?e:t;m(l),0===l?("function"==typeof r&&r(),"function"==typeof o&&o(),g(n?"entered":"exited")):D.current=requestAnimationFrame((()=>{TA.flushSync((()=>{g(n?"pre-entering":"pre-exiting")})),D.current=requestAnimationFrame((()=>{"function"==typeof r&&r(),g(n?"entering":"exiting"),y.current=window.setTimeout((()=>{"function"==typeof o&&o(),g(n?"entered":"exited")}),l)}))}))};return Pj((()=>{var e;e=r,window.clearTimeout(b.current),"number"==typeof(e?l:c)?b.current=window.setTimeout((()=>{w(e)}),e?l:c):w(e)}),[r]),(0,o.useEffect)((()=>()=>{window.clearTimeout(y.current),cancelAnimationFrame(D.current)}),[]),{transitionDuration:h,transitionStatus:v,transitionTimingFunction:n||"ease"}}function Nj({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:o,children:i,timingFunction:a="ease",onExit:s,onEntered:u,onEnter:l,onExited:c,enterDelay:d,exitDelay:f}){const p=AN(),{transitionDuration:h,transitionStatus:m,transitionTimingFunction:v}=Tj({mounted:o,exitDuration:r,duration:n,timingFunction:a,onExit:s,onEntered:u,onEnter:l,onExited:c,enterDelay:d,exitDelay:f});return 0===h||"test"===p?o?(0,x.jsx)(x.Fragment,{children:i({})}):e?i({display:"none"}):null:"exited"===m?e?i({display:"none"}):null:(0,x.jsx)(x.Fragment,{children:i(Bj({transition:t,duration:h,state:m,timingFunction:v}))})}Nj.displayName="@mantine/core/Transition";var jj={root:"m_87cf2631"};const _j={__staticSelector:"UnstyledButton"},Rj=hj(((e,t)=>{const n=kN("UnstyledButton",_j,e),{className:r,component:o="button",__staticSelector:i,unstyled:a,classNames:s,styles:u,style:l,...c}=n,d=HN({name:i,props:n,classes:jj,className:r,style:l,classNames:s,styles:u,unstyled:a});return(0,x.jsx)(sj,{...d("root",{focusable:!0}),component:o,ref:t,type:"button"===o?"button":void 0,...c})}));Rj.classes=jj,Rj.displayName="@mantine/core/UnstyledButton";var Lj={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const Ij={orientation:"horizontal"},Hj=(e,{borderWidth:t})=>({group:{"--button-border-width":KT(t)}}),zj=lj(((e,t)=>{const n=kN("ButtonGroup",Ij,e),{className:r,style:o,classNames:i,styles:a,unstyled:s,orientation:u,vars:l,borderWidth:c,variant:d,mod:f,...p}=kN("ButtonGroup",Ij,e),h=HN({name:"ButtonGroup",props:n,classes:Lj,className:r,style:o,classNames:i,styles:a,unstyled:s,vars:l,varsResolver:Hj,rootSelector:"group"});return(0,x.jsx)(sj,{...h("group"),ref:t,variant:d,mod:[{"data-orientation":u},f],role:"group",...p})}));zj.classes=Lj,zj.displayName="@mantine/core/ButtonGroup";const Vj={},$j=(e,{radius:t,color:n,gradient:r,variant:o,autoContrast:i,size:a})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:o||"filled",autoContrast:i});return{groupSection:{"--section-height":ZT(a,"section-height"),"--section-padding-x":ZT(a,"section-padding-x"),"--section-fz":a?.includes("compact")?QT(a.replace("compact-","")):QT(a),"--section-radius":void 0===t?void 0:YT(t),"--section-bg":n||o?s.background:void 0,"--section-color":s.color,"--section-bd":n||o?s.border:void 0}}},Uj=lj(((e,t)=>{const n=kN("ButtonGroupSection",Vj,e),{className:r,style:o,classNames:i,styles:a,unstyled:s,vars:u,variant:l,gradient:c,radius:d,autoContrast:f,...p}=kN("ButtonGroupSection",Vj,e),h=HN({name:"ButtonGroupSection",props:n,classes:Lj,className:r,style:o,classNames:i,styles:a,unstyled:s,vars:u,varsResolver:$j,rootSelector:"groupSection"});return(0,x.jsx)(sj,{...h("groupSection"),ref:t,variant:l,...p})}));Uj.classes=Lj,Uj.displayName="@mantine/core/ButtonGroupSection";const Gj={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${KT(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},Wj={},qj=(e,{radius:t,color:n,gradient:r,variant:o,size:i,justify:a,autoContrast:s})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:o||"filled",autoContrast:s});return{root:{"--button-justify":a,"--button-height":ZT(i,"button-height"),"--button-padding-x":ZT(i,"button-padding-x"),"--button-fz":i?.includes("compact")?QT(i.replace("compact-","")):QT(i),"--button-radius":void 0===t?void 0:YT(t),"--button-bg":n||o?u.background:void 0,"--button-hover":n||o?u.hover:void 0,"--button-color":u.color,"--button-bd":n||o?u.border:void 0,"--button-hover-color":n||o?u.hoverColor:void 0}}},Kj=hj(((e,t)=>{const n=kN("Button",Wj,e),{style:r,vars:o,className:i,color:a,disabled:s,children:u,leftSection:l,rightSection:c,fullWidth:d,variant:f,radius:p,loading:h,loaderProps:m,gradient:v,classNames:g,styles:y,unstyled:b,"data-disabled":D,autoContrast:w,mod:C,...k}=n,E=HN({name:"Button",props:n,classes:Lj,className:i,style:r,classNames:g,styles:y,unstyled:b,vars:o,varsResolver:qj}),S=!!l,A=!!c;return(0,x.jsxs)(Rj,{ref:t,...E("root",{active:!s&&!h&&!D}),unstyled:b,variant:f,disabled:s||h,mod:[{disabled:s||D,loading:h,block:d,"with-left-section":S,"with-right-section":A},C],...k,children:[(0,x.jsx)(Nj,{mounted:!!h,transition:Gj,duration:150,children:e=>(0,x.jsx)(sj,{component:"span",...E("loader",{style:e}),"aria-hidden":!0,children:(0,x.jsx)(Aj,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),(0,x.jsxs)("span",{...E("inner"),children:[l&&(0,x.jsx)(sj,{component:"span",...E("section"),mod:{position:"left"},children:l}),(0,x.jsx)(sj,{component:"span",mod:{loading:h},...E("label"),children:u}),c&&(0,x.jsx)(sj,{component:"span",...E("section"),mod:{position:"right"},children:c})]})]})}));Kj.classes=Lj,Kj.displayName="@mantine/core/Button",Kj.Group=zj,Kj.GroupSection=Uj;var Jj={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const Zj={orientation:"horizontal"},Xj=(e,{borderWidth:t})=>({group:{"--ai-border-width":KT(t)}}),Yj=lj(((e,t)=>{const n=kN("ActionIconGroup",Zj,e),{className:r,style:o,classNames:i,styles:a,unstyled:s,orientation:u,vars:l,borderWidth:c,variant:d,mod:f,...p}=kN("ActionIconGroup",Zj,e),h=HN({name:"ActionIconGroup",props:n,classes:Jj,className:r,style:o,classNames:i,styles:a,unstyled:s,vars:l,varsResolver:Xj,rootSelector:"group"});return(0,x.jsx)(sj,{...h("group"),ref:t,variant:d,mod:[{"data-orientation":u},f],role:"group",...p})}));Yj.classes=Jj,Yj.displayName="@mantine/core/ActionIconGroup";const Qj={},e_=(e,{radius:t,color:n,gradient:r,variant:o,autoContrast:i,size:a})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:o||"filled",autoContrast:i});return{groupSection:{"--section-height":ZT(a,"section-height"),"--section-padding-x":ZT(a,"section-padding-x"),"--section-fz":QT(a),"--section-radius":void 0===t?void 0:YT(t),"--section-bg":n||o?s.background:void 0,"--section-color":s.color,"--section-bd":n||o?s.border:void 0}}},t_=lj(((e,t)=>{const n=kN("ActionIconGroupSection",Qj,e),{className:r,style:o,classNames:i,styles:a,unstyled:s,vars:u,variant:l,gradient:c,radius:d,autoContrast:f,...p}=kN("ActionIconGroupSection",Qj,e),h=HN({name:"ActionIconGroupSection",props:n,classes:Jj,className:r,style:o,classNames:i,styles:a,unstyled:s,vars:u,varsResolver:e_,rootSelector:"groupSection"});return(0,x.jsx)(sj,{...h("groupSection"),ref:t,variant:l,...p})}));t_.classes=Jj,t_.displayName="@mantine/core/ActionIconGroupSection";const n_={},r_=(e,{size:t,radius:n,variant:r,gradient:o,color:i,autoContrast:a})=>{const s=e.variantColorResolver({color:i||e.primaryColor,theme:e,gradient:o,variant:r||"filled",autoContrast:a});return{root:{"--ai-size":ZT(t,"ai-size"),"--ai-radius":void 0===n?void 0:YT(n),"--ai-bg":i||r?s.background:void 0,"--ai-hover":i||r?s.hover:void 0,"--ai-hover-color":i||r?s.hoverColor:void 0,"--ai-color":s.color,"--ai-bd":i||r?s.border:void 0}}},o_=hj(((e,t)=>{const n=kN("ActionIcon",n_,e),{className:r,unstyled:o,variant:i,classNames:a,styles:s,style:u,loading:l,loaderProps:c,size:d,color:f,radius:p,__staticSelector:h,gradient:m,vars:v,children:g,disabled:y,"data-disabled":b,autoContrast:D,mod:w,...C}=n,k=HN({name:["ActionIcon",h],props:n,className:r,style:u,classes:Jj,classNames:a,styles:s,unstyled:o,vars:v,varsResolver:r_});return(0,x.jsxs)(Rj,{...k("root",{active:!y&&!l&&!b}),...C,unstyled:o,variant:i,size:d,disabled:y||l,ref:t,mod:[{loading:l,disabled:y||b},w],children:[(0,x.jsx)(Nj,{mounted:!!l,transition:"slide-down",duration:150,children:e=>(0,x.jsx)(sj,{component:"span",...k("loader",{style:e}),"aria-hidden":!0,children:(0,x.jsx)(Aj,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),(0,x.jsx)(sj,{component:"span",mod:{loading:l},...k("icon"),children:g})]})}));function i_(e,t){if("function"==typeof e)return e(t);"object"==typeof e&&null!==e&&"current"in e&&(e.current=t)}function a_(...e){const t=new Map;return n=>{if(e.forEach((e=>{const r=i_(e,n);r&&t.set(e,r)})),t.size>0)return()=>{e.forEach((e=>{const n=t.get(e);n?n():i_(e,null)})),t.clear()}}}function s_(...e){return(0,o.useCallback)(a_(...e),e)}function u_(e){return!Array.isArray(e)&&null!==e&&"object"==typeof e&&e.type!==o.Fragment}o_.classes=Jj,o_.displayName="@mantine/core/ActionIcon",o_.Group=Yj,o_.GroupSection=t_;const l_={app:100,modal:200,popover:300,overlay:400,max:9999};function c_(e){return l_[e]}function d_(e){const t=o.version;return"string"!=typeof o.version||t.startsWith("18.")?e?.ref:e?.props?.ref}const f_=(0,o.createContext)({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function p_(){return(0,o.useContext)(f_)}function h_(e,t){if("rtl"===e&&(t.includes("right")||t.includes("left"))){const[e,n]=t.split("-"),r="right"===e?"left":"right";return void 0===n?r:`${r}-${n}`}return t}function m_(e,t,n,r){return"center"===e||"center"===r?{top:t}:"end"===e?{bottom:n}:"start"===e?{top:n}:{}}function v_(e,t,n,r,o){return"center"===e||"center"===r?{left:t}:"end"===e?{["ltr"===o?"right":"left"]:n}:"start"===e?{["ltr"===o?"left":"right"]:n}:{}}const g_={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function y_({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:o,arrowX:i,arrowY:a,dir:s}){const[u,l="center"]=e.split("-"),c={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[g_[u]]:r},d=-t/2;return"left"===u?{...c,...m_(l,a,n,o),right:d,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:"right"===u?{...c,...m_(l,a,n,o),left:d,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:"top"===u?{...c,...v_(l,i,n,o,s),bottom:d,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:"bottom"===u?{...c,...v_(l,i,n,o,s),top:d,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const b_=(0,o.forwardRef)((({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:o,visible:i,arrowX:a,arrowY:s,style:u,...l},c)=>{const{dir:d}=p_();return i?(0,x.jsx)("div",{...l,ref:c,style:{...u,...y_({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:o,dir:d,arrowX:a,arrowY:s})}}):null}));b_.displayName="@mantine/core/FloatingArrow";const D_="undefined"!=typeof document?o.useLayoutEffect:o.useEffect;function w_(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),"string"==typeof e.className&&t.classList.add(...e.className.split(" ").filter(Boolean)),"object"==typeof e.style&&Object.assign(t.style,e.style),"string"==typeof e.id&&t.setAttribute("id",e.id),t}const C_={},k_=lj(((e,t)=>{const{children:n,target:r,reuseTargetNode:i,...a}=kN("Portal",C_,e),[s,u]=(0,o.useState)(!1),l=(0,o.useRef)(null);return D_((()=>(u(!0),l.current=function({target:e,reuseTargetNode:t,...n}){if(e)return"string"==typeof e?document.querySelector(e)||w_(n):e;if(t){const e=document.querySelector("[data-mantine-shared-portal-node]");if(e)return e;const t=w_(n);return t.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(t),t}return w_(n)}({target:r,reuseTargetNode:i,...a}),i_(t,l.current),r||i||!l.current||document.body.appendChild(l.current),()=>{r||i||!l.current||document.body.removeChild(l.current)})),[r]),s&&l.current?(0,TA.createPortal)((0,x.jsx)(x.Fragment,{children:n}),l.current):null}));k_.displayName="@mantine/core/Portal";const E_=lj((({withinPortal:e=!0,children:t,...n},r)=>"test"!==AN()&&e?(0,x.jsx)(k_,{ref:r,...n,children:t}):(0,x.jsx)(x.Fragment,{children:t})));E_.displayName="@mantine/core/OptionalPortal";const x_={duration:100,transition:"fade"};function S_(e,t){return Array.isArray(e)?[...e].reduce(((e,n)=>({...e,...S_(n,t)})),{}):"function"==typeof e?e(t):null==e?{}:e}var A_={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const F_={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:c_("popover")},O_=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":void 0===t?void 0:YT(t),"--tooltip-bg":n?lN(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),M_=lj(((e,t)=>{const n=kN("TooltipFloating",F_,e),{children:r,refProp:i,withinPortal:a,style:s,className:u,classNames:l,styles:c,unstyled:d,radius:f,color:p,label:h,offset:m,position:v,multiline:g,zIndex:y,disabled:b,defaultOpened:D,variant:w,vars:C,portalProps:k,...E}=n,S=wN(),A=HN({name:"TooltipFloating",props:n,classes:A_,className:u,style:s,classNames:l,styles:c,unstyled:d,rootSelector:"tooltip",vars:C,varsResolver:O_}),{handleMouseMove:F,x:O,y:M,opened:B,boundaryRef:P,floating:T,setOpened:N}=function({offset:e,position:t,defaultOpened:n}){const[r,i]=(0,o.useState)(n),a=(0,o.useRef)(null),{x:s,y:u,elements:l,refs:c,update:d,placement:f}=EO({placement:t,middleware:[TF({crossAxis:!0,padding:5,rootBoundary:"document"})]}),p=f.includes("right")?e:t.includes("left")?-1*e:0,h=f.includes("bottom")?e:t.includes("top")?-1*e:0,m=(0,o.useCallback)((({clientX:e,clientY:t})=>{c.setPositionReference({getBoundingClientRect:()=>({width:0,height:0,x:e,y:t,left:e+p,top:t+h,right:e,bottom:t})})}),[l.reference]);return(0,o.useEffect)((()=>{if(c.floating.current){const e=a.current;e.addEventListener("mousemove",m);const t=iA(c.floating.current);return t.forEach((e=>{e.addEventListener("scroll",d)})),()=>{e.removeEventListener("mousemove",m),t.forEach((e=>{e.removeEventListener("scroll",d)}))}}}),[l.reference,c.floating.current,d,m,r]),{handleMouseMove:m,x:s,y:u,opened:r,setOpened:i,boundaryRef:a,floating:c.setFloating}}({offset:m,position:v,defaultOpened:D});if(!u_(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const j=s_(P,d_(r),t),_=r.props;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(E_,{...k,withinPortal:a,children:(0,x.jsx)(sj,{...E,...A("tooltip",{style:{...S_(s,S),zIndex:y,display:!b&&B?"block":"none",top:(M&&Math.round(M))??"",left:(O&&Math.round(O))??""}}),variant:w,ref:T,mod:{multiline:g},children:h})}),(0,o.cloneElement)(r,{..._,[i]:j,onMouseEnter:e=>{_.onMouseEnter?.(e),F(e),N(!0)},onMouseLeave:e=>{_.onMouseLeave?.(e),N(!1)}})]})}));M_.classes=A_,M_.displayName="@mantine/core/TooltipFloating";const B_=(0,o.createContext)(!1),P_=B_.Provider,T_={openDelay:0,closeDelay:0};function N_(e){const{openDelay:t,closeDelay:n,children:r}=kN("TooltipGroup",T_,e);return(0,x.jsx)(P_,{value:!0,children:(0,x.jsx)(iO,{delay:{open:t,close:n},children:r})})}N_.displayName="@mantine/core/TooltipGroup",N_.extend=e=>e;const j_=o["useId".toString()]||(()=>{});function __(e){const t=function(){const e=j_();return e?`mantine-${e.replace(/:/g,"")}`:""}(),[n,r]=(0,o.useState)(t);return D_((()=>{r(function(e="mantine-"){return`${e}${Math.random().toString(36).slice(2,11)}`}())}),[]),"string"==typeof e?e:"undefined"==typeof window?t:n}function R_({opened:e,floating:t,position:n,positionDependencies:r}){const[i,a]=(0,o.useState)(0);(0,o.useEffect)((()=>{if(t.refs.reference.current&&t.refs.floating.current&&e)return function(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:s="function"==typeof IntersectionObserver,animationFrame:u=!1}=r,l=rF(e),c=o||i?[...l?iA(l):[],...iA(t)]:[];c.forEach((e=>{o&&e.addEventListener("scroll",n,{passive:!0}),i&&e.addEventListener("resize",n)}));const d=l&&s?function(e,t){let n,r=null;const o=US(e);function i(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function a(s,u){void 0===s&&(s=!1),void 0===u&&(u=1),i();const l=e.getBoundingClientRect(),{left:c,top:d,width:f,height:p}=l;if(s||t(),!f||!p)return;const h={rootMargin:-RA(d)+"px "+-RA(o.clientWidth-(c+f))+"px "+-RA(o.clientHeight-(d+p))+"px "+-RA(c)+"px",threshold:jA(0,NA(1,u))||1};let m=!0;function v(t){const r=t[0].intersectionRatio;if(r!==u){if(!m)return a();r?a(!1,r):n=setTimeout((()=>{a(!1,1e-7)}),1e3)}1!==r||gF(l,e.getBoundingClientRect())||a(),m=!1}try{r=new IntersectionObserver(v,{...h,root:o.ownerDocument})}catch(e){r=new IntersectionObserver(v,h)}r.observe(e)}(!0),i}(l,n):null;let f,p=-1,h=null;a&&(h=new ResizeObserver((e=>{let[r]=e;r&&r.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var e;null==(e=h)||e.observe(t)}))),n()})),l&&!u&&h.observe(l),h.observe(t));let m=u?sF(e):null;return u&&function t(){const r=sF(e);m&&!gF(m,r)&&n(),m=r,f=requestAnimationFrame(t)}(),n(),()=>{var e;c.forEach((e=>{o&&e.removeEventListener("scroll",n),i&&e.removeEventListener("resize",n)})),null==d||d(),null==(e=h)||e.disconnect(),h=null,u&&cancelAnimationFrame(f)}}(t.refs.reference.current,t.refs.floating.current,t.update)}),[t.refs.reference.current,t.refs.floating.current,e,i,n]),Pj((()=>{t.update()}),r),Pj((()=>{a((e=>e+1))}),[e])}function L_(e){const t=function(e){if(void 0===e)return{shift:!0,flip:!0};const t={...e};return void 0===e.shift&&(t.shift=!0),void 0===e.flip&&(t.flip=!0),t}(e.middlewares),n=[PF(e.offset)];return t.shift&&n.push(TF("boolean"==typeof t.shift?{padding:8}:{padding:8,...t.shift})),t.flip&&n.push("boolean"==typeof t.flip?jF():jF(t.flip)),n.push(LF({element:e.arrowRef,padding:e.arrowOffset})),t.inline?n.push("boolean"==typeof t.inline?RF():RF(t.inline)):e.inline&&n.push(RF()),n}function I_(e){const[t,n]=(0,o.useState)(e.defaultOpened),r="boolean"==typeof e.opened?e.opened:t,i=(0,o.useContext)(B_),a=__(),s=(0,o.useCallback)((e=>{n(e),e&&y(a)}),[a]),{x:u,y:l,context:c,refs:d,update:f,placement:p,middlewareData:{arrow:{x:h,y:m}={}}}=EO({strategy:e.strategy,placement:e.position,open:r,onOpenChange:s,middleware:L_(e)}),{delay:v,currentId:g,setCurrentId:y}=function(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:a,enabled:s=!0}=t,u=null!=a?a:i,l=o.useContext(oO),{currentId:c,setCurrentId:d,initialDelay:f,setState:p,timeoutMs:h}=l;return VF((()=>{s&&c&&(p({delay:{open:1,close:tO(f,"close")}}),c!==u&&r(!1))}),[s,u,r,p,c,f]),VF((()=>{function e(){r(!1),p({delay:f,currentId:null})}if(s&&c&&!n&&c===u){if(h){const t=window.setTimeout(e,h);return()=>{clearTimeout(t)}}e()}}),[s,n,p,c,u,r,f,h]),VF((()=>{s&&d!==rO&&n&&d(u)}),[s,n,d,u]),l}(c,{id:a}),{getReferenceProps:b,getFloatingProps:D}=OO([nO(c,{enabled:e.events?.hover,delay:i?v:{open:e.openDelay,close:e.closeDelay},mouseOnly:!e.events?.touch}),xO(c,{enabled:e.events?.focus,visibleOnly:!0}),BO(c,{role:"tooltip"}),kO(c,{enabled:void 0===e.opened})]);R_({opened:r,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:d,update:f}}),Pj((()=>{e.onPositionChange?.(p)}),[p]);const w=r&&g&&g!==a;return{x:u,y:l,arrowX:h,arrowY:m,reference:d.setReference,floating:d.setFloating,getFloatingProps:D,getReferenceProps:b,isGroupPhase:w,opened:r,placement:p}}const H_={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:c_("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},z_=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":void 0===t?void 0:YT(t),"--tooltip-bg":n?lN(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),V_=lj(((e,t)=>{const n=kN("Tooltip",H_,e),{children:r,position:i,refProp:a,label:s,openDelay:u,closeDelay:l,onPositionChange:c,opened:d,defaultOpened:f,withinPortal:p,radius:h,color:m,classNames:v,styles:g,unstyled:y,style:b,className:D,withArrow:w,arrowSize:C,arrowOffset:k,arrowRadius:E,arrowPosition:S,offset:A,transitionProps:F,multiline:O,events:M,zIndex:B,disabled:P,positionDependencies:T,onClick:N,onMouseEnter:j,onMouseLeave:_,inline:R,variant:L,keepMounted:I,vars:H,portalProps:z,mod:V,floatingStrategy:$,middlewares:U,...G}=kN("Tooltip",H_,n),{dir:W}=p_(),q=(0,o.useRef)(null),K=I_({position:h_(W,i),closeDelay:l,openDelay:u,onPositionChange:c,opened:d,defaultOpened:f,events:M,arrowRef:q,arrowOffset:k,offset:"number"==typeof A?A+(w?C/2:0):A,positionDependencies:[...T,r],inline:R,strategy:$,middlewares:U}),J=HN({name:"Tooltip",props:n,classes:A_,className:D,style:b,classNames:v,styles:g,unstyled:y,rootSelector:"tooltip",vars:H,varsResolver:z_});if(!u_(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Z=s_(K.reference,d_(r),t),X=function(e){return{...x_,duration:100,transition:"fade",...e}}(F),Y=r.props;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(E_,{...z,withinPortal:p,children:(0,x.jsx)(Nj,{...X,keepMounted:I,mounted:!P&&!!K.opened,duration:K.isGroupPhase?10:X.duration,children:e=>(0,x.jsxs)(sj,{...G,"data-fixed":"fixed"===$||void 0,variant:L,mod:[{multiline:O},V],...K.getFloatingProps({ref:K.floating,className:J("tooltip").className,style:{...J("tooltip").style,...e,zIndex:B,top:K.y??0,left:K.x??0}}),children:[s,(0,x.jsx)(b_,{ref:q,arrowX:K.arrowX,arrowY:K.arrowY,visible:w,position:K.placement,arrowSize:C,arrowOffset:k,arrowRadius:E,arrowPosition:S,...J("arrow")})]})})}),(0,o.cloneElement)(r,K.getReferenceProps({onClick:N,onMouseEnter:j,onMouseLeave:_,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,className:ON(D,Y.className),...Y,[a]:Z}))]})}));function $_({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,a]=(0,o.useState)(void 0!==t?t:n);return void 0!==e?[e,r,!0]:[i,(e,...t)=>{a(e),r?.(e,...t)},!1]}function U_({size:e,style:t,...n}){const r=void 0!==e?{width:KT(e),height:KT(e),...t}:t;return(0,x.jsx)("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:(0,x.jsx)("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function G_(e=null){const t=(0,o.createContext)(e);return[({children:e,value:n})=>(0,x.jsx)(t.Provider,{value:n,children:e}),()=>(0,o.useContext)(t)]}V_.classes=A_,V_.displayName="@mantine/core/Tooltip",V_.Floating=M_,V_.Group=N_;const[W_,q_]=G_(),K_={};function J_(e){const{value:t,defaultValue:n,onChange:r,multiple:o,children:i}=kN("ChipGroup",K_,e),[a,s]=$_({value:t,defaultValue:n,finalValue:o?[]:null,onChange:r});return(0,x.jsx)(W_,{value:{isChipSelected:e=>Array.isArray(a)?a.includes(e):e===a,onChange:e=>{const t=e.currentTarget.value;Array.isArray(a)?s(a.includes(t)?a.filter((e=>e!==t)):[...a,t]):s(t)},multiple:o},children:i})}J_.displayName="@mantine/core/ChipGroup";var Z_={root:"m_f59ffda3",label:"m_be049a53","label--outline":"m_3904c1af","label--filled":"m_fa109255","label--light":"m_f7e165c3",iconWrapper:"m_9ac86df9",checkIcon:"m_d6d72580",input:"m_bde07329"};const X_={type:"checkbox"},Y_=(e,{size:t,radius:n,variant:r,color:o,autoContrast:i})=>{const a=e.variantColorResolver({color:o||e.primaryColor,theme:e,variant:r||"filled",autoContrast:i});return{root:{"--chip-fz":QT(t),"--chip-size":ZT(t,"chip-size"),"--chip-radius":void 0===n?void 0:YT(n),"--chip-checked-padding":ZT(t,"chip-checked-padding"),"--chip-padding":ZT(t,"chip-padding"),"--chip-icon-size":ZT(t,"chip-icon-size"),"--chip-bg":o||r?a.background:void 0,"--chip-hover":o||r?a.hover:void 0,"--chip-color":o||r?a.color:void 0,"--chip-bd":o||r?a.border:void 0,"--chip-spacing":ZT(t,"chip-spacing")}}},Q_=lj(((e,t)=>{const n=kN("Chip",X_,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,id:l,checked:c,defaultChecked:d,onChange:f,value:p,wrapperProps:h,type:m,disabled:v,children:g,size:y,variant:b,icon:D,rootRef:w,autoContrast:C,mod:k,...E}=n,S=HN({name:"Chip",classes:Z_,props:n,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:u,varsResolver:Y_}),A=q_(),F=__(l),{styleProps:O,rest:M}=JN(E),[B,P]=$_({value:c,defaultValue:d,finalValue:!1,onChange:f}),T=A?{checked:A.isChipSelected(p),onChange:e=>{A.onChange(e),f?.(e.currentTarget.checked)},type:A.multiple?"checkbox":"radio"}:{},N=T.checked||B;return(0,x.jsxs)(sj,{size:y,variant:b,ref:w,mod:k,...S("root"),...O,...h,children:[(0,x.jsx)("input",{type:m,...S("input"),checked:N,onChange:e=>P(e.currentTarget.checked),id:F,disabled:v,ref:t,value:p,...T,...M}),(0,x.jsxs)("label",{htmlFor:F,"data-checked":N||void 0,"data-disabled":v||void 0,...S("label",{variant:b||"filled"}),children:[N&&(0,x.jsx)("span",{...S("iconWrapper"),children:D||(0,x.jsx)(U_,{...S("checkIcon")})}),(0,x.jsx)("span",{children:g})]})]})}));Q_.classes=Z_,Q_.displayName="@mantine/core/Chip",Q_.Group=J_;var eR={root:"m_4081bf90"};const tR={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},nR=(e,{grow:t,preventGrowOverflow:n,gap:r,align:o,justify:i,wrap:a},{childWidth:s})=>({root:{"--group-child-width":t&&n?s:void 0,"--group-gap":XT(r),"--group-align":o,"--group-justify":i,"--group-wrap":a}}),rR=lj(((e,t)=>{const n=kN("Group",tR,e),{classNames:r,className:i,style:a,styles:s,unstyled:u,children:l,gap:c,align:d,justify:f,wrap:p,grow:h,preventGrowOverflow:m,vars:v,variant:g,__size:y,mod:b,...D}=n,w=function(e){return o.Children.toArray(e).filter(Boolean)}(l),C=w.length,k=XT(c??"md"),E=HN({name:"Group",props:n,stylesCtx:{childWidth:`calc(${100/C}% - (${k} - ${k} / ${C}))`},className:i,style:a,classes:eR,classNames:r,styles:s,unstyled:u,vars:v,varsResolver:nR});return(0,x.jsx)(sj,{...E("root"),ref:t,variant:g,mod:[{grow:h},b],size:y,...D,children:w})}));rR.classes=eR,rR.displayName="@mantine/core/Group";var oR={root:"m_1b7284a3"};const iR={},aR=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":void 0===t?void 0:YT(t),"--paper-shadow":tN(n)}}),sR=hj(((e,t)=>{const n=kN("Paper",iR,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,withBorder:u,vars:l,radius:c,shadow:d,variant:f,mod:p,...h}=n,m=HN({name:"Paper",props:n,classes:oR,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:l,varsResolver:aR});return(0,x.jsx)(sj,{ref:t,mod:[{"data-with-border":u},p],...m("root"),variant:f,...h})}));function uR(e){const t=(0,o.createContext)(null);return[({children:e,value:n})=>(0,x.jsx)(t.Provider,{value:n,children:e}),()=>{const n=(0,o.useContext)(t);if(null===n)throw new Error(e);return n}]}sR.classes=oR,sR.displayName="@mantine/core/Paper";const[lR,cR]=uR("Card component was not found in tree");var dR={root:"m_e615b15f",section:"m_599a2148"};const fR={},pR=hj(((e,t)=>{const n=kN("CardSection",fR,e),{classNames:r,className:o,style:i,styles:a,vars:s,withBorder:u,inheritPadding:l,mod:c,...d}=n,f=cR();return(0,x.jsx)(sj,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...f.getStyles("section",{className:o,style:i,styles:a,classNames:r}),...d})}));pR.classes=dR,pR.displayName="@mantine/core/CardSection";const hR={},mR=(e,{padding:t})=>({root:{"--card-padding":XT(t)}}),vR=hj(((e,t)=>{const n=kN("Card",hR,e),{classNames:r,className:i,style:a,styles:s,unstyled:u,vars:l,children:c,padding:d,...f}=n,p=HN({name:"Card",props:n,classes:dR,className:i,style:a,classNames:r,styles:s,unstyled:u,vars:l,varsResolver:mR}),h=o.Children.toArray(c),m=h.map(((e,t)=>"object"==typeof e&&e&&"type"in e&&e.type===pR?(0,o.cloneElement)(e,{"data-first-section":0===t||void 0,"data-last-section":t===h.length-1||void 0}):e));return(0,x.jsx)(lR,{value:{getStyles:p},children:(0,x.jsx)(sR,{ref:t,unstyled:u,...p("root"),...f,children:m})})}));vR.classes=dR,vR.displayName="@mantine/core/Card",vR.Section=pR;var gR={root:"m_3eebeb36",label:"m_9e365f20"};const yR={orientation:"horizontal"},bR=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?lN(t,e):void 0,"--divider-border-style":n,"--divider-size":ZT(r,"divider-size")}}),DR=lj(((e,t)=>{const n=kN("Divider",yR,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,color:l,orientation:c,label:d,labelPosition:f,mod:p,...h}=n,m=HN({name:"Divider",classes:gR,props:n,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:u,varsResolver:bR});return(0,x.jsx)(sj,{ref:t,mod:[{orientation:c,"with-label":!!d},p],...m("root"),...h,role:"separator",children:d&&(0,x.jsx)(sj,{component:"span",mod:{position:f},...m("label"),children:d})})}));DR.classes=gR,DR.displayName="@mantine/core/Divider";var wR={root:"m_18320242","skeleton-fade":"m_299c329c"};const CR={visible:!0,animate:!0},kR=(e,{width:t,height:n,radius:r,circle:o})=>({root:{"--skeleton-height":KT(n),"--skeleton-width":KT(o?n:t),"--skeleton-radius":o?"1000px":void 0===r?void 0:YT(r)}}),ER=lj(((e,t)=>{const n=kN("Skeleton",CR,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,width:l,height:c,circle:d,visible:f,radius:p,animate:h,mod:m,...v}=n,g=HN({name:"Skeleton",classes:wR,props:n,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:u,varsResolver:kR});return(0,x.jsx)(sj,{ref:t,...g("root"),mod:[{visible:f,animate:h},m],...v})}));ER.classes=wR,ER.displayName="@mantine/core/Skeleton";const xR=(0,o.createContext)(null),SR=xR.Provider;var AR={group:"m_11def92b",root:"m_f85678b6",image:"m_11f8ac07",placeholder:"m_104cd71f"};const FR={},OR=(e,{spacing:t})=>({group:{"--ag-spacing":XT(t)}}),MR=lj(((e,t)=>{const n=kN("AvatarGroup",FR,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,spacing:l,...c}=n,d=HN({name:"AvatarGroup",classes:AR,props:n,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:u,varsResolver:OR,rootSelector:"group"});return(0,x.jsx)(SR,{value:!0,children:(0,x.jsx)(sj,{ref:t,...d("group"),...c})})}));function BR(e){return(0,x.jsx)("svg",{...e,"data-avatar-placeholder-icon":!0,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,x.jsx)("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}MR.classes=AR,MR.displayName="@mantine/core/AvatarGroup";const PR=["blue","cyan","grape","green","indigo","lime","orange","pink","red","teal","violet"];function TR(e,t=2){const n=e.split(" ");return 1===n.length?e.slice(0,t).toUpperCase():n.map((e=>e[0])).slice(0,t).join("").toUpperCase()}const NR={},jR=(e,{size:t,radius:n,variant:r,gradient:o,color:i,autoContrast:a,name:s,allowedInitialsColors:u})=>{const l="initials"===i&&"string"==typeof s?function(e,t=PR){const n=function(e){let t=0;for(let n=0;n<e.length;n+=1)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}(e);return t[Math.abs(n)%t.length]}(s,u):i,c=e.variantColorResolver({color:l||"gray",theme:e,gradient:o,variant:r||"light",autoContrast:a});return{root:{"--avatar-size":ZT(t,"avatar-size"),"--avatar-radius":void 0===n?void 0:YT(n),"--avatar-bg":l||r?c.background:void 0,"--avatar-color":l||r?c.color:void 0,"--avatar-bd":l||r?c.border:void 0}}},_R=hj(((e,t)=>{const n=kN("Avatar",NR,e),{classNames:r,className:i,style:a,styles:s,unstyled:u,vars:l,src:c,alt:d,radius:f,color:p,gradient:h,imageProps:m,children:v,autoContrast:g,mod:y,name:b,allowedInitialsColors:D,...w}=n,C={withinGroup:!!(0,o.useContext)(xR)},[k,E]=(0,o.useState)(!c),S=HN({name:"Avatar",props:n,classes:AR,className:i,style:a,classNames:r,styles:s,unstyled:u,vars:l,varsResolver:jR});return(0,o.useEffect)((()=>E(!c)),[c]),(0,x.jsx)(sj,{...S("root"),mod:[{"within-group":C.withinGroup},y],ref:t,...w,children:k?(0,x.jsx)("span",{...S("placeholder"),title:d,children:v||"string"==typeof b&&TR(b)||(0,x.jsx)(BR,{})}):(0,x.jsx)("img",{...m,...S("image"),src:c,alt:d,onError:e=>{E(!0),m?.onError?.(e)}})})}));_R.classes=AR,_R.displayName="@mantine/core/Avatar",_R.Group=MR;const[RR,LR]=G_({size:"sm"});function IR({classNames:e,styles:t,props:n,stylesCtx:r}){const o=wN();return{resolvedClassNames:PN({theme:o,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:jN({theme:o,styles:t,props:n,stylesCtx:r||void 0})}}const HR=(0,o.forwardRef)((({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>(0,x.jsx)("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:(0,x.jsx)("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})));HR.displayName="@mantine/core/CloseIcon";var zR={root:"m_86a44da5","root--subtle":"m_220c80f2"};const VR={variant:"subtle"},$R=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":ZT(t,"cb-size"),"--cb-radius":void 0===n?void 0:YT(n),"--cb-icon-size":KT(r)}}),UR=hj(((e,t)=>{const n=kN("CloseButton",VR,e),{iconSize:r,children:o,vars:i,radius:a,className:s,classNames:u,style:l,styles:c,unstyled:d,"data-disabled":f,disabled:p,variant:h,icon:m,mod:v,__staticSelector:g,...y}=n,b=HN({name:g||"CloseButton",props:n,className:s,style:l,classes:zR,classNames:u,styles:c,unstyled:d,vars:i,varsResolver:$R});return(0,x.jsxs)(Rj,{ref:t,...y,unstyled:d,variant:h,disabled:p,mod:[{disabled:p||f},v],...b("root",{variant:h,active:!p&&!f}),children:[m||(0,x.jsx)(HR,{}),o]})}));UR.classes=zR,UR.displayName="@mantine/core/CloseButton";const GR={},WR=lj(((e,t)=>{const n=kN("InputClearButton",GR,e),{size:r,variant:o,vars:i,classNames:a,styles:s,...u}=n,l=LR(),{resolvedClassNames:c,resolvedStyles:d}=IR({classNames:a,styles:s,props:n});return(0,x.jsx)(UR,{variant:o||"transparent",ref:t,size:r||l?.size||"sm",classNames:c,styles:d,__staticSelector:"InputClearButton",...u})}));WR.displayName="@mantine/core/InputClearButton";const[qR,KR]=G_({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var JR={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const ZR={},XR=(e,{size:t})=>({description:{"--input-description-size":void 0===t?void 0:`calc(${QT(t)} - ${KT(2)})`}}),YR=lj(((e,t)=>{const n=kN("InputDescription",ZR,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,size:l,__staticSelector:c,__inheritStyles:d=!0,variant:f,...p}=kN("InputDescription",ZR,n),h=KR(),m=HN({name:["InputWrapper",c],props:n,classes:JR,className:o,style:i,classNames:r,styles:a,unstyled:s,rootSelector:"description",vars:u,varsResolver:XR}),v=d&&h?.getStyles||m;return(0,x.jsx)(sj,{component:"p",ref:t,variant:f,size:l,...v("description",h?.getStyles?{className:o,style:i}:void 0),...p})}));YR.classes=JR,YR.displayName="@mantine/core/InputDescription";const QR={},eL=(e,{size:t})=>({error:{"--input-error-size":void 0===t?void 0:`calc(${QT(t)} - ${KT(2)})`}}),tL=lj(((e,t)=>{const n=kN("InputError",QR,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,size:l,__staticSelector:c,__inheritStyles:d=!0,variant:f,...p}=n,h=HN({name:["InputWrapper",c],props:n,classes:JR,className:o,style:i,classNames:r,styles:a,unstyled:s,rootSelector:"error",vars:u,varsResolver:eL}),m=KR(),v=d&&m?.getStyles||h;return(0,x.jsx)(sj,{component:"p",ref:t,variant:f,size:l,...v("error",m?.getStyles?{className:o,style:i}:void 0),...p})}));tL.classes=JR,tL.displayName="@mantine/core/InputError";const nL={labelElement:"label"},rL=(e,{size:t})=>({label:{"--input-label-size":QT(t),"--input-asterisk-color":void 0}}),oL=lj(((e,t)=>{const n=kN("InputLabel",nL,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,labelElement:l,size:c,required:d,htmlFor:f,onMouseDown:p,children:h,__staticSelector:m,variant:v,mod:g,...y}=kN("InputLabel",nL,n),b=HN({name:["InputWrapper",m],props:n,classes:JR,className:o,style:i,classNames:r,styles:a,unstyled:s,rootSelector:"label",vars:u,varsResolver:rL}),D=KR(),w=D?.getStyles||b;return(0,x.jsxs)(sj,{...w("label",D?.getStyles?{className:o,style:i}:void 0),component:l,variant:v,size:c,ref:t,htmlFor:"label"===l?f:void 0,mod:[{required:d},g],onMouseDown:e=>{p?.(e),!e.defaultPrevented&&e.detail>1&&e.preventDefault()},...y,children:[h,d&&(0,x.jsx)("span",{...w("required"),"aria-hidden":!0,children:" *"})]})}));oL.classes=JR,oL.displayName="@mantine/core/InputLabel";const iL={},aL=lj(((e,t)=>{const n=kN("InputPlaceholder",iL,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,__staticSelector:l,variant:c,error:d,mod:f,...p}=kN("InputPlaceholder",iL,n),h=HN({name:["InputPlaceholder",l],props:n,classes:JR,className:o,style:i,classNames:r,styles:a,unstyled:s,rootSelector:"placeholder"});return(0,x.jsx)(sj,{...h("placeholder"),mod:[{error:!!d},f],component:"span",variant:c,ref:t,...p})}));function sL(e,{hasDescription:t,hasError:n}){const r=e.findIndex((e=>"input"===e)),o=e.slice(0,r),i=e.slice(r+1),a=t&&o.includes("description")||n&&o.includes("error");return{offsetBottom:t&&i.includes("description")||n&&i.includes("error"),offsetTop:a}}aL.classes=JR,aL.displayName="@mantine/core/InputPlaceholder";const uL={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},lL=(e,{size:t})=>({label:{"--input-label-size":QT(t),"--input-asterisk-color":void 0},error:{"--input-error-size":void 0===t?void 0:`calc(${QT(t)} - ${KT(2)})`},description:{"--input-description-size":void 0===t?void 0:`calc(${QT(t)} - ${KT(2)})`}}),cL=lj(((e,t)=>{const n=kN("InputWrapper",uL,e),{classNames:r,className:i,style:a,styles:s,unstyled:u,vars:l,size:c,variant:d,__staticSelector:f,inputContainer:p,inputWrapperOrder:h,label:m,error:v,description:g,labelProps:y,descriptionProps:b,errorProps:D,labelElement:w,children:C,withAsterisk:k,id:E,required:S,__stylesApiProps:A,mod:F,...O}=n,M=HN({name:["InputWrapper",f],props:A||n,classes:JR,className:i,style:a,classNames:r,styles:s,unstyled:u,vars:l,varsResolver:lL}),B={size:c,variant:d,__staticSelector:f},P=__(E),T="boolean"==typeof k?k:S,N=D?.id||`${P}-error`,j=b?.id||`${P}-description`,_=P,R=!!v&&"boolean"!=typeof v,L=!!g,I=`${R?N:""} ${L?j:""}`,H=I.trim().length>0?I.trim():void 0,z=y?.id||`${P}-label`,V=m&&(0,x.jsx)(oL,{labelElement:w,id:z,htmlFor:_,required:T,...B,...y,children:m},"label"),$=L&&(0,x.jsx)(YR,{...b,...B,size:b?.size||B.size,id:b?.id||j,children:g},"description"),U=(0,x.jsx)(o.Fragment,{children:p(C)},"input"),G=R&&(0,o.createElement)(tL,{...D,...B,size:D?.size||B.size,key:"error",id:D?.id||N},v),W=h.map((e=>{switch(e){case"label":return V;case"input":return U;case"description":return $;case"error":return G;default:return null}}));return(0,x.jsx)(qR,{value:{getStyles:M,describedBy:H,inputId:_,labelId:z,...sL(h,{hasDescription:L,hasError:R})},children:(0,x.jsx)(sj,{ref:t,variant:d,size:c,mod:[{error:!!v},F],...M("root"),...O,children:W})})}));cL.classes=JR,cL.displayName="@mantine/core/InputWrapper";const dL={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},fL=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":ZT(t.size,"input-height"),"--input-fz":QT(t.size),"--input-radius":void 0===t.radius?void 0:YT(t.radius),"--input-left-section-width":void 0!==t.leftSectionWidth?KT(t.leftSectionWidth):void 0,"--input-right-section-width":void 0!==t.rightSectionWidth?KT(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?ZT(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),pL=hj(((e,t)=>{const n=kN("Input",dL,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,required:u,__staticSelector:l,__stylesApiProps:c,size:d,wrapperProps:f,error:p,disabled:h,leftSection:m,leftSectionProps:v,leftSectionWidth:g,rightSection:y,rightSectionProps:b,rightSectionWidth:D,rightSectionPointerEvents:w,leftSectionPointerEvents:C,variant:k,vars:E,pointer:S,multiline:A,radius:F,id:O,withAria:M,withErrorStyles:B,mod:P,inputSize:T,__clearSection:N,__clearable:j,__defaultRightSection:_,...R}=n,{styleProps:L,rest:I}=JN(R),H=KR(),z=HN({name:["Input",l],props:c||n,classes:JR,className:o,style:i,classNames:r,styles:a,unstyled:s,stylesCtx:{offsetBottom:H?.offsetBottom,offsetTop:H?.offsetTop},rootSelector:"wrapper",vars:E,varsResolver:fL}),V=M?{required:u,disabled:h,"aria-invalid":!!p,"aria-describedby":H?.describedBy,id:H?.inputId||O}:{},$=y||j&&N||_;return(0,x.jsx)(RR,{value:{size:d||"sm"},children:(0,x.jsxs)(sj,{...z("wrapper"),...L,...f,mod:[{error:!!p&&B,pointer:S,disabled:h,multiline:A,"data-with-right-section":!!$,"data-with-left-section":!!m},P],variant:k,size:d,children:[m&&(0,x.jsx)("div",{...v,"data-position":"left",...z("section",{className:v?.className,style:v?.style}),children:m}),(0,x.jsx)(sj,{component:"input",...I,...V,ref:t,required:u,mod:{disabled:h,error:!!p&&B},variant:k,__size:T,...z("input")}),$&&(0,x.jsx)("div",{...b,"data-position":"right",...z("section",{className:b?.className,style:b?.style}),children:$})]})})}));pL.classes=JR,pL.Wrapper=cL,pL.Label=oL,pL.Error=tL,pL.Description=YR,pL.Placeholder=aL,pL.ClearButton=WR,pL.displayName="@mantine/core/Input";const hL={__staticSelector:"InputBase",withAria:!0},mL=hj(((e,t)=>{const{inputProps:n,wrapperProps:r,...o}=function(e,t,n){const r=kN("InputBase",t,n),{label:o,description:i,error:a,required:s,classNames:u,styles:l,className:c,unstyled:d,__staticSelector:f,__stylesApiProps:p,errorProps:h,labelProps:m,descriptionProps:v,wrapperProps:g,id:y,size:b,style:D,inputContainer:w,inputWrapperOrder:C,withAsterisk:k,variant:E,vars:x,mod:S,...A}=r,{styleProps:F,rest:O}=JN(A);return{...O,classNames:u,styles:l,unstyled:d,wrapperProps:{...{label:o,description:i,error:a,required:s,classNames:u,className:c,__staticSelector:f,__stylesApiProps:p||r,errorProps:h,labelProps:m,descriptionProps:v,unstyled:d,styles:l,size:b,style:D,inputContainer:w,inputWrapperOrder:C,withAsterisk:k,variant:E,id:y,mod:S,...g},...F},inputProps:{required:s,classNames:u,styles:l,unstyled:d,size:b,__staticSelector:f,__stylesApiProps:p||r,error:a,variant:E,id:y}}}(0,hL,e);return(0,x.jsx)(pL.Wrapper,{...r,children:(0,x.jsx)(pL,{...n,...o,ref:t})})}));mL.classes={...pL.classes,...pL.Wrapper.classes},mL.displayName="@mantine/core/InputBase";const vL={},gL=lj(((e,t)=>{const n=kN("TextInput",vL,e);return(0,x.jsx)(mL,{component:"input",ref:t,...n,__staticSelector:"TextInput"})}));function yL(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function bL({open:e,close:t,openDelay:n,closeDelay:r}){const i=(0,o.useRef)(-1),a=(0,o.useRef)(-1),s=()=>{window.clearTimeout(i.current),window.clearTimeout(a.current)};return(0,o.useEffect)((()=>s),[]),{openDropdown:()=>{s(),0===n||void 0===n?e():i.current=window.setTimeout(e,n)},closeDropdown:()=>{s(),0===r||void 0===r?t():a.current=window.setTimeout(t,r)}}}gL.classes=mL.classes,gL.displayName="@mantine/core/TextInput";const DL=["mousedown","touchstart"];var wL={root:"m_9814e45f"};const CL={zIndex:c_("modal")},kL=(e,{gradient:t,color:n,backgroundOpacity:r,blur:o,radius:i,zIndex:a})=>({root:{"--overlay-bg":t||(void 0!==n||void 0!==r)&&dN(n||"#000",r??.6)||void 0,"--overlay-filter":o?`blur(${KT(o)})`:void 0,"--overlay-radius":void 0===i?void 0:YT(i),"--overlay-z-index":a?.toString()}}),EL=hj(((e,t)=>{const n=kN("Overlay",CL,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,fixed:l,center:c,children:d,radius:f,zIndex:p,gradient:h,blur:m,color:v,backgroundOpacity:g,mod:y,...b}=n,D=HN({name:"Overlay",props:n,classes:wL,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:u,varsResolver:kL});return(0,x.jsx)(sj,{ref:t,...D("root"),mod:[{center:c,fixed:l},y],...b,children:d})}));EL.classes=wL,EL.displayName="@mantine/core/Overlay";const[xL,SL]=uR("Popover component was not found in the tree"),AL=()=>{};function FL(e,t={active:!0}){return"function"==typeof e&&t.active?n=>{"Escape"===n.key&&(e(n),t.onTrigger?.())}:t.onKeyDown||AL}const OL=/input|select|textarea|button|object/,ML="a, input, select, textarea, button, object, [tabindex]";function BL(e){return"none"===e.style.display}function PL(e){let t=e.getAttribute("tabindex");return null===t&&(t=void 0),parseInt(t,10)}function TL(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(PL(e));return(OL.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&function(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||"hidden"===e.getAttribute("type"))return!1;let t=e;for(;t&&t!==document.body&&11!==t.nodeType;){if(BL(t))return!1;t=t.parentNode}return!0}(e)}function NL(e){const t=PL(e);return(Number.isNaN(t)||t>=0)&&TL(e)}function jL(e=!0){const t=(0,o.useRef)(null),n=e=>{let t=e.querySelector("[data-autofocus]");if(!t){const n=Array.from(e.querySelectorAll(ML));t=n.find(NL)||n.find(TL)||null,!t&&TL(e)&&(t=e)}t&&t.focus({preventScroll:!0})},r=(0,o.useCallback)((r=>{e&&null!==r&&t.current!==r&&(r?(setTimeout((()=>{r.getRootNode()&&n(r)})),t.current=r):t.current=null)}),[e]);return(0,o.useEffect)((()=>{if(!e)return;t.current&&setTimeout((()=>n(t.current)));const r=e=>{"Tab"===e.key&&t.current&&function(e,t){const n=(r=e,Array.from(r.querySelectorAll(ML)).filter(NL));var r;if(!n.length)return void t.preventDefault();const o=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let a=o===i.activeElement||e===i.activeElement;const s=i.activeElement;if("INPUT"===s.tagName&&"radio"===s.getAttribute("type")){const e=n.filter((e=>"radio"===e.getAttribute("type")&&e.getAttribute("name")===s.getAttribute("name")));a=e.includes(o)}if(!a)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}(t.current,e)};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)}),[e]),r}var _L={root:"m_515a97f8"};const RL={},LL=lj(((e,t)=>{const n=kN("VisuallyHidden",RL,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,...l}=n,c=HN({name:"VisuallyHidden",classes:_L,props:n,className:o,style:i,classNames:r,styles:a,unstyled:s});return(0,x.jsx)(sj,{component:"span",ref:t,...c("root"),...l})}));function IL({children:e,active:t=!0,refProp:n="ref",innerRef:r}){const i=s_(jL(t),r);return u_(e)?(0,o.cloneElement)(e,{[n]:i}):e}function HL(e){return(0,x.jsx)(LL,{tabIndex:-1,"data-autofocus":!0,...e})}LL.classes=_L,LL.displayName="@mantine/core/VisuallyHidden",IL.displayName="@mantine/core/FocusTrap",HL.displayName="@mantine/core/FocusTrapInitialFocus",IL.InitialFocus=HL;var zL={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const VL={},$L=lj(((e,t)=>{const n=kN("PopoverDropdown",VL,e),{className:r,style:i,vars:a,children:s,onKeyDownCapture:u,variant:l,classNames:c,styles:d,...f}=n,p=SL(),h=function({opened:e,shouldReturnFocus:t=!0}){const n=(0,o.useRef)(null),r=()=>{n.current&&"focus"in n.current&&"function"==typeof n.current.focus&&n.current?.focus({preventScroll:!0})};return Pj((()=>{let o=-1;const i=e=>{"Tab"===e.key&&window.clearTimeout(o)};return document.addEventListener("keydown",i),e?n.current=document.activeElement:t&&(o=window.setTimeout(r,10)),()=>{window.clearTimeout(o),document.removeEventListener("keydown",i)}}),[e,t]),r}({opened:p.opened,shouldReturnFocus:p.returnFocus}),m=p.withRoles?{"aria-labelledby":p.getTargetId(),id:p.getDropdownId(),role:"dialog",tabIndex:-1}:{},v=s_(t,p.floating);return p.disabled?null:(0,x.jsx)(E_,{...p.portalProps,withinPortal:p.withinPortal,children:(0,x.jsx)(Nj,{mounted:p.opened,...p.transitionProps,transition:p.transitionProps?.transition||"fade",duration:p.transitionProps?.duration??150,keepMounted:p.keepMounted,exitDuration:"number"==typeof p.transitionProps?.exitDuration?p.transitionProps.exitDuration:p.transitionProps?.duration,children:e=>(0,x.jsx)(IL,{active:p.trapFocus&&p.opened,innerRef:v,children:(0,x.jsxs)(sj,{...m,...f,variant:l,onKeyDownCapture:FL((()=>{p.onClose?.(),p.onDismiss?.()}),{active:p.closeOnEscape,onTrigger:h,onKeyDown:u}),"data-position":p.placement,"data-fixed":"fixed"===p.floatingStrategy||void 0,...p.getStyles("dropdown",{className:r,props:n,classNames:c,styles:d,style:[{...e,zIndex:p.zIndex,top:p.y??0,left:p.x??0,width:"target"===p.width?void 0:KT(p.width)},p.resolvedStyles.dropdown,d?.dropdown,i]}),children:[s,(0,x.jsx)(b_,{ref:p.arrowRef,arrowX:p.arrowX,arrowY:p.arrowY,visible:p.withArrow,position:p.placement,arrowSize:p.arrowSize,arrowRadius:p.arrowRadius,arrowOffset:p.arrowOffset,arrowPosition:p.arrowPosition,...p.getStyles("arrow",{props:n,classNames:c,styles:d})})]})})})})}));$L.classes=zL,$L.displayName="@mantine/core/PopoverDropdown";const UL={refProp:"ref",popupType:"dialog"},GL=lj(((e,t)=>{const{children:n,refProp:r,popupType:i,...a}=kN("PopoverTarget",UL,e);if(!u_(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=a,u=SL(),l=s_(u.reference,d_(n),t),c=u.withRoles?{"aria-haspopup":i,"aria-expanded":u.opened,"aria-controls":u.getDropdownId(),id:u.getTargetId()}:{};return(0,o.cloneElement)(n,{...s,...c,...u.targetProps,className:ON(u.targetProps.className,s.className,n.props.className),[r]:l,...u.controlled?null:{onClick:u.onToggle}})}));function WL(e,t){const n=function(e){if(void 0===e)return{shift:!0,flip:!0};const t={...e};return void 0===e.shift&&(t.shift=!0),void 0===e.flip&&(t.flip=!0),t}(e.middlewares),r=[PF(e.offset)];return n.shift&&r.push(TF("boolean"==typeof n.shift?{limiter:NF(),padding:5}:{limiter:NF(),padding:5,...n.shift})),n.flip&&r.push("boolean"==typeof n.flip?jF():jF(n.flip)),n.inline&&r.push("boolean"==typeof n.inline?RF():RF(n.inline)),r.push(LF({element:e.arrowRef,padding:e.arrowOffset})),(n.size||"target"===e.width)&&r.push(_F({..."boolean"==typeof n.size?{}:n.size,apply({rects:r,availableWidth:o,availableHeight:i,...a}){const s=t(),u=s.refs.floating.current?.style??{};n.size&&("object"==typeof n.size&&n.size.apply?n.size.apply({rects:r,availableWidth:o,availableHeight:i,...a}):Object.assign(u,{maxWidth:`${o}px`,maxHeight:`${i}px`})),"target"===e.width&&Object.assign(u,{width:`${r.reference.width}px`})}})),r}GL.displayName="@mantine/core/PopoverTarget";const qL={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:c_("popover"),__staticSelector:"Popover",width:"max-content"},KL=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":void 0===t?void 0:YT(t),"--popover-shadow":tN(n)}});function JL(e){const t=kN("Popover",qL,e),{children:n,position:r,offset:i,onPositionChange:a,positionDependencies:s,opened:u,transitionProps:l,onExitTransitionEnd:c,onEnterTransitionEnd:d,width:f,middlewares:p,withArrow:h,arrowSize:m,arrowOffset:v,arrowRadius:g,arrowPosition:y,unstyled:b,classNames:D,styles:w,closeOnClickOutside:C,withinPortal:k,portalProps:E,closeOnEscape:S,clickOutsideEvents:A,trapFocus:F,onClose:O,onDismiss:M,onOpen:B,onChange:P,zIndex:T,radius:N,shadow:j,id:_,defaultOpened:R,__staticSelector:L,withRoles:I,disabled:H,returnFocus:z,variant:V,keepMounted:$,vars:U,floatingStrategy:G,withOverlay:W,overlayProps:q,...K}=t,J=HN({name:L,props:t,classes:zL,classNames:D,styles:w,unstyled:b,rootSelector:"dropdown",vars:U,varsResolver:KL}),{resolvedStyles:Z}=IR({classNames:D,styles:w,props:t}),X=(0,o.useRef)(null),[Y,Q]=(0,o.useState)(null),[ee,te]=(0,o.useState)(null),{dir:ne}=p_(),re=__(_),oe=function(e){const[t,n]=$_({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=(0,o.useRef)(t),i=EO({strategy:e.strategy,placement:e.position,middleware:WL(e,(()=>i))});return R_({opened:t,position:e.position,positionDependencies:e.positionDependencies||[],floating:i}),Pj((()=>{e.onPositionChange?.(i.placement)}),[i.placement]),Pj((()=>{t!==r.current&&(t?e.onOpen?.():e.onClose?.()),r.current=t}),[t,e.onClose,e.onOpen]),{floating:i,controlled:"boolean"==typeof e.opened,opened:t,onClose:()=>{t&&n(!1)},onToggle:()=>n(!t)}}({middlewares:p,width:f,position:h_(ne,r),offset:"number"==typeof i?i+(h?m/2:0):i,arrowRef:X,arrowOffset:v,onPositionChange:a,positionDependencies:s,opened:u,defaultOpened:R,onChange:P,onOpen:B,onClose:O,onDismiss:M,strategy:G});!function(e,t,n){const r=(0,o.useRef)(null);(0,o.useEffect)((()=>{const o=t=>{const{target:o}=t??{};if(Array.isArray(n)){const r=o?.hasAttribute("data-ignore-outside-clicks")||!document.body.contains(o)&&"HTML"!==o.tagName;n.every((e=>!!e&&!t.composedPath().includes(e)))&&!r&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||DL).forEach((e=>document.addEventListener(e,o))),()=>{(t||DL).forEach((e=>document.removeEventListener(e,o)))}}),[r,e,n])}((()=>{C&&(oe.onClose(),M?.())}),A,[Y,ee]);const ie=(0,o.useCallback)((e=>{Q(e),oe.floating.refs.setReference(e)}),[oe.floating.refs.setReference]),ae=(0,o.useCallback)((e=>{te(e),oe.floating.refs.setFloating(e)}),[oe.floating.refs.setFloating]),se=(0,o.useCallback)((()=>{l?.onExited?.(),c?.()}),[l?.onExited,c]),ue=(0,o.useCallback)((()=>{l?.onEntered?.(),d?.()}),[l?.onEntered,d]);return(0,x.jsxs)(xL,{value:{returnFocus:z,disabled:H,controlled:oe.controlled,reference:ie,floating:ae,x:oe.floating.x,y:oe.floating.y,arrowX:oe.floating?.middlewareData?.arrow?.x,arrowY:oe.floating?.middlewareData?.arrow?.y,opened:oe.opened,arrowRef:X,transitionProps:{...l,onExited:se,onEntered:ue},width:f,withArrow:h,arrowSize:m,arrowOffset:v,arrowRadius:g,arrowPosition:y,placement:oe.floating.placement,trapFocus:F,withinPortal:k,portalProps:E,zIndex:T,radius:N,shadow:j,closeOnEscape:S,onDismiss:M,onClose:oe.onClose,onToggle:oe.onToggle,getTargetId:()=>`${re}-target`,getDropdownId:()=>`${re}-dropdown`,withRoles:I,targetProps:K,__staticSelector:L,classNames:D,styles:w,unstyled:b,variant:V,keepMounted:$,getStyles:J,resolvedStyles:Z,floatingStrategy:G},children:[n,W&&(0,x.jsx)(Nj,{transition:"fade",mounted:oe.opened,duration:l?.duration||250,exitDuration:l?.exitDuration||250,children:e=>(0,x.jsx)(E_,{withinPortal:k,children:(0,x.jsx)(EL,{...q,...J("overlay",{className:q?.className,style:[e,q?.style]})})})})]})}JL.Target=GL,JL.Dropdown=$L,JL.displayName="@mantine/core/Popover",JL.extend=e=>e;const[ZL,XL]=uR("Menu component was not found in the tree");var YL={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const QL={},eI=lj(((e,t)=>{const{classNames:n,className:r,style:o,styles:i,vars:a,...s}=kN("MenuDivider",QL,e),u=XL();return(0,x.jsx)(sj,{ref:t,...u.getStyles("divider",{className:r,style:o,styles:i,classNames:n}),...s})}));function tI(e,t){return n=>{e?.(n),t?.(n)}}eI.classes=YL,eI.displayName="@mantine/core/MenuDivider";const nI={},rI=lj(((e,t)=>{const{classNames:n,className:r,style:i,styles:a,vars:s,onMouseEnter:u,onMouseLeave:l,onKeyDown:c,children:d,...f}=kN("MenuDropdown",nI,e),p=(0,o.useRef)(null),h=XL(),m=tI(c,(e=>{"ArrowUp"!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),p.current?.querySelectorAll("[data-menu-item]:not(:disabled)")[0]?.focus())})),v=tI(u,(()=>("hover"===h.trigger||"click-hover"===h.trigger)&&h.openDropdown())),g=tI(l,(()=>("hover"===h.trigger||"click-hover"===h.trigger)&&h.closeDropdown()));return(0,x.jsxs)(JL.Dropdown,{...f,onMouseEnter:v,onMouseLeave:g,role:"menu","aria-orientation":"vertical",ref:s_(t,p),...h.getStyles("dropdown",{className:r,style:i,styles:a,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:m,children:[h.withInitialFocusPlaceholder&&(0,x.jsx)("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),d]})}));function oI({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:o=!1,dir:i="rtl",orientation:a}){return s=>{n?.(s);const u=Array.from(yL(s.currentTarget,e)?.querySelectorAll(t)||[]).filter((t=>function(e,t,n){return yL(e,n)===yL(t,n)}(s.currentTarget,t,e))),l=u.findIndex((e=>s.currentTarget===e)),c=function(e,t,n){for(let n=e+1;n<t.length;n+=1)if(!t[n].disabled)return n;if(n)for(let e=0;e<t.length;e+=1)if(!t[e].disabled)return e;return e}(l,u,r),d=function(e,t,n){for(let n=e-1;n>=0;n-=1)if(!t[n].disabled)return n;if(n)for(let e=t.length-1;e>-1;e-=1)if(!t[e].disabled)return e;return e}(l,u,r),f="rtl"===i?d:c,p="rtl"===i?c:d;switch(s.key){case"ArrowRight":"horizontal"===a&&(s.stopPropagation(),s.preventDefault(),u[f].focus(),o&&u[f].click());break;case"ArrowLeft":"horizontal"===a&&(s.stopPropagation(),s.preventDefault(),u[p].focus(),o&&u[p].click());break;case"ArrowUp":"vertical"===a&&(s.stopPropagation(),s.preventDefault(),u[d].focus(),o&&u[d].click());break;case"ArrowDown":"vertical"===a&&(s.stopPropagation(),s.preventDefault(),u[c].focus(),o&&u[c].click());break;case"Home":s.stopPropagation(),s.preventDefault(),!u[0].disabled&&u[0].focus();break;case"End":{s.stopPropagation(),s.preventDefault();const e=u.length-1;!u[e].disabled&&u[e].focus();break}}}}rI.classes=YL,rI.displayName="@mantine/core/MenuDropdown";const iI={},aI=hj(((e,t)=>{const{classNames:n,className:r,style:i,styles:a,vars:s,color:u,closeMenuOnClick:l,leftSection:c,rightSection:d,children:f,disabled:p,"data-disabled":h,...m}=kN("MenuItem",iI,e),v=XL(),g=wN(),{dir:y}=p_(),b=(0,o.useRef)(null),D=v.getItemIndex(b.current),w=m,C=tI(w.onMouseLeave,(()=>v.setHovered(-1))),k=tI(w.onMouseEnter,(()=>v.setHovered(v.getItemIndex(b.current)))),E=tI(w.onClick,(()=>{h||("boolean"==typeof l?l&&v.closeDropdownImmediately():v.closeOnItemClick&&v.closeDropdownImmediately())})),S=tI(w.onFocus,(()=>v.setHovered(v.getItemIndex(b.current)))),A=u?g.variantColorResolver({color:u,theme:g,variant:"light"}):void 0,F=u?uN({color:u,theme:g}):null;return(0,x.jsxs)(Rj,{...m,unstyled:v.unstyled,tabIndex:v.menuItemTabIndex,onFocus:S,...v.getStyles("item",{className:r,style:i,styles:a,classNames:n}),ref:s_(b,t),role:"menuitem",disabled:p,"data-menu-item":!0,"data-disabled":p||h||void 0,"data-hovered":v.hovered===D||void 0,"data-mantine-stop-propagation":!0,onMouseEnter:k,onMouseLeave:C,onClick:E,onKeyDown:oI({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:v.loop,dir:y,orientation:"vertical",onKeyDown:w.onKeyDown}),__vars:{"--menu-item-color":F?.isThemeColor&&void 0===F?.shade?`var(--mantine-color-${F.color}-6)`:A?.color,"--menu-item-hover":A?.hover},children:[c&&(0,x.jsx)("div",{...v.getStyles("itemSection",{styles:a,classNames:n}),"data-position":"left",children:c}),f&&(0,x.jsx)("div",{...v.getStyles("itemLabel",{styles:a,classNames:n}),children:f}),d&&(0,x.jsx)("div",{...v.getStyles("itemSection",{styles:a,classNames:n}),"data-position":"right",children:d})]})}));aI.classes=YL,aI.displayName="@mantine/core/MenuItem";const sI={},uI=lj(((e,t)=>{const{classNames:n,className:r,style:o,styles:i,vars:a,...s}=kN("MenuLabel",sI,e),u=XL();return(0,x.jsx)(sj,{ref:t,...u.getStyles("label",{className:r,style:o,styles:i,classNames:n}),...s})}));uI.classes=YL,uI.displayName="@mantine/core/MenuLabel";const lI={refProp:"ref"},cI=(0,o.forwardRef)(((e,t)=>{const{children:n,refProp:r,...i}=kN("MenuTarget",lI,e);if(!u_(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const a=XL(),s=n.props,u=tI(s.onClick,(()=>{"click"===a.trigger?a.toggleDropdown():"click-hover"===a.trigger&&(a.setOpenedViaClick(!0),a.opened||a.openDropdown())})),l=tI(s.onMouseEnter,(()=>("hover"===a.trigger||"click-hover"===a.trigger)&&a.openDropdown())),c=tI(s.onMouseLeave,(()=>{"hover"===a.trigger?a.closeDropdown():"click-hover"!==a.trigger||a.openedViaClick||a.closeDropdown()}));return(0,x.jsx)(JL.Target,{refProp:r,popupType:"menu",ref:t,...i,children:(0,o.cloneElement)(n,{onClick:u,onMouseEnter:l,onMouseLeave:c,"data-expanded":!!a.opened||void 0})})}));cI.displayName="@mantine/core/MenuTarget";const dI={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function fI(e){const t=kN("Menu",dI,e),{children:n,onOpen:r,onClose:i,opened:a,defaultOpened:s,trapFocus:u,onChange:l,closeOnItemClick:c,loop:d,closeOnEscape:f,trigger:p,openDelay:h,closeDelay:m,classNames:v,styles:g,unstyled:y,variant:b,vars:D,menuItemTabIndex:w,keepMounted:C,withInitialFocusPlaceholder:k,...E}=t,S=HN({name:"Menu",classes:YL,props:t,classNames:v,styles:g,unstyled:y}),[A,{setHovered:F,resetHovered:O}]=function(){const[e,t]=(0,o.useState)(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}(),[M,B]=$_({value:a,defaultValue:s,finalValue:!1,onChange:l}),[P,T]=(0,o.useState)(!1),N=()=>{B(!1),T(!1),M&&i?.()},j=()=>{B(!0),!M&&r?.()},_=()=>{M?N():j()},{openDropdown:R,closeDropdown:L}=bL({open:j,close:N,closeDelay:m,openDelay:h}),{resolvedClassNames:I,resolvedStyles:H}=IR({classNames:v,styles:g,props:t});return Pj((()=>{O()}),[M]),(0,x.jsx)(ZL,{value:{getStyles:S,opened:M,toggleDropdown:_,getItemIndex:e=>function(e,t,n){return n?Array.from(yL(n,"[data-menu-dropdown]")?.querySelectorAll("[data-menu-item]")||[]).findIndex((e=>e===n)):null}(0,0,e),hovered:A,setHovered:F,openedViaClick:P,setOpenedViaClick:T,closeOnItemClick:c,closeDropdown:"click"===p?N:L,openDropdown:"click"===p?j:R,closeDropdownImmediately:N,loop:d,trigger:p,unstyled:y,menuItemTabIndex:w,withInitialFocusPlaceholder:k},children:(0,x.jsx)(JL,{...E,opened:M,onChange:_,defaultOpened:s,trapFocus:!C&&u,closeOnEscape:f,__staticSelector:"Menu",classNames:I,styles:H,unstyled:y,variant:b,keepMounted:C,children:n})})}function pI(e,t){return n=>{if("string"!=typeof n||0===n.trim().length)throw new Error(t);return`${e}-${n}`}}function hI({color:e,theme:t,autoContrast:n}){return("boolean"==typeof n?n:t.autoContrast)&&uN({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function mI(e,t){return hI({color:e.colors[e.primaryColor][iN(e,t)],theme:e,autoContrast:null})}function vI(e,t){return"boolean"==typeof e?e:t.autoContrast}fI.extend=e=>e,fI.withProps=function(e){const t=e;return e=>{const n=(0,o.forwardRef)(((n,r)=>(0,x.jsx)(t,{...e,...n,ref:r})));return n.extend=t.extend,n.displayName=`WithProps(${t.displayName})`,n}}(fI),fI.classes=YL,fI.displayName="@mantine/core/Menu",fI.Item=aI,fI.Label=uI,fI.Dropdown=rI,fI.Target=cI,fI.Divider=eI;const[gI,yI]=uR("Tabs component was not found in the tree");var bI={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const DI={},wI=lj(((e,t)=>{const n=kN("TabsList",DI,e),{children:r,className:o,grow:i,justify:a,classNames:s,styles:u,style:l,mod:c,...d}=n,f=yI();return(0,x.jsx)(sj,{...d,...f.getStyles("list",{className:o,style:l,classNames:s,styles:u,props:n,variant:f.variant}),ref:t,role:"tablist",variant:f.variant,mod:[{grow:i,orientation:f.orientation,placement:"vertical"===f.orientation&&f.placement,inverted:f.inverted},c],"aria-orientation":f.orientation,__vars:{"--tabs-justify":a},children:r})}));wI.classes=bI,wI.displayName="@mantine/core/TabsList";const CI={},kI=lj(((e,t)=>{const n=kN("TabsPanel",CI,e),{children:r,className:o,value:i,classNames:a,styles:s,style:u,mod:l,keepMounted:c,...d}=n,f=yI(),p=f.value===i,h=f.keepMounted||c||p?r:null;return(0,x.jsx)(sj,{...d,...f.getStyles("panel",{className:o,classNames:a,styles:s,style:[u,p?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(i),"aria-labelledby":f.getTabId(i),children:h})}));kI.classes=bI,kI.displayName="@mantine/core/TabsPanel";const EI={},xI=lj(((e,t)=>{const n=kN("TabsTab",EI,e),{className:r,children:o,rightSection:i,leftSection:a,value:s,onClick:u,onKeyDown:l,disabled:c,color:d,style:f,classNames:p,styles:h,vars:m,mod:v,tabIndex:g,...y}=n,b=wN(),{dir:D}=p_(),w=yI(),C=s===w.value,k={classNames:p,styles:h,props:n};return(0,x.jsxs)(Rj,{...y,...w.getStyles("tab",{className:r,style:f,variant:w.variant,...k}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:C,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:"vertical"===w.orientation&&w.placement},v],ref:t,role:"tab",id:w.getTabId(s),"aria-selected":C,tabIndex:void 0!==g?g:C||null===w.value?0:-1,"aria-controls":w.getPanelId(s),onClick:e=>{w.onChange(w.allowTabDeactivation&&s===w.value?null:s),u?.(e)},__vars:{"--tabs-color":d?lN(d,b):void 0},onKeyDown:oI({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:D,onKeyDown:l}),children:[a&&(0,x.jsx)("span",{...w.getStyles("tabSection",k),"data-position":"left",children:a}),o&&(0,x.jsx)("span",{...w.getStyles("tabLabel",k),children:o}),i&&(0,x.jsx)("span",{...w.getStyles("tabSection",k),"data-position":"right",children:i})]})}));xI.classes=bI,xI.displayName="@mantine/core/TabsTab";const SI="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",AI={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},FI=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":YT(t),"--tabs-color":lN(n,e),"--tabs-text-color":vI(r,e)?hI({color:n,theme:e,autoContrast:r}):void 0}}),OI=lj(((e,t)=>{const n=kN("Tabs",AI,e),{defaultValue:r,value:o,onChange:i,orientation:a,children:s,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:d,variant:f,color:p,radius:h,inverted:m,placement:v,keepMounted:g,classNames:y,styles:b,unstyled:D,className:w,style:C,vars:k,autoContrast:E,mod:S,...A}=n,F=__(l),[O,M]=$_({value:o,defaultValue:r,finalValue:null,onChange:i}),B=HN({name:"Tabs",props:n,classes:bI,className:w,style:C,classNames:y,styles:b,unstyled:D,vars:k,varsResolver:FI});return(0,x.jsx)(gI,{value:{placement:v,value:O,orientation:a,id:F,loop:u,activateTabWithKeyboard:c,getTabId:pI(`${F}-tab`,SI),getPanelId:pI(`${F}-panel`,SI),onChange:M,allowTabDeactivation:d,variant:f,color:p,radius:h,inverted:m,keepMounted:g,unstyled:D,getStyles:B},children:(0,x.jsx)(sj,{ref:t,id:F,variant:f,mod:[{orientation:a,inverted:"horizontal"===a&&m,placement:"vertical"===a&&v},S],...B("root"),...A,children:s})})}));OI.classes=bI,OI.displayName="@mantine/core/Tabs",OI.Tab=xI,OI.Panel=kI,OI.List=wI;var MI={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const BI={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:c_("overlay")},PI=(e,{zIndex:t})=>({root:{"--lo-z-index":t?.toString()}}),TI=lj(((e,t)=>{const n=kN("LoadingOverlay",BI,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,transitionProps:l,loaderProps:c,overlayProps:d,visible:f,zIndex:p,...h}=n,m=wN(),v=HN({name:"LoadingOverlay",classes:MI,props:n,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:u,varsResolver:PI}),g={...BI.overlayProps,...d};return(0,x.jsx)(Nj,{transition:"fade",...l,mounted:!!f,children:e=>(0,x.jsxs)(sj,{...v("root",{style:e}),ref:t,...h,children:[(0,x.jsx)(Aj,{...v("loader"),unstyled:s,...c}),(0,x.jsx)(EL,{...g,...v("overlay"),darkHidden:!0,unstyled:s,color:d?.color||m.white}),(0,x.jsx)(EL,{...g,...v("overlay"),lightHidden:!0,unstyled:s,color:d?.color||m.colors.dark[5]})]})})}));TI.classes=MI,TI.displayName="@mantine/core/LoadingOverlay";const NI={multiple:!1},jI=(0,o.forwardRef)(((e,t)=>{const{onChange:n,children:r,multiple:i,accept:a,name:s,form:u,resetRef:l,disabled:c,capture:d,inputProps:f,...p}=kN("FileButton",NI,e),h=(0,o.useRef)(null);return i_(l,(()=>{h.current&&(h.current.value="")})),(0,x.jsxs)(x.Fragment,{children:[r({onClick:()=>{!c&&h.current?.click()},...p}),(0,x.jsx)("input",{style:{display:"none"},type:"file",accept:a,multiple:i,onChange:e=>{n(i?Array.from(e.currentTarget.files):e.currentTarget.files[0]||null)},ref:s_(t,h),name:s,form:u,capture:d,...f})]})}));jI.displayName="@mantine/core/FileButton";const _I={valueComponent:({value:e})=>(0,x.jsx)("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(e)?e.map((e=>e.name)).join(", "):e?.name})},RI=lj(((e,t)=>{const n=kN("FileInput",_I,e),{unstyled:r,vars:i,onChange:a,value:s,defaultValue:u,multiple:l,accept:c,name:d,form:f,valueComponent:p,clearable:h,clearButtonProps:m,readOnly:v,capture:g,fileInputProps:y,rightSection:b,size:D,placeholder:w,component:C,resetRef:k,classNames:E,styles:S,...A}=n,F=(0,o.useRef)(null),{resolvedClassNames:O,resolvedStyles:M}=IR({classNames:E,styles:S,props:n}),[B,P]=$_({value:s,defaultValue:u,onChange:a,finalValue:l?[]:null}),T=Array.isArray(B)?0!==B.length:null!==B,N=b||(h&&T&&!v?(0,x.jsx)(UR,{...m,variant:"subtle",onClick:()=>P(l?[]:null),size:D,unstyled:r}):null);(0,o.useEffect)((()=>{(Array.isArray(B)&&0===B.length||null===B)&&F.current?.()}),[B]);const j=p;return(0,x.jsx)(jI,{onChange:P,multiple:l,accept:c,name:d,form:f,resetRef:s_(F,k),disabled:v,capture:g,inputProps:y,children:e=>(0,x.jsx)(mL,{component:C||"button",ref:t,rightSection:N,...e,...A,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:n,unstyled:r,size:D,classNames:E,styles:S,children:T?(0,x.jsx)(j,{value:B}):(0,x.jsx)(pL.Placeholder,{__staticSelector:"FileInput",classNames:O,styles:M,children:w})})})}));RI.classes=mL.classes,RI.displayName="@mantine/core/FileInput";const LI=RI;var II={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const HI={},zI=(e,{radius:t,color:n,gradient:r,variant:o,size:i,autoContrast:a})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:o||"filled",autoContrast:a});return{root:{"--badge-height":ZT(i,"badge-height"),"--badge-padding-x":ZT(i,"badge-padding-x"),"--badge-fz":ZT(i,"badge-fz"),"--badge-radius":void 0===t?void 0:YT(t),"--badge-bg":n||o?s.background:void 0,"--badge-color":n||o?s.color:void 0,"--badge-bd":n||o?s.border:void 0,"--badge-dot-color":"dot"===o?lN(n,e):void 0}}},VI=hj(((e,t)=>{const n=kN("Badge",HI,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,radius:l,color:c,gradient:d,leftSection:f,rightSection:p,children:h,variant:m,fullWidth:v,autoContrast:g,circle:y,mod:b,...D}=n,w=HN({name:"Badge",props:n,classes:II,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:u,varsResolver:zI});return(0,x.jsxs)(sj,{variant:m,mod:[{block:v,circle:y,"with-right-section":!!p,"with-left-section":!!f},b],...w("root",{variant:m}),ref:t,...D,children:[f&&(0,x.jsx)("span",{...w("section"),"data-position":"left",children:f}),(0,x.jsx)("span",{...w("label"),children:h}),p&&(0,x.jsx)("span",{...w("section"),"data-position":"right",children:p})]})}));VI.classes=II,VI.displayName="@mantine/core/Badge";const $I={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var UI={root:"m_8bffd616"};const GI={},WI=hj(((e,t)=>{const n=kN("Flex",GI,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,gap:l,rowGap:c,columnGap:d,align:f,justify:p,wrap:h,direction:m,...v}=n,g=HN({name:"Flex",classes:UI,props:n,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:u}),y=wN(),b=ij(),D=oj({styleProps:{gap:l,rowGap:c,columnGap:d,align:f,justify:p,wrap:h,direction:m},theme:y,data:$I});return(0,x.jsxs)(x.Fragment,{children:[D.hasResponsiveStyles&&(0,x.jsx)(UN,{selector:`.${b}`,styles:D.styles,media:D.media}),(0,x.jsx)(sj,{ref:t,...g("root",{className:b,style:nN(D.inlineStyles)}),...v})]})}));function qI(e){return"auto"===e||"dark"===e||"light"===e}function KI({key:e="mantine-color-scheme-value"}={}){let t;return{get:t=>{if("undefined"==typeof window)return t;try{const n=window.localStorage.getItem(e);return qI(n)?n:t}catch{return t}},set:t=>{try{window.localStorage.setItem(e,t)}catch(e){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",e)}},subscribe:n=>{t=t=>{t.storageArea===window.localStorage&&t.key===e&&qI(t.newValue)&&n(t.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}function JI(){const e=wN(),t=SN(),n=zN(e.breakpoints).reduce(((t,n)=>{const r=e.breakpoints[n].includes("px"),o=function(e){const t=function(e){return"string"==typeof e&&e.includes("var(--mantine-scale)")?e.match(/^calc\((.*?)\)$/)?.[1].split("*")[0].trim():e}(e);return"number"==typeof t?t:"string"==typeof t?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?16*Number(t.replace("rem","")):t.includes("em")?16*Number(t.replace("em","")):Number(t):NaN}(e.breakpoints[n]);return`${t}@media (max-width: ${r?o-.1+"px":JT(o-.1)}) {.mantine-visible-from-${n} {display: none !important;}}@media (min-width: ${r?`${o}px`:JT(o)}) {.mantine-hidden-from-${n} {display: none !important;}}`}),"");return(0,x.jsx)("style",{"data-mantine-styles":"classes",nonce:t?.(),dangerouslySetInnerHTML:{__html:n}})}function ZI(e){return Object.entries(e).map((([e,t])=>`${e}: ${t};`)).join("")}function XI(e,t){return(Array.isArray(e)?e:[e]).reduce(((e,t)=>`${t}{${e}}`),t)}function YI({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:o=!0}){if(!e.colors[t])return{};if("light"===n){const n=iN(e,"light"),i={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${n})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${9===n?8:n+1})`,[`--mantine-color-${r}-light`]:fN(e.colors[t][n],.1),[`--mantine-color-${r}-light-hover`]:fN(e.colors[t][n],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${n})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${n})`,[`--mantine-color-${r}-outline-hover`]:fN(e.colors[t][n],.05)};return o?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...i}:i}const i=iN(e,"dark"),a={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${i})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${9===i?8:i+1})`,[`--mantine-color-${r}-light`]:fN(e.colors[t][Math.max(0,i-2)],.15),[`--mantine-color-${r}-light-hover`]:fN(e.colors[t][Math.max(0,i-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(i-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(i-4,0)})`,[`--mantine-color-${r}-outline-hover`]:fN(e.colors[t][Math.max(i-4,0)],.05)};return o?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...a}:a}function QI(e,t,n){zN(t).forEach((r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]})))}WI.classes=UI,WI.displayName="@mantine/core/Flex";const eH=e=>{const t=iN(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:KT(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":mI(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":mI(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};QI(r.variables,e.breakpoints,"breakpoint"),QI(r.variables,e.spacing,"spacing"),QI(r.variables,e.fontSizes,"font-size"),QI(r.variables,e.lineHeights,"line-height"),QI(r.variables,e.shadows,"shadow"),QI(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach(((t,n)=>{r.variables[`--mantine-primary-color-${n}`]=`var(--mantine-color-${e.primaryColor}-${n})`})),zN(e.colors).forEach((t=>{const n=e.colors[t];if(function(e){return!!e&&"object"==typeof e&&"mantine-virtual-color"in e}(n))return Object.assign(r.light,YI({theme:e,name:n.name,color:n.light,colorScheme:"light",withColorValues:!0})),void Object.assign(r.dark,YI({theme:e,name:n.name,color:n.dark,colorScheme:"dark",withColorValues:!0}));n.forEach(((e,n)=>{r.variables[`--mantine-color-${t}-${n}`]=e})),Object.assign(r.light,YI({theme:e,color:t,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,YI({theme:e,color:t,colorScheme:"dark",withColorValues:!1}))}));const o=e.headings.sizes;return zN(o).forEach((t=>{r.variables[`--mantine-${t}-font-size`]=o[t].fontSize,r.variables[`--mantine-${t}-line-height`]=o[t].lineHeight,r.variables[`--mantine-${t}-font-weight`]=o[t].fontWeight||e.headings.fontWeight})),r},tH=eH(hN);function nH({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=wN(),r=SN(),o=function({theme:e,generator:t}){const n=eH(e),r=t?.(e);return r?vN(n,r):n}({theme:n,generator:xN().cssVariablesResolver}),i=":root"===e&&t,a=i?function(e){const t={variables:{},light:{},dark:{}};return zN(e.variables).forEach((n=>{tH.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])})),zN(e.light).forEach((n=>{tH.light[n]!==e.light[n]&&(t.light[n]=e.light[n])})),zN(e.dark).forEach((n=>{tH.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])})),t}(o):o,s=function(e,t){const n=ZI(e.variables),r=n?XI(t,n):"",o=ZI(e.dark),i=ZI(e.light);return`${r}${o?XI(":host"===t?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,o):""}${i?XI(":host"===t?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,i):""}`}(a,e);return s?(0,x.jsx)("style",{"data-mantine-styles":!0,nonce:r?.(),dangerouslySetInnerHTML:{__html:`${s}${i?"":(u=e,`\n  ${u}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }\n  ${u}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }\n`)}`}}):null;var u}function rH(e,t){const n="undefined"!=typeof window&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)")?.matches,r="auto"!==e?e:n?"dark":"light";t()?.setAttribute("data-mantine-color-scheme",r)}function oH({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:a=!0,withCssVariables:s=!0,cssVariablesSelector:u=":root",classNamesPrefix:l="mantine",colorSchemeManager:c=KI(),defaultColorScheme:d="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:p,forceColorScheme:h,stylesTransform:m,env:v}){const{colorScheme:g,setColorScheme:y,clearColorScheme:b}=function({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=(0,o.useRef)(null),[a,s]=(0,o.useState)((()=>e.get(t))),u=r||a,l=(0,o.useCallback)((t=>{r||(rH(t,n),s(t),e.set(t))}),[e.set,u,r]),c=(0,o.useCallback)((()=>{s(t),rH(t,n),e.clear()}),[e.clear,t]);return(0,o.useEffect)((()=>(e.subscribe(l),e.unsubscribe)),[e.subscribe,e.unsubscribe]),D_((()=>{rH(e.get(t),n)}),[]),(0,o.useEffect)((()=>{if(r)return rH(r,n),()=>{};void 0===r&&rH(a,n),"undefined"!=typeof window&&"matchMedia"in window&&(i.current=window.matchMedia("(prefers-color-scheme: dark)"));const e=e=>{"auto"===a&&rH(e.matches?"dark":"light",n)};return i.current?.addEventListener("change",e),()=>i.current?.removeEventListener("change",e)}),[a,r]),{colorScheme:u,setColorScheme:l,clearColorScheme:c}}({defaultColorScheme:d,forceColorScheme:h,manager:c,getRootElement:f});return function({respectReducedMotion:e,getRootElement:t}){D_((()=>{e&&t()?.setAttribute("data-respect-reduced-motion","true")}),[e])}({respectReducedMotion:e?.respectReducedMotion||!1,getRootElement:f}),(0,x.jsx)(EN.Provider,{value:{colorScheme:g,setColorScheme:y,clearColorScheme:b,getRootElement:f,classNamesPrefix:l,getStyleNonce:n,cssVariablesResolver:p,cssVariablesSelector:u,withStaticClasses:r,stylesTransform:m,env:v},children:(0,x.jsxs)(CN,{theme:e,children:[s&&(0,x.jsx)(nH,{cssVariablesSelector:u,deduplicateCssVariables:a}),i&&(0,x.jsx)(JI,{}),t]})})}function iH({onBlur:e,onFocus:t}={}){const n=(0,o.useRef)(null),[r,i]=(0,o.useState)(!1),a=(0,o.useRef)(!1),s=e=>{i(e),a.current=e},u=e=>{a.current||(s(!0),t?.(e))},l=t=>{a.current&&!function(e){return e.currentTarget instanceof HTMLElement&&e.relatedTarget instanceof HTMLElement&&e.currentTarget.contains(e.relatedTarget)}(t)&&(s(!1),e?.(t))};return(0,o.useEffect)((()=>{const e=n.current;if(e)return e.addEventListener("focusin",u),e.addEventListener("focusout",l),()=>{e?.removeEventListener("focusin",u),e?.removeEventListener("focusout",l)}}),[u,l]),{ref:n,focused:r}}nH.displayName="@mantine/CssVariables",function(){const e=console.error;console.error=(...t)=>{t.length>1&&"string"==typeof t[0]&&t[0].toLowerCase().includes("extra attributes from the server")&&"string"==typeof t[1]&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}(),oH.displayName="@mantine/core/MantineProvider";var aH=["className","children","mainTooltip","secondaryTooltip","icon","isSelected","isDisabled","onClick","label","variant"],sH=["className","text","icon","isSelected","mainTooltip","secondaryTooltip","onClick","onMouseEnter"],uH=["className","children"],lH=["className","children","headerText","selected","onFocus","onBlur","tabIndex"],cH=["className","children"],dH=["className","children"],fH=["authorInfo","timeString","edited"],pH=["className","showActions","authorInfo","timeString","edited","actions","children"],hH=["className","autoFocus","onFocus","onBlur","editor","editable"],mH=["className","name","label","variant","icon","value","autoFocus","placeholder","disabled","onKeyDown","onChange","onSubmit","autoComplete","rightSection"],vH=["children","onOpenChange","position","sub"],gH=["children","onOpenChange","position","sub"],yH=["className","children","icon","checked","subTrigger","onClick"],bH=["children","sub"],DH=["className","children","sub"],wH=["className"],CH=["className","children"],kH=["className","children","icon","onClick","onDragEnd","onDragStart","draggable","label"],EH=["className","tabs","defaultOpenTab","openTab","setOpenTab","loading"],xH=["className","children","onClick","label"],SH=["className","accept","value","placeholder","onChange"],AH=["className","children"],FH=["className","value","placeholder","onKeyDown","onChange"],OH=["opened","position","children"],MH=["children"],BH=["className","children","variant"],PH=["className","children"],TH=["className","children","icon","onClick","onDragEnd","onDragStart","draggable","label"],NH=["className","children","id"],jH=["className","children"],_H=["className","isSelected","onClick","item","id"],RH=["className","children"],LH=["className"],IH=["className","children","id","columns"],HH=["className","children","columns"],zH=["className","isSelected","onClick","item","id"],VH=["className","children","columns"],$H=["children","className","onMouseDown","onClick"],UH=["className","children","draggable","onDragStart","onDragEnd","style","label"],GH=["className","children","onMouseEnter","onMouseLeave","variant"],WH=["className","items","isDisabled"],qH=["className","theme"];function KH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function JH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KH(Object(n),!0).forEach((function(t){ZH(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KH(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ZH(e,t,n){return(t=function(e){var t=function(e){if("object"!=ez(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ez(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ez(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XH(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return YH(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?YH(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YH(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function QH(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ez(e){return ez="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ez(e)}var tz=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function e(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"--bn";for(var i in r){var a=i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),s="".concat(o,"-").concat(a);"object"!=ez(r[i])?("number"==typeof r[i]&&(r[i]="".concat(r[i],"px")),n?t.style.removeProperty(s):t.style.setProperty(s,r[i].toString())):e(r[i],s)}}(e),[]},nz=function(e,t){return tz(e,t)},rz={colors:{editor:{text:void 0,background:void 0},menu:{text:void 0,background:void 0},tooltip:{text:void 0,background:void 0},hovered:{text:void 0,background:void 0},selected:{text:void 0,background:void 0},disabled:{text:void 0,background:void 0},shadow:void 0,border:void 0,sideMenu:void 0,highlights:{gray:{text:void 0,background:void 0},brown:{text:void 0,background:void 0},red:{text:void 0,background:void 0},orange:{text:void 0,background:void 0},yellow:{text:void 0,background:void 0},green:{text:void 0,background:void 0},blue:{text:void 0,background:void 0},purple:{text:void 0,background:void 0},pink:{text:void 0,background:void 0}}},borderRadius:void 0,fontFamily:void 0},oz=function(e){return(0,x.jsxs)(pj,{gap:0,className:"bn-tooltip",children:[(0,x.jsx)(bj,{size:"sm",lineClamp:5,children:e.mainTooltip}),e.secondaryTooltip&&(0,x.jsx)(bj,{size:"xs",lineClamp:5,children:e.secondaryTooltip})]})},iz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.children,i=e.mainTooltip,a=e.secondaryTooltip,s=e.icon,u=e.isSelected,l=e.isDisabled,c=e.onClick,d=e.label,f=e.variant,p=QH(e,aH);Mw(p,!1);var h=XH((0,o.useState)(!1),2),m=h[0],v=h[1],g=r?(0,x.jsx)(Kj,JH(JH({"aria-label":d,className:n,onMouseDown:function(e){Tw()&&e.currentTarget.focus()},onClick:function(e){v(!0),null==c||c(e)},onPointerLeave:function(){return v(!1)},"aria-pressed":u,"data-selected":u||void 0,"data-test":i?i.slice(0,1).toLowerCase()+i.replace(/\s+/g,"").slice(1):void 0,size:"compact"===f?"compact-xs":"xs",disabled:l||!1,ref:t},p),{},{children:r})):(0,x.jsx)(o_,JH(JH({className:n,"aria-label":d,onMouseDown:function(e){Tw()&&e.currentTarget.focus()},onClick:function(e){v(!0),null==c||c(e)},onPointerLeave:function(){return v(!1)},"aria-pressed":u,"data-selected":u||void 0,"data-test":i?i.slice(0,1).toLowerCase()+i.replace(/\s+/g,"").slice(1):void 0,size:"compact"===f?20:30,disabled:l||!1,ref:t},p),{},{children:s}));return i?(0,x.jsx)(V_,{disabled:m,withinPortal:!1,label:(0,x.jsx)(oz,{mainTooltip:i,secondaryTooltip:a}),children:g}):g})),az=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.text,i=e.icon,a=e.isSelected,s=e.mainTooltip,u=e.secondaryTooltip,l=e.onClick,c=e.onMouseEnter;Mw(QH(e,sH),!1);var d=XH((0,o.useState)(!1),2),f=d[0],p=d[1],h=(0,x.jsxs)(Q_,{className:n,checked:!0===a,wrapperProps:{onMouseEnter:c,onMouseLeave:function(){return p(!1)},onClick:function(e){p(!0),null==l||l(e)}},variant:"light",icon:null,ref:t,children:[(0,x.jsx)("span",{children:i}),(0,x.jsx)("span",{children:r})]});return!s||f?h:(0,x.jsx)(V_,{refProp:"rootRef",withinPortal:!1,label:(0,x.jsx)(oz,{mainTooltip:s,secondaryTooltip:u}),children:h})})),sz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.children;return Mw(QH(e,uH)),(0,x.jsx)(rR,{className:n,ref:t,children:r})})),uz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.children,i=e.headerText,a=e.selected,s=e.onFocus,u=e.onBlur,l=e.tabIndex;Mw(QH(e,lH),!1);var c=(0,o.useRef)(null);return(0,o.useEffect)((function(){var e;a&&(null==(e=c.current)||e.scrollIntoView({behavior:"smooth",block:"center"}))}),[a]),(0,x.jsxs)(vR,{className:Pw(n,a?"selected":""),onFocus:s,onBlur:u,tabIndex:l,ref:qB([t,c]),children:[i&&(0,x.jsx)(bj,{className:"bn-header-text",children:i}),r]})})),lz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.children;return Mw(QH(e,cH),!1),(0,x.jsx)(vR.Section,{className:n,ref:t,children:r})})),cz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.children;return Mw(QH(e,dH),!1),(0,x.jsx)(DR,{className:n,label:(0,x.jsx)(bj,{children:r}),ref:t})})),dz=(0,o.forwardRef)((function(e,t){var n=e.authorInfo,r=e.timeString,o=e.edited;return Mw(QH(e,fH),!1),"loading"===n?(0,x.jsxs)(rR,{children:[(0,x.jsx)(ER,{height:24,width:24}),(0,x.jsx)("div",{children:(0,x.jsx)(ER,{height:12,width:100})})]}):(0,x.jsxs)(rR,{children:[(0,x.jsx)(_R,{src:n.avatarUrl,alt:n.username,radius:"xl",size:"sm",color:"initials"}),(0,x.jsxs)(bj,{fz:"sm",fw:"bold",children:[n.username,(0,x.jsxs)(bj,{fz:"xs",c:"dimmed",span:!0,ml:"xs",children:[r," ",o&&"(edited)"]})]})]})})),fz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.showActions,i=(e.authorInfo,e.timeString,e.edited,e.actions),a=e.children,s=QH(e,pH),u=function(){const[e,t]=(0,o.useState)(!1),n=(0,o.useRef)(null),r=(0,o.useCallback)((()=>t(!0)),[]),i=(0,o.useCallback)((()=>t(!1)),[]);return(0,o.useEffect)((()=>{const e=n.current;if(e)return e.addEventListener("mouseenter",r),e.addEventListener("mouseleave",i),()=>{e?.removeEventListener("mouseenter",r),e?.removeEventListener("mouseleave",i)}}),[n.current]),{ref:n,hovered:e}}(),l=u.hovered,c=u.ref,d=iH(),f=d.focused,p=d.ref,h=qB([t,c]);return Mw(s,!1),(0,x.jsxs)(rR,{pos:"relative",ref:h,className:n,children:[i&&(!0===r||void 0===r||"hover"===r&&l||f)?(0,x.jsx)(rR,{ref:p,style:{position:"absolute",right:0,top:0,zIndex:10},children:i}):null,(0,x.jsx)(dz,JH({},e)),a]})})),pz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.autoFocus,o=e.onFocus,i=e.onBlur,a=(e.editor,e.editable);return Mw(QH(e,hH),!1),(0,x.jsx)(aV,{autoFocus:r,className:n,editor:e.editor,sideMenu:!1,slashMenu:!1,tableHandles:!1,filePanel:!1,formattingToolbar:!1,editable:a,ref:t,onFocus:o,onBlur:i,children:(0,x.jsx)(kP,{formattingToolbar:hz})})})),hz=function(){var e=DP([]).filter((function(e){return"nestBlockButton"!==e.key&&"unnestBlockButton"!==e.key}));return(0,x.jsx)(wP,{blockTypeSelectItems:[],children:e})},mz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.name,o=e.label,i=e.variant,a=e.icon,s=e.value,u=e.autoFocus,l=e.placeholder,c=e.disabled,d=e.onKeyDown,f=e.onChange,p=e.onSubmit,h=e.autoComplete,m=e.rightSection;return Mw(QH(e,mH)),(0,x.jsx)(gL,{size:"xs",className:Pw(n||"","large"===i?"bn-mt-input-large":""),ref:t,name:r,label:o,leftSection:a,value:s,autoFocus:u,"data-autofocus":u?"true":void 0,rightSection:m,placeholder:l,disabled:c,onKeyDown:d,onChange:f,onSubmit:p,autoComplete:h})})),vz={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},gz=o.createContext&&o.createContext(vz),yz=["attr","size","title"];function bz(){return bz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bz.apply(this,arguments)}function Dz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dz(Object(n),!0).forEach((function(t){Cz(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dz(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cz(e,t,n){return t=function(e){var t=function(e,t){if("object"!=ez(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=ez(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==ez(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kz(e){return e&&e.map((function(e,t){return o.createElement(e.tag,wz({key:t},e.attr),kz(e.child))}))}function Ez(e){return function(t){return o.createElement(xz,bz({attr:wz({},e.attr)},t),kz(e.child))}}function xz(e){var t=function(t){var n,r=e.attr,i=e.size,a=e.title,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,yz),u=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),o.createElement("svg",bz({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,s,{className:n,style:wz(wz({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),a&&o.createElement("title",null,a),e.children)};return void 0!==gz?o.createElement(gz.Consumer,null,(function(e){return t(e)})):t(vz)}function Sz(e){return Ez({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function Az(e){return Ez({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(e)}var Fz,Oz,Mz=(0,o.createContext)(void 0),Bz=(0,o.forwardRef)((function(e,t){var n=e.children,r=e.onOpenChange,i=e.position;e.sub,Mw(QH(e,vH));var a=XH((0,o.useState)(!1),2),s=a[0],u=a[1],l=(0,o.useRef)(null),c=(0,o.useRef)(),d=(0,o.useCallback)((function(){c.current&&clearTimeout(c.current),c.current=setTimeout((function(){u(!1)}),250)}),[]),f=(0,o.useCallback)((function(){c.current&&clearTimeout(c.current),u(!0)}),[]);return(0,x.jsx)(Mz.Provider,{value:{onMenuMouseOver:f,onMenuMouseLeave:d},children:(0,x.jsx)(fI.Item,{className:"bn-menu-item bn-mt-sub-menu-item",ref:a_(t,l),onMouseOver:f,onMouseLeave:d,children:(0,x.jsx)(fI,{portalProps:{target:l.current?l.current.parentElement:void 0},middlewares:{flip:!0,shift:!0,inline:!1,size:!0},trigger:"hover",opened:s,onChange:r,position:i,children:n})})})})),Pz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.icon,i=e.checked,a=e.subTrigger,s=e.onClick,u=QH(e,yH);return Mw(u,!1),a?(0,x.jsxs)("div",JH(JH({onClick:function(e){e.preventDefault(),e.stopPropagation()},ref:t},u),{},{children:[r,(0,x.jsx)(Az,{size:15})]})):(0,x.jsx)(fI.Item,JH(JH({className:n,ref:t,leftSection:o,rightSection:i?(0,x.jsx)(U_,{size:10}):!1===i?(0,x.jsx)("div",{className:"bn-tick-space"}):null,onClick:s},u),{},{children:r}))})),Tz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.children;e.sub,Mw(QH(e,DH));var i=(0,o.useContext)(Mz);return(0,x.jsx)(fI.Dropdown,{className:n,ref:t,onMouseOver:null==i?void 0:i.onMenuMouseOver,onMouseLeave:null==i?void 0:i.onMenuMouseLeave,children:r})})),Nz=(0,o.forwardRef)((function(e,t){var n=e.className;return Mw(QH(e,wH)),(0,x.jsx)(fI.Divider,{className:n,ref:t})})),jz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.children;return Mw(QH(e,CH)),(0,x.jsx)(fI.Label,{className:n,ref:t,children:r})})),_z=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.icon,i=e.onClick,a=e.onDragEnd,s=e.onDragStart,u=e.draggable,l=e.label,c=QH(e,kH);return Mw(c,!1),o?(0,x.jsx)(o_,JH(JH({size:24,className:n,ref:t,onClick:i,onDragEnd:a,onDragStart:s,draggable:u,"aria-label":l},c),{},{children:o})):(0,x.jsx)(Kj,JH(JH({className:n,ref:t,onClick:i,onDragEnd:a,onDragStart:s,draggable:u,"aria-label":l},c),{},{children:r}))})),Rz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.tabs,o=e.defaultOpenTab,i=e.openTab,a=e.setOpenTab,s=e.loading;return Mw(QH(e,EH)),(0,x.jsx)(rR,{className:n,ref:t,children:(0,x.jsxs)(OI,{value:i,defaultValue:o,onChange:a,children:[s&&(0,x.jsx)(TI,{visible:s}),(0,x.jsx)(OI.List,{children:r.map((function(e){return(0,x.jsx)(OI.Tab,{"data-test":"".concat(e.name.toLowerCase(),"-tab"),value:e.name,children:e.name},e.name)}))}),r.map((function(e){return(0,x.jsx)(OI.Panel,{value:e.name,children:e.tabPanel},e.name)}))]})})})),Lz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.onClick,i=e.label,a=QH(e,xH);return Mw(a),(0,x.jsx)(Kj,JH(JH({size:"xs","aria-label":i,className:n,ref:t,onClick:o},a),{},{children:r}))})),Iz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.accept,o=e.value,i=e.placeholder,a=e.onChange,s=QH(e,SH);return Mw(s),(0,x.jsx)(LI,JH({size:"xs",className:n,ref:t,accept:r,value:o,placeholder:i,onChange:a},s))})),Hz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.children;return Mw(QH(e,AH)),(0,x.jsx)("div",{className:n,ref:t,children:r})})),zz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.value,o=e.placeholder,i=e.onKeyDown,a=e.onChange;return Mw(QH(e,FH)),(0,x.jsx)(gL,{size:"xs","data-test":"embed-input",className:n,ref:t,value:r,placeholder:o,onKeyDown:i,onChange:a})})),Vz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.children;return e.variant,Mw(QH(e,BH)),(0,x.jsx)($L,{className:n,ref:t,children:r})})),$z=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.children,o=QH(e,PH);return Mw(o,!1),(0,x.jsx)(rR,JH(JH({align:"center",gap:0,className:n,ref:t},o),{},{children:r}))})),Uz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.icon,i=e.onClick,a=e.onDragEnd,s=e.onDragStart,u=e.draggable,l=e.label,c=QH(e,TH);return Mw(c,!1),o?(0,x.jsx)(o_,JH(JH({size:24,className:n,ref:t,onClick:i,onDragEnd:a,onDragStart:s,draggable:u,"aria-label":l},c),{},{children:o})):(0,x.jsx)(Kj,JH(JH({className:n,ref:t,onClick:i,onDragEnd:a,onDragStart:s,draggable:u,"aria-label":l},c),{},{children:r}))})),Gz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.id;return Mw(QH(e,NH)),(0,x.jsx)(pj,{gap:0,className:n,ref:t,id:o,role:"listbox",children:r})})),Wz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.children;return Mw(QH(e,jH)),(0,x.jsx)(rR,{className:n,ref:t,children:(0,x.jsx)(rR,{className:"bn-mt-suggestion-menu-item-title",children:r})})})),qz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.isSelected,i=e.onClick,a=e.item,s=e.id;Mw(QH(e,_H));var u=(0,o.useRef)(null);return(0,o.useEffect)((function(){if(u.current&&r){var e=UT(u.current,document.querySelector(".bn-suggestion-menu, #ai-suggestion-menu"));"top"===e?u.current.scrollIntoView(!0):"bottom"===e&&u.current.scrollIntoView(!1)}}),[r]),(0,x.jsxs)(rR,{gap:0,className:n,ref:a_(t,u),id:s,role:"option",onMouseDown:function(e){return e.preventDefault()},onClick:i,"aria-selected":r||void 0,children:[a.icon&&(0,x.jsx)(rR,{className:"bn-mt-suggestion-menu-item-section","data-position":"left",children:a.icon}),(0,x.jsxs)(pj,{gap:0,className:"bn-mt-suggestion-menu-item-body",children:[(0,x.jsx)(bj,{className:"bn-mt-suggestion-menu-item-title",children:a.title}),(0,x.jsx)(bj,{className:"bn-mt-suggestion-menu-item-subtitle",children:a.subtext})]}),a.badge&&(0,x.jsx)(rR,{"data-position":"right",className:"bn-mt-suggestion-menu-item-section",children:(0,x.jsx)(VI,{size:"xs",children:a.badge})})]})})),Kz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.children;return Mw(QH(e,RH)),(0,x.jsx)(rR,{className:n,ref:t,children:r})})),Jz=(0,o.forwardRef)((function(e,t){var n=e.className;return Mw(QH(e,LH)),(0,x.jsx)(Aj,{className:n,type:"dots",size:16,ref:t})})),Zz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.id,i=e.columns;return Mw(QH(e,IH)),(0,x.jsx)("div",{className:n,style:{gridTemplateColumns:"repeat(".concat(i,", 1fr)")},ref:t,id:o,role:"grid",children:r})})),Xz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.columns;return Mw(QH(e,HH)),(0,x.jsx)(rR,{className:n,style:{gridColumn:"1 / ".concat(o+1)},ref:t,children:(0,x.jsx)(rR,{className:"bn-mt-suggestion-menu-item-title",children:r})})})),Yz=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.isSelected,i=e.onClick,a=e.item,s=e.id;Mw(QH(e,zH));var u=(0,o.useRef)(null);return(0,o.useEffect)((function(){if(u.current&&r){var e=UT(u.current,document.querySelector(".bn-grid-suggestion-menu"));"top"===e?u.current.scrollIntoView(!0):"bottom"===e&&u.current.scrollIntoView(!1)}}),[r]),(0,x.jsx)("div",{className:n,ref:a_(t,u),id:s,role:"option",onClick:i,"aria-selected":r||void 0,children:a.icon})})),Qz=(0,o.forwardRef)((function(e,t){var n=e.className,r=(e.children,e.columns);return Mw(QH(e,VH)),(0,x.jsx)(Aj,{className:n,style:{gridColumn:"1 / ".concat(r+1)},type:"dots",ref:t})})),eV=(0,o.forwardRef)((function(e,t){var n=e.children,r=e.className,o=e.onMouseDown,i=e.onClick,a=QH(e,$H);return Mw(a,!1),(0,x.jsx)(Kj,JH(JH({className:r,ref:t,onMouseDown:o,onClick:i},a),{},{children:n}))})),tV=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.draggable,i=e.onDragStart,a=e.onDragEnd,s=e.style,u=e.label,l=QH(e,UH);return Mw(l,!1),(0,x.jsx)(Kj,JH(JH({className:n,ref:t,"aria-label":u,draggable:o,onDragStart:i,onDragEnd:a,style:s},l),{},{children:r}))})),nV=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.onMouseEnter,i=e.onMouseLeave,a=e.variant;Mw(QH(e,GH));var s=iH(),u=a_(t,s.ref,jL(s.focused));return(0,x.jsx)(WI,{className:n,ref:u,role:"toolbar",onMouseEnter:o,onMouseLeave:i,gap:"action-toolbar"===a?2:void 0,children:r})})),rV=(0,o.forwardRef)((function(e,t){var n=e.className,r=e.items,o=e.isDisabled;Mw(QH(e,WH));var i=r.filter((function(e){return e.isSelected}))[0];return i?(0,x.jsxs)(fI,{withinPortal:!1,transitionProps:{exitDuration:0},disabled:o,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},children:[(0,x.jsx)(fI.Target,{children:(0,x.jsx)(Kj,{onMouseDown:function(e){Tw()&&e.currentTarget.focus()},leftSection:i.icon,rightSection:(0,x.jsx)(Sz,{}),size:"xs",variant:"subtle",disabled:o,children:i.text})}),(0,x.jsx)(fI.Dropdown,{className:n,ref:t,children:r.map((function(e){return(0,x.jsx)(fI.Item,{onClick:e.onClick,leftSection:e.icon,rightSection:e.isSelected?(0,x.jsx)(U_,{size:10,className:"bn-tick-icon"}):(0,x.jsx)("div",{className:"bn-tick-space"}),disabled:e.isDisabled,children:e.text},e.text)}))})]}):null})),oV={FormattingToolbar:{Root:nV,Button:iz,Select:rV},FilePanel:{Root:Rz,Button:Lz,FileInput:Iz,TabPanel:Hz,TextInput:zz},GridSuggestionMenu:{Root:Zz,Item:Yz,EmptyItem:Xz,Loader:Qz},LinkToolbar:{Root:nV,Button:iz,Select:rV},SideMenu:{Root:$z,Button:Uz},SuggestionMenu:{Root:Gz,Item:qz,EmptyItem:Wz,Label:Kz,Loader:Jz},TableHandle:{Root:tV,ExtendButton:eV},Generic:{Badge:{Root:az,Group:sz},Form:{Root:function(e){return(0,x.jsx)("div",{children:e.children})},TextInput:mz},Menu:{Root:function(e){var t=e.children,n=e.onOpenChange,r=e.position,o=e.sub;return Mw(QH(e,gH)),o?(0,x.jsx)(Bz,JH({},e)):(0,x.jsx)(fI,{withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onChange:n,position:r,children:t})},Trigger:function(e){var t=e.children;return e.sub,Mw(QH(e,bH)),(0,x.jsx)(fI.Target,{children:t})},Dropdown:Tz,Divider:Nz,Label:jz,Item:Pz,Button:_z},Popover:{Root:function(e){var t=e.opened,n=e.position,r=e.children;return Mw(QH(e,OH)),(0,x.jsx)(JL,{withinPortal:!1,opened:t,position:n,children:r})},Trigger:function(e){var t=e.children;return Mw(QH(e,MH)),(0,x.jsx)(GL,{children:t})},Content:Vz},Toolbar:{Root:nV,Button:iz,Select:rV}},Comments:{Comment:fz,Editor:pz,Card:uz,CardSection:lz,ExpandSectionsPrompt:cz}},iV={activeClassName:""},aV=function(e){var t=e.className,n=e.theme,r=QH(e,qH),i=SM(),a=yT(),s=(null==i?void 0:i.colorSchemePreference)||a,u=(0,o.useCallback)((function(e){if(e&&(function(e){tz(rz,e,!0)}(e),"object"==ez(n)))return"light"in n&&"dark"in n?void nz(n["dark"===s?"dark":"light"],e):void nz(n,e)}),[s,n]),l="string"==typeof n?n:"no-preference"!==s?s:"light";return(0,x.jsx)(BM.Provider,{value:oV,children:(0,x.jsx)(oH,{theme:iV,cssVariablesSelector:".bn-mantine",getRootElement:function(){},children:(0,x.jsx)(xT,JH(JH({"data-mantine-color-scheme":l,className:Pw("bn-mantine",t||""),theme:"object"==ez(n)?void 0:n},r),{},{ref:u}))})})};class sV extends Error{constructor(e){super(e),this.name="ShikiError"}}function uV(e,t,n){return t=cV(t),function(e,t){if(t&&("object"==kV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,lV()?Reflect.construct(t,n||[],cV(e).constructor):t.apply(e,n))}function lV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lV=function(){return!!e})()}function cV(e){return cV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cV(e)}function dV(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fV(e,t)}function fV(e,t){return fV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fV(e,t)}function pV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pV(Object(n),!0).forEach((function(t){yV(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pV(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mV(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=vV(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function vV(e,t){if(e){if("string"==typeof e)return gV(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gV(e,t):void 0}}function gV(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function yV(e,t,n){return(t=CV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,CV(r.key),r)}}function wV(e,t,n){return t&&DV(e.prototype,t),n&&DV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function CV(e){var t=function(e){if("object"!=kV(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=kV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==kV(t)?t:t+""}function kV(e){return kV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kV(e)}function EV(e){return Array.isArray(e)?function(e){for(var t=[],n=0,r=e.length;n<r;n++)t[n]=EV(e[n]);return t}(e):e instanceof RegExp?e:"object"===kV(e)?function(e){var t={};for(var n in e)t[n]=EV(e[n]);return t}(e):e}function xV(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach((function(t){for(var n in t)e[n]=t[n]})),e}function SV(e){var t=~e.lastIndexOf("/")||~e.lastIndexOf("\\");return 0===t?e:~t==e.length-1?SV(e.substring(0,e.length-1)):e.substr(1+~t)}var AV=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,FV=function(){return wV((function e(){bV(this,e)}),null,[{key:"hasCaptures",value:function(e){return null!==e&&(AV.lastIndex=0,AV.test(e))}},{key:"replaceCaptures",value:function(e,t,n){return e.replace(AV,(function(e,r,o,i){var a=n[parseInt(r||o,10)];if(!a)return e;for(var s=t.substring(a.start,a.end);"."===s[0];)s=s.substring(1);switch(i){case"downcase":return s.toLowerCase();case"upcase":return s.toUpperCase();default:return s}}))}}])}();function OV(e,t){return e<t?-1:e>t?1:0}function MV(e,t){if(null===e&&null===t)return 0;if(!e)return-1;if(!t)return 1;var n=e.length,r=t.length;if(n===r){for(var o=0;o<n;o++){var i=OV(e[o],t[o]);if(0!==i)return i}return 0}return n-r}function BV(e){return!!(/^#[0-9a-f]{6}$/i.test(e)||/^#[0-9a-f]{8}$/i.test(e)||/^#[0-9a-f]{3}$/i.test(e)||/^#[0-9a-f]{4}$/i.test(e))}function PV(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var TV=function(){return wV((function e(t){bV(this,e),yV(this,"cache",new Map),this.fn=t}),[{key:"get",value:function(e){if(this.cache.has(e))return this.cache.get(e);var t=this.fn(e);return this.cache.set(e,t),t}}])}(),NV=function(){return wV((function e(t,n,r){var o=this;bV(this,e),yV(this,"_cachedMatchRoot",new TV((function(e){return o._root.match(e)}))),this._colorMap=t,this._defaults=n,this._root=r}),[{key:"getColorMap",value:function(){return this._colorMap.getColorMap()}},{key:"getDefaults",value:function(){return this._defaults}},{key:"match",value:function(e){if(null===e)return this._defaults;var t=e.scopeName,n=this._cachedMatchRoot.get(t).find((function(t){return function(e,t){if(0===t.length)return!0;for(var n=0;n<t.length;n++){var r=t[n],o=!1;if(">"===r){if(n===t.length-1)return!1;r=t[++n],o=!0}for(;e&&!_V(e.scopeName,r);){if(o)return!1;e=e.parent}if(!e)return!1;e=e.parent}return!0}(e.parent,t.parentScopes)}));return n?new RV(n.fontStyle,n.foreground,n.background):null}}],[{key:"createFromRawTheme",value:function(e,t){return this.createFromParsedTheme(function(e){if(!e)return[];if(!e.settings||!Array.isArray(e.settings))return[];for(var t=e.settings,n=[],r=0,o=0,i=t.length;o<i;o++){var a=t[o];if(a.settings){var s=void 0;if("string"==typeof a.scope){var u=a.scope;s=(u=(u=u.replace(/^[,]+/,"")).replace(/[,]+$/,"")).split(",")}else s=Array.isArray(a.scope)?a.scope:[""];var l=-1;if("string"==typeof a.settings.fontStyle){l=0;for(var c=a.settings.fontStyle.split(" "),d=0,f=c.length;d<f;d++)switch(c[d]){case"italic":l|=1;break;case"bold":l|=2;break;case"underline":l|=4;break;case"strikethrough":l|=8}}var p=null;"string"==typeof a.settings.foreground&&BV(a.settings.foreground)&&(p=a.settings.foreground);var h=null;"string"==typeof a.settings.background&&BV(a.settings.background)&&(h=a.settings.background);for(var m=0,v=s.length;m<v;m++){var g=s[m].trim().split(" "),y=g[g.length-1],b=null;g.length>1&&(b=g.slice(0,g.length-1)).reverse(),n[r++]=new LV(y,b,o,l,p,h)}}}return n}(e),t)}},{key:"createFromParsedTheme",value:function(e,t){return function(e,t){e.sort((function(e,t){var n=OV(e.scope,t.scope);return 0!==n||0!==(n=MV(e.parentScopes,t.parentScopes))?n:e.index-t.index}));for(var n=0,r="#000000",o="#ffffff";e.length>=1&&""===e[0].scope;){var i=e.shift();-1!==i.fontStyle&&(n=i.fontStyle),null!==i.foreground&&(r=i.foreground),null!==i.background&&(o=i.background)}for(var a=new HV(t),s=new RV(n,a.getId(r),a.getId(o)),u=new $V(new VV(0,null,-1,0,0),[]),l=0,c=e.length;l<c;l++){var d=e[l];u.insert(0,d.scope,d.parentScopes,d.fontStyle,a.getId(d.foreground),a.getId(d.background))}return new NV(a,s,u)}(e,t)}}])}(),jV=function(){function e(t,n){bV(this,e),this.parent=t,this.scopeName=n}return wV(e,[{key:"push",value:function(t){return new e(this,t)}},{key:"getSegments",value:function(){for(var e=this,t=[];e;)t.push(e.scopeName),e=e.parent;return t.reverse(),t}},{key:"toString",value:function(){return this.getSegments().join(" ")}},{key:"extends",value:function(e){return this===e||null!==this.parent&&this.parent.extends(e)}},{key:"getExtensionIfDefined",value:function(e){for(var t=[],n=this;n&&n!==e;)t.push(n.scopeName),n=n.parent;return n===e?t.reverse():void 0}}],[{key:"push",value:function(t,n){var r,o=mV(n);try{for(o.s();!(r=o.n()).done;)t=new e(t,r.value)}catch(e){o.e(e)}finally{o.f()}return t}},{key:"from",value:function(){for(var t=null,n=0;n<arguments.length;n++)t=new e(t,n<0||arguments.length<=n?void 0:arguments[n]);return t}}])}();function _V(e,t){return t===e||e.startsWith(t)&&"."===e[t.length]}var RV=wV((function e(t,n,r){bV(this,e),this.fontStyle=t,this.foregroundId=n,this.backgroundId=r})),LV=wV((function e(t,n,r,o,i,a){bV(this,e),this.scope=t,this.parentScopes=n,this.index=r,this.fontStyle=o,this.foreground=i,this.background=a})),IV=function(e){return e[e.NotSet=-1]="NotSet",e[e.None=0]="None",e[e.Italic=1]="Italic",e[e.Bold=2]="Bold",e[e.Underline=4]="Underline",e[e.Strikethrough=8]="Strikethrough",e}(IV||{});var HV=function(){return wV((function e(t){if(bV(this,e),yV(this,"_isFrozen",void 0),yV(this,"_lastColorId",void 0),yV(this,"_id2color",void 0),yV(this,"_color2id",void 0),this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(var n=0,r=t.length;n<r;n++)this._color2id[t[n]]=n,this._id2color[n]=t[n]}else this._isFrozen=!1}),[{key:"getId",value:function(e){if(null===e)return 0;e=e.toUpperCase();var t=this._color2id[e];if(t)return t;if(this._isFrozen)throw new Error("Missing color in color map - ".concat(e));return t=++this._lastColorId,this._color2id[e]=t,this._id2color[t]=e,t}},{key:"getColorMap",value:function(){return this._id2color.slice(0)}}])}(),zV=Object.freeze([]),VV=function(){function e(t,n,r,o,i){bV(this,e),yV(this,"scopeDepth",void 0),yV(this,"parentScopes",void 0),yV(this,"fontStyle",void 0),yV(this,"foreground",void 0),yV(this,"background",void 0),this.scopeDepth=t,this.parentScopes=n||zV,this.fontStyle=r,this.foreground=o,this.background=i}return wV(e,[{key:"clone",value:function(){return new e(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}},{key:"acceptOverwrite",value:function(e,t,n,r){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,-1!==t&&(this.fontStyle=t),0!==n&&(this.foreground=n),0!==r&&(this.background=r)}}],[{key:"cloneArr",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++)t[n]=e[n].clone();return t}}])}(),$V=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};bV(this,e),yV(this,"_rulesWithParentScopes",void 0),this._mainRule=t,this._children=r,this._rulesWithParentScopes=n}return wV(e,[{key:"match",value:function(t){if(""!==t){var n,r,o=t.indexOf(".");if(-1===o?(n=t,r=""):(n=t.substring(0,o),r=t.substring(o+1)),this._children.hasOwnProperty(n))return this._children[n].match(r)}var i=this._rulesWithParentScopes.concat(this._mainRule);return i.sort(e._cmpBySpecificity),i}},{key:"insert",value:function(t,n,r,o,i,a){if(""!==n){var s,u,l,c=n.indexOf(".");-1===c?(s=n,u=""):(s=n.substring(0,c),u=n.substring(c+1)),this._children.hasOwnProperty(s)?l=this._children[s]:(l=new e(this._mainRule.clone(),VV.cloneArr(this._rulesWithParentScopes)),this._children[s]=l),l.insert(t+1,u,r,o,i,a)}else this._doInsertHere(t,r,o,i,a)}},{key:"_doInsertHere",value:function(e,t,n,r,o){if(null!==t){for(var i=0,a=this._rulesWithParentScopes.length;i<a;i++){var s=this._rulesWithParentScopes[i];if(0===MV(s.parentScopes,t))return void s.acceptOverwrite(e,n,r,o)}-1===n&&(n=this._mainRule.fontStyle),0===r&&(r=this._mainRule.foreground),0===o&&(o=this._mainRule.background),this._rulesWithParentScopes.push(new VV(e,t,n,r,o))}else this._mainRule.acceptOverwrite(e,n,r,o)}}],[{key:"_cmpBySpecificity",value:function(e,t){if(e.scopeDepth!==t.scopeDepth)return t.scopeDepth-e.scopeDepth;for(var n=0,r=0;">"===e.parentScopes[n]&&n++,">"===t.parentScopes[r]&&r++,!(n>=e.parentScopes.length||r>=t.parentScopes.length);){var o=t.parentScopes[r].length-e.parentScopes[n].length;if(0!==o)return o;n++,r++}return t.parentScopes.length-e.parentScopes.length}}])}(),UV=function(){function e(){bV(this,e)}return wV(e,null,[{key:"toBinaryStr",value:function(e){return e.toString(2).padStart(32,"0")}},{key:"print",value:function(t){var n=e.getLanguageId(t),r=e.getTokenType(t),o=e.getFontStyle(t),i=e.getForeground(t),a=e.getBackground(t);console.log({languageId:n,tokenType:r,fontStyle:o,foreground:i,background:a})}},{key:"getLanguageId",value:function(e){return(255&e)>>>0}},{key:"getTokenType",value:function(e){return(768&e)>>>8}},{key:"containsBalancedBrackets",value:function(e){return!!(1024&e)}},{key:"getFontStyle",value:function(e){return(30720&e)>>>11}},{key:"getForeground",value:function(e){return(16744448&e)>>>15}},{key:"getBackground",value:function(e){return(4278190080&e)>>>24}},{key:"set",value:function(t,n,r,o,i,a,s){var u=e.getLanguageId(t),l=e.getTokenType(t),c=e.containsBalancedBrackets(t)?1:0,d=e.getFontStyle(t),f=e.getForeground(t),p=e.getBackground(t);return 0!==n&&(u=n),8!==r&&(l=r),null!==o&&(c=o?1:0),-1!==i&&(d=i),0!==a&&(f=a),0!==s&&(p=s),(u|l<<8|c<<10|d<<11|f<<15|p<<24)>>>0}}])}();function GV(e,t){for(var n=[],r=function(e){var t=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=t.exec(e);return{next:function(){if(!n)return null;var r=n[0];return n=t.exec(e),r}}}(e),o=r.next();null!==o;){var i=0;if(2===o.length&&":"===o.charAt(1)){switch(o.charAt(0)){case"R":i=1;break;case"L":i=-1;break;default:console.log("Unknown priority ".concat(o," in scope selector"))}o=r.next()}var a=u();if(n.push({matcher:a,priority:i}),","!==o)break;o=r.next()}return n;function s(){if("-"===o){o=r.next();var e=s();return function(t){return!!e&&!e(t)}}if("("===o){o=r.next();var n=function(){for(var e=[],t=u();t&&(e.push(t),"|"===o||","===o);){do{o=r.next()}while("|"===o||","===o);t=u()}return function(t){return e.some((function(e){return e(t)}))}}();return")"===o&&(o=r.next()),n}if(WV(o)){var i=[];do{i.push(o),o=r.next()}while(WV(o));return function(e){return t(i,e)}}return null}function u(){for(var e=[],t=s();t;)e.push(t),t=s();return function(t){return e.every((function(e){return e(t)}))}}}function WV(e){return!!e&&!!e.match(/[\w\.:]+/)}function qV(e){"function"==typeof e.dispose&&e.dispose()}var KV=function(){return wV((function e(t){bV(this,e),this.scopeName=t}),[{key:"toKey",value:function(){return this.scopeName}}])}(),JV=function(){return wV((function e(t,n){bV(this,e),this.scopeName=t,this.ruleName=n}),[{key:"toKey",value:function(){return"".concat(this.scopeName,"#").concat(this.ruleName)}}])}(),ZV=function(){return wV((function e(){bV(this,e),yV(this,"_references",[]),yV(this,"_seenReferenceKeys",new Set),yV(this,"visitedRule",new Set)}),[{key:"references",get:function(){return this._references}},{key:"add",value:function(e){var t=e.toKey();this._seenReferenceKeys.has(t)||(this._seenReferenceKeys.add(t),this._references.push(e))}}])}(),XV=function(){return wV((function e(t,n){bV(this,e),yV(this,"seenFullScopeRequests",new Set),yV(this,"seenPartialScopeRequests",new Set),yV(this,"Q",void 0),this.repo=t,this.initialScopeName=n,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new KV(this.initialScopeName)]}),[{key:"processQueue",value:function(){var e=this.Q;this.Q=[];var t,n=new ZV,r=mV(e);try{for(r.s();!(t=r.n()).done;)YV(t.value,this.initialScopeName,this.repo,n)}catch(e){r.e(e)}finally{r.f()}var o,i=mV(n.references);try{for(i.s();!(o=i.n()).done;){var a=o.value;if(a instanceof KV){if(this.seenFullScopeRequests.has(a.scopeName))continue;this.seenFullScopeRequests.add(a.scopeName),this.Q.push(a)}else{if(this.seenFullScopeRequests.has(a.scopeName))continue;if(this.seenPartialScopeRequests.has(a.toKey()))continue;this.seenPartialScopeRequests.add(a.toKey()),this.Q.push(a)}}}catch(e){i.e(e)}finally{i.f()}}}])}();function YV(e,t,n,r){var o=n.lookup(e.scopeName);if(o){var i=n.lookup(t);e instanceof KV?e$({baseGrammar:i,selfGrammar:o},r):QV(e.ruleName,{baseGrammar:i,selfGrammar:o,repository:o.repository},r);var a=n.injections(e.scopeName);if(a){var s,u=mV(a);try{for(u.s();!(s=u.n()).done;){var l=s.value;r.add(new KV(l))}}catch(e){u.e(e)}finally{u.f()}}}else if(e.scopeName===t)throw new Error("No grammar provided for <".concat(t,">"))}function QV(e,t,n){t.repository&&t.repository[e]&&t$([t.repository[e]],t,n)}function e$(e,t){e.selfGrammar.patterns&&Array.isArray(e.selfGrammar.patterns)&&t$(e.selfGrammar.patterns,hV(hV({},e),{},{repository:e.selfGrammar.repository}),t),e.selfGrammar.injections&&t$(Object.values(e.selfGrammar.injections),hV(hV({},e),{},{repository:e.selfGrammar.repository}),t)}function t$(e,t,n){var r,o=mV(e);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(!n.visitedRule.has(i)){n.visitedRule.add(i);var a=i.repository?xV({},t.repository,i.repository):t.repository;Array.isArray(i.patterns)&&t$(i.patterns,hV(hV({},t),{},{repository:a}),n);var s=i.include;if(s){var u=s$(s);switch(u.kind){case 0:e$(hV(hV({},t),{},{selfGrammar:t.baseGrammar}),n);break;case 1:e$(t,n);break;case 2:QV(u.ruleName,hV(hV({},t),{},{repository:a}),n);break;case 3:case 4:var l=u.scopeName===t.selfGrammar.scopeName?t.selfGrammar:u.scopeName===t.baseGrammar.scopeName?t.baseGrammar:void 0;if(l){var c={baseGrammar:t.baseGrammar,selfGrammar:l,repository:a};4===u.kind?QV(u.ruleName,c,n):e$(c,n)}else 4===u.kind?n.add(new JV(u.scopeName,u.ruleName)):n.add(new KV(u.scopeName))}}}}}catch(e){o.e(e)}finally{o.f()}}var n$=wV((function e(){bV(this,e),yV(this,"kind",0)})),r$=wV((function e(){bV(this,e),yV(this,"kind",1)})),o$=wV((function e(t){bV(this,e),yV(this,"kind",2),this.ruleName=t})),i$=wV((function e(t){bV(this,e),yV(this,"kind",3),this.scopeName=t})),a$=wV((function e(t,n){bV(this,e),yV(this,"kind",4),this.scopeName=t,this.ruleName=n}));function s$(e){if("$base"===e)return new n$;if("$self"===e)return new r$;var t=e.indexOf("#");if(-1===t)return new i$(e);if(0===t)return new o$(e.substring(1));var n=e.substring(0,t),r=e.substring(t+1);return new a$(n,r)}var u$=/\\(\d+)/,l$=/\\(\d+)/g;Symbol("RuleId");var c$=function(){return wV((function e(t,n,r,o){bV(this,e),yV(this,"$location",void 0),yV(this,"id",void 0),yV(this,"_nameIsCapturing",void 0),yV(this,"_name",void 0),yV(this,"_contentNameIsCapturing",void 0),yV(this,"_contentName",void 0),this.$location=t,this.id=n,this._name=r||null,this._nameIsCapturing=FV.hasCaptures(this._name),this._contentName=o||null,this._contentNameIsCapturing=FV.hasCaptures(this._contentName)}),[{key:"debugName",get:function(){var e=this.$location?"".concat(SV(this.$location.filename),":").concat(this.$location.line):"unknown";return"".concat(this.constructor.name,"#").concat(this.id," @ ").concat(e)}},{key:"getName",value:function(e,t){return this._nameIsCapturing&&null!==this._name&&null!==e&&null!==t?FV.replaceCaptures(this._name,e,t):this._name}},{key:"getContentName",value:function(e,t){return this._contentNameIsCapturing&&null!==this._contentName?FV.replaceCaptures(this._contentName,e,t):this._contentName}}])}(),d$=function(e){function t(e,n,r,o,i){var a;return bV(this,t),yV(a=uV(this,t,[e,n,r,o]),"retokenizeCapturedWithRuleId",void 0),a.retokenizeCapturedWithRuleId=i,a}return dV(t,e),wV(t,[{key:"dispose",value:function(){}},{key:"collectPatterns",value:function(e,t){throw new Error("Not supported!")}},{key:"compile",value:function(e,t){throw new Error("Not supported!")}},{key:"compileAG",value:function(e,t,n,r){throw new Error("Not supported!")}}])}(c$),f$=function(e){function t(e,n,r,o,i){var a;return bV(this,t),yV(a=uV(this,t,[e,n,r,null]),"_match",void 0),yV(a,"captures",void 0),yV(a,"_cachedCompiledPatterns",void 0),a._match=new g$(o,a.id),a.captures=i,a._cachedCompiledPatterns=null,a}return dV(t,e),wV(t,[{key:"dispose",value:function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}},{key:"debugMatchRegExp",get:function(){return"".concat(this._match.source)}},{key:"collectPatterns",value:function(e,t){t.push(this._match)}},{key:"compile",value:function(e,t){return this._getCachedCompiledPatterns(e).compile(e)}},{key:"compileAG",value:function(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}},{key:"_getCachedCompiledPatterns",value:function(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new y$,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}])}(c$),p$=function(e){function t(e,n,r,o,i){var a;return bV(this,t),yV(a=uV(this,t,[e,n,r,o]),"hasMissingPatterns",void 0),yV(a,"patterns",void 0),yV(a,"_cachedCompiledPatterns",void 0),a.patterns=i.patterns,a.hasMissingPatterns=i.hasMissingPatterns,a._cachedCompiledPatterns=null,a}return dV(t,e),wV(t,[{key:"dispose",value:function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}},{key:"collectPatterns",value:function(e,t){var n,r=mV(this.patterns);try{for(r.s();!(n=r.n()).done;){var o=n.value;e.getRule(o).collectPatterns(e,t)}}catch(e){r.e(e)}finally{r.f()}}},{key:"compile",value:function(e,t){return this._getCachedCompiledPatterns(e).compile(e)}},{key:"compileAG",value:function(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}},{key:"_getCachedCompiledPatterns",value:function(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new y$,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}])}(c$),h$=function(e){function t(e,n,r,o,i,a,s,u,l,c){var d;return bV(this,t),yV(d=uV(this,t,[e,n,r,o]),"_begin",void 0),yV(d,"beginCaptures",void 0),yV(d,"_end",void 0),yV(d,"endHasBackReferences",void 0),yV(d,"endCaptures",void 0),yV(d,"applyEndPatternLast",void 0),yV(d,"hasMissingPatterns",void 0),yV(d,"patterns",void 0),yV(d,"_cachedCompiledPatterns",void 0),d._begin=new g$(i,d.id),d.beginCaptures=a,d._end=new g$(s||"￿",-1),d.endHasBackReferences=d._end.hasBackReferences,d.endCaptures=u,d.applyEndPatternLast=l||!1,d.patterns=c.patterns,d.hasMissingPatterns=c.hasMissingPatterns,d._cachedCompiledPatterns=null,d}return dV(t,e),wV(t,[{key:"dispose",value:function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}},{key:"debugBeginRegExp",get:function(){return"".concat(this._begin.source)}},{key:"debugEndRegExp",get:function(){return"".concat(this._end.source)}},{key:"getEndWithResolvedBackReferences",value:function(e,t){return this._end.resolveBackReferences(e,t)}},{key:"collectPatterns",value:function(e,t){t.push(this._begin)}},{key:"compile",value:function(e,t){return this._getCachedCompiledPatterns(e,t).compile(e)}},{key:"compileAG",value:function(e,t,n,r){return this._getCachedCompiledPatterns(e,t).compileAG(e,n,r)}},{key:"_getCachedCompiledPatterns",value:function(e,t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new y$;var n,r=mV(this.patterns);try{for(r.s();!(n=r.n()).done;){var o=n.value;e.getRule(o).collectPatterns(e,this._cachedCompiledPatterns)}}catch(e){r.e(e)}finally{r.f()}this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,t):this._cachedCompiledPatterns.setSource(0,t)),this._cachedCompiledPatterns}}])}(c$),m$=function(e){function t(e,n,r,o,i,a,s,u,l){var c;return bV(this,t),yV(c=uV(this,t,[e,n,r,o]),"_begin",void 0),yV(c,"beginCaptures",void 0),yV(c,"whileCaptures",void 0),yV(c,"_while",void 0),yV(c,"whileHasBackReferences",void 0),yV(c,"hasMissingPatterns",void 0),yV(c,"patterns",void 0),yV(c,"_cachedCompiledPatterns",void 0),yV(c,"_cachedCompiledWhilePatterns",void 0),c._begin=new g$(i,c.id),c.beginCaptures=a,c.whileCaptures=u,c._while=new g$(s,-2),c.whileHasBackReferences=c._while.hasBackReferences,c.patterns=l.patterns,c.hasMissingPatterns=l.hasMissingPatterns,c._cachedCompiledPatterns=null,c._cachedCompiledWhilePatterns=null,c}return dV(t,e),wV(t,[{key:"dispose",value:function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}},{key:"debugBeginRegExp",get:function(){return"".concat(this._begin.source)}},{key:"debugWhileRegExp",get:function(){return"".concat(this._while.source)}},{key:"getWhileWithResolvedBackReferences",value:function(e,t){return this._while.resolveBackReferences(e,t)}},{key:"collectPatterns",value:function(e,t){t.push(this._begin)}},{key:"compile",value:function(e,t){return this._getCachedCompiledPatterns(e).compile(e)}},{key:"compileAG",value:function(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}},{key:"_getCachedCompiledPatterns",value:function(e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new y$;var t,n=mV(this.patterns);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.getRule(r).collectPatterns(e,this._cachedCompiledPatterns)}}catch(e){n.e(e)}finally{n.f()}}return this._cachedCompiledPatterns}},{key:"compileWhile",value:function(e,t){return this._getCachedCompiledWhilePatterns(e,t).compile(e)}},{key:"compileWhileAG",value:function(e,t,n,r){return this._getCachedCompiledWhilePatterns(e,t).compileAG(e,n,r)}},{key:"_getCachedCompiledWhilePatterns",value:function(e,t){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new y$,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,t||"￿"),this._cachedCompiledWhilePatterns}}])}(c$),v$=function(){function e(){bV(this,e)}return wV(e,null,[{key:"createCaptureRule",value:function(e,t,n,r,o){return e.registerRule((function(e){return new d$(t,e,n,r,o)}))}},{key:"getCompiledRuleId",value:function(t,n,r){return t.id||n.registerRule((function(o){if(t.id=o,t.match)return new f$(t.$vscodeTextmateLocation,t.id,t.name,t.match,e._compileCaptures(t.captures,n,r));if(void 0===t.begin){t.repository&&(r=xV({},r,t.repository));var i=t.patterns;return void 0===i&&t.include&&(i=[{include:t.include}]),new p$(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,e._compilePatterns(i,n,r))}return t.while?new m$(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,e._compileCaptures(t.beginCaptures||t.captures,n,r),t.while,e._compileCaptures(t.whileCaptures||t.captures,n,r),e._compilePatterns(t.patterns,n,r)):new h$(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,e._compileCaptures(t.beginCaptures||t.captures,n,r),t.end,e._compileCaptures(t.endCaptures||t.captures,n,r),t.applyEndPatternLast,e._compilePatterns(t.patterns,n,r))})),t.id}},{key:"_compileCaptures",value:function(t,n,r){var o=[];if(t){var i=0;for(var a in t)if("$vscodeTextmateLocation"!==a){var s=parseInt(a,10);s>i&&(i=s)}for(var u=0;u<=i;u++)o[u]=null;for(var l in t)if("$vscodeTextmateLocation"!==l){var c=parseInt(l,10),d=0;t[l].patterns&&(d=e.getCompiledRuleId(t[l],n,r)),o[c]=e.createCaptureRule(n,t[l].$vscodeTextmateLocation,t[l].name,t[l].contentName,d)}}return o}},{key:"_compilePatterns",value:function(t,n,r){var o=[];if(t)for(var i=0,a=t.length;i<a;i++){var s=t[i],u=-1;if(s.include){var l=s$(s.include);switch(l.kind){case 0:case 1:u=e.getCompiledRuleId(r[s.include],n,r);break;case 2:var c=r[l.ruleName];c&&(u=e.getCompiledRuleId(c,n,r));break;case 3:case 4:var d=l.scopeName,f=4===l.kind?l.ruleName:null,p=n.getExternalGrammar(d,r);if(p)if(f){var h=p.repository[f];h&&(u=e.getCompiledRuleId(h,n,p.repository))}else u=e.getCompiledRuleId(p.repository.$self,n,p.repository)}}else u=e.getCompiledRuleId(s,n,r);if(-1!==u){var m=n.getRule(u),v=!1;if((m instanceof p$||m instanceof h$||m instanceof m$)&&m.hasMissingPatterns&&0===m.patterns.length&&(v=!0),v)continue;o.push(u)}}return{patterns:o,hasMissingPatterns:(t?t.length:0)!==o.length}}}])}(),g$=function(){function e(t,n){if(bV(this,e),yV(this,"source",void 0),yV(this,"ruleId",void 0),yV(this,"hasAnchor",void 0),yV(this,"hasBackReferences",void 0),yV(this,"_anchorCache",void 0),t&&"string"==typeof t){for(var r=t.length,o=0,i=[],a=!1,s=0;s<r;s++)if("\\"===t.charAt(s)&&s+1<r){var u=t.charAt(s+1);"z"===u?(i.push(t.substring(o,s)),i.push("$(?!\\n)(?<!\\n)"),o=s+2):"A"!==u&&"G"!==u||(a=!0),s++}this.hasAnchor=a,0===o?this.source=t:(i.push(t.substring(o,r)),this.source=i.join(""))}else this.hasAnchor=!1,this.source=t;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,"string"==typeof this.source?this.hasBackReferences=u$.test(this.source):this.hasBackReferences=!1}return wV(e,[{key:"clone",value:function(){return new e(this.source,this.ruleId)}},{key:"setSource",value:function(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}},{key:"resolveBackReferences",value:function(e,t){if("string"!=typeof this.source)throw new Error("This method should only be called if the source is a string");var n=t.map((function(t){return e.substring(t.start,t.end)}));return l$.lastIndex=0,this.source.replace(l$,(function(e,t){return PV(n[parseInt(t,10)]||"")}))}},{key:"_buildAnchorCache",value:function(){if("string"!=typeof this.source)throw new Error("This method should only be called if the source is a string");var e,t,n,r,o=[],i=[],a=[],s=[];for(e=0,t=this.source.length;e<t;e++)n=this.source.charAt(e),o[e]=n,i[e]=n,a[e]=n,s[e]=n,"\\"===n&&e+1<t&&("A"===(r=this.source.charAt(e+1))?(o[e+1]="￿",i[e+1]="￿",a[e+1]="A",s[e+1]="A"):"G"===r?(o[e+1]="￿",i[e+1]="G",a[e+1]="￿",s[e+1]="G"):(o[e+1]=r,i[e+1]=r,a[e+1]=r,s[e+1]=r),e++);return{A0_G0:o.join(""),A0_G1:i.join(""),A1_G0:a.join(""),A1_G1:s.join("")}}},{key:"resolveAnchors",value:function(e,t){return this.hasAnchor&&this._anchorCache&&"string"==typeof this.source?e?t?this._anchorCache.A1_G1:this._anchorCache.A1_G0:t?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source}}])}(),y$=function(){return wV((function e(){bV(this,e),yV(this,"_items",void 0),yV(this,"_hasAnchors",void 0),yV(this,"_cached",void 0),yV(this,"_anchorCache",void 0),this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}),[{key:"dispose",value:function(){this._disposeCaches()}},{key:"_disposeCaches",value:function(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}},{key:"push",value:function(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}},{key:"unshift",value:function(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}},{key:"length",value:function(){return this._items.length}},{key:"setSource",value:function(e,t){this._items[e].source!==t&&(this._disposeCaches(),this._items[e].setSource(t))}},{key:"compile",value:function(e){if(!this._cached){var t=this._items.map((function(e){return e.source}));this._cached=new b$(e,t,this._items.map((function(e){return e.ruleId})))}return this._cached}},{key:"compileAG",value:function(e,t,n){return this._hasAnchors?t?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G0):this.compile(e)}},{key:"_resolveAnchors",value:function(e,t,n){var r=this._items.map((function(e){return e.resolveAnchors(t,n)}));return new b$(e,r,this._items.map((function(e){return e.ruleId})))}}])}(),b$=function(){return wV((function e(t,n,r){bV(this,e),yV(this,"scanner",void 0),this.regExps=n,this.rules=r,this.scanner=t.createOnigScanner(n)}),[{key:"dispose",value:function(){"function"==typeof this.scanner.dispose&&this.scanner.dispose()}},{key:"toString",value:function(){for(var e=[],t=0,n=this.rules.length;t<n;t++)e.push("   - "+this.rules[t]+": "+this.regExps[t]);return e.join("\n")}},{key:"findNextMatchSync",value:function(e,t,n){var r=this.scanner.findNextMatchSync(e,t,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}}])}(),D$=wV((function e(t,n){bV(this,e),this.languageId=t,this.tokenType=n})),w$=(Fz=function(){function e(t,n){var r=this;bV(this,e),yV(this,"_defaultAttributes",void 0),yV(this,"_embeddedLanguagesMatcher",void 0),yV(this,"_getBasicScopeAttributes",new TV((function(e){var t=r._scopeToLanguage(e),n=r._toStandardTokenType(e);return new D$(t,n)}))),this._defaultAttributes=new D$(t,8),this._embeddedLanguagesMatcher=new C$(Object.entries(n||{}))}return wV(e,[{key:"getDefaultAttributes",value:function(){return this._defaultAttributes}},{key:"getBasicScopeAttributes",value:function(t){return null===t?e._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(t)}},{key:"_scopeToLanguage",value:function(e){return this._embeddedLanguagesMatcher.match(e)||0}},{key:"_toStandardTokenType",value:function(t){var n=t.match(e.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}}])}(),yV(Fz,"_NULL_SCOPE_METADATA",new D$(0,0)),yV(Fz,"STANDARD_TOKEN_TYPE_REGEXP",/\b(comment|string|regex|meta\.embedded)\b/),Fz),C$=function(){return wV((function e(t){if(bV(this,e),yV(this,"values",void 0),yV(this,"scopesRegExp",void 0),0===t.length)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);var n=t.map((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||vV(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),n=t[0];return t[1],PV(n)}));n.sort(),n.reverse(),this.scopesRegExp=new RegExp("^((".concat(n.join(")|("),"))($|\\.)"),"")}}),[{key:"match",value:function(e){if(this.scopesRegExp){var t=e.match(this.scopesRegExp);if(t)return this.values.get(t[1])}}}])}(),k$=("undefined"!=typeof process&&process.env.VSCODE_TEXTMATE_DEBUG,wV((function e(t,n){bV(this,e),this.stack=t,this.stoppedEarly=n})));function E$(e,t,n,r,o,i,a,s){var u=t.content.length,l=!1,c=-1;if(a){var d=function(e,t,n,r,o,i){for(var a=o.beginRuleCapturedEOL?0:-1,s=[],u=o;u;u=u.pop()){var l=u.getRule(e);l instanceof m$&&s.push({rule:l,stack:u})}for(var c=s.pop();c;c=s.pop()){var d=S$(c.rule,e,c.stack.endRule,n,r===a),f=d.ruleScanner,p=d.findOptions,h=f.findNextMatchSync(t,r,p);if(!h){o=c.stack.pop();break}if(-2!==h.ruleId){o=c.stack.pop();break}h.captureIndices&&h.captureIndices.length&&(i.produce(c.stack,h.captureIndices[0].start),A$(e,t,n,c.stack,i,c.rule.whileCaptures,h.captureIndices),i.produce(c.stack,h.captureIndices[0].end),a=h.captureIndices[0].end,h.captureIndices[0].end>r&&(r=h.captureIndices[0].end,n=!1))}return{stack:o,linePos:r,anchorPosition:a,isFirstLine:n}}(e,t,n,r,o,i);o=d.stack,r=d.linePos,n=d.isFirstLine,c=d.anchorPosition}for(var f=Date.now();!l;){if(0!==s&&Date.now()-f>s)return new k$(o,!0);p()}return new k$(o,!1);function p(){var a=function(e,t,n,r,o,i){var a=function(e,t,n,r,o,i){var a=x$(o.getRule(e),e,o.endRule,n,r===i),s=a.ruleScanner,u=a.findOptions,l=s.findNextMatchSync(t,r,u);return l?{captureIndices:l.captureIndices,matchedRuleId:l.ruleId}:null}(e,t,n,r,o,i),s=e.getInjections();if(0===s.length)return a;var u=function(e,t,n,r,o,i,a){for(var s,u=Number.MAX_VALUE,l=null,c=0,d=i.contentNameScopesList.getScopeNames(),f=0,p=e.length;f<p;f++){var h=e[f];if(h.matcher(d)){var m=x$(t.getRule(h.ruleId),t,null,r,o===a),v=m.ruleScanner,g=m.findOptions,y=v.findNextMatchSync(n,o,g);if(y){var b=y.captureIndices[0].start;if(!(b>=u)&&(u=b,l=y.captureIndices,s=y.ruleId,c=h.priority,u===o))break}}}return l?{priorityMatch:-1===c,captureIndices:l,matchedRuleId:s}:null}(s,e,t,n,r,o,i);if(!u)return a;if(!a)return u;var l=a.captureIndices[0].start,c=u.captureIndices[0].start;return c<l||u.priorityMatch&&c===l?u:a}(e,t,n,r,o,c);if(!a)return i.produce(o,u),void(l=!0);var s=a.captureIndices,d=a.matchedRuleId,f=!!(s&&s.length>0)&&s[0].end>r;if(-1===d){var p=o.getRule(e);i.produce(o,s[0].start),o=o.withContentNameScopesList(o.nameScopesList),A$(e,t,n,o,i,p.endCaptures,s),i.produce(o,s[0].end);var h=o;if(o=o.parent,c=h.getAnchorPos(),!f&&h.getEnterPos()===r)return o=h,i.produce(o,u),void(l=!0)}else{var m=e.getRule(d);i.produce(o,s[0].start);var v=o,g=m.getName(t.content,s),y=o.contentNameScopesList.pushAttributed(g,e);if(o=o.push(d,r,c,s[0].end===u,null,y,y),m instanceof h$){var b=m;A$(e,t,n,o,i,b.beginCaptures,s),i.produce(o,s[0].end),c=s[0].end;var D=b.getContentName(t.content,s),w=y.pushAttributed(D,e);if(o=o.withContentNameScopesList(w),b.endHasBackReferences&&(o=o.withEndRule(b.getEndWithResolvedBackReferences(t.content,s))),!f&&v.hasSameRuleAs(o))return o=o.pop(),i.produce(o,u),void(l=!0)}else if(m instanceof m$){var C=m;A$(e,t,n,o,i,C.beginCaptures,s),i.produce(o,s[0].end),c=s[0].end;var k=C.getContentName(t.content,s),E=y.pushAttributed(k,e);if(o=o.withContentNameScopesList(E),C.whileHasBackReferences&&(o=o.withEndRule(C.getWhileWithResolvedBackReferences(t.content,s))),!f&&v.hasSameRuleAs(o))return o=o.pop(),i.produce(o,u),void(l=!0)}else if(A$(e,t,n,o,i,m.captures,s),i.produce(o,s[0].end),o=o.pop(),!f)return o=o.safePop(),i.produce(o,u),void(l=!0)}s[0].end>r&&(r=s[0].end,n=!1)}}function x$(e,t,n,r,o){return{ruleScanner:e.compileAG(t,n,r,o),findOptions:0}}function S$(e,t,n,r,o){return{ruleScanner:e.compileWhileAG(t,n,r,o),findOptions:0}}function A$(e,t,n,r,o,i,a){if(0!==i.length){for(var s=t.content,u=Math.min(i.length,a.length),l=[],c=a[0].end,d=0;d<u;d++){var f=i[d];if(null!==f){var p=a[d];if(0!==p.length){if(p.start>c)break;for(;l.length>0&&l[l.length-1].endPos<=p.start;)o.produceFromScopes(l[l.length-1].scopes,l[l.length-1].endPos),l.pop();if(l.length>0?o.produceFromScopes(l[l.length-1].scopes,p.start):o.produce(r,p.start),f.retokenizeCapturedWithRuleId){var h=f.getName(s,a),m=r.contentNameScopesList.pushAttributed(h,e),v=f.getContentName(s,a),g=m.pushAttributed(v,e),y=r.push(f.retokenizeCapturedWithRuleId,p.start,-1,!1,null,m,g),b=e.createOnigString(s.substring(0,p.end));E$(e,b,n&&0===p.start,p.start,y,o,!1,0),qV(b)}else{var D=f.getName(s,a);if(null!==D){var w=(l.length>0?l[l.length-1].scopes:r.contentNameScopesList).pushAttributed(D,e);l.push(new F$(w,p.end))}}}}}for(;l.length>0;)o.produceFromScopes(l[l.length-1].scopes,l[l.length-1].endPos),l.pop()}}var F$=wV((function e(t,n){bV(this,e),yV(this,"scopes",void 0),yV(this,"endPos",void 0),this.scopes=t,this.endPos=n}));function O$(e,t,n,r,o){var i,a=GV(t,M$),s=v$.getCompiledRuleId(n,r,o.repository),u=mV(a);try{for(u.s();!(i=u.n()).done;){var l=i.value;e.push({debugSelector:t,matcher:l.matcher,ruleId:s,grammar:o,priority:l.priority})}}catch(e){u.e(e)}finally{u.f()}}function M$(e,t){if(t.length<e.length)return!1;var n=0;return e.every((function(e){for(var r=n;r<t.length;r++)if(B$(t[r],e))return n=r+1,!0;return!1}))}function B$(e,t){if(!e)return!1;if(e===t)return!0;var n=t.length;return e.length>n&&e.substr(0,n)===t&&"."===e[n]}var P$=function(){return wV((function e(t,n,r,o,i,a,s,u){if(bV(this,e),yV(this,"_rootId",void 0),yV(this,"_lastRuleId",void 0),yV(this,"_ruleId2desc",void 0),yV(this,"_includedGrammars",void 0),yV(this,"_grammarRepository",void 0),yV(this,"_grammar",void 0),yV(this,"_injections",void 0),yV(this,"_basicScopeAttributesProvider",void 0),yV(this,"_tokenTypeMatchers",void 0),this._rootScopeName=t,this.balancedBracketSelectors=a,this._onigLib=u,this._basicScopeAttributesProvider=new w$(r,o),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=s,this._grammar=T$(n,null),this._injections=null,this._tokenTypeMatchers=[],i)for(var l=0,c=Object.keys(i);l<c.length;l++){var d,f=c[l],p=mV(GV(f,M$));try{for(p.s();!(d=p.n()).done;){var h=d.value;this._tokenTypeMatchers.push({matcher:h.matcher,type:i[f]})}}catch(e){p.e(e)}finally{p.f()}}}),[{key:"themeProvider",get:function(){return this._grammarRepository}},{key:"dispose",value:function(){var e,t=mV(this._ruleId2desc);try{for(t.s();!(e=t.n()).done;){var n=e.value;n&&n.dispose()}}catch(e){t.e(e)}finally{t.f()}}},{key:"createOnigScanner",value:function(e){return this._onigLib.createOnigScanner(e)}},{key:"createOnigString",value:function(e){return this._onigLib.createOnigString(e)}},{key:"getMetadataForScope",value:function(e){return this._basicScopeAttributesProvider.getBasicScopeAttributes(e)}},{key:"_collectInjections",value:function(){var e,t=this,n=[],r=this._rootScopeName,o=(e=r)===t._rootScopeName?t._grammar:t.getExternalGrammar(e);if(o){var i=o.injections;if(i)for(var a in i)O$(n,a,i[a],this,o);var s=this._grammarRepository.injections(r);s&&s.forEach((function(e){var r=t.getExternalGrammar(e);if(r){var o=r.injectionSelector;o&&O$(n,o,r,t,r)}}))}return n.sort((function(e,t){return e.priority-t.priority})),n}},{key:"getInjections",value:function(){return null===this._injections&&(this._injections=this._collectInjections()),this._injections}},{key:"registerRule",value:function(e){var t=++this._lastRuleId,n=e(t);return this._ruleId2desc[t]=n,n}},{key:"getRule",value:function(e){return this._ruleId2desc[e]}},{key:"getExternalGrammar",value:function(e,t){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){var n=this._grammarRepository.lookup(e);if(n)return this._includedGrammars[e]=T$(n,t&&t.$base),this._includedGrammars[e]}}},{key:"tokenizeLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this._tokenize(e,t,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}},{key:"tokenizeLine2",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this._tokenize(e,t,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}},{key:"_tokenize",value:function(e,t,n,r){var o;if(-1===this._rootId&&(this._rootId=v$.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections()),t&&t!==j$.NULL)o=!1,t.reset();else{o=!0;var i,a=this._basicScopeAttributesProvider.getDefaultAttributes(),s=this.themeProvider.getDefaults(),u=UV.set(0,a.languageId,a.tokenType,null,s.fontStyle,s.foregroundId,s.backgroundId),l=this.getRule(this._rootId).getName(null,null);i=l?N$.createRootAndLookUpScopeName(l,u,this):N$.createRoot("unknown",u),t=new j$(null,this._rootId,-1,-1,!1,null,i,i)}e+="\n";var c=this.createOnigString(e),d=c.content.length,f=new R$(n,e,this._tokenTypeMatchers,this.balancedBracketSelectors),p=E$(this,c,o,0,t,f,!0,r);return qV(c),{lineLength:d,lineTokens:f,ruleStack:p.stack,stoppedEarly:p.stoppedEarly}}}])}();function T$(e,t){return(e=EV(e)).repository=e.repository||{},e.repository.$self={$vscodeTextmateLocation:e.$vscodeTextmateLocation,patterns:e.patterns,name:e.scopeName},e.repository.$base=t||e.repository.$self,e}var N$=function(){function e(t,n,r){bV(this,e),this.parent=t,this.scopePath=n,this.tokenAttributes=r}return wV(e,[{key:"scopeName",get:function(){return this.scopePath.scopeName}},{key:"toString",value:function(){return this.getScopeNames().join(" ")}},{key:"equals",value:function(t){return e.equals(this,t)}},{key:"pushAttributed",value:function(t,n){if(null===t)return this;if(-1===t.indexOf(" "))return e._pushAttributed(this,t,n);var r,o=this,i=mV(t.split(/ /g));try{for(i.s();!(r=i.n()).done;){var a=r.value;o=e._pushAttributed(o,a,n)}}catch(e){i.e(e)}finally{i.f()}return o}},{key:"getScopeNames",value:function(){return this.scopePath.getSegments()}},{key:"getExtensionIfDefined",value:function(e){for(var t=[],n=this;n&&n!==e;){var r,o;t.push({encodedTokenAttributes:n.tokenAttributes,scopeNames:n.scopePath.getExtensionIfDefined(null!==(r=null===(o=n.parent)||void 0===o?void 0:o.scopePath)&&void 0!==r?r:null)}),n=n.parent}return n===e?t.reverse():void 0}}],[{key:"fromExtension",value:function(t,n){var r,o,i=t,a=null!==(r=null==t?void 0:t.scopePath)&&void 0!==r?r:null,s=mV(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;i=new e(i,a=jV.push(a,u.scopeNames),u.encodedTokenAttributes)}}catch(e){s.e(e)}finally{s.f()}return i}},{key:"createRoot",value:function(t,n){return new e(null,new jV(null,t),n)}},{key:"createRootAndLookUpScopeName",value:function(t,n,r){var o=r.getMetadataForScope(t),i=new jV(null,t),a=r.themeProvider.themeMatch(i),s=e.mergeAttributes(n,o,a);return new e(null,i,s)}},{key:"equals",value:function(e,t){for(;;){if(e===t)return!0;if(!e&&!t)return!0;if(!e||!t)return!1;if(e.scopeName!==t.scopeName||e.tokenAttributes!==t.tokenAttributes)return!1;e=e.parent,t=t.parent}}},{key:"mergeAttributes",value:function(e,t,n){var r=-1,o=0,i=0;return null!==n&&(r=n.fontStyle,o=n.foregroundId,i=n.backgroundId),UV.set(e,t.languageId,t.tokenType,null,r,o,i)}},{key:"_pushAttributed",value:function(t,n,r){var o=r.getMetadataForScope(n),i=t.scopePath.push(n),a=r.themeProvider.themeMatch(i),s=e.mergeAttributes(t.tokenAttributes,o,a);return new e(t,i,s)}}])}(),j$=(Oz=function(){function e(t,n,r,o,i,a,s,u){bV(this,e),yV(this,"_stackElementBrand",void 0),yV(this,"_enterPos",void 0),yV(this,"_anchorPos",void 0),yV(this,"depth",void 0),this.parent=t,this.ruleId=n,this.beginRuleCapturedEOL=i,this.endRule=a,this.nameScopesList=s,this.contentNameScopesList=u,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=o}return wV(e,[{key:"equals",value:function(t){return null!==t&&e._equals(this,t)}},{key:"clone",value:function(){return this}},{key:"reset",value:function(){e._reset(this)}},{key:"pop",value:function(){return this.parent}},{key:"safePop",value:function(){return this.parent?this.parent:this}},{key:"push",value:function(t,n,r,o,i,a,s){return new e(this,t,n,r,o,i,a,s)}},{key:"getEnterPos",value:function(){return this._enterPos}},{key:"getAnchorPos",value:function(){return this._anchorPos}},{key:"getRule",value:function(e){return e.getRule(this.ruleId)}},{key:"toString",value:function(){var e=[];return this._writeString(e,0),"["+e.join(",")+"]"}},{key:"_writeString",value:function(e,t){var n,r;return this.parent&&(t=this.parent._writeString(e,t)),e[t++]="(".concat(this.ruleId,", ").concat(null===(n=this.nameScopesList)||void 0===n?void 0:n.toString(),", ").concat(null===(r=this.contentNameScopesList)||void 0===r?void 0:r.toString(),")"),t}},{key:"withContentNameScopesList",value:function(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}},{key:"withEndRule",value:function(t){return this.endRule===t?this:new e(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,t,this.nameScopesList,this.contentNameScopesList)}},{key:"hasSameRuleAs",value:function(e){for(var t=this;t&&t._enterPos===e._enterPos;){if(t.ruleId===e.ruleId)return!0;t=t.parent}return!1}},{key:"toStateStackFrame",value:function(){var e,t,n,r,o,i;return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:null!==(e=null===(t=this.nameScopesList)||void 0===t?void 0:t.getExtensionIfDefined(null!==(n=null===(r=this.parent)||void 0===r?void 0:r.nameScopesList)&&void 0!==n?n:null))&&void 0!==e?e:[],contentNameScopesList:null!==(o=null===(i=this.contentNameScopesList)||void 0===i?void 0:i.getExtensionIfDefined(this.nameScopesList))&&void 0!==o?o:[]}}}],[{key:"_equals",value:function(e,t){return e===t||!!this._structuralEquals(e,t)&&N$.equals(e.contentNameScopesList,t.contentNameScopesList)}},{key:"_structuralEquals",value:function(e,t){for(;;){if(e===t)return!0;if(!e&&!t)return!0;if(!e||!t)return!1;if(e.depth!==t.depth||e.ruleId!==t.ruleId||e.endRule!==t.endRule)return!1;e=e.parent,t=t.parent}}},{key:"_reset",value:function(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}},{key:"pushFrame",value:function(t,n){var r,o,i,a=N$.fromExtension(null!==(r=null==t?void 0:t.nameScopesList)&&void 0!==r?r:null,n.nameScopesList);return new e(t,n.ruleId,null!==(o=n.enterPos)&&void 0!==o?o:-1,null!==(i=n.anchorPos)&&void 0!==i?i:-1,n.beginRuleCapturedEOL,n.endRule,a,N$.fromExtension(a,n.contentNameScopesList))}}])}(),yV(Oz,"NULL",new Oz(null,0,0,0,!1,null,null,null)),Oz),_$=function(){return wV((function e(t,n){var r=this;bV(this,e),yV(this,"balancedBracketScopes",void 0),yV(this,"unbalancedBracketScopes",void 0),yV(this,"allowAny",!1),this.balancedBracketScopes=t.flatMap((function(e){return"*"===e?(r.allowAny=!0,[]):GV(e,M$).map((function(e){return e.matcher}))})),this.unbalancedBracketScopes=n.flatMap((function(e){return GV(e,M$).map((function(e){return e.matcher}))}))}),[{key:"matchesAlways",get:function(){return this.allowAny&&0===this.unbalancedBracketScopes.length}},{key:"matchesNever",get:function(){return 0===this.balancedBracketScopes.length&&!this.allowAny}},{key:"match",value:function(e){var t,n=mV(this.unbalancedBracketScopes);try{for(n.s();!(t=n.n()).done;)if((0,t.value)(e))return!1}catch(e){n.e(e)}finally{n.f()}var r,o=mV(this.balancedBracketScopes);try{for(o.s();!(r=o.n()).done;)if((0,r.value)(e))return!0}catch(e){o.e(e)}finally{o.f()}return this.allowAny}}])}(),R$=function(){return wV((function e(t,n,r,o){bV(this,e),yV(this,"_emitBinaryTokens",void 0),yV(this,"_lineText",void 0),yV(this,"_tokens",void 0),yV(this,"_binaryTokens",void 0),yV(this,"_lastTokenEndIndex",void 0),yV(this,"_tokenTypeOverrides",void 0),this.balancedBracketSelectors=o,this._emitBinaryTokens=t,this._tokenTypeOverrides=r,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}),[{key:"produce",value:function(e,t){this.produceFromScopes(e.contentNameScopesList,t)}},{key:"produceFromScopes",value:function(e,t){var n;if(!(this._lastTokenEndIndex>=t)){if(this._emitBinaryTokens){var r,o,i=null!==(r=null==e?void 0:e.tokenAttributes)&&void 0!==r?r:0,a=!1;if(null!==(o=this.balancedBracketSelectors)&&void 0!==o&&o.matchesAlways&&(a=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){var s,u,l=null!==(s=null==e?void 0:e.getScopeNames())&&void 0!==s?s:[],c=mV(this._tokenTypeOverrides);try{for(c.s();!(u=c.n()).done;){var d=u.value;d.matcher(l)&&(i=UV.set(i,0,d.type,null,-1,0,0))}}catch(e){c.e(e)}finally{c.f()}this.balancedBracketSelectors&&(a=this.balancedBracketSelectors.match(l))}return a&&(i=UV.set(i,0,8,a,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===i||(this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(i)),void(this._lastTokenEndIndex=t)}var f=null!==(n=null==e?void 0:e.getScopeNames())&&void 0!==n?n:[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:t,scopes:f}),this._lastTokenEndIndex=t}}},{key:"getResult",value:function(e,t){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===t-1&&this._tokens.pop(),0===this._tokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}},{key:"getBinaryResult",value:function(e,t){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===t-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),0===this._binaryTokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._binaryTokens[this._binaryTokens.length-2]=0);for(var n=new Uint32Array(this._binaryTokens.length),r=0,o=this._binaryTokens.length;r<o;r++)n[r]=this._binaryTokens[r];return n}}])}(),L$=function(){return wV((function e(t,n){bV(this,e),yV(this,"_grammars",new Map),yV(this,"_rawGrammars",new Map),yV(this,"_injectionGrammars",new Map),yV(this,"_theme",void 0),this._onigLib=n,this._theme=t}),[{key:"dispose",value:function(){var e,t=mV(this._grammars.values());try{for(t.s();!(e=t.n()).done;)e.value.dispose()}catch(e){t.e(e)}finally{t.f()}}},{key:"setTheme",value:function(e){this._theme=e}},{key:"getColorMap",value:function(){return this._theme.getColorMap()}},{key:"addGrammar",value:function(e,t){this._rawGrammars.set(e.scopeName,e),t&&this._injectionGrammars.set(e.scopeName,t)}},{key:"lookup",value:function(e){return this._rawGrammars.get(e)}},{key:"injections",value:function(e){return this._injectionGrammars.get(e)}},{key:"getDefaults",value:function(){return this._theme.getDefaults()}},{key:"themeMatch",value:function(e){return this._theme.match(e)}},{key:"grammarForScopeName",value:function(e,t,n,r,o){if(!this._grammars.has(e)){var i=this._rawGrammars.get(e);if(!i)return null;this._grammars.set(e,function(e,t,n,r,o,i,a,s){return new P$(e,t,n,r,o,i,a,s)}(e,i,t,n,r,o,this,this._onigLib))}return this._grammars.get(e)}}])}(),I$=function(){return wV((function e(t){bV(this,e),yV(this,"_options",void 0),yV(this,"_syncRegistry",void 0),yV(this,"_ensureGrammarCache",void 0),this._options=t,this._syncRegistry=new L$(NV.createFromRawTheme(t.theme,t.colorMap),t.onigLib),this._ensureGrammarCache=new Map}),[{key:"dispose",value:function(){this._syncRegistry.dispose()}},{key:"setTheme",value:function(e,t){this._syncRegistry.setTheme(NV.createFromRawTheme(e,t))}},{key:"getColorMap",value:function(){return this._syncRegistry.getColorMap()}},{key:"loadGrammarWithEmbeddedLanguages",value:function(e,t,n){return this.loadGrammarWithConfiguration(e,t,{embeddedLanguages:n})}},{key:"loadGrammarWithConfiguration",value:function(e,t,n){return this._loadGrammar(e,t,n.embeddedLanguages,n.tokenTypes,new _$(n.balancedBracketSelectors||[],n.unbalancedBracketSelectors||[]))}},{key:"loadGrammar",value:function(e){return this._loadGrammar(e,0,null,null,null)}},{key:"_loadGrammar",value:function(e,t,n,r,o){for(var i=this,a=new XV(this._syncRegistry,e);a.Q.length>0;)a.Q.map((function(e){return i._loadSingleGrammar(e.scopeName)})),a.processQueue();return this._grammarForScopeName(e,t,n,r,o)}},{key:"_loadSingleGrammar",value:function(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}},{key:"_doLoadSingleGrammar",value:function(e){var t=this._options.loadGrammar(e);if(t){var n="function"==typeof this._options.getInjections?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(t,n)}}},{key:"addGrammar",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this._syncRegistry.addGrammar(e,t),this._grammarForScopeName(e.scopeName,n,r)}},{key:"_grammarForScopeName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return this._syncRegistry.grammarForScopeName(e,t,n,r,o)}}])}(),H$=j$.NULL,z$=a(3159);function V$(e,t){const n="string"==typeof e?{}:{...e.colorReplacements},r="string"==typeof e?e:e.name;for(const[e,o]of Object.entries(t?.colorReplacements||{}))"string"==typeof o?n[e]=o:e===r&&Object.assign(n,o);return n}function $$(e,t){return e&&t?.[e?.toLowerCase()]||e}async function U$(e){return Promise.resolve("function"==typeof e?e():e).then((e=>e.default||e))}function G$(e){return!e||["plaintext","txt","text","plain"].includes(e)}function W$(e){return"ansi"===e||G$(e)}function q$(e){return"none"===e}function K$(e){return q$(e)}function J$(e,t){if(!t)return e;e.properties||={},e.properties.class||=[],"string"==typeof e.properties.class&&(e.properties.class=e.properties.class.split(/\s+/g)),Array.isArray(e.properties.class)||(e.properties.class=[]);const n=Array.isArray(t)?t:t.split(/\s+/g);for(const t of n)t&&!e.properties.class.includes(t)&&e.properties.class.push(t);return e}function Z$(e,t=!1){const n=e.split(/(\r?\n)/g);let r=0;const o=[];for(let e=0;e<n.length;e+=2){const i=t?n[e]+(n[e+1]||""):n[e];o.push([i,r]),r+=n[e].length,r+=n[e+1]?.length||0}return o}const X$="light-dark()";function Y$(e){const t={};if(e.color&&(t.color=e.color),e.bgColor&&(t["background-color"]=e.bgColor),e.fontStyle){e.fontStyle&IV.Italic&&(t["font-style"]="italic"),e.fontStyle&IV.Bold&&(t["font-weight"]="bold");const n=[];e.fontStyle&IV.Underline&&n.push("underline"),e.fontStyle&IV.Strikethrough&&n.push("line-through"),n.length&&(t["text-decoration"]=n.join(" "))}return t}function Q$(e){return"string"==typeof e?e:Object.entries(e).map((([e,t])=>`${e}:${t}`)).join(";")}const eU=new WeakMap;function tU(e,t){eU.set(e,t)}function nU(e){return eU.get(e)}class rU{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,t){return new rU(Object.fromEntries((n=t,Array.isArray(n)?n:[n]).map((e=>[e,H$]))),e);var n}constructor(...e){if(2===e.length){const[t,n]=e;this.lang=n,this._stacks=t}else{const[t,n,r]=e;this.lang=n,this._stacks={[r]:t}}}getInternalStack(e=this.theme){return this._stacks[e]}getScopes(e=this.theme){return function(e){const t=[],n=new Set;return function e(r){if(n.has(r))return;n.add(r);const o=r?.nameScopesList?.scopeName;o&&t.push(o),r.parent&&e(r.parent)}(e),t}(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function oU(){const e=new WeakMap;function t(t){if(!e.has(t.meta)){let n=function(e){if("number"==typeof e){if(e<0||e>t.source.length)throw new sV(`Invalid decoration offset: ${e}. Code length: ${t.source.length}`);return{...r.indexToPos(e),offset:e}}{const t=r.lines[e.line];if(void 0===t)throw new sV(`Invalid decoration position ${JSON.stringify(e)}. Lines length: ${r.lines.length}`);if(e.character<0||e.character>t.length)throw new sV(`Invalid decoration position ${JSON.stringify(e)}. Line ${e.line} length: ${t.length}`);return{...e,offset:r.posToIndex(e.line,e.character)}}};const r=function(e){const t=Z$(e,!0).map((([e])=>e));return{lines:t,indexToPos:function(n){if(n===e.length)return{line:t.length-1,character:t[t.length-1].length};let r=n,o=0;for(const e of t){if(r<e.length)break;r-=e.length,o++}return{line:o,character:r}},posToIndex:function(e,n){let r=0;for(let n=0;n<e;n++)r+=t[n].length;return r+=n,r}}}(t.source),o=(t.options.decorations||[]).map((e=>({...e,start:n(e.start),end:n(e.end)})));!function(e){for(let t=0;t<e.length;t++){const n=e[t];if(n.start.offset>n.end.offset)throw new sV(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=t+1;r<e.length;r++){const t=e[r],o=n.start.offset<=t.start.offset&&t.start.offset<n.end.offset,i=n.start.offset<t.end.offset&&t.end.offset<=n.end.offset,a=t.start.offset<=n.start.offset&&n.start.offset<t.end.offset,s=t.start.offset<n.end.offset&&n.end.offset<=t.end.offset;if(o||i||a||s){if(o&&i)continue;if(a&&s)continue;throw new sV(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(t.start)} intersect.`)}}}}(o),e.set(t.meta,{decorations:o,converter:r,source:t.source})}return e.get(t.meta)}return{name:"shiki:decorations",tokens(e){if(!this.options.decorations?.length)return;const n=function(e,t){const n=Array.from(t instanceof Set?t:new Set(t)).sort(((e,t)=>e-t));return n.length?e.map((e=>e.flatMap((e=>{const t=n.filter((t=>e.offset<t&&t<e.offset+e.content.length)).map((t=>t-e.offset)).sort(((e,t)=>e-t));return t.length?function(e,t){let n=0;const r=[];for(const o of t)o>n&&r.push({...e,content:e.content.slice(n,o),offset:e.offset+n}),n=o;return n<e.content.length&&r.push({...e,content:e.content.slice(n),offset:e.offset+n}),r}(e,t):e})))):e}(e,t(this).decorations.flatMap((e=>[e.start.offset,e.end.offset])));return n},code(e){if(!this.options.decorations?.length)return;const n=t(this),r=Array.from(e.children).filter((e=>"element"===e.type&&"span"===e.tagName));if(r.length!==n.converter.lines.length)throw new sV(`Number of lines in code element (${r.length}) does not match the number of lines in the source (${n.converter.lines.length}). Failed to apply decorations.`);function o(e,t,n,o){const i=r[e];let s="",u=-1,l=-1;if(0===t&&(u=0),0===n&&(l=0),n===Number.POSITIVE_INFINITY&&(l=i.children.length),-1===u||-1===l)for(let e=0;e<i.children.length;e++)s+=iU(i.children[e]),-1===u&&s.length===t&&(u=e+1),-1===l&&s.length===n&&(l=e+1);if(-1===u)throw new sV(`Failed to find start index for decoration ${JSON.stringify(o.start)}`);if(-1===l)throw new sV(`Failed to find end index for decoration ${JSON.stringify(o.end)}`);const c=i.children.slice(u,l);if(o.alwaysWrap||c.length!==i.children.length)if(o.alwaysWrap||1!==c.length||"element"!==c[0].type){const e={type:"element",tagName:"span",properties:{},children:c};a(e,o,"wrapper"),i.children.splice(u,c.length,e)}else a(c[0],o,"token");else a(i,o,"line")}function i(e,t){r[e]=a(r[e],t,"line")}function a(e,t,n){const r=t.properties||{},o=t.transform||(e=>e);return e.tagName=t.tagName||"span",e.properties={...e.properties,...r,class:e.properties.class},t.properties?.class&&J$(e,t.properties.class),o(e,n)||e}const s=[],u=n.decorations.sort(((e,t)=>t.start.offset-e.start.offset||e.end.offset-t.end.offset));for(const e of u){const{start:t,end:n}=e;if(t.line===n.line)o(t.line,t.character,n.character,e);else if(t.line<n.line){o(t.line,t.character,Number.POSITIVE_INFINITY,e);for(let r=t.line+1;r<n.line;r++)s.unshift((()=>i(r,e)));o(n.line,0,n.character,e)}}s.forEach((e=>e()))}}}function iU(e){return"text"===e.type?e.value:"element"===e.type?e.children.map(iU).join(""):""}const aU=[oU()];function sU(e){return[...e.transformers||[],...aU]}var uU=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],lU={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function cU(e,t){const n=e.indexOf("",t);if(-1!==n&&"["===e[n+1]){const t=e.indexOf("m",n);if(-1!==t)return{sequence:e.substring(n+2,t).split(";"),startPosition:n,position:t+1}}return{position:e.length}}function dU(e){const t=e.shift();if("2"===t){const t=e.splice(0,3).map((e=>Number.parseInt(e)));if(3!==t.length||t.some((e=>Number.isNaN(e))))return;return{type:"rgb",rgb:t}}if("5"===t){const t=e.shift();if(t)return{type:"table",index:Number(t)}}}function fU(e){const t=[];for(;e.length>0;){const n=e.shift();if(!n)continue;const r=Number.parseInt(n);if(!Number.isNaN(r))if(0===r)t.push({type:"resetAll"});else if(r<=9)lU[r]&&t.push({type:"setDecoration",value:lU[r]});else if(r<=29){const e=lU[r-20];e&&(t.push({type:"resetDecoration",value:e}),"dim"===e&&t.push({type:"resetDecoration",value:"bold"}))}else if(r<=37)t.push({type:"setForegroundColor",value:{type:"named",name:uU[r-30]}});else if(38===r){const n=dU(e);n&&t.push({type:"setForegroundColor",value:n})}else if(39===r)t.push({type:"resetForegroundColor"});else if(r<=47)t.push({type:"setBackgroundColor",value:{type:"named",name:uU[r-40]}});else if(48===r){const n=dU(e);n&&t.push({type:"setBackgroundColor",value:n})}else 49===r?t.push({type:"resetBackgroundColor"}):53===r?t.push({type:"setDecoration",value:"overline"}):55===r?t.push({type:"resetDecoration",value:"overline"}):r>=90&&r<=97?t.push({type:"setForegroundColor",value:{type:"named",name:uU[r-90+8]}}):r>=100&&r<=107&&t.push({type:"setBackgroundColor",value:{type:"named",name:uU[r-100+8]}})}return t}var pU={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function hU(e=pU){function t(t){return e[t]}function n(e){return`#${e.map((e=>Math.max(0,Math.min(e,255)).toString(16).padStart(2,"0"))).join("")}`}let r;return{value:function(e){switch(e.type){case"named":return t(e.name);case"rgb":return n(e.rgb);case"table":return function(e){return function(){if(r)return r;r=[];for(let e=0;e<uU.length;e++)r.push(t(uU[e]));let e=[0,95,135,175,215,255];for(let t=0;t<6;t++)for(let o=0;o<6;o++)for(let i=0;i<6;i++)r.push(n([e[t],e[o],e[i]]));let o=8;for(let e=0;e<24;e++,o+=10)r.push(n([o,o,o]));return r}()[e]}(e.index)}}}}function mU(e,t,n={}){const{lang:r="text",theme:o=e.getLoadedThemes()[0]}=n;if(G$(r)||q$(o))return Z$(t).map((e=>[{content:e[0],offset:e[1]}]));const{theme:i,colorMap:a}=e.setTheme(o);if("ansi"===r)return function(e,t,n){const r=V$(e,n),o=Z$(t),i=hU(Object.fromEntries(uU.map((t=>[t,e.colors?.[`terminal.ansi${t[0].toUpperCase()}${t.substring(1)}`]])))),a=function(){let e=null,t=null,n=new Set;return{parse(r){const o=[];let i=0;do{const a=cU(r,i),s=a.sequence?r.substring(i,a.startPosition):r.substring(i);if(s.length>0&&o.push({value:s,foreground:e,background:t,decorations:new Set(n)}),a.sequence){const r=fU(a.sequence);for(const o of r)"resetAll"===o.type?(e=null,t=null,n.clear()):"resetForegroundColor"===o.type?e=null:"resetBackgroundColor"===o.type?t=null:"resetDecoration"===o.type&&n.delete(o.value);for(const o of r)"setForegroundColor"===o.type?e=o.value:"setBackgroundColor"===o.type?t=o.value:"setDecoration"===o.type&&n.add(o.value)}i=a.position}while(i<r.length);return o}}}();return o.map((t=>a.parse(t[0]).map((n=>{let o,a;n.decorations.has("reverse")?(o=n.background?i.value(n.background):e.bg,a=n.foreground?i.value(n.foreground):e.fg):(o=n.foreground?i.value(n.foreground):e.fg,a=n.background?i.value(n.background):void 0),o=$$(o,r),a=$$(a,r),n.decorations.has("dim")&&(o=function(e){const t=e.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(t){if(t[3]){const e=Math.round(Number.parseInt(t[3],16)/2).toString(16).padStart(2,"0");return`#${t[1]}${t[2]}${e}`}return t[2]?`#${t[1]}${t[2]}80`:`#${Array.from(t[1]).map((e=>`${e}${e}`)).join("")}80`}const n=e.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:e}(o));let s=IV.None;return n.decorations.has("bold")&&(s|=IV.Bold),n.decorations.has("italic")&&(s|=IV.Italic),n.decorations.has("underline")&&(s|=IV.Underline),n.decorations.has("strikethrough")&&(s|=IV.Strikethrough),{content:n.value,offset:t[1],color:o,bgColor:a,fontStyle:s}}))))}(i,t,n);const s=e.getLanguage(r);if(n.grammarState){if(n.grammarState.lang!==s.name)throw new sV(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${s.name}"`);if(!n.grammarState.themes.includes(i.name))throw new sV(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${i.name}"`)}return function(e,t,n,r,o){const i=vU(e,t,n,r,o),a=new rU(vU(e,t,n,r,o).stateStack,t.name,n.name);return tU(i.tokens,a),i.tokens}(t,s,i,a,n)}function vU(e,t,n,r,o){const i=V$(n,o),{tokenizeMaxLineLength:a=0,tokenizeTimeLimit:s=500}=o,u=Z$(e);let l=o.grammarState?function(e,t){if(!(e instanceof rU))throw new sV("Invalid grammar state");return e.getInternalStack(t)}(o.grammarState,n.name)??H$:null!=o.grammarContextCode?vU(o.grammarContextCode,t,n,r,{...o,grammarState:void 0,grammarContextCode:void 0}).stateStack:H$,c=[];const d=[];for(let e=0,p=u.length;e<p;e++){const[p,h]=u[e];if(""===p){c=[],d.push([]);continue}if(a>0&&p.length>=a){c=[],d.push([{content:p,offset:h,color:"",fontStyle:0}]);continue}let m,v,g;o.includeExplanation&&(m=t.tokenizeLine(p,l,s),v=m.tokens,g=0);const y=t.tokenizeLine2(p,l,s),b=y.tokens.length/2;for(let e=0;e<b;e++){const t=y.tokens[2*e],a=e+1<b?y.tokens[2*e+2]:p.length;if(t===a)continue;const s=y.tokens[2*e+1],u=$$(r[UV.getForeground(s)],i),l=UV.getFontStyle(s),d={content:p.substring(t,a),offset:h+t,color:u,fontStyle:l};if(o.includeExplanation){const e=[];if("scopeName"!==o.includeExplanation)for(const t of n.settings){let n;switch(typeof t.scope){case"string":n=t.scope.split(/,/).map((e=>e.trim()));break;case"object":n=t.scope;break;default:continue}e.push({settings:t,selectors:n.map((e=>e.split(/ /)))})}d.explanation=[];let r=0;for(;t+r<a;){const t=v[g],n=p.substring(t.startIndex,t.endIndex);r+=n.length,d.explanation.push({content:n,scopes:"scopeName"===o.includeExplanation?(f=t.scopes,f.map((e=>({scopeName:e})))):gU(e,t.scopes)}),g+=1}}c.push(d)}d.push(c),c=[],l=y.ruleStack}var f;return{tokens:d,stateStack:l}}function gU(e,t){const n=[];for(let r=0,o=t.length;r<o;r++){const o=t[r];n[r]={scopeName:o,themeMatches:DU(e,o,t.slice(0,r))}}return n}function yU(e,t){return e===t||t.substring(0,e.length)===e&&"."===t[e.length]}function bU(e,t,n){if(!yU(e[e.length-1],t))return!1;let r=e.length-2,o=n.length-1;for(;r>=0&&o>=0;)yU(e[r],n[o])&&(r-=1),o-=1;return-1===r}function DU(e,t,n){const r=[];for(const{selectors:o,settings:i}of e)for(const e of o)if(bU(e,t,n)){r.push(i);break}return r}function wU(e,t,n){const r=Object.entries(n.themes).filter((e=>e[1])).map((e=>({color:e[0],theme:e[1]}))),o=r.map((r=>{const o=mU(e,t,{...n,theme:r.theme});return{tokens:o,state:nU(o),theme:"string"==typeof r.theme?r.theme:r.theme.name}})),i=function(...e){const t=e.map((()=>[])),n=e.length;for(let r=0;r<e[0].length;r++){const o=e.map((e=>e[r])),i=t.map((()=>[]));t.forEach(((e,t)=>e.push(i[t])));const a=o.map((()=>0)),s=o.map((e=>e[0]));for(;s.every((e=>e));){const e=Math.min(...s.map((e=>e.content.length)));for(let t=0;t<n;t++){const n=s[t];n.content.length===e?(i[t].push(n),a[t]+=1,s[t]=o[t][a[t]]):(i[t].push({...n,content:n.content.slice(0,e)}),s[t]={...n,content:n.content.slice(e),offset:n.offset+e})}}}return t}(...o.map((e=>e.tokens))),a=i[0].map(((e,t)=>e.map(((e,o)=>{const a={content:e.content,variants:{},offset:e.offset};return"includeExplanation"in n&&n.includeExplanation&&(a.explanation=e.explanation),i.forEach(((e,n)=>{const{content:i,explanation:s,offset:u,...l}=e[t][o];a.variants[r[n].color]=l})),a})))),s=o[0].state?new rU(Object.fromEntries(o.map((e=>[e.theme,e.state?.getInternalStack(e.theme)]))),o[0].state.lang):void 0;return s&&tU(a,s),a}function CU(e,t,n){let r,o,i,a,s,u;if("themes"in n){const{defaultColor:l="light",cssVariablePrefix:c="--shiki-"}=n,d=Object.entries(n.themes).filter((e=>e[1])).map((e=>({color:e[0],theme:e[1]}))).sort(((e,t)=>e.color===l?-1:t.color===l?1:0));if(0===d.length)throw new sV("`themes` option must not be empty");const f=wU(e,t,n);if(u=nU(f),l&&X$!==l&&!d.find((e=>e.color===l)))throw new sV(`\`themes\` option must contain the defaultColor key \`${l}\``);const p=d.map((t=>e.getTheme(t.theme))),h=d.map((e=>e.color));i=f.map((e=>e.map((e=>function(e,t,n,r){const o={content:e.content,explanation:e.explanation,offset:e.offset},i=t.map((t=>Y$(e.variants[t]))),a=new Set(i.flatMap((e=>Object.keys(e)))),s={};return i.forEach(((e,o)=>{for(const u of a){const a=e[u]||"inherit";if(0===o&&r)if(r===X$&&i.length>1){const e=t.findIndex((e=>"light"===e)),r=t.findIndex((e=>"dark"===e));if(-1===e||-1===r)throw new sV('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const l=i[e][u]||"inherit",c=i[r][u]||"inherit";s[u]=`light-dark(${l}, ${c})`;const d="color"===u?"":"background-color"===u?"-bg":`-${u}`,f=n+t[o]+("color"===u?"":d);s[f]=a}else s[u]=a;else{const e="color"===u?"":"background-color"===u?"-bg":`-${u}`,r=n+t[o]+("color"===u?"":e);s[r]=a}}})),o.htmlStyle=s,o}(e,h,c,l))))),u&&tU(i,u);const m=d.map((e=>V$(e.theme,n)));o=kU(d,p,m,c,l,"fg"),r=kU(d,p,m,c,l,"bg"),a=`shiki-themes ${p.map((e=>e.name)).join(" ")}`,s=l?void 0:[o,r].join(";")}else{if(!("theme"in n))throw new sV("Invalid options, either `theme` or `themes` must be provided");{const s=V$(n.theme,n);i=mU(e,t,n);const l=e.getTheme(n.theme);r=$$(l.bg,s),o=$$(l.fg,s),a=l.name,u=nU(i)}}return{tokens:i,fg:o,bg:r,themeName:a,rootStyle:s,grammarState:u}}function kU(e,t,n,r,o,i){return e.map(((a,s)=>{const u=$$(t[s][i],n[s])||"inherit",l=`${r+a.color}${"bg"===i?"-bg":""}:${u}`;if(0===s&&o){if(o===X$&&e.length>1){const r=e.findIndex((e=>"light"===e.color)),o=e.findIndex((e=>"dark"===e.color));if(-1===r||-1===o)throw new sV('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');return`light-dark(${$$(t[r][i],n[r])||"inherit"}, ${$$(t[o][i],n[o])||"inherit"});${l}`}return u}return l})).join(";")}function EU(e,t,n,r={meta:{},options:n,codeToHast:(t,n)=>EU(e,t,n),codeToTokens:(t,n)=>CU(e,t,n)}){let o=t;for(const e of sU(n))o=e.preprocess?.call(r,o,n)||o;let{tokens:i,fg:a,bg:s,themeName:u,rootStyle:l,grammarState:c}=CU(e,o,n);const{mergeWhitespaces:d=!0,mergeSameStyleTokens:f=!1}=n;!0===d?i=function(e){return e.map((e=>{const t=[];let n="",r=0;return e.forEach(((o,i)=>{const a=!(o.fontStyle&&(o.fontStyle&IV.Underline||o.fontStyle&IV.Strikethrough));a&&o.content.match(/^\s+$/)&&e[i+1]?(r||(r=o.offset),n+=o.content):n?(a?t.push({...o,offset:r,content:n+o.content}):t.push({content:n,offset:r},o),r=0,n=""):t.push(o)})),t}))}(i):"never"===d&&(i=function(e){return e.map((e=>e.flatMap((e=>{if(e.content.match(/^\s+$/))return e;const t=e.content.match(/^(\s*)(.*?)(\s*)$/);if(!t)return e;const[,n,r,o]=t;if(!n&&!o)return e;const i=[{...e,offset:e.offset+n.length,content:r}];return n&&i.unshift({content:n,offset:e.offset}),o&&i.push({content:o,offset:e.offset+n.length+r.length}),i}))))}(i)),f&&(i=function(e){return e.map((e=>{const t=[];for(const n of e){if(0===t.length){t.push({...n});continue}const e=t[t.length-1],r=Q$(e.htmlStyle||Y$(e)),o=Q$(n.htmlStyle||Y$(n)),i=e.fontStyle&&(e.fontStyle&IV.Underline||e.fontStyle&IV.Strikethrough),a=n.fontStyle&&(n.fontStyle&IV.Underline||n.fontStyle&IV.Strikethrough);i||a||r!==o?t.push({...n}):e.content+=n.content}return t}))}(i));const p={...r,get source(){return o}};for(const e of sU(n))i=e.tokens?.call(p,i)||i;return function(e,t,n,r=nU(e)){const o=sU(t),i=[],a={type:"root",children:[]},{structure:s="classic",tabindex:u="0"}=t;let l={type:"element",tagName:"pre",properties:{class:`shiki ${t.themeName||""}`,style:t.rootStyle||`background-color:${t.bg};color:${t.fg}`,...!1!==u&&null!=u?{tabindex:u.toString()}:{},...Object.fromEntries(Array.from(Object.entries(t.meta||{})).filter((([e])=>!e.startsWith("_"))))},children:[]},c={type:"element",tagName:"code",properties:{},children:i};const d=[],f={...n,structure:s,addClassToHast:J$,get source(){return n.source},get tokens(){return e},get options(){return t},get root(){return a},get pre(){return l},get code(){return c},get lines(){return d}};if(e.forEach(((e,t)=>{t&&("inline"===s?a.children.push({type:"element",tagName:"br",properties:{},children:[]}):"classic"===s&&i.push({type:"text",value:"\n"}));let n={type:"element",tagName:"span",properties:{class:"line"},children:[]},r=0;for(const i of e){let e={type:"element",tagName:"span",properties:{...i.htmlAttrs},children:[{type:"text",value:i.content}]};const u=Q$(i.htmlStyle||Y$(i));u&&(e.properties.style=u);for(const a of o)e=a?.span?.call(f,e,t+1,r,n,i)||e;"inline"===s?a.children.push(e):"classic"===s&&n.children.push(e),r+=i.content.length}if("classic"===s){for(const e of o)n=e?.line?.call(f,n,t+1)||n;d.push(n),i.push(n)}})),"classic"===s){for(const e of o)c=e?.code?.call(f,c)||c;l.children.push(c);for(const e of o)l=e?.pre?.call(f,l)||l;a.children.push(l)}let p=a;for(const e of o)p=e?.root?.call(f,p)||p;return r&&tU(p,r),p}(i,{...n,fg:a,bg:s,themeName:u,rootStyle:l},p,c)}const xU=z$.V;const SU="__shiki_resolved";function AU(e){if(e?.[SU])return e;const t={...e};t.tokenColors&&!t.settings&&(t.settings=t.tokenColors,delete t.tokenColors),t.type||="dark",t.colorReplacements={...t.colorReplacements},t.settings||=[];let{bg:n,fg:r}=t;if(!n||!r){const e=t.settings?t.settings.find((e=>!e.name&&!e.scope)):void 0;e?.settings?.foreground&&(r=e.settings.foreground),e?.settings?.background&&(n=e.settings.background),!r&&t?.colors?.["editor.foreground"]&&(r=t.colors["editor.foreground"]),!n&&t?.colors?.["editor.background"]&&(n=t.colors["editor.background"]),r||(r="light"===t.type?"#333333":"#bbbbbb"),n||(n="light"===t.type?"#fffffe":"#1e1e1e"),t.fg=r,t.bg=n}t.settings[0]&&t.settings[0].settings&&!t.settings[0].scope||t.settings.unshift({settings:{foreground:t.fg,background:t.bg}});let o=0;const i=new Map;function a(e){if(i.has(e))return i.get(e);o+=1;const n=`#${o.toString(16).padStart(8,"0").toLowerCase()}`;return t.colorReplacements?.[`#${n}`]?a(e):(i.set(e,n),n)}t.settings=t.settings.map((e=>{const n=e.settings?.foreground&&!e.settings.foreground.startsWith("#"),r=e.settings?.background&&!e.settings.background.startsWith("#");if(!n&&!r)return e;const o={...e,settings:{...e.settings}};if(n){const n=a(e.settings.foreground);t.colorReplacements[n]=e.settings.foreground,o.settings.foreground=n}if(r){const n=a(e.settings.background);t.colorReplacements[n]=e.settings.background,o.settings.background=n}return o}));for(const e of Object.keys(t.colors||{}))if(("editor.foreground"===e||"editor.background"===e||e.startsWith("terminal.ansi"))&&!t.colors[e]?.startsWith("#")){const n=a(t.colors[e]);t.colorReplacements[n]=t.colors[e],t.colors[e]=n}return Object.defineProperty(t,SU,{enumerable:!1,writable:!1,value:!0}),t}async function FU(e){return Array.from(new Set((await Promise.all(e.filter((e=>!W$(e))).map((async e=>await U$(e).then((e=>Array.isArray(e)?e:[e])))))).flat()))}async function OU(e){return(await Promise.all(e.map((async e=>K$(e)?null:AU(await U$(e)))))).filter((e=>!!e))}class MU extends Error{constructor(e){super(e),this.name="ShikiError"}}class BU extends I${constructor(e,t,n,r={}){super(e),this._resolver=e,this._themes=t,this._langs=n,this._alias=r,this._themes.map((e=>this.loadTheme(e))),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return"string"==typeof e?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const t=AU(e);return t.name&&(this._resolvedThemes.set(t.name,t),this._loadedThemesCache=null),t}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let t=this._textmateThemeCache.get(e);t||(t=NV.createFromRawTheme(e),this._textmateThemeCache.set(e,t)),this._syncRegistry.setTheme(t)}getGrammar(e){if(this._alias[e]){const t=new Set([e]);for(;this._alias[e];){if(e=this._alias[e],t.has(e))throw new MU(`Circular alias \`${Array.from(t).join(" -> ")} -> ${e}\``);t.add(e)}}return this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const t=new Set([...this._langMap.values()].filter((t=>t.embeddedLangsLazy?.includes(e.name))));this._resolver.addLanguage(e);const n={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const r=this.loadGrammarWithConfiguration(e.scopeName,1,n);if(r.name=e.name,this._resolvedGrammars.set(e.name,r),e.aliases&&e.aliases.forEach((t=>{this._alias[t]=e.name})),this._loadedLanguagesCache=null,t.size)for(const e of t)this._resolvedGrammars.delete(e.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(e.scopeName),this._syncRegistry?._grammars?.delete(e.scopeName),this.loadLanguage(this._langMap.get(e.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const t of e)this.resolveEmbeddedLanguages(t);const t=Array.from(this._langGraph.entries()),n=t.filter((([e,t])=>!t));if(n.length){const e=t.filter((([e,t])=>t&&t.embeddedLangs?.some((e=>n.map((([e])=>e)).includes(e))))).filter((e=>!n.includes(e)));throw new MU(`Missing languages ${n.map((([e])=>`\`${e}\``)).join(", ")}, required by ${e.map((([e])=>`\`${e}\``)).join(", ")}`)}for(const[e,n]of t)this._resolver.addLanguage(n);for(const[e,n]of t)this.loadLanguage(n)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){if(this._langMap.set(e.name,e),this._langGraph.set(e.name,e),e.embeddedLangs)for(const t of e.embeddedLangs)this._langGraph.set(t,this._langMap.get(t))}}class PU{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,t){this._onigLib={createOnigScanner:t=>e.createScanner(t),createOnigString:t=>e.createString(t)},t.forEach((e=>this.addLanguage(e)))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach((t=>{this._langs.set(t,e)})),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach((t=>{this._injections.get(t)||this._injections.set(t,[]),this._injections.get(t).push(e.scopeName)}))}getInjections(e){const t=e.split(".");let n=[];for(let e=1;e<=t.length;e++){const r=t.slice(0,e).join(".");n=[...n,...this._injections.get(r)||[]]}return n}}let TU=0;async function NU(e){e.engine||function(e,t=3){t>3||console.trace(`[SHIKI DEPRECATE]: ${e}`)}("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[t,n,r]=await Promise.all([OU(e.themes||[]),FU(e.langs||[]),e.engine]);return function(e){TU+=1,!1!==e.warnings&&TU>=10&&TU%10==0&&console.warn(`[Shiki] ${TU} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let t=!1;if(!e.engine)throw new MU("`engine` option is required for synchronous mode");const n=(e.langs||[]).flat(1),r=(e.themes||[]).flat(1).map(AU),o=new PU(e.engine,n),i=new BU(o,r,n,e.langAlias);let a;function s(e){if("none"===e)return{bg:"",fg:"",name:"none",settings:[],type:"dark"};c();const t=i.getTheme(e);if(!t)throw new MU(`Theme \`${e}\` not found, you may need to load it first`);return t}function u(...e){c(),i.loadLanguages(e.flat(1))}function l(...e){c();for(const t of e.flat(1))i.loadTheme(t)}function c(){if(t)throw new MU("Shiki instance has been disposed")}function d(){t||(t=!0,i.dispose(),TU-=1)}return{setTheme:function(e){c();const t=s(e);return a!==e&&(i.setTheme(t),a=e),{theme:t,colorMap:i.getColorMap()}},getTheme:s,getLanguage:function(e){c();const t=i.getGrammar("string"==typeof e?e:e.name);if(!t)throw new MU(`Language \`${e}\` not found, you may need to load it first`);return t},getLoadedThemes:function(){return c(),i.getLoadedThemes()},getLoadedLanguages:function(){return c(),i.getLoadedLanguages()},loadLanguage:async function(...e){return u(await FU(e))},loadLanguageSync:u,loadTheme:async function(...e){return c(),l(await OU(e))},loadThemeSync:l,dispose:d,[Symbol.dispose]:d}}({...e,themes:t,langs:n,engine:r})}async function jU(e){const t=await NU(e);return{getLastGrammarState:(...e)=>function(...e){if(2===e.length)return nU(e[1]);const[t,n,r={}]=e,{lang:o="text",theme:i=t.getLoadedThemes()[0]}=r;if(G$(o)||q$(i))throw new sV("Plain language does not have grammar state");if("ansi"===o)throw new sV("ANSI language does not have grammar state");const{theme:a,colorMap:s}=t.setTheme(i),u=t.getLanguage(o);return new rU(vU(n,u,a,s,r).stateStack,u.name,a.name)}(t,...e),codeToTokensBase:(e,n)=>mU(t,e,n),codeToTokensWithThemes:(e,n)=>wU(t,e,n),codeToTokens:(e,n)=>CU(t,e,n),codeToHast:(e,n)=>EU(t,e,n),codeToHtml:(e,n)=>function(e,t,n){const r={meta:{},options:n,codeToHast:(t,n)=>EU(e,t,n),codeToTokens:(t,n)=>CU(e,t,n)};let o=xU(EU(e,t,n,r));for(const e of sU(n))o=e.postprocess?.call(r,o,n)||o;return o}(t,e,n),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...t,getInternalContext:()=>t}}function _U(e){const t=e.langs,n=e.themes,r=e.engine;return async function(e){function o(e){if("string"==typeof e){if(W$(e))return[];const n=t[e];if(!n)throw new sV(`Language \`${e}\` is not included in this bundle. You may want to load it from external source.`);return n}return e}function i(e){if(K$(e))return"none";if("string"==typeof e){const t=n[e];if(!t)throw new sV(`Theme \`${e}\` is not included in this bundle. You may want to load it from external source.`);return t}return e}const a=(e.themes??[]).map((e=>i(e))),s=(e.langs??[]).map((e=>o(e))),u=await jU({engine:e.engine??r(),...e,themes:a,langs:s});return{...u,loadLanguage:(...e)=>u.loadLanguage(...e.map(o)),loadTheme:(...e)=>u.loadTheme(...e.map(i)),getBundledLanguages:()=>t,getBundledThemes:()=>n}}}var RU=a(6527);const LU=4294967295;class IU{constructor(e,t={}){this.patterns=e,this.options=t;const{forgiving:n=!1,cache:r,regexConstructor:o}=t;if(!o)throw new Error("Option `regexConstructor` is not provided");this.regexps=e.map((e=>{if("string"!=typeof e)return e;const t=r?.get(e);if(t){if(t instanceof RegExp)return t;if(n)return null;throw t}try{const t=o(e);return r?.set(e,t),t}catch(t){if(r?.set(e,t),n)return null;throw t}}))}regexps;findNextMatchSync(e,t,n){const r="string"==typeof e?e:e.content,o=[];function i(e,t,n=0){return{index:e,captureIndices:t.indices.map((e=>null==e?{start:LU,end:LU,length:0}:{start:e[0]+n,end:e[1]+n,length:e[1]-e[0]}))}}for(let e=0;e<this.regexps.length;e++){const n=this.regexps[e];if(n)try{n.lastIndex=t;const a=n.exec(r);if(!a)continue;if(a.index===t)return i(e,a,0);o.push([e,a,0])}catch(e){if(this.options.forgiving)continue;throw e}}if(o.length){const e=Math.min(...o.map((e=>e[1].index)));for(const[t,n,r]of o)if(n.index===e)return i(t,n,r)}return null}}var HU=_U({langs:{c:function(){return a.e(1435).then(a.bind(a,1435))},cpp:function(){return Promise.all([a.e(1435),a.e(6368),a.e(957)]).then(a.bind(a,957))},"c++":function(){return Promise.all([a.e(1435),a.e(6368),a.e(957)]).then(a.bind(a,957))},css:function(){return a.e(9713).then(a.bind(a,9713))},glsl:function(){return Promise.all([a.e(1435),a.e(5040)]).then(a.bind(a,5040))},graphql:function(){return Promise.all([a.e(5689),a.e(4705),a.e(6065),a.e(9011),a.e(439)]).then(a.bind(a,439))},gql:function(){return Promise.all([a.e(5689),a.e(4705),a.e(6065),a.e(9011),a.e(439)]).then(a.bind(a,439))},haml:function(){return Promise.all([a.e(5689),a.e(9713),a.e(9190)]).then(a.bind(a,9190))},html:function(){return Promise.all([a.e(5689),a.e(9713),a.e(95)]).then(a.bind(a,95))},java:function(){return a.e(4340).then(a.bind(a,4340))},javascript:function(){return a.e(5689).then(a.bind(a,5689))},js:function(){return a.e(5689).then(a.bind(a,5689))},json:function(){return a.e(7294).then(a.bind(a,7294))},jsonc:function(){return a.e(2477).then(a.bind(a,2477))},jsonl:function(){return a.e(4282).then(a.bind(a,4282))},jsx:function(){return a.e(9011).then(a.bind(a,9011))},julia:function(){return Promise.all([a.e(5689),a.e(1435),a.e(6368),a.e(957),a.e(462),a.e(4482),a.e(1491)]).then(a.bind(a,1491))},jl:function(){return Promise.all([a.e(5689),a.e(1435),a.e(6368),a.e(957),a.e(462),a.e(4482),a.e(1491)]).then(a.bind(a,1491))},less:function(){return a.e(1419).then(a.bind(a,1419))},markdown:function(){return a.e(8375).then(a.bind(a,8375))},md:function(){return a.e(8375).then(a.bind(a,8375))},mdx:function(){return a.e(8337).then(a.bind(a,8337))},php:function(){return Promise.all([a.e(5689),a.e(9713),a.e(95),a.e(6368),a.e(4340),a.e(9240)]).then(a.bind(a,9240))},postcss:function(){return a.e(9019).then(a.bind(a,9019))},pug:function(){return Promise.all([a.e(5689),a.e(9713),a.e(95),a.e(4860)]).then(a.bind(a,4860))},jade:function(){return Promise.all([a.e(5689),a.e(9713),a.e(95),a.e(4860)]).then(a.bind(a,4860))},python:function(){return a.e(462).then(a.bind(a,462))},py:function(){return a.e(462).then(a.bind(a,462))},r:function(){return a.e(4482).then(a.bind(a,4482))},regexp:function(){return a.e(2567).then(a.bind(a,2567))},regex:function(){return a.e(2567).then(a.bind(a,2567))},sass:function(){return a.e(9750).then(a.bind(a,9750))},scss:function(){return Promise.all([a.e(9713),a.e(416)]).then(a.bind(a,416))},shellscript:function(){return a.e(2079).then(a.bind(a,2079))},bash:function(){return a.e(2079).then(a.bind(a,2079))},sh:function(){return a.e(2079).then(a.bind(a,2079))},shell:function(){return a.e(2079).then(a.bind(a,2079))},zsh:function(){return a.e(2079).then(a.bind(a,2079))},sql:function(){return a.e(6368).then(a.bind(a,6368))},svelte:function(){return Promise.all([a.e(5689),a.e(9713),a.e(4705),a.e(5489)]).then(a.bind(a,5489))},typescript:function(){return a.e(4705).then(a.bind(a,4705))},ts:function(){return a.e(4705).then(a.bind(a,4705))},vue:function(){return Promise.all([a.e(5689),a.e(9713),a.e(4705),a.e(95),a.e(5250)]).then(a.bind(a,5250))},"vue-html":function(){return Promise.all([a.e(5689),a.e(9713),a.e(4705),a.e(95),a.e(6578)]).then(a.bind(a,6578))},wasm:function(){return a.e(9132).then(a.bind(a,9132))},wgsl:function(){return a.e(7351).then(a.bind(a,7351))},xml:function(){return Promise.all([a.e(4340),a.e(2063)]).then(a.bind(a,2063))},yaml:function(){return a.e(2545).then(a.bind(a,2545))},yml:function(){return a.e(2545).then(a.bind(a,2545))},tsx:function(){return a.e(6065).then(a.bind(a,8446))},typescriptreact:function(){return a.e(6065).then(a.bind(a,8446))},haskell:function(){return a.e(2012).then(a.bind(a,2012))},hs:function(){return a.e(2012).then(a.bind(a,2012))},"c#":function(){return a.e(4209).then(a.bind(a,4209))},csharp:function(){return a.e(4209).then(a.bind(a,4209))},cs:function(){return a.e(4209).then(a.bind(a,4209))},latex:function(){return Promise.all([a.e(4482),a.e(5532)]).then(a.bind(a,5532))},lua:function(){return Promise.all([a.e(1435),a.e(1038)]).then(a.bind(a,1038))},mermaid:function(){return a.e(9909).then(a.bind(a,9909))},mmd:function(){return a.e(9909).then(a.bind(a,9909))},ruby:function(){return Promise.all([a.e(5689),a.e(9713),a.e(4705),a.e(1435),a.e(95),a.e(6368),a.e(2079),a.e(957),a.e(6065),a.e(9011),a.e(4340),a.e(4460)]).then(a.bind(a,4460))},rb:function(){return Promise.all([a.e(5689),a.e(9713),a.e(4705),a.e(1435),a.e(95),a.e(6368),a.e(2079),a.e(957),a.e(6065),a.e(9011),a.e(4340),a.e(4460)]).then(a.bind(a,4460))},rust:function(){return a.e(3514).then(a.bind(a,3514))},rs:function(){return a.e(3514).then(a.bind(a,3514))},scala:function(){return a.e(2966).then(a.bind(a,2966))},swift:function(){return a.e(5793).then(a.bind(a,5793))},kotlin:function(){return a.e(1523).then(a.bind(a,1523))},kt:function(){return a.e(1523).then(a.bind(a,1523))},kts:function(){return a.e(1523).then(a.bind(a,1523))},"objective-c":function(){return a.e(3449).then(a.bind(a,3449))},objc:function(){return a.e(3449).then(a.bind(a,3449))}},themes:{"github-dark":function(){return a.e(9738).then(a.bind(a,9738))},"github-light":function(){return a.e(7938).then(a.bind(a,7938))}},engine:function(){return function(e={}){const t=Object.assign({target:"auto",cache:new Map},e);return t.regexConstructor||=e=>function(e,t){return(0,RU.vr)(e,{global:!0,hasIndices:!0,lazyCompileLength:3e3,rules:{allowOrphanBackrefs:!0,asciiWordBoundaries:!0,captureGroup:!0,recursionLimit:5,singleline:!0},...t})}(e,{target:t.target}),{createScanner:e=>new IU(e,t),createString:e=>({content:e})}}()}}),zU={defaultLanguage:"javascript",supportedLanguages:{text:{name:"Plain Text",aliases:["text","txt","plain"]},c:{name:"C",aliases:["c"]},cpp:{name:"C++",aliases:["cpp","c++"]},css:{name:"CSS",aliases:["css"]},glsl:{name:"GLSL",aliases:["glsl"]},graphql:{name:"GraphQL",aliases:["graphql","gql"]},haml:{name:"Ruby Haml",aliases:["haml"]},html:{name:"HTML",aliases:["html"]},java:{name:"Java",aliases:["java"]},javascript:{name:"JavaScript",aliases:["javascript","js"]},json:{name:"JSON",aliases:["json"]},jsonc:{name:"JSON with Comments",aliases:["jsonc"]},jsonl:{name:"JSON Lines",aliases:["jsonl"]},jsx:{name:"JSX",aliases:["jsx"]},julia:{name:"Julia",aliases:["julia","jl"]},less:{name:"Less",aliases:["less"]},markdown:{name:"Markdown",aliases:["markdown","md"]},mdx:{name:"MDX",aliases:["mdx"]},php:{name:"PHP",aliases:["php"]},postcss:{name:"PostCSS",aliases:["postcss"]},pug:{name:"Pug",aliases:["pug","jade"]},python:{name:"Python",aliases:["python","py"]},r:{name:"R",aliases:["r"]},regexp:{name:"RegExp",aliases:["regexp","regex"]},sass:{name:"Sass",aliases:["sass"]},scss:{name:"SCSS",aliases:["scss"]},shellscript:{name:"Shell",aliases:["shellscript","bash","sh","shell","zsh"]},sql:{name:"SQL",aliases:["sql"]},svelte:{name:"Svelte",aliases:["svelte"]},typescript:{name:"TypeScript",aliases:["typescript","ts"]},vue:{name:"Vue",aliases:["vue"]},"vue-html":{name:"Vue HTML",aliases:["vue-html"]},wasm:{name:"WebAssembly",aliases:["wasm"]},wgsl:{name:"WGSL",aliases:["wgsl"]},xml:{name:"XML",aliases:["xml"]},yaml:{name:"YAML",aliases:["yaml","yml"]},tsx:{name:"TSX",aliases:["tsx","typescriptreact"]},haskell:{name:"Haskell",aliases:["haskell","hs"]},csharp:{name:"C#",aliases:["c#","csharp","cs"]},latex:{name:"LaTeX",aliases:["latex"]},lua:{name:"Lua",aliases:["lua"]},mermaid:{name:"Mermaid",aliases:["mermaid","mmd"]},ruby:{name:"Ruby",aliases:["ruby","rb"]},rust:{name:"Rust",aliases:["rust","rs"]},scala:{name:"Scala",aliases:["scala"]},swift:{name:"Swift",aliases:["swift"]},kotlin:{name:"Kotlin",aliases:["kotlin","kt","kts"]},"objective-c":{name:"Objective C",aliases:["objective-c","objc"]}},createHighlighter:function(){return HU({themes:["github-dark","github-light"],langs:[]})}};const VU=require("pydio/http/api");var $U=a.n(VU),UU="mention",GU=$T({type:UU,propSchema:{user:{default:"Unknown"}},content:"none"},{render:function(e){return React.createElement("span",{style:{backgroundColor:"#8400ff33",padding:"2px 5px",fontSize:15,borderRadius:5}},"@",e.inlineContent.props.user)}}),WU=function(e){var t=e.editor;return React.createElement(YP,{triggerCharacter:"@",getItems:function(e){return function(e,t){return $U().getRestClient().getIdmApi().listUsers("/",t,!0,0,10).then((function(t){var n=t.Users;return(void 0===n?[]:n).map((function(t){var n=t.Attributes&&t.Attributes.displayName?t.Attributes.displayName:t.Login;return{title:n,onItemClick:function(){e.insertInlineContent([{type:UU,props:{user:n}}," "])}}}))}))}(t,e)}})},qU={mention:GU};const KU=require("pydio/http/search-api");var JU=a.n(KU),ZU=(0,o.createContext)({dataModel:r().getInstance().getContextHolder()});const[XU,YU]=uR("HoverCard component was not found in the tree"),QU={};function eG(e){const{children:t,onMouseEnter:n,onMouseLeave:r,...o}=kN("HoverCardDropdown",QU,e),i=YU(),a=tI(n,i.openDropdown),s=tI(r,i.closeDropdown);return(0,x.jsx)(JL.Dropdown,{onMouseEnter:a,onMouseLeave:s,...o,children:t})}eG.displayName="@mantine/core/HoverCardDropdown";const tG={refProp:"ref"},nG=(0,o.forwardRef)(((e,t)=>{const{children:n,refProp:r,eventPropsWrapperName:i,...a}=kN("HoverCardTarget",tG,e);if(!u_(n))throw new Error("HoverCard.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=YU(),u={onMouseEnter:tI(n.props.onMouseEnter,s.openDropdown),onMouseLeave:tI(n.props.onMouseLeave,s.closeDropdown)};return(0,x.jsx)(JL.Target,{refProp:r,ref:t,...a,children:(0,o.cloneElement)(n,i?{[i]:u}:u)})}));nG.displayName="@mantine/core/HoverCardTarget";const rG={openDelay:0,closeDelay:150,initiallyOpened:!1};function oG(e){const{children:t,onOpen:n,onClose:r,openDelay:i,closeDelay:a,initiallyOpened:s,...u}=kN("HoverCard",rG,e),[l,{open:c,close:d}]=function(e=!1,t){const{onOpen:n,onClose:r}=t||{},[i,a]=(0,o.useState)(e),s=(0,o.useCallback)((()=>{a((e=>e||(n?.(),!0)))}),[n]),u=(0,o.useCallback)((()=>{a((e=>e?(r?.(),!1):e))}),[r]),l=(0,o.useCallback)((()=>{i?u():s()}),[u,s,i]);return[i,{open:s,close:u,toggle:l}]}(s,{onClose:r,onOpen:n}),{openDropdown:f,closeDropdown:p}=bL({open:c,close:d,openDelay:i,closeDelay:a});return(0,x.jsx)(XU,{value:{openDropdown:f,closeDropdown:p},children:(0,x.jsx)(JL,{...u,opened:l,__staticSelector:"HoverCard",children:t})})}oG.displayName="@mantine/core/HoverCard",oG.Target=nG,oG.Dropdown=eG,oG.extend=e=>e;const iG=require("pydio/util/path");var aG=a.n(iG),sG=a(7919),uG=a.n(sG),lG={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},cG=o.createContext&&o.createContext(lG),dG=["attr","size","title"];function fG(){return fG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fG.apply(this,arguments)}function pG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pG(Object(n),!0).forEach((function(t){mG(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pG(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mG(e,t,n){return t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vG(e){return e&&e.map(((e,t)=>o.createElement(e.tag,hG({key:t},e.attr),vG(e.child))))}function gG(e){return t=>o.createElement(yG,fG({attr:hG({},e.attr)},t),vG(e.child))}function yG(e){var t=t=>{var n,{attr:r,size:i,title:a}=e,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,dG),u=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),o.createElement("svg",fG({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,s,{className:n,style:hG(hG({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),a&&o.createElement("title",null,a),e.children)};return void 0!==cG?o.createElement(cG.Consumer,null,(e=>t(e))):t(lG)}function bG(e){return gG({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"},child:[]}]})(e)}function DG(e){return DG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DG(e)}function wG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wG(Object(n),!0).forEach((function(t){kG(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wG(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kG(e,t,n){return(t=function(e){var t=function(e){if("object"!=DG(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=DG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==DG(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var EG=function(e){var t=e.target,n=e.groups,r=e.settingsStyle,i=void 0===r?{}:r,a=e.position,s=void 0===a?"bottom-end":a;return(0,o.useMemo)((function(){var e=fI.Target,r=fI.Dropdown,a=fI.Label,u=fI.Item;return React.createElement(fI,{withinPortal:!1,position:s},React.createElement(e,null,t||React.createElement("span",{style:CG({fontSize:"1rem",lineHeight:"1rem",cursor:"pointer",opacity:.73},i)},React.createElement(bG,null))),React.createElement(r,null,n&&n.map((function(e){var t=e.title,n=e.values,r=void 0===n?[]:n,i=e.onValueSelected,s=void 0===i?function(e){}:i,l=e.crtValue;return React.createElement(o.Fragment,null,React.createElement(a,null,t),r&&r.map((function(e){var t=e.icon;return React.createElement(u,{key:e.value,value:e.value,leftSection:React.createElement(t,{"data-alert-icon-type":e.value}),onClick:function(){return s(e.value)}},React.createElement("span",{style:{fontWeight:e.value===l?"bold":"normal"}},e.title))})))}))))}),[t,n,i,s])};const xG=require("pydio/model/node");var SG=a.n(xG);function AG(e,t){return function(){return e.apply(t,arguments)}}function FG(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function OG(e){return OG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OG(e)}var MG=Object.prototype.toString,BG=Object.getPrototypeOf,PG=Symbol.iterator,TG=Symbol.toStringTag,NG=function(e){return function(t){var n=MG.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null)),jG=function(e){return e=e.toLowerCase(),function(t){return NG(t)===e}},_G=function(e){return function(t){return OG(t)===e}},RG=Array.isArray,LG=_G("undefined"),IG=jG("ArrayBuffer"),HG=_G("string"),zG=_G("function"),VG=_G("number"),$G=function(e){return null!==e&&"object"===OG(e)},UG=function(e){if("object"!==NG(e))return!1;var t=BG(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||TG in e||PG in e)},GG=jG("Date"),WG=jG("File"),qG=jG("Blob"),KG=jG("FileList"),JG=jG("URLSearchParams"),ZG=function(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,r,o,i,a=[],s=!0,u=!1;try{for(o=(t=t.call(e)).next,!4;!(s=(n=o.call(t)).done)&&(a.push(n.value),4!==a.length);s=!0);}catch(e){u=!0,r=e}finally{try{if(!s&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(u)throw r}}return a}}(e)||function(e){if(e){if("string"==typeof e)return FG(e,4);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?FG(e,4):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(["ReadableStream","Request","Response","Headers"].map(jG)),XG=ZG[0],YG=ZG[1],QG=ZG[2],eW=ZG[3];function tW(e,t){var n,r,o=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,i=void 0!==o&&o;if(null!=e)if("object"!==OG(e)&&(e=[e]),RG(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var a,s=i?Object.getOwnPropertyNames(e):Object.keys(e),u=s.length;for(n=0;n<u;n++)a=s[n],t.call(null,e[a],a,e)}}function nW(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),o=r.length;o-- >0;)if(t===(n=r[o]).toLowerCase())return n;return null}var rW,oW,iW,aW,sW,uW,lW="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,cW=function(e){return!LG(e)&&e!==lW},dW=(rW="undefined"!=typeof Uint8Array&&BG(Uint8Array),function(e){return rW&&e instanceof rW}),fW=jG("HTMLFormElement"),pW=(oW=Object.prototype.hasOwnProperty,function(e,t){return oW.call(e,t)}),hW=jG("RegExp"),mW=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};tW(n,(function(n,o){var i;!1!==(i=t(n,o,e))&&(r[o]=i||n)})),Object.defineProperties(e,r)},vW=jG("AsyncFunction"),gW=(iW="function"==typeof setImmediate,aW=zG(lW.postMessage),iW?setImmediate:aW?(sW="axios@".concat(Math.random()),uW=[],lW.addEventListener("message",(function(e){var t=e.source,n=e.data;t===lW&&n===sW&&uW.length&&uW.shift()()}),!1),function(e){uW.push(e),lW.postMessage(sW,"*")}):function(e){return setTimeout(e)}),yW="undefined"!=typeof queueMicrotask?queueMicrotask.bind(lW):"undefined"!=typeof process&&process.nextTick||gW;const bW={isArray:RG,isArrayBuffer:IG,isBuffer:function(e){return null!==e&&!LG(e)&&null!==e.constructor&&!LG(e.constructor)&&zG(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t;return e&&("function"==typeof FormData&&e instanceof FormData||zG(e.append)&&("formdata"===(t=NG(e))||"object"===t&&zG(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&IG(e.buffer)},isString:HG,isNumber:VG,isBoolean:function(e){return!0===e||!1===e},isObject:$G,isPlainObject:UG,isReadableStream:XG,isRequest:YG,isResponse:QG,isHeaders:eW,isUndefined:LG,isDate:GG,isFile:WG,isBlob:qG,isRegExp:hW,isFunction:zG,isStream:function(e){return $G(e)&&zG(e.pipe)},isURLSearchParams:JG,isTypedArray:dW,isFileList:KG,forEach:tW,merge:function e(){for(var t=(cW(this)&&this||{}).caseless,n={},r=function(r,o){var i=t&&nW(n,o)||o;UG(n[i])&&UG(r)?n[i]=e(n[i],r):UG(r)?n[i]=e({},r):RG(r)?n[i]=r.slice():n[i]=r},o=0,i=arguments.length;o<i;o++)arguments[o]&&tW(arguments[o],r);return n},extend:function(e,t,n){return tW(t,(function(t,r){n&&zG(t)?e[r]=AG(t,n):e[r]=t}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var o,i,a,s={};if(t=t||{},null==e)return t;do{for(i=(o=Object.getOwnPropertyNames(e)).length;i-- >0;)a=o[i],r&&!r(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==n&&BG(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:NG,kindOfTest:jG,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(RG(e))return e;var t=e.length;if(!VG(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[PG]).call(e);(n=r.next())&&!n.done;){var o=n.value;t.call(e,o[0],o[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:fW,hasOwnProperty:pW,hasOwnProp:pW,reduceDescriptors:mW,freezeMethods:function(e){mW(e,(function(t,n){if(zG(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];zG(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return RG(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return null!=e&&Number.isFinite(e=+e)?e:t},findKey:nW,global:lW,isContextDefined:cW,isSpecCompliantForm:function(e){return!!(e&&zG(e.append)&&"FormData"===e[TG]&&e[PG])},toJSONObject:function(e){var t=new Array(10),n=function(e,r){if($G(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;var o=RG(e)?[]:{};return tW(e,(function(e,t){var i=n(e,r+1);!LG(i)&&(o[t]=i)})),t[r]=void 0,o}}return e};return n(e,0)},isAsyncFn:vW,isThenable:function(e){return e&&($G(e)||zG(e))&&zG(e.then)&&zG(e.catch)},setImmediate:gW,asap:yW,isIterable:function(e){return null!=e&&zG(e[PG])}};function DW(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}bW.inherits(DW,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:bW.toJSONObject(this.config),code:this.code,status:this.status}}});var wW=DW.prototype,CW={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){CW[e]={value:e}})),Object.defineProperties(DW,CW),Object.defineProperty(wW,"isAxiosError",{value:!0}),DW.from=function(e,t,n,r,o,i){var a=Object.create(wW);return bW.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),DW.call(a,e.message,t,n,r,o),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const kW=DW;function EW(e){return EW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EW(e)}function xW(e){return bW.isPlainObject(e)||bW.isArray(e)}function SW(e){return bW.endsWith(e,"[]")?e.slice(0,-2):e}function AW(e,t,n){return e?e.concat(t).map((function(e,t){return e=SW(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var FW=bW.toFlatObject(bW,{},null,(function(e){return/^is[A-Z]/.test(e)}));const OW=function(e,t,n){if(!bW.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;var r=(n=bW.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!bW.isUndefined(t[e])}))).metaTokens,o=n.visitor||l,i=n.dots,a=n.indexes,s=(n.Blob||"undefined"!=typeof Blob&&Blob)&&bW.isSpecCompliantForm(t);if(!bW.isFunction(o))throw new TypeError("visitor must be a function");function u(e){if(null===e)return"";if(bW.isDate(e))return e.toISOString();if(bW.isBoolean(e))return e.toString();if(!s&&bW.isBlob(e))throw new kW("Blob is not supported. Use a Buffer instead.");return bW.isArrayBuffer(e)||bW.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,o){var s=e;if(e&&!o&&"object"===EW(e))if(bW.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(bW.isArray(e)&&function(e){return bW.isArray(e)&&!e.some(xW)}(e)||(bW.isFileList(e)||bW.endsWith(n,"[]"))&&(s=bW.toArray(e)))return n=SW(n),s.forEach((function(e,r){!bW.isUndefined(e)&&null!==e&&t.append(!0===a?AW([n],r,i):null===a?n:n+"[]",u(e))})),!1;return!!xW(e)||(t.append(AW(o,n,i),u(e)),!1)}var c=[],d=Object.assign(FW,{defaultVisitor:l,convertValue:u,isVisitable:xW});if(!bW.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!bW.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+r.join("."));c.push(n),bW.forEach(n,(function(n,i){!0===(!(bW.isUndefined(n)||null===n)&&o.call(t,n,bW.isString(i)?i.trim():i,r,d))&&e(n,r?r.concat(i):[i])})),c.pop()}}(e),t};function MW(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function BW(e,t){this._pairs=[],e&&OW(e,this,t)}var PW=BW.prototype;PW.append=function(e,t){this._pairs.push([e,t])},PW.toString=function(e){var t=e?function(t){return e.call(this,t,MW)}:MW;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const TW=BW;function NW(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function jW(e,t,n){if(!t)return e;var r=n&&n.encode||NW;bW.isFunction(n)&&(n={serialize:n});var o,i=n&&n.serialize;if(o=i?i(t,n):bW.isURLSearchParams(t)?t.toString():new TW(t,n).toString(r)){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}function _W(e){return _W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_W(e)}function RW(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,LW(r.key),r)}}function LW(e){var t=function(e){if("object"!=_W(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=_W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_W(t)?t:t+""}var IW=function(){return function(e,t){return t&&RW(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.handlers=[]}),[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){bW.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}])}();const HW=IW,zW={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},VW={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:TW,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};function $W(e){return $W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$W(e)}var UW="undefined"!=typeof window&&"undefined"!=typeof document,GW="object"===("undefined"==typeof navigator?"undefined":$W(navigator))&&navigator||void 0,WW=UW&&(!GW||["ReactNative","NativeScript","NS"].indexOf(GW.product)<0),qW="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,KW=UW&&window.location.href||"http://localhost";function JW(e){return JW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JW(e)}function ZW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function XW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZW(Object(n),!0).forEach((function(t){YW(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZW(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function YW(e,t,n){return(t=function(e){var t=function(e){if("object"!=JW(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=JW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==JW(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const QW=XW(XW({},e),VW),eq=function(e){function t(e,n,r,o){var i=e[o++];if("__proto__"===i)return!0;var a=Number.isFinite(+i),s=o>=e.length;return i=!i&&bW.isArray(r)?r.length:i,s?(bW.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!a):(r[i]&&bW.isObject(r[i])||(r[i]=[]),t(e,n,r[i],o)&&bW.isArray(r[i])&&(r[i]=function(e){var t,n,r={},o=Object.keys(e),i=o.length;for(t=0;t<i;t++)r[n=o[t]]=e[n];return r}(r[i])),!a)}if(bW.isFormData(e)&&bW.isFunction(e.entries)){var n={};return bW.forEachEntry(e,(function(e,r){t(function(e){return bW.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null};var tq={transitional:zW,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){var n,r=t.getContentType()||"",o=r.indexOf("application/json")>-1,i=bW.isObject(e);if(i&&bW.isHTMLForm(e)&&(e=new FormData(e)),bW.isFormData(e))return o?JSON.stringify(eq(e)):e;if(bW.isArrayBuffer(e)||bW.isBuffer(e)||bW.isStream(e)||bW.isFile(e)||bW.isBlob(e)||bW.isReadableStream(e))return e;if(bW.isArrayBufferView(e))return e.buffer;if(bW.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return OW(e,new QW.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return QW.isNode&&bW.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=bW.isFileList(e))||r.indexOf("multipart/form-data")>-1){var a=this.env&&this.env.FormData;return OW(n?{"files[]":e}:e,a&&new a,this.formSerializer)}}return i||o?(t.setContentType("application/json",!1),function(e){if(bW.isString(e))try{return(0,JSON.parse)(e),bW.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||tq.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(bW.isResponse(e)||bW.isReadableStream(e))return e;if(e&&bW.isString(e)&&(n&&!this.responseType||r)){var o=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw kW.from(e,kW.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:QW.classes.FormData,Blob:QW.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};bW.forEach(["delete","get","head","post","put","patch"],(function(e){tq.headers[e]={}}));const nq=tq;var rq=bW.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);function oq(e){return oq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oq(e)}function iq(e){return function(e){if(Array.isArray(e))return sq(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||aq(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aq(e,t){if(e){if("string"==typeof e)return sq(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sq(e,t):void 0}}function sq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function uq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lq(r.key),r)}}function lq(e){var t=function(e){if("object"!=oq(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=oq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==oq(t)?t:t+""}var cq=Symbol("internals");function dq(e){return e&&String(e).trim().toLowerCase()}function fq(e){return!1===e||null==e?e:bW.isArray(e)?e.map(fq):String(e)}function pq(e,t,n,r,o){return bW.isFunction(r)?r.call(this,t,n):(o&&(t=n),bW.isString(t)?bW.isString(r)?-1!==t.indexOf(r):bW.isRegExp(r)?r.test(t):void 0:void 0)}var hq=function(){return function(e,t,n){return t&&uq(e.prototype,t),n&&uq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&this.set(t)}),[{key:"set",value:function(e,t,n){var r=this;function o(e,t,n){var o=dq(t);if(!o)throw new Error("header name must be a non-empty string");var i=bW.findKey(r,o);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=fq(e))}var i=function(e,t){return bW.forEach(e,(function(e,n){return o(e,n,t)}))};if(bW.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(bW.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i(function(e){var t,n,r,o={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||o[t]&&rq[t]||("set-cookie"===t?o[t]?o[t].push(n):o[t]=[n]:o[t]=o[t]?o[t]+", "+n:n)})),o}(e),t);else if(bW.isObject(e)&&bW.isIterable(e)){var a,s,u,l={},c=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=aq(e))){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==t.return||t.return()}finally{if(a)throw o}}}}(e);try{for(c.s();!(u=c.n()).done;){var d=u.value;if(!bW.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[s=d[0]]=(a=l[s])?bW.isArray(a)?[].concat(iq(a),[d[1]]):[a,d[1]]:d[1]}}catch(e){c.e(e)}finally{c.f()}i(l,t)}else null!=e&&o(t,e,n);return this}},{key:"get",value:function(e,t){if(e=dq(e)){var n=bW.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(bW.isFunction(t))return t.call(this,r,n);if(bW.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=dq(e)){var n=bW.findKey(this,e);return!(!n||void 0===this[n]||t&&!pq(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function o(e){if(e=dq(e)){var o=bW.findKey(n,e);!o||t&&!pq(0,n[o],o,t)||(delete n[o],r=!0)}}return bW.isArray(e)?e.forEach(o):o(e),r}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var o=t[n];e&&!pq(0,this[o],o,e,!0)||(delete this[o],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return bW.forEach(this,(function(r,o){var i=bW.findKey(n,o);if(i)return t[i]=fq(r),void delete t[o];var a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(o):String(o).trim();a!==o&&delete t[o],t[a]=fq(r),n[a]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.constructor).concat.apply(e,[this].concat(n))}},{key:"toJSON",value:function(e){var t=Object.create(null);return bW.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&bW.isArray(n)?n.join(", "):n)})),t}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||aq(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:"getSetCookie",value:function(){return this.get("set-cookie")||[]}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[cq]=this[cq]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=dq(e);t[r]||(function(e,t){var n=bW.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,o){return this[r].call(this,t,e,n,o)},configurable:!0})}))}(n,e),t[r]=!0)}return bW.isArray(e)?e.forEach(r):r(e),this}}])}();hq.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),bW.reduceDescriptors(hq.prototype,(function(e,t){var n=e.value,r=t[0].toUpperCase()+t.slice(1);return{get:function(){return n},set:function(e){this[r]=e}}})),bW.freezeMethods(hq);const mq=hq;function vq(e,t){var n=this||nq,r=t||n,o=mq.from(r.headers),i=r.data;return bW.forEach(e,(function(e){i=e.call(n,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function gq(e){return!(!e||!e.__CANCEL__)}function yq(e,t,n){kW.call(this,null==e?"canceled":e,kW.ERR_CANCELED,t,n),this.name="CanceledError"}bW.inherits(yq,kW,{__CANCEL__:!0});const bq=yq;function Dq(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new kW("Request failed with status code "+n.status,[kW.ERR_BAD_REQUEST,kW.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}function wq(e){return wq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wq(e)}var Cq=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0,o=function(e,t){e=e||10;var n,r=new Array(e),o=new Array(e),i=0,a=0;return t=void 0!==t?t:1e3,function(s){var u=Date.now(),l=o[a];n||(n=u),r[i]=s,o[i]=u;for(var c=a,d=0;c!==i;)d+=r[c++],c%=e;if((i=(i+1)%e)===a&&(a=(a+1)%e),!(u-n<t)){var f=l&&u-l;return f?Math.round(1e3*d/f):void 0}}}(50,250);return function(e,t){var n,r,o=0,i=1e3/t,a=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();o=i,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){for(var e=Date.now(),t=e-o,s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];t>=i?a(u,e):(n=u,r||(r=setTimeout((function(){r=null,a(n)}),i-t)))},function(){return n&&a(n)}]}((function(n){var i=n.loaded,a=n.lengthComputable?n.total:void 0,s=i-r,u=o(s);r=i;var l=function(e,t,n){return(t=function(e){var t=function(e){if("object"!=wq(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=wq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==wq(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({loaded:i,total:a,progress:a?i/a:void 0,bytes:s,rate:u||void 0,estimated:u&&a&&i<=a?(a-i)/u:void 0,event:n,lengthComputable:null!=a},t?"download":"upload",!0);e(l)}),n)},kq=function(e,t){var n=null!=e;return[function(r){return t[0]({lengthComputable:n,total:e,loaded:r})},t[1]]},Eq=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return bW.asap((function(){return e.apply(void 0,n)}))}};const xq=QW.hasStandardBrowserEnv?function(e,t){return function(n){return n=new URL(n,QW.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)}}(new URL(QW.origin),QW.navigator&&/(msie|trident)/i.test(QW.navigator.userAgent)):function(){return!0},Sq=QW.hasStandardBrowserEnv?{write:function(e,t,n,r,o,i){var a=[e+"="+encodeURIComponent(t)];bW.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),bW.isString(r)&&a.push("path="+r),bW.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Aq(e,t,n){var r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}function Fq(e){return Fq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fq(e)}function Oq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mq(e,t,n){return(t=function(e){var t=function(e){if("object"!=Fq(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Fq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Fq(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bq=function(e){return e instanceof mq?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oq(Object(n),!0).forEach((function(t){Mq(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e):e};function Pq(e,t){t=t||{};var n={};function r(e,t,n,r){return bW.isPlainObject(e)&&bW.isPlainObject(t)?bW.merge.call({caseless:r},e,t):bW.isPlainObject(t)?bW.merge({},t):bW.isArray(t)?t.slice():t}function o(e,t,n,o){return bW.isUndefined(t)?bW.isUndefined(e)?void 0:r(void 0,e,0,o):r(e,t,0,o)}function i(e,t){if(!bW.isUndefined(t))return r(void 0,t)}function a(e,t){return bW.isUndefined(t)?bW.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,o,i){return i in t?r(n,o):i in e?r(void 0,n):void 0}var u={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:function(e,t,n){return o(Bq(e),Bq(t),0,!0)}};return bW.forEach(Object.keys(Object.assign({},e,t)),(function(r){var i=u[r]||o,a=i(e[r],t[r],r);bW.isUndefined(a)&&i!==s||(n[r]=a)})),n}function Tq(e,t){if(e){if("string"==typeof e)return Nq(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nq(e,t):void 0}}function Nq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function jq(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}const _q=function(e){var t,n=Pq({},e),r=n.data,o=n.withXSRFToken,i=n.xsrfHeaderName,a=n.xsrfCookieName,s=n.headers,u=n.auth;if(n.headers=s=mq.from(s),n.url=jW(Aq(n.baseURL,n.url,n.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&s.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),bW.isFormData(r))if(QW.hasStandardBrowserEnv||QW.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(t=s.getContentType())){var l=t?t.split(";").map((function(e){return e.trim()})).filter(Boolean):[],c=function(e){return function(e){if(Array.isArray(e))return e}(e)||jq(e)||Tq(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(l),d=c[0],f=c.slice(1);s.setContentType([d||"multipart/form-data"].concat(function(e){return function(e){if(Array.isArray(e))return Nq(e)}(e)||jq(e)||Tq(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(f)).join("; "))}if(QW.hasStandardBrowserEnv&&(o&&bW.isFunction(o)&&(o=o(n)),o||!1!==o&&xq(n.url))){var p=i&&a&&Sq.read(a);p&&s.set(i,p)}return n};function Rq(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Lq(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lq(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Iq="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,o,i,a,s,u=_q(e),l=u.data,c=mq.from(u.headers).normalize(),d=u.responseType,f=u.onUploadProgress,p=u.onDownloadProgress;function h(){a&&a(),s&&s(),u.cancelToken&&u.cancelToken.unsubscribe(r),u.signal&&u.signal.removeEventListener("abort",r)}var m=new XMLHttpRequest;function v(){if(m){var r=mq.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Dq((function(e){t(e),h()}),(function(e){n(e),h()}),{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}}if(m.open(u.method.toUpperCase(),u.url,!0),m.timeout=u.timeout,"onloadend"in m?m.onloadend=v:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(v)},m.onabort=function(){m&&(n(new kW("Request aborted",kW.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new kW("Network Error",kW.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){var t=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded",r=u.transitional||zW;u.timeoutErrorMessage&&(t=u.timeoutErrorMessage),n(new kW(t,r.clarifyTimeoutError?kW.ETIMEDOUT:kW.ECONNABORTED,e,m)),m=null},void 0===l&&c.setContentType(null),"setRequestHeader"in m&&bW.forEach(c.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),bW.isUndefined(u.withCredentials)||(m.withCredentials=!!u.withCredentials),d&&"json"!==d&&(m.responseType=u.responseType),p){var g=Rq(Cq(p,!0),2);i=g[0],s=g[1],m.addEventListener("progress",i)}if(f&&m.upload){var y=Rq(Cq(f),2);o=y[0],a=y[1],m.upload.addEventListener("progress",o),m.upload.addEventListener("loadend",a)}(u.cancelToken||u.signal)&&(r=function(t){m&&(n(!t||t.type?new bq(null,e,m):t),m.abort(),m=null)},u.cancelToken&&u.cancelToken.subscribe(r),u.signal&&(u.signal.aborted?r():u.signal.addEventListener("abort",r)));var b,D,w=(b=u.url,(D=/^([-+\w]{1,25})(:?\/\/|:)/.exec(b))&&D[1]||"");w&&-1===QW.protocols.indexOf(w)?n(new kW("Unsupported protocol "+w+":",kW.ERR_BAD_REQUEST,e)):m.send(l||null)}))},Hq=function(e,t){var n=(e=e?e.filter(Boolean):[]).length;if(t||n){var r,o=new AbortController,i=function(e){if(!r){r=!0,s();var t=e instanceof Error?e:this.reason;o.abort(t instanceof kW?t:new bq(t instanceof Error?t.message:t))}},a=t&&setTimeout((function(){a=null,i(new kW("timeout ".concat(t," of ms exceeded"),kW.ETIMEDOUT))}),t),s=function(){e&&(a&&clearTimeout(a),a=null,e.forEach((function(e){e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((function(e){return e.addEventListener("abort",i)}));var u=o.signal;return u.unsubscribe=function(){return bW.asap(s)},u}};function zq(e){return zq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zq(e)}function Vq(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function $q(){$q=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),s=new M(r||[]);return o(a,"_invoke",{value:S(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function g(){}function y(){}function b(){}var D={};l(D,a,(function(){return this}));var w=Object.getPrototypeOf,C=w&&w(w(B([])));C&&C!==n&&r.call(C,a)&&(D=C);var k=b.prototype=g.prototype=Object.create(D);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,s){var u=d(e[o],e,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==zq(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(c).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function S(t,n,r){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=A(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function A(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function F(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(F,this),this.reset(!0)}function B(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(zq(t)+" is not iterable")}return y.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},E(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(k),l(k,u,"Generator"),l(k,a,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=B,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:B(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Uq(e){return function(){return new Gq(e.apply(this,arguments))}}function Gq(e){var t,n;function r(t,n){try{var i=e[t](n),a=i.value,s=a instanceof Kq;Promise.resolve(s?a.v:a).then((function(n){if(s){var u="return"===t?"return":"next";if(!a.k||n.done)return r(u,n);n=e[u](n).value}o(i.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,o){return new Promise((function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};n?n=n.next=s:(t=n=s,r(e,o))}))},"function"!=typeof e.return&&(this.return=void 0)}function Wq(e){return new Kq(e,0)}function qq(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise((function(n){n(e[t](r))})),{done:!1,value:new Kq(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function Kq(e,t){this.v=e,this.k=t}function Jq(e){var t,n,r,o=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);o--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Zq(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Zq(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Zq=function(e){this.s=e,this.n=e.next},Zq.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Zq(e)}Gq.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Gq.prototype.next=function(e){return this._invoke("next",e)},Gq.prototype.throw=function(e){return this._invoke("throw",e)},Gq.prototype.return=function(e){return this._invoke("return",e)};var Xq=$q().mark((function e(t,n){var r,o,i;return $q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.byteLength,n&&!(r<n)){e.next=5;break}return e.next=4,t;case 4:return e.abrupt("return");case 5:o=0;case 6:if(!(o<r)){e.next=13;break}return i=o+n,e.next=10,t.slice(o,i);case 10:o=i,e.next=6;break;case 13:case"end":return e.stop()}}),e)})),Yq=function(){var e=Uq($q().mark((function e(t,n){var r,o,i,a,s,u;return $q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,o=!1,e.prev=2,a=Jq(Qq(t));case 4:return e.next=6,Wq(a.next());case 6:if(!(r=!(s=e.sent).done)){e.next=12;break}return u=s.value,e.delegateYield(qq(Jq(Xq(u,n))),"t0",9);case 9:r=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(2),o=!0,i=e.t1;case 18:if(e.prev=18,e.prev=19,!r||null==a.return){e.next=23;break}return e.next=23,Wq(a.return());case 23:if(e.prev=23,!o){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t,n){return e.apply(this,arguments)}}(),Qq=function(){var e=Uq($q().mark((function e(t){var n,r,o,i;return $q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t[Symbol.asyncIterator]){e.next=3;break}return e.delegateYield(qq(Jq(t)),"t0",2);case 2:return e.abrupt("return");case 3:n=t.getReader(),e.prev=4;case 5:return e.next=7,Wq(n.read());case 7:if(r=e.sent,o=r.done,i=r.value,!o){e.next=12;break}return e.abrupt("break",16);case 12:return e.next=14,i;case 14:e.next=5;break;case 16:return e.prev=16,e.next=19,Wq(n.cancel());case 19:return e.finish(16);case 20:case"end":return e.stop()}}),e,null,[[4,,16,20]])})));return function(t){return e.apply(this,arguments)}}(),eK=function(e,t,n,r){var o,i=Yq(e,t),a=0,s=function(e){o||(o=!0,r&&r(e))};return new ReadableStream({pull:function(e){return(t=$q().mark((function t(){var r,o,u,l,c;return $q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.next();case 3:if(r=t.sent,o=r.done,u=r.value,!o){t.next=10;break}return s(),e.close(),t.abrupt("return");case 10:l=u.byteLength,n&&(c=a+=l,n(c)),e.enqueue(new Uint8Array(u)),t.next=19;break;case 15:throw t.prev=15,t.t0=t.catch(0),s(t.t0),t.t0;case 19:case"end":return t.stop()}}),t,null,[[0,15]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(e){Vq(i,r,o,a,s,"next",e)}function s(e){Vq(i,r,o,a,s,"throw",e)}a(void 0)}))})();var t},cancel:function(e){return s(e),i.return()}},{highWaterMark:2})};function tK(e){return tK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tK(e)}function nK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nK(Object(n),!0).forEach((function(t){oK(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oK(e,t,n){return(t=function(e){var t=function(e){if("object"!=tK(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=tK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==tK(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iK(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return aK(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aK(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aK(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function sK(){sK=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),s=new M(r||[]);return o(a,"_invoke",{value:S(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function g(){}function y(){}function b(){}var D={};l(D,a,(function(){return this}));var w=Object.getPrototypeOf,C=w&&w(w(B([])));C&&C!==n&&r.call(C,a)&&(D=C);var k=b.prototype=g.prototype=Object.create(D);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,s){var u=d(e[o],e,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==tK(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(c).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function S(t,n,r){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=A(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function A(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function F(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(F,this),this.reset(!0)}function B(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(tK(t)+" is not iterable")}return y.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},E(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(k),l(k,u,"Generator"),l(k,a,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=B,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:B(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function uK(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function lK(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){uK(i,r,o,a,s,"next",e)}function s(e){uK(i,r,o,a,s,"throw",e)}a(void 0)}))}}var cK,dK,fK="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,pK=fK&&"function"==typeof ReadableStream,hK=fK&&("function"==typeof TextEncoder?(cK=new TextEncoder,function(e){return cK.encode(e)}):function(){var e=lK(sK().mark((function e(t){return sK().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,new Response(t).arrayBuffer();case 3:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),mK=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e.apply(void 0,n)}catch(e){return!1}},vK=pK&&mK((function(){var e=!1,t=new Request(QW.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),gK=pK&&mK((function(){return bW.isReadableStream(new Response("").body)})),yK={stream:gK&&function(e){return e.body}};fK&&(dK=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((function(e){!yK[e]&&(yK[e]=bW.isFunction(dK[e])?function(t){return t[e]()}:function(t,n){throw new kW("Response type '".concat(e,"' is not supported"),kW.ERR_NOT_SUPPORT,n)})})));var bK=function(){var e=lK(sK().mark((function e(t){var n;return sK().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",0);case 2:if(!bW.isBlob(t)){e.next=4;break}return e.abrupt("return",t.size);case 4:if(!bW.isSpecCompliantForm(t)){e.next=9;break}return n=new Request(QW.origin,{method:"POST",body:t}),e.next=8,n.arrayBuffer();case 8:case 15:return e.abrupt("return",e.sent.byteLength);case 9:if(!bW.isArrayBufferView(t)&&!bW.isArrayBuffer(t)){e.next=11;break}return e.abrupt("return",t.byteLength);case 11:if(bW.isURLSearchParams(t)&&(t+=""),!bW.isString(t)){e.next=16;break}return e.next=15,hK(t);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),DK=function(){var e=lK(sK().mark((function e(t,n){var r;return sK().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bW.toFiniteNumber(t.getContentLength()),e.abrupt("return",null==r?bK(n):r);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();const wK=fK&&function(){var e=lK(sK().mark((function e(t){var n,r,o,i,a,s,u,l,c,d,f,p,h,m,v,g,y,b,D,w,C,k,E,x,S,A,F,O,M,B,P,T,N,j;return sK().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=_q(t),r=n.url,o=n.method,i=n.data,a=n.signal,s=n.cancelToken,u=n.timeout,l=n.onDownloadProgress,c=n.onUploadProgress,d=n.responseType,f=n.headers,p=n.withCredentials,h=void 0===p?"same-origin":p,m=n.fetchOptions,d=d?(d+"").toLowerCase():"text",v=Hq([a,s&&s.toAbortSignal()],u),y=v&&v.unsubscribe&&function(){v.unsubscribe()},e.prev=4,e.t0=c&&vK&&"get"!==o&&"head"!==o,!e.t0){e.next=11;break}return e.next=9,DK(f,i);case 9:e.t1=b=e.sent,e.t0=0!==e.t1;case 11:if(!e.t0){e.next=15;break}D=new Request(r,{method:"POST",body:i,duplex:"half"}),bW.isFormData(i)&&(w=D.headers.get("content-type"))&&f.setContentType(w),D.body&&(C=kq(b,Cq(Eq(c))),k=iK(C,2),E=k[0],x=k[1],i=eK(D.body,65536,E,x));case 15:return bW.isString(h)||(h=h?"include":"omit"),S="credentials"in Request.prototype,g=new Request(r,rK(rK({},m),{},{signal:v,method:o.toUpperCase(),headers:f.normalize().toJSON(),body:i,duplex:"half",credentials:S?h:void 0})),e.next=20,fetch(g,m);case 20:return A=e.sent,F=gK&&("stream"===d||"response"===d),gK&&(l||F&&y)&&(O={},["status","statusText","headers"].forEach((function(e){O[e]=A[e]})),M=bW.toFiniteNumber(A.headers.get("content-length")),B=l&&kq(M,Cq(Eq(l),!0))||[],P=iK(B,2),T=P[0],N=P[1],A=new Response(eK(A.body,65536,T,(function(){N&&N(),y&&y()})),O)),d=d||"text",e.next=26,yK[bW.findKey(yK,d)||"text"](A,t);case 26:return j=e.sent,!F&&y&&y(),e.next=30,new Promise((function(e,n){Dq(e,n,{data:j,headers:mq.from(A.headers),status:A.status,statusText:A.statusText,config:t,request:g})}));case 30:return e.abrupt("return",e.sent);case 33:if(e.prev=33,e.t2=e.catch(4),y&&y(),!e.t2||"TypeError"!==e.t2.name||!/Load failed|fetch/i.test(e.t2.message)){e.next=38;break}throw Object.assign(new kW("Network Error",kW.ERR_NETWORK,t,g),{cause:e.t2.cause||e.t2});case 38:throw kW.from(e.t2,e.t2&&e.t2.code,t,g);case 39:case"end":return e.stop()}}),e,null,[[4,33]])})));return function(t){return e.apply(this,arguments)}}();function CK(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var kK={http:null,xhr:Iq,fetch:wK};bW.forEach(kK,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));var EK=function(e){return"- ".concat(e)},xK=function(e){return bW.isFunction(e)||null===e||!1===e};const SK=function(e){for(var t,n,r=(e=bW.isArray(e)?e:[e]).length,o={},i=0;i<r;i++){var a=void 0;if(n=t=e[i],!xK(t)&&void 0===(n=kK[(a=String(t)).toLowerCase()]))throw new kW("Unknown adapter '".concat(a,"'"));if(n)break;o[a||"#"+i]=n}if(!n){var s=Object.entries(o).map((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return CK(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?CK(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),n=t[0],r=t[1];return"adapter ".concat(n," ")+(!1===r?"is not supported by the environment":"is not available in the build")})),u=r?s.length>1?"since :\n"+s.map(EK).join("\n"):" "+EK(s[0]):"as no adapter specified";throw new kW("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return n};function AK(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new bq(null,e)}function FK(e){return AK(e),e.headers=mq.from(e.headers),e.data=vq.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),SK(e.adapter||nq.adapter)(e).then((function(t){return AK(e),t.data=vq.call(e,e.transformResponse,t),t.headers=mq.from(t.headers),t}),(function(t){return gq(t)||(AK(e),t&&t.response&&(t.response.data=vq.call(e,e.transformResponse,t.response),t.response.headers=mq.from(t.response.headers))),Promise.reject(t)}))}var OK="1.10.0";function MK(e){return MK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MK(e)}var BK={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){BK[e]=function(n){return MK(n)===e||"a"+(t<1?"n ":" ")+e}}));var PK={};BK.transitional=function(e,t,n){function r(e,t){return"[Axios v"+OK+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,o,i){if(!1===e)throw new kW(r(o," has been removed"+(t?" in "+t:"")),kW.ERR_DEPRECATED);return t&&!PK[o]&&(PK[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,i)}},BK.spelling=function(e){return function(t,n){return console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0}};const TK={assertOptions:function(e,t,n){if("object"!==MK(e))throw new kW("options must be an object",kW.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),o=r.length;o-- >0;){var i=r[o],a=t[i];if(a){var s=e[i],u=void 0===s||a(s,i,e);if(!0!==u)throw new kW("option "+i+" must be "+u,kW.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new kW("Unknown option "+i,kW.ERR_BAD_OPTION)}},validators:BK};function NK(e){return NK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NK(e)}function jK(){jK=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),s=new M(r||[]);return o(a,"_invoke",{value:S(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function g(){}function y(){}function b(){}var D={};l(D,a,(function(){return this}));var w=Object.getPrototypeOf,C=w&&w(w(B([])));C&&C!==n&&r.call(C,a)&&(D=C);var k=b.prototype=g.prototype=Object.create(D);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,s){var u=d(e[o],e,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==NK(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(c).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function S(t,n,r){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=A(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function A(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function F(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(F,this),this.reset(!0)}function B(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(NK(t)+" is not iterable")}return y.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},E(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(k),l(k,u,"Generator"),l(k,a,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=B,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:B(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function _K(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function RK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,LK(r.key),r)}}function LK(e){var t=function(e){if("object"!=NK(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=NK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==NK(t)?t:t+""}var IK=TK.validators,HK=function(){return function(e,t){return t&&RK(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaults=t||{},this.interceptors={request:new HW,response:new HW}}),[{key:"request",value:(e=jK().mark((function e(t,n){var r,o;return jK().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._request(t,n);case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),e.t0 instanceof Error){r={},Error.captureStackTrace?Error.captureStackTrace(r):r=new Error,o=r.stack?r.stack.replace(/^.+\n/,""):"";try{e.t0.stack?o&&!String(e.t0.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(e.t0.stack+="\n"+o):e.t0.stack=o}catch(e){}}throw e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,6]])})),t=function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){_K(i,r,o,a,s,"next",e)}function s(e){_K(i,r,o,a,s,"throw",e)}a(void 0)}))},function(e,n){return t.apply(this,arguments)})},{key:"_request",value:function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{};var n=t=Pq(this.defaults,t),r=n.transitional,o=n.paramsSerializer,i=n.headers;void 0!==r&&TK.assertOptions(r,{silentJSONParsing:IK.transitional(IK.boolean),forcedJSONParsing:IK.transitional(IK.boolean),clarifyTimeoutError:IK.transitional(IK.boolean)},!1),null!=o&&(bW.isFunction(o)?t.paramsSerializer={serialize:o}:TK.assertOptions(o,{encode:IK.function,serialize:IK.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),TK.assertOptions(t,{baseUrl:IK.spelling("baseURL"),withXsrfToken:IK.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();var a=i&&bW.merge(i.common,i[t.method]);i&&bW.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete i[e]})),t.headers=mq.concat(a,i);var s=[],u=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(u=u&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));var l,c=[];this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));var d,f=0;if(!u){var p=[FK.bind(this),void 0];for(p.unshift.apply(p,s),p.push.apply(p,c),d=p.length,l=Promise.resolve(t);f<d;)l=l.then(p[f++],p[f++]);return l}d=s.length;var h=t;for(f=0;f<d;){var m=s[f++],v=s[f++];try{h=m(h)}catch(e){v.call(this,e);break}}try{l=FK.call(this,h)}catch(e){return Promise.reject(e)}for(f=0,d=c.length;f<d;)l=l.then(c[f++],c[f++]);return l}},{key:"getUri",value:function(e){return jW(Aq((e=Pq(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}]);var e,t}();bW.forEach(["delete","get","head","options"],(function(e){HK.prototype[e]=function(t,n){return this.request(Pq(n||{},{method:e,url:t,data:(n||{}).data}))}})),bW.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,o){return this.request(Pq(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}HK.prototype[e]=t(),HK.prototype[e+"Form"]=t(!0)}));const zK=HK;function VK(e){return VK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VK(e)}function $K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,UK(r.key),r)}}function UK(e){var t=function(e){if("object"!=VK(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=VK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==VK(t)?t:t+""}var GK=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"function"!=typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,o){r.reason||(r.reason=new bq(e,t,o),n(r.reason))}))}return function(e,t,n){return t&&$K(e.prototype,t),n&&$K(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}},{key:"toAbortSignal",value:function(){var e=this,t=new AbortController,n=function(e){t.abort(e)};return this.subscribe(n),t.signal.unsubscribe=function(){return e.unsubscribe(n)},t.signal}}],[{key:"source",value:function(){var t;return{token:new e((function(e){t=e})),cancel:t}}}])}();const WK=GK;function qK(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var KK={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(KK).forEach((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return qK(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qK(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),n=t[0],r=t[1];KK[r]=n}));const JK=KK;var ZK=function e(t){var n=new zK(t),r=AG(zK.prototype.request,n);return bW.extend(r,zK.prototype,n,{allOwnKeys:!0}),bW.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Pq(t,n))},r}(nq);ZK.Axios=zK,ZK.CanceledError=bq,ZK.CancelToken=WK,ZK.isCancel=gq,ZK.VERSION=OK,ZK.toFormData=OW,ZK.AxiosError=kW,ZK.Cancel=ZK.CanceledError,ZK.all=function(e){return Promise.all(e)},ZK.spread=function(e){return function(t){return e.apply(null,t)}},ZK.isAxiosError=function(e){return bW.isObject(e)&&!0===e.isAxiosError},ZK.mergeConfig=Pq,ZK.AxiosHeaders=mq,ZK.formToJSON=function(e){return eq(bW.isHTMLForm(e)?new FormData(e):e)},ZK.getAdapter=SK,ZK.HttpStatusCode=JK,ZK.default=ZK;const XK=ZK;var YK=Object.defineProperty,QK=Object.defineProperties,eJ=Object.getOwnPropertyDescriptors,tJ=Object.getOwnPropertySymbols,nJ=Object.prototype.hasOwnProperty,rJ=Object.prototype.propertyIsEnumerable,oJ=(e,t,n)=>t in e?YK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iJ=(e,t)=>{for(var n in t||(t={}))nJ.call(t,n)&&oJ(e,n,t[n]);if(tJ)for(var n of tJ(t))rJ.call(t,n)&&oJ(e,n,t[n]);return e},aJ="http://localhost".replace(/\/+$/,""),sJ=class{constructor(e,t=aJ,n=XK){var r;this.basePath=t,this.axios=n,e&&(this.configuration=e,this.basePath=null!=(r=e.basePath)?r:t)}},uJ=class extends Error{constructor(e,t){super(t),this.field=e,this.name="RequiredError"}},lJ={},cJ="https://example.com",dJ=function(e,t,n){if(null==n)throw new uJ(t,`Required parameter ${t} was null or undefined when calling ${e}.`)},fJ=async function(e,t,n){if(n&&n.apiKey){const r="function"==typeof n.apiKey?await n.apiKey(t):await n.apiKey;e[t]=r}};function pJ(e,t,n=""){null!=t&&("object"==typeof t?Array.isArray(t)?t.forEach((t=>pJ(e,t,n))):Object.keys(t).forEach((r=>pJ(e,t[r],`${n}${""!==n?".":""}${r}`))):e.has(n)?e.append(n,t):e.set(n,t))}var hJ=function(e,...t){const n=new URLSearchParams(e.search);pJ(n,t),e.search=n.toString()},mJ=function(e,t,n){const r="string"!=typeof e;return(r&&n&&n.isJsonMime?n.isJsonMime(t.headers["Content-Type"]):r)?JSON.stringify(void 0!==e?e:{}):e||""},vJ=function(e){return e.pathname+e.search+e.hash},gJ=function(e,t,n,r){return(o=t,i=n)=>{var a;const s=((e,t)=>QK(e,eJ(t)))(iJ({},e.options),{url:(o.defaults.baseURL?"":null!=(a=null==r?void 0:r.basePath)?a:i)+e.url});return o.request(s)}},yJ=function(e){const t=function(e){return{backgroundActionInfo:async(t,n,r={})=>{dJ("backgroundActionInfo","name",t),dJ("backgroundActionInfo","jobUuid",n);const o="/n/action/{Name}/{JobUuid}".replace("{Name}",encodeURIComponent(String(t))).replace("{JobUuid}",encodeURIComponent(String(n))),i=new URL(o,cJ);let a;e&&(a=e.baseOptions);const s=iJ(iJ({method:"GET"},a),r),u={};await fJ(u,"Authorization",e),hJ(i,{});let l=a&&a.headers?a.headers:{};return s.headers=iJ(iJ(iJ({},u),l),r.headers),{url:vJ(i),options:s}},batchUpdateMeta:async(t,n={})=>{dJ("batchUpdateMeta","body",t);const r=new URL("/n/meta/batch",cJ);let o;e&&(o=e.baseOptions);const i=iJ(iJ({method:"PATCH"},o),n),a={};await fJ(a,"Authorization",e),a["Content-Type"]="application/json",hJ(r,{});let s=o&&o.headers?o.headers:{};return i.headers=iJ(iJ(iJ({},a),s),n.headers),i.data=mJ(t,i,e),{url:vJ(r),options:i}},controlBackgroundAction:async(t,n,r,o={})=>{dJ("controlBackgroundAction","name",t),dJ("controlBackgroundAction","jobUuid",n),dJ("controlBackgroundAction","command",r);const i="/n/action/{Name}/{JobUuid}".replace("{Name}",encodeURIComponent(String(t))).replace("{JobUuid}",encodeURIComponent(String(n))),a=new URL(i,cJ);let s;e&&(s=e.baseOptions);const u=iJ(iJ({method:"PATCH"},s),o),l={};await fJ(l,"Authorization",e),l["Content-Type"]="application/json",hJ(a,{});let c=s&&s.headers?s.headers:{};return u.headers=iJ(iJ(iJ({},l),c),o.headers),u.data=mJ(r,u,e),{url:vJ(a),options:u}},create:async(t,n={})=>{dJ("create","body",t);const r=new URL("/n/nodes/create",cJ);let o;e&&(o=e.baseOptions);const i=iJ(iJ({method:"POST"},o),n),a={};await fJ(a,"Authorization",e),a["Content-Type"]="application/json",hJ(r,{});let s=o&&o.headers?o.headers:{};return i.headers=iJ(iJ(iJ({},a),s),n.headers),i.data=mJ(t,i,e),{url:vJ(r),options:i}},createCheck:async(t,n={})=>{dJ("createCheck","body",t);const r=new URL("/n/nodes/create/precheck",cJ);let o;e&&(o=e.baseOptions);const i=iJ(iJ({method:"POST"},o),n),a={};await fJ(a,"Authorization",e),a["Content-Type"]="application/json",hJ(r,{});let s=o&&o.headers?o.headers:{};return i.headers=iJ(iJ(iJ({},a),s),n.headers),i.data=mJ(t,i,e),{url:vJ(r),options:i}},createPublicLink:async(t,n,r={})=>{dJ("createPublicLink","uuid",t),dJ("createPublicLink","publicLinkRequest",n);const o="/n/node/{Uuid}/link".replace("{Uuid}",encodeURIComponent(String(t))),i=new URL(o,cJ);let a;e&&(a=e.baseOptions);const s=iJ(iJ({method:"POST"},a),r),u={};await fJ(u,"Authorization",e),u["Content-Type"]="application/json",hJ(i,{});let l=a&&a.headers?a.headers:{};return s.headers=iJ(iJ(iJ({},u),l),r.headers),s.data=mJ(n,s,e),{url:vJ(i),options:s}},createSelection:async(t,n={})=>{dJ("createSelection","body",t);const r=new URL("/n/selection",cJ);let o;e&&(o=e.baseOptions);const i=iJ(iJ({method:"POST"},o),n),a={};await fJ(a,"Authorization",e),a["Content-Type"]="application/json",hJ(r,{});let s=o&&o.headers?o.headers:{};return i.headers=iJ(iJ(iJ({},a),s),n.headers),i.data=mJ(t,i,e),{url:vJ(r),options:i}},deletePublicLink:async(t,n={})=>{dJ("deletePublicLink","linkUuid",t);const r="/n/link/{LinkUuid}".replace("{LinkUuid}",encodeURIComponent(String(t))),o=new URL(r,cJ);let i;e&&(i=e.baseOptions);const a=iJ(iJ({method:"DELETE"},i),n),s={};await fJ(s,"Authorization",e),hJ(o,{});let u=i&&i.headers?i.headers:{};return a.headers=iJ(iJ(iJ({},s),u),n.headers),{url:vJ(o),options:a}},deleteVersion:async(t,n,r={})=>{dJ("deleteVersion","uuid",t),dJ("deleteVersion","versionId",n);const o="/n/node/{Uuid}/versions/{VersionId}".replace("{Uuid}",encodeURIComponent(String(t))).replace("{VersionId}",encodeURIComponent(String(n))),i=new URL(o,cJ);let a;e&&(a=e.baseOptions);const s=iJ(iJ({method:"DELETE"},a),r),u={};await fJ(u,"Authorization",e),hJ(i,{});let l=a&&a.headers?a.headers:{};return s.headers=iJ(iJ(iJ({},u),l),r.headers),{url:vJ(i),options:s}},getByUuid:async(t,n,r={})=>{dJ("getByUuid","uuid",t);const o="/n/node/{Uuid}".replace("{Uuid}",encodeURIComponent(String(t))),i=new URL(o,cJ);let a;e&&(a=e.baseOptions);const s=iJ(iJ({method:"GET"},a),r),u={},l={};await fJ(u,"Authorization",e),void 0!==n&&(l.Path=n),hJ(i,l);let c=a&&a.headers?a.headers:{};return s.headers=iJ(iJ(iJ({},u),c),r.headers),{url:vJ(i),options:s}},getPublicLink:async(t,n={})=>{dJ("getPublicLink","linkUuid",t);const r="/n/link/{LinkUuid}".replace("{LinkUuid}",encodeURIComponent(String(t))),o=new URL(r,cJ);let i;e&&(i=e.baseOptions);const a=iJ(iJ({method:"GET"},i),n),s={};await fJ(s,"Authorization",e),hJ(o,{});let u=i&&i.headers?i.headers:{};return a.headers=iJ(iJ(iJ({},s),u),n.headers),{url:vJ(o),options:a}},listNamespaceValues:async(t,n={})=>{dJ("listNamespaceValues","namespace",t);const r="/n/meta/namespace/{Namespace}".replace("{Namespace}",encodeURIComponent(String(t))),o=new URL(r,cJ);let i;e&&(i=e.baseOptions);const a=iJ(iJ({method:"GET"},i),n),s={};await fJ(s,"Authorization",e),hJ(o,{});let u=i&&i.headers?i.headers:{};return a.headers=iJ(iJ(iJ({},s),u),n.headers),{url:vJ(o),options:a}},listNamespaces:async(t={})=>{const n=new URL("/n/meta/namespace",cJ);let r;e&&(r=e.baseOptions);const o=iJ(iJ({method:"GET"},r),t),i={};await fJ(i,"Authorization",e),hJ(n,{});let a=r&&r.headers?r.headers:{};return o.headers=iJ(iJ(iJ({},i),a),t.headers),{url:vJ(n),options:o}},lookup:async(t,n={})=>{dJ("lookup","body",t);const r=new URL("/n/nodes",cJ);let o;e&&(o=e.baseOptions);const i=iJ(iJ({method:"POST"},o),n),a={};await fJ(a,"Authorization",e),a["Content-Type"]="application/json",hJ(r,{});let s=o&&o.headers?o.headers:{};return i.headers=iJ(iJ(iJ({},a),s),n.headers),i.data=mJ(t,i,e),{url:vJ(r),options:i}},nodeVersions:async(t,n,r={})=>{dJ("nodeVersions","uuid",t),dJ("nodeVersions","query",n);const o="/n/node/{Uuid}/versions".replace("{Uuid}",encodeURIComponent(String(t))),i=new URL(o,cJ);let a;e&&(a=e.baseOptions);const s=iJ(iJ({method:"POST"},a),r),u={};await fJ(u,"Authorization",e),u["Content-Type"]="application/json",hJ(i,{});let l=a&&a.headers?a.headers:{};return s.headers=iJ(iJ(iJ({},u),l),r.headers),s.data=mJ(n,s,e),{url:vJ(i),options:s}},patchNode:async(t,n,r={})=>{dJ("patchNode","uuid",t),dJ("patchNode","nodeUpdates",n);const o="/n/node/{Uuid}".replace("{Uuid}",encodeURIComponent(String(t))),i=new URL(o,cJ);let a;e&&(a=e.baseOptions);const s=iJ(iJ({method:"PATCH"},a),r),u={};await fJ(u,"Authorization",e),u["Content-Type"]="application/json",hJ(i,{});let l=a&&a.headers?a.headers:{};return s.headers=iJ(iJ(iJ({},u),l),r.headers),s.data=mJ(n,s,e),{url:vJ(i),options:s}},performAction:async(t,n,r,o={})=>{dJ("performAction","name",t),dJ("performAction","parameters",n);const i="/n/action/{Name}".replace("{Name}",encodeURIComponent(String(t))),a=new URL(i,cJ);let s;e&&(s=e.baseOptions);const u=iJ(iJ({method:"POST"},s),o),l={},c={};await fJ(l,"Authorization",e),void 0!==r&&(c.JobUuid=r),l["Content-Type"]="application/json",hJ(a,c);let d=s&&s.headers?s.headers:{};return u.headers=iJ(iJ(iJ({},l),d),o.headers),u.data=mJ(n,u,e),{url:vJ(a),options:u}},promoteVersion:async(t,n,r,o={})=>{dJ("promoteVersion","uuid",t),dJ("promoteVersion","versionId",n),dJ("promoteVersion","parameters",r);const i="/n/node/{Uuid}/versions/{VersionId}/promote".replace("{Uuid}",encodeURIComponent(String(t))).replace("{VersionId}",encodeURIComponent(String(n))),a=new URL(i,cJ);let s;e&&(s=e.baseOptions);const u=iJ(iJ({method:"POST"},s),o),l={};await fJ(l,"Authorization",e),l["Content-Type"]="application/json",hJ(a,{});let c=s&&s.headers?s.headers:{};return u.headers=iJ(iJ(iJ({},l),c),o.headers),u.data=mJ(r,u,e),{url:vJ(a),options:u}},publishNode:async(t,n,r={})=>{dJ("publishNode","uuid",t),dJ("publishNode","parameters",n);const o="/n/node/{Uuid}/publish".replace("{Uuid}",encodeURIComponent(String(t))),i=new URL(o,cJ);let a;e&&(a=e.baseOptions);const s=iJ(iJ({method:"POST"},a),r),u={};await fJ(u,"Authorization",e),u["Content-Type"]="application/json",hJ(i,{});let l=a&&a.headers?a.headers:{};return s.headers=iJ(iJ(iJ({},u),l),r.headers),s.data=mJ(n,s,e),{url:vJ(i),options:s}},searchMeta:async(t,n={})=>{dJ("searchMeta","body",t);const r=new URL("/n/meta/find",cJ);let o;e&&(o=e.baseOptions);const i=iJ(iJ({method:"POST"},o),n),a={};await fJ(a,"Authorization",e),a["Content-Type"]="application/json",hJ(r,{});let s=o&&o.headers?o.headers:{};return i.headers=iJ(iJ(iJ({},a),s),n.headers),i.data=mJ(t,i,e),{url:vJ(r),options:i}},templates:async(t,n={})=>{const r=new URL("/n/templates",cJ);let o;e&&(o=e.baseOptions);const i=iJ(iJ({method:"GET"},o),n),a={},s={};await fJ(a,"Authorization",e),void 0!==t&&(s.TemplateType=t),hJ(r,s);let u=o&&o.headers?o.headers:{};return i.headers=iJ(iJ(iJ({},a),u),n.headers),{url:vJ(r),options:i}},updateNamespaceValues:async(t,n,r={})=>{dJ("updateNamespaceValues","namespace",t),dJ("updateNamespaceValues","operation",n);const o="/n/meta/namespace/{Namespace}".replace("{Namespace}",encodeURIComponent(String(t))),i=new URL(o,cJ);let a;e&&(a=e.baseOptions);const s=iJ(iJ({method:"PATCH"},a),r),u={};await fJ(u,"Authorization",e),u["Content-Type"]="application/json",hJ(i,{});let l=a&&a.headers?a.headers:{};return s.headers=iJ(iJ(iJ({},u),l),r.headers),s.data=mJ(n,s,e),{url:vJ(i),options:s}},updatePublicLink:async(t,n,r={})=>{dJ("updatePublicLink","linkUuid",t),dJ("updatePublicLink","publicLinkRequest",n);const o="/n/link/{LinkUuid}".replace("{LinkUuid}",encodeURIComponent(String(t))),i=new URL(o,cJ);let a;e&&(a=e.baseOptions);const s=iJ(iJ({method:"PATCH"},a),r),u={};await fJ(u,"Authorization",e),u["Content-Type"]="application/json",hJ(i,{});let l=a&&a.headers?a.headers:{};return s.headers=iJ(iJ(iJ({},u),l),r.headers),s.data=mJ(n,s,e),{url:vJ(i),options:s}},userBookmarks:async(t,n={})=>{const r=new URL("/n/nodes/bookmarks",cJ);let o;e&&(o=e.baseOptions);const i=iJ(iJ({method:"GET"},o),n),a={},s={};await fJ(a,"Authorization",e),void 0!==t&&(s.All=t),hJ(r,s);let u=o&&o.headers?o.headers:{};return i.headers=iJ(iJ(iJ({},a),u),n.headers),{url:vJ(r),options:i}}}}(e);return{async backgroundActionInfo(n,r,o){var i,a,s;const u=await t.backgroundActionInfo(n,r,o),l=null!=(i=null==e?void 0:e.serverIndex)?i:0,c=null==(s=null==(a=lJ["NodeServiceApi.backgroundActionInfo"])?void 0:a[l])?void 0:s.url;return(t,n)=>gJ(u,XK,aJ,e)(t,c||n)},async batchUpdateMeta(n,r){var o,i,a;const s=await t.batchUpdateMeta(n,r),u=null!=(o=null==e?void 0:e.serverIndex)?o:0,l=null==(a=null==(i=lJ["NodeServiceApi.batchUpdateMeta"])?void 0:i[u])?void 0:a.url;return(t,n)=>gJ(s,XK,aJ,e)(t,l||n)},async controlBackgroundAction(n,r,o,i){var a,s,u;const l=await t.controlBackgroundAction(n,r,o,i),c=null!=(a=null==e?void 0:e.serverIndex)?a:0,d=null==(u=null==(s=lJ["NodeServiceApi.controlBackgroundAction"])?void 0:s[c])?void 0:u.url;return(t,n)=>gJ(l,XK,aJ,e)(t,d||n)},async create(n,r){var o,i,a;const s=await t.create(n,r),u=null!=(o=null==e?void 0:e.serverIndex)?o:0,l=null==(a=null==(i=lJ["NodeServiceApi.create"])?void 0:i[u])?void 0:a.url;return(t,n)=>gJ(s,XK,aJ,e)(t,l||n)},async createCheck(n,r){var o,i,a;const s=await t.createCheck(n,r),u=null!=(o=null==e?void 0:e.serverIndex)?o:0,l=null==(a=null==(i=lJ["NodeServiceApi.createCheck"])?void 0:i[u])?void 0:a.url;return(t,n)=>gJ(s,XK,aJ,e)(t,l||n)},async createPublicLink(n,r,o){var i,a,s;const u=await t.createPublicLink(n,r,o),l=null!=(i=null==e?void 0:e.serverIndex)?i:0,c=null==(s=null==(a=lJ["NodeServiceApi.createPublicLink"])?void 0:a[l])?void 0:s.url;return(t,n)=>gJ(u,XK,aJ,e)(t,c||n)},async createSelection(n,r){var o,i,a;const s=await t.createSelection(n,r),u=null!=(o=null==e?void 0:e.serverIndex)?o:0,l=null==(a=null==(i=lJ["NodeServiceApi.createSelection"])?void 0:i[u])?void 0:a.url;return(t,n)=>gJ(s,XK,aJ,e)(t,l||n)},async deletePublicLink(n,r){var o,i,a;const s=await t.deletePublicLink(n,r),u=null!=(o=null==e?void 0:e.serverIndex)?o:0,l=null==(a=null==(i=lJ["NodeServiceApi.deletePublicLink"])?void 0:i[u])?void 0:a.url;return(t,n)=>gJ(s,XK,aJ,e)(t,l||n)},async deleteVersion(n,r,o){var i,a,s;const u=await t.deleteVersion(n,r,o),l=null!=(i=null==e?void 0:e.serverIndex)?i:0,c=null==(s=null==(a=lJ["NodeServiceApi.deleteVersion"])?void 0:a[l])?void 0:s.url;return(t,n)=>gJ(u,XK,aJ,e)(t,c||n)},async getByUuid(n,r,o){var i,a,s;const u=await t.getByUuid(n,r,o),l=null!=(i=null==e?void 0:e.serverIndex)?i:0,c=null==(s=null==(a=lJ["NodeServiceApi.getByUuid"])?void 0:a[l])?void 0:s.url;return(t,n)=>gJ(u,XK,aJ,e)(t,c||n)},async getPublicLink(n,r){var o,i,a;const s=await t.getPublicLink(n,r),u=null!=(o=null==e?void 0:e.serverIndex)?o:0,l=null==(a=null==(i=lJ["NodeServiceApi.getPublicLink"])?void 0:i[u])?void 0:a.url;return(t,n)=>gJ(s,XK,aJ,e)(t,l||n)},async listNamespaceValues(n,r){var o,i,a;const s=await t.listNamespaceValues(n,r),u=null!=(o=null==e?void 0:e.serverIndex)?o:0,l=null==(a=null==(i=lJ["NodeServiceApi.listNamespaceValues"])?void 0:i[u])?void 0:a.url;return(t,n)=>gJ(s,XK,aJ,e)(t,l||n)},async listNamespaces(n){var r,o,i;const a=await t.listNamespaces(n),s=null!=(r=null==e?void 0:e.serverIndex)?r:0,u=null==(i=null==(o=lJ["NodeServiceApi.listNamespaces"])?void 0:o[s])?void 0:i.url;return(t,n)=>gJ(a,XK,aJ,e)(t,u||n)},async lookup(n,r){var o,i,a;const s=await t.lookup(n,r),u=null!=(o=null==e?void 0:e.serverIndex)?o:0,l=null==(a=null==(i=lJ["NodeServiceApi.lookup"])?void 0:i[u])?void 0:a.url;return(t,n)=>gJ(s,XK,aJ,e)(t,l||n)},async nodeVersions(n,r,o){var i,a,s;const u=await t.nodeVersions(n,r,o),l=null!=(i=null==e?void 0:e.serverIndex)?i:0,c=null==(s=null==(a=lJ["NodeServiceApi.nodeVersions"])?void 0:a[l])?void 0:s.url;return(t,n)=>gJ(u,XK,aJ,e)(t,c||n)},async patchNode(n,r,o){var i,a,s;const u=await t.patchNode(n,r,o),l=null!=(i=null==e?void 0:e.serverIndex)?i:0,c=null==(s=null==(a=lJ["NodeServiceApi.patchNode"])?void 0:a[l])?void 0:s.url;return(t,n)=>gJ(u,XK,aJ,e)(t,c||n)},async performAction(n,r,o,i){var a,s,u;const l=await t.performAction(n,r,o,i),c=null!=(a=null==e?void 0:e.serverIndex)?a:0,d=null==(u=null==(s=lJ["NodeServiceApi.performAction"])?void 0:s[c])?void 0:u.url;return(t,n)=>gJ(l,XK,aJ,e)(t,d||n)},async promoteVersion(n,r,o,i){var a,s,u;const l=await t.promoteVersion(n,r,o,i),c=null!=(a=null==e?void 0:e.serverIndex)?a:0,d=null==(u=null==(s=lJ["NodeServiceApi.promoteVersion"])?void 0:s[c])?void 0:u.url;return(t,n)=>gJ(l,XK,aJ,e)(t,d||n)},async publishNode(n,r,o){var i,a,s;const u=await t.publishNode(n,r,o),l=null!=(i=null==e?void 0:e.serverIndex)?i:0,c=null==(s=null==(a=lJ["NodeServiceApi.publishNode"])?void 0:a[l])?void 0:s.url;return(t,n)=>gJ(u,XK,aJ,e)(t,c||n)},async searchMeta(n,r){var o,i,a;const s=await t.searchMeta(n,r),u=null!=(o=null==e?void 0:e.serverIndex)?o:0,l=null==(a=null==(i=lJ["NodeServiceApi.searchMeta"])?void 0:i[u])?void 0:a.url;return(t,n)=>gJ(s,XK,aJ,e)(t,l||n)},async templates(n,r){var o,i,a;const s=await t.templates(n,r),u=null!=(o=null==e?void 0:e.serverIndex)?o:0,l=null==(a=null==(i=lJ["NodeServiceApi.templates"])?void 0:i[u])?void 0:a.url;return(t,n)=>gJ(s,XK,aJ,e)(t,l||n)},async updateNamespaceValues(n,r,o){var i,a,s;const u=await t.updateNamespaceValues(n,r,o),l=null!=(i=null==e?void 0:e.serverIndex)?i:0,c=null==(s=null==(a=lJ["NodeServiceApi.updateNamespaceValues"])?void 0:a[l])?void 0:s.url;return(t,n)=>gJ(u,XK,aJ,e)(t,c||n)},async updatePublicLink(n,r,o){var i,a,s;const u=await t.updatePublicLink(n,r,o),l=null!=(i=null==e?void 0:e.serverIndex)?i:0,c=null==(s=null==(a=lJ["NodeServiceApi.updatePublicLink"])?void 0:a[l])?void 0:s.url;return(t,n)=>gJ(u,XK,aJ,e)(t,c||n)},async userBookmarks(n,r){var o,i,a;const s=await t.userBookmarks(n,r),u=null!=(o=null==e?void 0:e.serverIndex)?o:0,l=null==(a=null==(i=lJ["NodeServiceApi.userBookmarks"])?void 0:i[u])?void 0:a.url;return(t,n)=>gJ(s,XK,aJ,e)(t,l||n)}}},bJ=class extends sJ{backgroundActionInfo(e,t,n){return yJ(this.configuration).backgroundActionInfo(e,t,n).then((e=>e(this.axios,this.basePath)))}batchUpdateMeta(e,t){return yJ(this.configuration).batchUpdateMeta(e,t).then((e=>e(this.axios,this.basePath)))}controlBackgroundAction(e,t,n,r){return yJ(this.configuration).controlBackgroundAction(e,t,n,r).then((e=>e(this.axios,this.basePath)))}create(e,t){return yJ(this.configuration).create(e,t).then((e=>e(this.axios,this.basePath)))}createCheck(e,t){return yJ(this.configuration).createCheck(e,t).then((e=>e(this.axios,this.basePath)))}createPublicLink(e,t,n){return yJ(this.configuration).createPublicLink(e,t,n).then((e=>e(this.axios,this.basePath)))}createSelection(e,t){return yJ(this.configuration).createSelection(e,t).then((e=>e(this.axios,this.basePath)))}deletePublicLink(e,t){return yJ(this.configuration).deletePublicLink(e,t).then((e=>e(this.axios,this.basePath)))}deleteVersion(e,t,n){return yJ(this.configuration).deleteVersion(e,t,n).then((e=>e(this.axios,this.basePath)))}getByUuid(e,t,n){return yJ(this.configuration).getByUuid(e,t,n).then((e=>e(this.axios,this.basePath)))}getPublicLink(e,t){return yJ(this.configuration).getPublicLink(e,t).then((e=>e(this.axios,this.basePath)))}listNamespaceValues(e,t){return yJ(this.configuration).listNamespaceValues(e,t).then((e=>e(this.axios,this.basePath)))}listNamespaces(e){return yJ(this.configuration).listNamespaces(e).then((e=>e(this.axios,this.basePath)))}lookup(e,t){return yJ(this.configuration).lookup(e,t).then((e=>e(this.axios,this.basePath)))}nodeVersions(e,t,n){return yJ(this.configuration).nodeVersions(e,t,n).then((e=>e(this.axios,this.basePath)))}patchNode(e,t,n){return yJ(this.configuration).patchNode(e,t,n).then((e=>e(this.axios,this.basePath)))}performAction(e,t,n,r){return yJ(this.configuration).performAction(e,t,n,r).then((e=>e(this.axios,this.basePath)))}promoteVersion(e,t,n,r){return yJ(this.configuration).promoteVersion(e,t,n,r).then((e=>e(this.axios,this.basePath)))}publishNode(e,t,n){return yJ(this.configuration).publishNode(e,t,n).then((e=>e(this.axios,this.basePath)))}searchMeta(e,t){return yJ(this.configuration).searchMeta(e,t).then((e=>e(this.axios,this.basePath)))}templates(e,t){return yJ(this.configuration).templates(e,t).then((e=>e(this.axios,this.basePath)))}updateNamespaceValues(e,t,n){return yJ(this.configuration).updateNamespaceValues(e,t,n).then((e=>e(this.axios,this.basePath)))}updatePublicLink(e,t,n){return yJ(this.configuration).updatePublicLink(e,t,n).then((e=>e(this.axios,this.basePath)))}userBookmarks(e,t){return yJ(this.configuration).userBookmarks(e,t).then((e=>e(this.axios,this.basePath)))}},DJ=function(e){return $U().getRestClient().getOrUpdateJwt().then((function(t){var n=e.getFrontendUrl(),r="".concat(n.protocol,"//").concat(n.host)+e.Parameters.get("ENDPOINT_REST_API_V2"),o=XK.create({baseURL:r,timeout:3e3,headers:{Authorization:"Bearer "+t}});return new bJ(void 0,void 0,o)}))};function wJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var CJ=function(e){var t=e.nodeUuid,n=e.setNode,i=e.setError;(0,o.useEffect)((function(){if(t){var e=r().getInstance();DJ(e).then((function(e){e.getByUuid(t).then((function(e){var t,o=e.data.Path.split("/"),a=o.shift(),s="/"+o.join("/");if(r().getInstance().user.getRepositoriesList().forEach((function(e){e.getSlug()===a&&(t=e.getId())})),t){var u=new(SG())(s,"LEAF"===e.data.Type,aG().getBasename(s));u.getMetadata().set("repository_id",t),n(u)}else i(new Error("repository not found"))})).catch((function(e){i(e)}))})).catch((function(e){i(e)}))}}),[t,n,i])};function kJ(e){return gG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"},child:[]}]})(e)}function EJ(e){return gG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6a2 2 0 0 0-2-2zm-7 6-4 4h3v6h2v-6h3l-4-4z"},child:[]}]})(e)}function xJ(e){return gG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2zm0 16H5V7h14v12zm-5.5-6c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5.67-1.5 1.5-1.5 1.5.67 1.5 1.5zM12 9c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4zm0 6.5a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(e)}function SJ(e){return gG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(e)}function AJ(e){return gG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z"},child:[]}]})(e)}function FJ(e){return gG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M4 9h16v2H4V9zm0 4h10v2H4v-2z"},child:[]}]})(e)}function OJ(e){return gG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{fillRule:"evenodd"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 3v8h8V3H3zm6 6H5V5h4v4zm-6 4v8h8v-8H3zm6 6H5v-4h4v4zm4-16v8h8V3h-8zm6 6h-4V5h4v4zm-6 4v8h8v-8h-8zm6 6h-4v-4h4v4z"},child:[]}]}]})(e)}function MJ(e){return gG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},child:[]}]})(e)}function BJ(e){return gG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(e)}function PJ(e){return gG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 5v14h18V5H3zm5.33 12H5V7h3.33v10zm5.34 0h-3.33V7h3.33v10zM19 17h-3.33V7H19v10z"},child:[]}]})(e)}function TJ(e){return gG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 5v14h18V5H3zm4 2v2H5V7h2zm-2 6v-2h2v2H5zm0 2h2v2H5v-2zm14 2H9v-2h10v2zm0-4H9v-2h10v2zm0-4H9V7h10v2z"},child:[]}]})(e)}function NJ(e){return gG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 5v14h18V5H3zm5.33 12H5V7h3.33v10zm5.34 0h-3.33v-4h3.33v4zM19 17h-3.33v-4H19v4zm0-6h-8.67V7H19v4z"},child:[]}]})(e)}function jJ(e){return gG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"},child:[]}]})(e)}function _J(e){return gG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2 4v16h20V4H2zm4.5 14H4v-2.5h2.5V18zm0-4.75H4v-2.5h2.5v2.5zm0-4.75H4V6h2.5v2.5zM11 18H8.5v-2.5H11V18zm0-4.75H8.5v-2.5H11v2.5zm0-4.75H8.5V6H11v2.5zm4.5 9.5H13v-2.5h2.5V18zm0-4.75H13v-2.5h2.5v2.5zm0-4.75H13V6h2.5v2.5zM20 18h-2.5v-2.5H20V18zm0-4.75h-2.5v-2.5H20v2.5zm0-4.75h-2.5V6H20v2.5z"},child:[]}]})(e)}var RJ=function(e){var t=e.node,n=(e.isCurrentFolder,(0,o.useMemo)((function(){var e=[];return t?(t.isLeaf()?(e.push({value:"open",title:"Open...",icon:EJ}),e.push({value:"goto",title:"Open Parent",icon:jJ})):e.push({value:"goto",title:"Open Folder",icon:jJ}),e):e}),[t]));return{title:"Actions",values:n,onValueSelected:(0,o.useCallback)((function(e){if(t)switch(e){case"open":r().getInstance().UI.openCurrentSelectionInEditor(null,t);break;case"goto":r().getInstance().goTo(t)}}),[t])}},LJ=a(9867),IJ=a.n(LJ);function HJ(e){return HJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HJ(e)}var zJ=["display"];function VJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VJ(Object(n),!0).forEach((function(t){UJ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VJ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function UJ(e,t,n){return(t=function(e){var t=function(e){if("object"!=HJ(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=HJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==HJ(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var GJ=function(e){var t=e.node,n=e.crtValue,r=e.skipInline,i=void 0!==r&&r,a=e.isBlockFolder,s=void 0!==a&&a,u=e.blockOrInlineProps,l=AM(),c=(0,o.useCallback)((function(e){if(e!==n){var r=u.block,o=u.inlineContent,i=u.updateInlineContent,a=u.nodeUuid,c=u.path,d=u.repositoryId,f=u.blockSize,p=u.inlineId;if("inline"===e){var h=r.props,m=(h.display,function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(h,zJ));m.inlineId||(m.inlineId=IJ()()),l.removeBlocks([r]),l.insertInlineContent([{type:xZ,props:$J({},m)}],{updateSelection:!0})}else if(f){var v="full"===e?"lg":"md";l.updateBlock(r,{type:SZ,props:$J($J({},r.props),{},{blockSize:v})})}else if(s)l.updateBlock(r,{type:AZ,props:$J($J({},r.props),{},{display:e})});else if(p){var g,y;if(l.forEachBlock((function(e){e.content&&e.content.forEach&&e.content.forEach((function(t){t.type===xZ&&t.props.inlineId===p&&(g=e,y=1===e.content.length)}))})),g&&t){if(t.isLeaf()){var b="full"===e?"lg":"md";l.insertBlocks([{type:SZ,props:$J($J({},o.props),{},{blockSize:b})}],g,"after")}else l.insertBlocks([{type:AZ,props:{nodeUuid:a,path:c,repositoryId:d}}],g,"after");y?l.removeBlocks([g]):i("")}}}}),[l,u,t,n]),d=(0,o.useMemo)((function(){var e="inline"===n,r=t&&!t.isLeaf(),o={value:"inline",title:"Inline",icon:FJ},a={value:"block",title:r?"Contents":"Preview",icon:r?kJ:xJ},s={value:"full",title:"Full Page",icon:MJ};if(r){if(e)return[o,a];var u=[{value:"compact",title:"Compact",icon:_J},{value:"list",title:"Details",icon:TJ},{value:"detail",title:"Table",icon:PJ},{value:"grid",title:"Grid",icon:OJ},{value:"masonry-160",title:"Waterfall",icon:NJ}];return i?u:[o].concat(u)}return[o,a,s]}),[t]);return{title:"Display",values:d,onValueSelected:c,crtValue:n}};function WJ(e){return WJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WJ(e)}function qJ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return KJ(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?KJ(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function JJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZJ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JJ(Object(n),!0).forEach((function(t){XJ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JJ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function XJ(e,t,n){return(t=function(e){var t=function(e){if("object"!=WJ(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=WJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==WJ(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var YJ=r().requireLib("workspaces").FilePreview,QJ=function(e){var t=e.node,n=e.rich,r=e.border,o=e.filePreviewStyle,i=e.onUpdateRatio,a=e.menuGroups,s=void 0===a?[]:a;return t?React.createElement("div",{style:{borderRadius:8,border:r?"1px solid var(--md-sys-color-mimefont-background)":"",overflow:"hidden",backgroundColor:"var(--md-sys-color-surface)",color:"var(--md-sys-color-on-surface)",boxShadow:!n&&"rgba(0, 0, 0, 0.12) 0px 1px 6px, rgba(0, 0, 0, 0.12) 0px 1px 4px"}},React.createElement(YJ,{node:t,style:ZJ({width:220,height:170,display:"flex",alignItems:"center",justifyContent:"center",fontSize:40},o),loadThumbnail:!0,richPreview:n,processing:!1,lightBackground:!0,displayLarge:!0,mimeFontOverlay:!1,onUpdateRatio:i}),n&&React.createElement("div",{style:{display:"flex",justifyContent:"end",padding:8,fontSize:13,borderTop:"1px solid var(--md-sys-color-mimefont-background)"}},React.createElement("div",{style:{flex:1,fontWeight:600}},t.getLabel()),s&&React.createElement(EG,{groups:s}))):null},eZ=function(e){var t=e.inline,n=e.nodeUuid,i=e.path,a=(e.inlineId,e.blockSize),s=(0,o.useContext)(ZU).dataModel,u=qJ((0,o.useState)(null),2),l=u[0],c=u[1],d=qJ((0,o.useState)(null),2),f=d[0],p=d[1],h=qJ((0,o.useState)(null),2),m=h[0],v=h[1],g=qJ((0,o.useState)([]),2),y=g[0],b=g[1],D=qJ((0,o.useState)(-1),2),w=(D[0],D[1]);!function(e){var t=e.dataModel,n=e.nodeUuid,r=e.setNode,i=e.setError,a=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wJ(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wJ(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,o.useState)(null),2),s=a[0],u=a[1];(0,o.useEffect)((function(){s&&t.getAjxpNodeProvider().loadLeafNodeSync(s,(function(e){e.getMetadata().set("repository_id",s.getMetadata().get("repository_id")),e.setParent(new(SG())),r(e)}),!0,{},(function(e){i(e||{message:"not found"})}))}),[s]),CJ({nodeUuid:n,setNode:u,setError:i})}({dataModel:s,nodeUuid:n,setNode:c,setError:p}),(0,o.useEffect)((function(){if(s){var e=function(){b(s.getSelectedNodes()||[])};return s.observe("selection_changed",e),function(){s.stopObserving("selection_changed",e)}}}),[s]);var C,k,E=(0,o.useCallback)((function(){v(!0)}),[l,s]),x=(0,o.useCallback)((function(){l&&s.setSelectedNodes([l])}),[l,s]),S=(0,o.useMemo)((function(){if(!l)return!1;var e=r().getInstance().user.activeRepository,t=l.getMetadata().get("repository_id");if(t&&t!==e)return!1;var n=s.getContextNode().getPath(),o=l.getPath();return l.isLeaf()&&(o=aG().getDirname(o)),uG().trim(n,"/")===uG().trim(o,"/")}),[l,s]),A={width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center",fontSize:16};l&&y.indexOf(l)>-1?(C="var(--md-sys-color-secondary)",k="var(--md-sys-color-on-secondary)"):m&&(C="var(--md-sys-color-mimefont-background)");var F=RJ({node:l,isCurrentFolder:S}),O=GJ({node:l,crtValue:t?"inline":"lg"===a?"full":"block",blockOrInlineProps:e});if(!t){var M="lg"===a?"100%":320;return React.createElement(sR,{shadow:"xs",radius:"md",withBorder:!0,onClick:x,style:{position:"relative",width:M},className:"disable-outline"},React.createElement(QJ,{node:l,rich:!0,filePreviewStyle:{width:M,height:"auto",minHeight:260},onUpdateRatio:function(e){return w(e)},menuGroups:[F,O]}))}var B=React.createElement("span",{style:{display:"inline-flex"}},l&&React.createElement(YJ,{node:l,style:A,loadThumbnail:!1,richPreview:!1}),f&&React.createElement(React.Fragment,null,React.createElement("span",{style:ZJ(ZJ({},A),{},{backgroundColor:"var(--alert-error-bg)"}),className:"mdi mdi-alert-outline"}),React.createElement("span",{style:{flex:1,padding:"0 8px"}},m?"Original path: "+i:"File not found")),!f&&React.createElement("span",{style:{flex:1,padding:"0 8px"}},l?l.getLabel():aG().getBasename(i)));return React.createElement("span",{onClick:x,onContextMenu:function(e){e.stopPropagation(),e.preventDefault()},style:{display:"inline-flex",alignItems:"center",color:k,backgroundColor:C,border:"1px solid var(--md-sys-color-mimefont-background)",fontSize:15,borderRadius:5,cursor:"pointer"}},l&&!l.isLeaf()&&B,l&&l.isLeaf()&&React.createElement(oG,{openDelay:450,closeDelay:100,position:"bottom-start",onOpen:E,onClose:function(){return v(!1)}},React.createElement(oG.Target,null,B),React.createElement(oG.Dropdown,null,React.createElement(QJ,{border:!0,node:l,rich:!1}))),React.createElement(EG,{groups:[F,O],settingsStyle:{marginRight:8}}))};function tZ(e){return gG({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 21C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3H10.4142L12.4142 5H20C20.5523 5 21 5.44772 21 6V9H4V18.996L6 11H22.5L20.1894 20.2425C20.0781 20.6877 19.6781 21 19.2192 21H3Z"},child:[]}]})(e)}function nZ(e){return gG({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12.8659 3.00017L22.3922 19.5002C22.6684 19.9785 22.5045 20.5901 22.0262 20.8662C21.8742 20.954 21.7017 21.0002 21.5262 21.0002H2.47363C1.92135 21.0002 1.47363 20.5525 1.47363 20.0002C1.47363 19.8246 1.51984 19.6522 1.60761 19.5002L11.1339 3.00017C11.41 2.52187 12.0216 2.358 12.4999 2.63414C12.6519 2.72191 12.7782 2.84815 12.8659 3.00017ZM10.9999 16.0002V18.0002H12.9999V16.0002H10.9999ZM10.9999 9.00017V14.0002H12.9999V9.00017H10.9999Z"},child:[]}]})(e)}const rZ=require("pydio/model/data-model");var oZ=a.n(rZ);function iZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var aZ=a(7003),sZ={};function uZ(e){return uZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uZ(e)}function lZ(){return lZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lZ.apply(null,arguments)}function cZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cZ(Object(n),!0).forEach((function(t){fZ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cZ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fZ(e,t,n){return(t=function(e){var t=function(e){if("object"!=uZ(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=uZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==uZ(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pZ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return hZ(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hZ(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}sZ.styleTagTransform=C(),sZ.setAttributes=y(),sZ.insert=v().bind(null,"head"),sZ.domAPI=h(),sZ.insertStyleElement=D(),f()(aZ.A,sZ),aZ.A&&aZ.A.locals&&aZ.A.locals;var mZ=r().requireLib("workspaces"),vZ=mZ.FilePreview,gZ=mZ.useRichMetaLine,yZ=mZ.useRichMetaActions,bZ=r().requireLib("hoc").useColumnsFromRegistry,DZ=r().requireLib("components").useSorting,wZ=r().requireLib("components").ModernSimpleList,CZ=function(e){e.editor;var t=e.block,n=r().getInstance(),i=t.props,a=i.nodeUuid,s=i.path,l=(0,o.useContext)(ZU).dataModel,c=pZ((0,o.useState)(l),2),d=c[0],f=c[1],p=pZ((0,o.useState)(!a&&l.getContextNode()),2),h=p[0],m=p[1],v=pZ((0,o.useState)(null),2),g=v[0],y=v[1],b=pZ((0,o.useState)(null),2),D=b[0],w=b[1],C=(0,o.useCallback)((function(e){var t={};e.getMetadata().has("repository_id")&&(t.tmp_repository_id=e.getMetadata().get("repository_id"));var n=oZ().RemoteDataModelFactory(t);f(n),m(n.getRootNode()),y(e)}),[a]);CJ({nodeUuid:a,setNode:C,setError:w}),(0,o.useEffect)((function(){if(d){var e=function(){return m(d.getContextNode())};return d.observe("context_changed",e),g&&d.requireContextChange(g),function(){d.stopObserving("context_changed",e)}}}),[d,g]),(0,o.useEffect)((function(){if(d&&d!==l){var e=function(){var e=d.getSelectedNodes();e&&e.length&&l.setSelectedNodes(d.getSelectedNodes(),d)},t=function(){l.getSelectionSource()!==d&&(console.log("clearing local DM"),d.setSelectedNodes([]))};return d.observe("selection_changed",e),l.observe("selection_changed",t),function(){d.stopObserving("selection_changed",e),l.stopObserving("selection_changed",t)}}}),[d]);var k=function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return iZ(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iZ(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,o.useState)(!1),2),t=e[0],n=e[1];return{hover:t,hoverProps:{onMouseEnter:(0,o.useCallback)((function(){n(!0)}),[t]),onMouseLeave:(0,o.useCallback)((function(){n(!1)}),[t])},hoverMoreStyle:{opacity:t?.77:0}}}(),E=k.hoverProps,x=k.hoverMoreStyle,S=bZ({pydio:n}).columns;S&&S.ajxp_label&&(S.ajxp_label.width="30%");var A=["modern-list","bn-children-list"],F={},O=t.props.display;switch(O){case"compact":A.push("compact-mode");break;case"list":A.push("list-expanded-mode");break;case"grid":A.push("material-list-grid");break;case"detail":A.push("table-mode"),F["data-content-type"]="table";break;case"masonry-160":A.push("masonry-grid","masonry-size-160")}var M=DZ({dataModel:d,node:h,defaultSortingInfo:{sortType:"file-natural",attribute:"",direction:"asc"}}),B=M.currentSortingInfo,P=M.handleSortChange,T=(0,o.useMemo)((function(){var e=Object.keys(S).filter((function(e){return S[e].sortType})).map((function(e){var t=S[e];return{value:dZ(dZ({},t),{},{attribute:e}),title:t.label,icon:AJ}}));return{title:"Sort By...",values:e,crtValue:B,onValueSelected:P}}),[S,P,B]),N=GJ({node:h,isBlockFolder:!0,skipInline:!g,crtValue:t.props.display,blockOrInlineProps:dZ(dZ({},t.props),{},{block:t})}),j=RJ({node:g}),_=g?[j,N,T]:[N,T],R=(0,o.useCallback)((function(e){var t="grid"===O||"masonry"===O,n=!!e.getMetadata().get("thumbnails")||!!e.getMetadata().get("ImagePreview"),r=!!e.getMetadata().get("Processing"),o="loading"===e.getMetadata().get("local:UploadStatus"),i=e.getMetadata().get("local:UploadProgress");return u().createElement(vZ,{loadThumbnail:n&&!r,node:e,processing:r,lightBackground:t,displayLarge:t,mimeFontOverlay:"list"===O,uploading:o,uploadprogress:i})}),[O]),L=yZ({pydio:n,dataModel:d,displayMode:O}),I=gZ({pydio:n,columns:S});return D?u().createElement("div",null,"Repository not found"):u().createElement(sR,lZ({className:"disable-outline",radius:"md",withBorder:!0,p:"md",style:{lineHeight:"1.3em",width:"100%"}},E),u().createElement("div",{style:{display:"flex"}},u().createElement("h3",{style:{flex:1,fontSize:"1.1em",fontWeight:600,marginBottom:10}},u().createElement("span",{style:{marginRight:6},className:"mdi mdi-folder-open-outline"}),"️",u().createElement("span",{style:{marginRight:6,flex:1}},g&&g.getLabel()||s||"Table of Contents",u().createElement("span",{className:"mdi mdi-reload",style:dZ({marginLeft:6,fontSize:12,cursor:"pointer"},x),onClick:function(){d.requireContextChange(h,!0)}}))),u().createElement("span",{style:{fontSize:"1rem"}},u().createElement(EG,{groups:_,settingsStyle:dZ({},x)}))),D&&u().createElement("div",null,s&&"Cannot load "+s+": ",D.message),h&&u().createElement(wZ,{pydio:n,node:h,dataModel:d,observeNodeReload:!0,className:A.join(" "),displayMode:O,usePlaceHolder:!1,skipParentNavigation:!0,tableKeys:S,sortingInfo:B,handleSortChange:P,additionalAttrs:F,entryRenderIcon:R,entryRenderParentIcon:R,entryRenderFirstLine:function(e){return e.getLabel()},entryRenderSecondLine:"list"===O?I:null,entryRenderActions:"detail"===O||s?null:L,tableEntryRenderCell:function(e){return u().createElement("span",null,R(e),e.getLabel())}}))};function kZ(){return kZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kZ.apply(null,arguments)}var EZ=new(JU())(r().getInstance()),xZ="nodeRef",SZ="nodeBlock",AZ="childrenList",FZ=$T({type:xZ,propSchema:{inlineId:{default:""},nodeUuid:{default:""},path:{default:""},label:{default:""},repositoryId:{default:""},displayPicker:{default:!1}},content:"none"},{render:function(e){return u().createElement(eZ,kZ({},e,{inline:!0},e.inlineContent.props))}}),OZ=function(e){var t,n=e.event,r=e.editor,o=e.defaultPasteHandler,i=((null===(t=n.clipboardData)||void 0===t?void 0:t.getData("text/plain"))||"").split(/(node:\/\/[A-Za-z0-9-]+)/g);if(i.some((function(e){return e.startsWith("node://")}))){var a=i.map((function(e){var t=/^node:\/\/([A-Za-z0-9-]+)$/.exec(e);return t?{type:xZ,props:{nodeUuid:t[1],inlineId:IJ()()}}:e}));return r.insertInlineContent(a),!0}return o()},MZ=MT({type:SZ,propSchema:{inlineId:{default:""},nodeUuid:{default:""},path:{default:""},repositoryId:{default:""},label:{default:""},blockSize:{default:"md"}},content:"none"},{render:function(e){return u().createElement(eZ,kZ({},e,{inline:!1},e.block.props))}}),BZ=MT({type:AZ,propSchema:{display:{default:"compact",values:["compact","list","grid","detail","masonry-160"]},nodeUuid:{default:""},path:{default:""},repositoryId:{default:""}},content:"none"},{render:function(e){return u().createElement(CZ,{editor:e.editor,block:e.block})}}),PZ=function(e){var t=e.editor;return u().createElement(YP,{triggerCharacter:"%",getItems:function(e){return function(e,t){return EZ.search({basename:t},"all",10,!0).then((function(t){return t.Results.map((function(t){var n=t.getLabel();return{title:u().createElement("span",null,t.getMetadata().get("repository_display")," - ",t.getPath()),onItemClick:function(){e.insertInlineContent([{type:xZ,props:{inlineId:IJ()(),label:n,nodeUuid:t.getMetadata().get("uuid"),path:t.getPath(),repositoryId:t.getMetadata().get("repository_id")}}," "])}}}))}))}(t,e)},minQueryLength:0})},TZ=function(e){return{title:"Table of Contents",onItemClick:function(){return cE(e,{type:AZ,props:{display:"compact"}})},aliases:["toc","contents","co"],group:"Others",icon:u().createElement(tZ,{size:18}),subtext:"Display current folder contents"}},NZ={childrenList:BZ,nodeBlock:MZ},jZ={nodeRef:FZ},_Z=a(7232),RZ={};RZ.styleTagTransform=C(),RZ.setAttributes=y(),RZ.insert=v().bind(null,"head"),RZ.domAPI=h(),RZ.insertStyleElement=D(),f()(_Z.A,RZ),_Z.A&&_Z.A.locals&&_Z.A.locals;var LZ=[{title:"Warning",value:"warning",icon:function(e){return gG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"},child:[]}]})(e)},color:"#e69819",backgroundColor:{light:"#fff6e6",dark:"#805d20"}},{title:"Error",value:"error",icon:function(e){return gG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"},child:[]}]})(e)},color:"#d80d0d",backgroundColor:{light:"#ffe6e6",dark:"#802020"}},{title:"Info",value:"info",icon:function(e){return gG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},child:[]}]})(e)},color:"#507aff",backgroundColor:{light:"#e6ebff",dark:"#203380"}},{title:"Success",value:"success",icon:function(e){return gG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},child:[]}]})(e)},color:"#0bc10b",backgroundColor:{light:"#e6ffe6",dark:"#208020"}}],IZ=function(e){var t=e.editor,n=e.block,r=e.contentRef,i=LZ.find((function(e){return e.value===n.props.type})).icon,a=React.createElement("div",{className:"alert-icon-wrapper",contentEditable:!1},React.createElement(i,{className:"alert-icon","data-alert-icon-type":n.props.type,size:32})),s=(0,o.useCallback)((function(e){t.updateBlock(n,{type:"alert",props:{type:e}})}),[]);return React.createElement("div",{className:"alert","data-alert-type":n.props.type},React.createElement(EG,{groups:[{title:"Alert Type",values:LZ,onValueSelected:s}],target:a,position:"bottom-start"}),React.createElement("div",{className:"inline-content",ref:r}))},HZ="alert",zZ={alert:MT({type:HZ,propSchema:{textAlignment:_w.textAlignment,textColor:_w.textColor,type:{default:"warning",values:["warning","error","info","success"]}},content:"inline"},{render:function(e){return React.createElement(IZ,e)}})},VZ=function(e){return{title:"Insert Warning Block",onItemClick:function(){return cE(e,{type:HZ,props:{type:"warning"},content:[{type:"text",text:"",styles:{}}]})},aliases:["alert","al"],group:"Others",icon:React.createElement(nZ,{size:18}),subtext:"Capture reader's attention with a warning"}};const $Z=require("lodash"),UZ=require("cells-sdk");var GZ=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},o=new UZ.UserMetaServiceApi($U().getRestClient()),i=new UZ.IdmUpdateUserMetaRequest;i.MetaDatas=[],i.Operation="PUT";var a=new UZ.IdmUserMeta;return a.NodeUuid=n,a.Namespace=t,a.JsonValue=JSON.stringify(e),a.Policies=[UZ.ServiceResourcePolicy.constructFromObject({Action:"READ",Subject:"*",Effect:"allow"}),UZ.ServiceResourcePolicy.constructFromObject({Action:"WRITE",Subject:"*",Effect:"allow"})],i.MetaDatas.push(a),o.updateUserMeta(i).then((function(){r(!1)})).catch((function(e){console.error("Cannot save metadata",e)}))};function WZ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return qZ(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qZ(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var KZ=function(e,t){var n=r().getInstance();DJ(n).then((function(r){var o=n.user.getActiveRepositoryObject().getSlug()+e.getPath(),i=o.split("/");i.pop(),i.push(t);var a={Nodes:[{Path:o}],JsonParameters:'{"targetParent":false}',CopyMoveOptions:{TargetPath:i.join("/")}};return n.UI.displayMessage("SUCCESS","Renaming page to "+t+"..."),r.performAction("move",a)})).catch((function(e){console.error(e)}))},JZ=function(e){var t,n=e.getLabel(),o=!1,i=r().getInstance().user.getActiveRepositoryObject(),a=r().getInstance().getPluginConfigs("editor.bnote").get("BNOTE_ABSTRACT_META");return e.getMetadata().has("ws_root")?(n=r().getInstance().user.getActiveRepositoryObject().getLabel()||n,t=i.getDescription()||"",o=!0):a&&e.getMetadata().get(a)&&(t=e.getMetadata().get(a)),{title:n,description:t,isRoot:o}},ZZ=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find((function(e){return e.type===kX}))};function XZ(e){return function(e){if(Array.isArray(e))return eX(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||QZ(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YZ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||QZ(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QZ(e,t){if(e){if("string"==typeof e)return eX(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eX(e,t):void 0}}function eX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var tX=function(e,t,n){var r=YZ((0,o.useState)(!1),2),i=r[0],a=r[1],s=YZ((0,o.useState)(0),2),u=s[0],l=s[1],c=YZ((0,o.useState)([]),2),d=c[0],f=c[1],p=YZ((0,o.useState)(!1),2),h=p[0],m=p[1],v=e.isLoaded(),g=e.getMetadata().get("uuid"),y=(0,o.useMemo)((function(){return(0,$Z.debounce)((function(e){return GZ(e,t,g,m)}),1500)}),[g]),b=(0,o.useMemo)((function(){return function(e){return GZ(e,t,g,m)}}),[g]);return(0,o.useEffect)((function(){a(!1),f([]),l(u+1)}),[e,v,g]),(0,o.useEffect)((function(){if(!i){var r=[];e&&e.getMetadata().has(t)&&(r=e.getMetadata().get(t)),n&&(ZZ(r)||(r=[].concat(XZ([{type:kX},{type:"paragraph",content:[{type:"text",text:"",styles:{}}]}]),XZ(r)))),f(r),a(!0)}}),[i,u]),{loaded:i,content:d,save:y,saveNow:b,dirty:h,setDirty:m}};function nX(e){return nX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nX(e)}function rX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rX(Object(n),!0).forEach((function(t){iX(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rX(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iX(e,t,n){return(t=function(e){var t=function(e){if("object"!=nX(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=nX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==nX(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var aX=r().requireLib("boot").PydioContextConsumer,sX=r().requireLib("components").useDataModelContextNodeAsItems,uX=(0,o.createContext)({dirty:!1,saving:!1}),lX=function(e){var t,n=e.dataModel,r=e.entryProps,o=e.muiTheme,i=e.style,a=e.contentMeta,s=(e.abstractMeta,sX(n,(function(e){return[]})).node),l=tX(s,a,!0),c=l.content,d=void 0===c?[]:c,f=l.loaded,p=l.save,h=l.dirty,m=l.setDirty;if(s&&s.isLoaded()&&f){var v=s.getMetadata().get("uuid")+"#"+(f?"loaded":"loading"),g="true"===s.getMetadata().get("node_readonly");t=u().createElement($X,{readOnly:g,darkMode:o.darkMode,initialContent:d,onChange:function(e){g||(m(!0),p(e))},key:v})}return u().createElement(uX.Provider,{value:{dirty:h,saving:!1}},u().createElement(ZU.Provider,{value:{dataModel:n,entryProps:r}},u().createElement("div",{style:oX(oX({},i),{},{position:"relative"})},t)))};const cX=lX=(0,c.muiThemeable)()(aX(lX));function dX(e){return dX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dX(e)}function fX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fX(Object(n),!0).forEach((function(t){hX(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fX(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hX(e,t,n){return(t=function(e){var t=function(e){if("object"!=dX(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=dX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==dX(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mX(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return vX(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vX(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function gX(e){var t=e.value,n=void 0===t?"":t,r=e.onCommit,i=void 0===r?function(e){}:r,a=e.className,s=void 0===a?"":a,l=e.inputStyle,c=void 0===l?{}:l,d=e.renderDisplay,f=mX((0,o.useState)(!1),2),p=f[0],h=f[1],m=mX((0,o.useState)(n),2),v=m[0],g=m[1],y=(0,o.useRef)(null);(0,o.useEffect)((function(){p&&y.current&&(y.current.focus(),y.current.select())}),[p]);var b=function(){h(!1);var e=v.trim();e!==n&&(null==i||i(e))};return u().createElement("span",{className:s},p?u().createElement("input",{ref:y,type:"text",value:v,onChange:function(e){return g(e.target.value)},onBlur:b,onKeyDown:function(e){"Enter"===e.key?b():"Escape"===e.key&&(h(!1),g(n))},style:pX({font:"inherit",padding:0,margin:0,border:"1px solid #ccc",borderRadius:4},c)}):u().createElement("span",{tabIndex:0,role:"button",onClick:function(){return h(!0)},onKeyDown:function(e){"Enter"===e.key&&h(!0)},style:{cursor:"text"}},d?d(n):n))}function yX(){return yX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yX.apply(null,arguments)}var bX=r().requireLib("boot").moment,DX=r().requireLib("components").ButtonMenu,wX=a(7919),CX=function(e){var t=(0,o.useContext)(ZU).dataModel,n=(0,o.useContext)(uX).dirty,i=t.getContextNode(),a=bX(new Date(1e3*parseInt(i.getMetadata().get("ajxp_modiftime")))).fromNow(),s=function(e){var t=e.node,n=JZ(t),i=n.title,a=n.description,s=n.isRoot,u=WZ((0,o.useState)(i),2),l=u[0],c=u[1],d=WZ((0,o.useState)(a),2),f=d[0],p=d[1];(0,o.useEffect)((function(){if(t){var e=function(){var e=JZ(t),n=e.title,r=e.description;n!==l&&c(n),r!==f&&p(r)};if(s){var n=r().getInstance();return n.observe("repository_list_refreshed",e),function(){return n.stopObserving("repository_list_refreshed",e)}}return t.observe("node_replaced",e),function(){return t.stopObserving("node_replaced",e)}}}),[t]);var h,m=s?null:KZ,v=r().getInstance().getPluginConfigs("editor.bnote").get("BNOTE_ABSTRACT_META");return!s&&v&&(h=function(e,t){return function(e,t,n){GZ(n,e,t.getMetadata().get("uuid"))}(v,e,t)}),{title:l,description:f,isRoot:s,renameCallback:m,abstractCallback:h}}({node:i}),u=s.title,l=s.description,c=s.renameCallback,d=s.abstractCallback,f=r().getInstance().user.getActiveRepositoryObject(),p=r().getInstance(),h=[];""!==i.getPath().replace("/","")&&h.push(React.createElement("span",{className:"segment first",style:{cursor:"pointer"},onClick:function(){return p.goTo("/")}},f.getLabel()));var m="",v=wX.trimLeft(i.getPath(),"/").split("/");return v.pop(),v.forEach((function(e,t){if(e){var n=t===v.length-1,r=m+="/"+e;h.push(React.createElement("span",{key:"bread_sep_"+t,className:"separator"}," / ")),h.push(React.createElement("span",{key:"bread_"+t,style:{cursor:"pointer"},className:"segment"+(n?" last":""),onClick:function(e){e.stopPropagation(),console.log(r),p.goTo(r)}},e))}})),React.createElement("div",{style:{paddingBottom:20},className:"disable-outline"},h&&React.createElement("div",{style:{fontSize:"0.8em"}},h),React.createElement("h1",{style:{fontSize:"2em",fontWeight:700,display:"flex",alignItems:"baseline"}},React.createElement("div",{className:"inline-content",style:{flexGrow:"initial",width:"auto"}},c?React.createElement(gX,{value:u,onCommit:function(e){return c(i,e)}}):u),React.createElement(DX,yX({pydio:p},{buttonStyle:{height:30,lineHeight:"26px",marginLeft:6},buttonLabelStyle:{fontSize:20,paddingLeft:6,paddingRight:6}},{id:"create-button-menu-inline",toolbars:["upload","create"],buttonTitle:"+",controller:p.Controller})),n&&React.createElement("span",{style:{fontSize:16,fontWeight:"normal",opacity:.3}},React.createElement(SJ,null))),React.createElement("div",{style:{color:"gray"}},!d&&l,d&&React.createElement(gX,{value:l||"Add description",onCommit:function(e){return d(i,e)}})," - Created ",a))},kX="header",EX={header:MT({type:kX,propSchema:{textColor:_w.textColor},content:"none"},{render:function(e){return React.createElement(CX,e)}})};function xX(e){var t=AM(),n=(0,o.useCallback)((function(e){return e.type===kX}),[]),r=PM(),i=NM(),a=e.block,s=t.getPrevBlock(a),u=t.getNextBlock(a);return React.createElement(r.Generic.Menu.Root,{position:"left",onOpenChange:function(t){t?e.freezeMenu():e.unfreezeMenu()}},React.createElement(r.Generic.Menu.Trigger,null,React.createElement(r.SideMenu.Button,{label:"Options",className:"bn-button",icon:React.createElement(BJ,{size:24})})),React.createElement(r.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu"},e.children||React.createElement(React.Fragment,null,s&&!n(s)&&React.createElement(r.Generic.Menu.Item,{className:"bn-menu-item",onClick:function(){t.removeBlocks([a]),t.insertBlocks([a],s,"before")}},"Move Up"),u&&!n(a)&&React.createElement(r.Generic.Menu.Item,{className:"bn-menu-item",onClick:function(){t.removeBlocks([a]),t.insertBlocks([a],u,"after")}},"Move Down"),!n(a)&&React.createElement(NP,e,i.drag_handle.delete_menuitem),React.createElement(TP,e,i.drag_handle.colors_menuitem),React.createElement(jP,e,i.drag_handle.header_row_menuitem),React.createElement(_P,e,i.drag_handle.header_column_menuitem))))}const SX=require("pydio/model/context-menu");var AX=a.n(SX);const FX=require("pydio/http/resources-manager");var OX=a.n(FX),MX=a(7538),BX={};function PX(e){return PX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PX(e)}function TX(){TX=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),s=new M(r||[]);return o(a,"_invoke",{value:S(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function g(){}function y(){}function b(){}var D={};l(D,a,(function(){return this}));var w=Object.getPrototypeOf,C=w&&w(w(B([])));C&&C!==n&&r.call(C,a)&&(D=C);var k=b.prototype=g.prototype=Object.create(D);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,s){var u=d(e[o],e,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==PX(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(c).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function S(t,n,r){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=A(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function A(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function F(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(F,this),this.reset(!0)}function B(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(PX(t)+" is not iterable")}return y.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},E(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(k),l(k,u,"Generator"),l(k,a,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=B,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:B(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function NX(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function jX(){return jX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jX.apply(null,arguments)}function _X(e,t){if(e){if("string"==typeof e)return RX(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?RX(e,t):void 0}}function RX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function LX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function IX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LX(Object(n),!0).forEach((function(t){HX(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LX(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function HX(e,t,n){return(t=function(e){var t=function(e){if("object"!=PX(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=PX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==PX(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}BX.styleTagTransform=C(),BX.setAttributes=y(),BX.insert=v().bind(null,"head"),BX.domAPI=h(),BX.insertStyleElement=D(),f()(MX.A,BX),MX.A&&MX.A.locals&&MX.A.locals;var zX=hE.create({blockSpecs:IX(IX(IX(IX({},Yk),NZ),zZ),EX),inlineContentSpecs:IX(IX(IX({},tE),jZ),qU)}),VX=function(e){return[].concat(function(e){return function(e){if(Array.isArray(e))return RX(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_X(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(XP(e)),[TZ(e),VZ(e)])};const $X=function(e){var t,n=e.initialContent,i=void 0===n?[]:n,a=e.onChange,s=e.darkMode,l=e.readOnly,c=e.style,d=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||_X(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,o.useState)(""),2),f=(d[0],d[1],TM({schema:zX,initialContent:i.length?i:null,dictionary:IX(IX({},UD),{},{placeholders:IX(IX({},UD.placeholders),{},{default:"Type text or '/' for commands, '%' for mentioning a file, '@' for mentioning a user"})}),pasteHandler:OZ,codeBlock:zU,setIdAttribute:!0})),p=(0,o.useCallback)((function(){var e=f.document;ZZ(e)?a(e):f.insertBlocks([{type:kX}],e&&e.length?e[0]:null,"before")}),[f,a]);return t=u().createElement(aV,{editable:!l,onChange:p,editor:f,theme:s?"dark":"light",sideMenu:!1,onClick:function(e){return AX().getInstance().close()},onDrop:function(e){return function(e,t){t.stopPropagation(),t.preventDefault(),(t.dataTransfer.items.length||t.dataTransfer.files.length)&&OX().loadClass("UploaderModel").then((function(n){var o=n.Store,i=document.elementFromPoint(t.clientX,t.clientY).closest("[data-id]").getAttribute("data-id"),a=e.getBlock(i);console.log("Dropped over block:",t.dataTransfer.items.length,t.dataTransfer.files.length,i);var s=r().getInstance().getContextNode();s.observeOnce("child_added",(function(t){var n=s.findChildByPath(t);console.log("here",n);var r=function(t){if(t.getMetadata().get("uuid")){var o=t.getMetadata().get("uuid");e.insertBlocks([{type:SZ,props:{nodeUuid:o}}],a,"after"),n.stopObserving("node_replaced",r)}};n.observe("node_replaced",r)}));var u=o.getInstance().handleDropEventResults(t.dataTransfer.items,t.dataTransfer.files,s);u.observe("status",(function(e){console.log(e,u),"ready"===e&&u.walk((function(e){"loaded"===e.getStatus()?console.log("LOADED!",e):e.observe("status",(function(t){"loaded"===t&&console.log("Child status loaded",e)}))}))}))}))}(f,e)}},u().createElement(HP,{sideMenu:function(e){return u().createElement(IP,jX({},e,{blockDragStart:function(){},blockDragEnd:function(){}}),u().createElement(MP,e),u().createElement(xX,e))}}),u().createElement(YP,{triggerCharacter:"/",getItems:function(){var e,t=(e=TX().mark((function e(t){return TX().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dE(VX(f),t));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){NX(i,r,o,a,s,"next",e)}function s(e){NX(i,r,o,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()}),u().createElement(WU,{editor:f}),u().createElement(PZ,{editor:f})),u().createElement("div",{style:IX({flex:1,width:"100%",backgroundColor:"var(--md-sys-color-surface)",paddingTop:20,userSelect:"inherit"},c),onClick:function(e){return e.stopPropagation()},onKeyUp:function(e){return e.stopPropagation()}},t)};var UX,GX;function WX(e){return WX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WX(e)}function qX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,QX(r.key),r)}}function KX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KX=function(){return!!e})()}function JX(e){return JX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},JX(e)}function ZX(e,t){return ZX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ZX(e,t)}function XX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YX(e,t,n){return(t=QX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QX(e){var t=function(e){if("object"!=WX(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=WX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==WX(t)?t:t+""}var eY=r().requireLib("hoc").EditorActions,tY=(UX=(0,l.connect)((function(e,t){var n=e.tabs.filter((function(e){var n=e.editorData,r=e.node;return(!n||n.id===t.editorData.id)&&r.getPath()===t.node.getPath()}))[0]||{};return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XX(Object(n),!0).forEach((function(t){YX(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XX(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:n.id,tab:n},t)})),UX(GX=(0,l.connect)(null,eY)(GX=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){return t=JX(t),function(e,t){if(t&&("object"==WX(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,KX()?Reflect.construct(t,n||[],JX(e).constructor):t.apply(e,n))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZX(e,t)}(t,e),function(e,t){return t&&qX(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidMount",value:function(){this.loadNode(this.props);var e=this.props.editorModify;this.props.isActive&&e({fixedToolbar:!0})}},{key:"compomentWillReceiveProps",value:function(e){var t=this.props.editorModify;e.isActive&&t({fixedToolbar:!0}),this.props.node!==e.node&&this.loadNode(e)}},{key:"loadNode",value:function(e){var t=this.props,n=t.pydio,r=t.node,o=t.tab,i=t.dispatch,a=o.id;n.ApiClient.getPlainContent(r,(function(e){i(eY.tabModify({id:a,content:e,node:r,loaded:!0}))}))}},{key:"render",value:function(){var e=this.props,t=e.tab,n=e.dispatch,o=e.muiTheme,i=t.id,a=t.content,s=t.loaded,l=t.node,c=[];try{c=(c=JSON.parse(a)).filter((function(e){return e.type!==AZ}))}catch(e){}var d=l.hasMetadataInBranch("node_readonly","true")||l.getMetadata().get("content_lock")&&l.getMetadata().get("content_lock")!==r().getInstance().user.id;return s?u().createElement($X,{readOnly:d,darkMode:o.darkMode,initialContent:c,onChange:function(e){return n(eY.tabModify({id:i,content:JSON.stringify(e)}))}}):null}}])}(o.Component))||GX)||GX);const nY=tY=(0,c.muiThemeable)()(tY);var rY=r().requireLib("hoc").EditorActions,oY=function(e){var t=e.tab,n=e.dispatch;return function(){return r().getInstance().ApiClient.postPlainTextContent(t.node,t.content,(function(e){n(e?rY.tabModify({id:t.id,message:r().getMessages()[115]}):rY.tabModify({id:t.id,message:r().getMessages()[210]}))}))}},iY=["node","muiTheme"];function aY(){return aY=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aY.apply(null,arguments)}var sY=r().requireLib("boot").PydioContextConsumer,uY=r().requireLib("workspaces").InfoPanelCard,lY=function(e){var t,n=e.node,o=e.muiTheme,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,iY),a=tX(n),s=a.content,l=a.loaded,c=a.save;return l?(s&&(t=u().createElement($X,{readOnly:!1,darkMode:o.darkMode,initialContent:s,onChange:function(e){return c(e)},node:n})),u().createElement(uY,aY({},i,{identifier:"folder-pad",icon:"mdi mdi-history",title:r().getMessages()["bnote.ext"]}),t)):null};const cY=lY=(0,c.muiThemeable)()(sY(lY));function dY(e){return dY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dY(e)}function fY(){fY=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),s=new M(r||[]);return o(a,"_invoke",{value:S(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function g(){}function y(){}function b(){}var D={};l(D,a,(function(){return this}));var w=Object.getPrototypeOf,C=w&&w(w(B([])));C&&C!==n&&r.call(C,a)&&(D=C);var k=b.prototype=g.prototype=Object.create(D);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,s){var u=d(e[o],e,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==dY(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(c).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function S(t,n,r){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=A(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function A(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function F(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(F,this),this.reset(!0)}function B(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(dY(t)+" is not iterable")}return y.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},E(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(k),l(k,u,"Generator"),l(k,a,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=B,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:B(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function pY(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}var hY=r().requireLib("boot").PromptValidators;function mY(){return e=fY().mark((function e(t){return fY().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.clipboard||!navigator.clipboard.writeText){e.next=12;break}return e.prev=1,e.next=4,navigator.clipboard.writeText(t);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.warn("Clipboard API failed, falling back",e.t0),vY(t);case 10:e.next=13;break;case 12:vY(t);case 13:case"end":return e.stop()}}),e,null,[[1,6]])})),mY=function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){pY(i,r,o,a,s,"next",e)}function s(e){pY(i,r,o,a,s,"throw",e)}a(void 0)}))},mY.apply(this,arguments);var e}function vY(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select();try{document.execCommand("copy"),console.log("Copied via execCommand fallback")}catch(e){console.error("Fallback copy failed",e)}document.body.removeChild(t)}var gY={toggleKnowledgeBase:function(){var e=r().getInstance(),t=e.getContextNode(),n=e.getPluginConfigs("editor.bnote").get("BNOTE_KNOWLEDGE_BASE");if(n){var o=t.getMetadata(),i=o.get(n)||!1;GZ(!i,n,t.getMetadata().get("uuid")).then((function(){o.set(n,!i),t.setMetadata(o,!0)}))}},mkPage:function(){var e=r().getInstance(),t=[hY.Empty,hY.NoSlash,hY.MustDifferSiblings()];e.UI.openComponentInModal("PydioReactUI","PromptDialog",{dialogTitleId:"bnote.mkpage",legendId:"bnote.mkpage.legend",fieldLabelId:"bnote.mkpage.placeholder",dialogSize:"sm",submitValue:function(t){if(-1!==t.indexOf("/")){var n=e.MessageHash["filename.forbidden.slash"];throw e.UI.displayMessage("ERROR",n),new Error(n)}var r=e.getPluginConfigs("editor.bnote").get("BNOTE_KNOWLEDGE_BASE");if(r){var o=e.user.getActiveRepositoryObject().getSlug()+uG().trimRight(e.getContextNode().getPath(),"/")+"/"+t;DJ(e).then((function(e){return e.create({Inputs:[{Locator:{Path:o},Type:"COLLECTION",Metadata:[{Namespace:r,JsonValue:"true"}]}]}).then((function(e){console&&console.debug("Created nodes",e)}))}))}},warnSpace:!0,validate:function(e){t.forEach((function(t){return t(e)}))}})},copyRef:function(){var e=r().getInstance().getContextHolder().getSelectedNodes();e.length&&function(e){return mY.apply(this,arguments)}("node://"+e[0].getMetadata().get("uuid")).catch((function(e){console.log(e)}))}}})(),window.BlockNote=s})();