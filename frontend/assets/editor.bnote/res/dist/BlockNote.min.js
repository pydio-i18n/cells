/*! For license information please see BlockNote.min.js.LICENSE.txt */
(()=>{"use strict";var e,t,n,r,o={6738:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var u=this[s][0];null!=u&&(a[u]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);r&&a[c[0]]||(void 0!==i&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=i),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),t.push(c))}},t}},249:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},2729:e=>{e.exports=function(e){return e[1]}},7384:(e,t,n)=>{var r=n(2326);t.H=r.createRoot,r.hydrateRoot},9062:(e,t,n)=>{var r=n(2015),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,i={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!u.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:l,ref:c,props:i,_owner:s.current}}t.Fragment=i,t.jsx=l,t.jsxs=l},1894:(e,t,n)=>{e.exports=n(9062)},8077:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(2729),o=n.n(r),i=n(6738),a=n.n(i)()(o());a.push([e.id,':root {\n  --alert-warning-bg: #fff6e6;\n  --alert-error-bg: #ffe6e6;\n  --alert-info-bg: #e6ebff;\n  --alert-success-bg: #e6ffe6;\n}\n[data-color-scheme="dark"] {\n  --alert-warning-bg: #805d20;\n  --alert-error-bg: #802020;\n  --alert-info-bg: #203380;\n  --alert-success-bg: #208020;\n}\n.alert {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-grow: 1;\n  border-radius: 4px;\n  min-height: 48px;\n  padding: 4px;\n}\n.alert[data-alert-type="warning"] {\n  background-color: var(--alert-warning-bg);\n}\n.alert[data-alert-type="error"] {\n  background-color: var(--alert-error-bg);\n}\n.alert[data-alert-type="info"] {\n  background-color: var(--alert-info-bg);\n}\n.alert[data-alert-type="success"] {\n  background-color: var(--alert-success-bg);\n}\n.alert .inline-content {\n  flex-grow: 1;\n}\n.alert .alert-icon-wrapper {\n  border-radius: 16px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-left: 12px;\n  margin-right: 12px;\n  height: 18px;\n  width: 18px;\n  user-select: none;\n  cursor: pointer;\n}\n.alert .alert-icon[data-alert-icon-type="warning"] {\n  color: #e69819;\n}\n.alert .alert-icon[data-alert-icon-type="error"] {\n  color: #d80d0d;\n}\n.alert .alert-icon[data-alert-icon-type="info"] {\n  color: #507aff;\n}\n.alert .alert-icon[data-alert-icon-type="success"] {\n  color: #0bc10b;\n}\n',""]);const s=a},3444:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(2729),o=n.n(r),i=n(6738),a=n.n(i)()(o());a.push([e.id,".react-mui-context .modern-list.bn-children-list.table-mode {\n  font-size: 12px;\n}\n.react-mui-context .modern-list.bn-children-list.table-mode tr {\n  height: auto;\n}\n.react-mui-context .modern-list.bn-children-list.table-mode tr .cell {\n  word-break: normal;\n  padding-top: 8px;\n  padding-bottom: 8px;\n}\n.react-mui-context .modern-list.bn-children-list.table-mode tr .cell.cell-ajxp_label {\n  font-size: 13px;\n  font-weight: 600;\n  min-width: 280px !important;\n}\n.react-mui-context .modern-list.bn-children-list.table-mode tr .cell.cell-ajxp_label > span {\n  white-space: nowrap;\n}\n.react-mui-context .modern-list.bn-children-list.table-mode tr .cell.cell-ajxp_label > span div.mimefont-container.with-editor-badge {\n  width: 18px;\n  height: 18px;\n  border-radius: 4px;\n  overflow: hidden;\n  border: 1px solid var(--md-sys-color-outline-variant-50);\n}\n.react-mui-context .modern-list.bn-children-list.table-mode tr .cell.cell-ajxp_label.header_cell {\n  font-weight: 600;\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .list-area {\n  display: grid;\n  gap: 8px;\n  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry {\n  border: 1px solid var(--md-sys-color-mimefont-background);\n  border-radius: 4px;\n  overflow: hidden;\n  align-items: center;\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry:last-child {\n  border: 1px solid var(--md-sys-color-mimefont-background);\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry .material-list-icon {\n  width: auto;\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry .material-list-icon .mimefont-container {\n  border-radius: 0;\n  margin: 0 10px 0 0;\n  width: 30px;\n  height: 30px;\n  line-height: 30px;\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry .material-list-icon .mimefont-container .mimefont {\n  font-size: 16px;\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry .material-list-text {\n  cursor: default;\n  padding: 0;\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry .material-list-text .material-list-line-2 {\n  display: none;\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry .material-list-actions {\n  display: none;\n}\n.react-mui-context .modern-list.bn-children-list.list-expanded-mode .modern-list-entry {\n  border: 1px solid var(--md-sys-color-mimefont-background);\n  margin-bottom: 8px;\n  border-radius: 8px;\n  overflow: hidden;\n  align-items: center;\n  padding: 6px 8px;\n}\n.react-mui-context .modern-list.bn-children-list.list-expanded-mode .modern-list-entry:last-child {\n  border: 1px solid var(--md-sys-color-mimefont-background);\n}\n.react-mui-context .modern-list.bn-children-list.list-expanded-mode .modern-list-entry .material-list-icon {\n  width: auto;\n}\n.react-mui-context .modern-list.bn-children-list.list-expanded-mode .modern-list-entry .material-list-icon .mimefont-container {\n  background-color: transparent !important;\n  margin: 0 8px 0 0;\n  width: 36px;\n  height: 36px;\n  line-height: 36px;\n}\n.react-mui-context .modern-list.bn-children-list.list-expanded-mode .modern-list-entry .material-list-icon .mimefont-container .mimefont {\n  font-size: 24px;\n}\n.react-mui-context .modern-list.bn-children-list.list-expanded-mode .modern-list-entry .material-list-text {\n  padding: 0;\n}\n.react-mui-context .modern-list.bn-children-list.list-expanded-mode .modern-list-entry .material-list-text .material-list-line-1 {\n  font-weight: 600;\n}\n.react-mui-context .modern-list.bn-children-list.material-list-grid .modern-list-entry {\n  border: 1px solid var(--md-sys-color-mimefont-background);\n}\n.react-mui-context .modern-list.bn-children-list.masonry-grid {\n  font-size: 13px;\n  margin: 0;\n}\n.react-mui-context .modern-list.bn-children-list.masonry-grid .masonry-card .mimefont-container .mimefont {\n  font-size: 24px;\n}\n",""]);const s=a},4576:(e,t,n)=>{n.d(t,{A:()=>W});var r=n(2729),o=n.n(r),i=n(6738),a=n.n(i),s=n(249),u=n.n(s),l=new URL(n(10),n.b),c=new URL(n(5832),n.b),d=new URL(n(2245),n.b),f=new URL(n(4813),n.b),p=new URL(n(8884),n.b),h=new URL(n(6482),n.b),m=new URL(n(9355),n.b),v=new URL(n(1139),n.b),g=new URL(n(1390),n.b),y=new URL(n(9812),n.b),b=new URL(n(4185),n.b),D=new URL(n(5721),n.b),w=new URL(n(6856),n.b),C=new URL(n(8110),n.b),k=new URL(n(179),n.b),E=new URL(n(6155),n.b),x=new URL(n(4357),n.b),A=new URL(n(848),n.b),F=a()(o()),S=u()(l),M=u()(c),B=u()(d),O=u()(f),T=u()(p),P=u()(h),N=u()(m),_=u()(v),j=u()(g),I=u()(y),R=u()(b),L=u()(D),H=u()(w),V=u()(C),z=u()(k),$=u()(E),U=u()(x),G=u()(A);F.push([e.id,`/* Generated using https://google-webfonts-helper.herokuapp.com/fonts/inter?subsets=latin */\n/* inter-100 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 100;\n  src: local(""), url(${S}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${M}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-200 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 200;\n  src: local(""), url(${B}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${O}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-300 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 300;\n  src: local(""), url(${T}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${P}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-regular - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 400;\n  src: local(""), url(${N}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${_}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-500 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 500;\n  src: local(""), url(${j}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${I}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-600 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 600;\n  src: local(""), url(${R}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${L}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-700 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 700;\n  src: local(""), url(${H}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${V}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-800 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 800;\n  src: local(""), url(${z}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${$}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-900 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 900;\n  src: local(""), url(${U}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${G}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n`,""]);const W=F},134:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},a=[],s=0;s<e.length;s++){var u=e[s],l=r.base?u[0]+r.base:u[0],c=i[l]||0,d="".concat(l," ").concat(c);i[l]=c+1;var f=n(d),p={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==f)t[f].references++,t[f].updater(p);else{var h=o(p,r);r.byIndex=s,t.splice(s,0,{identifier:d,updater:h,references:1})}a.push(d)}return a}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=n(i[a]);t[s].references--}for(var u=r(e,o),l=0;l<i.length;l++){var c=n(i[l]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}i=u}}},4709:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},1202:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},9958:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},2783:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},3911:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},5832:(e,t,n)=>{e.exports=n.p+"b0c3cec995c079348d2e.woff"},10:(e,t,n)=>{e.exports=n.p+"9094111633a8ff639a30.woff2"},4813:(e,t,n)=>{e.exports=n.p+"5ebc8670af89597cf4f0.woff"},2245:(e,t,n)=>{e.exports=n.p+"7b1cdef5c4317d8dfe5a.woff2"},6482:(e,t,n)=>{e.exports=n.p+"72b6ab1c5164d2f7a60a.woff"},8884:(e,t,n)=>{e.exports=n.p+"1d901654d5968b3d2af1.woff2"},9812:(e,t,n)=>{e.exports=n.p+"2e89c7eec639d70f9770.woff"},1390:(e,t,n)=>{e.exports=n.p+"c72c72b70c82b1f4bacf.woff2"},5721:(e,t,n)=>{e.exports=n.p+"a8909bb7bbff51df8622.woff"},4185:(e,t,n)=>{e.exports=n.p+"8f1e0300e8d26fa8919d.woff2"},8110:(e,t,n)=>{e.exports=n.p+"7ad0df5561cc0933cead.woff"},6856:(e,t,n)=>{e.exports=n.p+"54321e26b8bf4739a16d.woff2"},6155:(e,t,n)=>{e.exports=n.p+"f8e8bd61bdf890048dd1.woff"},179:(e,t,n)=>{e.exports=n.p+"7e1a31f93354d23987f4.woff2"},848:(e,t,n)=>{e.exports=n.p+"c5ccfaf539e28bfddffe.woff"},4357:(e,t,n)=>{e.exports=n.p+"6453f04550c5da4cc6b8.woff2"},1139:(e,t,n)=>{e.exports=n.p+"817c4274293e221c5076.woff"},9355:(e,t,n)=>{e.exports=n.p+"be7cb18dc7caf47cf7e9.woff2"},7919:e=>{e.exports=require("pydio/util/lang")},2015:e=>{e.exports=require("react")},2326:e=>{e.exports=require("react-dom")},9349:e=>{e.exports=require("remark-gfm")},4059:(e,t,n)=>{function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(e){for(var t=[],n=String(e||""),r=n.indexOf(","),o=0,i=!1;!i;){-1===r&&(r=n.length,i=!0);var a=n.slice(o,r).trim();!a&&i||t.push(a),o=r+1,r=n.indexOf(",",o)}return t}function i(e,t){var n=t||{};return(""===e[e.length-1]?[].concat(function(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e),[""]):e).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}n.d(t,{A:()=>i,q:()=>o})},3159:(e,t,n)=>{n.d(t,{V:()=>J});var r=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],o=n(2093),i=n(9194),a=/["&'<>`]/g,s=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,l=/[|\\{}()[\]^$+*?.]/g,c=new WeakMap;var d,f=/[\dA-Fa-f]/,p=/\d/,h=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],m={nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",fnof:"ƒ",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",bull:"•",hellip:"…",prime:"′",Prime:"″",oline:"‾",frasl:"⁄",weierp:"℘",image:"ℑ",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦",quot:'"',amp:"&",lt:"<",gt:">",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",permil:"‰",lsaquo:"‹",rsaquo:"›",euro:"€"},v=["cent","copy","divide","gt","lt","not","para","times"],g={}.hasOwnProperty,y={};for(d in m)g.call(m,d)&&(y[m[d]]=d);var b=/[^\dA-Za-z]/;function D(e,t,n){var r,o=function(e,t,n){var r="&#x"+e.toString(16).toUpperCase();return n&&t&&!f.test(String.fromCharCode(t))?r:r+";"}(e,t,n.omitOptionalSemicolons);if((n.useNamedReferences||n.useShortestReferences)&&(r=function(e,t,n,r){var o=String.fromCharCode(e);if(g.call(y,o)){var i=y[o],a="&"+i;return n&&h.includes(i)&&!v.includes(i)&&(!r||t&&61!==t&&b.test(String.fromCharCode(t)))?a:a+";"}return""}(e,t,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!r)&&n.useShortestReferences){var i=function(e,t,n){var r="&#"+String(e);return n&&t&&!p.test(String.fromCharCode(t))?r:r+";"}(e,t,n.omitOptionalSemicolons);i.length<o.length&&(o=i)}return r&&(!n.useShortestReferences||r.length<o.length)?r:o}function w(e,t){return function(e,t){return e=e.replace(t.subset?(n=t.subset,(r=c.get(n))||(r=function(e){for(var t=[],n=-1;++n<e.length;)t.push(e[n].replace(l,"\\$&"));return new RegExp("(?:"+t.join("|")+")","g")}(n),c.set(n,r)),r):a,o),t.subset||t.escapeOnly?e:e.replace(s,(function(e,n,r){return t.format(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536,r.charCodeAt(n+2),t)})).replace(u,o);var n,r;function o(e,n,r){return t.format(e.charCodeAt(0),r.charCodeAt(n+1),t)}}(e,Object.assign({format:D},t))}var C=/^>|^->|<!--|-->|--!>|<!-$/g,k=[">"],E=["<",">"];function x(e,t){var n=String(e);if("string"!=typeof t)throw new TypeError("Expected character");for(var r=0,o=n.indexOf(t);-1!==o;)r++,o=n.indexOf(t,o+t.length);return r}var A=n(4059),F=n(7775),S=n(4444),M=n(7553),B=P(1),O=P(-1),T=[];function P(e){return function(t,n,r){var o=t?t.children:T,i=(n||0)+e,a=o[i];if(!r)for(;a&&(0,M.m)(a);)a=o[i+=e];return a}}var N={}.hasOwnProperty;function _(e){return function(t,n,r){return N.call(e,t.tagName)&&e[t.tagName](t,n,r)}}var j=_({body:function(e,t,n){var r=B(n,t);return!r||"comment"!==r.type},caption:I,colgroup:I,dd:function(e,t,n){var r=B(n,t);return!r||"element"===r.type&&("dt"===r.tagName||"dd"===r.tagName)},dt:function(e,t,n){var r=B(n,t);return Boolean(r&&"element"===r.type&&("dt"===r.tagName||"dd"===r.tagName))},head:I,html:function(e,t,n){var r=B(n,t);return!r||"comment"!==r.type},li:function(e,t,n){var r=B(n,t);return!r||"element"===r.type&&"li"===r.tagName},optgroup:function(e,t,n){var r=B(n,t);return!r||"element"===r.type&&"optgroup"===r.tagName},option:function(e,t,n){var r=B(n,t);return!r||"element"===r.type&&("option"===r.tagName||"optgroup"===r.tagName)},p:function(e,t,n){var r=B(n,t);return r?"element"===r.type&&("address"===r.tagName||"article"===r.tagName||"aside"===r.tagName||"blockquote"===r.tagName||"details"===r.tagName||"div"===r.tagName||"dl"===r.tagName||"fieldset"===r.tagName||"figcaption"===r.tagName||"figure"===r.tagName||"footer"===r.tagName||"form"===r.tagName||"h1"===r.tagName||"h2"===r.tagName||"h3"===r.tagName||"h4"===r.tagName||"h5"===r.tagName||"h6"===r.tagName||"header"===r.tagName||"hgroup"===r.tagName||"hr"===r.tagName||"main"===r.tagName||"menu"===r.tagName||"nav"===r.tagName||"ol"===r.tagName||"p"===r.tagName||"pre"===r.tagName||"section"===r.tagName||"table"===r.tagName||"ul"===r.tagName):!n||!("element"===n.type&&("a"===n.tagName||"audio"===n.tagName||"del"===n.tagName||"ins"===n.tagName||"map"===n.tagName||"noscript"===n.tagName||"video"===n.tagName))},rp:R,rt:R,tbody:function(e,t,n){var r=B(n,t);return!r||"element"===r.type&&("tbody"===r.tagName||"tfoot"===r.tagName)},td:L,tfoot:function(e,t,n){return!B(n,t)},th:L,thead:function(e,t,n){var r=B(n,t);return Boolean(r&&"element"===r.type&&("tbody"===r.tagName||"tfoot"===r.tagName))},tr:function(e,t,n){var r=B(n,t);return!r||"element"===r.type&&"tr"===r.tagName}});function I(e,t,n){var r=B(n,t,!0);return!r||"comment"!==r.type&&!("text"===r.type&&(0,M.m)(r.value.charAt(0)))}function R(e,t,n){var r=B(n,t);return!r||"element"===r.type&&("rp"===r.tagName||"rt"===r.tagName)}function L(e,t,n){var r=B(n,t);return!r||"element"===r.type&&("td"===r.tagName||"th"===r.tagName)}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var V=_({body:function(e){var t=B(e,-1,!0);return!(t&&("comment"===t.type||"text"===t.type&&(0,M.m)(t.value.charAt(0))||"element"===t.type&&("meta"===t.tagName||"link"===t.tagName||"script"===t.tagName||"style"===t.tagName||"template"===t.tagName)))},colgroup:function(e,t,n){var r=O(n,t),o=B(e,-1,!0);return!(n&&r&&"element"===r.type&&"colgroup"===r.tagName&&j(r,n.children.indexOf(r),n))&&Boolean(o&&"element"===o.type&&"col"===o.tagName)},head:function(e){var t,n=new Set,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return H(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(e.children);try{for(r.s();!(t=r.n()).done;){var o=t.value;if("element"===o.type&&("base"===o.tagName||"title"===o.tagName)){if(n.has(o.tagName))return!1;n.add(o.tagName)}}}catch(e){r.e(e)}finally{r.f()}var i=e.children[0];return!i||"element"===i.type},html:function(e){var t=B(e,-1);return!t||"comment"!==t.type},tbody:function(e,t,n){var r=O(n,t),o=B(e,-1);return(!n||!r||"element"!==r.type||"thead"!==r.tagName&&"tbody"!==r.tagName||!j(r,n.children.indexOf(r),n))&&Boolean(o&&"element"===o.type&&"tr"===o.tagName)}}),z={name:[["\t\n\f\r &/=>".split(""),"\t\n\f\r \"&'/=>`".split("")],["\0\t\n\f\r \"&'/<=>".split(""),"\0\t\n\f\r \"&'/<=>`".split("")]],unquoted:[["\t\n\f\r &>".split(""),"\0\t\n\f\r \"&'<=>`".split("")],["\0\t\n\f\r \"&'<=>`".split(""),"\0\t\n\f\r \"&'<=>`".split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function $(e,t,n){var r,o=(0,F.I)(e.schema,t),i=e.settings.allowParseErrors&&"html"===e.schema.space?0:1,a=e.settings.allowDangerousCharacters?0:1,s=e.quote;if(!o.overloadedBoolean||n!==o.attribute&&""!==n?!o.boolean&&!o.overloadedBoolean||"string"==typeof n&&n!==o.attribute&&""!==n||(n=Boolean(n)):n=!0,null==n||!1===n||"number"==typeof n&&Number.isNaN(n))return"";var u=w(o.attribute,Object.assign({},e.settings.characterReferences,{subset:z.name[i][a]}));return!0===n?u:(n=Array.isArray(n)?(o.commaSeparated?A.A:S.A)(n,{padLeft:!e.settings.tightCommaSeparatedLists}):String(n),e.settings.collapseEmptyAttributes&&!n?u:(e.settings.preferUnquoted&&(r=w(n,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:z.unquoted[i][a]}))),r!==n&&(e.settings.quoteSmart&&x(n,s)>x(n,e.alternative)&&(s=e.alternative),r=s+w(n,Object.assign({},e.settings.characterReferences,{subset:("'"===s?z.single:z.double)[i][a],attribute:!0}))+s),u+(r?"="+r:r)))}var U=["<","&"];function G(e,t,n,r){return!n||"element"!==n.type||"script"!==n.tagName&&"style"!==n.tagName?w(e.value,Object.assign({},r.settings.characterReferences,{subset:U})):e.value}var W=(0,i.A)("type",{invalid:function(e){throw new Error("Expected node, not `"+e+"`")},unknown:function(e){throw new Error("Cannot compile unknown node `"+e.type+"`")},handlers:{comment:function(e,t,n,r){return r.settings.bogusComments?"<?"+w(e.value,Object.assign({},r.settings.characterReferences,{subset:k}))+">":"\x3c!--"+e.value.replace(C,(function(e){return w(e,Object.assign({},r.settings.characterReferences,{subset:E}))}))+"--\x3e"},doctype:function(e,t,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"},element:function(e,t,n,r){var i,a=r.schema,s="svg"!==a.space&&r.settings.omitOptionalTags,u="svg"===a.space?r.settings.closeEmptyElements:r.settings.voids.includes(e.tagName.toLowerCase()),l=[];"html"===a.space&&"svg"===e.tagName&&(r.schema=o.JW);var c=function(e,t){var n,r=[],o=-1;if(t)for(n in t)if(null!==t[n]&&void 0!==t[n]){var i=$(e,n,t[n]);i&&r.push(i)}for(;++o<r.length;){var a=e.settings.tightAttributes?r[o].charAt(r[o].length-1):void 0;o!==r.length-1&&'"'!==a&&"'"!==a&&(r[o]+=" ")}return r.join("")}(r,e.properties),d=r.all("html"===a.space&&"template"===e.tagName?e.content:e);return r.schema=a,d&&(u=!1),!c&&s&&V(e,t,n)||(l.push("<",e.tagName,c?" "+c:""),u&&("svg"===a.space||r.settings.closeSelfClosing)&&(i=c.charAt(c.length-1),(!r.settings.tightSelfClosing||"/"===i||i&&'"'!==i&&"'"!==i)&&l.push(" "),l.push("/")),l.push(">")),l.push(d),u||s&&j(e,t,n)||l.push("</"+e.tagName+">"),l.join("")},raw:function(e,t,n,r){return r.settings.allowDangerousHtml?e.value:G(e,0,n,r)},root:function(e,t,n,r){return r.all(e)},text:G}}),q={},K={},Z=[];function J(e,t){var n=t||q,i=n.quote||'"',a='"'===i?"'":'"';if('"'!==i&&"'"!==i)throw new Error("Invalid quote `"+i+"`, expected `'` or `\"`");return{one:X,all:Y,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||r,characterReferences:n.characterReferences||K,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:"svg"===n.space?o.JW:o.qy,quote:i,alternative:a}.one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}function X(e,t,n){return W(e,t,n,this)}function Y(e){for(var t=[],n=e&&e.children||Z,r=-1;++r<n.length;)t[r]=this.one(n[r],r,e);return t.join("")}},7553:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{m:()=>i});var o=/[ \t\n\f\r]/g;function i(e){return"object"===r(e)?"text"===e.type&&a(e.value):a(e)}function a(e){return""===e.replace(o,"")}},6527:(e,t,n)=>{function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(e){if(1!==function(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e).length)throw new Error('Expected "'.concat(e,'" to be a single code point'));return e.codePointAt(0)}n.d(t,{jM:()=>oo,vr:()=>so});var i,a,s,u,l,c,d,f,p,h,m,v,g,y=new Set(["alnum","alpha","ascii","blank","cntrl","digit","graph","lower","print","punct","space","upper","word","xdigit"]),b=String.raw;function D(e,t){if(null==e)throw new Error(null!=t?t:"Value expected");return e}function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function C(){C=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,r,o){var i=RegExp(e,r);return t.set(i,o||t.get(e)),k(i,n.prototype)}function r(e,n){var r=t.get(n);return Object.keys(r).reduce((function(t,n){var o=r[n];if("number"==typeof o)t[n]=e[o];else{for(var i=0;void 0===e[o[i]]&&i+1<o.length;)i++;t[n]=e[o[i]]}return t}),Object.create(null))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);if(n){n.groups=r(n,this);var o=n.indices;o&&(o.groups=r(o,this))}return n},n.prototype[Symbol.replace]=function(n,o){if("string"==typeof o){var i=t.get(this);return e[Symbol.replace].call(this,n,o.replace(/\$<([^>]+)>/g,(function(e,t){var n=i[t];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof o){var a=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=w(e[e.length-1])&&(e=[].slice.call(e)).push(r(e,a)),o.apply(this,e)}))}return e[Symbol.replace].call(this,n,o)},C.apply(this,arguments)}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return F(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t,n){return(t=function(e){var t=function(e){if("object"!=w(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var T=b(i||(i=O(["[^?"],["\\[\\^?"]))),P="c.? | C(?:-.?)?|".concat(b(a||(a=O(["[pP]{(?:^?[- _]*[A-Za-z][- w]*})?"],["[pP]\\{(?:\\^?[-\\x20_]*[A-Za-z][-\\x20\\w]*\\})?"]))),"|").concat(b(s||(s=O(["x[89A-Fa-f]p{AHex}(?:\\x[89A-Fa-f]p{AHex})*"],["x[89A-Fa-f]\\p{AHex}(?:\\\\x[89A-Fa-f]\\p{AHex})*"]))),"|").concat(b(u||(u=O(["u(?:p{AHex}{4})? | x{[^}]*}? | xp{AHex}{0,2}"],["u(?:\\p{AHex}{4})? | x\\{[^\\}]*\\}? | x\\p{AHex}{0,2}"]))),"|").concat(b(l||(l=O(["o{[^}]*}?"],["o\\{[^\\}]*\\}?"]))),"|").concat(b(c||(c=O(["d{1,3}"],["\\d{1,3}"])))),N=/[?*+][?+]?|\{(?:\d+(?:,\d*)?|,\d+)\}\??/,_=new RegExp(b(d||(d=O(["\n  \\ (?:\n    ","\n    | [gk]<[^>]*>?\n    | [gk]'[^']*'?\n    | .\n  )\n  | ( (?:\n    ? (?:\n      [:=!>({]\n      | <[=!]\n      | <[^>]*>\n      | '[^']*'\n      | ~|?\n      | #(?:[^)\\]|\\.?)*\n      | [^:)]*[:)]\n    )?\n    | *[^)]*)?\n  )?\n  | (?:",")+\n  | ","\n  | .\n"],["\n  \\\\ (?:\n    ","\n    | [gk]<[^>]*>?\n    | [gk]'[^']*'?\n    | .\n  )\n  | \\( (?:\n    \\? (?:\n      [:=!>({]\n      | <[=!]\n      | <[^>]*>\n      | '[^']*'\n      | ~\\|?\n      | #(?:[^)\\\\]|\\\\.?)*\n      | [^:)]*[:)]\n    )?\n    | \\*[^\\)]*\\)?\n  )?\n  | (?:",")+\n  | ","\n  | .\n"])),P,N.source,T).replace(/\s+/g,""),"gsu"),j=new RegExp(b(f||(f=O(["\n  \\ (?:\n    ","\n    | .\n  )\n  | [:(?:^?p{Alpha}+|^):]\n  | ","\n  | &&\n  | .\n"],["\n  \\\\ (?:\n    ","\n    | .\n  )\n  | \\[:(?:\\^?\\p{Alpha}+|\\^):\\]\n  | ","\n  | &&\n  | .\n"])),P,T).replace(/\s+/g,""),"gsu");function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=M(M({flags:""},t),{},{rules:M({captureGroup:!1,singleline:!1},t.rules)});if("string"!=typeof e)throw new Error("String expected as pattern");var r,i=function(e){for(var t={ignoreCase:!1,dotAll:!1,extended:!1,digitIsAscii:!1,posixIsAscii:!1,spaceIsAscii:!1,wordIsAscii:!1,textSegmentMode:null},n=0;n<e.length;n++){var r=e[n];if(!"imxDPSWy".includes(r))throw new Error('Invalid flag "'.concat(r,'"'));if("y"!==r)t[{i:"ignoreCase",m:"dotAll",x:"extended",D:"digitIsAscii",P:"posixIsAscii",S:"spaceIsAscii",W:"wordIsAscii"}[r]]=!0;else{if(!/^y{[gw]}/.test(e.slice(n)))throw new Error('Invalid or unspecified flag "y" mode');t.textSegmentMode="g"===e[n+2]?"grapheme":"word",n+=3}}return t}(n.flags),a=[i.extended],s={captureGroup:n.rules.captureGroup,getCurrentModX:function(){return a.at(-1)},numOpenGroups:0,popModX:function(){a.pop()},pushModX:function(e){a.push(e)},replaceCurrentModX:function(e){a[a.length-1]=e},singleline:n.rules.singleline},u=[];for(_.lastIndex=0;r=_.exec(e);){var l=R(s,e,r[0],_.lastIndex);l.tokens?u.push.apply(u,x(l.tokens)):l.token&&u.push(l.token),void 0!==l.lastIndex&&(_.lastIndex=l.lastIndex)}var c=[],d=0;u.filter((function(e){return"GroupOpen"===e.type})).forEach((function(e){"capturing"===e.kind?e.number=++d:"("===e.raw&&c.push(e)})),d||c.forEach((function(e,t){e.kind="capturing",e.number=t+1}));var f=d||c.length;return{tokens:u.map((function(e){return"EscapedNumber"===e.type?function(e,t){var n=e.raw,r=e.inCharClass,i=n.slice(1);if(!r&&("0"!==i&&1===i.length||"0"!==i[0]&&+i<=t))return[$(n)];for(var a=[],s=i.match(/^[0-7]+|\d/g),u=0;u<s.length;u++){var l=s[u],c=void 0;if(0===u&&"8"!==l&&"9"!==l){if((c=parseInt(l,8))>127)throw new Error(b(g||(g=O(['Octal encoded byte above 177 unsupported "','"'])),n))}else c=o(l);a.push(U(c,(0===u?"\\":"")+l))}return a}(e,f):e})).flat(),flags:i}}function R(e,t,n,r){var i=E(n,2),a=i[0],s=i[1];if("["===n||"[^"===n){var u=function(e,t,n){var r,o=[W("^"===t[1],t)],i=1;for(j.lastIndex=n;r=j.exec(e);){var a=r[0];if("["===a[0]&&":"!==a[1])i++,o.push(W("^"===a[1],a));else if("]"===a){if("CharacterClassOpen"===o.at(-1).type)o.push(U(93,a));else if(i--,o.push(G(a)),!i)break}else{var s=L(a);Array.isArray(s)?o.push.apply(o,x(s)):o.push(s)}}return{tokens:o,lastIndex:j.lastIndex||e.length}}(t,n,r);return{tokens:u.tokens,lastIndex:u.lastIndex}}if("\\"===a){if("AbBGyYzZ".includes(s))return{token:z(n,n)};if(/^\\g[<']/.test(n)){if(!/^\\g(?:<[^>]+>|'[^']+')$/.test(n))throw new Error('Invalid group name "'.concat(n,'"'));return{token:X(n)}}if(/^\\k[<']/.test(n)){if(!/^\\k(?:<[^>]+>|'[^']+')$/.test(n))throw new Error('Invalid group name "'.concat(n,'"'));return{token:$(n)}}if("K"===s)return{token:K("keep",n)};if("N"===s||"R"===s)return{token:q("newline",n,{negate:"N"===s})};if("O"===s)return{token:q("any",n)};if("X"===s)return{token:q("text_segment",n)};var l=H(n,{inCharClass:!1});return Array.isArray(l)?{tokens:l}:{token:l}}if("("===a){if("*"===s)return{token:te(n)};if("(?{"===n)throw new Error('Unsupported callout "'.concat(n,'"'));if(n.startsWith("(?#")){if(")"!==t[r])throw new Error('Unclosed comment group "(?#"');return{lastIndex:r+1}}if(/^\(\?[-imx]+[:)]$/.test(n))return{token:ee(n,e)};if(e.pushModX(e.getCurrentModX()),e.numOpenGroups++,"("===n&&!e.captureGroup||"(?:"===n)return{token:J("group",n)};if("(?>"===n)return{token:J("atomic",n)};if("(?="===n||"(?!"===n||"(?<="===n||"(?<!"===n)return{token:J("<"===n[2]?"lookbehind":"lookahead",n,{negate:n.endsWith("!")})};if("("===n&&e.captureGroup||n.startsWith("(?<")&&n.endsWith(">")||n.startsWith("(?'")&&n.endsWith("'"))return{token:J("capturing",n,M({},"("!==n&&{name:n.slice(3,-1)}))};if(n.startsWith("(?~")){if("(?~|"===n)throw new Error('Unsupported absence function kind "'.concat(n,'"'));return{token:J("absence_repeater",n)}}throw"(?("===n?new Error('Unsupported conditional "'.concat(n,'"')):new Error('Invalid or unsupported group option "'.concat(n,'"'))}if(")"===n){if(e.popModX(),e.numOpenGroups--,e.numOpenGroups<0)throw new Error('Unmatched ")"');return{token:Z(n)}}if(e.getCurrentModX()){if("#"===n){var c=t.indexOf("\n",r);return{lastIndex:-1===c?t.length:c}}if(/^\s$/.test(n)){var d=new RegExp("\\s+","y");return d.lastIndex=r,{lastIndex:d.exec(t)?d.lastIndex:r}}}return"."===n?{token:q("dot",n)}:"^"===n||"$"===n?{token:z(e.singleline?{"^":b(p||(p=O(["A"],["\\A"]))),$:b(h||(h=O(["Z"],["\\Z"])))}[n]:n,n)}:"|"===n?{token:V(n)}:N.test(n)?{tokens:oe(n)}:{token:U(o(n),n)}}function L(e){if("\\"===e[0])return H(e,{inCharClass:!0});if("["===e[0]){var t=C(/\[:(\^?)([a-z]+):\]/,{negate:1,name:2}).exec(e);if(!t||!y.has(t.groups.name))throw new Error('Invalid POSIX class "'.concat(e,'"'));return q("posix",e,{value:t.groups.name,negate:!!t.groups.negate})}return"-"===e?function(e){return{type:"CharacterClassHyphen",raw:e}}(e):"&&"===e?function(e){return{type:"CharacterClassIntersector",raw:e}}(e):U(o(e),e)}function H(e,t){var n=t.inCharClass,r=e[1];if("c"===r||"C"===r)return function(e){var t="c"===e[1]?e[2]:e[3];if(!t||!/[A-Za-z]/.test(t))throw new Error('Unsupported control character "'.concat(e,'"'));return U(o(t.toUpperCase())-64,e)}(e);if("dDhHsSwW".includes(r))return function(e){var t=e[1].toLowerCase();return q({d:"digit",h:"hex",s:"space",w:"word"}[t],e,{negate:e[1]!==t})}(e);if(e.startsWith(b(m||(m=O(["o{"],["\\o{"])))))throw new Error('Incomplete, invalid, or unsupported octal code point "'.concat(e,'"'));if(/^\\[pP]\{/.test(e)){if(3===e.length)throw new Error('Incomplete or invalid Unicode property "'.concat(e,'"'));return function(e){var t=C(/^\\([pP])\{(\^?)([^}]+)/,{p:1,neg:2,value:3}).exec(e).groups,n=t.p,r=t.neg;return q("property",e,{value:t.value,negate:"P"===n&&!r||"p"===n&&!!r})}(e)}if(/^\\x[89A-Fa-f][0-9A-Fa-f]/.test(e))try{var i=e.split(/\\x/).slice(1).map((function(e){return parseInt(e,16)})),a=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}).decode(new Uint8Array(i)),s=new TextEncoder;return x(a).map((function(e){var t=x(s.encode(e)).map((function(e){return"\\x".concat(e.toString(16))})).join("");return U(o(e),t)}))}catch(t){throw new Error('Multibyte code "'.concat(e,'" incomplete or invalid in Oniguruma'))}if("u"===r||"x"===r)return U(function(e){if(/^(?:\\u(?![0-9A-Fa-f]{4})|\\x(?![0-9A-Fa-f]{1,2}|\{[0-9A-Fa-f]{1,8}\}))/.test(e))throw new Error('Incomplete or invalid escape "'.concat(e,'"'));var t="{"===e[2]?C(/^\\x\{[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*([0-9A-Fa-f]+)/,{hex:1}).exec(e).groups.hex:e.slice(2);return parseInt(t,16)}(e),e);if(Q.has(r))return U(Q.get(r),e);if(/\d/.test(r))return function(e,t){return{type:"EscapedNumber",inCharClass:e,raw:t}}(n,e);if("\\"===e)throw new Error(b(v||(v=O(['Incomplete escape ""'],['Incomplete escape "\\"']))));if("M"===r)throw new Error('Unsupported meta "'.concat(e,'"'));if(2===x(e).length)return U(e.codePointAt(1),e);throw new Error('Unexpected escape "'.concat(e,'"'))}function V(e){return{type:"Alternator",raw:e}}function z(e,t){return{type:"Assertion",kind:e,raw:t}}function $(e){return{type:"Backreference",raw:e}}function U(e,t){return{type:"Character",value:e,raw:t}}function G(e){return{type:"CharacterClassClose",raw:e}}function W(e,t){return{type:"CharacterClassOpen",negate:e,raw:t}}function q(e,t){return M(M({type:"CharacterSet",kind:e},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),{},{raw:t})}function K(e,t){return"keep"===e?{type:"Directive",kind:e,raw:t}:{type:"Directive",kind:e,flags:D((arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).flags),raw:t}}function Z(e){return{type:"GroupClose",raw:e}}function J(e,t){return M(M({type:"GroupOpen",kind:e},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),{},{raw:t})}function X(e){return{type:"Subroutine",raw:e}}var Y=new Set(["COUNT","CMP","ERROR","FAIL","MAX","MISMATCH","SKIP","TOTAL_COUNT"]),Q=new Map([["a",7],["b",8],["e",27],["f",12],["n",10],["r",13],["t",9],["v",11]]);function ee(e,t){var n,r=C(/^\(\?([imx]*)(?:-([-imx]*))?/,{on:1,off:2}).exec(e).groups,o=r.on,i=r.off;null!==(n=i)&&void 0!==n||(i="");var a=(t.getCurrentModX()||o.includes("x"))&&!i.includes("x"),s=re(o),u=re(i),l={};if(s&&(l.enable=s),u&&(l.disable=u),e.endsWith(")"))return t.replaceCurrentModX(a),K("flags",e,{flags:l});if(e.endsWith(":"))return t.pushModX(a),t.numOpenGroups++,J("group",e,M({},(s||u)&&{flags:l}));throw new Error('Unexpected flag modifier "'.concat(e,'"'))}function te(e){var t,n=C(/\(\*([A-Za-z_]\w*)?(?:\[((?:[A-Za-z_]\w*)?)\])?(?:\{([^}]*)\})?\)/,{name:1,tag:2,args:3}).exec(e);if(!n)throw new Error('Incomplete or invalid named callout "'.concat(e,'"'));var r=n.groups,o=r.name,i=r.tag,a=r.args;if(!o)throw new Error('Invalid named callout "'.concat(e,'"'));if(""===i)throw new Error('Named callout tag with empty value not allowed "'.concat(e,'"'));var s=a?a.split(",").filter((function(e){return""!==e})).map((function(e){return/^[+-]?\d+$/.test(e)?+e:e})):[],u=E(s,3),l=u[0],c=u[1],d=u[2],f=Y.has(o)?o.toLowerCase():"custom";switch(f){case"fail":case"mismatch":case"skip":if(s.length>0)throw new Error('Named callout arguments not allowed "'.concat(s,'"'));break;case"error":if(s.length>1)throw new Error('Named callout allows only one argument "'.concat(s,'"'));if("string"==typeof l)throw new Error('Named callout argument must be a number "'.concat(l,'"'));break;case"max":if(!s.length||s.length>2)throw new Error('Named callout must have one or two arguments "'.concat(s,'"'));if("string"==typeof l&&!/^[A-Za-z_]\w*$/.test(l))throw new Error('Named callout argument one must be a tag or number "'.concat(l,'"'));if(2===s.length&&("number"==typeof c||!/^[<>X]$/.test(c)))throw new Error("Named callout optional argument two must be '<', '>', or 'X' \"".concat(c,'"'));break;case"count":case"total_count":if(s.length>1)throw new Error('Named callout allows only one argument "'.concat(s,'"'));if(1===s.length&&("number"==typeof l||!/^[<>X]$/.test(l)))throw new Error("Named callout optional argument must be '<', '>', or 'X' \"".concat(l,'"'));break;case"cmp":if(3!==s.length)throw new Error('Named callout must have three arguments "'.concat(s,'"'));if("string"==typeof l&&!/^[A-Za-z_]\w*$/.test(l))throw new Error('Named callout argument one must be a tag or number "'.concat(l,'"'));if("number"==typeof c||!/^(?:[<>!=]=|[<>])$/.test(c))throw new Error("Named callout argument two must be '==', '!=', '>', '<', '>=', or '<=' \"".concat(c,'"'));if("string"==typeof d&&!/^[A-Za-z_]\w*$/.test(d))throw new Error('Named callout argument three must be a tag or number "'.concat(d,'"'));break;case"custom":throw new Error('Undefined callout name "'.concat(o,'"'));default:throw new Error('Unexpected named callout kind "'.concat(f,'"'))}return function(e,t,n,r){return{type:"NamedCallout",kind:e,tag:t,arguments:n,raw:r}}(f,null!=i?i:null,null!==(t=null==a?void 0:a.split(","))&&void 0!==t?t:null,e)}function ne(e){var t,n,r=null;if("{"===e[0]){var o,i=C(/^\{(\d*)(?:,(\d*))?/,{minStr:1,maxStr:2}).exec(e).groups,a=i.minStr,s=i.maxStr,u=1e5;if(+a>u||s&&+s>u)throw new Error("Quantifier value unsupported in Oniguruma");if((t=+a)>(n=void 0===s?+a:""===s?1/0:+s)&&(r="possessive",t=(o=[n,t])[0],n=o[1]),e.endsWith("?")){if("possessive"===r)throw new Error('Unsupported possessive interval quantifier chain with "?"');r="lazy"}else r||(r="greedy")}else t="+"===e[0]?1:0,n="?"===e[0]?1:1/0,r="+"===e[1]?"possessive":"?"===e[1]?"lazy":"greedy";return function(e,t,n,r){return{type:"Quantifier",kind:e,min:t,max:n,raw:r}}(r,t,n,e)}function re(e){var t={};return e.includes("i")&&(t.ignoreCase=!0),e.includes("m")&&(t.dotAll=!0),e.includes("x")&&(t.extended=!0),Object.keys(t).length?t:null}function oe(e){for(var t,n=[],r=new RegExp(N,"gy");t=r.exec(e);){var o=t[0];if("{"===o[0]){var i=C(/^\{(\d+),(\d+)\}\??$/,{min:1,max:2}).exec(o);if(i){var a=i.groups;if(+a.min>+a.max&&o.endsWith("?")){r.lastIndex--,n.push(ne(o.slice(0,-1)));continue}}}n.push(ne(o))}return n}function ie(e,t){if(!Array.isArray(e.body))throw new Error("Expected node with body array");if(1!==e.body.length)return!1;var n=e.body[0];return!t||Object.keys(t).every((function(e){return t[e]===n[e]}))}new Set(["AbsenceFunction","CapturingGroup","Group","LookaroundAssertion","Regex"]);var ae,se,ue,le,ce,de,fe=new Set(["AbsenceFunction","Backreference","CapturingGroup","Character","CharacterClass","CharacterSet","Group","Quantifier","Subroutine"]);function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function he(){he=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,r,o){var i=RegExp(e,r);return t.set(i,o||t.get(e)),me(i,n.prototype)}function r(e,n){var r=t.get(n);return Object.keys(r).reduce((function(t,n){var o=r[n];if("number"==typeof o)t[n]=e[o];else{for(var i=0;void 0===e[o[i]]&&i+1<o.length;)i++;t[n]=e[o[i]]}return t}),Object.create(null))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&me(e,t)}(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);if(n){n.groups=r(n,this);var o=n.indices;o&&(o.groups=r(o,this))}return n},n.prototype[Symbol.replace]=function(n,o){if("string"==typeof o){var i=t.get(this);return e[Symbol.replace].call(this,n,o.replace(/\$<([^>]+)>/g,(function(e,t){var n=i[t];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof o){var a=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=pe(e[e.length-1])&&(e=[].slice.call(e)).push(r(e,a)),o.apply(this,e)}))}return e[Symbol.replace].call(this,n,o)},he.apply(this,arguments)}function me(e,t){return me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},me(e,t)}function ve(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){De(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function De(e,t,n){return(t=function(e){var t=function(e){if("object"!=pe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function we(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=be(be({flags:"",normalizeUnknownPropertyNames:!1,skipBackrefValidation:!1,skipLookbehindValidation:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null},t),{},{rules:be({captureGroup:!1,singleline:!1},t.rules)}),r=I(e,{flags:n.flags,rules:{captureGroup:n.rules.captureGroup,singleline:n.rules.singleline}}),i=function(e,t){var n=r.tokens[a.nextIndex];switch(a.parent=e,a.nextIndex++,n.type){case"Alternator":return Ce();case"Assertion":return function(e){var t=e.kind;return ke(D({"^":"line_start",$:"line_end","\\A":"string_start","\\b":"word_boundary","\\B":"word_boundary","\\G":"search_start","\\y":"text_segment_boundary","\\Y":"text_segment_boundary","\\z":"string_end","\\Z":"string_end_newline"}[t],'Unexpected assertion kind "'.concat(t,'"')),{negate:t===b(ue||(ue=ve(["B"],["\\B"])))||t===b(le||(le=ve(["Y"],["\\Y"])))})}(n);case"Backreference":return function(e,t){var n=e.raw,r=/^\\k[<']/.test(n),o=r?n.slice(3,-1):n.slice(1),i=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=t.capturingGroups.length,i=!1;if(e>o){if(!t.skipBackrefValidation)throw new Error('Not enough capturing groups defined to the left "'.concat(n,'"'));i=!0}return t.hasNumberedRef=!0,Ee(r?o+1-e:e,{orphan:i})};if(r){var a=he(/^(-?)0*([1-9]\d*)$/,{sign:1,num:2}).exec(o);if(a)return i(+a.groups.num,!!a.groups.sign);if(/[-+]/.test(o))throw new Error('Invalid backref name "'.concat(n,'"'));if(!t.namedGroupsByName.has(o))throw new Error('Group name not defined to the left "'.concat(n,'"'));return Ee(o)}return i(+o)}(n,a);case"Character":return Ae(n.value,{useLastValid:!!t.isCheckingRangeEnd});case"CharacterClassHyphen":return function(e,t,n){var r=t.tokens,i=t.walk,a=t.parent,s=a.body.at(-1),u=r[t.nextIndex];if(!n.isCheckingRangeEnd&&s&&"CharacterClass"!==s.type&&"CharacterClassRange"!==s.type&&u&&"CharacterClassOpen"!==u.type&&"CharacterClassClose"!==u.type&&"CharacterClassIntersector"!==u.type){var l=i(a,be(be({},n),{},{isCheckingRangeEnd:!0}));if("Character"===s.type&&"Character"===l.type)return a.body.pop(),function(e,t){if(t.value<e.value)throw new Error("Character class range out of order");return{type:"CharacterClassRange",min:e,max:t}}(s,l);throw new Error("Invalid character class range")}return Ae(o("-"))}(0,a,t);case"CharacterClassOpen":return function(e,t,n){for(var r=e.negate,o=t.tokens,i=t.walk,a=o[t.nextIndex],s=[Fe()],u=Le(a);"CharacterClassClose"!==u.type;){if("CharacterClassIntersector"===u.type)s.push(Fe()),t.nextIndex++;else{var l=s.at(-1);l.body.push(i(l,n))}u=Le(o[t.nextIndex],a)}var c=Fe({negate:r});return 1===s.length?c.body=s[0].body:(c.kind="intersection",c.body=s.map((function(e){return 1===e.body.length?e.body[0]:e}))),t.nextIndex++,c}(n,a,t);case"CharacterSet":return function(e,t){var n=e.kind,r=e.negate,o=e.value,i=t.normalizeUnknownPropertyNames,a=t.skipPropertyNameValidation,s=t.unicodePropertyMap;if("property"===n){var u=Re(o);if(!y.has(u)||null!=s&&s.has(u))return Pe(o,{negate:r,normalizeUnknownPropertyNames:i,skipPropertyNameValidation:a,unicodePropertyMap:s});n="posix",o=u}return"posix"===n?function(e,t){var n=!(null==t||!t.negate);if(!y.has(e))throw new Error('Invalid POSIX class "'.concat(e,'"'));return{type:"CharacterSet",kind:"posix",value:e,negate:n}}(o,{negate:r}):Se(n,{negate:r})}(n,a);case"Directive":return function(e){if("keep"===e)return{type:"Directive",kind:e};if("flags"===e)return{type:"Directive",kind:e,flags:D((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).flags)};throw new Error('Unexpected directive kind "'.concat(e,'"'))}(n.kind,{flags:n.flags});case"GroupOpen":return function(e,t,n){var r=t.tokens,o=t.capturingGroups,i=t.namedGroupsByName,a=t.skipLookbehindValidation,s=t.walk,u=function(e){var t=e.flags,n=e.kind,r=e.name,o=e.negate,i=e.number;switch(n){case"absence_repeater":return function(e){return{type:"AbsenceFunction",kind:e,body:Ne(void 0)}}("repeater");case"atomic":return Me({atomic:!0});case"capturing":return xe(i,{name:r});case"group":return Me({flags:t});case"lookahead":case"lookbehind":return Be({behind:"lookbehind"===n,negate:o});default:throw new Error('Unexpected group kind "'.concat(n,'"'))}}(e),l="AbsenceFunction"===u.type,c=Ie(u),d=c&&u.negate;if("CapturingGroup"===u.type&&(o.push(u),u.name&&function(e,t){return e.has(t)||e.set(t,[]),e.get(t)}(i,u.name).push(u)),l&&n.isInAbsenceFunction)throw new Error("Nested absence function not supported by Oniguruma");for(var f=He(r[t.nextIndex]);"GroupClose"!==f.type;){if("Alternator"===f.type)u.body.push(Ce()),t.nextIndex++;else{var p=u.body.at(-1),h=s(p,be(be({},n),{},{isInAbsenceFunction:n.isInAbsenceFunction||l,isInLookbehind:n.isInLookbehind||c,isInNegLookbehind:n.isInNegLookbehind||d}));if(p.body.push(h),(c||n.isInLookbehind)&&!a){var m="Lookbehind includes a pattern not allowed by Oniguruma";if(d||n.isInNegLookbehind){if(je(h)||"CapturingGroup"===h.type)throw new Error(m)}else if(je(h)||Ie(h)&&h.negate)throw new Error(m)}}f=He(r[t.nextIndex])}return t.nextIndex++,u}(n,a,t);case"NamedCallout":return function(e,t,n){return{type:"NamedCallout",kind:e,tag:t,arguments:n}}(n.kind,n.tag,n.arguments);case"Quantifier":return function(e,t){var n=e.kind,r=e.min,o=e.max,i=t.parent,a=i.body.at(-1);if(!a||!function(e){return fe.has(e.type)}(a))throw new Error("Quantifier requires a repeatable token");var s=Oe(n,r,o,a);return i.body.pop(),s}(n,a);case"Subroutine":return function(e,t){var n=e.raw,r=t.capturingGroups,o=t.subroutines,i=n.slice(3,-1),a=he(/^([-+]?)0*([1-9]\d*)$/,{sign:1,num:2}).exec(i);if(a){var s=+a.groups.num,u=r.length;if(t.hasNumberedRef=!0,(i={"":s,"+":u+s,"-":u+1-s}[a.groups.sign])<1)throw new Error("Invalid subroutine number")}else"0"===i&&(i=0);var l=Te(i);return o.push(l),l}(n,a);default:throw new Error('Unexpected token type "'.concat(n.type,'"'))}},a={capturingGroups:[],hasNumberedRef:!1,namedGroupsByName:new Map,nextIndex:0,normalizeUnknownPropertyNames:n.normalizeUnknownPropertyNames,parent:null,skipBackrefValidation:n.skipBackrefValidation,skipLookbehindValidation:n.skipLookbehindValidation,skipPropertyNameValidation:n.skipPropertyNameValidation,subroutines:[],tokens:r.tokens,unicodePropertyMap:n.unicodePropertyMap,walk:i},s=function(e){return{type:"Regex",body:Ne(void 0),flags:e}}(function(e){return be({type:"Flags"},e)}(r.flags)),u=s.body[0];a.nextIndex<r.tokens.length;){var l=i(u,{});"Alternative"===l.type?(s.body.push(l),u=l):u.body.push(l)}var c=a.capturingGroups,d=a.hasNumberedRef,f=a.namedGroupsByName,p=a.subroutines;if(d&&f.size&&!n.rules.captureGroup)throw new Error("Numbered backref/subroutine not allowed when using named capture");var h,m=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ge(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ge(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(p);try{for(m.s();!(h=m.n()).done;){var v=h.value.ref;if("number"==typeof v){if(v>c.length)throw new Error("Subroutine uses a group number that's not defined");v&&(c[v-1].isSubroutined=!0)}else{if(!f.has(v))throw new Error(b(se||(se=ve(["Subroutine uses a group name that's not defined \"g<",'>"'],["Subroutine uses a group name that's not defined \"\\g<",'>"'])),v));if(f.get(v).length>1)throw new Error(b(ae||(ae=ve(['Subroutine uses a duplicate group name "g<','>"'],['Subroutine uses a duplicate group name "\\g<','>"'])),v));f.get(v)[0].isSubroutined=!0}}}catch(e){m.e(e)}finally{m.f()}return s}function Ce(e){return{type:"Alternative",body:_e(null==e?void 0:e.body)}}function ke(e,t){var n={type:"Assertion",kind:e};return("word_boundary"===e||"text_segment_boundary"===e)&&(n.negate=!(null==t||!t.negate)),n}function Ee(e,t){var n=!(null==t||!t.orphan);return be({type:"Backreference",ref:e},n&&{orphan:n})}function xe(e,t){var n=be({name:void 0,isSubroutined:!1},t);if(void 0!==n.name&&!function(e){return/^(?:[A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0345\u0363-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05B0-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0657\u0659-\u065F\u066E-\u06D3\u06D5-\u06DC\u06E1-\u06E8\u06ED-\u06EF\u06FA-\u06FC\u06FF\u0710-\u073F\u074D-\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0817\u081A-\u082C\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u0897\u08A0-\u08C9\u08D4-\u08DF\u08E3-\u08E9\u08F0-\u093B\u093D-\u094C\u094E-\u0950\u0955-\u0963\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C4\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09F0\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A42\u0A47\u0A48\u0A4B\u0A4C\u0A51\u0A59-\u0A5C\u0A5E\u0A70-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC5\u0AC7-\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0-\u0AE3\u0AF9-\u0AFC\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D-\u0B44\u0B47\u0B48\u0B4B\u0B4C\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4C\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCC\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E46\u0E4D\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0ECD\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F71-\u0F83\u0F88-\u0F97\u0F99-\u0FBC\u1000-\u1036\u1038\u103B-\u103F\u1050-\u108F\u109A-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1713\u171F-\u1733\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17B3\u17B6-\u17C8\u17D7\u17DC\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u1938\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A1B\u1A20-\u1A5E\u1A61-\u1A74\u1AA7\u1ABF\u1AC0\u1ACC-\u1ACE\u1B00-\u1B33\u1B35-\u1B43\u1B45-\u1B4C\u1B80-\u1BA9\u1BAC-\u1BAF\u1BBA-\u1BE5\u1BE7-\u1BF1\u1C00-\u1C36\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1DD3-\u1DF4\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u24B6-\u24E9\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA674-\uA67B\uA67F-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA805\uA807-\uA827\uA840-\uA873\uA880-\uA8C3\uA8C5\uA8F2-\uA8F7\uA8FB\uA8FD-\uA8FF\uA90A-\uA92A\uA930-\uA952\uA960-\uA97C\uA980-\uA9B2\uA9B4-\uA9BF\uA9CF\uA9E0-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA60-\uAA76\uAA7A-\uAABE\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD4A-\uDD65\uDD69\uDD6F-\uDD85\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDEC2-\uDEC4\uDEFC\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC45\uDC71-\uDC75\uDC80-\uDCB8\uDCC2\uDCD0-\uDCE8\uDD00-\uDD32\uDD44-\uDD47\uDD50-\uDD72\uDD76\uDD80-\uDDBF\uDDC1-\uDDC4\uDDCE\uDDCF\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE34\uDE37\uDE3E-\uDE41\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEE8\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D-\uDF44\uDF47\uDF48\uDF4B\uDF4C\uDF50\uDF57\uDF5D-\uDF63\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7-\uDFC0\uDFC2\uDFC5\uDFC7-\uDFCA\uDFCC\uDFCD\uDFD1\uDFD3]|\uD805[\uDC00-\uDC41\uDC43-\uDC45\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCC1\uDCC4\uDCC5\uDCC7\uDD80-\uDDB5\uDDB8-\uDDBE\uDDD8-\uDDDD\uDE00-\uDE3E\uDE40\uDE44\uDE80-\uDEB5\uDEB8\uDF00-\uDF1A\uDF1D-\uDF2A\uDF40-\uDF46]|\uD806[\uDC00-\uDC38\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B\uDD3C\uDD3F-\uDD42\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDDF\uDDE1\uDDE3\uDDE4\uDE00-\uDE32\uDE35-\uDE3E\uDE50-\uDE97\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC3E\uDC40\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD41\uDD43\uDD46\uDD47\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD96\uDD98\uDEE0-\uDEF6\uDF00-\uDF10\uDF12-\uDF3A\uDF3E-\uDF40\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFF0\uDFF1]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9E]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC30-\uDC6D\uDC8F\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD47\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD30-\uDD49\uDD50-\uDD69\uDD70-\uDD89]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[\0-\(\*-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*$/.test(e)}(n.name))throw new Error('Group name "'.concat(n.name,'" invalid in Oniguruma'));return be(be(be({type:"CapturingGroup",number:e},n.name&&{name:n.name}),n.isSubroutined&&{isSubroutined:n.isSubroutined}),{},{body:Ne(null==t?void 0:t.body)})}function Ae(e,t){var n=be({useLastValid:!1},t);if(e>1114111){var r=e.toString(16);if(!n.useLastValid)throw e>1310719?new Error('Invalid code point out of range "\\x{'.concat(r,'}"')):new Error('Invalid code point out of range in JS "\\x{'.concat(r,'}"'));e=1114111}return{type:"Character",value:e}}function Fe(e){var t=be({kind:"union",negate:!1},e);return{type:"CharacterClass",kind:t.kind,negate:t.negate,body:_e(null==e?void 0:e.body)}}function Se(e,t){var n=!(null==t||!t.negate),r={type:"CharacterSet",kind:e};return("digit"===e||"hex"===e||"newline"===e||"space"===e||"word"===e)&&(r.negate=n),("text_segment"===e||"newline"===e&&!n)&&(r.variableLength=!0),r}function Me(e){var t=null==e?void 0:e.atomic,n=null==e?void 0:e.flags;if(t&&n)throw new Error("Atomic group cannot have flags");return be(be(be({type:"Group"},t&&{atomic:t}),n&&{flags:n}),{},{body:Ne(null==e?void 0:e.body)})}function Be(e){var t=be({behind:!1,negate:!1},e);return{type:"LookaroundAssertion",kind:t.behind?"lookbehind":"lookahead",negate:t.negate,body:Ne(null==e?void 0:e.body)}}function Oe(e,t,n,r){if(t>n)throw new Error("Invalid reversed quantifier range");return{type:"Quantifier",kind:e,min:t,max:n,body:r}}function Te(e){return{type:"Subroutine",ref:e}}function Pe(e,t){var n,r,o=be({negate:!1,normalizeUnknownPropertyNames:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null},t),i=null===(n=o.unicodePropertyMap)||void 0===n?void 0:n.get(Re(e));if(!i)if(o.normalizeUnknownPropertyNames)i=function(e){return e.trim().replace(/[- _]+/g,"_").replace(/[A-Z][a-z]+(?=[A-Z])/g,"$&_").replace(/[A-Za-z]+/g,(function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()}))}(e);else if(o.unicodePropertyMap&&!o.skipPropertyNameValidation)throw new Error(b(ce||(ce=ve(['Invalid Unicode property "p{','}"'],['Invalid Unicode property "\\p{','}"'])),e));return{type:"CharacterSet",kind:"property",value:null!==(r=i)&&void 0!==r?r:e,negate:o.negate}}function Ne(e){if(void 0===e)e=[Ce()];else if(!Array.isArray(e)||!e.length||!e.every((function(e){return"Alternative"===e.type})))throw new Error("Invalid body; expected array of one or more Alternative nodes");return e}function _e(e){if(void 0===e)e=[];else if(!Array.isArray(e)||!e.every((function(e){return!!e.type})))throw new Error("Invalid body; expected array of nodes");return e}function je(e){return"LookaroundAssertion"===e.type&&"lookahead"===e.kind}function Ie(e){return"LookaroundAssertion"===e.type&&"lookbehind"===e.kind}function Re(e){return e.replace(/[- _]+/g,"").toLowerCase()}function Le(e,t){return D(e,"".concat("Character"===(null==t?void 0:t.type)&&93===t.value?"Empty":"Unclosed"," character class"))}function He(e){return D(e,"Unclosed group")}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ze(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;function r(e,t){for(var n=0;n<e.length;n++){var r=o(e[n],t,n,e);n=Math.max(-1,n+r)}}function o(i){var a,s,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,d=0,f=!1,p={node:i,parent:u,key:l,container:c,root:e,remove:function(){$e(c).splice(Math.max(0,Ue(l)+d),1),d--,f=!0},removeAllNextSiblings:function(){return $e(c).splice(Ue(l)+1)},removeAllPrevSiblings:function(){var e=Ue(l)+d;return d-=e,$e(c).splice(0,Math.max(0,e))},replaceWith:function(e){var t=!!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).traverse;c?c[Math.max(0,Ue(l)+d)]=e:D(u,"Can't replace root node")[l]=e,t&&o(e,u,l,c),f=!0},replaceWithMultiple:function(e){var t,n=!!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).traverse;if((t=$e(c)).splice.apply(t,[Math.max(0,Ue(l)+d),1].concat(function(e){return function(e){if(Array.isArray(e))return Ve(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ve(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ve(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e))),d+=e.length-1,n)for(var r=0,i=0;i<e.length;i++)r+=o(e[i],u,Ue(l)+i+r,c);f=!0},skip:function(){f=!0}},h=i.type,m=t["*"],v=t[h],g="function"==typeof m?m:null==m?void 0:m.enter,y="function"==typeof v?v:null==v?void 0:v.enter;if(null!=g&&g(p,n),null!=y&&y(p,n),!f)switch(h){case"AbsenceFunction":case"CapturingGroup":case"Group":case"Alternative":case"CharacterClass":case"LookaroundAssertion":r(i.body,i);break;case"Assertion":case"Backreference":case"Character":case"CharacterSet":case"Directive":case"Flags":case"NamedCallout":case"Subroutine":break;case"CharacterClassRange":o(i.min,i,"min"),o(i.max,i,"max");break;case"Quantifier":o(i.body,i,"body");break;case"Regex":r(i.body,i),o(i.flags,i,"flags");break;default:throw new Error('Unexpected node type "'.concat(h,'"'))}return null!=v&&null!==(a=v.exit)&&void 0!==a&&a.call(v,p,n),null!=m&&null!==(s=m.exit)&&void 0!==s&&s.call(m,p,n),d}return o(e),e}function $e(e){if(!Array.isArray(e))throw new Error("Container expected");return e}function Ue(e){if("number"!=typeof e)throw new Error("Numeric key expected");return e}var Ge,We=String.raw(de||(de=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["(?(?:[:=!>A-Za-z-]|<[=!]|(DEFINE))"],["\\(\\?(?:[:=!>A-Za-z\\-]|<[=!]|\\(DEFINE\\))"])));function qe(e,t){for(var n=0;n<e.length;n++)e[n]>=t&&e[n]++}function Ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||Ze(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){if(e){if("string"==typeof e)return Je(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Je(e,t):void 0}}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Xe,Ye,Qe,et,tt=Object.freeze({DEFAULT:"DEFAULT",CHAR_CLASS:"CHAR_CLASS"});function nt(e,t,n,r){var o,i=new RegExp(String.raw(Ge||(Ge=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["","|(?<$skip>[^?|\\?.)"],["","|(?<$skip>\\[\\^?|\\\\?.)"])),t),"gsu"),a=[!1],s=0,u="",l=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Ze(e))){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==t.return||t.return()}finally{if(a)throw o}}}}(e.matchAll(i));try{for(l.s();!(o=l.n()).done;){var c=o.value,d=c[0];c.groups.$skip||r&&r===tt.DEFAULT!=!s?("["===d[0]?(s++,a.push("^"===d[1])):"]"===d&&s&&(s--,a.pop()),u+=d):u+=n instanceof Function?n(c,{context:s?tt.CHAR_CLASS:tt.DEFAULT,negated:a[a.length-1]}):n}}catch(e){l.e(e)}finally{l.f()}return u}function rt(e,t,n,r){nt(e,t,n,r)}function ot(e,t,n){return!!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;if(!new RegExp(t,"su").test(e))return null;var o=new RegExp("".concat(t,"|(?<$skip>\\\\?.)"),"gsu");o.lastIndex=n;for(var i,a=0;i=o.exec(e);){var s=i,u=s[0];if(!(s.groups.$skip||r&&r===tt.DEFAULT!=!a))return i;"["===u?a++:"]"===u&&a&&a--,o.lastIndex==i.index&&o.lastIndex++}return null}(e,t,0,n)}function it(e,t){var n=/\\?(?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g;n.lastIndex=t;for(var r,o=e.length,i=0,a=1;r=n.exec(e);){var s=Ke(r,1)[0];if("["===s)i++;else if(i)"]"===s&&i--;else if("("===s)a++;else if(")"===s&&! --a){o=r.index;break}}return e.slice(t,o)}function at(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var st,ut,lt,ct,dt,ft,pt,ht,mt,vt,gt,yt,bt=new RegExp(String.raw(Xe||(Xe=at(["(?<noncapturingStart>",")|(?<capturingStart>((?:?<[^>]+>)?)|\\?."],["(?<noncapturingStart>",")|(?<capturingStart>\\((?:\\?<[^>]+>)?)|\\\\?."])),We),"gsu"),Dt=String.raw(Qe||(Qe=at(["(?:[?*+]|{d+(?:,d*)?})"],["(?:[?*+]|\\{\\d+(?:,\\d*)?\\})"]))),wt=new RegExp(String.raw(et||(et=at(["\n\\(?: d+\n  | c[A-Za-z]\n  | [gk]<[^>]+>\n  | [pPu]{[^}]+}\n  | u[A-Fa-fd]{4}\n  | x[A-Fa-fd]{2}\n  )\n| ((?: ? (?: [:=!>]\n  | <(?:[=!]|[^>]+>)\n  | [A-Za-z-]+:\n  | (DEFINE)\n  ))?\n| (?<qBase>",")(?<qMod>[?+]?)(?<invalidQ>[?*+{]?)\n| \\?.\n"],["\n\\\\(?: \\d+\n  | c[A-Za-z]\n  | [gk]<[^>]+>\n  | [pPu]\\{[^\\}]+\\}\n  | u[A-Fa-f\\d]{4}\n  | x[A-Fa-f\\d]{2}\n  )\n| \\((?: \\? (?: [:=!>]\n  | <(?:[=!]|[^>]+>)\n  | [A-Za-z\\-]+:\n  | \\(DEFINE\\)\n  ))?\n| (?<qBase>",")(?<qMod>[?+]?)(?<invalidQ>[?*+\\{]?)\n| \\\\?.\n"])),Dt).replace(/\s+/g,""),"gsu");function Ct(e){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ct(e)}function kt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Et(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Et(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function At(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ct(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ct(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ft(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var St=String.raw,Mt=St(st||(st=Ft(["\\g<(?<gRNameOrNum>[^>&]+)&R=(?<gRDepth>[^>]+)>"],["\\\\g<(?<gRNameOrNum>[^>&]+)&R=(?<gRDepth>[^>]+)>"]))),Bt=St(ut||(ut=Ft(["(?R=(?<rDepth>[^)]+))|",""],["\\(\\?R=(?<rDepth>[^\\)]+)\\)|",""])),Mt),Ot=St(lt||(lt=Ft(["(?<(?![=!])(?<captureName>[^>]+)>"],["\\(\\?<(?![=!])(?<captureName>[^>]+)>"]))),Tt=St(ct||(ct=Ft(["","|(?<unnamed>()(?!?)"],["","|(?<unnamed>\\()(?!\\?)"])),Ot),Pt=new RegExp(St(dt||(dt=Ft(["","|","|(?|\\?."],["","|","|\\(\\?|\\\\?."])),Ot,Bt),"gsu"),Nt="Cannot use multiple overlapping recursions";function _t(e){var t="Max depth must be integer between 2 and 100; used ".concat(e);if(!/^[1-9]\d*$/.test(e))throw new Error(t);if((e=+e)<2||e>100)throw new Error(t)}function jt(e,t,n,r,o,i,a){var s=new Set;r&&rt(e+t,Ot,(function(e){var t=e.groups.captureName;s.add(t)}),tt.DEFAULT);var u=[n,r?s:null,o,i,a];return"".concat(e).concat(It.apply(void 0,["(?:".concat(e),"forward"].concat(u)),"(?:)").concat(It.apply(void 0,["".concat(t,")"),"backward"].concat(u))).concat(t)}function It(e,t,n,r,o,i,a){for(var s="",u=function(){var u=function(e){return"forward"===t?e+2:n-e+2-1}(l);s+=nt(e,St(gt||(gt=Ft(["","|\\k<(?<backref>[^>]+)>"],["","|\\\\k<(?<backref>[^>]+)>"])),Tt),(function(e){var t=e[0],n=e.groups,s=n.captureName,l=n.unnamed,c=n.backref;if(c&&r&&!r.has(c))return t;var d="_$".concat(u);if(l||s){var f=a+i.length+1;return i.push(f),function(e,t){for(var n=0;n<e.length;n++)e[n]>=t&&e[n]++}(o,f),l?t:"(?<".concat(s).concat(d,">")}return St(yt||(yt=Ft(["k<","",">"],["\\k<","",">"])),c,d)}),tt.DEFAULT)},l=0;l<n;l++)u();return s}function Rt(e,t,n,r,o,i){if(e.size&&r){var a=0;rt(t,Tt,(function(){return a++}),tt.DEFAULT);var s=i-a+o,u=new Map;return e.forEach((function(e,t){var o,i=(r-a*n)/n,l=a*n,c=t>s+a?t+r:t,d=[],f=kt(e);try{for(f.s();!(o=f.n()).done;){var p=o.value;if(p<=s)d.push(p);else if(p>s+a+i)d.push(p+r);else if(p<=s+a)for(var h=0;h<=n;h++)d.push(p+a*h);else for(var m=0;m<=n;m++)d.push(p+l+i*m)}}catch(e){f.e(e)}finally{f.f()}u.set(c,d)})),u}return e}var Lt,Ht,Vt,zt,$t,Ut,Gt,Wt,qt,Kt,Zt,Jt,Xt,Yt,Qt,en,tn,nn,rn,on,an,sn,un,ln,cn,dn,fn,pn,hn,mn,vn,gn,yn,bn,Dn,wn,Cn,kn,En,xn,An,Fn,Sn,Mn,Bn,On,Tn,Pn,Nn,_n,jn=["lazyCompile"];function In(){In=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,r,o){var i=RegExp(e,r);return t.set(i,o||t.get(e)),Un(i,n.prototype)}function r(e,n){var r=t.get(n);return Object.keys(r).reduce((function(t,n){var o=r[n];if("number"==typeof o)t[n]=e[o];else{for(var i=0;void 0===e[o[i]]&&i+1<o.length;)i++;t[n]=e[o[i]]}return t}),Object.create(null))}return Vn(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);if(n){n.groups=r(n,this);var o=n.indices;o&&(o.groups=r(o,this))}return n},n.prototype[Symbol.replace]=function(n,o){if("string"==typeof o){var i=t.get(this);return e[Symbol.replace].call(this,n,o.replace(/\$<([^>]+)>/g,(function(e,t){var n=i[t];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof o){var a=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=Qn(e[e.length-1])&&(e=[].slice.call(e)).push(r(e,a)),o.apply(this,e)}))}return e[Symbol.replace].call(this,n,o)},In.apply(this,arguments)}function Rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ur(r.key),r)}}function Ln(e,t,n){return t=qn(t),function(e,t){if(t&&("object"==Qn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Hn(e)}(e,$n()?Reflect.construct(t,n||[],qn(e).constructor):t.apply(e,n))}function Hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Un(e,t)}function zn(e){var t="function"==typeof Map?new Map:void 0;return zn=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if($n())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&Un(o,n.prototype),o}(e,arguments,qn(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Un(n,e)},zn(e)}function $n(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($n=function(){return!!e})()}function Un(e,t){return Un=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Un(e,t)}function Gn(e,t){Zn(e,t),t.add(e)}function Wn(){return Wn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=qn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Wn.apply(null,arguments)}function qn(e){return qn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qn(e)}function Kn(e,t,n){Zn(e,t),t.set(e,n)}function Zn(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Jn(e,t,n){return e.set(Yn(e,t),n),n}function Xn(e,t){return e.get(Yn(e,t))}function Yn(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function Qn(e){return Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qn(e)}function er(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||rr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=rr(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function nr(e){return function(e){if(Array.isArray(e))return or(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rr(e,t){if(e){if("string"==typeof e)return or(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?or(e,t):void 0}}function or(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(n),!0).forEach((function(t){sr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sr(e,t,n){return(t=ur(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ur(e){var t=function(e){if("object"!=Qn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Qn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Qn(t)?t:t+""}function lr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var cr=String.fromCodePoint,dr=String.raw,fr={flagGroups:function(){try{new RegExp("(?i:)")}catch(e){return!1}return!0}(),unicodeSets:function(){try{new RegExp("","v")}catch(e){return!1}return!0}()};function pr(e,t){var n=t.enable,r=t.disable;return{dotAll:!(null!=r&&r.dotAll||!(null!=n&&n.dotAll||e.dotAll)),ignoreCase:!(null!=r&&r.ignoreCase||!(null!=n&&n.ignoreCase||e.ignoreCase))}}function hr(e,t,n){return e.has(t)||e.set(t,n),e.get(t)}function mr(e,t){return vr[e]>=vr[t]}fr.bugFlagVLiteralHyphenIsRange=!!fr.unicodeSets&&function(){try{new RegExp(dr(Lt||(Lt=lr(["[d-a]"],["[\\d\\-a]"]))),"v")}catch(e){return!0}return!1}(),fr.bugNestedClassIgnoresNegation=fr.unicodeSets&&new RegExp("[[^a]]","v").test("a");var vr={ES2025:2025,ES2024:2024,ES2018:2018},gr={auto:"auto",ES2025:"ES2025",ES2024:"ES2024",ES2018:"ES2018"};function yr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("[object Object]"!=={}.toString.call(e))throw new Error("Unexpected options");if(void 0!==e.target&&!gr[e.target])throw new Error('Unexpected target "'.concat(e.target,'"'));var t=ar(ar({accuracy:"default",avoidSubclass:!1,flags:"",global:!1,hasIndices:!1,lazyCompileLength:1/0,target:"auto",verbose:!1},e),{},{rules:ar({allowOrphanBackrefs:!1,asciiWordBoundaries:!1,captureGroup:!1,recursionLimit:20,singleline:!1},e.rules)});return"auto"===t.target&&(t.target=fr.flagGroups?"ES2025":fr.unicodeSets?"ES2024":"ES2018"),t}var br=new Set([cr(304),cr(305)]),Dr=dr(Ht||(Ht=lr(["[p{L}p{M}p{N}p{Pc}]"],["[\\p{L}\\p{M}\\p{N}\\p{Pc}]"])));function wr(e){if(br.has(e))return[e];var t=new Set,n=e.toLowerCase(),r=n.toUpperCase(),o=xr.get(n),i=kr.get(n),a=Er.get(n);return 1===nr(r).length&&t.add(r),a&&t.add(a),o&&t.add(o),t.add(n),i&&t.add(i),nr(t)}var Cr=new Map("C Other\nCc Control cntrl\nCf Format\nCn Unassigned\nCo Private_Use\nCs Surrogate\nL Letter\nLC Cased_Letter\nLl Lowercase_Letter\nLm Modifier_Letter\nLo Other_Letter\nLt Titlecase_Letter\nLu Uppercase_Letter\nM Mark Combining_Mark\nMc Spacing_Mark\nMe Enclosing_Mark\nMn Nonspacing_Mark\nN Number\nNd Decimal_Number digit\nNl Letter_Number\nNo Other_Number\nP Punctuation punct\nPc Connector_Punctuation\nPd Dash_Punctuation\nPe Close_Punctuation\nPf Final_Punctuation\nPi Initial_Punctuation\nPo Other_Punctuation\nPs Open_Punctuation\nS Symbol\nSc Currency_Symbol\nSk Modifier_Symbol\nSm Math_Symbol\nSo Other_Symbol\nZ Separator\nZl Line_Separator\nZp Paragraph_Separator\nZs Space_Separator\nASCII\nASCII_Hex_Digit AHex\nAlphabetic Alpha\nAny\nAssigned\nBidi_Control Bidi_C\nBidi_Mirrored Bidi_M\nCase_Ignorable CI\nCased\nChanges_When_Casefolded CWCF\nChanges_When_Casemapped CWCM\nChanges_When_Lowercased CWL\nChanges_When_NFKC_Casefolded CWKCF\nChanges_When_Titlecased CWT\nChanges_When_Uppercased CWU\nDash\nDefault_Ignorable_Code_Point DI\nDeprecated Dep\nDiacritic Dia\nEmoji\nEmoji_Component EComp\nEmoji_Modifier EMod\nEmoji_Modifier_Base EBase\nEmoji_Presentation EPres\nExtended_Pictographic ExtPict\nExtender Ext\nGrapheme_Base Gr_Base\nGrapheme_Extend Gr_Ext\nHex_Digit Hex\nIDS_Binary_Operator IDSB\nIDS_Trinary_Operator IDST\nID_Continue IDC\nID_Start IDS\nIdeographic Ideo\nJoin_Control Join_C\nLogical_Order_Exception LOE\nLowercase Lower\nMath\nNoncharacter_Code_Point NChar\nPattern_Syntax Pat_Syn\nPattern_White_Space Pat_WS\nQuotation_Mark QMark\nRadical\nRegional_Indicator RI\nSentence_Terminal STerm\nSoft_Dotted SD\nTerminal_Punctuation Term\nUnified_Ideograph UIdeo\nUppercase Upper\nVariation_Selector VS\nWhite_Space space\nXID_Continue XIDC\nXID_Start XIDS".split(/\s/).map((function(e){return[Re(e),e]}))),kr=new Map([["s",cr(383)],[cr(383),"s"]]),Er=new Map([[cr(223),cr(7838)],[cr(107),cr(8490)],[cr(229),cr(8491)],[cr(969),cr(8486)]]),xr=new Map([Fr(453),Fr(456),Fr(459),Fr(498)].concat(nr(Sr(8072,8079)),nr(Sr(8088,8095)),nr(Sr(8104,8111)),[Fr(8124),Fr(8140),Fr(8188)])),Ar=new Map([["alnum",dr(Vt||(Vt=lr(["[p{Alpha}p{Nd}]"],["[\\p{Alpha}\\p{Nd}]"])))],["alpha",dr(zt||(zt=lr(["p{Alpha}"],["\\p{Alpha}"])))],["ascii",dr($t||($t=lr(["p{ASCII}"],["\\p{ASCII}"])))],["blank",dr(Ut||(Ut=lr(["[p{Zs}\t]"],["[\\p{Zs}\\t]"])))],["cntrl",dr(Gt||(Gt=lr(["p{Cc}"],["\\p{Cc}"])))],["digit",dr(Wt||(Wt=lr(["p{Nd}"],["\\p{Nd}"])))],["graph",dr(qt||(qt=lr(["[P{space}&&P{Cc}&&P{Cn}&&P{Cs}]"],["[\\P{space}&&\\P{Cc}&&\\P{Cn}&&\\P{Cs}]"])))],["lower",dr(Kt||(Kt=lr(["p{Lower}"],["\\p{Lower}"])))],["print",dr(Zt||(Zt=lr(["[[P{space}&&P{Cc}&&P{Cn}&&P{Cs}]p{Zs}]"],["[[\\P{space}&&\\P{Cc}&&\\P{Cn}&&\\P{Cs}]\\p{Zs}]"])))],["punct",dr(Jt||(Jt=lr(["[p{P}p{S}]"],["[\\p{P}\\p{S}]"])))],["space",dr(Xt||(Xt=lr(["p{space}"],["\\p{space}"])))],["upper",dr(Yt||(Yt=lr(["p{Upper}"],["\\p{Upper}"])))],["word",dr(Qt||(Qt=lr(["[p{Alpha}p{M}p{Nd}p{Pc}]"],["[\\p{Alpha}\\p{M}\\p{Nd}\\p{Pc}]"])))],["xdigit",dr(en||(en=lr(["p{AHex}"],["\\p{AHex}"])))]]);function Fr(e){var t=cr(e);return[t.toLowerCase(),t]}function Sr(e,t){return function(e,t){for(var n=[],r=e;r<=t;r++)n.push(r);return n}(e,t).map((function(e){return Fr(e)}))}var Mr=new Set(["Lower","Lowercase","Upper","Uppercase","Ll","Lowercase_Letter","Lt","Titlecase_Letter","Lu","Uppercase_Letter"]),Br={AbsenceFunction:function(e){var t=e.node,n=e.parent,r=e.replaceWith,o=t.body;if("repeater"!==t.kind)throw new Error('Unsupported absence function "(?~|"');var i=Me();i.body[0].body.push(Be({negate:!0,body:o}),Pe("Any"));var a=Me();a.body[0].body.push(Oe("greedy",0,1/0,i)),r(Gr(a,n),{traverse:!0})},Alternative:{enter:function(e,t){for(var n=e.node,r=e.parent,o=e.key,i=t.flagDirectivesByAlt,a=n.body.filter((function(e){return"flags"===e.kind})),s=o+1;s<r.body.length;s++){var u;(u=hr(i,r.body[s],[])).push.apply(u,nr(a))}},exit:function(e,t){var n,r=e.node,o=t.flagDirectivesByAlt;if(null!==(n=o.get(r))&&void 0!==n&&n.length){var i=Ir(o.get(r));if(i){var a=Me({flags:i});a.body[0].body=r.body,r.body=[Gr(a,r)]}}}},Assertion:function(e,t){var n=e.node,r=e.parent,o=e.key,i=e.container,a=e.root,s=e.remove,u=e.replaceWith,l=n.kind,c=n.negate,d=t.asciiWordBoundaries,f=t.avoidSubclass,p=t.supportedGNodes,h=t.wordIsAscii;if("text_segment_boundary"===l)throw new Error('Unsupported text segment boundary "\\'.concat(c?"Y":"y",'"'));if("line_end"===l)u(Gr(Be({body:[Ce({body:[ke("string_end")]}),Ce({body:[Ae(10)]})]}),r));else if("line_start"===l)u(Gr(zr(dr(tn||(tn=lr(["(?<=A|\n(?!z))"],["(?<=\\A|\\n(?!\\z))"]))),{skipLookbehindValidation:!0}),r));else if("search_start"===l)if(p.has(n))a.flags.sticky=!0,s();else{var m=i[o-1];if(m&&function(e){var t=["Character","CharacterClass","CharacterSet"];return t.includes(e.type)||"Quantifier"===e.type&&e.min&&t.includes(e.body.type)}(m))u(Gr(Be({negate:!0}),r));else{if(f)throw new Error(dr(nn||(nn=lr(['Uses "G" in a way that requires a subclass'],['Uses "\\G" in a way that requires a subclass']))));u(Ur(ke("string_start"),r)),t.strategy="clip_search"}}else if("string_end"===l||"string_start"===l);else if("string_end_newline"===l)u(Gr(zr(dr(rn||(rn=lr(["(?=\n?z)"],["(?=\\n?\\z)"])))),r));else{if("word_boundary"!==l)throw new Error('Unexpected assertion kind "'.concat(l,'"'));if(!h&&!d){var v="(?:(?<=".concat(Dr,")(?!").concat(Dr,")|(?<!").concat(Dr,")(?=").concat(Dr,"))"),g="(?:(?<=".concat(Dr,")(?=").concat(Dr,")|(?<!").concat(Dr,")(?!").concat(Dr,"))");u(Gr(zr(c?g:v),r))}}},Backreference:function(e,t){var n=e.node,r=t.jsGroupNameMap,o=n.ref;"string"!=typeof o||Vr(o)||(o=jr(o,r),n.ref=o)},CapturingGroup:function(e,t){var n=e.node,r=t.jsGroupNameMap,o=t.subroutineRefMap,i=n.name;i&&!Vr(i)&&(i=jr(i,r),n.name=i),o.set(n.number,n),i&&o.set(i,n)},CharacterClassRange:function(e){var t=e.node,n=e.parent,r=e.replaceWith;"intersection"===n.kind&&r(Gr(Fe({body:[t]}),n),{traverse:!0})},CharacterSet:function(e,t){var n=e.node,r=e.parent,o=e.replaceWith,i=t.accuracy,a=t.minTargetEs2024,s=t.digitIsAscii,u=t.spaceIsAscii,l=t.wordIsAscii,c=n.kind,d=n.negate,f=n.value;if(!s||"digit"!==c&&"digit"!==f)if(!u||"space"!==c&&"space"!==f)if(!l||"word"!==c&&"word"!==f)if("any"===c)o(Ur(Pe("Any"),r));else if("digit"===c)o(Ur(Pe("Nd",{negate:d}),r));else if("dot"===c);else if("text_segment"===c){if("strict"===i)throw new Error(dr(on||(on=lr(['Use of "X" requires non-strict accuracy'],['Use of "\\X" requires non-strict accuracy']))));var p="\\p{Emoji}(?:\\p{EMod}|\\uFE0F\\u20E3?|[\\x{E0020}-\\x{E007E}]+\\x{E007F})?",h=dr(an||(an=lr(["p{RI}{2}|","(?:‍",")*"],["\\p{RI}{2}|","(?:\\u200D",")*"])),p,p);o(Gr(zr(dr(sn||(sn=lr(["(?>\r\n|","|P{M}p{M}*)"],["(?>\\r\\n|","|\\P{M}\\p{M}*)"])),a?dr(un||(un=lr(["p{RGI_Emoji}"],["\\p{RGI_Emoji}"]))):h),{skipPropertyNameValidation:!0}),r))}else if("hex"===c)o(Ur(Pe("AHex",{negate:d}),r));else if("newline"===c)o(Gr(zr(d?"[^\n]":"(?>\r\n?|[\n\v\f\u2028\u2029])"),r));else if("posix"===c)if(a||"graph"!==f&&"print"!==f)o(Gr($r(zr(Ar.get(f)),d),r));else{if("strict"===i)throw new Error('POSIX class "'.concat(f,'" requires min target ES2024 or non-strict accuracy'));var m={graph:"!-~",print:" -~"}[f];d&&(m="\0-".concat(cr(m.codePointAt(0)-1)).concat(cr(m.codePointAt(2)+1),"-􏿿")),o(Gr(zr("[".concat(m,"]")),r))}else if("property"===c)Cr.has(Re(f))||(n.key="sc");else if("space"===c)o(Ur(Pe("space",{negate:d}),r));else{if("word"!==c)throw new Error('Unexpected character set kind "'.concat(c,'"'));o(Gr($r(zr(Dr),d),r))}else o(Ur(Se("word",{negate:d}),r));else o(Gr($r(zr("[\t-\r ]"),d),r));else o(Ur(Se("digit",{negate:d}),r))},Directive:function(e){var t=e.node,n=e.parent,r=e.root,o=e.remove,i=e.replaceWith,a=e.removeAllPrevSiblings,s=e.removeAllNextSiblings,u=t.kind,l=t.flags;if("flags"===u)if(l.enable||l.disable){var c=Me({flags:l});c.body[0].body=s(),i(Gr(c,n),{traverse:!0})}else o();else{if("keep"!==u)throw new Error('Unexpected directive kind "'.concat(u,'"'));var d=r.body[0],f=1===r.body.length&&ie(d,{type:"Group"})&&1===d.body[0].body.length?d.body[0]:r;if(n.parent!==f||f.body.length>1)throw new Error(dr(ln||(ln=lr(['Uses "K" in a way that\'s unsupported'],['Uses "\\K" in a way that\'s unsupported']))));var p=Be({behind:!0});p.body[0].body=a(),i(Gr(p,n))}},Flags:function(e){var t,n=e.node,r=e.parent;if(n.posixIsAscii)throw new Error('Unsupported flag "P"');if("word"===n.textSegmentMode)throw new Error('Unsupported flag "y{w}"');["digitIsAscii","extended","posixIsAscii","spaceIsAscii","wordIsAscii","textSegmentMode"].forEach((function(e){return delete n[e]})),Object.assign(n,{global:!1,hasIndices:!1,multiline:!1,sticky:null!==(t=n.sticky)&&void 0!==t&&t}),r.options={disable:{x:!0,n:!0},force:{v:!0}}},Group:function(e){var t=e.node;if(t.flags){var n=t.flags,r=n.enable,o=n.disable;(null==r?void 0:r.extended)&&delete r.extended,(null==o?void 0:o.extended)&&delete o.extended,(null==r?void 0:r.dotAll)&&(null==o?void 0:o.dotAll)&&delete r.dotAll,(null==r?void 0:r.ignoreCase)&&(null==o?void 0:o.ignoreCase)&&delete r.ignoreCase,r&&!Object.keys(r).length&&delete t.flags.enable,o&&!Object.keys(o).length&&delete t.flags.disable,!t.flags.enable&&!t.flags.disable&&delete t.flags}},LookaroundAssertion:function(e,t){"lookbehind"===e.node.kind&&(t.passedLookbehind=!0)},NamedCallout:function(e){var t=e.node,n=e.parent,r=e.replaceWith,o=t.kind;if("fail"!==o)throw new Error('Unsupported named callout "(*'.concat(o.toUpperCase(),'"'));r(Gr(Be({negate:!0}),n))},Quantifier:function(e){var t=e.node;if("Quantifier"===t.body.type){var n=Me();n.body[0].body.push(t.body),t.body=Gr(n,t)}},Regex:{enter:function(e,t){var n,r=e.node,o=t.supportedGNodes,i=[],a=!1,s=!1,u=tr(r.body);try{for(u.s();!(n=u.n()).done;){var l=n.value;if(1===l.body.length&&"search_start"===l.body[0].kind)l.body.pop();else{var c=Lr(l.body);c?(a=!0,Array.isArray(c)?i.push.apply(i,nr(c)):i.push(c)):s=!0}}}catch(e){u.e(e)}finally{u.f()}a&&!s&&i.forEach((function(e){return o.add(e)}))},exit:function(e,t){var n=t.accuracy,r=t.passedLookbehind,o=t.strategy;if("strict"===n&&r&&o)throw new Error(dr(cn||(cn=lr(['Uses "G" in a way that requires non-strict accuracy'],['Uses "\\G" in a way that requires non-strict accuracy']))))}},Subroutine:function(e,t){var n=e.node,r=t.jsGroupNameMap,o=n.ref;"string"!=typeof o||Vr(o)||(o=jr(o,r),n.ref=o)}},Or={Backreference:function(e,t){var n=e.node,r=t.multiplexCapturesToLeftByRef,o=t.reffedNodesByReferencer,i=n.orphan,a=n.ref;i||o.set(n,nr(r.get(a).map((function(e){return e.node}))))},CapturingGroup:{enter:function(e,t){var n,r=e.node,o=e.parent,i=e.replaceWith,a=(e.skip,t.groupOriginByCopy),s=t.groupsByName,u=t.multiplexCapturesToLeftByRef,l=t.openRefs,c=t.reffedNodesByReferencer,d=a.get(r);if(d&&l.has(r.number)){var f=Ur(_r(r.number),o);return c.set(f,l.get(r.number)),void i(f)}l.set(r.number,r),u.set(r.number,[]),r.name&&hr(u,r.name,[]);for(var p=u.get(null!==(n=r.name)&&void 0!==n?n:r.number),h=0;h<p.length;h++){var m=p[h];if(d===m.node||d&&d===m.origin||r===m.origin){p.splice(h,1);break}}if(u.get(r.number).push({node:r,origin:d}),r.name&&u.get(r.name).push({node:r,origin:d}),r.name){var v=hr(s,r.name,new Map),g=!1;if(d)g=!0;else{var y,b=tr(v.values());try{for(b.s();!(y=b.n()).done;)if(!y.value.hasDuplicateNameToRemove){g=!0;break}}catch(e){b.e(e)}finally{b.f()}}s.get(r.name).set(r,{node:r,hasDuplicateNameToRemove:g})}},exit:function(e,t){var n=e.node;t.openRefs.delete(n.number)}},Group:{enter:function(e,t){var n=e.node;t.prevFlags=t.currentFlags,n.flags&&(t.currentFlags=pr(t.currentFlags,n.flags))},exit:function(e,t){t.currentFlags=t.prevFlags}},Subroutine:function(e,t){var n,r,o,i,a=e.node,s=e.parent,u=e.replaceWith,l=a.isRecursive,c=a.ref;if(l){for(var d=s;(d=d.parent)&&("CapturingGroup"!==d.type||d.name!==c&&d.number!==c););t.reffedNodesByReferencer.set(a,d)}else{var f=t.subroutineRefMap.get(c),p=0===c,h=p?_r(0):Nr(f,t.groupOriginByCopy,null),m=h;if(!p){var v=Ir(function(e,t){for(var n=[];e=e.parent;)t&&!t(e)||n.push(e);return n}(f,(function(e){return"Group"===e.type&&!!e.flags}))),g=v?pr(t.globalFlags,v):t.globalFlags;(function(e,t){return e.dotAll===t.dotAll&&e.ignoreCase===t.ignoreCase})(g,t.currentFlags)||(m=Me({flags:(n=g,r=n.dotAll,o=n.ignoreCase,i={},(r||o)&&(i.enable={},r&&(i.enable.dotAll=!0),o&&(i.enable.ignoreCase=!0)),r&&o||(i.disable={},!r&&(i.disable.dotAll=!0),!o&&(i.disable.ignoreCase=!0)),i)})).body[0].body.push(h)}u(Gr(m,s),{traverse:!p})}}},Tr={Backreference:function(e,t){var n=e.node,r=e.parent,o=e.replaceWith;if(n.orphan)t.highestOrphanBackref=Math.max(t.highestOrphanBackref,n.ref);else{var i=t.reffedNodesByReferencer.get(n).filter((function(e){return function(e,t){var n=t;do{if("Regex"===n.type)return!1;if("Alternative"!==n.type){if(n===e)return!1;var r,o=tr(Rr(n.parent));try{for(o.s();!(r=o.n()).done;){var i=r.value;if(i===n)break;if(i===e||Hr(i,e))return!0}}catch(e){o.e(e)}finally{o.f()}}}while(n=n.parent);throw new Error("Unexpected path")}(e,n)}));i.length?i.length>1?o(Gr(Me({atomic:!0,body:i.reverse().map((function(e){return Ce({body:[Ee(e.number)]})}))}),r)):n.ref=i[0].number:o(Gr(Be({negate:!0}),r))}},CapturingGroup:function(e,t){var n=e.node;n.number=++t.numCapturesToLeft,n.name&&t.groupsByName.get(n.name).get(n).hasDuplicateNameToRemove&&delete n.name},Regex:{exit:function(e,t){for(var n=e.node,r=Math.max(t.highestOrphanBackref-t.numCapturesToLeft,0),o=0;o<r;o++){var i=xe();n.body.at(-1).body.push(i)}}},Subroutine:function(e,t){var n=e.node;n.isRecursive&&0!==n.ref&&(n.ref=t.reffedNodesByReferencer.get(n).number)}};function Pr(e){ze(e,{"*":function(e){var t=e.node,n=e.parent;t.parent=n}})}function Nr(e,t,n,r){for(var o=Array.isArray(e)?[]:{},i=0,a=Object.entries(e);i<a.length;i++){var s=er(a[i],2),u=s[0],l=s[1];if("parent"===u)o.parent=Array.isArray(n)?r:n;else if(l&&"object"===Qn(l))o[u]=Nr(l,t,o,n);else{var c;"type"===u&&"CapturingGroup"===l&&t.set(o,null!==(c=t.get(e))&&void 0!==c?c:e),o[u]=l}}return o}function _r(e){var t=Te(e);return t.isRecursive=!0,t}function jr(e,t){if(t.has(e))return t.get(e);var n="$".concat(t.size,"_").concat(e.replace(/^(?:[\0-#%-@\[-\^`\{-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u036F\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482-\u0489\u0530\u0557\u0558\u055A-\u055F\u0589-\u05CF\u05EB-\u05EE\u05F3-\u061F\u064B-\u066D\u0670\u06D4\u06D6-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u06FD\u06FE\u0700-\u070F\u0711\u0730-\u074C\u07A6-\u07B0\u07B2-\u07C9\u07EB-\u07F3\u07F6-\u07F9\u07FB-\u07FF\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u083F\u0859-\u085F\u086B-\u086F\u0888\u088F-\u089F\u08CA-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962-\u0970\u0981-\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA-\u09BC\u09BE-\u09CD\u09CF-\u09DB\u09DE\u09E2-\u09EF\u09F2-\u09FB\u09FD-\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A-\u0A58\u0A5D\u0A5F-\u0A71\u0A75-\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA-\u0ABC\u0ABE-\u0ACF\u0AD1-\u0ADF\u0AE2-\u0AF8\u0AFA-\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A-\u0B3C\u0B3E-\u0B5B\u0B5E\u0B62-\u0B70\u0B72-\u0B82\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BCF\u0BD1-\u0C04\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C3E-\u0C57\u0C5B\u0C5C\u0C5E\u0C5F\u0C62-\u0C7F\u0C81-\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA-\u0CBC\u0CBE-\u0CDC\u0CDF\u0CE2-\u0CF0\u0CF3-\u0D03\u0D0D\u0D11\u0D3B\u0D3C\u0D3E-\u0D4D\u0D4F-\u0D53\u0D57-\u0D5E\u0D62-\u0D79\u0D80-\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0E00\u0E31\u0E34-\u0E3F\u0E47-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EB1\u0EB4-\u0EBC\u0EBE\u0EBF\u0EC5\u0EC7-\u0EDB\u0EE0-\u0EFF\u0F01-\u0F3F\u0F48\u0F6D-\u0F87\u0F8D-\u0FFF\u102B-\u103E\u1040-\u104F\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u1712-\u171E\u1732-\u173F\u1752-\u175F\u176D\u1771-\u177F\u17B4-\u17D6\u17D8-\u17DB\u17DD-\u181F\u1879-\u187F\u18A9\u18AB-\u18AF\u18F6-\u18FF\u191F-\u194F\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19FF\u1A17-\u1A1F\u1A55-\u1AA6\u1AA8-\u1B04\u1B34-\u1B44\u1B4D-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BFF\u1C24-\u1C4C\u1C50-\u1C59\u1C7E\u1C7F\u1C8B-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1CFB-\u1CFF\u1DC0-\u1DFF\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116\u2117\u211E-\u2123\u2125\u2127\u2129\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u215F\u2189-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7F\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF-\u3004\u3008-\u3020\u302A-\u3030\u3036\u3037\u303D-\u3040\u3097-\u309A\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u319F\u31C0-\u31EF\u3200-\u33FF\u4DC0-\u4DFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA620-\uA629\uA62C-\uA63F\uA66F-\uA67E\uA69E\uA69F\uA6F0-\uA716\uA720\uA721\uA789\uA78A\uA7CE\uA7CF\uA7D2\uA7D4\uA7DD-\uA7F1\uA802\uA806\uA80B\uA823-\uA83F\uA874-\uA881\uA8B4-\uA8F1\uA8F8-\uA8FA\uA8FC\uA8FF-\uA909\uA926-\uA92F\uA947-\uA95F\uA97D-\uA983\uA9B3-\uA9CE\uA9D0-\uA9DF\uA9E5\uA9F0-\uA9F9\uA9FF\uAA29-\uAA3F\uAA43\uAA4C-\uAA5F\uAA77-\uAA79\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAC3-\uAADA\uAADE\uAADF\uAAEB-\uAAF1\uAAF5-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABE3-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB1E\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFE6F\uFE75\uFEFD-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD3F\uDD75-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEFF\uDF20-\uDF2C\uDF4B-\uDF4F\uDF76-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDD6F\uDD7B\uDD8B\uDD93\uDD96\uDDA2\uDDB2\uDDBA\uDDBD-\uDDBF\uDDF4-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDF7F\uDF86\uDFB1\uDFBB-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE01-\uDE0F\uDE14\uDE18\uDE36-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE5-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCFF\uDD24-\uDD49\uDD66-\uDD6E\uDD86-\uDE7F\uDEAA-\uDEAF\uDEB2-\uDEC1\uDEC5-\uDEFF\uDF1D-\uDF26\uDF28-\uDF2F\uDF46-\uDF6F\uDF82-\uDFAF\uDFC5-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC00-\uDC02\uDC38-\uDC70\uDC73\uDC74\uDC76-\uDC82\uDCB0-\uDCCF\uDCE9-\uDD02\uDD27-\uDD43\uDD45\uDD46\uDD48-\uDD4F\uDD73-\uDD75\uDD77-\uDD82\uDDB3-\uDDC0\uDDC5-\uDDD9\uDDDB\uDDDD-\uDDFF\uDE12\uDE2C-\uDE3E\uDE41-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEDF-\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A-\uDF3C\uDF3E-\uDF4F\uDF51-\uDF5C\uDF62-\uDF7F\uDF8A\uDF8C\uDF8D\uDF8F\uDFB6\uDFB8-\uDFD0\uDFD2\uDFD4-\uDFFF]|\uD805[\uDC35-\uDC46\uDC4B-\uDC5E\uDC62-\uDC7F\uDCB0-\uDCC3\uDCC6\uDCC8-\uDD7F\uDDAF-\uDDD7\uDDDC-\uDDFF\uDE30-\uDE43\uDE45-\uDE7F\uDEAB-\uDEB7\uDEB9-\uDEFF\uDF1B-\uDF3F\uDF47-\uDFFF]|\uD806[\uDC2C-\uDC9F\uDCE0-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD30-\uDD3E\uDD40\uDD42-\uDD9F\uDDA8\uDDA9\uDDD1-\uDDE0\uDDE2\uDDE4-\uDDFF\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE4F\uDE51-\uDE5B\uDE8A-\uDE9C\uDE9E-\uDEAF\uDEF9-\uDFBF\uDFE1-\uDFFF]|\uD807[\uDC09\uDC2F-\uDC3F\uDC41-\uDC71\uDC90-\uDCFF\uDD07\uDD0A\uDD31-\uDD45\uDD47-\uDD5F\uDD66\uDD69\uDD8A-\uDD97\uDD99-\uDEDF\uDEF3-\uDF01\uDF03\uDF11\uDF34-\uDFAF\uDFB1-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD812-\uD817\uD819\uD824-\uD82A\uD82D\uD82E\uD830-\uD834\uD836\uD83C-\uD83F\uD87C\uD87D\uD87F\uD889-\uDBFF][\uDC00-\uDFFF]|\uD80B[\uDC00-\uDF8F\uDFF1-\uDFFF]|\uD80D[\uDC30-\uDC40\uDC47-\uDC5F]|\uD810[\uDFFB-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD818[\uDC00-\uDCFF\uDD1E-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F-\uDE6F\uDEBF-\uDECF\uDEEE-\uDEFF\uDF30-\uDF3F\uDF44-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDD3F\uDD6D-\uDE3F\uDE80-\uDEFF\uDF4B-\uDF4F\uDF51-\uDF92\uDFA0-\uDFDF\uDFE2\uDFE4-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFE\uDD09-\uDFFF]|\uD82B[\uDC00-\uDFEF\uDFF4\uDFFC\uDFFF]|\uD82C[\uDD23-\uDD31\uDD33-\uDD4F\uDD53\uDD54\uDD56-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC-\uDFFF]|\uD837[\uDC00-\uDEFF\uDF1F-\uDF24\uDF2B-\uDFFF]|\uD838[\uDC00-\uDC2F\uDC6E-\uDCFF\uDD2D-\uDD36\uDD3E-\uDD4D\uDD4F-\uDE8F\uDEAE-\uDEBF\uDEEC-\uDFFF]|\uD839[\uDC00-\uDCCF\uDCEC-\uDDCF\uDDEE\uDDEF\uDDF1-\uDFDF\uDFE7\uDFEC\uDFEF\uDFFF]|\uD83A[\uDCC5-\uDCFF\uDD44-\uDD4A\uDD4C-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD869[\uDEE0-\uDEFF]|\uD86D[\uDF3A-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFEF]|\uD87B[\uDE5E-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDF4F]|\uD888[\uDFB0-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])|(?:[\0-#%-\/:-@\[-\^`\{-\xA9\xAB-\xB4\xB6\xB8\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0378\u0379\u037E\u0380-\u0385\u038B\u038D\u03A2\u03F6\u0482\u0488\u0489\u0530\u0557\u0558\u055A-\u055F\u0589-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05EB-\u05EE\u05F3-\u060F\u061B-\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070F\u074B\u074C\u07B2-\u07BF\u07F6-\u07F9\u07FB\u07FC\u07FE\u07FF\u082E-\u083F\u085C-\u085F\u086B-\u086F\u0888\u088F-\u0896\u08E2\u0964\u0965\u0970\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09F2-\u09FB\u09FD\u09FF\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF0-\u0AF8\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B54\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B70\u0B72-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BF0-\u0BFF\u0C0D\u0C11\u0C29\u0C3A\u0C3B\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5B\u0C5C\u0C5E\u0C5F\u0C64\u0C65\u0C70-\u0C7F\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDC\u0CDF\u0CE4\u0CE5\u0CF0\u0CF4-\u0CFF\u0D0D\u0D11\u0D45\u0D49\u0D4F-\u0D53\u0D58-\u0D5E\u0D64\u0D65\u0D70-\u0D79\u0D80\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DE5\u0DF0\u0DF1\u0DF4-\u0E00\u0E3B-\u0E3F\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EBE\u0EBF\u0EC5\u0EC7\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F17\u0F1A-\u0F1F\u0F2A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F48\u0F6D-\u0F70\u0F85\u0F98\u0FBD-\u0FC5\u0FC7-\u0FFF\u104A-\u104F\u109E\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u1360-\u1368\u1372-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u1716-\u171E\u1735-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17D4-\u17D6\u17D8-\u17DB\u17DE\u17DF\u17EA-\u180A\u180E\u181A-\u181F\u1879-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191F\u192C-\u192F\u193C-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19FF\u1A1C-\u1A1F\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1AAF\u1ABE\u1ACF-\u1AFF\u1B4D-\u1B4F\u1B5A-\u1B6A\u1B74-\u1B7F\u1BF4-\u1BFF\u1C38-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C8B-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CCF\u1CD3\u1CFB-\u1CFF\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u200B\u200E-\u203E\u2041-\u2053\u2055-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u20CF\u20DD-\u20E0\u20E2-\u20E4\u20F1-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116\u2117\u211E-\u2123\u2125\u2127\u2129\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u215F\u2189-\u2BFF\u2CE5-\u2CEA\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E00-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u3040\u3097\u3098\u30A0\u3100-\u3104\u3130\u318F-\u319F\u31C0-\u31EF\u3200-\u33FF\u4DC0-\u4DFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA670-\uA673\uA67E\uA6F2-\uA716\uA720\uA721\uA789\uA78A\uA7CE\uA7CF\uA7D2\uA7D4\uA7DD-\uA7F1\uA828-\uA82B\uA82D-\uA83F\uA874-\uA87F\uA8C6-\uA8CF\uA8DA-\uA8DF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA954-\uA95F\uA97D-\uA97F\uA9C1-\uA9CE\uA9DA-\uA9DF\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAAC3-\uAADA\uAADE\uAADF\uAAF0\uAAF1\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABEB\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFDFF\uFE10-\uFE1F\uFE30-\uFE32\uFE35-\uFE4C\uFE50-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF3E\uFF40\uFF5B-\uFF64\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD3F\uDD75-\uDDFC\uDDFE-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEDF\uDEE1-\uDEFF\uDF20-\uDF2C\uDF4B-\uDF4F\uDF7B-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDD6F\uDD7B\uDD8B\uDD93\uDD96\uDDA2\uDDB2\uDDBA\uDDBD-\uDDBF\uDDF4-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDF7F\uDF86\uDFB1\uDFBB-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE04\uDE07-\uDE0B\uDE14\uDE18\uDE36\uDE37\uDE3B-\uDE3E\uDE40-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE7-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCFF\uDD28-\uDD2F\uDD3A-\uDD3F\uDD66-\uDD68\uDD6E\uDD86-\uDE7F\uDEAA\uDEAD-\uDEAF\uDEB2-\uDEC1\uDEC5-\uDEFB\uDF1D-\uDF26\uDF28-\uDF2F\uDF51-\uDF6F\uDF86-\uDFAF\uDFC5-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC47-\uDC65\uDC76-\uDC7E\uDCBB-\uDCC1\uDCC3-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDCFF\uDD35\uDD40-\uDD43\uDD48-\uDD4F\uDD74\uDD75\uDD77-\uDD7F\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDFF\uDE12\uDE38-\uDE3D\uDE42-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEEB-\uDEEF\uDEFA-\uDEFF\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A\uDF45\uDF46\uDF49\uDF4A\uDF4E\uDF4F\uDF51-\uDF56\uDF58-\uDF5C\uDF64\uDF65\uDF6D-\uDF6F\uDF75-\uDF7F\uDF8A\uDF8C\uDF8D\uDF8F\uDFB6\uDFC1\uDFC3\uDFC4\uDFC6\uDFCB\uDFD4-\uDFE0\uDFE3-\uDFFF]|\uD805[\uDC4B-\uDC4F\uDC5A-\uDC5D\uDC62-\uDC7F\uDCC6\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDB6\uDDB7\uDDC1-\uDDD7\uDDDE-\uDDFF\uDE41-\uDE43\uDE45-\uDE4F\uDE5A-\uDE7F\uDEB9-\uDEBF\uDECA-\uDECF\uDEE4-\uDEFF\uDF1B\uDF1C\uDF2C-\uDF2F\uDF3A-\uDF3F\uDF47-\uDFFF]|\uD806[\uDC3B-\uDC9F\uDCEA-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD36\uDD39\uDD3A\uDD44-\uDD4F\uDD5A-\uDD9F\uDDA8\uDDA9\uDDD8\uDDD9\uDDE2\uDDE5-\uDDFF\uDE3F-\uDE46\uDE48-\uDE4F\uDE9A-\uDE9C\uDE9E-\uDEAF\uDEF9-\uDFBF\uDFE1-\uDFEF\uDFFA-\uDFFF]|\uD807[\uDC09\uDC37\uDC41-\uDC4F\uDC5A-\uDC71\uDC90\uDC91\uDCA8\uDCB7-\uDCFF\uDD07\uDD0A\uDD37-\uDD39\uDD3B\uDD3E\uDD48-\uDD4F\uDD5A-\uDD5F\uDD66\uDD69\uDD8F\uDD92\uDD99-\uDD9F\uDDAA-\uDEDF\uDEF7-\uDEFF\uDF11\uDF3B-\uDF3D\uDF43-\uDF4F\uDF5B-\uDFAF\uDFB1-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD812-\uD817\uD819\uD824-\uD82A\uD82D\uD82E\uD830-\uD832\uD83C\uD83D\uD83F\uD87C\uD87D\uD87F\uD889-\uDB3F\uDB41-\uDBFF][\uDC00-\uDFFF]|\uD80B[\uDC00-\uDF8F\uDFF1-\uDFFF]|\uD80D[\uDC30-\uDC3F\uDC56-\uDC5F]|\uD810[\uDFFB-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD818[\uDC00-\uDCFF\uDD3A-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDE6F\uDEBF\uDECA-\uDECF\uDEEE\uDEEF\uDEF5-\uDEFF\uDF37-\uDF3F\uDF44-\uDF4F\uDF5A-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDD3F\uDD6D-\uDD6F\uDD7A-\uDE3F\uDE80-\uDEFF\uDF4B-\uDF4E\uDF88-\uDF8E\uDFA0-\uDFDF\uDFE2\uDFE5-\uDFEF\uDFF2-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFE\uDD09-\uDFFF]|\uD82B[\uDC00-\uDFEF\uDFF4\uDFFC\uDFFF]|\uD82C[\uDD23-\uDD31\uDD33-\uDD4F\uDD53\uDD54\uDD56-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDC9C\uDC9F-\uDFFF]|\uD833[\uDC00-\uDCEF\uDCFA-\uDEFF\uDF2E\uDF2F\uDF47-\uDFFF]|\uD834[\uDC00-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDE41\uDE45-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC\uDFCD]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE9A\uDEA0\uDEB0-\uDFFF]|\uD837[\uDC00-\uDEFF\uDF1F-\uDF24\uDF2B-\uDFFF]|\uD838[\uDC07\uDC19\uDC1A\uDC22\uDC25\uDC2B-\uDC2F\uDC6E-\uDC8E\uDC90-\uDCFF\uDD2D-\uDD2F\uDD3E\uDD3F\uDD4A-\uDD4D\uDD4F-\uDE8F\uDEAF-\uDEBF\uDEFA-\uDFFF]|\uD839[\uDC00-\uDCCF\uDCFA-\uDDCF\uDDFB-\uDFDF\uDFE7\uDFEC\uDFEF\uDFFF]|\uD83A[\uDCC5-\uDCCF\uDCD7-\uDCFF\uDD4C-\uDD4F\uDD5A-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD83E[\uDC00-\uDFEF\uDFFA-\uDFFF]|\uD869[\uDEE0-\uDEFF]|\uD86D[\uDF3A-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFEF]|\uD87B[\uDE5E-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDF4F]|\uD888[\uDFB0-\uDFFF]|\uDB40[\uDC00-\uDCFF\uDDF0-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,"_"));return t.set(e,n),n}function Ir(e){var t=["dotAll","ignoreCase"],n={enable:{},disable:{}};return e.forEach((function(e){var r=e.flags;t.forEach((function(e){var t,o;null!==(t=r.enable)&&void 0!==t&&t[e]&&(delete n.disable[e],n.enable[e]=!0),null!==(o=r.disable)&&void 0!==o&&o[e]&&(n.disable[e]=!0)}))})),Object.keys(n.enable).length||delete n.enable,Object.keys(n.disable).length||delete n.disable,n.enable||n.disable?n:null}function Rr(e){if(!e)throw new Error("Node expected");var t=e.body;return Array.isArray(t)?t:t?[t]:null}function Lr(e){var t=e.find((function(e){return"search_start"===e.kind||(t=e,n=ar({negate:null},{negate:!1}),"LookaroundAssertion"===t.type&&(null===n.negate||t.negate===n.negate)&&1===t.body.length&&ie(t.body[0],{type:"Assertion",kind:"search_start"}))||!("Assertion"===(r=e.type)||"Directive"===r||"LookaroundAssertion"===r);var t,n,r}));if(!t)return null;if("search_start"===t.kind)return t;if("LookaroundAssertion"===t.type)return t.body[0].body[0];if("CapturingGroup"===t.type||"Group"===t.type){var n,r=[],o=tr(t.body);try{for(o.s();!(n=o.n()).done;){var i=Lr(n.value.body);if(!i)return null;Array.isArray(i)?r.push.apply(r,nr(i)):r.push(i)}}catch(e){o.e(e)}finally{o.f()}return r}return null}function Hr(e,t){var n,r,o=tr(null!==(n=Rr(e))&&void 0!==n?n:[]);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(i===t||Hr(i,t))return!0}}catch(e){o.e(e)}finally{o.f()}return!1}function Vr(e){return/^(?:[\$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[\$0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u0870-\u0887\u0889-\u088E\u0897-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1715\u171F-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B4C\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA827\uA82C\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF65-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDD40-\uDD65\uDD69-\uDD6D\uDD6F-\uDD85\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDEC2-\uDEC4\uDEFC-\uDF1C\uDF27\uDF30-\uDF50\uDF70-\uDF85\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC75\uDC7F-\uDCBA\uDCC2\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD47\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDCE-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E-\uDE41\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7-\uDFC0\uDFC2\uDFC5\uDFC7-\uDFCA\uDFCC-\uDFD3\uDFE1\uDFE2]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E-\uDC61\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDED0-\uDEE3\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39\uDF40-\uDF46]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B-\uDD43\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0\uDFF0-\uDFF9]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6\uDF00-\uDF10\uDF12-\uDF3A\uDF3E-\uDF42\uDF50-\uDF5A\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC40-\uDC55\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD39]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDD70-\uDD79\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFE4\uDFF0\uDFF1]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD833[\uDCF0-\uDCF9\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC30-\uDC6D\uDC8F\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAE\uDEC0-\uDEF9]|\uD839[\uDCD0-\uDCF9\uDDD0-\uDDFA\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]|\uDB40[\uDD00-\uDDEF])*$/.test(e)}function zr(e,t){var n=we(e,ar(ar({},t),{},{unicodePropertyMap:Cr})).body;return n.length>1||n[0].body.length>1?Me({body:n}):n[0].body[0]}function $r(e,t){return e.negate=t,e}function Ur(e,t){return e.parent=t,e}function Gr(e,t){return Pr(e),e.parent=t,e}var Wr={"*":{enter:function(e,t){var n=e.node;if(no(n)){var r=t.getCurrentModI();t.pushModI(n.flags?pr({ignoreCase:r},n.flags).ignoreCase:r)}},exit:function(e,t){no(e.node)&&t.popModI()}},Backreference:function(e,t){t.setHasCasedChar()},Character:function(e,t){var n=e.node;Qr(cr(n.value))&&t.setHasCasedChar()},CharacterClassRange:function(e,t){var n=e.node;(0,e.skip)(),eo(n,{firstOnly:!0}).length&&t.setHasCasedChar()},CharacterSet:function(e,t){var n=e.node;"property"===n.kind&&Mr.has(n.value)&&t.setHasCasedChar()}},qr={Alternative:function(e,t,n){return e.body.map(n).join("")},Assertion:function(e){var t=e.kind,n=e.negate;if("string_end"===t)return"$";if("string_start"===t)return"^";if("word_boundary"===t)return dr(n?dn||(dn=lr(["B"],["\\B"])):fn||(fn=lr(["\b"],["\\b"])));throw new Error('Unexpected assertion kind "'.concat(t,'"'))},Backreference:function(e,t){var n=e.ref;if("number"!=typeof n)throw new Error("Unexpected named backref in transformed AST");if(!t.useFlagMods&&"strict"===t.accuracy&&t.currentFlags.ignoreCase&&!t.captureMap.get(n).ignoreCase)throw new Error("Use of case-insensitive backref to case-sensitive group requires target ES2025 or non-strict accuracy");return"\\"+n},CapturingGroup:function(e,t,n){var r=e.body,o=e.name,i=e.number,a={ignoreCase:t.currentFlags.ignoreCase},s=t.originMap.get(e);return s&&(a.hidden=!0,i>s.number&&(a.transferTo=s.number)),t.captureMap.set(i,a),"(".concat(o?"?<".concat(o,">"):"").concat(r.map(n).join("|"),")")},Character:function(e,t){var n=e.value,r=cr(n),o=to(n,{escDigit:"Backreference"===t.lastNode.type,inCharClass:t.inCharClass,useFlagV:t.useFlagV});if(o!==r)return o;if(t.useAppliedIgnoreCase&&t.currentFlags.ignoreCase&&Qr(r)){var i=wr(r);return t.inCharClass?i.join(""):i.length>1?"[".concat(i.join(""),"]"):i[0]}return r},CharacterClass:function(e,t,n){var r=e.kind,o=e.negate,i=e.parent,a=e.body;if("intersection"===r&&!t.useFlagV)throw new Error("Use of class intersection requires min target ES2024");fr.bugFlagVLiteralHyphenIsRange&&t.useFlagV&&a.some(ro)&&(a=[Ae(45)].concat(nr(a.filter((function(e){return!ro(e)})))));var s=function(){return"[".concat(o?"^":"").concat(a.map(n).join("intersection"===r?"&&":""),"]")};if(!t.inCharClass){if((!t.useFlagV||fr.bugNestedClassIgnoresNegation)&&!o){var u=a.filter((function(e){return"CharacterClass"===e.type&&"union"===e.kind&&e.negate}));if(u.length){var l=Me(),c=l.body[0];return l.parent=i,c.parent=l,a=a.filter((function(e){return!u.includes(e)})),e.body=a,a.length?(e.parent=c,c.body.push(e)):l.body.pop(),u.forEach((function(e){var t=Ce({body:[e]});e.parent=t,t.parent=l,l.body.push(t)})),n(l)}}t.inCharClass=!0;var d=s();return t.inCharClass=!1,d}var f=a[0];if("union"===r&&!o&&f&&((!t.useFlagV||!t.verbose)&&"union"===i.kind&&(!fr.bugFlagVLiteralHyphenIsRange||!t.useFlagV)||!t.verbose&&"intersection"===i.kind&&1===a.length&&"CharacterClassRange"!==f.type))return a.map(n).join("");if(!t.useFlagV&&"CharacterClass"===i.type)throw new Error("Use of nested character class requires min target ES2024");return s()},CharacterClassRange:function(e,t){var n=e.min.value,r=e.max.value,o={escDigit:!1,inCharClass:!0,useFlagV:t.useFlagV},i=to(n,o),a=to(r,o),s=new Set;if(t.useAppliedIgnoreCase&&t.currentFlags.ignoreCase){var u=function(e){for(var t=e.map((function(e){return e.codePointAt(0)})).sort((function(e,t){return e-t})),n=[],r=null,o=0;o<t.length;o++){var i;t[o+1]===t[o]+1?null!==(i=r)&&void 0!==i||(r=t[o]):null===r?n.push(t[o]):(n.push([r,t[o]]),r=null)}return n}(eo(e));u.forEach((function(e){s.add(Array.isArray(e)?"".concat(to(e[0],o),"-").concat(to(e[1],o)):to(e,o))}))}return"".concat(i,"-").concat(a).concat(nr(s).join(""))},CharacterSet:function(e,t){var n=e.kind,r=e.negate,o=e.value,i=e.key;if("dot"===n)return t.currentFlags.dotAll?t.appliedGlobalFlags.dotAll||t.useFlagMods?".":"[^]":dr(pn||(pn=lr(["[^\n]"],["[^\\n]"])));if("digit"===n)return dr(r?hn||(hn=lr(["D"],["\\D"])):mn||(mn=lr(["d"],["\\d"])));if("property"===n){if(t.useAppliedIgnoreCase&&t.currentFlags.ignoreCase&&Mr.has(o))throw new Error('Unicode property "'.concat(o,"\" can't be case-insensitive when other chars have specific case"));return"".concat(dr(r?vn||(vn=lr(["P"],["\\P"])):gn||(gn=lr(["p"],["\\p"]))),"{").concat(i?"".concat(i,"="):"").concat(o,"}")}if("word"===n)return dr(r?yn||(yn=lr(["W"],["\\W"])):bn||(bn=lr(["w"],["\\w"])));throw new Error('Unexpected character set kind "'.concat(n,'"'))},Flags:function(e,t){return(t.appliedGlobalFlags.ignoreCase?"i":"")+(e.dotAll?"s":"")+(e.sticky?"y":"")},Group:function(e,t,n){var r=e.atomic,o=e.body,i=e.flags,a=e.parent,s=t.currentFlags;i&&(t.currentFlags=pr(s,i));var u=o.map(n).join("|"),l=t.verbose||1!==o.length||"Quantifier"===a.type||r||t.useFlagMods&&i?"(?".concat(function(e,t,n){if(e)return">";var r="";if(t&&n){var o=t.enable,i=t.disable;r=(null!=o&&o.ignoreCase?"i":"")+(null!=o&&o.dotAll?"s":"")+(i?"-":"")+(null!=i&&i.ignoreCase?"i":"")+(null!=i&&i.dotAll?"s":"")}return"".concat(r,":")}(r,i,t.useFlagMods)).concat(u,")"):u;return t.currentFlags=s,l},LookaroundAssertion:function(e,t,n){var r=e.body,o=e.kind,i=e.negate,a="".concat("lookahead"===o?"":"<").concat(i?"!":"=");return"(?".concat(a).concat(r.map(n).join("|"),")")},Quantifier:function(e,t,n){return n(e.body)+(o=(r=e).kind,i=r.max,((a=r.min)||1!==i?a||i!==1/0?1===a&&i===1/0?"+":a===i?"{".concat(a,"}"):"{".concat(a,",").concat(i===1/0?"":i,"}"):"*":"?")+{greedy:"",lazy:"?",possessive:"+"}[o]);var r,o,i,a},Subroutine:function(e,t){var n=e.isRecursive,r=e.ref;if(!n)throw new Error("Unexpected non-recursive subroutine in transformed AST");var o=t.recursionLimit;return 0===r?"(?R=".concat(o,")"):dr(Dn||(Dn=lr(["g<","&R=",">"],["\\g<","&R=",">"])),r,o)}},Kr=new Set(["$","(",")","*","+",".","?","[","\\","]","^","{","|","}"]),Zr=new Set(["-","\\","]","^","["]),Jr=new Set(["(",")","-","/","[","\\","]","^","{","|","}","!","#","$","%","&","*","+",",",".",":",";","<","=",">","?","@","`","~"]),Xr=new Map([[9,dr(wn||(wn=lr(["\t"],["\\t"])))],[10,dr(Cn||(Cn=lr(["\n"],["\\n"])))],[11,dr(kn||(kn=lr(["\v"],["\\v"])))],[12,dr(En||(En=lr(["\f"],["\\f"])))],[13,dr(xn||(xn=lr(["\r"],["\\r"])))],[8232,dr(An||(An=lr(["\u2028"],["\\u2028"])))],[8233,dr(Fn||(Fn=lr(["\u2029"],["\\u2029"])))],[65279,dr(Sn||(Sn=lr(["\ufeff"],["\\uFEFF"])))]]),Yr=/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u01BA\u01BC-\u01BF\u01C4-\u0293\u0295-\u02B8\u02C0\u02C1\u02E0-\u02E4\u0345\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0560-\u0588\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u10FF\u13A0-\u13F5\u13F8-\u13FD\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2134\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u217F\u2183\u2184\u24B6-\u24E9\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA640-\uA66D\uA680-\uA69D\uA722-\uA787\uA78B-\uA78E\uA790-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA7F6\uA7F8-\uA7FA\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A]|\uD801[\uDC00-\uDC4F\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDF80\uDF83-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD803[\uDC80-\uDCB2\uDCC0-\uDCF2\uDD50-\uDD65\uDD70-\uDD85]|\uD806[\uDCA0-\uDCDF]|\uD81B[\uDE40-\uDE7F]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF09\uDF0B-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D]|\uD83A[\uDD00-\uDD43]|\uD83C[\uDD30-\uDD49\uDD50-\uDD69\uDD70-\uDD89])$/;function Qr(e){return Yr.test(e)}function eo(e,t){var n=!(null==t||!t.firstOnly),r=e.min.value,o=e.max.value,i=[];if(r<65&&(65535===o||o>=131071)||65536===r&&o>=131071)return i;for(var a=r;a<=o;a++){var s=cr(a);if(Qr(s)){var u=wr(s).filter((function(e){var t=e.codePointAt(0);return t<r||t>o}));if(u.length&&(i.push.apply(i,nr(u)),n))break}}return i}function to(e,t){var n,r=t.escDigit,o=t.inCharClass,i=t.useFlagV;if(Xr.has(e))return Xr.get(e);if(e<32||e>126&&e<160||e>262143||r&&(n=e)>47&&n<58)return e>255?"\\u{".concat(e.toString(16).toUpperCase(),"}"):"\\x".concat(e.toString(16).toUpperCase().padStart(2,"0"));var a=o?i?Jr:Zr:Kr,s=cr(e);return(a.has(s)?"\\":"")+s}function no(e){var t=e.type;return"CapturingGroup"===t||"Group"===t||"LookaroundAssertion"===t}function ro(e){var t=e.type,n=e.value;return"Character"===t&&45===n}var oo=(Bn=new WeakMap,On=new WeakMap,Tn=new WeakMap,Pn=new WeakMap,Nn=new WeakMap,_n=new WeakSet,Mn=function(e){function t(e,n,r){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=!(null==r||!r.lazyCompile);if(e instanceof RegExp){if(r)throw new Error("Cannot provide options when copying a regexp");var a=e;Gn(Hn(o=Ln(this,t,[a,n])),_n),Kn(Hn(o),Bn,new Map),Kn(Hn(o),On,null),Kn(Hn(o),Tn,void 0),Kn(Hn(o),Pn,null),Kn(Hn(o),Nn,null),sr(Hn(o),"rawOptions",{}),Jn(Tn,Hn(o),a.source),a instanceof t&&(Jn(Bn,Hn(o),Xn(Bn,a)),Jn(Pn,Hn(o),Xn(Pn,a)),Jn(Nn,Hn(o),Xn(Nn,a)),o.rawOptions=a.rawOptions)}else{var s=ar({hiddenCaptures:[],strategy:null,transfers:[]},r);Gn(Hn(o=Ln(this,t,[i?"":e,n])),_n),Kn(Hn(o),Bn,new Map),Kn(Hn(o),On,null),Kn(Hn(o),Tn,void 0),Kn(Hn(o),Pn,null),Kn(Hn(o),Nn,null),sr(Hn(o),"rawOptions",{}),Jn(Tn,Hn(o),e),Jn(Bn,Hn(o),function(e,t){var n,r=new Map,o=tr(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;r.set(i,{hidden:!0})}}catch(e){o.e(e)}finally{o.f()}var a,s=tr(t);try{for(s.s();!(a=s.n()).done;){var u,l=er(a.value,2),c=l[0],d=tr(l[1]);try{for(d.s();!(u=d.n()).done;)hr(r,u.value,{}).transferTo=c}catch(e){d.e(e)}finally{d.f()}}}catch(e){s.e(e)}finally{s.f()}return r}(s.hiddenCaptures,s.transfers)),Jn(Nn,Hn(o),s.strategy),o.rawOptions=null!=r?r:{}}return i||Jn(On,Hn(o),o),Hn(o)}return Vn(t,e),function(e,t){return t&&Rn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"source",get:function(){return Xn(Tn,this)||"(?:)"}},{key:"exec",value:function(e){if(!Xn(On,this)){var n=this.rawOptions,r=(n.lazyCompile,function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,jn));Jn(On,this,new t(Xn(Tn,this),this.flags,r))}var o=this.global||this.sticky,i=this.lastIndex;if("clip_search"===Xn(Nn,this)&&o&&i){this.lastIndex=0;var a=Yn(_n,this,io).call(this,e.slice(i));return a&&(function(e,t,n,r){if(e.index+=t,e.input=n,r){for(var o=e.indices,i=0;i<o.length;i++){var a=o[i];a&&(o[i]=[a[0]+t,a[1]+t])}var s=o.groups;s&&Object.keys(s).forEach((function(e){var n=s[e];n&&(s[e]=[n[0]+t,n[1]+t])}))}}(a,i,e,this.hasIndices),this.lastIndex+=i),a}return Yn(_n,this,io).call(this,e)}}])}(zn(RegExp)));function io(e){Xn(On,this).lastIndex=this.lastIndex;var t=function(e,t,n){var r=Wn(qn(e),"exec",n);return r}(Mn.prototype,0,this).call(Xn(On,this),e);if(this.lastIndex=Xn(On,this).lastIndex,!t||!Xn(Bn,this).size)return t;var n,r=nr(t);t.length=1,this.hasIndices&&(n=nr(t.indices),t.indices.length=1);for(var o=[0],i=1;i<r.length;i++){var a,s=null!==(a=Xn(Bn,this).get(i))&&void 0!==a?a:{},u=s.hidden,l=s.transferTo;if(u?o.push(null):(o.push(t.length),t.push(r[i]),this.hasIndices&&t.indices.push(n[i])),l&&void 0!==r[i]){var c=o[l];if(!c)throw new Error('Invalid capture transfer to "'.concat(c,'"'));if(t[c]=r[i],this.hasIndices&&(t.indices[c]=n[i]),t.groups){Xn(Pn,this)||Jn(Pn,this,ao(this.source));var d=Xn(Pn,this).get(l);d&&(t.groups[d]=r[i],this.hasIndices&&(t.indices.groups[d]=n[i]))}}}return t}function ao(e){for(var t,n=In(/(\((?:\?<(?![!=])((?:[\0-=\?-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)>|(?!\?)))|\\?(?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,{capture:1,name:2}),r=new Map,o=0,i=0;t=n.exec(e);){var a=t,s=a[0],u=a.groups,l=u.capture,c=u.name;"["===s?o++:o?"]"===s&&o--:l&&(i++,c&&r.set(i,c))}return r}function so(e,t){var n=function(e,t){var n=yr(t),r=function(e,t){var n=ar({accuracy:"default",asciiWordBoundaries:!1,avoidSubclass:!1,bestEffortTarget:"ES2025"},t);Pr(e);var r={accuracy:n.accuracy,asciiWordBoundaries:n.asciiWordBoundaries,avoidSubclass:n.avoidSubclass,flagDirectivesByAlt:new Map,jsGroupNameMap:new Map,minTargetEs2024:mr(n.bestEffortTarget,"ES2024"),passedLookbehind:!1,strategy:null,subroutineRefMap:new Map,supportedGNodes:new Set,digitIsAscii:e.flags.digitIsAscii,spaceIsAscii:e.flags.spaceIsAscii,wordIsAscii:e.flags.wordIsAscii};ze(e,Br,r);var o={dotAll:e.flags.dotAll,ignoreCase:e.flags.ignoreCase},i={currentFlags:o,prevFlags:null,globalFlags:o,groupOriginByCopy:new Map,groupsByName:new Map,multiplexCapturesToLeftByRef:new Map,openRefs:new Map,reffedNodesByReferencer:new Map,subroutineRefMap:r.subroutineRefMap};return ze(e,Or,i),ze(e,Tr,{groupsByName:i.groupsByName,highestOrphanBackref:0,numCapturesToLeft:0,reffedNodesByReferencer:i.reffedNodesByReferencer}),e._originMap=i.groupOriginByCopy,e._strategy=r.strategy,e}(we(e,{flags:n.flags,normalizeUnknownPropertyNames:!0,rules:{captureGroup:n.rules.captureGroup,singleline:n.rules.singleline},skipBackrefValidation:n.rules.allowOrphanBackrefs,unicodePropertyMap:Cr}),{accuracy:n.accuracy,asciiWordBoundaries:n.rules.asciiWordBoundaries,avoidSubclass:n.avoidSubclass,bestEffortTarget:n.target}),o=function(e,t){var n=yr(t),r=mr(n.target,"ES2024"),o=mr(n.target,"ES2025"),i=n.rules.recursionLimit;if(!Number.isInteger(i)||i<2||i>20)throw new Error("Invalid recursionLimit; use 2-20");var a=null,s=null;if(!o){var u=[e.flags.ignoreCase];ze(e,Wr,{getCurrentModI:function(){return u.at(-1)},popModI:function(){u.pop()},pushModI:function(e){u.push(e)},setHasCasedChar:function(){u.at(-1)?a=!0:s=!0}})}var l={dotAll:e.flags.dotAll,ignoreCase:!(!e.flags.ignoreCase&&!a||s)},c=e,d={accuracy:n.accuracy,appliedGlobalFlags:l,captureMap:new Map,currentFlags:{dotAll:e.flags.dotAll,ignoreCase:e.flags.ignoreCase},inCharClass:!1,lastNode:c,originMap:e._originMap,recursionLimit:i,useAppliedIgnoreCase:!(o||!a||!s),useFlagMods:o,useFlagV:r,verbose:n.verbose};function f(e){return d.lastNode=c,c=e,function(e,t){if(null==e)throw new Error(null!=t?t:"Value expected");return e}(qr[e.type],'Unexpected node type "'.concat(e.type,'"'))(e,d,f)}var p={pattern:e.body.map(f).join("|"),flags:f(e.flags),options:ar({},e.options)};return r||(delete p.options.force.v,p.options.disable.v=!0,p.options.unicodeSetsPlugin=null),p._captureTransfers=new Map,p._hiddenCaptures=[],d.captureMap.forEach((function(e,t){e.hidden&&p._hiddenCaptures.push(t),e.transferTo&&hr(p._captureTransfers,e.transferTo,[]).push(t)})),p}(r,n),i=function(e,t){var n,r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(n),!0).forEach((function(t){At(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({hiddenCaptures:[],mode:"plugin"},t),o=r.hiddenCaptures,i=r.mode,a=null!==(n=null==t?void 0:t.captureTransfers)&&void 0!==n?n:new Map;if(!new RegExp(Bt,"su").test(e))return{pattern:e,captureTransfers:a,hiddenCaptures:o};if("plugin"===i&&ot(e,St(ft||(ft=Ft(["(?(DEFINE)"],["\\(\\?\\(DEFINE\\)"]))),tt.DEFAULT))throw new Error("DEFINE groups cannot be used with recursion");var s,u=[],l=ot(e,St(pt||(pt=Ft(["\\[1-9]"],["\\\\[1-9]"]))),tt.DEFAULT),c=new Map,d=[],f=!1,p=0,h=0;for(Pt.lastIndex=0;s=Pt.exec(e);){var m=s,v=m[0],g=m.groups,y=g.captureName,b=g.rDepth,D=g.gRNameOrNum,w=g.gRDepth;if("["===v)p++;else if(p)"]"===v&&p--;else{if(b){if(_t(b),f)throw new Error(Nt);if(l)throw new Error("".concat("external"===i?"Backrefs":"Numbered backrefs"," cannot be used with global recursion"));var C=e.slice(0,s.index),k=e.slice(Pt.lastIndex);if(ot(k,Bt,tt.DEFAULT))throw new Error(Nt);var E=+b-1;e=jt(C,k,E,!1,o,u,h),a=Rt(a,C,E,u.length,0,h);break}if(D){_t(w);var x,A=!1,F=kt(d);try{for(F.s();!(x=F.n()).done;){var S=x.value;if(S.name===D||S.num===+D){if(A=!0,S.hasRecursedWithin)throw new Error(Nt);break}}}catch(e){F.e(e)}finally{F.f()}if(!A)throw new Error(St(ht||(ht=Ft(['Recursive g cannot be used outside the referenced group "','"'],['Recursive \\g cannot be used outside the referenced group "','"'])),"external"===i?D:St(mt||(mt=Ft(["g<","&R=",">"],["\\g<","&R=",">"])),D,w)));var M=c.get(D),B=it(e,M);if(l&&ot(B,St(vt||(vt=Ft(["","|((?!?)"],["","|\\((?!\\?)"])),Ot),tt.DEFAULT))throw new Error("".concat("external"===i?"Backrefs":"Numbered backrefs"," cannot be used with recursion of capturing groups"));var O=e.slice(M,s.index),T=B.slice(O.length+v.length),P=u.length,N=+w-1,_=jt(O,T,N,!0,o,u,h);a=Rt(a,O,N,u.length-P,P,h);var j=e.slice(0,M),I=e.slice(M+B.length);e="".concat(j).concat(_).concat(I),Pt.lastIndex+=_.length-v.length-O.length-T.length,d.forEach((function(e){return e.hasRecursedWithin=!0})),f=!0}else if(y)h++,c.set(String(h),Pt.lastIndex),c.set(y,Pt.lastIndex),d.push({num:h,name:y});else if("("===v[0]){var R="("===v;R&&(h++,c.set(String(h),Pt.lastIndex)),d.push(R?{num:h}:{})}else")"===v&&d.pop()}}return o.push.apply(o,u),{pattern:e,captureTransfers:a,hiddenCaptures:o}}(o.pattern,{captureTransfers:o._captureTransfers,hiddenCaptures:o._hiddenCaptures,mode:"external"}),a=function(e,t){var n,r,o=null!==(n=null==t?void 0:t.hiddenCaptures)&&void 0!==n?n:[],i=null!==(r=null==t?void 0:t.captureTransfers)&&void 0!==r?r:new Map;if(!/\(\?>/.test(e))return{pattern:e,captureTransfers:i,hiddenCaptures:o};var a,s=[0],u=[],l=0,c=0,d=NaN;do{a=!1;var f=0,p=0,h=!1,m=void 0;bt.lastIndex=Number.isNaN(d)?0:d+7;for(var v=function(){var t=m,n=t[0],r=t.index,v=t.groups,g=v.capturingStart,y=v.noncapturingStart;if("["===n)f++;else if(f)"]"===n&&f--;else if("(?>"!==n||h){if(h&&y)p++;else if(g)h?p++:(l++,s.push(l+c));else if(")"===n&&h){if(!p){c++;var b=l+c;if(e="".concat(e.slice(0,d)).concat("(?:(?=(").concat(e.slice(d+3,r),"))<$$").concat(b,">)").concat(e.slice(r+1)),a=!0,u.push(b),qe(o,b),i.size){var D=new Map;i.forEach((function(e,t){D.set(t>=b?t+1:t,e.map((function(e){return e>=b?e+1:e})))})),i=D}return 1}p--}}else d=r,h=!0};(m=bt.exec(e))&&!v(););}while(a);return o.push.apply(o,u),e=nt(e,String.raw(Ye||(Ye=at(["\\(?<backrefNum>[1-9]d*)|<$$(?<wrappedBackrefNum>d+)>"],["\\\\(?<backrefNum>[1-9]\\d*)|<\\$\\$(?<wrappedBackrefNum>\\d+)>"]))),(function(e){var t=e[0],n=e.groups,r=n.backrefNum,o=n.wrappedBackrefNum;if(r){var i=+r;if(i>s.length-1)throw new Error('Backref "'.concat(t,'" greater than number of captures'));return"\\".concat(s[i])}return"\\".concat(o)}),tt.DEFAULT),{pattern:e,captureTransfers:i,hiddenCaptures:o}}(function(e){if(!new RegExp("".concat(Dt,"\\+")).test(e))return{pattern:e};var t,n,r,o,i=[],a=null,s=null,u="",l=0;for(wt.lastIndex=0;t=wt.exec(e);){var c=t,d=c[0],f=c.index,p=c.groups,h=p.qBase,m=p.qMod,v=p.invalidQ;if("["===d)l||(s=f),l++;else if("]"===d)l?l--:s=null;else if(!l)if("+"===m&&u&&!u.startsWith("(")){if(v)throw new Error('Invalid quantifier "'.concat(d,'"'));var g=-1;if(/^\{\d+\}$/.test(h))n=e,r=f+h.length,o=m,e=n.slice(0,r)+""+n.slice(r+o.length);else{if(")"===u||"]"===u){var y=")"===u?a:s;if(null===y)throw new Error('Invalid unmatched "'.concat(u,'"'));e="".concat(e.slice(0,y),"(?>").concat(e.slice(y,f)).concat(h,")").concat(e.slice(f+d.length))}else e="".concat(e.slice(0,f-u.length),"(?>").concat(u).concat(h,")").concat(e.slice(f+d.length));g+=4}wt.lastIndex+=g}else"("===d[0]?i.push(f):")"===d&&(a=i.length?i.pop():null);u=d}return{pattern:e}}(i.pattern).pattern,{captureTransfers:i.captureTransfers,hiddenCaptures:i.hiddenCaptures}),s={pattern:a.pattern,flags:"".concat(n.hasIndices?"d":"").concat(n.global?"g":"").concat(o.flags).concat(o.options.disable.v?"u":"v")};if(n.avoidSubclass){if(n.lazyCompileLength!==1/0)throw new Error("Lazy compilation requires subclass")}else{var u=a.hiddenCaptures.sort((function(e,t){return e-t})),l=Array.from(a.captureTransfers),c=r._strategy,d=s.pattern.length>=n.lazyCompileLength;(u.length||l.length||c||d)&&(s.options=ar(ar(ar(ar({},u.length&&{hiddenCaptures:u}),l.length&&{transfers:l}),c&&{strategy:c}),d&&{lazyCompile:d}))}return s}(e,t);return n.options?new oo(n.pattern,n.flags,n.options):new RegExp(n.pattern,n.flags)}},2093:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var t=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}n.d(t,{qy:()=>E,JW:()=>x});var s=i((function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.normal=n,this.property=t,r&&(this.space=r)}));function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n,r={},o={},i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;Object.assign(r,a.property),Object.assign(o,a.normal)}}catch(e){i.e(e)}finally{i.f()}return new s(r,o,t)}s.prototype.normal={},s.prototype.property={},s.prototype.space=void 0;var c=n(9377),d=n(587);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function h(e){for(var t={},n={},r=0,o=Object.entries(e.properties);r<o.length;r++){var i=f(o[r],2),a=i[0],u=i[1],l=new d.E(a,e.transform(e.attributes||{},a),u,e.space);e.mustUseProperty&&e.mustUseProperty.includes(a)&&(l.mustUseProperty=!0),t[a]=l,n[(0,c.S)(a)]=a,n[(0,c.S)(l.attribute)]=a}return new s(t,n,e.space)}var m=n(6746),v=h({properties:{ariaActiveDescendant:null,ariaAtomic:m.booleanish,ariaAutoComplete:null,ariaBusy:m.booleanish,ariaChecked:m.booleanish,ariaColCount:m.number,ariaColIndex:m.number,ariaColSpan:m.number,ariaControls:m.spaceSeparated,ariaCurrent:null,ariaDescribedBy:m.spaceSeparated,ariaDetails:null,ariaDisabled:m.booleanish,ariaDropEffect:m.spaceSeparated,ariaErrorMessage:null,ariaExpanded:m.booleanish,ariaFlowTo:m.spaceSeparated,ariaGrabbed:m.booleanish,ariaHasPopup:null,ariaHidden:m.booleanish,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:m.spaceSeparated,ariaLevel:m.number,ariaLive:null,ariaModal:m.booleanish,ariaMultiLine:m.booleanish,ariaMultiSelectable:m.booleanish,ariaOrientation:null,ariaOwns:m.spaceSeparated,ariaPlaceholder:null,ariaPosInSet:m.number,ariaPressed:m.booleanish,ariaReadOnly:m.booleanish,ariaRelevant:null,ariaRequired:m.booleanish,ariaRoleDescription:m.spaceSeparated,ariaRowCount:m.number,ariaRowIndex:m.number,ariaRowSpan:m.number,ariaSelected:m.booleanish,ariaSetSize:m.number,ariaSort:null,ariaValueMax:m.number,ariaValueMin:m.number,ariaValueNow:m.number,ariaValueText:null,role:null},transform:function(e,t){return"role"===t?t:"aria-"+t.slice(4).toLowerCase()}});function g(e,t){return t in e?e[t]:t}function y(e,t){return g(e,t.toLowerCase())}var b=h({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:m.commaSeparated,acceptCharset:m.spaceSeparated,accessKey:m.spaceSeparated,action:null,allow:null,allowFullScreen:m.boolean,allowPaymentRequest:m.boolean,allowUserMedia:m.boolean,alt:null,as:null,async:m.boolean,autoCapitalize:null,autoComplete:m.spaceSeparated,autoFocus:m.boolean,autoPlay:m.boolean,blocking:m.spaceSeparated,capture:null,charSet:null,checked:m.boolean,cite:null,className:m.spaceSeparated,cols:m.number,colSpan:null,content:null,contentEditable:m.booleanish,controls:m.boolean,controlsList:m.spaceSeparated,coords:m.number|m.commaSeparated,crossOrigin:null,data:null,dateTime:null,decoding:null,default:m.boolean,defer:m.boolean,dir:null,dirName:null,disabled:m.boolean,download:m.overloadedBoolean,draggable:m.booleanish,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:m.boolean,formTarget:null,headers:m.spaceSeparated,height:m.number,hidden:m.overloadedBoolean,high:m.number,href:null,hrefLang:null,htmlFor:m.spaceSeparated,httpEquiv:m.spaceSeparated,id:null,imageSizes:null,imageSrcSet:null,inert:m.boolean,inputMode:null,integrity:null,is:null,isMap:m.boolean,itemId:null,itemProp:m.spaceSeparated,itemRef:m.spaceSeparated,itemScope:m.boolean,itemType:m.spaceSeparated,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:m.boolean,low:m.number,manifest:null,max:null,maxLength:m.number,media:null,method:null,min:null,minLength:m.number,multiple:m.boolean,muted:m.boolean,name:null,nonce:null,noModule:m.boolean,noValidate:m.boolean,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:m.boolean,optimum:m.number,pattern:null,ping:m.spaceSeparated,placeholder:null,playsInline:m.boolean,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:m.boolean,referrerPolicy:null,rel:m.spaceSeparated,required:m.boolean,reversed:m.boolean,rows:m.number,rowSpan:m.number,sandbox:m.spaceSeparated,scope:null,scoped:m.boolean,seamless:m.boolean,selected:m.boolean,shadowRootClonable:m.boolean,shadowRootDelegatesFocus:m.boolean,shadowRootMode:null,shape:null,size:m.number,sizes:null,slot:null,span:m.number,spellCheck:m.booleanish,src:null,srcDoc:null,srcLang:null,srcSet:null,start:m.number,step:null,style:null,tabIndex:m.number,target:null,title:null,translate:null,type:null,typeMustMatch:m.boolean,useMap:null,value:m.booleanish,width:m.number,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:m.spaceSeparated,axis:null,background:null,bgColor:null,border:m.number,borderColor:null,bottomMargin:m.number,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:m.boolean,declare:m.boolean,event:null,face:null,frame:null,frameBorder:null,hSpace:m.number,leftMargin:m.number,link:null,longDesc:null,lowSrc:null,marginHeight:m.number,marginWidth:m.number,noResize:m.boolean,noHref:m.boolean,noShade:m.boolean,noWrap:m.boolean,object:null,profile:null,prompt:null,rev:null,rightMargin:m.number,rules:null,scheme:null,scrolling:m.booleanish,standby:null,summary:null,text:null,topMargin:m.number,valueType:null,version:null,vAlign:null,vLink:null,vSpace:m.number,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:m.boolean,disableRemotePlayback:m.boolean,prefix:null,property:null,results:m.number,security:null,unselectable:null},space:"html",transform:y}),D=h({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:m.commaOrSpaceSeparated,accentHeight:m.number,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:m.number,amplitude:m.number,arabicForm:null,ascent:m.number,attributeName:null,attributeType:null,azimuth:m.number,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:m.number,by:null,calcMode:null,capHeight:m.number,className:m.spaceSeparated,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:m.number,diffuseConstant:m.number,direction:null,display:null,dur:null,divisor:m.number,dominantBaseline:null,download:m.boolean,dx:null,dy:null,edgeMode:null,editable:null,elevation:m.number,enableBackground:null,end:null,event:null,exponent:m.number,externalResourcesRequired:null,fill:null,fillOpacity:m.number,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:m.commaSeparated,g2:m.commaSeparated,glyphName:m.commaSeparated,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:m.number,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:m.number,horizOriginX:m.number,horizOriginY:m.number,id:null,ideographic:m.number,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:m.number,k:m.number,k1:m.number,k2:m.number,k3:m.number,k4:m.number,kernelMatrix:m.commaOrSpaceSeparated,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:m.number,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:m.number,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:m.number,overlineThickness:m.number,paintOrder:null,panose1:null,path:null,pathLength:m.number,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:m.spaceSeparated,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:m.number,pointsAtY:m.number,pointsAtZ:m.number,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:m.commaOrSpaceSeparated,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:m.commaOrSpaceSeparated,rev:m.commaOrSpaceSeparated,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:m.commaOrSpaceSeparated,requiredFeatures:m.commaOrSpaceSeparated,requiredFonts:m.commaOrSpaceSeparated,requiredFormats:m.commaOrSpaceSeparated,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:m.number,specularExponent:m.number,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:m.number,strikethroughThickness:m.number,string:null,stroke:null,strokeDashArray:m.commaOrSpaceSeparated,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:m.number,strokeOpacity:m.number,strokeWidth:null,style:null,surfaceScale:m.number,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:m.commaOrSpaceSeparated,tabIndex:m.number,tableValues:null,target:null,targetX:m.number,targetY:m.number,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:m.commaOrSpaceSeparated,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:m.number,underlineThickness:m.number,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:m.number,values:null,vAlphabetic:m.number,vMathematical:m.number,vectorEffect:null,vHanging:m.number,vIdeographic:m.number,version:null,vertAdvY:m.number,vertOriginX:m.number,vertOriginY:m.number,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:m.number,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:g}),w=h({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:function(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),C=h({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:y}),k=h({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:function(e,t){return"xml:"+t.slice(3).toLowerCase()}}),E=l([v,b,w,C,k],"html"),x=l([v,D,w,C,k],"svg")},7775:(e,t,n)=>{n.d(t,{I:()=>l});var r=n(587),o=n(9715),i=n(9377),a=/[A-Z]/g,s=/-[a-z]/g,u=/^data[-\w.:]+$/i;function l(e,t){var n=(0,i.S)(t),l=t,f=o.R;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&u.test(t)){if("-"===t.charAt(4)){var p=t.slice(5).replace(s,d);l="data"+p.charAt(0).toUpperCase()+p.slice(1)}else{var h=t.slice(4);if(!s.test(h)){var m=h.replace(a,c);"-"!==m.charAt(0)&&(m="-"+m),t="data"+m}}f=r.E}return new f(l,t)}function c(e){return"-"+e.toLowerCase()}function d(e){return e.charAt(1).toUpperCase()}},9377:(e,t,n)=>{function r(e){return e.toLowerCase()}n.d(t,{S:()=>r})},587:(e,t,n)=>{n.d(t,{E:()=>c});var r=n(9715),o=n(6746);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(a=function(){return!!e})()}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}var l=Object.keys(o),c=function(e){function t(e,n,r,u){var c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var f=-1;if(d(c=function(e,t,n){return t=s(t),function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,a()?Reflect.construct(t,n||[],s(e).constructor):t.apply(e,n))}(this,t,[e,n]),"space",u),"number"==typeof r)for(;++f<l.length;){var p=l[f];d(c,l[f],(r&o[p])===o[p])}return c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n;var n}(r.R);function d(e,t,n){n&&(e[t]=n)}c.prototype.defined=!0},9715:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var t=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}n.d(t,{R:()=>s});var s=i((function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.attribute=n,this.property=t}));s.prototype.attribute="",s.prototype.booleanish=!1,s.prototype.boolean=!1,s.prototype.commaOrSpaceSeparated=!1,s.prototype.commaSeparated=!1,s.prototype.defined=!1,s.prototype.mustUseProperty=!1,s.prototype.number=!1,s.prototype.overloadedBoolean=!1,s.prototype.property="",s.prototype.spaceSeparated=!1,s.prototype.space=void 0},6746:(e,t,n)=>{n.r(t),n.d(t,{boolean:()=>o,booleanish:()=>i,commaOrSpaceSeparated:()=>c,commaSeparated:()=>l,number:()=>s,overloadedBoolean:()=>a,spaceSeparated:()=>u});var r=0,o=d(),i=d(),a=d(),s=d(),u=d(),l=d(),c=d();function d(){return Math.pow(2,++r)}},4444:(e,t,n)=>{function r(e){var t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function o(e){return e.join(" ").trim()}n.d(t,{A:()=>o,q:()=>r})},9194:(e,t,n)=>{n.d(t,{A:()=>o});var r={}.hasOwnProperty;function o(e,t){var n=t||{};function o(t){var n=o.invalid,i=o.handlers;if(t&&r.call(t,e)){var a=String(t[e]);n=r.call(i,a)?i[a]:o.unknown}if(n){for(var s,u=arguments.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=arguments[c];return(s=n).call.apply(s,[this,t].concat(l))}}return o.handlers=n.handlers||{},o.invalid=n.invalid,o.unknown=n.unknown,o}}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={id:e,exports:{}};return o[e](n,n.exports,a),n.exports}a.m=o,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var o=Object.create(null);a.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>n[e]));return i.default=()=>n,a.d(o,i),o},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>e+".min.js",a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="editor.text:",a.l=(e,t,o,i)=>{if(n[e])n[e].push(t);else{var s,u;if(void 0!==o)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==r+o){s=d;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",r+o),s.src=e),n[e]=[t];var f=(t,r)=>{s.onerror=s.onload=null,clearTimeout(p);var o=n[e];if(delete n[e],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(r))),t)return t(r)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="plug/editor.bnote/res/dist/",(()=>{a.b=document.baseURI||self.location.href;var e={4522:0};a.f.j=(t,n)=>{var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise(((n,o)=>r=e[t]=[n,o]));n.push(r[2]=o);var i=a.p+a.u(t),s=new Error;a.l(i,(n=>{if(a.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,r[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,o,[i,s,u]=n,l=0;if(i.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);u&&u(a)}for(t&&t(n);l<i.length;l++)o=i[l],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=self.webpackChunkeditor_text=self.webpackChunkeditor_text||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a.nc=void 0;var s={};a.r(s),a.d(s,{Actions:()=>u,Editor:()=>gW,InfoPanel:()=>BW,MainPanel:()=>LW});var u={};a.r(u),a.d(u,{onSave:()=>bW});const l=require("pydio");var c=a.n(l),d=a(2015),f=a.t(d,2),p=a.n(d);const h=require("react-redux"),m=require("material-ui/styles");var v=a(134),g=a.n(v),y=a(2783),b=a.n(y),D=a(4709),w=a.n(D),C=a(9958),k=a.n(C),E=a(1202),x=a.n(E),A=a(3911),F=a.n(A),S=a(4576),M={};M.styleTagTransform=F(),M.setAttributes=k(),M.insert=w().bind(null,"head"),M.domAPI=b(),M.insertStyleElement=x(),g()(S.A,M),S.A&&S.A.locals&&S.A.locals;var B=a(1894);function O(e){this.content=e}O.prototype={constructor:O,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,o=r.find(e),i=r.content.slice();return-1==o?i.push(n||e,t):(i[o+1]=t,n&&(i[o]=n)),new O(i)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new O(n)},addToStart:function(e,t){return new O([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new O(n)},addBefore:function(e,t,n){var r=this.remove(t),o=r.content.slice(),i=r.find(e);return o.splice(-1==i?o.length:i,0,t,n),new O(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=O.from(e)).size?new O(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=O.from(e)).size?new O(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=O.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach((function(t,n){e[t]=n})),e},get size(){return this.content.length>>1}},O.from=function(e){if(e instanceof O)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new O(t)};const T=O;function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function N(){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=H(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},N.apply(null,arguments)}function _(e,t,n){return t=H(t),function(e,t){if(t&&("object"==V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,R()?Reflect.construct(t,n||[],H(e).constructor):t.apply(e,n))}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}function I(e){var t="function"==typeof Map?new Map:void 0;return I=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(R())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&L(o,n.prototype),o}(e,arguments,H(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),L(n,e)},I(e)}function R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(R=function(){return!!e})()}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,G(r.key),r)}}function U(e,t,n){return t&&$(e.prototype,t),n&&$(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function G(e){var t=function(e){if("object"!=V(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==V(t)?t:t+""}function W(e,t,n){for(var r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;var o=e.child(r),i=t.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var a=0;o.text[a]==i.text[a];a++)n++;return n}if(o.content.size||i.content.size){var s=W(o.content,i.content,n+1);if(null!=s)return s}n+=o.nodeSize}else n+=o.nodeSize}}function q(e,t,n,r){for(var o=e.childCount,i=t.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var a=e.child(--o),s=t.child(--i),u=a.nodeSize;if(a!=s){if(!a.sameMarkup(s))return{a:n,b:r};if(a.isText&&a.text!=s.text){for(var l=0,c=Math.min(a.text.length,s.text.length);l<c&&a.text[a.text.length-l-1]==s.text[s.text.length-l-1];)l++,n--,r--;return{a:n,b:r}}if(a.content.size||s.content.size){var d=q(a.content,s.content,n-1,r-1);if(d)return d}n-=u,r-=u}else n-=u,r-=u}}var K=function(){function e(t,n){if(z(this,e),this.content=t,this.size=n||0,null==n)for(var r=0;r<t.length;r++)this.size+=t[r].nodeSize}return U(e,[{key:"nodesBetween",value:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0,i=0,a=0;a<t;i++){var s=this.content[i],u=a+s.nodeSize;if(u>e&&!1!==n(s,r+a,o||null,i)&&s.content.size){var l=a+1;s.nodesBetween(Math.max(0,e-l),Math.min(s.content.size,t-l),n,r+l)}a=u}}},{key:"descendants",value:function(e){this.nodesBetween(0,this.size,e)}},{key:"textBetween",value:function(e,t,n,r){var o="",i=!0;return this.nodesBetween(e,t,(function(a,s){var u=a.isText?a.text.slice(Math.max(e,s)-s,t-s):a.isLeaf?r?"function"==typeof r?r(a):r:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&u||a.isTextblock)&&n&&(i?i=!1:o+=n),o+=u}),0),o}},{key:"append",value:function(t){if(!t.size)return this;if(!this.size)return t;var n=this.lastChild,r=t.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<t.content.length;i++)o.push(t.content[i]);return new e(o,this.size+t.size)}},{key:"cut",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size;if(0==t&&n==this.size)return this;var r=[],o=0;if(n>t)for(var i=0,a=0;a<n;i++){var s=this.content[i],u=a+s.nodeSize;u>t&&((a<t||u>n)&&(s=s.isText?s.cut(Math.max(0,t-a),Math.min(s.text.length,n-a)):s.cut(Math.max(0,t-a-1),Math.min(s.content.size,n-a-1))),r.push(s),o+=s.nodeSize),a=u}return new e(r,o)}},{key:"cutByIndex",value:function(t,n){return t==n?e.empty:0==t&&n==this.content.length?this:new e(this.content.slice(t,n))}},{key:"replaceChild",value:function(t,n){var r=this.content[t];if(r==n)return this;var o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[t]=n,new e(o,i)}},{key:"addToStart",value:function(t){return new e([t].concat(this.content),this.size+t.nodeSize)}},{key:"addToEnd",value:function(t){return new e(this.content.concat(t),this.size+t.nodeSize)}},{key:"eq",value:function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}},{key:"firstChild",get:function(){return this.content.length?this.content[0]:null}},{key:"lastChild",get:function(){return this.content.length?this.content[this.content.length-1]:null}},{key:"childCount",get:function(){return this.content.length}},{key:"child",value:function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}},{key:"maybeChild",value:function(e){return this.content[e]||null}},{key:"forEach",value:function(e){for(var t=0,n=0;t<this.content.length;t++){var r=this.content[t];e(r,n,t),n+=r.nodeSize}}},{key:"findDiffStart",value:function(e){return W(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}},{key:"findDiffEnd",value:function(e){return q(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size)}},{key:"findIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0==e)return J(0,e);if(e==this.size)return J(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position ".concat(e," outside of fragment (").concat(this,")"));for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(o>=e)return o==e||t>0?J(n+1,o):J(n,r);r=o}}},{key:"toString",value:function(){return"<"+this.toStringInner()+">"}},{key:"toStringInner",value:function(){return this.content.join(", ")}},{key:"toJSON",value:function(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null}}],[{key:"fromJSON",value:function(t,n){if(!n)return e.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new e(n.map(t.nodeFromJSON))}},{key:"fromArray",value:function(t){if(!t.length)return e.empty;for(var n,r=0,o=0;o<t.length;o++){var i=t[o];r+=i.nodeSize,o&&i.isText&&t[o-1].sameMarkup(i)?(n||(n=t.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new e(n||t,r)}},{key:"from",value:function(t){if(!t)return e.empty;if(t instanceof e)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new e([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}])}();K.empty=new K([],0);var Z={index:0,offset:0};function J(e,t){return Z.index=e,Z.offset=t,Z}function X(e,t){if(e===t)return!0;if(!e||"object"!=V(e)||!t||"object"!=V(t))return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!X(e[r],t[r]))return!1}else{for(var o in e)if(!(o in t)||!X(e[o],t[o]))return!1;for(var i in t)if(!(i in e))return!1}return!0}var Y=function(){function e(t,n){z(this,e),this.type=t,this.attrs=n}return U(e,[{key:"addToSet",value:function(e){for(var t,n=!1,r=0;r<e.length;r++){var o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(o)}}return t||(t=e.slice()),n||t.push(this),t}},{key:"removeFromSet",value:function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}},{key:"isInSet",value:function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}},{key:"eq",value:function(e){return this==e||this.type==e.type&&X(this.attrs,e.attrs)}},{key:"toJSON",value:function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e}}],[{key:"fromJSON",value:function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type ".concat(t.type," in this schema"));var r=n.create(t.attrs);return n.checkAttrs(r.attrs),r}},{key:"sameSet",value:function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}},{key:"setFrom",value:function(t){if(!t||Array.isArray(t)&&0==t.length)return e.none;if(t instanceof e)return[t];var n=t.slice();return n.sort((function(e,t){return e.type.rank-t.type.rank})),n}}])}();Y.none=[];var Q=function(e){function t(){return z(this,t),_(this,t,arguments)}return j(t,e),U(t)}(I(Error)),ee=function(){function e(t,n,r){z(this,e),this.content=t,this.openStart=n,this.openEnd=r}return U(e,[{key:"size",get:function(){return this.content.size-this.openStart-this.openEnd}},{key:"insertAt",value:function(t,n){var r=ne(this.content,t+this.openStart,n);return r&&new e(r,this.openStart,this.openEnd)}},{key:"removeBetween",value:function(t,n){return new e(te(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}},{key:"eq",value:function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}},{key:"toString",value:function(){return this.content+"("+this.openStart+","+this.openEnd+")"}},{key:"toJSON",value:function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}}],[{key:"fromJSON",value:function(t,n){if(!n)return e.empty;var r=n.openStart||0,o=n.openEnd||0;if("number"!=typeof r||"number"!=typeof o)throw new RangeError("Invalid input for Slice.fromJSON");return new e(K.fromJSON(t,n.content),r,o)}},{key:"maxOpen",value:function(t){for(var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=0,o=0,i=t.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(var a=t.lastChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.lastChild)o++;return new e(t,r,o)}}])}();function te(e,t,n){var r=e.findIndex(t),o=r.index,i=r.offset,a=e.maybeChild(o),s=e.findIndex(n),u=s.index,l=s.offset;if(i==t||a.isText){if(l!=n&&!e.child(u).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(o!=u)throw new RangeError("Removing non-flat range");return e.replaceChild(o,a.copy(te(a.content,t-i-1,n-i-1)))}function ne(e,t,n,r){var o=e.findIndex(t),i=o.index,a=o.offset,s=e.maybeChild(i);if(a==t||s.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));var u=ne(s.content,t-a-1,n);return u&&e.replaceChild(i,s.copy(u))}function re(e,t,n){if(n.openStart>e.depth)throw new Q("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new Q("Inconsistent open depths");return oe(e,t,n,0)}function oe(e,t,n,r){var o=e.index(r),i=e.node(r);if(o==t.index(r)&&r<e.depth-n.openStart){var a=oe(e,t,n,r+1);return i.copy(i.content.replaceChild(o,a))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){var s=function(e,t){for(var n=t.depth-e.openStart,r=t.node(n).copy(e.content),o=n-1;o>=0;o--)r=t.node(o).copy(K.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(n,e);return le(i,ce(e,s.start,s.end,t,r))}var u=e.parent,l=u.content;return le(u,l.cut(0,e.parentOffset).append(n.content).append(l.cut(t.parentOffset)))}return le(i,de(e,t,r))}function ie(e,t){if(!t.type.compatibleContent(e.type))throw new Q("Cannot join "+t.type.name+" onto "+e.type.name)}function ae(e,t,n){var r=e.node(n);return ie(r,t.node(n)),r}function se(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function ue(e,t,n,r){var o=(t||e).node(n),i=0,a=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(se(e.nodeAfter,r),i++));for(var s=i;s<a;s++)se(o.child(s),r);t&&t.depth==n&&t.textOffset&&se(t.nodeBefore,r)}function le(e,t){return e.type.checkContent(t),e.copy(t)}function ce(e,t,n,r,o){var i=e.depth>o&&ae(e,t,o+1),a=r.depth>o&&ae(n,r,o+1),s=[];return ue(null,e,o,s),i&&a&&t.index(o)==n.index(o)?(ie(i,a),se(le(i,ce(e,t,n,r,o+1)),s)):(i&&se(le(i,de(e,t,o+1)),s),ue(t,n,o,s),a&&se(le(a,de(n,r,o+1)),s)),ue(r,null,o,s),new K(s)}function de(e,t,n){var r=[];return ue(null,e,n,r),e.depth>n&&se(le(ae(e,t,n+1),de(e,t,n+1)),r),ue(t,null,n,r),new K(r)}ee.empty=new ee(K.empty,0,0);var fe=function(){function e(t,n,r){z(this,e),this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}return U(e,[{key:"resolveDepth",value:function(e){return null==e?this.depth:e<0?this.depth+e:e}},{key:"parent",get:function(){return this.node(this.depth)}},{key:"doc",get:function(){return this.node(0)}},{key:"node",value:function(e){return this.path[3*this.resolveDepth(e)]}},{key:"index",value:function(e){return this.path[3*this.resolveDepth(e)+1]}},{key:"indexAfter",value:function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}},{key:"start",value:function(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}},{key:"end",value:function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}},{key:"before",value:function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}},{key:"after",value:function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}},{key:"textOffset",get:function(){return this.pos-this.path[this.path.length-1]}},{key:"nodeAfter",get:function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}},{key:"nodeBefore",get:function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}},{key:"posAtIndex",value:function(e,t){t=this.resolveDepth(t);for(var n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1,o=0;o<e;o++)r+=n.child(o).nodeSize;return r}},{key:"marks",value:function(){var e=this.parent,t=this.index();if(0==e.content.size)return Y.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){var o=n;n=r,r=o}for(var i=n.marks,a=0;a<i.length;a++)!1!==i[a].type.spec.inclusive||r&&i[a].isInSet(r.marks)||(i=i[a--].removeFromSet(i));return i}},{key:"marksAcross",value:function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,r=e.parent.maybeChild(e.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n}},{key:"sharedDepth",value:function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}},{key:"blockRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=arguments.length>1?arguments[1]:void 0;if(e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new ve(this,e,n);return null}},{key:"sameParent",value:function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}},{key:"max",value:function(e){return e.pos>this.pos?e:this}},{key:"min",value:function(e){return e.pos<this.pos?e:this}},{key:"toString",value:function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}}],[{key:"resolve",value:function(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");for(var r=[],o=0,i=n,a=t;;){var s=a.content.findIndex(i),u=s.index,l=s.offset,c=i-l;if(r.push(a,u,o+l),!c)break;if((a=a.child(u)).isText)break;i=c-1,o+=l+1}return new e(n,r,i)}},{key:"resolveCached",value:function(t,n){var r=me.get(t);if(r)for(var o=0;o<r.elts.length;o++){var i=r.elts[o];if(i.pos==n)return i}else me.set(t,r=new pe);var a=r.elts[r.i]=e.resolve(t,n);return r.i=(r.i+1)%he,a}}])}(),pe=U((function e(){z(this,e),this.elts=[],this.i=0})),he=12,me=new WeakMap,ve=function(){return U((function e(t,n,r){z(this,e),this.$from=t,this.$to=n,this.depth=r}),[{key:"start",get:function(){return this.$from.before(this.depth+1)}},{key:"end",get:function(){return this.$to.after(this.depth+1)}},{key:"parent",get:function(){return this.$from.node(this.depth)}},{key:"startIndex",get:function(){return this.$from.index(this.depth)}},{key:"endIndex",get:function(){return this.$to.indexAfter(this.depth)}}])}(),ge=Object.create(null),ye=function(){function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Y.none;z(this,e),this.type=t,this.attrs=n,this.marks=o,this.content=r||K.empty}return U(e,[{key:"children",get:function(){return this.content.content}},{key:"nodeSize",get:function(){return this.isLeaf?1:2+this.content.size}},{key:"childCount",get:function(){return this.content.childCount}},{key:"child",value:function(e){return this.content.child(e)}},{key:"maybeChild",value:function(e){return this.content.maybeChild(e)}},{key:"forEach",value:function(e){this.content.forEach(e)}},{key:"nodesBetween",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.content.nodesBetween(e,t,n,r,this)}},{key:"descendants",value:function(e){this.nodesBetween(0,this.content.size,e)}},{key:"textContent",get:function(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}},{key:"textBetween",value:function(e,t,n,r){return this.content.textBetween(e,t,n,r)}},{key:"firstChild",get:function(){return this.content.firstChild}},{key:"lastChild",get:function(){return this.content.lastChild}},{key:"eq",value:function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}},{key:"sameMarkup",value:function(e){return this.hasMarkup(e.type,e.attrs,e.marks)}},{key:"hasMarkup",value:function(e,t,n){return this.type==e&&X(this.attrs,t||e.defaultAttrs||ge)&&Y.sameSet(this.marks,n||Y.none)}},{key:"copy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t==this.content?this:new e(this.type,this.attrs,t,this.marks)}},{key:"mark",value:function(t){return t==this.marks?this:new e(this.type,this.attrs,this.content,t)}},{key:"cut",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size;return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}},{key:"slice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e==t)return ee.empty;var r=this.resolve(e),o=this.resolve(t),i=n?0:r.sharedDepth(t),a=r.start(i),s=r.node(i).content.cut(r.pos-a,o.pos-a);return new ee(s,r.depth-i,o.depth-i)}},{key:"replace",value:function(e,t,n){return re(this.resolve(e),this.resolve(t),n)}},{key:"nodeAt",value:function(e){for(var t=this;;){var n=t.content.findIndex(e),r=n.index,o=n.offset;if(!(t=t.maybeChild(r)))return null;if(o==e||t.isText)return t;e-=o+1}}},{key:"childAfter",value:function(e){var t=this.content.findIndex(e),n=t.index,r=t.offset;return{node:this.content.maybeChild(n),index:n,offset:r}}},{key:"childBefore",value:function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,r=t.offset;if(r<e)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}},{key:"resolve",value:function(e){return fe.resolveCached(this,e)}},{key:"resolveNoCache",value:function(e){return fe.resolve(this,e)}},{key:"rangeHasMark",value:function(e,t,n){var r=!1;return t>e&&this.nodesBetween(e,t,(function(e){return n.isInSet(e.marks)&&(r=!0),!r})),r}},{key:"isBlock",get:function(){return this.type.isBlock}},{key:"isTextblock",get:function(){return this.type.isTextblock}},{key:"inlineContent",get:function(){return this.type.inlineContent}},{key:"isInline",get:function(){return this.type.isInline}},{key:"isText",get:function(){return this.type.isText}},{key:"isLeaf",get:function(){return this.type.isLeaf}},{key:"isAtom",get:function(){return this.type.isAtom}},{key:"toString",value:function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),De(this.marks,e)}},{key:"contentMatchAt",value:function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}},{key:"canReplace",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:K.empty,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.childCount,i=this.contentMatchAt(e).matchFragment(n,r,o),a=i&&i.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(var s=r;s<o;s++)if(!this.type.allowsMarks(n.child(s).marks))return!1;return!0}},{key:"canReplaceWith",value:function(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(e).matchType(n),i=o&&o.matchFragment(this.content,t);return!!i&&i.validEnd}},{key:"canAppend",value:function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}},{key:"check",value:function(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);for(var e=Y.none,t=0;t<this.marks.length;t++){var n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!Y.sameSet(e,this.marks))throw new RangeError("Invalid collection of marks for node ".concat(this.type.name,": ").concat(this.marks.map((function(e){return e.type.name}))));this.content.forEach((function(e){return e.check()}))}},{key:"toJSON",value:function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e}}],[{key:"fromJSON",value:function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=void 0;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var r=K.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,r,n);return o.type.checkAttrs(o.attrs),o}}])}();ye.prototype.text=void 0;var be=function(e){function t(e,n,r,o){var i;if(z(this,t),i=_(this,t,[e,n,null,o]),!r)throw new RangeError("Empty text nodes are not allowed");return i.text=r,i}return j(t,e),U(t,[{key:"toString",value:function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):De(this.marks,JSON.stringify(this.text))}},{key:"textContent",get:function(){return this.text}},{key:"textBetween",value:function(e,t){return this.text.slice(e,t)}},{key:"nodeSize",get:function(){return this.text.length}},{key:"mark",value:function(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)}},{key:"withText",value:function(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)}},{key:"cut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.text.length;return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}},{key:"eq",value:function(e){return this.sameMarkup(e)&&this.text==e.text}},{key:"toJSON",value:function(){var e=function(e,t,n){var r=N(H(e.prototype),"toJSON",n);return"function"==typeof r?function(e){return r.apply(n,e)}:r}(t,0,this)([]);return e.text=this.text,e}}])}(ye);function De(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var we=function(){function e(t){z(this,e),this.validEnd=t,this.next=[],this.wrapCache=[]}return U(e,[{key:"matchType",value:function(e){for(var t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}},{key:"matchFragment",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.childCount,r=this,o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r}},{key:"inlineContent",get:function(){return 0!=this.next.length&&this.next[0].type.isInline}},{key:"defaultType",get:function(){for(var e=0;e<this.next.length;e++){var t=this.next[e].type;if(!t.isText&&!t.hasRequiredAttrs())return t}return null}},{key:"compatible",value:function(e){for(var t=0;t<this.next.length;t++)for(var n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}},{key:"fillBefore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[this];return function o(i,a){var s=i.matchFragment(e,n);if(s&&(!t||s.validEnd))return K.from(a.map((function(e){return e.createAndFill()})));for(var u=0;u<i.next.length;u++){var l=i.next[u],c=l.type,d=l.next;if(!c.isText&&!c.hasRequiredAttrs()&&-1==r.indexOf(d)){r.push(d);var f=o(d,a.concat(c));if(f)return f}}return null}(this,[])}},{key:"findWrapping",value:function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}},{key:"computeWrapping",value:function(e){for(var t=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(e)){for(var i=[],a=r;a.type;a=a.via)i.push(a.type);return i.reverse()}for(var s=0;s<o.next.length;s++){var u=o.next[s],l=u.type,c=u.next;l.isLeaf||l.hasRequiredAttrs()||l.name in t||r.type&&!c.validEnd||(n.push({match:l.contentMatch,type:l,via:r}),t[l.name]=!0)}}return null}},{key:"edgeCount",get:function(){return this.next.length}},{key:"edge",value:function(e){if(e>=this.next.length)throw new RangeError("There's no ".concat(e,"th edge in this content match"));return this.next[e]}},{key:"toString",value:function(){var e=[];return function t(n){e.push(n);for(var r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map((function(t,n){for(var r=n+(t.validEnd?"*":" ")+" ",o=0;o<t.next.length;o++)r+=(o?", ":"")+t.next[o].type.name+"->"+e.indexOf(t.next[o].next);return r})).join("\n")}}],[{key:"parse",value:function(t,n){var r=new Ce(t,n);if(null==r.next)return e.empty;var o=ke(r);r.next&&r.err("Unexpected trailing text");var i=Be(function(e){var t=[[]];return o(function e(t,i){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(e(n,i))}),[]);if("seq"!=t.type){if("star"==t.type){var a=n();return r(i,a),o(e(t.expr,a),a),[r(a)]}if("plus"==t.type){var s=n();return o(e(t.expr,i),s),o(e(t.expr,s),s),[r(s)]}if("opt"==t.type)return[r(i)].concat(e(t.expr,i));if("range"==t.type){for(var u=i,l=0;l<t.min;l++){var c=n();o(e(t.expr,u),c),u=c}if(-1==t.max)o(e(t.expr,u),u);else for(var d=t.min;d<t.max;d++){var f=n();r(u,f),o(e(t.expr,u),f),u=f}return[r(u)]}if("name"==t.type)return[r(i,void 0,t.value)];throw new Error("Unknown expr type")}for(var p=0;;p++){var h=e(t.exprs[p],i);if(p==t.exprs.length-1)return h;o(h,i=n())}}(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){var o={term:r,to:n};return t[e].push(o),o}function o(e,t){e.forEach((function(e){return e.to=t}))}}(o));return function(e,t){for(var n=0,r=[e];n<r.length;n++){for(var o=r[n],i=!o.validEnd,a=[],s=0;s<o.next.length;s++){var u=o.next[s],l=u.type,c=u.next;a.push(l.name),!i||l.isText||l.hasRequiredAttrs()||(i=!1),-1==r.indexOf(c)&&r.push(c)}i&&t.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(i,r),i}}])}();we.empty=new we(!0);var Ce=function(){return U((function e(t,n){z(this,e),this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}),[{key:"next",get:function(){return this.tokens[this.pos]}},{key:"eat",value:function(e){return this.next==e&&(this.pos++||!0)}},{key:"err",value:function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}])}();function ke(e){var t=[];do{t.push(Ee(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function Ee(e){var t=[];do{t.push(xe(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function xe(e){for(var t=function(e){if(e.eat("(")){var t=ke(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var n=function(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var o=[];for(var i in n){var a=n[i];a.isInGroup(t)&&o.push(a)}return 0==o.length&&e.err("No node type or group '"+t+"' found"),o}(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=Fe(e,t)}return t}function Ae(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function Fe(e,t){var n=Ae(e),r=n;return e.eat(",")&&(r="}"!=e.next?Ae(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function Se(e,t){return t-e}function Me(e,t){var n=[];return function t(r){var o=e[r];if(1==o.length&&!o[0].term)return t(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var a=o[i],s=a.term,u=a.to;s||-1!=n.indexOf(u)||t(u)}}(t),n.sort(Se)}function Be(e){var t=Object.create(null);return function n(r){var o=[];r.forEach((function(t){e[t].forEach((function(t){var n=t.term,r=t.to;if(n){for(var i,a=0;a<o.length;a++)o[a][0]==n&&(i=o[a][1]);Me(e,r).forEach((function(e){i||o.push([n,i=[]]),-1==i.indexOf(e)&&i.push(e)}))}}))}));for(var i=t[r.join(",")]=new we(r.indexOf(e.length-1)>-1),a=0;a<o.length;a++){var s=o[a][1].sort(Se);i.next.push({type:o[a][0],next:t[s.join(",")]||n(s)})}return i}(Me(e,0))}function Oe(e){var t=Object.create(null);for(var n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function Te(e,t){var n=Object.create(null);for(var r in e){var o=t&&t[r];if(void 0===o){var i=e[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function Pe(e,t,n,r){for(var o in t)if(!(o in e))throw new RangeError("Unsupported attribute ".concat(o," for ").concat(n," of type ").concat(o));for(var i in e){var a=e[i];a.validate&&a.validate(t[i])}}function Ne(e,t){var n=Object.create(null);if(t)for(var r in t)n[r]=new je(e,r,t[r]);return n}var _e=function(){function e(t,n,r){z(this,e),this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Ne(t,r.attrs),this.defaultAttrs=Oe(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||"text"==t),this.isText="text"==t}return U(e,[{key:"isInline",get:function(){return!this.isBlock}},{key:"isTextblock",get:function(){return this.isBlock&&this.inlineContent}},{key:"isLeaf",get:function(){return this.contentMatch==we.empty}},{key:"isAtom",get:function(){return this.isLeaf||!!this.spec.atom}},{key:"isInGroup",value:function(e){return this.groups.indexOf(e)>-1}},{key:"whitespace",get:function(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}},{key:"hasRequiredAttrs",value:function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}},{key:"compatibleContent",value:function(e){return this==e||this.contentMatch.compatible(e.contentMatch)}},{key:"computeAttrs",value:function(e){return!e&&this.defaultAttrs?this.defaultAttrs:Te(this.attrs,e)}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ye(this,this.computeAttrs(e),K.from(t),Y.setFrom(n))}},{key:"createChecked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return t=K.from(t),this.checkContent(t),new ye(this,this.computeAttrs(e),t,Y.setFrom(n))}},{key:"createAndFill",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(e=this.computeAttrs(e),(t=K.from(t)).size){var r=this.contentMatch.fillBefore(t);if(!r)return null;t=r.append(t)}var o=this.contentMatch.matchFragment(t),i=o&&o.fillBefore(K.empty,!0);return i?new ye(this,e,t.append(i),Y.setFrom(n)):null}},{key:"validContent",value:function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}},{key:"checkContent",value:function(e){if(!this.validContent(e))throw new RangeError("Invalid content for node ".concat(this.name,": ").concat(e.toString().slice(0,50)))}},{key:"checkAttrs",value:function(e){Pe(this.attrs,e,"node",this.name)}},{key:"allowsMarkType",value:function(e){return null==this.markSet||this.markSet.indexOf(e)>-1}},{key:"allowsMarks",value:function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}},{key:"allowedMarks",value:function(e){if(null==this.markSet)return e;for(var t,n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:Y.none:e}}],[{key:"compile",value:function(t,n){var r=Object.create(null);t.forEach((function(t,o){return r[t]=new e(t,n,o)}));var o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(var i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}])}(),je=function(){return U((function e(t,n,r){z(this,e),this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate="string"==typeof r.validate?function(e,t,n){var r=n.split("|");return function(n){var o=null===n?"null":V(n);if(r.indexOf(o)<0)throw new RangeError("Expected value of type ".concat(r," for attribute ").concat(t," on type ").concat(e,", got ").concat(o))}}(t,n,r.validate):r.validate}),[{key:"isRequired",get:function(){return!this.hasDefault}}])}(),Ie=function(){function e(t,n,r,o){z(this,e),this.name=t,this.rank=n,this.schema=r,this.spec=o,this.attrs=Ne(t,o.attrs),this.excluded=null;var i=Oe(this.attrs);this.instance=i?new Y(this,i):null}return U(e,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!e&&this.instance?this.instance:new Y(this,Te(this.attrs,e))}},{key:"removeFromSet",value:function(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}},{key:"isInSet",value:function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]}},{key:"checkAttrs",value:function(e){Pe(this.attrs,e,"mark",this.name)}},{key:"excludes",value:function(e){return this.excluded.indexOf(e)>-1}}],[{key:"compile",value:function(t,n){var r=Object.create(null),o=0;return t.forEach((function(t,i){return r[t]=new e(t,o++,n,i)})),r}}])}(),Re=function(){return U((function e(t){z(this,e),this.linebreakReplacement=null,this.cached=Object.create(null);var n=this.spec={};for(var r in t)n[r]=t[r];n.nodes=T.from(t.nodes),n.marks=T.from(t.marks||{}),this.nodes=_e.compile(this.spec.nodes,this),this.marks=Ie.compile(this.spec.marks,this);var o=Object.create(null);for(var i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");var a=this.nodes[i],s=a.spec.content||"",u=a.spec.marks;if(a.contentMatch=o[s]||(o[s]=we.parse(s,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet="_"==u?null:u?Le(this,u.split(" ")):""!=u&&a.inlineContent?null:[]}for(var l in this.marks){var c=this.marks[l],d=c.spec.excludes;c.excluded=null==d?[c]:""==d?[]:Le(this,d.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}),[{key:"node",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof _e))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)}},{key:"text",value:function(e,t){var n=this.nodes.text;return new be(n,n.defaultAttrs,e,Y.setFrom(t))}},{key:"mark",value:function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}},{key:"nodeFromJSON",value:function(e){return ye.fromJSON(this,e)}},{key:"markFromJSON",value:function(e){return Y.fromJSON(this,e)}},{key:"nodeType",value:function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}])}();function Le(e,t){for(var n=[],r=0;r<t.length;r++){var o=t[r],i=e.marks[o],a=i;if(i)n.push(i);else for(var s in e.marks){var u=e.marks[s];("_"==o||u.spec.group&&u.spec.group.split(" ").indexOf(o)>-1)&&n.push(a=u)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}var He=function(){function e(t,n){var r=this;z(this,e),this.schema=t,this.rules=n,this.tags=[],this.styles=[];var o=this.matchedStyles=[];n.forEach((function(e){if(function(e){return null!=e.tag}(e))r.tags.push(e);else if(function(e){return null!=e.style}(e)){var t=/[^=]*/.exec(e.style)[0];o.indexOf(t)<0&&o.push(t),r.styles.push(e)}})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))}return U(e,[{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new We(this,t,!1);return n.addAll(e,Y.none,t.from,t.to),n.finish()}},{key:"parseSlice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new We(this,t,!0);return n.addAll(e,Y.none,t.from,t.to),ee.maxOpen(n.finish())}},{key:"matchTag",value:function(e,t,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var o=this.tags[r];if(qe(e,o.tag)&&(void 0===o.namespace||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(e);if(!1===i)continue;o.attrs=i||void 0}return o}}}},{key:"matchStyle",value:function(e,t,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var i=this.styles[o],a=i.style;if(!(0!=a.indexOf(e)||i.context&&!n.matchesContext(i.context)||a.length>e.length&&(61!=a.charCodeAt(e.length)||a.slice(e.length+1)!=t))){if(i.getAttrs){var s=i.getAttrs(t);if(!1===s)continue;i.attrs=s||void 0}return i}}}}],[{key:"schemaRules",value:function(e){var t=[];function n(e){for(var n=null==e.priority?50:e.priority,r=0;r<t.length;r++){var o=t[r];if((null==o.priority?50:o.priority)<n)break}t.splice(r,0,e)}var r=function(t){var r=e.marks[t].spec.parseDOM;r&&r.forEach((function(e){n(e=Ke(e)),e.mark||e.ignore||e.clearMark||(e.mark=t)}))};for(var o in e.marks)r(o);var i=function(t){var r=e.nodes[t].spec.parseDOM;r&&r.forEach((function(e){n(e=Ke(e)),e.node||e.ignore||e.mark||(e.node=t)}))};for(var a in e.nodes)i(a);return t}},{key:"fromSchema",value:function(t){return t.cached.domParser||(t.cached.domParser=new e(t,e.schemaRules(t)))}}])}(),Ve={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ze={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},$e={ol:!0,ul:!0};function Ue(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}var Ge=function(){return U((function e(t,n,r,o,i,a){z(this,e),this.type=t,this.attrs=n,this.marks=r,this.solid=o,this.options=a,this.content=[],this.activeMarks=Y.none,this.match=i||(4&a?null:t.contentMatch)}),[{key:"findWrapping",value:function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(K.from(e));if(!t){var n,r=this.type.contentMatch;return(n=r.findWrapping(e.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}},{key:"finish",value:function(e){if(!(1&this.options)){var t,n=this.content[this.content.length-1];if(n&&n.isText&&(t=/[ \t\r\n\u000c]+$/.exec(n.text))){var r=n;n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=r.withText(r.text.slice(0,r.text.length-t[0].length))}}var o=K.from(this.content);return!e&&this.match&&(o=o.append(this.match.fillBefore(K.empty,!0))),this.type?this.type.create(this.attrs,o,this.marks):o}},{key:"inlineContext",value:function(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Ve.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}])}(),We=function(){return U((function e(t,n,r){z(this,e),this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;var o,i=n.topNode,a=Ue(null,n.preserveWhitespace,0)|(r?4:0);o=i?new Ge(i.type,i.attrs,Y.none,!0,n.topMatch||i.type.contentMatch,a):new Ge(r?null:t.schema.topNodeType,null,Y.none,!0,null,a),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}),[{key:"top",get:function(){return this.nodes[this.open]}},{key:"addDOM",value:function(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}},{key:"addTextNode",value:function(e,t){var n=e.nodeValue,r=this.top,o=2&r.options?"full":this.localPreserveWS||(1&r.options)>0;if("full"===o||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(o)n="full"!==o?n.replace(/\r?\n|\r/g," "):n.replace(/\r\n?/g,"\n");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){var i=r.content[r.content.length-1],a=e.previousSibling;(!i||a&&"BR"==a.nodeName||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}},{key:"addElement",value:function(e,t,n){var r=this.localPreserveWS,o=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);var i,a=e.nodeName.toLowerCase();$e.hasOwnProperty(a)&&this.parser.normalizeLists&&function(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=1==t.nodeType?t.nodeName.toLowerCase():null;r&&$e.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):"li"==r?n=t:r&&(n=null)}}(e);var s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));e:if(s?s.ignore:ze.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,t);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);var u,l=this.needsBlock;if(Ve.hasOwnProperty(a))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),u=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}var c=s&&s.skip?t:this.readStyles(e,t);c&&this.addAll(e,c),u&&this.sync(o),this.needsBlock=l}else{var d=this.readStyles(e,t);d&&this.addElementByRule(e,s,d,!1===s.consuming?i:void 0)}this.localPreserveWS=r}},{key:"leafFallback",value:function(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}},{key:"ignoreFallback",value:function(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t,!0)}},{key:"readStyles",value:function(e,t){var n=this,r=e.style;if(r&&r.length)for(var o=0;o<this.parser.matchedStyles.length;o++){var i=this.parser.matchedStyles[o],a=r.getPropertyValue(i);if(a)for(var s,u=function(e){var r=n.parser.matchStyle(i,a,n,e);return r?r.ignore?{v:null}:(t=r.clearMark?t.filter((function(e){return!r.clearMark(e)})):t.concat(n.parser.schema.marks[r.mark].create(r.attrs)),!1!==r.consuming?(l=e,0):void(l=e=r)):(l=e,0)},l=void 0;0!==(s=u(l));)if(s)return s.v}return t}},{key:"addElementByRule",value:function(e,t,n,r){var o,i,a=this;if(t.node)if((i=this.parser.schema.nodes[t.node]).isLeaf)this.insertNode(i.create(t.attrs),n,"BR"==e.nodeName)||this.leafFallback(e,n);else{var s=this.enter(i,t.attrs||null,n,t.preserveWhitespace);s&&(o=!0,n=s)}else{var u=this.parser.schema.marks[t.mark];n=n.concat(u.create(t.attrs))}var l=this.top;if(i&&i.isLeaf)this.findInside(e);else if(r)this.addElement(e,n,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return a.insertNode(e,n,!1)}));else{var c=e;"string"==typeof t.contentElement?c=e.querySelector(t.contentElement):"function"==typeof t.contentElement?c=t.contentElement(e):t.contentElement&&(c=t.contentElement),this.findAround(e,c,!0),this.addAll(c,n),this.findAround(e,c,!1)}o&&this.sync(l)&&this.open--}},{key:"addAll",value:function(e,t,n,r){for(var o=n||0,i=n?e.childNodes[n]:e.firstChild,a=null==r?null:e.childNodes[r];i!=a;i=i.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(i,t);this.findAtPoint(e,o)}},{key:"findPlace",value:function(e,t,n){for(var r,o,i=this.open,a=0;i>=0;i--){var s=this.nodes[i],u=s.findWrapping(e);if(u&&(!r||r.length>u.length+a)&&(r=u,o=s,!u.length))break;if(s.solid){if(n)break;a+=2}}if(!r)return null;this.sync(o);for(var l=0;l<r.length;l++)t=this.enterInner(r[l],null,t,!1);return t}},{key:"insertNode",value:function(e,t,n){if(e.isInline&&this.needsBlock&&!this.top.type){var r=this.textblockFromContext();r&&(t=this.enterInner(r,null,t))}var o=this.findPlace(e,t,n);if(o){this.closeExtra();var i=this.top;i.match&&(i.match=i.match.matchType(e.type));var a,s=Y.none,u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return P(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(o.concat(e.marks));try{for(u.s();!(a=u.n()).done;){var l=a.value;(i.type?i.type.allowsMarkType(l.type):Ze(l.type,e.type))&&(s=l.addToSet(s))}}catch(e){u.e(e)}finally{u.f()}return i.content.push(e.mark(s)),!0}return!1}},{key:"enter",value:function(e,t,n,r){var o=this.findPlace(e.create(t),n,!1);return o&&(o=this.enterInner(e,t,n,!0,r)),o}},{key:"enterInner",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;this.closeExtra();var i=this.top;i.match=i.match&&i.match.matchType(e);var a=Ue(e,o,i.options);4&i.options&&0==i.content.length&&(a|=4);var s=Y.none;return n=n.filter((function(t){return!(i.type?i.type.allowsMarkType(t.type):Ze(t.type,e))||(s=t.addToSet(s),!1)})),this.nodes.push(new Ge(e,t,s,r,null,a)),this.open++,n}},{key:"closeExtra",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}},{key:"finish",value:function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!(!this.isOpen&&!this.options.topOpen))}},{key:"sync",value:function(e){for(var t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=1)}return!1}},{key:"currentPos",get:function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e}},{key:"findAtPoint",value:function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}},{key:"findInside",value:function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}},{key:"findAround",value:function(e,t,n){if(e!=t&&this.find)for(var r=0;r<this.find.length;r++)null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},{key:"findInText",value:function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}},{key:"matchesContext",value:function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),r=this.options.context,o=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),a=function(e,s){for(;e>=0;e--){var u=n[e];if(""==u){if(e==n.length-1||0==e)continue;for(;s>=i;s--)if(a(e-1,s))return!0;return!1}var l=s>0||0==s&&o?t.nodes[s].type:r&&s>=i?r.node(s-i).type:null;if(!l||l.name!=u&&!l.isInGroup(u))return!1;s--}return!0};return a(n.length-1,this.open)}},{key:"textblockFromContext",value:function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}}}])}();function qe(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function Ke(e){var t={};for(var n in e)t[n]=e[n];return t}function Ze(e,t){var n,r=t.schema.nodes,o=function(){var n=r[i];if(!n.allowsMarkType(e))return 0;var o=[],a=function(e){o.push(e);for(var n=0;n<e.edgeCount;n++){var r=e.edge(n),i=r.type,s=r.next;if(i==t)return!0;if(o.indexOf(s)<0&&a(s))return!0}};return a(n.contentMatch)?{v:!0}:void 0};for(var i in r)if(0!==(n=o())&&n)return n.v}var Je=function(){function e(t,n){z(this,e),this.nodes=t,this.marks=n}return U(e,[{key:"serializeFragment",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;r||(r=Ye(n).createDocumentFragment());var o=r,i=[];return e.forEach((function(e){if(i.length||e.marks.length){for(var r=0,a=0;r<i.length&&a<e.marks.length;){var s=e.marks[a];if(t.marks[s.type.name]){if(!s.eq(i[r][0])||!1===s.type.spec.spanning)break;r++,a++}else a++}for(;r<i.length;)o=i.pop()[1];for(;a<e.marks.length;){var u=e.marks[a++],l=t.serializeMark(u,e.isInline,n);l&&(i.push([u,o]),o.appendChild(l.dom),o=l.contentDOM||l.dom)}}o.appendChild(t.serializeNodeInner(e,n))})),r}},{key:"serializeNodeInner",value:function(e,t){var n=et(Ye(t),this.nodes[e.type.name](e),null,e.attrs),r=n.dom,o=n.contentDOM;if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,o)}return r}},{key:"serializeNode",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serializeNodeInner(e,t),r=e.marks.length-1;r>=0;r--){var o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n}},{key:"serializeMark",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.marks[e.type.name];return r&&et(Ye(n),r(e,t),null,e.attrs)}}],[{key:"renderSpec",value:function(e,t){return et(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0)}},{key:"fromSchema",value:function(t){return t.cached.domSerializer||(t.cached.domSerializer=new e(this.nodesFromSchema(t),this.marksFromSchema(t)))}},{key:"nodesFromSchema",value:function(e){var t=Xe(e.nodes);return t.text||(t.text=function(e){return e.text}),t}},{key:"marksFromSchema",value:function(e){return Xe(e.marks)}}])}();function Xe(e){var t={};for(var n in e){var r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function Ye(e){return e.document||window.document}var Qe=new WeakMap;function et(e,t,n,r){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;var o,i=t[0];if("string"!=typeof i)throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=function(e){var t=Qe.get(e);return void 0===t&&Qe.set(e,t=function(e){var t=null;return function e(n){if(n&&"object"==V(n))if(Array.isArray(n))if("string"==typeof n[0])t||(t=[]),t.push(n);else for(var r=0;r<n.length;r++)e(n[r]);else for(var o in n)e(n[o])}(e),t}(e)),t}(r))&&o.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");var a,s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));var u=n?e.createElementNS(n,i):e.createElement(i),l=t[1],c=1;if(l&&"object"==V(l)&&null==l.nodeType&&!Array.isArray(l))for(var d in c=2,l)if(null!=l[d]){var f=d.indexOf(" ");f>0?u.setAttributeNS(d.slice(0,f),d.slice(f+1),l[d]):u.setAttribute(d,l[d])}for(var p=c;p<t.length;p++){var h=t[p];if(0===h){if(p<t.length-1||p>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}var m=et(e,h,n,r),v=m.dom,g=m.contentDOM;if(u.appendChild(v),g){if(a)throw new RangeError("Multiple content holes");a=g}}return{dom:u,contentDOM:a}}function tt(e,t,n){return t=rt(t),function(e,t){if(t&&("object"==at(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,nt()?Reflect.construct(t,n||[],rt(e).constructor):t.apply(e,n))}function nt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nt=function(){return!!e})()}function rt(e){return rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rt(e)}function ot(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&it(e,t)}function it(e,t){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},it(e,t)}function at(e){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(e)}function st(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ct(r.key),r)}}function lt(e,t,n){return t&&ut(e.prototype,t),n&&ut(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ct(e){var t=function(e){if("object"!=at(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=at(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==at(t)?t:t+""}var dt=Math.pow(2,16);function ft(e,t){return e+t*dt}function pt(e){return 65535&e}var ht=function(){return lt((function e(t,n,r){st(this,e),this.pos=t,this.delInfo=n,this.recover=r}),[{key:"deleted",get:function(){return(8&this.delInfo)>0}},{key:"deletedBefore",get:function(){return(5&this.delInfo)>0}},{key:"deletedAfter",get:function(){return(6&this.delInfo)>0}},{key:"deletedAcross",get:function(){return(4&this.delInfo)>0}}])}(),mt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(st(this,e),this.ranges=t,this.inverted=n,!t.length&&e.empty)return e.empty}return lt(e,[{key:"recover",value:function(e){var t=0,n=pt(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/dt}(e)}},{key:"mapResult",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}},{key:"map",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!0)}},{key:"_map",value:function(e,t,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?r:0);if(s>e)break;var u=this.ranges[a+o],l=this.ranges[a+i],c=s+u;if(e<=c){var d=s+r+((u?e==s?-1:e==c?1:t:t)<0?0:l);if(n)return d;var f=e==(t<0?s:c)?null:ft(a/3,e-s),p=e==s?2:e==c?1:4;return(t<0?e!=s:e!=c)&&(p|=8),new ht(d,p,f)}r+=l-u}return n?e+r:new ht(e+r,0,null)}},{key:"touches",value:function(e,t){for(var n=0,r=pt(t),o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?n:0);if(s>e)break;var u=this.ranges[a+o];if(e<=s+u&&a==3*r)return!0;n+=this.ranges[a+i]-u}return!1}},{key:"forEach",value:function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],a=i-(this.inverted?o:0),s=i+(this.inverted?0:o),u=this.ranges[r+t],l=this.ranges[r+n];e(a,a+u,s,s+l),o+=l-u}}},{key:"invert",value:function(){return new e(this.ranges,!this.inverted)}},{key:"toString",value:function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}}],[{key:"offset",value:function(t){return 0==t?e.empty:new e(t<0?[0,-t,0]:[0,0,t])}}])}();mt.empty=new mt([]);var vt=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t?t.length:0;st(this,e),this.mirror=n,this.from=r,this.to=o,this._maps=t||[],this.ownData=!(t||n)}return lt(e,[{key:"maps",get:function(){return this._maps}},{key:"slice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maps.length;return new e(this._maps,this.mirror,t,n)}},{key:"appendMap",value:function(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),null!=t&&this.setMirror(this._maps.length-1,t)}},{key:"appendMapping",value:function(e){for(var t=0,n=this._maps.length;t<e._maps.length;t++){var r=e.getMirror(t);this.appendMap(e._maps[t],null!=r&&r<t?n+r:void 0)}}},{key:"getMirror",value:function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}},{key:"setMirror",value:function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}},{key:"appendMappingInverted",value:function(e){for(var t=e.maps.length-1,n=this._maps.length+e._maps.length;t>=0;t--){var r=e.getMirror(t);this.appendMap(e._maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}},{key:"invert",value:function(){var t=new e;return t.appendMappingInverted(this),t}},{key:"map",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this._maps[n].map(e,t);return e}},{key:"mapResult",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}},{key:"_map",value:function(e,t,n){for(var r=0,o=this.from;o<this.to;o++){var i=this._maps[o].mapResult(e,t);if(null!=i.recover){var a=this.getMirror(o);if(null!=a&&a>o&&a<this.to){o=a,e=this._maps[a].recover(i.recover);continue}}r|=i.delInfo,e=i.pos}return n?e:new ht(e,r,null)}}])}(),gt=Object.create(null),yt=function(){return lt((function e(){st(this,e)}),[{key:"getMap",value:function(){return mt.empty}},{key:"merge",value:function(e){return null}}],[{key:"fromJSON",value:function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=gt[t.stepType];if(!n)throw new RangeError("No step type ".concat(t.stepType," defined"));return n.fromJSON(e,t)}},{key:"jsonID",value:function(e,t){if(e in gt)throw new RangeError("Duplicate use of step JSON ID "+e);return gt[e]=t,t.prototype.jsonID=e,t}}])}(),bt=function(){function e(t,n){st(this,e),this.doc=t,this.failed=n}return lt(e,null,[{key:"ok",value:function(t){return new e(t,null)}},{key:"fail",value:function(t){return new e(null,t)}},{key:"fromReplace",value:function(t,n,r,o){try{return e.ok(t.replace(n,r,o))}catch(t){if(t instanceof Q)return e.fail(t.message);throw t}}}])}();function Dt(e,t,n){for(var r=[],o=0;o<e.childCount;o++){var i=e.child(o);i.content.size&&(i=i.copy(Dt(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return K.fromArray(r)}var wt=function(e){function t(e,n,r){var o;return st(this,t),(o=tt(this,t)).from=e,o.to=n,o.mark=r,o}return ot(t,e),lt(t,[{key:"apply",value:function(e){var t=this,n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new ee(Dt(n.content,(function(e,n){return e.isAtom&&n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),o),n.openStart,n.openEnd);return bt.fromReplace(e,this.from,this.to,i)}},{key:"invert",value:function(){return new Ct(this.from,this.to,this.mark)}},{key:"map",value:function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)}},{key:"merge",value:function(e){return e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))}}])}(yt);yt.jsonID("addMark",wt);var Ct=function(e){function t(e,n,r){var o;return st(this,t),(o=tt(this,t)).from=e,o.to=n,o.mark=r,o}return ot(t,e),lt(t,[{key:"apply",value:function(e){var t=this,n=e.slice(this.from,this.to),r=new ee(Dt(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))}),e),n.openStart,n.openEnd);return bt.fromReplace(e,this.from,this.to,r)}},{key:"invert",value:function(){return new wt(this.from,this.to,this.mark)}},{key:"map",value:function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)}},{key:"merge",value:function(e){return e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))}}])}(yt);yt.jsonID("removeMark",Ct);var kt=function(e){function t(e,n){var r;return st(this,t),(r=tt(this,t)).pos=e,r.mark=n,r}return ot(t,e),lt(t,[{key:"apply",value:function(e){var t=e.nodeAt(this.pos);if(!t)return bt.fail("No node at mark step's position");var n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return bt.fromReplace(e,this.pos,this.pos+1,new ee(K.from(n),0,t.isLeaf?0:1))}},{key:"invert",value:function(e){var n=e.nodeAt(this.pos);if(n){var r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(var o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new t(this.pos,n.marks[o]);return new t(this.pos,this.mark)}}return new Et(this.pos,this.mark)}},{key:"map",value:function(e){var n=e.mapResult(this.pos,1);return n.deletedAfter?null:new t(n.pos,this.mark)}},{key:"toJSON",value:function(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new t(n.pos,e.markFromJSON(n.mark))}}])}(yt);yt.jsonID("addNodeMark",kt);var Et=function(e){function t(e,n){var r;return st(this,t),(r=tt(this,t)).pos=e,r.mark=n,r}return ot(t,e),lt(t,[{key:"apply",value:function(e){var t=e.nodeAt(this.pos);if(!t)return bt.fail("No node at mark step's position");var n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return bt.fromReplace(e,this.pos,this.pos+1,new ee(K.from(n),0,t.isLeaf?0:1))}},{key:"invert",value:function(e){var t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new kt(this.pos,this.mark):this}},{key:"map",value:function(e){var n=e.mapResult(this.pos,1);return n.deletedAfter?null:new t(n.pos,this.mark)}},{key:"toJSON",value:function(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new t(n.pos,e.markFromJSON(n.mark))}}])}(yt);yt.jsonID("removeNodeMark",Et);var xt=function(e){function t(e,n,r){var o,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return st(this,t),(o=tt(this,t)).from=e,o.to=n,o.slice=r,o.structure=i,o}return ot(t,e),lt(t,[{key:"apply",value:function(e){return this.structure&&Ft(e,this.from,this.to)?bt.fail("Structure replace would overwrite content"):bt.fromReplace(e,this.from,this.to,this.slice)}},{key:"getMap",value:function(){return new mt([this.from,this.to-this.from,this.slice.size])}},{key:"invert",value:function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}},{key:"map",value:function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new t(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}},{key:"merge",value:function(e){if(!(e instanceof t)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?ee.empty:new ee(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}var r=this.slice.size+e.slice.size==0?ee.empty:new ee(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),r,this.structure)}},{key:"toJSON",value:function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,ee.fromJSON(e,n.slice),!!n.structure)}}])}(yt);yt.jsonID("replace",xt);var At=function(e){function t(e,n,r,o,i,a){var s,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return st(this,t),(s=tt(this,t)).from=e,s.to=n,s.gapFrom=r,s.gapTo=o,s.slice=i,s.insert=a,s.structure=u,s}return ot(t,e),lt(t,[{key:"apply",value:function(e){if(this.structure&&(Ft(e,this.from,this.gapFrom)||Ft(e,this.gapTo,this.to)))return bt.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return bt.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?bt.fromReplace(e,this.from,this.to,n):bt.fail("Content does not fit in gap")}},{key:"getMap",value:function(){return new mt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}},{key:"invert",value:function(e){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}},{key:"map",value:function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||i>r.pos?null:new t(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)}},{key:"toJSON",value:function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,ee.fromJSON(e,n.slice),n.insert,!!n.structure)}}])}(yt);function Ft(e,t,n){for(var r=e.resolve(t),o=n-t,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var a=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}return!1}function St(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.contentMatch,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=e.doc.nodeAt(t),a=[],s=t+1,u=0;u<i.childCount;u++){var l=i.child(u),c=s+l.nodeSize,d=r.matchType(l.type);if(d){r=d;for(var f=0;f<l.marks.length;f++)n.allowsMarkType(l.marks[f].type)||e.step(new Ct(s,c,l.marks[f]));if(o&&l.isText&&"pre"!=n.whitespace)for(var p=void 0,h=/\r?\n|\r/g,m=void 0;p=h.exec(l.text);)m||(m=new ee(K.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),a.push(new xt(s+p.index,s+p.index+p[0].length,m))}else a.push(new xt(s,c,ee.empty));s=c}if(!r.validEnd){var v=r.fillBefore(K.empty,!0);e.replace(s,s,new ee(v,0,0))}for(var g=a.length-1;g>=0;g--)e.step(a[g])}function Mt(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Bt(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),n=e.depth;;--n){var r=e.$from.node(n),o=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(o,i,t))return n;if(0==n||r.type.spec.isolating||!Mt(r,o,i))break}return null}function Ot(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,o=function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;var a=i.length?i[0]:t;return n.canReplaceWith(r,o,a)?i:null}(e,t),i=o&&function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.child(r),a=t.contentMatch.findWrapping(i.type);if(!a)return null;for(var s=(a.length?a[a.length-1]:t).contentMatch,u=r;s&&u<o;u++)s=s.matchType(n.child(u).type);return s&&s.validEnd?a:null}(r,t);return i?o.map(Tt).concat({type:t,attrs:n}).concat(i.map(Tt)):null}function Tt(e){return{type:e,attrs:null}}function Pt(e,t,n,r){t.forEach((function(o,i){if(o.isText)for(var a,s=/\r?\n|\r/g;a=s.exec(o.text);){var u=e.mapping.slice(r).map(n+1+i+a.index);e.replaceWith(u,u+1,t.type.schema.linebreakReplacement.create())}}))}function Nt(e,t,n,r){t.forEach((function(o,i){if(o.type==o.type.schema.linebreakReplacement){var a=e.mapping.slice(r).map(n+1+i);e.replaceWith(a,a+1,t.type.schema.text("\n"))}}))}function _t(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=e.resolve(t),i=o.depth-n,a=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!a.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var s=o.depth-1,u=n-2;s>i;s--,u--){var l=o.node(s),c=o.index(s);if(l.type.spec.isolating)return!1;var d=l.content.cutByIndex(c,l.childCount),f=r&&r[u+1];f&&(d=d.replaceChild(0,f.type.create(f.attrs)));var p=r&&r[u]||l;if(!l.canReplace(c+1,l.childCount)||!p.type.validContent(d))return!1}var h=o.indexAfter(i),m=r&&r[0];return o.node(i).canReplaceWith(h,h,m?m.type:o.node(i+1).type)}function jt(e,t){var n=e.resolve(t),r=n.index();return It(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function It(e,t){return!(!e||!t||e.isLeaf||!function(e,t){t.content.size||e.type.compatibleContent(t.type);for(var n=e.contentMatchAt(e.childCount),r=e.type.schema.linebreakReplacement,o=0;o<t.childCount;o++){var i=t.child(o),a=i.type==r?e.type.schema.nodes.text:i.type;if(!(n=n.matchType(a)))return!1;if(!e.type.allowsMarks(i.marks))return!1}return n.validEnd}(e,t))}function Rt(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=e.resolve(t),o=r.depth;;o--){var i=void 0,a=void 0,s=r.index(o);if(o==r.depth?(i=r.nodeBefore,a=r.nodeAfter):n>0?(i=r.node(o+1),s++,a=r.node(o).maybeChild(s)):(i=r.node(o).maybeChild(s-1),a=r.node(o+1)),i&&!i.isTextblock&&It(i,a)&&r.node(o).canReplace(s,s+1))return t;if(0==o)break;t=n<0?r.before(o):r.after(o)}}function Lt(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var a=1;a<=(0==n.openStart&&n.size?2:1);a++)for(var s=r.depth;s>=0;s--){var u=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(u>0?1:0),c=r.node(s),d=!1;if(1==a)d=c.canReplace(l,l,o);else{var f=c.contentMatchAt(l).findWrapping(o.firstChild.type);d=f&&c.canReplaceWith(l,l,f[0])}if(d)return 0==u?r.pos:u<0?r.before(s+1):r.after(s+1)}return null}function Ht(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ee.empty;if(t==n&&!r.size)return null;var o=e.resolve(t),i=e.resolve(n);return Vt(o,i,r)?new xt(t,n,r):new zt(o,i,r).fit()}function Vt(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}yt.jsonID("replaceAround",At);var zt=function(){return lt((function e(t,n,r){st(this,e),this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=K.empty;for(var o=0;o<=t.depth;o++){var i=t.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(o))})}for(var a=t.depth;a>0;a--)this.placed=K.from(t.node(a).copy(this.placed))}),[{key:"depth",get:function(){return this.frontier.length-1}},{key:"fit",value:function(){for(;this.unplaced.size;){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(t<0?this.$to:r.doc.resolve(t));if(!o)return null;for(var i=this.placed,a=r.depth,s=o.depth;a&&s&&1==i.childCount;)i=i.firstChild.content,a--,s--;var u=new ee(i,a,s);return t>-1?new At(r.pos,t,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new xt(r.pos,o.pos,u):null}},{key:"findFittable",value:function(){for(var e=this.unplaced.openStart,t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){var o=t.firstChild;if(t.childCount>1&&(r=0),o.type.spec.isolating&&r<=n){e=n;break}t=o.content}for(var i=1;i<=2;i++)for(var a=1==i?e:this.unplaced.openStart;a>=0;a--)for(var s=null,u=(a?(s=Gt(this.unplaced.content,a-1).firstChild).content:this.unplaced.content).firstChild,l=this.depth;l>=0;l--){var c=this.frontier[l],d=c.type,f=c.match,p=void 0,h=null;if(1==i&&(u?f.matchType(u.type)||(h=f.fillBefore(K.from(u),!1)):s&&d.compatibleContent(s.type)))return{sliceDepth:a,frontierDepth:l,parent:s,inject:h};if(2==i&&u&&(p=f.findWrapping(u.type)))return{sliceDepth:a,frontierDepth:l,parent:s,wrap:p};if(s&&f.matchType(s.type))break}}},{key:"openMore",value:function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,o=Gt(t,n);return!(!o.childCount||o.firstChild.isLeaf||(this.unplaced=new ee(t,n+1,Math.max(r,o.size+n>=t.size-r?n+1:0)),0))}},{key:"dropNode",value:function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,o=Gt(t,n);if(o.childCount<=1&&n>0){var i=t.size-n<=n+o.size;this.unplaced=new ee($t(t,n-1,1),n-1,i?n-1:r)}else this.unplaced=new ee($t(t,n,1),n,r)}},{key:"placeNodes",value:function(e){for(var t=e.sliceDepth,n=e.frontierDepth,r=e.parent,o=e.inject,i=e.wrap;this.depth>n;)this.closeFrontierNode();if(i)for(var a=0;a<i.length;a++)this.openFrontierNode(i[a]);var s=this.unplaced,u=r?r.content:s.content,l=s.openStart-t,c=0,d=[],f=this.frontier[n],p=f.match,h=f.type;if(o){for(var m=0;m<o.childCount;m++)d.push(o.child(m));p=p.matchFragment(o)}for(var v=u.size+t-(s.content.size-s.openEnd);c<u.childCount;){var g=u.child(c),y=p.matchType(g.type);if(!y)break;(++c>1||0==l||g.content.size)&&(p=y,d.push(Wt(g.mark(h.allowedMarks(g.marks)),1==c?l:0,c==u.childCount?v:-1)))}var b=c==u.childCount;b||(v=-1),this.placed=Ut(this.placed,n,K.from(d)),this.frontier[n].match=p,b&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var D=0,w=u;D<v;D++){var C=w.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),w=C.content}this.unplaced=b?0==t?ee.empty:new ee($t(s.content,t-1,1),t-1,v<0?s.openEnd:t-1):new ee($t(s.content,t,c),s.openStart,s.openEnd)}},{key:"mustMoveInline",value:function(){if(!this.$to.parent.isTextblock)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!qt(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r}},{key:"findCloseLevel",value:function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var n=this.frontier[t],r=n.match,o=n.type,i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=qt(e,t,o,r,i);if(a){for(var s=t-1;s>=0;s--){var u=this.frontier[s],l=u.match,c=qt(e,s,u.type,l,!0);if(!c||c.childCount)continue e}return{depth:t,fit:a,move:i?e.doc.resolve(e.after(t+1)):e}}}}},{key:"close",value:function(e){var t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Ut(this.placed,t.depth,t.fit)),e=t.move;for(var n=t.depth+1;n<=e.depth;n++){var r=e.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,o)}return e}},{key:"openFrontierNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=Ut(this.placed,this.depth,K.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}},{key:"closeFrontierNode",value:function(){var e=this.frontier.pop().match.fillBefore(K.empty,!0);e.childCount&&(this.placed=Ut(this.placed,this.frontier.length,e))}}])}();function $t(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy($t(e.firstChild.content,t-1,n)))}function Ut(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Ut(e.lastChild.content,t-1,n)))}function Gt(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function Wt(e,t,n){if(t<=0)return e;var r=e.content;return t>1&&(r=r.replaceChild(0,Wt(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(K.empty,!0)))),e.copy(r)}function qt(e,t,n,r,o){var i=e.node(t),a=o?e.indexAfter(t):e.index(t);if(a==i.childCount&&!n.compatibleContent(i.type))return null;var s=r.fillBefore(i.content,!0,a);return s&&!function(e,t,n){for(var r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,i.content,a)?s:null}function Kt(e,t,n,r,o){if(t<n){var i=e.firstChild;e=e.replaceChild(0,i.copy(Kt(i.content,t+1,n,r,i)))}if(t>r){var a=o.contentMatchAt(0),s=a.fillBefore(e).append(e);e=s.append(a.matchFragment(s).fillBefore(K.empty,!0))}return e}function Zt(e,t){for(var n=[],r=Math.min(e.depth,t.depth);r>=0;r--){var o=e.start(r);if(o<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(o==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==o-1)&&n.push(r)}return n}var Jt=function(e){function t(e,n,r){var o;return st(this,t),(o=tt(this,t)).pos=e,o.attr=n,o.value=r,o}return ot(t,e),lt(t,[{key:"apply",value:function(e){var t=e.nodeAt(this.pos);if(!t)return bt.fail("No node at attribute step's position");var n=Object.create(null);for(var r in t.attrs)n[r]=t.attrs[r];n[this.attr]=this.value;var o=t.type.create(n,null,t.marks);return bt.fromReplace(e,this.pos,this.pos+1,new ee(K.from(o),0,t.isLeaf?0:1))}},{key:"getMap",value:function(){return mt.empty}},{key:"invert",value:function(e){return new t(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}},{key:"map",value:function(e){var n=e.mapResult(this.pos,1);return n.deletedAfter?null:new t(n.pos,this.attr,this.value)}},{key:"toJSON",value:function(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.pos||"string"!=typeof n.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new t(n.pos,n.attr,n.value)}}])}(yt);yt.jsonID("attr",Jt);var Xt=function(e){function t(e,n){var r;return st(this,t),(r=tt(this,t)).attr=e,r.value=n,r}return ot(t,e),lt(t,[{key:"apply",value:function(e){var t=Object.create(null);for(var n in e.attrs)t[n]=e.attrs[n];t[this.attr]=this.value;var r=e.type.create(t,e.content,e.marks);return bt.ok(r)}},{key:"getMap",value:function(){return mt.empty}},{key:"invert",value:function(e){return new t(this.attr,e.attrs[this.attr])}},{key:"map",value:function(e){return this}},{key:"toJSON",value:function(){return{stepType:"docAttr",attr:this.attr,value:this.value}}}],[{key:"fromJSON",value:function(e,n){if("string"!=typeof n.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new t(n.attr,n.value)}}])}(yt);yt.jsonID("docAttr",Xt);var Yt=Error;((Yt=function e(t){var n=Error.call(this,t);return n.__proto__=e.prototype,n}).prototype=Object.create(Error.prototype)).constructor=Yt,Yt.prototype.name="TransformError";var Qt=function(){return lt((function e(t){st(this,e),this.doc=t,this.steps=[],this.docs=[],this.mapping=new vt}),[{key:"before",get:function(){return this.docs.length?this.docs[0]:this.doc}},{key:"step",value:function(e){var t=this.maybeStep(e);if(t.failed)throw new Yt(t.failed);return this}},{key:"maybeStep",value:function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}},{key:"docChanged",get:function(){return this.steps.length>0}},{key:"addStep",value:function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}},{key:"replace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ee.empty,r=Ht(this.doc,e,t,n);return r&&this.step(r),this}},{key:"replaceWith",value:function(e,t,n){return this.replace(e,t,new ee(K.from(n),0,0))}},{key:"delete",value:function(e,t){return this.replace(e,t,ee.empty)}},{key:"insert",value:function(e,t){return this.replaceWith(e,e,t)}},{key:"replaceRange",value:function(e,t,n){return function(e,t,n,r){if(!r.size)return e.deleteRange(t,n);var o=e.doc.resolve(t),i=e.doc.resolve(n);if(Vt(o,i,r))return e.step(new xt(t,n,r));var a=Zt(o,e.doc.resolve(n));0==a[a.length-1]&&a.pop();var s=-(o.depth+1);a.unshift(s);for(var u=o.depth,l=o.pos-1;u>0;u--,l--){var c=o.node(u).type.spec;if(c.defining||c.definingAsContext||c.isolating)break;a.indexOf(u)>-1?s=u:o.before(u)==l&&a.splice(1,0,-u)}for(var d,f=a.indexOf(s),p=[],h=r.openStart,m=r.content,v=0;;v++){var g=m.firstChild;if(p.push(g),v==r.openStart)break;m=g.content}for(var y=h-1;y>=0;y--){var b=p[y],D=(d=b.type).spec.defining||d.spec.definingForContent;if(D&&!b.sameMarkup(o.node(Math.abs(s)-1)))h=y;else if(D||!b.type.isTextblock)break}for(var w=r.openStart;w>=0;w--){var C=(w+h+1)%(r.openStart+1),k=p[C];if(k)for(var E=0;E<a.length;E++){var x=a[(E+f)%a.length],A=!0;x<0&&(A=!1,x=-x);var F=o.node(x-1),S=o.index(x-1);if(F.canReplaceWith(S,S,k.type,k.marks))return e.replace(o.before(x),A?i.after(x):n,new ee(Kt(r.content,0,r.openStart,C),C,r.openEnd))}}for(var M=e.steps.length,B=a.length-1;B>=0&&(e.replace(t,n,r),!(e.steps.length>M));B--){var O=a[B];O<0||(t=o.before(O),n=i.after(O))}}(this,e,t,n),this}},{key:"replaceRangeWith",value:function(e,t,n){return function(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){var o=function(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var a=r.depth-1;a>=0;a--){var s=r.indexAfter(a);if(r.node(a).canReplaceWith(s,s,n))return r.after(a+1);if(s<r.node(a).childCount)return null}return null}(e.doc,t,r.type);null!=o&&(t=n=o)}e.replaceRange(t,n,new ee(K.from(r),0,0))}(this,e,t,n),this}},{key:"deleteRange",value:function(e,t){return function(e,t,n){for(var r=e.doc.resolve(t),o=e.doc.resolve(n),i=Zt(r,o),a=0;a<i.length;a++){var s=i[a],u=a==i.length-1;if(u&&0==s||r.node(s).type.contentMatch.validEnd)return e.delete(r.start(s),o.end(s));if(s>0&&(u||r.node(s-1).canReplace(r.index(s-1),o.indexAfter(s-1))))return e.delete(r.before(s),o.after(s))}for(var l=1;l<=r.depth&&l<=o.depth;l++)if(t-r.start(l)==r.depth-l&&n>r.end(l)&&o.end(l)-n!=o.depth-l&&r.start(l-1)==o.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),o.index(l-1)))return e.delete(r.before(l),n);e.delete(t,n)}(this,e,t),this}},{key:"lift",value:function(e,t){return function(e,t,n){for(var r=t.$from,o=t.$to,i=t.depth,a=r.before(i+1),s=o.after(i+1),u=a,l=s,c=K.empty,d=0,f=i,p=!1;f>n;f--)p||r.index(f)>0?(p=!0,c=K.from(r.node(f).copy(c)),d++):u--;for(var h=K.empty,m=0,v=i,g=!1;v>n;v--)g||o.after(v+1)<o.end(v)?(g=!0,h=K.from(o.node(v).copy(h)),m++):l++;e.step(new At(u,l,a,s,new ee(c.append(h),d,m),c.size-d,!0))}(this,e,t),this}},{key:"join",value:function(e){return function(e,t,n){var r=null,o=e.doc.type.schema.linebreakReplacement,i=e.doc.resolve(t-n),a=i.node().type;if(o&&a.inlineContent){var s="pre"==a.whitespace,u=!!a.contentMatch.matchType(o);s&&!u?r=!1:!s&&u&&(r=!0)}var l=e.steps.length;if(!1===r){var c=e.doc.resolve(t+n);Nt(e,c.node(),c.before(),l)}a.inlineContent&&St(e,t+n-1,a,i.node().contentMatchAt(i.index()),null==r);var d=e.mapping.slice(l),f=d.map(t-n);if(e.step(new xt(f,d.map(t+n,-1),ee.empty,!0)),!0===r){var p=e.doc.resolve(f);Pt(e,p.node(),p.before(),e.steps.length)}}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this}},{key:"wrap",value:function(e,t){return function(e,t,n){for(var r=K.empty,o=n.length-1;o>=0;o--){if(r.size){var i=n[o].type.contentMatch.matchFragment(r);if(!i||!i.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=K.from(n[o].type.create(n[o].attrs,r))}var a=t.start,s=t.end;e.step(new At(a,s,a,s,new ee(r,0,0),n.length,!0))}(this,e,t),this}},{key:"setBlockType",value:function(e){return function(e,t,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=e.steps.length;e.doc.nodesBetween(t,n,(function(t,n){var a="function"==typeof o?o(t):o;if(t.isTextblock&&!t.hasMarkup(r,a)&&function(e,t,n){var r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(e.doc,e.mapping.slice(i).map(n),r)){var s=null;if(r.schema.linebreakReplacement){var u="pre"==r.whitespace,l=!!r.contentMatch.matchType(r.schema.linebreakReplacement);u&&!l?s=!1:!u&&l&&(s=!0)}!1===s&&Nt(e,t,n,i),St(e,e.mapping.slice(i).map(n,1),r,void 0,null===s);var c=e.mapping.slice(i),d=c.map(n,1),f=c.map(n+t.nodeSize,1);return e.step(new At(d,f,d+1,f-1,new ee(K.from(r.create(a,null,t.marks)),0,0),1,!0)),!0===s&&Pt(e,t,n,i),!1}}))}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,arguments.length>2?arguments[2]:void 0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null),this}},{key:"setNodeMarkup",value:function(e,t){return function(e,t,n,r,o){var i=e.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");n||(n=i.type);var a=n.create(r,null,o||i.marks);if(i.isLeaf)return e.replaceWith(t,t+i.nodeSize,a);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new At(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new ee(K.from(a),0,0),1,!0))}(this,e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0),this}},{key:"setNodeAttribute",value:function(e,t,n){return this.step(new Jt(e,t,n)),this}},{key:"setDocAttribute",value:function(e,t){return this.step(new Xt(e,t)),this}},{key:"addNodeMark",value:function(e,t){return this.step(new kt(e,t)),this}},{key:"removeNodeMark",value:function(e,t){var n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(t instanceof Y)t.isInSet(n.marks)&&this.step(new Et(e,t));else{for(var r,o=n.marks,i=[];r=t.isInSet(o);)i.push(new Et(e,r)),o=r.removeFromSet(o);for(var a=i.length-1;a>=0;a--)this.step(i[a])}return this}},{key:"split",value:function(e){return function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=e.doc.resolve(t),i=K.empty,a=K.empty,s=o.depth,u=o.depth-n,l=n-1;s>u;s--,l--){i=K.from(o.node(s).copy(i));var c=r&&r[l];a=K.from(c?c.type.create(c.attrs,a):o.node(s).copy(a))}e.step(new xt(t,t,new ee(i.append(a),n,n),!0))}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2?arguments[2]:void 0),this}},{key:"addMark",value:function(e,t,n){return function(e,t,n,r){var o,i,a=[],s=[];e.doc.nodesBetween(t,n,(function(e,u,l){if(e.isInline){var c=e.marks;if(!r.isInSet(c)&&l.type.allowsMarkType(r.type)){for(var d=Math.max(u,t),f=Math.min(u+e.nodeSize,n),p=r.addToSet(c),h=0;h<c.length;h++)c[h].isInSet(p)||(o&&o.to==d&&o.mark.eq(c[h])?o.to=f:a.push(o=new Ct(d,f,c[h])));i&&i.to==d?i.to=f:s.push(i=new wt(d,f,r))}}})),a.forEach((function(t){return e.step(t)})),s.forEach((function(t){return e.step(t)}))}(this,e,t,n),this}},{key:"removeMark",value:function(e,t,n){return function(e,t,n,r){var o=[],i=0;e.doc.nodesBetween(t,n,(function(e,a){if(e.isInline){i++;var s=null;if(r instanceof Ie)for(var u,l=e.marks;u=r.isInSet(l);)(s||(s=[])).push(u),l=u.removeFromSet(l);else r?r.isInSet(e.marks)&&(s=[r]):s=e.marks;if(s&&s.length)for(var c=Math.min(a+e.nodeSize,n),d=0;d<s.length;d++){for(var f=s[d],p=void 0,h=0;h<o.length;h++){var m=o[h];m.step==i-1&&f.eq(o[h].style)&&(p=m)}p?(p.to=c,p.step=i):o.push({style:f,from:Math.max(a,t),to:c,step:i})}}})),o.forEach((function(t){return e.step(new Ct(t.from,t.to,t.style))}))}(this,e,t,n),this}},{key:"clearIncompatible",value:function(e,t,n){return St(this,e,t,n),this}}])}();function en(e,t,n){return t=on(t),function(e,t){if(t&&("object"==un(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,tn()?Reflect.construct(t,n||[],on(e).constructor):t.apply(e,n))}function tn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tn=function(){return!!e})()}function nn(e,t,n,r){var o=rn(on(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function rn(){return rn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=on(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},rn.apply(null,arguments)}function on(e){return on=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},on(e)}function an(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sn(e,t)}function sn(e,t){return sn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sn(e,t)}function un(e){return un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un(e)}function ln(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fn(r.key),r)}}function dn(e,t,n){return t&&cn(e.prototype,t),n&&cn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function fn(e){var t=function(e){if("object"!=un(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=un(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==un(t)?t:t+""}var pn=Object.create(null),hn=function(){return dn((function e(t,n,r){ln(this,e),this.$anchor=t,this.$head=n,this.ranges=r||[new mn(t.min(n),t.max(n))]}),[{key:"anchor",get:function(){return this.$anchor.pos}},{key:"head",get:function(){return this.$head.pos}},{key:"from",get:function(){return this.$from.pos}},{key:"to",get:function(){return this.$to.pos}},{key:"$from",get:function(){return this.ranges[0].$from}},{key:"$to",get:function(){return this.ranges[0].$to}},{key:"empty",get:function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}},{key:"content",value:function(){return this.$from.doc.slice(this.from,this.to,!0)}},{key:"replace",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ee.empty,n=t.content.lastChild,r=null,o=0;o<t.openEnd;o++)r=n,n=n.lastChild;for(var i=e.steps.length,a=this.ranges,s=0;s<a.length;s++){var u=a[s],l=u.$from,c=u.$to,d=e.mapping.slice(i);e.replaceRange(d.map(l.pos),d.map(c.pos),s?ee.empty:t),0==s&&xn(e,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}}},{key:"replaceWith",value:function(e,t){for(var n=e.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],a=i.$from,s=i.$to,u=e.mapping.slice(n),l=u.map(a.pos),c=u.map(s.pos);o?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),xn(e,n,t.isInline?-1:1))}}},{key:"getBookmark",value:function(){return yn.between(this.$anchor,this.$head).getBookmark()}}],[{key:"findFrom",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.parent.inlineContent?new yn(e):En(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(var o=e.depth-1;o>=0;o--){var i=t<0?En(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):En(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(i)return i}return null}},{key:"near",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.findFrom(e,t)||this.findFrom(e,-t)||new Cn(e.node(0))}},{key:"atStart",value:function(e){return En(e,e,0,0,1)||new Cn(e)}},{key:"atEnd",value:function(e){return En(e,e,e.content.size,e.childCount,-1)||new Cn(e)}},{key:"fromJSON",value:function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=pn[t.type];if(!n)throw new RangeError("No selection type ".concat(t.type," defined"));return n.fromJSON(e,t)}},{key:"jsonID",value:function(e,t){if(e in pn)throw new RangeError("Duplicate use of selection JSON ID "+e);return pn[e]=t,t.prototype.jsonID=e,t}}])}();hn.prototype.visible=!0;var mn=dn((function e(t,n){ln(this,e),this.$from=t,this.$to=n})),vn=!1;function gn(e){vn||e.parent.inlineContent||(vn=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}var yn=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return ln(this,t),gn(e),gn(n),en(this,t,[e,n])}return an(t,e),dn(t,[{key:"$cursor",get:function(){return this.$anchor.pos==this.$head.pos?this.$head:null}},{key:"map",value:function(e,n){var r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return hn.near(r);var o=e.resolve(n.map(this.anchor));return new t(o.parent.inlineContent?o:r,r)}},{key:"replace",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ee.empty;if(nn(t,"replace",this,3)([e,n]),n==ee.empty){var r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}},{key:"eq",value:function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head}},{key:"getBookmark",value:function(){return new bn(this.anchor,this.head)}},{key:"toJSON",value:function(){return{type:"text",anchor:this.anchor,head:this.head}}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))}},{key:"create",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}},{key:"between",value:function(e,n,r){var o=e.pos-n.pos;if(r&&!o||(r=o>=0?1:-1),!n.parent.inlineContent){var i=hn.findFrom(n,r,!0)||hn.findFrom(n,-r,!0);if(!i)return hn.near(n,r);n=i.$head}return e.parent.inlineContent||(0==o||(e=(hn.findFrom(e,-r,!0)||hn.findFrom(e,r,!0)).$anchor).pos<n.pos!=o<0)&&(e=n),new t(e,n)}}])}(hn);hn.jsonID("text",yn);var bn=function(){function e(t,n){ln(this,e),this.anchor=t,this.head=n}return dn(e,[{key:"map",value:function(t){return new e(t.map(this.anchor),t.map(this.head))}},{key:"resolve",value:function(e){return yn.between(e.resolve(this.anchor),e.resolve(this.head))}}])}(),Dn=function(e){function t(e){var n;ln(this,t);var r=e.nodeAfter,o=e.node(0).resolve(e.pos+r.nodeSize);return(n=en(this,t,[e,o])).node=r,n}return an(t,e),dn(t,[{key:"map",value:function(e,n){var r=n.mapResult(this.anchor),o=r.deleted,i=r.pos,a=e.resolve(i);return o?hn.near(a):new t(a)}},{key:"content",value:function(){return new ee(K.from(this.node),0,0)}},{key:"eq",value:function(e){return e instanceof t&&e.anchor==this.anchor}},{key:"toJSON",value:function(){return{type:"node",anchor:this.anchor}}},{key:"getBookmark",value:function(){return new wn(this.anchor)}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))}},{key:"create",value:function(e,n){return new t(e.resolve(n))}},{key:"isSelectable",value:function(e){return!e.isText&&!1!==e.type.spec.selectable}}])}(hn);Dn.prototype.visible=!1,hn.jsonID("node",Dn);var wn=function(){function e(t){ln(this,e),this.anchor=t}return dn(e,[{key:"map",value:function(t){var n=t.mapResult(this.anchor),r=n.deleted,o=n.pos;return r?new bn(o,o):new e(o)}},{key:"resolve",value:function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&Dn.isSelectable(n)?new Dn(t):hn.near(t)}}])}(),Cn=function(e){function t(e){return ln(this,t),en(this,t,[e.resolve(0),e.resolve(e.content.size)])}return an(t,e),dn(t,[{key:"replace",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ee.empty;if(n==ee.empty){e.delete(0,e.doc.content.size);var r=hn.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else nn(t,"replace",this,3)([e,n])}},{key:"toJSON",value:function(){return{type:"all"}}},{key:"map",value:function(e){return new t(e)}},{key:"eq",value:function(e){return e instanceof t}},{key:"getBookmark",value:function(){return kn}}],[{key:"fromJSON",value:function(e){return new t(e)}}])}(hn);hn.jsonID("all",Cn);var kn={map:function(){return this},resolve:function(e){return new Cn(e)}};function En(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(t.inlineContent)return yn.create(e,n);for(var a=r-(o>0?0:1);o>0?a<t.childCount:a>=0;a+=o){var s=t.child(a);if(s.isAtom){if(!i&&Dn.isSelectable(s))return Dn.create(e,n-(o<0?s.nodeSize:0))}else{var u=En(e,s,n+o,o<0?s.childCount:0,o,i);if(u)return u}n+=s.nodeSize*o}return null}function xn(e,t,n){var r=e.steps.length-1;if(!(r<t)){var o,i=e.steps[r];(i instanceof xt||i instanceof At)&&(e.mapping.maps[r].forEach((function(e,t,n,r){null==o&&(o=r)})),e.setSelection(hn.near(e.doc.resolve(o),n)))}}var An=function(e){function t(e){var n;return ln(this,t),(n=en(this,t,[e.doc])).curSelectionFor=0,n.updated=0,n.meta=Object.create(null),n.time=Date.now(),n.curSelection=e.selection,n.storedMarks=e.storedMarks,n}return an(t,e),dn(t,[{key:"selection",get:function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}},{key:"setSelection",value:function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&this.updated|1,this.storedMarks=null,this}},{key:"selectionSet",get:function(){return(1&this.updated)>0}},{key:"setStoredMarks",value:function(e){return this.storedMarks=e,this.updated|=2,this}},{key:"ensureMarks",value:function(e){return Y.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}},{key:"addStoredMark",value:function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}},{key:"removeStoredMark",value:function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}},{key:"storedMarksSet",get:function(){return(2&this.updated)>0}},{key:"addStep",value:function(e,n){nn(t,"addStep",this,3)([e,n]),this.updated=-3&this.updated,this.storedMarks=null}},{key:"setTime",value:function(e){return this.time=e,this}},{key:"replaceSelection",value:function(e){return this.selection.replace(this,e),this}},{key:"replaceSelectionWith",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Y.none))),n.replaceWith(this,e),this}},{key:"deleteSelection",value:function(){return this.selection.replace(this),this}},{key:"insertText",value:function(e,t,n){var r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(t);o=n==t?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,o)),this.selection.empty||this.setSelection(hn.near(this.selection.$to)),this}},{key:"setMeta",value:function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}},{key:"getMeta",value:function(e){return this.meta["string"==typeof e?e:e.key]}},{key:"isGeneric",get:function(){for(var e in this.meta)return!1;return!0}},{key:"scrollIntoView",value:function(){return this.updated|=4,this}},{key:"scrolledIntoView",get:function(){return(4&this.updated)>0}}])}(Qt);function Fn(e,t){return t&&e?e.bind(t):e}var Sn=dn((function e(t,n,r){ln(this,e),this.name=t,this.init=Fn(n.init,r),this.apply=Fn(n.apply,r)})),Mn=[new Sn("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new Sn("selection",{init:function(e,t){return e.selection||hn.atStart(t.doc)},apply:function(e){return e.selection}}),new Sn("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new Sn("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],Bn=dn((function e(t,n){var r=this;ln(this,e),this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Mn.slice(),n&&n.forEach((function(e){if(r.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");r.plugins.push(e),r.pluginsByKey[e.key]=e,e.spec.state&&r.fields.push(new Sn(e.key,e.spec.state,e))}))})),On=function(){function e(t){ln(this,e),this.config=t}return dn(e,[{key:"schema",get:function(){return this.config.schema}},{key:"plugins",get:function(){return this.config.plugins}},{key:"apply",value:function(e){return this.applyTransaction(e).state}},{key:"filterTransaction",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=0;n<this.config.plugins.length;n++)if(n!=t){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0}},{key:"applyTransaction",value:function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var a=this.config.plugins[i];if(a.spec.appendTransaction){var s=r?r[i].n:0,u=r?r[i].state:this,l=s<t.length&&a.spec.appendTransaction.call(a,s?t.slice(s):t,u,n);if(l&&n.filterTransaction(l,i)){if(l.setMeta("appendedTransaction",e),!r){r=[];for(var c=0;c<this.config.plugins.length;c++)r.push(c<i?{state:n,n:t.length}:{state:this,n:0})}t.push(l),n=n.applyInner(l),o=!0}r&&(r[i]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}}},{key:"applyInner",value:function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var n=new e(this.config),r=this.config.fields,o=0;o<r.length;o++){var i=r[o];n[i.name]=i.apply(t,this[i.name],this,n)}return n}},{key:"tr",get:function(){return new An(this)}},{key:"reconfigure",value:function(t){for(var n=new Bn(this.schema,t.plugins),r=n.fields,o=new e(n),i=0;i<r.length;i++){var a=r[i].name;o[a]=this.hasOwnProperty(a)?this[a]:r[i].init(t,o)}return o}},{key:"toJSON",value:function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==un(e))for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=e[n],o=r.spec.state;o&&o.toJSON&&(t[n]=o.toJSON.call(r,this[r.key]))}return t}}],[{key:"create",value:function(t){for(var n=new Bn(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new e(n),o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(t,r);return r}},{key:"fromJSON",value:function(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var o=new Bn(t.schema,t.plugins),i=new e(o);return o.fields.forEach((function(e){if("doc"==e.name)i.doc=ye.fromJSON(t.schema,n.doc);else if("selection"==e.name)i.selection=hn.fromJSON(i.doc,n.selection);else if("storedMarks"==e.name)n.storedMarks&&(i.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(var o in r){var a=r[o],s=a.spec.state;if(a.key==e.name&&s&&s.fromJSON&&Object.prototype.hasOwnProperty.call(n,o))return void(i[e.name]=s.fromJSON.call(a,t,n[o],i))}i[e.name]=e.init(t,i)}})),i}}])}();function Tn(e,t,n){for(var r in e){var o=e[r];o instanceof Function?o=o.bind(t):"handleDOMEvents"==r&&(o=Tn(o,t,{})),n[r]=o}return n}var Pn=function(){return dn((function e(t){ln(this,e),this.spec=t,this.props={},t.props&&Tn(t.props,this,this.props),this.key=t.key?t.key.key:_n("plugin")}),[{key:"getState",value:function(e){return e[this.key]}}])}(),Nn=Object.create(null);function _n(e){return e in Nn?e+"$"+ ++Nn[e]:(Nn[e]=0,e+"$")}var jn=function(){return dn((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"key";ln(this,e),this.key=_n(t)}),[{key:"get",value:function(e){return e.config.pluginsByKey[this.key]}},{key:"getState",value:function(e){return e[this.key]}}])}();function In(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||Ln(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ln(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Ln(e,t){if(e){if("string"==typeof e)return Hn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hn(e,t):void 0}}function Hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Vn(e,t,n){return t=Gn(t),function(e,t){if(t&&("object"==Kn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,zn()?Reflect.construct(t,n||[],Gn(e).constructor):t.apply(e,n))}function zn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zn=function(){return!!e})()}function $n(e,t,n,r){var o=Un(Gn(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function Un(){return Un="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Gn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Un.apply(null,arguments)}function Gn(e){return Gn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gn(e)}function Wn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qn(e,t)}function qn(e,t){return qn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qn(e,t)}function Kn(e){return Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kn(e)}function Zn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yn(r.key),r)}}function Xn(e,t,n){return t&&Jn(e.prototype,t),n&&Jn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yn(e){var t=function(e){if("object"!=Kn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Kn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Kn(t)?t:t+""}var Qn=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},er=function(e){var t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},tr=null,nr=function(e,t,n){var r=tr||(tr=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},rr=function(e,t,n,r){return n&&(ir(e,t,n,r,-1)||ir(e,t,n,r,1))},or=/^(img|br|input|textarea|hr)$/i;function ir(e,t,n,r,o){for(var i;;){if(e==n&&t==r)return!0;if(t==(o<0?0:ar(e))){var a=e.parentNode;if(!a||1!=a.nodeType||sr(e)||or.test(e.nodeName)||"false"==e.contentEditable)return!1;t=Qn(e)+(o<0?0:1),e=a}else{if(1!=e.nodeType)return!1;var s=e.childNodes[t+(o<0?-1:0)];if(1==s.nodeType&&"false"==s.contentEditable){if(!(null===(i=s.pmViewDesc)||void 0===i?void 0:i.ignoreForSelection))return!1;t+=o}else e=s,t=o<0?ar(e):0}}}function ar(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function sr(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var ur=function(e){return e.focusNode&&rr(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function lr(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}var cr="undefined"!=typeof navigator?navigator:null,dr="undefined"!=typeof document?document:null,fr=cr&&cr.userAgent||"",pr=/Edge\/(\d+)/.exec(fr),hr=/MSIE \d/.exec(fr),mr=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(fr),vr=!!(hr||mr||pr),gr=hr?document.documentMode:mr?+mr[1]:pr?+pr[1]:0,yr=!vr&&/gecko\/(\d+)/i.test(fr);yr&&(/Firefox\/(\d+)/.exec(fr)||[0,0])[1];var br=!vr&&/Chrome\/(\d+)/.exec(fr),Dr=!!br,wr=br?+br[1]:0,Cr=!vr&&!!cr&&/Apple Computer/.test(cr.vendor),kr=Cr&&(/Mobile\/\w+/.test(fr)||!!cr&&cr.maxTouchPoints>2),Er=kr||!!cr&&/Mac/.test(cr.platform),xr=!!cr&&/Win/.test(cr.platform),Ar=/Android \d/.test(fr),Fr=!!dr&&"webkitFontSmoothing"in dr.documentElement.style,Sr=Fr?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Mr(e){var t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Br(e,t){return"number"==typeof e?e:e[t]}function Or(e){var t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function Tr(e,t,n){for(var r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument,a=n||e.dom;a;)if(1==a.nodeType){var s=a,u=s==i.body,l=u?Mr(i):Or(s),c=0,d=0;if(t.top<l.top+Br(r,"top")?d=-(l.top-t.top+Br(o,"top")):t.bottom>l.bottom-Br(r,"bottom")&&(d=t.bottom-t.top>l.bottom-l.top?t.top+Br(o,"top")-l.top:t.bottom-l.bottom+Br(o,"bottom")),t.left<l.left+Br(r,"left")?c=-(l.left-t.left+Br(o,"left")):t.right>l.right-Br(r,"right")&&(c=t.right-l.right+Br(o,"right")),c||d)if(u)i.defaultView.scrollBy(c,d);else{var f=s.scrollLeft,p=s.scrollTop;d&&(s.scrollTop+=d),c&&(s.scrollLeft+=c);var h=s.scrollLeft-f,m=s.scrollTop-p;t={left:t.left-h,top:t.top-m,right:t.right-h,bottom:t.bottom-m}}var v=u?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(v))break;a="absolute"==v?a.offsetParent:er(a)}else a=er(a)}function Pr(e){for(var t=[],n=e.ownerDocument,r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=er(r));return t}function Nr(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=r.dom,i=r.top,a=r.left;o.scrollTop!=i+t&&(o.scrollTop=i+t),o.scrollLeft!=a&&(o.scrollLeft=a)}}var _r=null;function jr(e,t){for(var n,r,o,i,a=2e8,s=0,u=t.top,l=t.top,c=e.firstChild,d=0;c;c=c.nextSibling,d++){var f=void 0;if(1==c.nodeType)f=c.getClientRects();else{if(3!=c.nodeType)continue;f=nr(c).getClientRects()}for(var p=0;p<f.length;p++){var h=f[p];if(h.top<=u&&h.bottom>=l){u=Math.max(h.bottom,u),l=Math.min(h.top,l);var m=h.left>t.left?h.left-t.left:h.right<t.left?t.left-h.right:0;if(m<a){n=c,a=m,r=m&&3==n.nodeType?{left:h.right<t.left?h.right:h.left,top:t.top}:t,1==c.nodeType&&m&&(s=d+(t.left>=(h.left+h.right)/2?1:0));continue}}else h.top>t.top&&!o&&h.left<=t.left&&h.right>=t.left&&(o=c,i={left:Math.max(h.left,Math.min(h.right,t.left)),top:h.top});!n&&(t.left>=h.right&&t.top>=h.top||t.left>=h.left&&t.top>=h.bottom)&&(s=d+1)}}return!n&&o&&(n=o,r=i,a=0),n&&3==n.nodeType?function(e,t){for(var n=e.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);var i=Vr(r,1);if(i.top!=i.bottom&&Ir(t,i))return{node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||a&&1==n.nodeType?{node:e,offset:s}:jr(n,r)}function Ir(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function Rr(e,t,n){var r=e.childNodes.length;if(r&&n.top<n.bottom)for(var o=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),i=o;;){var a=e.childNodes[i];if(1==a.nodeType)for(var s=a.getClientRects(),u=0;u<s.length;u++){var l=s[u];if(Ir(t,l))return Rr(a,t,l)}if((i=(i+1)%r)==o)break}return e}function Lr(e,t){var n,r=e.dom.ownerDocument,o=0,i=function(e,t,n){if(e.caretPositionFromPoint)try{var r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(ar(r.offsetNode),r.offset)}}catch(e){}if(e.caretRangeFromPoint){var o=e.caretRangeFromPoint(t,n);if(o)return{node:o.startContainer,offset:Math.min(ar(o.startContainer),o.startOffset)}}}(r,t.left,t.top);i&&(n=i.node,o=i.offset);var a,s=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top);if(!s||!e.dom.contains(1!=s.nodeType?s.parentNode:s)){var u=e.dom.getBoundingClientRect();if(!Ir(t,u))return null;if(!(s=Rr(e.dom,t,u)))return null}if(Cr)for(var l=s;n&&l;l=er(l))l.draggable&&(n=void 0);if(s=function(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(s,t),n){if(yr&&1==n.nodeType&&(o=Math.min(o,n.childNodes.length))<n.childNodes.length){var c,d=n.childNodes[o];"IMG"==d.nodeName&&(c=d.getBoundingClientRect()).right<=t.left&&c.bottom>t.top&&o++}var f;Fr&&o&&1==n.nodeType&&1==(f=n.childNodes[o-1]).nodeType&&"false"==f.contentEditable&&f.getBoundingClientRect().top>=t.top&&o--,n==e.dom&&o==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:0!=o&&1==n.nodeType&&"BR"==n.childNodes[o-1].nodeName||(a=function(e,t,n,r){for(var o=-1,i=t,a=!1;i!=e.dom;){var s=e.docView.nearestDesc(i,!0),u=void 0;if(!s)return null;if(1==s.dom.nodeType&&(s.node.isBlock&&s.parent||!s.contentDOM)&&((u=s.dom.getBoundingClientRect()).width||u.height)&&(s.node.isBlock&&s.parent&&(!a&&u.left>r.left||u.top>r.top?o=s.posBefore:(!a&&u.right<r.left||u.bottom<r.top)&&(o=s.posAfter),a=!0),!s.contentDOM&&o<0&&!s.node.isText))return(s.node.isBlock?r.top<(u.top+u.bottom)/2:r.left<(u.left+u.right)/2)?s.posBefore:s.posAfter;i=s.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n,-1)}(e,n,o,t))}null==a&&(a=function(e,t,n){var r=jr(t,n),o=r.node,i=r.offset,a=-1;if(1==o.nodeType&&!o.firstChild){var s=o.getBoundingClientRect();a=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(o,i,a)}(e,s,t));var p=e.docView.nearestDesc(s,!0);return{pos:a,inside:p?p.posAtStart-p.border:-1}}function Hr(e){return e.top<e.bottom||e.left<e.right}function Vr(e,t){var n=e.getClientRects();if(n.length){var r=n[t<0?0:n.length-1];if(Hr(r))return r}return Array.prototype.find.call(n,Hr)||e.getBoundingClientRect()}var zr=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function $r(e,t,n){var r=e.docView.domFromPos(t,n<0?-1:1),o=r.node,i=r.offset,a=r.atom,s=Fr||yr;if(3==o.nodeType){if(!s||!zr.test(o.nodeValue)&&(n<0?i:i!=o.nodeValue.length)){var u=i,l=i,c=n<0?1:-1;return n<0&&!i?(l++,c=-1):n>=0&&i==o.nodeValue.length?(u--,c=1):n<0?u--:l++,Ur(Vr(nr(o,u,l),c),c<0)}var d=Vr(nr(o,i,i),n);if(yr&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){var f=Vr(nr(o,i-1,i-1),-1);if(f.top==d.top){var p=Vr(nr(o,i,i+1),-1);if(p.top!=d.top)return Ur(p,p.left<f.left)}}return d}if(!e.state.doc.resolve(t-(a||0)).parent.inlineContent){if(null==a&&i&&(n<0||i==ar(o))){var h=o.childNodes[i-1];if(1==h.nodeType)return Gr(h.getBoundingClientRect(),!1)}if(null==a&&i<ar(o)){var m=o.childNodes[i];if(1==m.nodeType)return Gr(m.getBoundingClientRect(),!0)}return Gr(o.getBoundingClientRect(),n>=0)}if(null==a&&i&&(n<0||i==ar(o))){var v=o.childNodes[i-1],g=3==v.nodeType?nr(v,ar(v)-(s?0:1)):1!=v.nodeType||"BR"==v.nodeName&&v.nextSibling?null:v;if(g)return Ur(Vr(g,1),!1)}if(null==a&&i<ar(o)){for(var y=o.childNodes[i];y.pmViewDesc&&y.pmViewDesc.ignoreForCoords;)y=y.nextSibling;var b=y?3==y.nodeType?nr(y,0,s?0:1):1==y.nodeType?y:null:null;if(b)return Ur(Vr(b,-1),!0)}return Ur(Vr(3==o.nodeType?nr(o):o,-n),n>=0)}function Ur(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function Gr(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function Wr(e,t,n){var r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}var qr=/[\u0590-\u08ac]/,Kr=null,Zr=null,Jr=!1;var Xr=function(){return Xn((function e(t,n,r,o){Zn(this,e),this.parent=t,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=0,r.pmViewDesc=this}),[{key:"matchesWidget",value:function(e){return!1}},{key:"matchesMark",value:function(e){return!1}},{key:"matchesNode",value:function(e,t,n){return!1}},{key:"matchesHack",value:function(e){return!1}},{key:"parseRule",value:function(){return null}},{key:"stopEvent",value:function(e){return!1}},{key:"size",get:function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e}},{key:"border",get:function(){return 0}},{key:"destroy",value:function(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(var e=0;e<this.children.length;e++)this.children[e].destroy()}},{key:"posBeforeChild",value:function(e){for(var t=0,n=this.posAtStart;;t++){var r=this.children[t];if(r==e)return n;n+=r.size}}},{key:"posBefore",get:function(){return this.parent.posBeforeChild(this)}},{key:"posAtStart",get:function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}},{key:"posAfter",get:function(){return this.posBefore+this.size}},{key:"posAtEnd",get:function(){return this.posAtStart+this.size-2*this.border}},{key:"localPosFromDOM",value:function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var r,o;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&(!(o=r.pmViewDesc)||o.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,a;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&(!(a=i.pmViewDesc)||a.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(a):this.posAtEnd}var s;if(e==this.dom&&this.contentDOM)s=t>Qn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var u=e;;u=u.parentNode){if(u==this.dom){s=!1;break}if(u.previousSibling)break}if(null==s&&t==e.childNodes.length)for(var l=e;;l=l.parentNode){if(l==this.dom){s=!0;break}if(l.nextSibling)break}}return(null==s?n>0:s)?this.posAtEnd:this.posAtStart}},{key:"nearestDesc",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!0,r=e;r;r=r.parentNode){var o=this.getDesc(r),i=void 0;if(o&&(!t||o.node)){if(!n||!(i=o.nodeDOM)||(1==i.nodeType?i.contains(1==e.nodeType?e:e.parentNode):i==e))return o;n=!1}}}},{key:"getDesc",value:function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t}},{key:"posFromDOM",value:function(e,t,n){for(var r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}return-1}},{key:"descAt",value:function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],o=n+r.size;if(n==e&&o!=n){for(;!r.border&&r.children.length;)for(var i=0;i<r.children.length;i++){var a=r.children[i];if(a.size){r=a;break}}return r}if(e<o)return r.descAt(e-n-r.border);n=o}}},{key:"domFromPos",value:function(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};for(var n,r=0,o=0,i=0;r<this.children.length;r++){var a=this.children[r],s=i+a.size;if(s>e||a instanceof oo){o=e-i;break}i=s}if(o)return this.children[r].domFromPos(o-this.children[r].border,t);for(;r&&!(n=this.children[r-1]).size&&n instanceof Yr&&n.side>=0;r--);if(t<=0){for(var u,l=!0;(u=r?this.children[r-1]:null)&&u.dom.parentNode!=this.contentDOM;r--,l=!1);return u&&t&&l&&!u.border&&!u.domAtom?u.domFromPos(u.size,t):{node:this.contentDOM,offset:u?Qn(u.dom)+1:0}}for(var c,d=!0;(c=r<this.children.length?this.children[r]:null)&&c.dom.parentNode!=this.contentDOM;r++,d=!1);return c&&d&&!c.border&&!c.domAtom?c.domFromPos(0,t):{node:this.contentDOM,offset:c?Qn(c.dom):this.contentDOM.childNodes.length}}},{key:"parseRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,a=0;;a++){var s=this.children[a],u=i+s.size;if(-1==r&&e<=u){var l=i+s.border;if(e>=l&&t<=u-s.border&&s.node&&s.contentDOM&&this.contentDOM.contains(s.contentDOM))return s.parseRange(e,t,l);e=i;for(var c=a;c>0;c--){var d=this.children[c-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){r=Qn(d.dom)+1;break}e-=d.size}-1==r&&(r=0)}if(r>-1&&(u>t||a==this.children.length-1)){t=u;for(var f=a+1;f<this.children.length;f++){var p=this.children[f];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){o=Qn(p.dom);break}t+=p.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=u}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}}},{key:"emptyChildAt",value:function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}},{key:"domAfterPos",value:function(e){var t=this.domFromPos(e,0),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}},{key:"setSelection",value:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=Math.min(e,t),i=Math.max(e,t),a=0,s=0;a<this.children.length;a++){var u=this.children[a],l=s+u.size;if(o>s&&i<l)return u.setSelection(e-s-u.border,t-s-u.border,n,r);s=l}var c=this.domFromPos(e,e?-1:1),d=t==e?c:this.domFromPos(t,t?-1:1),f=n.root.getSelection(),p=n.domSelectionRange(),h=!1;if((yr||Cr)&&e==t){var m=c,v=m.node,g=m.offset;if(3==v.nodeType){if((h=!(!g||"\n"!=v.nodeValue[g-1]))&&g==v.nodeValue.length)for(var y,b=v;b;b=b.parentNode){if(y=b.nextSibling){"BR"==y.nodeName&&(c=d={node:y.parentNode,offset:Qn(y)+1});break}var D=b.pmViewDesc;if(D&&D.node&&D.node.isBlock)break}}else{var w=v.childNodes[g-1];h=w&&("BR"==w.nodeName||"false"==w.contentEditable)}}if(yr&&p.focusNode&&p.focusNode!=d.node&&1==p.focusNode.nodeType){var C=p.focusNode.childNodes[p.focusOffset];C&&"false"==C.contentEditable&&(r=!0)}if(r||h&&Cr||!rr(c.node,c.offset,p.anchorNode,p.anchorOffset)||!rr(d.node,d.offset,p.focusNode,p.focusOffset)){var k=!1;if((f.extend||e==t)&&!h){f.collapse(c.node,c.offset);try{e!=t&&f.extend(d.node,d.offset),k=!0}catch(e){}}if(!k){if(e>t){var E=c;c=d,d=E}var x=document.createRange();x.setEnd(d.node,d.offset),x.setStart(c.node,c.offset),f.removeAllRanges(),f.addRange(x)}}}},{key:"ignoreMutation",value:function(e){return!this.contentDOM&&"selection"!=e.type}},{key:"contentLost",get:function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}},{key:"markDirty",value:function(e,t){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?e<=i&&t>=n:e<i&&t>n){var a=n+o.border,s=i-o.border;if(e>=a&&t<=s)return this.dirty=e==n||t==i?2:1,void(e!=a||t!=s||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(e-a,t-a):o.dirty=3);o.dirty=o.dom!=o.contentDOM||o.dom.parentNode!=this.contentDOM||o.children.length?3:2}n=i}this.dirty=2}},{key:"markParentsDirty",value:function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}},{key:"domAtom",get:function(){return!1}},{key:"ignoreForCoords",get:function(){return!1}},{key:"ignoreForSelection",get:function(){return!1}},{key:"isText",value:function(e){return!1}}])}(),Yr=function(e){function t(e,n,r,o){var i;Zn(this,t);var a,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return a?a.parent?a.parent.posBeforeChild(a):void 0:o}))),!n.type.spec.raw){if(1!=s.nodeType){var u=document.createElement("span");u.appendChild(s),s=u}s.contentEditable="false",s.classList.add("ProseMirror-widget")}return(i=Vn(this,t,[e,[],s,null])).widget=n,i.widget=n,a=i,i}return Wn(t,e),Xn(t,[{key:"matchesWidget",value:function(e){return 0==this.dirty&&e.type.eq(this.widget.type)}},{key:"parseRule",value:function(){return{ignore:!0}}},{key:"stopEvent",value:function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)}},{key:"ignoreMutation",value:function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}},{key:"destroy",value:function(){this.widget.type.destroy(this.dom),$n(t,"destroy",this,3)([])}},{key:"domAtom",get:function(){return!0}},{key:"ignoreForSelection",get:function(){return!!this.widget.type.spec.relaxedSide}},{key:"side",get:function(){return this.widget.type.side}}])}(Xr),Qr=function(e){function t(e,n,r,o){var i;return Zn(this,t),(i=Vn(this,t,[e,[],n,null])).textDOM=r,i.text=o,i}return Wn(t,e),Xn(t,[{key:"size",get:function(){return this.text.length}},{key:"localPosFromDOM",value:function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}},{key:"domFromPos",value:function(e){return{node:this.textDOM,offset:e}}},{key:"ignoreMutation",value:function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}])}(Xr),eo=function(e){function t(e,n,r,o,i){var a;return Zn(this,t),(a=Vn(this,t,[e,[],r,o])).mark=n,a.spec=i,a}return Wn(t,e),Xn(t,[{key:"parseRule",value:function(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}},{key:"matchesMark",value:function(e){return 3!=this.dirty&&this.mark.eq(e)}},{key:"markDirty",value:function(e,n){if($n(t,"markDirty",this,3)([e,n]),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}}},{key:"slice",value:function(e,n,r){var o=t.create(this.parent,this.mark,!0,r),i=this.children,a=this.size;n<a&&(i=yo(i,n,a,r)),e>0&&(i=yo(i,0,e,r));for(var s=0;s<i.length;s++)i[s].parent=o;return o.children=i,o}},{key:"ignoreMutation",value:function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):$n(t,"ignoreMutation",this,3)([e])}},{key:"destroy",value:function(){this.spec.destroy&&this.spec.destroy(),$n(t,"destroy",this,3)([])}}],[{key:"create",value:function(e,n,r,o){var i=o.nodeViews[n.type.name],a=i&&i(n,o,r);return a&&a.dom||(a=Je.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new t(e,n,a.dom,a.contentDOM||a.dom,a)}}])}(Xr),to=function(e){function t(e,n,r,o,i,a,s,u,l){var c;return Zn(this,t),(c=Vn(this,t,[e,[],i,a])).node=n,c.outerDeco=r,c.innerDeco=o,c.nodeDOM=s,c}return Wn(t,e),Xn(t,[{key:"parseRule",value:function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(t.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(var n=this.children.length-1;n>=0;n--){var r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=function(){return K.empty})}else t.contentElement=this.contentDOM;else t.getContent=function(){return e.node.content};return t}},{key:"matchesNode",value:function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&ho(t,this.outerDeco)&&n.eq(this.innerDeco)}},{key:"size",get:function(){return this.node.nodeSize}},{key:"border",get:function(){return this.node.isLeaf?0:1}},{key:"updateChildren",value:function(e,t){var n=this,r=this.node.inlineContent,o=t,i=e.composing?this.localCompositionInfo(e,t):null,a=i&&i.pos>-1?i:null,s=i&&i.pos<0,u=new vo(this,a&&a.node,e);!function(e,t,n,r){var o=t.locals(e),i=0;if(0!=o.length)for(var a=0,s=[],u=null,l=0;;){for(var c=void 0,d=void 0;a<o.length&&o[a].to==i;){var f=o[a++];f.widget&&(c?(d||(d=[c])).push(f):c=f)}if(c)if(d){d.sort(go);for(var p=0;p<d.length;p++)n(d[p],l,!!u)}else n(c,l,!!u);var h=void 0,m=void 0;if(u)m=-1,h=u,u=null;else{if(!(l<e.childCount))break;m=l,h=e.child(l++)}for(var v=0;v<s.length;v++)s[v].to<=i&&s.splice(v--,1);for(;a<o.length&&o[a].from<=i&&o[a].to>i;)s.push(o[a++]);var g=i+h.nodeSize;if(h.isText){var y=g;a<o.length&&o[a].from<y&&(y=o[a].from);for(var b=0;b<s.length;b++)s[b].to<y&&(y=s[b].to);y<g&&(u=h.cut(y-i),h=h.cut(0,y-i),g=y,m=-1)}else for(;a<o.length&&o[a].to<g;)a++;r(h,h.isInline&&!h.isLeaf?s.filter((function(e){return!e.inline})):s.slice(),t.forChild(i,h),m),i=g}else for(var D=0;D<e.childCount;D++){var w=e.child(D);r(w,o,t.forChild(i,w),D),i+=w.nodeSize}}(this.node,this.innerDeco,(function(t,i,a){t.spec.marks?u.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!a&&u.syncToMarks(i==n.node.childCount?Y.none:n.node.child(i).marks,r,e),u.placeWidget(t,e,o)}),(function(t,n,a,l){var c;u.syncToMarks(t.marks,r,e),u.findNodeMatch(t,n,a,l)||s&&e.state.selection.from>o&&e.state.selection.to<o+t.nodeSize&&(c=u.findIndexWithChild(i.node))>-1&&u.updateNodeAt(t,n,a,c,e)||u.updateNextNode(t,n,a,e,l,o)||u.addNode(t,n,a,e,o),o+=t.nodeSize})),u.syncToMarks([],r,e),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||2==this.dirty)&&(a&&this.protectLocalComposition(e,a),ao(this.contentDOM,this.children,e),kr&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}},{key:"localCompositionInfo",value:function(e,t){var n=e.state.selection,r=n.from,o=n.to;if(!(e.state.selection instanceof yn)||r<t||o>t+this.node.content.size)return null;var i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){var a=i.nodeValue,s=function(e,t,n,r){for(var o=0,i=0;o<e.childCount&&i<=r;){var a=e.child(o++),s=i;if(i+=a.nodeSize,a.isText){for(var u=a.text;o<e.childCount;){var l=e.child(o++);if(i+=l.nodeSize,!l.isText)break;u+=l.text}if(i>=n){if(i>=r&&u.slice(r-t.length-s,r-s)==t)return r-t.length;var c=s<r?u.lastIndexOf(t,r-s-1):-1;if(c>=0&&c+t.length+s>=n)return s+c;if(n==r&&u.length>=r+t.length-s&&u.slice(r-s,r-s+t.length)==t)return r}}}return-1}(this.node.content,a,r-t,o-t);return s<0?null:{node:i,pos:s,text:a}}return{node:i,pos:-1,text:""}}},{key:"protectLocalComposition",value:function(e,t){var n=t.node,r=t.pos,o=t.text;if(!this.getDesc(n)){for(var i=n;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}var a=new Qr(this,i,n,o);e.input.compositionNodes.push(a),this.children=yo(this.children,r,r+o.length,e,a)}}},{key:"update",value:function(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node)||(this.updateInner(e,t,n,r),0))}},{key:"updateInner",value:function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}},{key:"updateOuterDeco",value:function(e){if(!ho(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=co(this.dom,this.nodeDOM,lo(this.outerDeco,this.node,t),lo(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}}},{key:"selectNode",value:function(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}},{key:"deselectNode",value:function(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable"))}},{key:"domAtom",get:function(){return this.node.isAtom}}],[{key:"create",value:function(e,n,r,o,i,a){var s,u=i.nodeViews[n.type.name],l=u&&u(n,i,(function(){return s?s.parent?s.parent.posBeforeChild(s):void 0:a}),r,o),c=l&&l.dom,d=l&&l.contentDOM;if(n.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(n.text);else if(!c){var f=Je.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs);c=f.dom,d=f.contentDOM}d||n.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));var p=c;return c=po(c,r,n),l?s=new io(e,n,r,o,c,d||null,p,l,i,a+1):n.isText?new ro(e,n,r,o,c,p,i):new t(e,n,r,o,c,d||null,p,i,a+1)}}])}(Xr);function no(e,t,n,r,o){po(r,t,e);var i=new to(void 0,e,t,n,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}var ro=function(e){function t(e,n,r,o,i,a,s){return Zn(this,t),Vn(this,t,[e,n,r,o,i,null,a,s,0])}return Wn(t,e),Xn(t,[{key:"parseRule",value:function(){for(var e=this.nodeDOM.parentNode;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}},{key:"update",value:function(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node)||(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,0))}},{key:"inParent",value:function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}},{key:"domFromPos",value:function(e){return{node:this.nodeDOM,offset:e}}},{key:"localPosFromDOM",value:function(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):$n(t,"localPosFromDOM",this,3)([e,n,r])}},{key:"ignoreMutation",value:function(e){return"characterData"!=e.type&&"selection"!=e.type}},{key:"slice",value:function(e,n,r){var o=this.node.cut(e,n),i=document.createTextNode(o.text);return new t(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)}},{key:"markDirty",value:function(e,n){$n(t,"markDirty",this,3)([e,n]),this.dom==this.nodeDOM||0!=e&&n!=this.nodeDOM.nodeValue.length||(this.dirty=3)}},{key:"domAtom",get:function(){return!1}},{key:"isText",value:function(e){return this.node.text==e}}])}(to),oo=function(e){function t(){return Zn(this,t),Vn(this,t,arguments)}return Wn(t,e),Xn(t,[{key:"parseRule",value:function(){return{ignore:!0}}},{key:"matchesHack",value:function(e){return 0==this.dirty&&this.dom.nodeName==e}},{key:"domAtom",get:function(){return!0}},{key:"ignoreForCoords",get:function(){return"IMG"==this.dom.nodeName}}])}(Xr),io=function(e){function t(e,n,r,o,i,a,s,u,l,c){var d;return Zn(this,t),(d=Vn(this,t,[e,n,r,o,i,a,s,l,c])).spec=u,d}return Wn(t,e),Xn(t,[{key:"update",value:function(e,n,r,o){if(3==this.dirty)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){var i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,o),i}return!(!this.contentDOM&&!e.isLeaf)&&$n(t,"update",this,3)([e,n,r,o])}},{key:"selectNode",value:function(){this.spec.selectNode?this.spec.selectNode():$n(t,"selectNode",this,3)([])}},{key:"deselectNode",value:function(){this.spec.deselectNode?this.spec.deselectNode():$n(t,"deselectNode",this,3)([])}},{key:"setSelection",value:function(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r.root):$n(t,"setSelection",this,3)([e,n,r,o])}},{key:"destroy",value:function(){this.spec.destroy&&this.spec.destroy(),$n(t,"destroy",this,3)([])}},{key:"stopEvent",value:function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}},{key:"ignoreMutation",value:function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):$n(t,"ignoreMutation",this,3)([e])}}])}(to);function ao(e,t,n){for(var r=e.firstChild,o=!1,i=0;i<t.length;i++){var a=t[i],s=a.dom;if(s.parentNode==e){for(;s!=r;)r=mo(r),o=!0;r=r.nextSibling}else o=!0,e.insertBefore(s,r);if(a instanceof eo){var u=r?r.previousSibling:e.lastChild;ao(a.contentDOM,a.children,n),r=u?u.nextSibling:e.firstChild}}for(;r;)r=mo(r),o=!0;o&&n.trackWrites==e&&(n.trackWrites=null)}var so=function(e){e&&(this.nodeName=e)};so.prototype=Object.create(null);var uo=[new so];function lo(e,t,n){if(0==e.length)return uo;for(var r=n?uo[0]:new so,o=[r],i=0;i<e.length;i++){var a=e[i].type.attrs;if(a)for(var s in a.nodeName&&o.push(r=new so(a.nodeName)),a){var u=a[s];null!=u&&(n&&1==o.length&&o.push(r=new so(t.isInline?"span":"div")),"class"==s?r.class=(r.class?r.class+" ":"")+u:"style"==s?r.style=(r.style?r.style+";":"")+u:"nodeName"!=s&&(r[s]=u))}}return o}function co(e,t,n,r){if(n==uo&&r==uo)return t;for(var o=t,i=0;i<r.length;i++){var a=r[i],s=n[i];if(i){var u=void 0;s&&s.nodeName==a.nodeName&&o!=e&&(u=o.parentNode)&&u.nodeName.toLowerCase()==a.nodeName||((u=document.createElement(a.nodeName)).pmIsDeco=!0,u.appendChild(o),s=uo[0]),o=u}fo(o,s||uo[0],a)}return o}function fo(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t.class!=n.class){for(var i=t.class?t.class.split(" ").filter(Boolean):[],a=n.class?n.class.split(" ").filter(Boolean):[],s=0;s<i.length;s++)-1==a.indexOf(i[s])&&e.classList.remove(i[s]);for(var u=0;u<a.length;u++)-1==i.indexOf(a[u])&&e.classList.add(a[u]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style)for(var l,c=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=c.exec(t.style);)e.style.removeProperty(l[1]);n.style&&(e.style.cssText+=n.style)}}function po(e,t,n){return co(e,e,uo,lo(t,n,1!=e.nodeType))}function ho(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function mo(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var vo=function(){return Xn((function e(t,n,r){Zn(this,e),this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=function(e,t){var n=t,r=n.children.length,o=e.childCount,i=new Map,a=[];e:for(;o>0;){for(var s=void 0;;)if(r){var u=n.children[r-1];if(!(u instanceof eo)){s=u,r--;break}n=u,r=u.children.length}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}var l=s.node;if(l){if(l!=e.child(o-1))break;--o,i.set(s,o),a.push(s)}}return{index:o,matched:i,matches:a.reverse()}}(t.node.content,t)}),[{key:"destroyBetween",value:function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}},{key:"destroyRest",value:function(){this.destroyBetween(this.index,this.top.children.length)}},{key:"syncToMarks",value:function(e,t,n){for(var r=0,o=this.stack.length>>1,i=Math.min(o,e.length);r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);for(var a=-1,s=this.index;s<Math.min(this.index+3,this.top.children.length);s++){var u=this.top.children[s];if(u.matchesMark(e[o])&&!this.isLocked(u.dom)){a=s;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{var l=eo.create(this.top,e[o],t,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}}},{key:"findNodeMatch",value:function(e,t,n,r){var o,i=-1;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,n))i=this.top.children.indexOf(o,this.index);else for(var a=this.index,s=Math.min(this.top.children.length,a+5);a<s;a++){var u=this.top.children[a];if(u.matchesNode(e,t,n)&&!this.preMatch.matched.has(u)){i=a;break}}return!(i<0||(this.destroyBetween(this.index,i),this.index++,0))}},{key:"updateNodeAt",value:function(e,t,n,r,o){var i=this.top.children[r];return 3==i.dirty&&i.dom==i.contentDOM&&(i.dirty=2),!!i.update(e,t,n,o)&&(this.destroyBetween(this.index,r),this.index++,!0)}},{key:"findIndexWithChild",value:function(e){for(;;){var t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){var n=e.pmViewDesc;if(n)for(var r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==n)return r;return-1}e=t}}},{key:"updateNextNode",value:function(e,t,n,r,o,i){for(var a=this.index;a<this.top.children.length;a++){var s=this.top.children[a];if(s instanceof to){var u=this.preMatch.matched.get(s);if(null!=u&&u!=o)return!1;var l=s.dom,c=void 0,d=this.isLocked(l)&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&3!=s.dirty&&ho(t,s.outerDeco));if(!d&&s.update(e,t,n,r))return this.destroyBetween(this.index,a),s.dom!=l&&(this.changed=!0),this.index++,!0;if(!d&&(c=this.recreateWrapper(s,e,t,n,r,i)))return this.destroyBetween(this.index,a),this.top.children[this.index]=c,c.contentDOM&&(c.dirty=2,c.updateChildren(r,i+1),c.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}},{key:"recreateWrapper",value:function(e,t,n,r,o,i){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!ho(n,e.outerDeco)||!r.eq(e.innerDeco))return null;var a=to.create(this.top,t,n,r,o,i);if(a.contentDOM){a.children=e.children,e.children=[];var s,u=Rn(a.children);try{for(u.s();!(s=u.n()).done;)s.value.parent=a}catch(e){u.e(e)}finally{u.f()}}return e.destroy(),a}},{key:"addNode",value:function(e,t,n,r,o){var i=to.create(this.top,e,t,n,r,o);i.contentDOM&&i.updateChildren(r,o+1),this.top.children.splice(this.index++,0,i),this.changed=!0}},{key:"placeWidget",value:function(e,t,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){var o=new Yr(this.top,e,t,n);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++}},{key:"addTextblockHacks",value:function(){for(var e=this.top.children[this.index-1],t=this.top;e instanceof eo;)e=(t=e).children[t.children.length-1];(!e||!(e instanceof ro)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Cr||Dr)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}},{key:"addHackNode",value:function(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{var n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");var r=new oo(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}},{key:"isLocked",value:function(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}])}();function go(e,t){return e.type.side-t.type.side}function yo(e,t,n,r,o){for(var i=[],a=0,s=0;a<e.length;a++){var u=e[a],l=s,c=s+=u.size;l>=n||c<=t?i.push(u):(l<t&&i.push(u.slice(0,t-l,r)),o&&(i.push(o),o=void 0),c>n&&i.push(u.slice(n-l,u.size,r)))}return i}function bo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;var o=e.docView.nearestDesc(n.focusNode),i=o&&0==o.size,a=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;var s,u,l=r.resolve(a);if(ur(n)){for(s=a;o&&!o.node;)o=o.parent;var c=o.node;if(o&&c.isAtom&&Dn.isSelectable(c)&&o.parent&&(!c.isInline||!function(e,t,n){for(var r=0==t,o=t==ar(e);r||o;){if(e==n)return!0;var i=Qn(e);if(!(e=e.parentNode))return!1;r=r&&0==i,o=o&&i==ar(e)}}(n.focusNode,n.focusOffset,o.dom))){var d=o.posBefore;u=new Dn(a==d?l:r.resolve(d))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){for(var f=a,p=a,h=0;h<n.rangeCount;h++){var m=n.getRangeAt(h);f=Math.min(f,e.docView.posFromDOM(m.startContainer,m.startOffset,1)),p=Math.max(p,e.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(f<0)return null;var v=In(p==e.state.selection.anchor?[p,f]:[f,p],2);s=v[0],a=v[1],l=r.resolve(a)}else s=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(s<0)return null}var g=r.resolve(s);return u||(u=So(e,g,l,"pointer"==t||e.state.selection.head<l.pos&&!i?1:-1)),u}function Do(e){return e.editable?e.hasFocus():Bo(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function wo(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.state.selection;if(Ao(e,n),Do(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&Dr){var r=e.domSelectionRange(),o=e.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&rr(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.domSelection(),n=document.createRange();if(t){var r=e.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setStart(r.parentNode,Qn(r)+1):n.setStart(r,0),n.collapse(!0),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&vr&&gr<=11&&(r.disabled=!0,r.disabled=!1)}}(e);else{var i,a,s=n.anchor,u=n.head;!Co||n instanceof yn||(n.$from.parent.inlineContent||(i=ko(e,n.from)),n.empty||n.$from.parent.inlineContent||(a=ko(e,n.to))),e.docView.setSelection(s,u,e,t),Co&&(i&&xo(i),a&&xo(a)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);var n=e.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout((function(){Do(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}var Co=Cr||Dr&&wr<63;function ko(e,t){var n=e.docView.domFromPos(t,0),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,a=o?r.childNodes[o-1]:null;if(Cr&&i&&"false"==i.contentEditable)return Eo(i);if(!(i&&"false"!=i.contentEditable||a&&"false"!=a.contentEditable)){if(i)return Eo(i);if(a)return Eo(a)}}function Eo(e){return e.contentEditable="true",Cr&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function xo(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Ao(e,t){if(t instanceof Dn){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(Fo(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else Fo(e)}function Fo(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function So(e,t,n,r){return e.someProp("createSelectionBetween",(function(r){return r(e,t,n)}))||yn.between(t,n,r)}function Mo(e){return!(e.editable&&!e.hasFocus())&&Bo(e)}function Bo(e){var t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function Oo(e,t){var n=e.selection,r=n.$anchor,o=n.$head,i=t>0?r.max(o):r.min(o),a=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return a&&hn.findFrom(a,t)}function To(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Po(e,t,n){var r=e.state.selection;if(!(r instanceof yn)){if(r instanceof Dn&&r.node.isInline)return To(e,new yn(t>0?r.$to:r.$from));var o=Oo(e.state,t);return!!o&&To(e,o)}if(n.indexOf("s")>-1){var i=r.$head,a=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;var s=e.state.doc.resolve(i.pos+a.nodeSize*(t<0?-1:1));return To(e,new yn(r.$anchor,s))}if(!r.empty)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){var u=Oo(e.state,t);return!!(u&&u instanceof Dn)&&To(e,u)}if(!(Er&&n.indexOf("m")>-1)){var l,c=r.$head,d=c.textOffset?null:t<0?c.nodeBefore:c.nodeAfter;if(!d||d.isText)return!1;var f=t<0?c.pos-d.nodeSize:c.pos;return!!(d.isAtom||(l=e.docView.descAt(f))&&!l.contentDOM)&&(Dn.isSelectable(d)?To(e,new Dn(t<0?e.state.doc.resolve(c.pos-d.nodeSize):c)):!!Fr&&To(e,new yn(e.state.doc.resolve(t<0?f:f+d.nodeSize))))}}function No(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function _o(e,t){var n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function jo(e,t){return t<0?function(e){var t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(n){var o,i,a=!1;for(yr&&1==n.nodeType&&r<No(n)&&_o(n.childNodes[r],-1)&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;var s=n.childNodes[r-1];if(_o(s,-1))o=n,i=--r;else{if(3!=s.nodeType)break;r=(n=s).nodeValue.length}}else{if(Io(n))break;for(var u=n.previousSibling;u&&_o(u,-1);)o=n.parentNode,i=Qn(u),u=u.previousSibling;if(u)r=No(n=u);else{if((n=n.parentNode)==e.dom)break;r=0}}a?Ro(e,n,r):o&&Ro(e,o,i)}}(e):function(e){var t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(n){for(var o,i,a=No(n);;)if(r<a){if(1!=n.nodeType)break;if(!_o(n.childNodes[r],1))break;o=n,i=++r}else{if(Io(n))break;for(var s=n.nextSibling;s&&_o(s,1);)o=s.parentNode,i=Qn(s)+1,s=s.nextSibling;if(s)r=0,a=No(n=s);else{if((n=n.parentNode)==e.dom)break;r=a=0}}o&&Ro(e,o,i)}}(e)}function Io(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Ro(e,t,n){var r,o;3!=t.nodeType&&((o=function(e,t){for(;e&&t==e.childNodes.length&&!sr(e);)t=Qn(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){var n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}(t,n))?(t=o,n=0):(r=function(e,t){for(;e&&!t&&!sr(e);)t=Qn(e),e=e.parentNode;for(;e&&t;){var n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=(e=n).childNodes.length}}(t,n))&&(t=r,n=r.nodeValue.length));var i=e.domSelection();if(i){if(ur(i)){var a=document.createRange();a.setEnd(t,n),a.setStart(t,n),i.removeAllRanges(),i.addRange(a)}else i.extend&&i.extend(t,n);e.domObserver.setCurSelection();var s=e.state;setTimeout((function(){e.state==s&&wo(e)}),50)}}function Lo(e,t){var n=e.state.doc.resolve(t);if(!Dr&&!xr&&n.parent.inlineContent){var r=e.coordsAtPos(t);if(t>n.start()){var o=e.coordsAtPos(t-1),i=(o.top+o.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(o.left-r.left)>1)return o.left<r.left?"ltr":"rtl"}if(t<n.end()){var a=e.coordsAtPos(t+1),s=(a.top+a.bottom)/2;if(s>r.top&&s<r.bottom&&Math.abs(a.left-r.left)>1)return a.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function Ho(e,t,n){var r=e.state.selection;if(r instanceof yn&&!r.empty||n.indexOf("s")>-1)return!1;if(Er&&n.indexOf("m")>-1)return!1;var o=r.$from,i=r.$to;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var a=Oo(e.state,t);if(a&&a instanceof Dn)return To(e,a)}if(!o.parent.inlineContent){var s=t<0?o:i,u=r instanceof Cn?hn.near(s,t):hn.findFrom(s,t);return!!u&&To(e,u)}return!1}function Vo(e,t){if(!(e.state.selection instanceof yn))return!0;var n=e.state.selection,r=n.$head,o=n.$anchor,i=n.empty;if(!r.sameParent(o))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var a=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){var s=e.state.tr;return t<0?s.delete(r.pos-a.nodeSize,r.pos):s.delete(r.pos,r.pos+a.nodeSize),e.dispatch(s),!0}return!1}function zo(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function $o(e,t){e.someProp("transformCopied",(function(n){t=n(t,e)}));for(var n=[],r=t,o=r.content,i=r.openStart,a=r.openEnd;i>1&&a>1&&1==o.childCount&&1==o.firstChild.childCount;){i--,a--;var s=o.firstChild;n.push(s.type.name,s.attrs!=s.type.defaultAttrs?s.attrs:null),o=s.content}var u=e.someProp("clipboardSerializer")||Je.fromSchema(e.state.schema),l=Qo(),c=l.createElement("div");c.appendChild(u.serializeFragment(o,{document:l}));for(var d,f=c.firstChild,p=0;f&&1==f.nodeType&&(d=Xo[f.nodeName.toLowerCase()]);){for(var h=d.length-1;h>=0;h--){for(var m=l.createElement(d[h]);c.firstChild;)m.appendChild(c.firstChild);c.appendChild(m),p++}f=c.firstChild}return f&&1==f.nodeType&&f.setAttribute("data-pm-slice","".concat(i," ").concat(a).concat(p?" -".concat(p):""," ").concat(JSON.stringify(n))),{dom:c,text:e.someProp("clipboardTextSerializer",(function(n){return n(t,e)}))||t.content.textBetween(0,t.content.size,"\n\n"),slice:t}}function Uo(e,t,n,r,o){var i,a,s=o.parent.type.spec.code;if(!n&&!t)return null;var u=t&&(r||s||!n);if(u){if(e.someProp("transformPastedText",(function(n){t=n(t,s||r,e)})),s)return t?new ee(K.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):ee.empty;var l=e.someProp("clipboardTextParser",(function(n){return n(t,o,r,e)}));if(l)a=l;else{var c=o.marks(),d=e.state.schema,f=Je.fromSchema(d);i=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach((function(e){var t=i.appendChild(document.createElement("p"));e&&t.appendChild(f.serializeNode(d.text(e,c)))}))}}else e.someProp("transformPastedHTML",(function(t){n=t(n,e)})),i=function(e){var t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=Qo().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(e);if((n=o&&Xo[o[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join("")),r.innerHTML=function(e){var t=window.trustedTypes;return t?(ei||(ei=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:function(e){return e}})),ei.createHTML(e)):e}(e),n)for(var i=0;i<n.length;i++)r=r.querySelector(n[i])||r;return r}(n),Fr&&function(e){for(var t=e.querySelectorAll(Dr?"span:not([class]):not([style])":"span.Apple-converted-space"),n=0;n<t.length;n++){var r=t[n];1==r.childNodes.length&&" "==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(i);var p=i&&i.querySelector("[data-pm-slice]"),h=p&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(p.getAttribute("data-pm-slice")||"");if(h&&h[3])for(var m=+h[3];m>0;m--){for(var v=i.firstChild;v&&1!=v.nodeType;)v=v.nextSibling;if(!v)break;i=v}if(!a){var g=e.someProp("clipboardParser")||e.someProp("domParser")||He.fromSchema(e.state.schema);a=g.parseSlice(i,{preserveWhitespace:!(!u&&!h),context:o,ruleFromNode:function(e){return"BR"!=e.nodeName||e.nextSibling||!e.parentNode||Go.test(e.parentNode.nodeName)?null:{ignore:!0}}})}if(h)a=function(e,t){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}for(var o=e.content,i=e.openStart,a=e.openEnd,s=n.length-2;s>=0;s-=2){var u=r.nodes[n[s]];if(!u||u.hasRequiredAttrs())break;o=K.from(u.create(n[s+1],o)),i++,a++}return new ee(o,i,a)}(Jo(a,+h[1],+h[2]),h[4]);else if(a=ee.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n,r=function(){var n,r=t.node(o).contentMatchAt(t.index(o)),i=[];if(e.forEach((function(e){if(i){var t,o=r.findWrapping(e.type);if(!o)return i=null;if(t=i.length&&n.length&&qo(o,n,e,i[i.length-1],0))i[i.length-1]=t;else{i.length&&(i[i.length-1]=Ko(i[i.length-1],n.length));var a=Wo(e,o);i.push(a),r=r.matchType(a.type),n=o}}})),i)return{v:K.from(i)}},o=t.depth;o>=0;o--)if(n=r())return n.v;return e}(a.content,o),!0),a.openStart||a.openEnd){for(var y=0,b=0,D=a.content.firstChild;y<a.openStart&&!D.type.spec.isolating;y++,D=D.firstChild);for(var w=a.content.lastChild;b<a.openEnd&&!w.type.spec.isolating;b++,w=w.lastChild);a=Jo(a,y,b)}return e.someProp("transformPasted",(function(t){a=t(a,e)})),a}var Go=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Wo(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.length-1;r>=n;r--)e=t[r].create(null,K.from(e));return e}function qo(e,t,n,r,o){if(o<e.length&&o<t.length&&e[o]==t[o]){var i=qo(e,t,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==e.length-1?n.type:e[o+1]))return r.copy(r.content.append(K.from(Wo(n,e,o+1))))}}function Ko(e,t){if(0==t)return e;var n=e.content.replaceChild(e.childCount-1,Ko(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(K.empty,!0);return e.copy(n.append(r))}function Zo(e,t,n,r,o,i){var a=t<0?e.firstChild:e.lastChild,s=a.content;return e.childCount>1&&(i=0),o<r-1&&(s=Zo(s,t,n,r,o+1,i)),o>=n&&(s=t<0?a.contentMatchAt(0).fillBefore(s,i<=o).append(s):s.append(a.contentMatchAt(a.childCount).fillBefore(K.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(s))}function Jo(e,t,n){return t<e.openStart&&(e=new ee(Zo(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new ee(Zo(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}var Xo={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Yo=null;function Qo(){return Yo||(Yo=document.implementation.createHTMLDocument("title"))}var ei=null,ti={},ni={},ri={touchstart:!0,touchmove:!0},oi=Xn((function e(){Zn(this,e),this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}));function ii(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function ai(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=function(t){return si(e,t)})}))}function si(e,t){return e.someProp("handleDOMEvents",(function(n){var r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function ui(e){return{left:e.clientX,top:e.clientY}}function li(e,t,n,r,o){if(-1==r)return!1;for(var i,a=e.state.doc.resolve(r),s=function(r){if(e.someProp(t,(function(t){return r>a.depth?t(e,n,a.nodeAfter,a.before(r),o,!0):t(e,n,a.node(r),a.before(r),o,!1)})))return{v:!0}},u=a.depth+1;u>0;u--)if(i=s(u))return i.v;return!1}function ci(e,t,n){if(e.focused||e.focus(),!e.state.selection.eq(t)){var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}}function di(e,t,n,r){return li(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(function(n){return n(e,t,r)}))}function fi(e,t,n,r){return li(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(function(n){return n(e,t,r)}))||function(e,t,n){if(0!=n.button)return!1;var r=e.state.doc;if(-1==t)return!!r.inlineContent&&(ci(e,yn.create(r,0,r.content.size),"pointer"),!0);for(var o=r.resolve(t),i=o.depth+1;i>0;i--){var a=i>o.depth?o.nodeAfter:o.node(i),s=o.before(i);if(a.inlineContent)ci(e,yn.create(r,s+1,s+1+a.content.size),"pointer");else{if(!Dn.isSelectable(a))continue;ci(e,Dn.create(r,s),"pointer")}return!0}}(e,n,r)}function pi(e){return Di(e)}ni.keydown=function(e,t){var n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!vi(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!Ar||!Dr||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!kr||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",(function(t){return t(e,n)}))||function(e,t){var n=t.keyCode,r=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);if(8==n||Er&&72==n&&"c"==r)return Vo(e,-1)||jo(e,-1);if(46==n&&!t.shiftKey||Er&&68==n&&"c"==r)return Vo(e,1)||jo(e,1);if(13==n||27==n)return!0;if(37==n||Er&&66==n&&"c"==r){var o=37==n?"ltr"==Lo(e,e.state.selection.from)?-1:1:-1;return Po(e,o,r)||jo(e,o)}if(39==n||Er&&70==n&&"c"==r){var i=39==n?"ltr"==Lo(e,e.state.selection.from)?1:-1:1;return Po(e,i,r)||jo(e,i)}return 38==n||Er&&80==n&&"c"==r?Ho(e,-1,r)||jo(e,-1):40==n||Er&&78==n&&"c"==r?function(e){if(!Cr||e.state.selection.$head.parentOffset>0)return!1;var t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;zo(e,o,"true"),setTimeout((function(){return zo(e,o,"false")}),20)}return!1}(e)||Ho(e,1,r)||jo(e,1):r==(Er?"m":"c")&&(66==n||73==n||89==n||90==n)}(e,n)?n.preventDefault():ii(e,"key");else{var r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout((function(){e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",(function(t){return t(e,lr(13,"Enter"))})),e.input.lastIOSEnter=0)}),200)}},ni.keyup=function(e,t){16==t.keyCode&&(e.input.shiftKey=!1)},ni.keypress=function(e,t){var n=t;if(!(vi(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||Er&&n.metaKey))if(e.someProp("handleKeyPress",(function(t){return t(e,n)})))n.preventDefault();else{var r=e.state.selection;if(!(r instanceof yn&&r.$from.sameParent(r.$to))){var o=String.fromCharCode(n.charCode),i=function(){return e.state.tr.insertText(o).scrollIntoView()};/[\r\n]/.test(o)||e.someProp("handleTextInput",(function(t){return t(e,r.$from.pos,r.$to.pos,o,i)}))||e.dispatch(i()),n.preventDefault()}}};var hi=Er?"metaKey":"ctrlKey";ti.mousedown=function(e,t){var n=t;e.input.shiftKey=n.shiftKey;var r=pi(e),o=Date.now(),i="singleClick";o-e.input.lastClick.time<500&&function(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(n,e.input.lastClick)&&!n[hi]&&e.input.lastClick.button==n.button&&("singleClick"==e.input.lastClick.type?i="doubleClick":"doubleClick"==e.input.lastClick.type&&(i="tripleClick")),e.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i,button:n.button};var a=e.posAtCoords(ui(n));a&&("singleClick"==i?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new mi(e,a,n,!!r)):("doubleClick"==i?di:fi)(e,a.pos,a.inside,n)?n.preventDefault():ii(e,"pointer"))};var mi=function(){return Xn((function e(t,n,r,o){var i,a,s=this;if(Zn(this,e),this.view=t,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[hi],this.allowDefault=r.shiftKey,n.inside>-1)i=t.state.doc.nodeAt(n.inside),a=n.inside;else{var u=t.state.doc.resolve(n.pos);i=u.parent,a=u.depth?u.before():0}var l=o?null:r.target,c=l?t.docView.nearestDesc(l,!0):null;this.target=c&&1==c.dom.nodeType?c.dom:null;var d=t.state.selection;(0==r.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||d instanceof Dn&&d.from<=a&&d.to>a)&&(this.mightDrag={node:i,pos:a,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!yr||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){s.view.input.mouseDown==s&&s.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),ii(t,"pointer")}),[{key:"done",value:function(){var e=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((function(){return wo(e.view)})),this.view.input.mouseDown=null}},{key:"up",value:function(e){if(this.done(),this.view.dom.contains(e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(ui(e))),this.updateAllowDefault(e),this.allowDefault||!t?ii(this.view,"pointer"):function(e,t,n,r,o){return li(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(function(n){return n(e,t,r)}))||(o?function(e,t){if(-1==t)return!1;var n,r,o=e.state.selection;o instanceof Dn&&(n=o.node);for(var i=e.state.doc.resolve(t),a=i.depth+1;a>0;a--){var s=a>i.depth?i.nodeAfter:i.node(a);if(Dn.isSelectable(s)){r=n&&o.$from.depth>0&&a>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(a);break}}return null!=r&&(ci(e,Dn.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&Dn.isSelectable(r))&&(ci(e,new Dn(n),"pointer"),!0)}(e,n))}(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||Cr&&this.mightDrag&&!this.mightDrag.node.isAtom||Dr&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(ci(this.view,hn.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):ii(this.view,"pointer")}}},{key:"move",value:function(e){this.updateAllowDefault(e),ii(this.view,"pointer"),0==e.buttons&&this.done()}},{key:"updateAllowDefault",value:function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}])}();function vi(e,t){return!!e.composing||!!(Cr&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}ti.touchstart=function(e){e.input.lastTouch=Date.now(),pi(e),ii(e,"pointer")},ti.touchmove=function(e){e.input.lastTouch=Date.now(),ii(e,"pointer")},ti.contextmenu=function(e){return pi(e)};var gi=Ar?5e3:-1;function yi(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout((function(){return Di(e)}),t))}function bi(e){var t;for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=((t=document.createEvent("Event")).initEvent("event",!0,!0),t.timeStamp));e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function Di(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(Ar&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),bi(e),t||e.docView&&e.docView.dirty){var n=bo(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):!e.markCursor&&!t||r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.updateState(e.state):e.dispatch(e.state.tr.deleteSelection()),!0}return!1}}ni.compositionstart=ni.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$to;if(t.selection instanceof yn&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),Di(e,!0),e.markCursor=null;else if(Di(e,!t.selection.empty),yr&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.domSelectionRange(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var a=i<0?o.lastChild:o.childNodes[i-1];if(!a)break;if(3==a.nodeType){var s=e.domSelection();s&&s.collapse(a,a.nodeValue.length);break}o=a,i=-1}e.input.composing=!0}yi(e,gi)},ni.compositionend=function(e,t){e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then((function(){return e.domObserver.flush()})),e.input.compositionID++,yi(e,20))};var wi=vr&&gr<15||kr&&Sr<604;function Ci(e,t,n,r,o){var i=Uo(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",(function(t){return t(e,o,i||ee.empty)})))return!0;if(!i)return!1;var a=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(i),s=a?e.state.tr.replaceSelectionWith(a,r):e.state.tr.replaceSelection(i);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function ki(e){var t=e.getData("text/plain")||e.getData("Text");if(t)return t;var n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}ti.copy=ni.cut=function(e,t){var n=t,r=e.state.selection,o="cut"==n.type;if(!r.empty){var i=wi?null:n.clipboardData,a=$o(e,r.content()),s=a.dom,u=a.text;i?(n.preventDefault(),i.clearData(),i.setData("text/html",s.innerHTML),i.setData("text/plain",u)):function(e,t){if(e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}}(e,s),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},ni.paste=function(e,t){var n=t;if(!e.composing||Ar){var r=wi?null:n.clipboardData,o=e.input.shiftKey&&45!=e.input.lastKeyCode;r&&Ci(e,ki(r),r.getData("text/html"),o,n)?n.preventDefault():function(e,t){if(e.dom.parentNode){var n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();var o=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout((function(){e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Ci(e,r.value,null,o,t):Ci(e,r.textContent,r.innerHTML,o,t)}),50)}}(e,n)}};var Ei=Xn((function e(t,n,r){Zn(this,e),this.slice=t,this.move=n,this.node=r})),xi=Er?"altKey":"ctrlKey";function Ai(e,t){var n=e.someProp("dragCopies",(function(e){return!e(t)}));return null!=n?n:!t[xi]}for(var Fi in ti.dragstart=function(e,t){var n=t,r=e.input.mouseDown;if(r&&r.done(),n.dataTransfer){var o,i=e.state.selection,a=i.empty?null:e.posAtCoords(ui(n));if(a&&a.pos>=i.from&&a.pos<=(i instanceof Dn?i.to-1:i.to));else if(r&&r.mightDrag)o=Dn.create(e.state.doc,r.mightDrag.pos);else if(n.target&&1==n.target.nodeType){var s=e.docView.nearestDesc(n.target,!0);s&&s.node.type.spec.draggable&&s!=e.docView&&(o=Dn.create(e.state.doc,s.posBefore))}var u=$o(e,(o||e.state.selection).content()),l=u.dom,c=u.text,d=u.slice;(!n.dataTransfer.files.length||!Dr||wr>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(wi?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",wi||n.dataTransfer.setData("text/plain",c),e.dragging=new Ei(d,Ai(e,n),o)}},ti.dragend=function(e){var t=e.dragging;window.setTimeout((function(){e.dragging==t&&(e.dragging=null)}),50)},ni.dragover=ni.dragenter=function(e,t){return t.preventDefault()},ni.drop=function(e,t){var n=t,r=e.dragging;if(e.dragging=null,n.dataTransfer){var o=e.posAtCoords(ui(n));if(o){var i=e.state.doc.resolve(o.pos),a=r&&r.slice;a?e.someProp("transformPasted",(function(t){a=t(a,e)})):a=Uo(e,ki(n.dataTransfer),wi?null:n.dataTransfer.getData("text/html"),!1,i);var s=!(!r||!Ai(e,n));if(e.someProp("handleDrop",(function(t){return t(e,n,a||ee.empty,s)})))n.preventDefault();else if(a){n.preventDefault();var u=a?Lt(e.state.doc,i.pos,a):i.pos;null==u&&(u=i.pos);var l=e.state.tr;if(s){var c=r.node;c?c.replace(l):l.deleteSelection()}var d=l.mapping.map(u),f=0==a.openStart&&0==a.openEnd&&1==a.content.childCount,p=l.doc;if(f?l.replaceRangeWith(d,d,a.content.firstChild):l.replaceRange(d,d,a),!l.doc.eq(p)){var h=l.doc.resolve(d);if(f&&Dn.isSelectable(a.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(a.content.firstChild))l.setSelection(new Dn(h));else{var m=l.mapping.map(u);l.mapping.maps[l.mapping.maps.length-1].forEach((function(e,t,n,r){return m=r})),l.setSelection(So(e,h,l.doc.resolve(m)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}}}}},ti.focus=function(e){e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&wo(e)}),20))},ti.blur=function(e,t){var n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},ti.beforeinput=function(e,t){if(Dr&&Ar&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();var n=e.input.domChangeCount;setTimeout((function(){if(e.input.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,lr(8,"Backspace"))})))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}}),50)}},ni)ti[Fi]=ni[Fi];function Si(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var Mi=function(){function e(t,n){Zn(this,e),this.toDOM=t,this.spec=n||Ni,this.side=this.spec.side||0}return Xn(e,[{key:"map",value:function(e,t,n,r){var o=e.mapResult(t.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new Ti(i-n,i-n,this)}},{key:"valid",value:function(){return!0}},{key:"eq",value:function(t){return this==t||t instanceof e&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Si(this.spec,t.spec))}},{key:"destroy",value:function(e){this.spec.destroy&&this.spec.destroy(e)}}])}(),Bi=function(){function e(t,n){Zn(this,e),this.attrs=t,this.spec=n||Ni}return Xn(e,[{key:"map",value:function(e,t,n,r){var o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new Ti(o,i,this)}},{key:"valid",value:function(e,t){return t.from<t.to}},{key:"eq",value:function(t){return this==t||t instanceof e&&Si(this.attrs,t.attrs)&&Si(this.spec,t.spec)}},{key:"destroy",value:function(){}}],[{key:"is",value:function(t){return t.type instanceof e}}])}(),Oi=function(){function e(t,n){Zn(this,e),this.attrs=t,this.spec=n||Ni}return Xn(e,[{key:"map",value:function(e,t,n,r){var o=e.mapResult(t.from+r,1);if(o.deleted)return null;var i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new Ti(o.pos-n,i.pos-n,this)}},{key:"valid",value:function(e,t){var n,r=e.content.findIndex(t.from),o=r.index,i=r.offset;return i==t.from&&!(n=e.child(o)).isText&&i+n.nodeSize==t.to}},{key:"eq",value:function(t){return this==t||t instanceof e&&Si(this.attrs,t.attrs)&&Si(this.spec,t.spec)}},{key:"destroy",value:function(){}}])}(),Ti=function(){function e(t,n,r){Zn(this,e),this.from=t,this.to=n,this.type=r}return Xn(e,[{key:"copy",value:function(t,n){return new e(t,n,this.type)}},{key:"eq",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}},{key:"map",value:function(e,t,n){return this.type.map(e,this,t,n)}},{key:"spec",get:function(){return this.type.spec}},{key:"inline",get:function(){return this.type instanceof Bi}},{key:"widget",get:function(){return this.type instanceof Mi}}],[{key:"widget",value:function(t,n,r){return new e(t,t,new Mi(n,r))}},{key:"inline",value:function(t,n,r,o){return new e(t,n,new Bi(r,o))}},{key:"node",value:function(t,n,r,o){return new e(t,n,new Oi(r,o))}}])}(),Pi=[],Ni={},_i=function(){function e(t,n){Zn(this,e),this.local=t.length?t:Pi,this.children=n.length?n:Pi}return Xn(e,[{key:"find",value:function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}},{key:"findInner",value:function(e,t,n,r,o){for(var i=0;i<this.local.length;i++){var a=this.local[i];a.from<=t&&a.to>=e&&(!o||o(a.spec))&&n.push(a.copy(a.from+r,a.to+r))}for(var s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){var u=this.children[s]+1;this.children[s+2].findInner(e-u,t-u,n,r+u,o)}}},{key:"map",value:function(e,t,n){return this==ji||0==e.maps.length?this:this.mapInner(e,t,0,0,n||Ni)}},{key:"mapInner",value:function(t,n,r,o,i){for(var a,s=0;s<this.local.length;s++){var u=this.local[s].map(t,r,o);u&&u.type.valid(n,u)?(a||(a=[])).push(u):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?Ri(this.children,a||[],t,n,r,o,i):a?new e(a.sort($i),Pi):ji}},{key:"add",value:function(t,n){return n.length?this==ji?e.create(t,n):this.addInner(t,n,0):this}},{key:"addInner",value:function(t,n,r){var o,i=this,a=0;t.forEach((function(e,t){var s,u=t+r;if(s=Hi(n,e,u)){for(o||(o=i.children.slice());a<o.length&&o[a]<t;)a+=3;o[a]==t?o[a+2]=o[a+2].addInner(e,s,u+1):o.splice(a,0,t,t+e.nodeSize,zi(s,e,u+1,Ni)),a+=3}}));for(var s=Li(a?Vi(n):n,-r),u=0;u<s.length;u++)s[u].type.valid(t,s[u])||s.splice(u--,1);return new e(s.length?this.local.concat(s).sort($i):this.local,o||this.children)}},{key:"remove",value:function(e){return 0==e.length||this==ji?this:this.removeInner(e,0)}},{key:"removeInner",value:function(t,n){for(var r=this.children,o=this.local,i=0;i<r.length;i+=3){for(var a,s=void 0,u=r[i]+n,l=r[i+1]+n,c=0;c<t.length;c++)(a=t[c])&&a.from>u&&a.to<l&&(t[c]=null,(s||(s=[])).push(a));if(s){r==this.children&&(r=this.children.slice());var d=r[i+2].removeInner(s,u+1);d!=ji?r[i+2]=d:(r.splice(i,3),i-=3)}}if(o.length)for(var f,p=0;p<t.length;p++)if(f=t[p])for(var h=0;h<o.length;h++)o[h].eq(f,n)&&(o==this.local&&(o=this.local.slice()),o.splice(h--,1));return r==this.children&&o==this.local?this:o.length||r.length?new e(o,r):ji}},{key:"forChild",value:function(t,n){if(this==ji)return this;if(n.isLeaf)return e.empty;for(var r,o,i=0;i<this.children.length;i+=3)if(this.children[i]>=t){this.children[i]==t&&(r=this.children[i+2]);break}for(var a=t+1,s=a+n.content.size,u=0;u<this.local.length;u++){var l=this.local[u];if(l.from<s&&l.to>a&&l.type instanceof Bi){var c=Math.max(a,l.from)-a,d=Math.min(s,l.to)-a;c<d&&(o||(o=[])).push(l.copy(c,d))}}if(o){var f=new e(o.sort($i),Pi);return r?new Ii([f,r]):f}return r||ji}},{key:"eq",value:function(t){if(this==t)return!0;if(!(t instanceof e)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(var r=0;r<this.children.length;r+=3)if(this.children[r]!=t.children[r]||this.children[r+1]!=t.children[r+1]||!this.children[r+2].eq(t.children[r+2]))return!1;return!0}},{key:"locals",value:function(e){return Ui(this.localsInner(e))}},{key:"localsInner",value:function(e){if(this==ji)return Pi;if(e.inlineContent||!this.local.some(Bi.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Bi||t.push(this.local[n]);return t}},{key:"forEachSet",value:function(e){e(this)}}],[{key:"create",value:function(e,t){return t.length?zi(t,e,0,Ni):ji}}])}();_i.empty=new _i([],[]),_i.removeOverlap=Ui;var ji=_i.empty,Ii=function(){function e(t){Zn(this,e),this.members=t}return Xn(e,[{key:"map",value:function(t,n){var r=this.members.map((function(e){return e.map(t,n,Ni)}));return e.from(r)}},{key:"forChild",value:function(t,n){if(n.isLeaf)return _i.empty;for(var r=[],o=0;o<this.members.length;o++){var i=this.members[o].forChild(t,n);i!=ji&&(i instanceof e?r=r.concat(i.members):r.push(i))}return e.from(r)}},{key:"eq",value:function(t){if(!(t instanceof e)||t.members.length!=this.members.length)return!1;for(var n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}},{key:"locals",value:function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(var i=0;i<o.length;i++)t.push(o[i])}else t=o}return t?Ui(n?t:t.sort($i)):Pi}},{key:"forEachSet",value:function(e){for(var t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}],[{key:"from",value:function(t){switch(t.length){case 0:return ji;case 1:return t[0];default:return new e(t.every((function(e){return e instanceof _i}))?t:t.reduce((function(e,t){return e.concat(t instanceof _i?t:t.members)}),[]))}}}])}();function Ri(e,t,n,r,o,i,a){for(var s=e.slice(),u=function(e){var t=0;n.maps[l].forEach((function(n,r,o,i){for(var a=i-o-(r-n),u=0;u<s.length;u+=3){var l=s[u+1];if(!(l<0||n>l+e-t)){var c=s[u]+e-t;r>=c?s[u+1]=n<=c?-2:-1:n>=e&&a&&(s[u]+=a,s[u+1]+=a)}}t+=a})),e=n.maps[l].map(e,-1),c=e},l=0,c=i;l<n.maps.length;l++)u(c);for(var d=!1,f=0;f<s.length;f+=3)if(s[f+1]<0){if(-2==s[f+1]){d=!0,s[f+1]=-1;continue}var p=n.map(e[f]+i),h=p-o;if(h<0||h>=r.content.size){d=!0;continue}var m=n.map(e[f+1]+i,-1)-o,v=r.content.findIndex(h),g=v.index,y=v.offset,b=r.maybeChild(g);if(b&&y==h&&y+b.nodeSize==m){var D=s[f+2].mapInner(n,b,p+1,e[f]+i+1,a);D!=ji?(s[f]=h,s[f+1]=m,s[f+2]=D):(s[f+1]=-2,d=!0)}else d=!0}if(d){var w=function(e,t,n,r,o,i,a){function s(e,t){for(var i=0;i<e.local.length;i++){var u=e.local[i].map(r,o,t);u?n.push(u):a.onRemove&&a.onRemove(e.local[i].spec)}for(var l=0;l<e.children.length;l+=3)s(e.children[l+2],e.children[l]+t+1)}for(var u=0;u<e.length;u+=3)-1==e[u+1]&&s(e[u+2],t[u]+i+1);return n}(s,e,t,n,o,i,a),C=zi(w,r,0,a);t=C.local;for(var k=0;k<s.length;k+=3)s[k+1]<0&&(s.splice(k,3),k-=3);for(var E=0,x=0;E<C.children.length;E+=3){for(var A=C.children[E];x<s.length&&s[x]<A;)x+=3;s.splice(x,0,C.children[E],C.children[E+1],C.children[E+2])}}return new _i(t.sort($i),s)}function Li(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(new Ti(o.from+t,o.to+t,o.type))}return n}function Hi(e,t,n){if(t.isLeaf)return null;for(var r,o=n+t.nodeSize,i=null,a=0;a<e.length;a++)(r=e[a])&&r.from>n&&r.to<o&&((i||(i=[])).push(r),e[a]=null);return i}function Vi(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function zi(e,t,n,r){var o=[],i=!1;t.forEach((function(t,a){var s=Hi(e,t,a+n);if(s){i=!0;var u=zi(s,t,n+a+1,r);u!=ji&&o.push(a,a+t.nodeSize,u)}}));for(var a=Li(i?Vi(e):e,-n).sort($i),s=0;s<a.length;s++)a[s].type.valid(t,a[s])||(r.onRemove&&r.onRemove(a[s].spec),a.splice(s--,1));return a.length||o.length?new _i(a,o):ji}function $i(e,t){return e.from-t.from||e.to-t.to}function Ui(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var o=n+1;o<t.length;o++){var i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),Gi(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),Gi(t,o+1,i.copy(r.to,i.to)))}}return t}function Gi(e,t,n){for(;t<e.length&&$i(n,e[t])>0;)t++;e.splice(t,0,n)}function Wi(e){var t=[];return e.someProp("decorations",(function(n){var r=n(e.state);r&&r!=ji&&t.push(r)})),e.cursorWrapper&&t.push(_i.create(e.state.doc,[e.cursorWrapper.deco])),Ii.from(t)}var qi={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Ki=vr&&gr<=11,Zi=function(){return Xn((function e(){Zn(this,e),this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}),[{key:"set",value:function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}},{key:"clear",value:function(){this.anchorNode=this.focusNode=null}},{key:"eq",value:function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}])}(),Ji=function(){return Xn((function e(t,n){var r=this;Zn(this,e),this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Zi,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)r.queue.push(e[t]);vr&&gr<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?r.flushSoon():r.flush()})),Ki&&(this.onCharData=function(e){r.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),r.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}),[{key:"flushSoon",value:function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){e.flushingSoon=-1,e.flush()}),20))}},{key:"forceFlush",value:function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}},{key:"start",value:function(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,qi)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}},{key:"stop",value:function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}},{key:"connectSelection",value:function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}},{key:"disconnectSelection",value:function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}},{key:"suppressSelectionUpdates",value:function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)}},{key:"onSelectionChange",value:function(){if(Mo(this.view)){if(this.suppressingSelectionUpdates)return wo(this.view);if(vr&&gr<=11&&!this.view.state.selection.empty){var e=this.view.domSelectionRange();if(e.focusNode&&rr(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}},{key:"setCurSelection",value:function(){this.currentSelection.set(this.view.domSelectionRange())}},{key:"ignoreSelectionChange",value:function(e){if(!e.focusNode)return!0;for(var t,n=new Set,r=e.focusNode;r;r=er(r))n.add(r);for(var o=e.anchorNode;o;o=er(o))if(n.has(o)){t=o;break}var i=t&&this.view.docView.nearestDesc(t);return i&&i.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}},{key:"pendingRecords",value:function(){if(this.observer){var e,t=Rn(this.observer.takeRecords());try{for(t.s();!(e=t.n()).done;){var n=e.value;this.queue.push(n)}}catch(e){t.e(e)}finally{t.f()}}return this.queue}},{key:"flush",value:function(){var e=this.view;if(e.docView&&!(this.flushingSoon>-1)){var t=this.pendingRecords();t.length&&(this.queue=[]);var n=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&Mo(e)&&!this.ignoreSelectionChange(n),o=-1,i=-1,a=!1,s=[];if(e.editable)for(var u=0;u<t.length;u++){var l=this.registerMutation(t[u],s);l&&(o=o<0?l.from:Math.min(l.from,o),i=i<0?l.to:Math.max(l.to,i),l.typeOver&&(a=!0))}if(yr&&s.length){var c=s.filter((function(e){return"BR"==e.nodeName}));if(2==c.length){var d=In(c,2),f=d[0],p=d[1];f.parentNode&&f.parentNode.parentNode==p.parentNode?p.remove():f.remove()}else{var h,m=this.currentSelection.focusNode,v=Rn(c);try{for(v.s();!(h=v.n()).done;){var g=h.value,y=g.parentNode;!y||"LI"!=y.nodeName||m&&ea(e,m)==y||g.remove()}}catch(e){v.e(e)}finally{v.f()}}}var b=null;o<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&ur(n)&&(b=bo(e))&&b.eq(hn.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,wo(e),this.currentSelection.set(n),e.scrollToSelection()):(o>-1||r)&&(o>-1&&(e.docView.markDirty(o,i),function(e){if(!Xi.has(e)&&(Xi.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace))){if(e.requiresGeckoHackNode=yr,Yi)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Yi=!0}}(e)),this.handleDOMChange(o,i,a,s),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||wo(e),this.currentSelection.set(n))}}},{key:"registerMutation",value:function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(var r=0;r<e.addedNodes.length;r++){var o=e.addedNodes[r];t.push(o),3==o.nodeType&&(this.lastChangedTextNode=o)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};var i=e.previousSibling,a=e.nextSibling;if(vr&&gr<=11&&e.addedNodes.length)for(var s=0;s<e.addedNodes.length;s++){var u=e.addedNodes[s],l=u.previousSibling,c=u.nextSibling;(!l||Array.prototype.indexOf.call(e.addedNodes,l)<0)&&(i=l),(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(a=c)}var d=i&&i.parentNode==e.target?Qn(i)+1:0,f=n.localPosFromDOM(e.target,d,-1),p=a&&a.parentNode==e.target?Qn(a):e.target.childNodes.length;return{from:f,to:n.localPosFromDOM(e.target,p,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}])}(),Xi=new WeakMap,Yi=!1;function Qi(e,t){var n=t.startContainer,r=t.startOffset,o=t.endContainer,i=t.endOffset,a=e.domAtPos(e.state.selection.anchor);if(rr(a.node,a.offset,o,i)){var s=[o,i,n,r];n=s[0],r=s[1],o=s[2],i=s[3]}return{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:i}}function ea(e,t){for(var n=t.parentNode;n&&n!=e.dom;n=n.parentNode){var r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function ta(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(Cr&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||Cr&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}var na=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function ra(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:So(e,t.resolve(n.anchor),t.resolve(n.head))}function oa(e,t,n){for(var r=e.depth,o=t?e.end():e.pos;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n)for(var i=e.node(r).maybeChild(e.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function ia(e){if(2!=e.length)return!1;var t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}var aa=function(){return Xn((function e(t,n){var r=this;Zn(this,e),this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new oi,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(da),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):"function"==typeof t?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=la(this),ua(this),this.nodeViews=ca(this),this.docView=no(this.state.doc,sa(this),Wi(this),this.dom,this),this.domObserver=new Ji(this,(function(e,t,n,o){return function(e,t,n,r,o){var i=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){var a=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,s=bo(e,a);if(s&&!e.state.selection.eq(s)){if(Dr&&Ar&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",(function(t){return t(e,lr(13,"Enter"))})))return;var u=e.state.tr.setSelection(s);"pointer"==a?u.setMeta("pointer",!0):"key"==a&&u.scrollIntoView(),i&&u.setMeta("composition",i),e.dispatch(u)}}else{var l=e.state.doc.resolve(t),c=l.sharedDepth(n);t=l.before(c+1),n=e.state.doc.resolve(n).after(c+1);var d,f,p=e.state.selection,h=function(e,t,n){var r,o=e.docView.parseRange(t,n),i=o.node,a=o.fromOffset,s=o.toOffset,u=o.from,l=o.to,c=e.domSelectionRange(),d=c.anchorNode;if(d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(r=[{node:d,offset:c.anchorOffset}],ur(c)||r.push({node:c.focusNode,offset:c.focusOffset})),Dr&&8===e.input.lastKeyCode)for(var f=s;f>a;f--){var p=i.childNodes[f-1],h=p.pmViewDesc;if("BR"==p.nodeName&&!h){s=f;break}if(!h||h.size)break}var m=e.state.doc,v=e.someProp("domParser")||He.fromSchema(e.state.schema),g=m.resolve(u),y=null,b=v.parse(i,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:a,to:s,preserveWhitespace:"pre"!=g.parent.type.whitespace||"full",findPositions:r,ruleFromNode:ta,context:g});if(r&&null!=r[0].pos){var D=r[0].pos,w=r[1]&&r[1].pos;null==w&&(w=D),y={anchor:D+u,head:w+u}}return{doc:b,sel:y,from:u,to:l}}(e,t,n),m=e.state.doc,v=m.slice(h.from,h.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(d=e.state.selection.to,f="end"):(d=e.state.selection.from,f="start"),e.input.lastKeyCode=null;var g=function(e,t,n,r,o){var i=e.findDiffStart(t,n);if(null==i)return null;var a=e.findDiffEnd(t,n+e.size,n+t.size),s=a.a,u=a.b;if("end"==o&&(r-=s+Math.max(0,i-Math.min(s,u))-i),s<i&&e.size<t.size){var l=r<=i&&r>=s?i-r:0;(i-=l)&&i<t.size&&ia(t.textBetween(i-1,i+1))&&(i+=l?1:-1),u=i+(u-s),s=i}else if(u<i){var c=r<=i&&r>=u?i-r:0;(i-=c)&&i<e.size&&ia(e.textBetween(i-1,i+1))&&(i+=c?1:-1),s=i+(s-u),u=i}return{start:i,endA:s,endB:u}}(v.content,h.doc.content,h.from,d,f);if(g&&e.input.domChangeCount++,(kr&&e.input.lastIOSEnter>Date.now()-225||Ar)&&o.some((function(e){return 1==e.nodeType&&!na.test(e.nodeName)}))&&(!g||g.endA>=g.endB)&&e.someProp("handleKeyDown",(function(t){return t(e,lr(13,"Enter"))})))e.input.lastIOSEnter=0;else{if(!g){if(!(r&&p instanceof yn&&!p.empty&&p.$head.sameParent(p.$anchor))||e.composing||h.sel&&h.sel.anchor!=h.sel.head){if(h.sel){var y=ra(e,e.state.doc,h.sel);if(y&&!y.eq(e.state.selection)){var b=e.state.tr.setSelection(y);i&&b.setMeta("composition",i),e.dispatch(b)}}return}g={start:p.from,endA:p.to,endB:p.to}}e.state.selection.from<e.state.selection.to&&g.start==g.endB&&e.state.selection instanceof yn&&(g.start>e.state.selection.from&&g.start<=e.state.selection.from+2&&e.state.selection.from>=h.from?g.start=e.state.selection.from:g.endA<e.state.selection.to&&g.endA>=e.state.selection.to-2&&e.state.selection.to<=h.to&&(g.endB+=e.state.selection.to-g.endA,g.endA=e.state.selection.to)),vr&&gr<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>h.from&&"  "==h.doc.textBetween(g.start-h.from-1,g.start-h.from+1)&&(g.start--,g.endA--,g.endB--);var D,w=h.doc.resolveNoCache(g.start-h.from),C=h.doc.resolveNoCache(g.endB-h.from),k=m.resolve(g.start),E=w.sameParent(C)&&w.parent.inlineContent&&k.end()>=g.endA;if((kr&&e.input.lastIOSEnter>Date.now()-225&&(!E||o.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName})))||!E&&w.pos<h.doc.content.size&&(!w.sameParent(C)||!w.parent.inlineContent)&&!/\S/.test(h.doc.textBetween(w.pos,C.pos,"",""))&&(D=hn.findFrom(h.doc.resolve(w.pos+1),1,!0))&&D.head>w.pos)&&e.someProp("handleKeyDown",(function(t){return t(e,lr(13,"Enter"))})))e.input.lastIOSEnter=0;else if(e.state.selection.anchor>g.start&&function(e,t,n,r,o){if(n-t<=o.pos-r.pos||oa(r,!0,!1)<o.pos)return!1;var i=e.resolve(t);if(!r.parent.isTextblock){var a=i.nodeAfter;return null!=a&&n==t+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=e.resolve(oa(i,!0,!0));return!(!s.parent.isTextblock||s.pos>n||oa(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(m,g.start,g.endA,w,C)&&e.someProp("handleKeyDown",(function(t){return t(e,lr(8,"Backspace"))})))Ar&&Dr&&e.domObserver.suppressSelectionUpdates();else{Dr&&g.endB==g.start&&(e.input.lastChromeDelete=Date.now()),Ar&&!E&&w.start()!=C.start()&&0==C.parentOffset&&w.depth==C.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==g.endA&&(g.endB-=2,C=h.doc.resolveNoCache(g.endB-h.from),setTimeout((function(){e.someProp("handleKeyDown",(function(t){return t(e,lr(13,"Enter"))}))}),20));var x,A=g.start,F=g.endA,S=function(t){var n=t||e.state.tr.replace(A,F,h.doc.slice(g.start-h.from,g.endB-h.from));if(h.sel){var r=ra(e,n.doc,h.sel);r&&!(Dr&&e.composing&&r.empty&&(g.start!=g.endB||e.input.lastChromeDelete<Date.now()-100)&&(r.head==A||r.head==n.mapping.map(F)-1)||vr&&r.empty&&r.head==A)&&n.setSelection(r)}return i&&n.setMeta("composition",i),n.scrollIntoView()};if(E){if(w.pos==C.pos){vr&&gr<=11&&0==w.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return wo(e)}),20));var M=S(e.state.tr.delete(A,F)),B=m.resolve(g.start).marksAcross(m.resolve(g.endA));B&&M.ensureMarks(B),e.dispatch(M)}else if(g.endA==g.endB&&(x=function(e,t){for(var n,r,o,i=e.firstChild.marks,a=t.firstChild.marks,s=i,u=a,l=0;l<a.length;l++)s=a[l].removeFromSet(s);for(var c=0;c<i.length;c++)u=i[c].removeFromSet(u);if(1==s.length&&0==u.length)r=s[0],n="add",o=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=s.length||1!=u.length)return null;r=u[0],n="remove",o=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var d=[],f=0;f<t.childCount;f++)d.push(o(t.child(f)));if(K.from(d).eq(e))return{mark:r,type:n}}(w.parent.content.cut(w.parentOffset,C.parentOffset),k.parent.content.cut(k.parentOffset,g.endA-k.start())))){var O=S(e.state.tr);"add"==x.type?O.addMark(A,F,x.mark):O.removeMark(A,F,x.mark),e.dispatch(O)}else if(w.parent.child(w.index()).isText&&w.index()==C.index()-(C.textOffset?0:1)){var T=w.parent.textBetween(w.parentOffset,C.parentOffset),P=function(){return S(e.state.tr.insertText(T,A,F))};e.someProp("handleTextInput",(function(t){return t(e,A,F,T,P)}))||e.dispatch(P())}}else e.dispatch(S())}}}}(r,e,t,n,o)})),this.domObserver.start(),function(e){var t=function(){var t=ti[n];e.dom.addEventListener(n,e.input.eventHandlers[n]=function(n){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,n)||si(e,n)||!e.editable&&n.type in ni||t(e,n)},ri[n]?{passive:!0}:void 0)};for(var n in ti)t();Cr&&e.dom.addEventListener("input",(function(){return null})),ai(e)}(this),this.updatePluginViews()}),[{key:"composing",get:function(){return this.input.composing}},{key:"props",get:function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props}},{key:"update",value:function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ai(this);var t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(da),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}},{key:"setProps",value:function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)}},{key:"updateState",value:function(e){this.updateStateInner(e,this._props)}},{key:"updateStateInner",value:function(e,t){var n,r=this.state,o=!1,i=!1;e.storedMarks&&this.composing&&(bi(this),i=!0),this.state=e;var a=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){var s=ca(this);(function(e,t){var n=0,r=0;for(var o in e){if(e[o]!=t[o])return!0;n++}for(var i in t)r++;return n!=r})(s,this.nodeViews)&&(this.nodeViews=s,o=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&ai(this),this.editable=la(this),ua(this);var u=Wi(this),l=sa(this),c=r.plugins==e.plugins||r.doc.eq(e.doc)?e.scrollToSelection>r.scrollToSelection?"to selection":"preserve":"reset",d=o||!this.docView.matchesNode(e.doc,l,u);!d&&e.selection.eq(r.selection)||(i=!0);var f,p,h,m,v,g,y,b,D,w,C="preserve"==c&&i&&null==this.dom.style.overflowAnchor&&function(e){for(var t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,a=o+1;a<Math.min(innerHeight,r.bottom);a+=5){var s=e.root.elementFromPoint(i,a);if(s&&s!=e.dom&&e.dom.contains(s)){var u=s.getBoundingClientRect();if(u.top>=o-20){t=s,n=u.top;break}}}return{refDOM:t,refTop:n,stack:Pr(e.dom)}}(this);if(i){this.domObserver.stop();var k=d&&(vr||Dr)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&(m=r.selection,v=e.selection,g=Math.min(m.$anchor.sharedDepth(m.head),v.$anchor.sharedDepth(v.head)),m.$anchor.start(g)!=v.$anchor.start(g));if(d){var E=Dr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=function(e){var t=e.domSelectionRange();if(!t.focusNode)return null;var n=function(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=ar(e=e.childNodes[t-1])}else{if(!e.parentNode||sr(e))return null;t=Qn(e),e=e.parentNode}}}(t.focusNode,t.focusOffset),r=function(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||sr(e))return null;t=Qn(e)+1,e=e.parentNode}}}(t.focusNode,t.focusOffset);if(n&&r&&n!=r){var o=r.pmViewDesc,i=e.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!o||!o.isText(r.nodeValue))return r;if(e.input.compositionNode==r){var a=n.pmViewDesc;if(a&&a.isText(n.nodeValue))return r}}return n||r}(this)),!o&&this.docView.update(e.doc,l,u,this)||(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=no(e.doc,l,u,this.dom,this)),E&&!this.trackWrites&&(k=!0)}k||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&(f=this,p=f.docView.domFromPos(f.state.selection.anchor,0),h=f.domSelectionRange(),rr(p.node,p.offset,h.anchorNode,h.anchorOffset)))?wo(this,k):(Ao(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),(null===(n=this.dragging)||void 0===n?void 0:n.node)&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),"reset"==c?this.dom.scrollTop=0:"to selection"==c?this.scrollToSelection():C&&(b=(y=C).refDOM,D=y.refTop,Nr(y.stack,0==(w=b?b.getBoundingClientRect().top:0)?0:w-D))}},{key:"scrollToSelection",value:function(){var e=this,t=this.domSelectionRange().focusNode;if(t&&this.dom.contains(1==t.nodeType?t:t.parentNode))if(this.someProp("handleScrollToSelection",(function(t){return t(e)})));else if(this.state.selection instanceof Dn){var n=this.docView.domAfterPos(this.state.selection.from);1==n.nodeType&&Tr(this,n.getBoundingClientRect(),t)}else Tr(this,this.coordsAtPos(this.state.selection.head,1),t)}},{key:"destroyPluginViews",value:function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()}},{key:"updatePluginViews",value:function(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var r=0;r<this.directPlugins.length;r++){var o=this.directPlugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}for(var i=0;i<this.state.plugins.length;i++){var a=this.state.plugins[i];a.spec.view&&this.pluginViews.push(a.spec.view(this))}}}},{key:"updateDraggedNode",value:function(e,t){var n=e.node,r=-1;if(this.state.doc.nodeAt(n.from)==n.node)r=n.from;else{var o=n.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==n.node&&(r=o)}this.dragging=new Ei(e.slice,e.move,r<0?void 0:Dn.create(this.state.doc,r))}},{key:"someProp",value:function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(var o=0;o<this.directPlugins.length;o++){var i=this.directPlugins[o].props[e];if(null!=i&&(n=t?t(i):i))return n}var a=this.state.plugins;if(a)for(var s=0;s<a.length;s++){var u=a[s].props[e];if(null!=u&&(n=t?t(u):u))return n}}},{key:"hasFocus",value:function(){if(vr){var e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}},{key:"focus",value:function(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(_r)return e.focus(_r);var t=Pr(e);e.focus(null==_r?{get preventScroll(){return _r={preventScroll:!0},!0}}:void 0),_r||(_r=!1,Nr(t,0))}(this.dom),wo(this),this.domObserver.start()}},{key:"root",get:function(){var e=this,t=this._root;if(null==t)for(var n,r=function(t){if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return t.ownerDocument.getSelection()}),{v:e._root=t}},o=this.dom.parentNode;o;o=o.parentNode)if(n=r(o))return n.v;return t||document}},{key:"updateRoot",value:function(){this._root=null}},{key:"posAtCoords",value:function(e){return Lr(this,e)}},{key:"coordsAtPos",value:function(e){return $r(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}},{key:"domAtPos",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.domFromPos(e,t)}},{key:"nodeDOM",value:function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null}},{key:"posAtDOM",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}},{key:"endOfTextblock",value:function(e,t){return function(e,t,n){return Kr==t&&Zr==n?Jr:(Kr=t,Zr=n,Jr="up"==n||"down"==n?function(e,t,n){var r=t.selection,o="up"==n?r.$from:r.$to;return Wr(e,t,(function(){for(var t=e.docView.domFromPos(o.pos,"up"==n?-1:1).node;;){var r=e.docView.nearestDesc(t,!0);if(!r)break;if(r.node.isBlock){t=r.contentDOM||r.dom;break}t=r.dom.parentNode}for(var i=$r(e,o.pos,1),a=t.firstChild;a;a=a.nextSibling){var s=void 0;if(1==a.nodeType)s=a.getClientRects();else{if(3!=a.nodeType)continue;s=nr(a,0,a.nodeValue.length).getClientRects()}for(var u=0;u<s.length;u++){var l=s[u];if(l.bottom>l.top+1&&("up"==n?i.top-l.top>2*(l.bottom-i.top):l.bottom-i.bottom>2*(i.bottom-l.top)))return!1}}return!0}))}(e,t,n):function(e,t,n){var r=t.selection.$head;if(!r.parent.isTextblock)return!1;var o=r.parentOffset,i=!o,a=o==r.parent.content.size,s=e.domSelection();return s?qr.test(r.parent.textContent)&&s.modify?Wr(e,t,(function(){var t=e.domSelectionRange(),o=t.focusNode,i=t.focusOffset,a=t.anchorNode,u=t.anchorOffset,l=s.caretBidiLevel;s.modify("move",n,"character");var c=r.depth?e.docView.domAfterPos(r.before()):e.dom,d=e.domSelectionRange(),f=d.focusNode,p=d.focusOffset,h=f&&!c.contains(1==f.nodeType?f:f.parentNode)||o==f&&i==p;try{s.collapse(a,u),o&&(o!=a||i!=u)&&s.extend&&s.extend(o,i)}catch(e){}return null!=l&&(s.caretBidiLevel=l),h})):"left"==n||"backward"==n?i:a:r.pos==r.start()||r.pos==r.end()}(e,t,n))}(this,t||this.state,e)}},{key:"pasteHTML",value:function(e,t){return Ci(this,"",e,!1,t||new ClipboardEvent("paste"))}},{key:"pasteText",value:function(e,t){return Ci(this,e,null,!0,t||new ClipboardEvent("paste"))}},{key:"serializeForClipboard",value:function(e){return $o(this,e)}},{key:"destroy",value:function(){this.docView&&(function(e){for(var t in e.domObserver.stop(),e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Wi(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,tr=null)}},{key:"isDestroyed",get:function(){return null==this.docView}},{key:"dispatchEvent",value:function(e){return function(e,t){si(e,t)||!ti[t.type]||!e.editable&&t.type in ni||ti[t.type](e,t)}(this,e)}},{key:"domSelectionRange",value:function(){var e=this.domSelection();return e?Cr&&11===this.root.nodeType&&function(e){for(var t=e.activeElement;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){if(t.getComposedRanges){var n=t.getComposedRanges(e.root)[0];if(n)return Qi(e,n)}var r;function o(e){e.preventDefault(),e.stopImmediatePropagation(),r=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",o,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",o,!0),r?Qi(e,r):null}(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}},{key:"domSelection",value:function(){return this.root.getSelection()}}])}();function sa(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var r in n)"class"==r?t.class+=" "+n[r]:"style"==r?t.style=(t.style?t.style+";":"")+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))})),t.translate||(t.translate="no"),[Ti.node(0,e.state.doc.content.size,t)]}function ua(e){if(e.markCursor){var t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Ti.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function la(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function ca(e){var t=Object.create(null);function n(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function da(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}aa.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};for(var fa={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},pa={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ha="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),ma="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),va=0;va<10;va++)fa[48+va]=fa[96+va]=String(va);for(va=1;va<=24;va++)fa[va+111]="F"+va;for(va=65;va<=90;va++)fa[va]=String.fromCharCode(va+32),pa[va]=String.fromCharCode(va);for(var ga in fa)pa.hasOwnProperty(ga)||(pa[ga]=fa[ga]);var ya="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),ba="undefined"!=typeof navigator&&/Win/.test(navigator.platform);function Da(e){var t,n,r,o,i=e.split(/-(?!$)/),a=i[i.length-1];"Space"==a&&(a=" ");for(var s=0;s<i.length-1;s++){var u=i[s];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))t=!0;else if(/^(c|ctrl|control)$/i.test(u))n=!0;else if(/^s(hift)?$/i.test(u))r=!0;else{if(!/^mod$/i.test(u))throw new Error("Unrecognized modifier name: "+u);ya?o=!0:n=!0}}return t&&(a="Alt-"+a),n&&(a="Ctrl-"+a),o&&(a="Meta-"+a),r&&(a="Shift-"+a),a}function wa(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function Ca(e){var t=function(e){var t=Object.create(null);for(var n in e)t[Da(n)]=e[n];return t}(e);return function(e,n){var r,o=function(e){var t=!(ha&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||ma&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?pa:fa)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),i=t[wa(o,n)];if(i&&i(e.state,e.dispatch,e))return!0;if(1==o.length&&" "!=o){if(n.shiftKey){var a=t[wa(o,n,!1)];if(a&&a(e.state,e.dispatch,e))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(ba&&n.ctrlKey&&n.altKey)&&(r=fa[n.keyCode])&&r!=o){var s=t[wa(r,n)];if(s&&s(e.state,e.dispatch,e))return!0}}return!1}}var ka=function(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)};function Ea(e,t){var n=e.selection.$cursor;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}var xa=function(e,t,n){var r=Ea(e,n);if(!r)return!1;var o=Ma(r);if(!o){var i=r.blockRange(),a=i&&Bt(i);return null!=a&&(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)}var s=o.nodeBefore;if(La(e,o,t,-1))return!0;if(0==r.parent.content.size&&(Fa(s,"end")||Dn.isSelectable(s)))for(var u=r.depth;;u--){var l=Ht(e.doc,r.before(u),r.after(u),ee.empty);if(l&&l.slice.size<l.to-l.from){if(t){var c=e.tr.step(l);c.setSelection(Fa(s,"end")?hn.findFrom(c.doc.resolve(c.mapping.map(o.pos,-1)),-1):Dn.create(c.doc,o.pos-s.nodeSize)),t(c.scrollIntoView())}return!0}if(1==u||r.node(u-1).childCount>1)break}return!(!s.isAtom||o.depth!=r.depth-1||(t&&t(e.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),0))};function Aa(e,t,n){for(var r=t.nodeBefore,o=t.pos-1;!r.isTextblock;o--){if(r.type.spec.isolating)return!1;var i=r.lastChild;if(!i)return!1;r=i}for(var a=t.nodeAfter,s=t.pos+1;!a.isTextblock;s++){if(a.type.spec.isolating)return!1;var u=a.firstChild;if(!u)return!1;a=u}var l=Ht(e.doc,o,s,ee.empty);if(!l||l.from!=o||l instanceof xt&&l.slice.size>=s-o)return!1;if(n){var c=e.tr.step(l);c.setSelection(yn.create(c.doc,o)),n(c.scrollIntoView())}return!0}function Fa(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}var Sa=function(e,t,n){var r=e.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):o.parentOffset>0)return!1;i=Ma(o)}var a=i&&i.nodeBefore;return!(!a||!Dn.isSelectable(a)||(t&&t(e.tr.setSelection(Dn.create(e.doc,i.pos-a.nodeSize)).scrollIntoView()),0))};function Ma(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function Ba(e,t){var n=e.selection.$cursor;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}var Oa=function(e,t,n){var r=Ba(e,n);if(!r)return!1;var o=Pa(r);if(!o)return!1;var i=o.nodeAfter;if(La(e,o,t,1))return!0;if(0==r.parent.content.size&&(Fa(i,"start")||Dn.isSelectable(i))){var a=Ht(e.doc,r.before(),r.after(),ee.empty);if(a&&a.slice.size<a.to-a.from){if(t){var s=e.tr.step(a);s.setSelection(Fa(i,"start")?hn.findFrom(s.doc.resolve(s.mapping.map(o.pos)),1):Dn.create(s.doc,s.mapping.map(o.pos))),t(s.scrollIntoView())}return!0}}return!(!i.isAtom||o.depth!=r.depth-1||(t&&t(e.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),0))},Ta=function(e,t,n){var r=e.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size)return!1;i=Pa(o)}var a=i&&i.nodeAfter;return!(!a||!Dn.isSelectable(a)||(t&&t(e.tr.setSelection(Dn.create(e.doc,i.pos)).scrollIntoView()),0))};function Pa(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}var Na=function(e,t){var n=e.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o)||(t&&t(e.tr.insertText("\n").scrollIntoView()),0))};function _a(e){for(var t=0;t<e.edgeCount;t++){var n=e.edge(t).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}var ja=function(e,t){var n=e.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var i=r.node(-1),a=r.indexAfter(-1),s=_a(i.contentMatchAt(a));if(!s||!i.canReplaceWith(a,a,s))return!1;if(t){var u=r.after(),l=e.tr.replaceWith(u,u,s.createAndFill());l.setSelection(hn.near(l.doc.resolve(u),1)),t(l.scrollIntoView())}return!0},Ia=function(e,t){var n=e.selection,r=n.$from,o=n.$to;if(n instanceof Cn||r.parent.inlineContent||o.parent.inlineContent)return!1;var i=_a(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){var a=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,s=e.tr.insert(a,i.createAndFill());s.setSelection(yn.create(s.doc,a+1)),t(s.scrollIntoView())}return!0},Ra=function(e,t){var n=e.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var r=n.before();if(_t(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}var o=n.blockRange(),i=o&&Bt(o);return null!=i&&(t&&t(e.tr.lift(o,i).scrollIntoView()),!0)};function La(e,t,n,r){var o,i,a=t.nodeBefore,s=t.nodeAfter,u=a.type.spec.isolating||s.type.spec.isolating;if(!u&&function(e,t,n){var r=t.nodeBefore,o=t.nodeAfter,i=t.index();return!(!(r&&o&&r.type.compatibleContent(o.type))||(!r.content.size&&t.parent.canReplace(i-1,i)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(i,i+1)||!o.isTextblock&&!jt(e.doc,t.pos)||(n&&n(e.tr.join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;var l=!u&&t.parent.canReplace(t.index(),t.index()+1);if(l&&(o=(i=a.contentMatchAt(a.childCount)).findWrapping(s.type))&&i.matchType(o[0]||s.type).validEnd){if(n){for(var c=t.pos+s.nodeSize,d=K.empty,f=o.length-1;f>=0;f--)d=K.from(o[f].create(null,d));d=K.from(a.copy(d));var p=e.tr.step(new At(t.pos-1,c,t.pos,c,new ee(d,1,0),o.length,!0)),h=p.doc.resolve(c+2*o.length);h.nodeAfter&&h.nodeAfter.type==a.type&&jt(p.doc,h.pos)&&p.join(h.pos),n(p.scrollIntoView())}return!0}var m=s.type.spec.isolating||r>0&&u?null:hn.findFrom(t,1),v=m&&m.$from.blockRange(m.$to),g=v&&Bt(v);if(null!=g&&g>=t.depth)return n&&n(e.tr.lift(v,g).scrollIntoView()),!0;if(l&&Fa(s,"start",!0)&&Fa(a,"end")){for(var y=a,b=[];b.push(y),!y.isTextblock;)y=y.lastChild;for(var D=s,w=1;!D.isTextblock;D=D.firstChild)w++;if(y.canReplace(y.childCount,y.childCount,D.content)){if(n){for(var C=K.empty,k=b.length-1;k>=0;k--)C=K.from(b[k].copy(C));n(e.tr.step(new At(t.pos-b.length,t.pos+s.nodeSize,t.pos+w,t.pos+s.nodeSize-w,new ee(C,b.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function Ha(e){return function(t,n){for(var r=t.selection,o=e<0?r.$from:r.$to,i=o.depth;o.node(i).isInline;){if(!i)return!1;i--}return!!o.node(i).isTextblock&&(n&&n(t.tr.setSelection(yn.create(t.doc,e<0?o.start(i):o.end(i)))),!0)}}var Va=Ha(-1),za=Ha(1);function $a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){for(var o=!1,i=0;i<n.selection.ranges.length&&!o;i++){var a=n.selection.ranges[i],s=a.$from.pos,u=a.$to.pos;n.doc.nodesBetween(s,u,(function(r,i){if(o)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)o=!0;else{var a=n.doc.resolve(i),s=a.index();o=a.parent.canReplaceWith(s,s+1,e)}}))}if(!o)return!1;if(r){for(var l=n.tr,c=0;c<n.selection.ranges.length;c++){var d=n.selection.ranges[c],f=d.$from.pos,p=d.$to.pos;l.setBlockType(f,p,e,t)}r(l.scrollIntoView())}return!0}}function Ua(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,r){for(var o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}var Ga=Ua(ka,xa,Sa),Wa=Ua(ka,Oa,Ta),qa={Enter:Ua(Na,Ia,Ra,(function(e,t){var n=e.selection,r=n.$from;n.$to;if(e.selection instanceof Dn&&e.selection.node.isBlock)return!(!r.parentOffset||!_t(e.doc,r.pos)||(t&&t(e.tr.split(r.pos).scrollIntoView()),0));if(!r.depth)return!1;for(var o,i,a=[],s=!1,u=!1,l=r.depth;;l--){if(r.node(l).isBlock){s=r.end(l)==r.pos+(r.depth-l),u=r.start(l)==r.pos-(r.depth-l),i=_a(r.node(l-1).contentMatchAt(r.indexAfter(l-1)));a.unshift(s&&i?{type:i}:null),o=l;break}if(1==l)return!1;a.unshift(null)}var c=e.tr;(e.selection instanceof yn||e.selection instanceof Cn)&&c.deleteSelection();var d=c.mapping.map(r.pos),f=_t(c.doc,d,a.length,a);if(f||(a[0]=i?{type:i}:null,f=_t(c.doc,d,a.length,a)),!f)return!1;if(c.split(d,a.length,a),!s&&u&&r.node(o).type!=i){var p=c.mapping.map(r.before(o)),h=c.doc.resolve(p);i&&r.node(o-1).canReplaceWith(h.index(),h.index()+1,i)&&c.setNodeMarkup(c.mapping.map(r.before(o)),i)}return t&&t(c.scrollIntoView()),!0})),"Mod-Enter":ja,Backspace:Ga,"Mod-Backspace":Ga,"Shift-Backspace":Ga,Delete:Wa,"Mod-Delete":Wa,"Mod-a":function(e,t){return t&&t(e.tr.setSelection(new Cn(e.doc))),!0}},Ka={"Ctrl-h":qa.Backspace,"Alt-Backspace":qa["Mod-Backspace"],"Ctrl-d":qa.Delete,"Ctrl-Alt-Backspace":qa["Mod-Delete"],"Alt-Delete":qa["Mod-Delete"],"Alt-d":qa["Mod-Delete"],"Ctrl-a":Va,"Ctrl-e":za};for(var Za in qa)Ka[Za]=qa[Za];function Ja(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ja=function(){return!!e})()}function Xa(e){return Xa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xa(e)}function Ya(e,t){return Ya=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ya(e,t)}function Qa(e){return Qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qa(e)}function es(e){return function(e){if(Array.isArray(e))return rs(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ns(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ts(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||ns(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ns(e,t){if(e){if("string"==typeof e)return rs(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rs(e,t):void 0}}function rs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function is(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function as(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ds(r.key),r)}}function ss(e,t,n){return t&&as(e.prototype,t),n&&as(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function us(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ls(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?us(Object(n),!0).forEach((function(t){cs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):us(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cs(e,t,n){return(t=ds(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ds(e){var t=function(e){if("object"!=Qa(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Qa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Qa(t)?t:t+""}function fs(e){var t=e.state,n=e.transaction,r=n.selection,o=n.doc,i=n.storedMarks;return ls(ls({},t),{},{apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}})}"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();var ps=function(){return ss((function e(t){is(this,e),this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}),[{key:"hasCustomState",get:function(){return!!this.customState}},{key:"state",get:function(){return this.customState||this.editor.state}},{key:"commands",get:function(){var e=this,t=this.rawCommands,n=this.editor,r=this.state,o=n.view,i=r.tr,a=this.buildProps(i);return Object.fromEntries(Object.entries(t).map((function(t){var n=ts(t,2),r=n[0],s=n[1];return[r,function(){var t=s.apply(void 0,arguments)(a);return i.getMeta("preventDispatch")||e.hasCustomState||o.dispatch(i),t}]})))}},{key:"chain",get:function(){var e=this;return function(){return e.createChain()}}},{key:"can",get:function(){var e=this;return function(){return e.createCan()}}},{key:"createChain",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.rawCommands,o=this.editor,i=this.state,a=o.view,s=[],u=!!e,l=e||i.tr,c=ls(ls({},Object.fromEntries(Object.entries(r).map((function(e){var r=ts(e,2),o=r[0],i=r[1];return[o,function(){var e=t.buildProps(l,n),r=i.apply(void 0,arguments)(e);return s.push(r),c}]})))),{},{run:function(){return u||!n||l.getMeta("preventDispatch")||t.hasCustomState||a.dispatch(l),s.every((function(e){return!0===e}))}});return c}},{key:"createCan",value:function(e){var t=this,n=this.rawCommands,r=this.state,o=!1,i=e||r.tr,a=this.buildProps(i,o),s=Object.fromEntries(Object.entries(n).map((function(e){var t=ts(e,2),n=t[0],r=t[1];return[n,function(){return r.apply(void 0,arguments)(ls(ls({},a),{},{dispatch:void 0}))}]})));return ls(ls({},s),{},{chain:function(){return t.createChain(i,o)}})}},{key:"buildProps",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.rawCommands,o=this.editor,i=this.state,a=o.view,s={tr:e,editor:o,view:a,state:fs({state:i,transaction:e}),dispatch:n?function(){}:void 0,chain:function(){return t.createChain(e,n)},can:function(){return t.createCan(e)},get commands(){return Object.fromEntries(Object.entries(r).map((function(e){var t=ts(e,2),n=t[0],r=t[1];return[n,function(){return r.apply(void 0,arguments)(s)}]})))}};return s}}])}(),hs=function(){return ss((function e(){is(this,e),this.callbacks={}}),[{key:"on",value:function(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=this.callbacks[e];return i&&i.forEach((function(e){return e.apply(t,r)})),this}},{key:"off",value:function(e,t){var n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter((function(e){return e!==t})):delete this.callbacks[e]),this}},{key:"once",value:function(e,t){var n=this,r=function(){n.off(e,r);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];t.apply(n,i)};return this.on(e,r)}},{key:"removeAllListeners",value:function(){this.callbacks={}}}])}();function ms(e,t,n){return void 0===e.config[t]&&e.parent?ms(e.parent,t,n):"function"==typeof e.config[t]?e.config[t].bind(ls(ls({},n),{},{parent:e.parent?ms(e.parent,t,n):null})):e.config[t]}function vs(e){return{baseExtensions:e.filter((function(e){return"extension"===e.type})),nodeExtensions:e.filter((function(e){return"node"===e.type})),markExtensions:e.filter((function(e){return"mark"===e.type}))}}function gs(e){var t=[],n=vs(e),r=n.nodeExtensions,o=n.markExtensions,i=[].concat(es(r),es(o)),a={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach((function(e){var n=ms(e,"addGlobalAttributes",{name:e.name,options:e.options,storage:e.storage,extensions:i});n&&n().forEach((function(e){e.types.forEach((function(n){Object.entries(e.attributes).forEach((function(e){var r=ts(e,2),o=r[0],i=r[1];t.push({type:n,name:o,attribute:ls(ls({},a),i)})}))}))}))})),i.forEach((function(e){var n={name:e.name,options:e.options,storage:e.storage},r=ms(e,"addAttributes",n);if(r){var o=r();Object.entries(o).forEach((function(n){var r=ts(n,2),o=r[0],i=r[1],s=ls(ls({},a),i);"function"==typeof(null==s?void 0:s.default)&&(s.default=s.default()),(null==s?void 0:s.isRequired)&&void 0===(null==s?void 0:s.default)&&delete s.default,t.push({type:e.name,name:o,attribute:s})}))}})),t}function ys(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error("There is no node type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.nodes[e]}return e}function bs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return!!e})).reduce((function(e,t){var n=ls({},e);return Object.entries(t).forEach((function(e){var t=ts(e,2),r=t[0],o=t[1];if(n[r])if("class"===r){var i=o?String(o).split(" "):[],a=n[r]?n[r].split(" "):[],s=i.filter((function(e){return!a.includes(e)}));n[r]=[].concat(es(a),es(s)).join(" ")}else if("style"===r){var u=o?o.split(";").map((function(e){return e.trim()})).filter(Boolean):[],l=n[r]?n[r].split(";").map((function(e){return e.trim()})).filter(Boolean):[],c=new Map;l.forEach((function(e){var t=ts(e.split(":").map((function(e){return e.trim()})),2),n=t[0],r=t[1];c.set(n,r)})),u.forEach((function(e){var t=ts(e.split(":").map((function(e){return e.trim()})),2),n=t[0],r=t[1];c.set(n,r)})),n[r]=Array.from(c.entries()).map((function(e){var t=ts(e,2),n=t[0],r=t[1];return"".concat(n,": ").concat(r)})).join("; ")}else n[r]=o;else n[r]=o})),n}),{})}function Ds(e,t){return t.filter((function(t){return t.type===e.type.name})).filter((function(e){return e.attribute.rendered})).map((function(t){return t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:cs({},t.name,e.attrs[t.name])})).reduce((function(e,t){return bs(e,t)}),{})}function ws(e){return"function"==typeof e}function Cs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(ws(e)){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return t?e.bind(t).apply(void 0,r):e.apply(void 0,r)}return e}function ks(e,t){return"style"in e?e:ls(ls({},e),{},{getAttrs:function(n){var r=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===r)return!1;var o=t.reduce((function(e,t){var r=t.attribute.parseHTML?t.attribute.parseHTML(n):function(e){return"string"!=typeof e?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):"true"===e||"false"!==e&&e}(n.getAttribute(t.name));return null==r?e:ls(ls({},e),{},cs({},t.name,r))}),{});return ls(ls({},r),o)}})}function Es(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=ts(e,2),n=t[0],r=t[1];return("attrs"!==n||!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===Object.keys(e).length&&e.constructor===Object}(r))&&null!=r})))}function xs(e,t){var n,r=gs(e),o=vs(e),i=o.nodeExtensions,a=o.markExtensions,s=null===(n=i.find((function(e){return ms(e,"topNode")})))||void 0===n?void 0:n.name,u=Object.fromEntries(i.map((function(n){var o=r.filter((function(e){return e.type===n.name})),i={name:n.name,options:n.options,storage:n.storage,editor:t},a=e.reduce((function(e,t){var r=ms(t,"extendNodeSchema",i);return ls(ls({},e),r?r(n):{})}),{}),s=Es(ls(ls({},a),{},{content:Cs(ms(n,"content",i)),marks:Cs(ms(n,"marks",i)),group:Cs(ms(n,"group",i)),inline:Cs(ms(n,"inline",i)),atom:Cs(ms(n,"atom",i)),selectable:Cs(ms(n,"selectable",i)),draggable:Cs(ms(n,"draggable",i)),code:Cs(ms(n,"code",i)),whitespace:Cs(ms(n,"whitespace",i)),linebreakReplacement:Cs(ms(n,"linebreakReplacement",i)),defining:Cs(ms(n,"defining",i)),isolating:Cs(ms(n,"isolating",i)),attrs:Object.fromEntries(o.map((function(e){var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]})))})),u=Cs(ms(n,"parseHTML",i));u&&(s.parseDOM=u.map((function(e){return ks(e,o)})));var l=ms(n,"renderHTML",i);l&&(s.toDOM=function(e){return l({node:e,HTMLAttributes:Ds(e,o)})});var c=ms(n,"renderText",i);return c&&(s.toText=c),[n.name,s]}))),l=Object.fromEntries(a.map((function(n){var o=r.filter((function(e){return e.type===n.name})),i={name:n.name,options:n.options,storage:n.storage,editor:t},a=e.reduce((function(e,t){var r=ms(t,"extendMarkSchema",i);return ls(ls({},e),r?r(n):{})}),{}),s=Es(ls(ls({},a),{},{inclusive:Cs(ms(n,"inclusive",i)),excludes:Cs(ms(n,"excludes",i)),group:Cs(ms(n,"group",i)),spanning:Cs(ms(n,"spanning",i)),code:Cs(ms(n,"code",i)),attrs:Object.fromEntries(o.map((function(e){var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]})))})),u=Cs(ms(n,"parseHTML",i));u&&(s.parseDOM=u.map((function(e){return ks(e,o)})));var l=ms(n,"renderHTML",i);return l&&(s.toDOM=function(e){return l({mark:e,HTMLAttributes:Ds(e,o)})}),[n.name,s]})));return new Re({topNode:s,nodes:u,marks:l})}function As(e,t){return t.nodes[e]||t.marks[e]||null}function Fs(e,t){return Array.isArray(t)?t.some((function(t){return("string"==typeof t?t:t.name)===e.name})):t}function Ss(e,t){var n=Je.fromSchema(t).serializeFragment(e),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}function Ms(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var Bs=ss((function e(t){is(this,e),this.find=t.find,this.handler=t.handler}));function Os(e){var t,n=e.editor,r=e.from,o=e.to,i=e.text,a=e.rules,s=e.plugin,u=n.view;if(u.composing)return!1;var l=u.state.doc.resolve(r);if(l.parent.type.spec.code||(null===(t=l.nodeBefore||l.nodeAfter)||void 0===t?void 0:t.marks.find((function(e){return e.type.spec.code}))))return!1;var c=!1,d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n="",r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(function(e,t,o,i){var a,s,u=(null===(s=(a=e.type.spec).toText)||void 0===s?void 0:s.call(a,{node:e,pos:t,parent:o,index:i}))||e.textContent||"%leaf%";n+=e.isAtom&&!e.isText?u:u.slice(0,Math.max(0,r-t))})),n}(l)+i;return a.forEach((function(e){if(!c){var t=function(e,t){if(Ms(t))return t.exec(e);var n=t(e);if(!n)return null;var r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r}(d,e.find);if(t){var a=u.state.tr,l=fs({state:u.state,transaction:a}),f={from:r-(t[0].length-i.length),to:o},p=new ps({editor:n,state:l}),h=p.commands,m=p.chain,v=p.can;null!==e.handler({state:l,range:f,match:t,commands:h,chain:m,can:v})&&a.steps.length&&(a.setMeta(s,{transform:a,from:r,to:o,text:i}),u.dispatch(a),c=!0)}}})),c}function Ts(e){var t=e.editor,n=e.rules,r=new Pn({state:{init:function(){return null},apply:function(e,o,i){var a=e.getMeta(r);if(a)return a;var s=e.getMeta("applyInputRules");return!!s&&setTimeout((function(){var e=s.text;"string"==typeof e||(e=Ss(K.from(e),i.schema));var o=s.from,a=o+e.length;Os({editor:t,from:o,to:a,text:e,rules:n,plugin:r})})),e.selectionSet||e.docChanged?null:o}},props:{handleTextInput:function(e,o,i,a){return Os({editor:t,from:o,to:i,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:function(e){return setTimeout((function(){var o=e.state.selection.$cursor;o&&Os({editor:t,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})})),!1}},handleKeyDown:function(e,o){if("Enter"!==o.key)return!1;var i=e.state.selection.$cursor;return!!i&&Os({editor:t,from:i.pos,to:i.pos,text:"\n",rules:n,plugin:r})}},isInputRules:!0});return r}function Ps(e){return"Object"===function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function Ns(e,t){var n=ls({},e);return Ps(e)&&Ps(t)&&Object.keys(t).forEach((function(r){Ps(t[r])&&Ps(e[r])?n[r]=Ns(e[r],t[r]):n[r]=t[r]})),n}var _s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};is(this,e),this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=ls(ls({},this.config),t),this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Cs(ms(this,"addOptions",{name:this.name}))),this.storage=Cs(ms(this,"addStorage",{name:this.name,options:this.options}))||{}}return ss(e,[{key:"configure",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.extend(ls(ls({},this.config),{},{addOptions:function(){return Ns(e.options,t)}}));return n.name=this.name,n.parent=this.parent,n}},{key:"extend",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new e(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(n.name,'".')),n.options=Cs(ms(n,"addOptions",{name:n.name})),n.storage=Cs(ms(n,"addStorage",{name:n.name,options:n.options})),n}}],[{key:"create",value:function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}},{key:"handleExit",value:function(e){var t=e.editor,n=e.mark,r=t.state.tr,o=t.state.selection.$from;if(o.pos===o.end()){var i=o.marks();if(!i.find((function(e){return(null==e?void 0:e.type.name)===n.name})))return!1;var a=i.find((function(e){return(null==e?void 0:e.type.name)===n.name}));return a&&r.removeStoredMark(a),r.insertText(" ",o.pos),t.view.dispatch(r),!0}return!1}}])}(),js=ss((function e(t){is(this,e),this.find=t.find,this.handler=t.handler}));var Is=null;function Rs(e){var t,n=e.editor,r=e.rules,o=null,i=!1,a=!1,s="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null;try{t="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch(e){t=null}var u=function(e){var r=e.state,o=e.from,i=e.to,a=e.rule,u=e.pasteEvt,l=r.tr,c=fs({state:r,transaction:l});if(function(e){var t=e.editor,n=e.state,r=e.from,o=e.to,i=e.rule,a=e.pasteEvent,s=e.dropEvent,u=new ps({editor:t,state:n}),l=u.commands,c=u.chain,d=u.can,f=[];return n.doc.nodesBetween(r,o,(function(e,t){if(e.isTextblock&&!e.type.spec.code){var u=Math.max(r,t),p=Math.min(o,t+e.content.size);(function(e,t,n){if(Ms(t))return es(e.matchAll(t));var r=t(e,n);return r?r.map((function(t){var n=[t.text];return n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(t.replaceWith)),n})):[]})(e.textBetween(u-t,p-t,void 0,"￼"),i.find,a).forEach((function(e){if(void 0!==e.index){var t=u+e.index+1,r=t+e[0].length,o={from:n.tr.mapping.map(t),to:n.tr.mapping.map(r)},p=i.handler({state:n,range:o,match:e,commands:l,chain:c,can:d,pasteEvent:a,dropEvent:s});f.push(p)}}))}})),f.every((function(e){return null!==e}))}({editor:n,state:c,from:Math.max(o-1,0),to:i.b-1,rule:a,pasteEvent:u,dropEvent:t})&&l.steps.length){try{t="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch(e){t=null}return s="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null,l}},l=r.map((function(e){return new Pn({view:function(e){var t=function(t){var r;(o=(null===(r=e.dom.parentElement)||void 0===r?void 0:r.contains(t.target))?e.dom.parentElement:null)&&(Is=n)},r=function(){Is&&(Is=null)};return window.addEventListener("dragstart",t),window.addEventListener("dragend",r),{destroy:function(){window.removeEventListener("dragstart",t),window.removeEventListener("dragend",r)}}},props:{handleDOMEvents:{drop:function(e,n){if(a=o===e.dom.parentElement,t=n,!a){var r=Is;r&&setTimeout((function(){var e=r.state.selection;e&&r.commands.deleteRange({from:e.from,to:e.to})}),10)}return!1},paste:function(e,t){var n,r=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/html");return s=t,i=!!(null==r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:function(t,n,r){var o=t[0],l="paste"===o.getMeta("uiEvent")&&!i,c="drop"===o.getMeta("uiEvent")&&!a,d=o.getMeta("applyPasteRules"),f=!!d;if(l||c||f){if(f){var p=d.text;"string"==typeof p||(p=Ss(K.from(p),r.schema));var h=d.from,m=h+p.length,v=function(e){var t,n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return null===(t=n.clipboardData)||void 0===t||t.setData("text/html",e),n}(p);return u({rule:e,state:r,from:h,to:{b:m},pasteEvt:v})}var g=n.doc.content.findDiffStart(r.doc.content),y=n.doc.content.findDiffEnd(r.doc.content);if("number"==typeof g&&y&&g!==y.b)return u({rule:e,state:r,from:g,to:y,pasteEvt:s})}}})}));return l}var Ls=function(){function e(t,n){is(this,e),this.splittableMarks=[],this.editor=n,this.extensions=e.resolve(t),this.schema=xs(this.extensions,n),this.setupExtensions()}return ss(e,[{key:"commands",get:function(){var e=this;return this.extensions.reduce((function(t,n){var r=ms(n,"addCommands",{name:n.name,options:n.options,storage:n.storage,editor:e.editor,type:As(n.name,e.schema)});return r?ls(ls({},t),r()):t}),{})}},{key:"plugins",get:function(){var t=this,n=this.editor,r=e.sort(es(this.extensions).reverse()),o=[],i=[],a=r.map((function(e){var r={name:e.name,options:e.options,storage:e.storage,editor:n,type:As(e.name,t.schema)},a=[],s=ms(e,"addKeyboardShortcuts",r),u={};if("mark"===e.type&&ms(e,"exitable",r)&&(u.ArrowRight=function(){return _s.handleExit({editor:n,mark:e})}),s){var l=Object.fromEntries(Object.entries(s()).map((function(e){var t=ts(e,2),r=t[0],o=t[1];return[r,function(){return o({editor:n})}]})));u=ls(ls({},u),l)}var c=function(e){return new Pn({props:{handleKeyDown:Ca(e)}})}(u);a.push(c);var d=ms(e,"addInputRules",r);Fs(e,n.options.enableInputRules)&&d&&o.push.apply(o,es(d()));var f=ms(e,"addPasteRules",r);Fs(e,n.options.enablePasteRules)&&f&&i.push.apply(i,es(f()));var p=ms(e,"addProseMirrorPlugins",r);if(p){var h=p();a.push.apply(a,es(h))}return a})).flat();return[Ts({editor:n,rules:o})].concat(es(Rs({editor:n,rules:i})),es(a))}},{key:"attributes",get:function(){return gs(this.extensions)}},{key:"nodeViews",get:function(){var e=this,t=this.editor,n=vs(this.extensions).nodeExtensions;return Object.fromEntries(n.filter((function(e){return!!ms(e,"addNodeView")})).map((function(n){var r=e.attributes.filter((function(e){return e.type===n.name})),o={name:n.name,options:n.options,storage:n.storage,editor:t,type:ys(n.name,e.schema)},i=ms(n,"addNodeView",o);return i?[n.name,function(e,o,a,s,u){var l=Ds(e,r);return i()({node:e,view:o,getPos:a,decorations:s,innerDecorations:u,editor:t,extension:n,HTMLAttributes:l})}]:[]})))}},{key:"setupExtensions",value:function(){var e=this;this.extensions.forEach((function(t){var n;e.editor.extensionStorage[t.name]=t.storage;var r={name:t.name,options:t.options,storage:t.storage,editor:e.editor,type:As(t.name,e.schema)};"mark"===t.type&&(null===(n=Cs(ms(t,"keepOnSplit",r)))||void 0===n||n)&&e.splittableMarks.push(t.name);var o=ms(t,"onBeforeCreate",r),i=ms(t,"onCreate",r),a=ms(t,"onUpdate",r),s=ms(t,"onSelectionUpdate",r),u=ms(t,"onTransaction",r),l=ms(t,"onFocus",r),c=ms(t,"onBlur",r),d=ms(t,"onDestroy",r);o&&e.editor.on("beforeCreate",o),i&&e.editor.on("create",i),a&&e.editor.on("update",a),s&&e.editor.on("selectionUpdate",s),u&&e.editor.on("transaction",u),l&&e.editor.on("focus",l),c&&e.editor.on("blur",c),d&&e.editor.on("destroy",d)}))}}],[{key:"resolve",value:function(t){var n,r,o=e.sort(e.flatten(t)),i=(r=(n=o.map((function(e){return e.name}))).filter((function(e,t){return n.indexOf(e)!==t})),Array.from(new Set(r)));return i.length&&console.warn("[tiptap warn]: Duplicate extension names found: [".concat(i.map((function(e){return"'".concat(e,"'")})).join(", "),"]. This can lead to issues.")),o}},{key:"flatten",value:function(e){var t=this;return e.map((function(e){var n=ms(e,"addExtensions",{name:e.name,options:e.options,storage:e.storage});return n?[e].concat(es(t.flatten(n()))):e})).flat(10)}},{key:"sort",value:function(e){return e.sort((function(e,t){var n=ms(e,"priority")||100,r=ms(t,"priority")||100;return n>r?-1:n<r?1:0}))}}])}(),Hs=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};is(this,e),this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=ls(ls({},this.config),t),this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Cs(ms(this,"addOptions",{name:this.name}))),this.storage=Cs(ms(this,"addStorage",{name:this.name,options:this.options}))||{}}return ss(e,[{key:"configure",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.extend(ls(ls({},this.config),{},{addOptions:function(){return Ns(e.options,t)}}));return n.name=this.name,n.parent=this.parent,n}},{key:"extend",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new e(ls(ls({},this.config),t));return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(n.name,'".')),n.options=Cs(ms(n,"addOptions",{name:n.name})),n.storage=Cs(ms(n,"addStorage",{name:n.name,options:n.options})),n}}],[{key:"create",value:function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}}])}();function Vs(e,t,n){var r=t.from,o=t.to,i=n||{},a=i.blockSeparator,s=void 0===a?"\n\n":a,u=i.textSerializers,l=void 0===u?{}:u,c="";return e.nodesBetween(r,o,(function(e,n,i,a){var u;e.isBlock&&n>r&&(c+=s);var d=null==l?void 0:l[e.type.name];if(d)return i&&(c+=d({node:e,pos:n,parent:i,index:a,range:t})),!1;e.isText&&(c+=null===(u=null==e?void 0:e.text)||void 0===u?void 0:u.slice(Math.max(r,n)-n,o-n))})),c}function zs(e){return Object.fromEntries(Object.entries(e.nodes).filter((function(e){return ts(e,2)[1].spec.toText})).map((function(e){var t=ts(e,2);return[t[0],t[1].spec.toText]})))}var $s=Hs.create({name:"clipboardTextSerializer",addOptions:function(){return{blockSeparator:void 0}},addProseMirrorPlugins:function(){var e=this;return[new Pn({key:new jn("clipboardTextSerializer"),props:{clipboardTextSerializer:function(){var t=e.editor,n=t.state,r=t.schema,o=n.doc,i=n.selection.ranges,a=Math.min.apply(Math,es(i.map((function(e){return e.$from.pos})))),s=Math.max.apply(Math,es(i.map((function(e){return e.$to.pos})))),u=zs(r);return Vs(o,{from:a,to:s},ls(ls({},void 0!==e.options.blockSeparator?{blockSeparator:e.options.blockSeparator}:{}),{},{textSerializers:u}))}}})]}});function Us(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{strict:!0},r=Object.keys(t);return!r.length||r.every((function(r){return n.strict?t[r]===e[r]:Ms(t[r])?t[r].test(e[r]):t[r]===e[r]}))}function Gs(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.find((function(e){return e.type===t&&Us(Object.fromEntries(Object.keys(n).map((function(t){return[t,e.attrs[t]]}))),n)}))}function Ws(e,t){return!!Gs(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function qs(e,t,n){var r;if(e&&t){var o=e.parent.childAfter(e.parentOffset);if(o.node&&o.node.marks.some((function(e){return e.type===t}))||(o=e.parent.childBefore(e.parentOffset)),o.node&&o.node.marks.some((function(e){return e.type===t}))&&(n=n||(null===(r=o.node.marks[0])||void 0===r?void 0:r.attrs),Gs(es(o.node.marks),t,n))){for(var i=o.index,a=e.start()+o.offset,s=i+1,u=a+o.node.nodeSize;i>0&&Ws(es(e.parent.child(i-1).marks),t,n);)i-=1,a-=e.parent.child(i).nodeSize;for(;s<e.parent.childCount&&Ws(es(e.parent.child(s).marks),t,n);)u+=e.parent.child(s).nodeSize,s+=1;return{from:a,to:u}}}}function Ks(e,t){if("string"==typeof e){if(!t.marks[e])throw Error("There is no mark type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.marks[e]}return e}function Zs(e){return e instanceof yn}function Js(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(Math.max(e,t),n)}function Xs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return null;var n=hn.atStart(e),r=hn.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return r;var o=n.from,i=r.to;return"all"===t?yn.create(e,Js(0,o,i),Js(e.content.size,o,i)):yn.create(e,Js(t,o,i),Js(t,o,i))}function Ys(){return"Android"===navigator.platform||/android/i.test(navigator.userAgent)}function Qs(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var eu=function(e){for(var t=e.childNodes,n=t.length-1;n>=0;n-=1){var r=t[n];3===r.nodeType&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):1===r.nodeType&&eu(r)}return e};function tu(e){var t="<body>".concat(e,"</body>"),n=(new window.DOMParser).parseFromString(t,"text/html").body;return eu(n)}function nu(e,t,n){if(e instanceof ye||e instanceof K)return e;n=ls({slice:!0,parseOptions:{}},n);var r="string"==typeof e;if("object"===Qa(e)&&null!==e)try{if(Array.isArray(e)&&e.length>0)return K.fromArray(e.map((function(e){return t.nodeFromJSON(e)})));var o=t.nodeFromJSON(e);return n.errorOnInvalidContent&&o.check(),o}catch(r){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:r});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),nu("",t,n)}if(r){if(n.errorOnInvalidContent){var i=!1,a="",s=new Re({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:function(e){return i=!0,a="string"==typeof e?e:e.outerHTML,null}}]}})});if(n.slice?He.fromSchema(s).parseSlice(tu(e),n.parseOptions):He.fromSchema(s).parse(tu(e),n.parseOptions),n.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error("Invalid element found: ".concat(a))})}var u=He.fromSchema(t);return n.slice?u.parseSlice(tu(e),n.parseOptions).content:u.parse(tu(e),n.parseOptions)}return nu("",t,n)}function ru(e,t,n){var r=e.steps.length-1;if(!(r<t)){var o=e.steps[r];if(o instanceof xt||o instanceof At){var i=e.mapping.maps[r],a=0;i.forEach((function(e,t,n,r){0===a&&(a=r)})),e.setSelection(hn.near(e.doc.resolve(a),n))}}}function ou(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function iu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.selection,o=r.from,i=r.to,a=r.empty,s=t?ys(t,e.schema):null,u=[];e.doc.nodesBetween(o,i,(function(e,t){if(!e.isText){var n=Math.max(o,t),r=Math.min(i,t+e.nodeSize);u.push({node:e,from:n,to:r})}}));var l=i-o,c=u.filter((function(e){return!s||s.name===e.node.type.name})).filter((function(e){return Us(e.node.attrs,n,{strict:!1})}));return a?!!c.length:c.reduce((function(e,t){return e+t.to-t.from}),0)>=l}function au(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function su(e,t){var n="string"==typeof t?[t]:t;return Object.keys(e).reduce((function(t,r){return n.includes(r)||(t[r]=e[r]),t}),{})}function uu(e,t){return nu(e,t,{slice:!1,parseOptions:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},errorOnInvalidContent:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).errorOnInvalidContent})}function lu(e,t){var n=Ks(t,e.schema),r=e.selection,o=r.from,i=r.to,a=r.empty,s=[];a?(e.storedMarks&&s.push.apply(s,es(e.storedMarks)),s.push.apply(s,es(e.selection.$head.marks()))):e.doc.nodesBetween(o,i,(function(e){s.push.apply(s,es(e.marks))}));var u=s.find((function(e){return e.type.name===n.name}));return u?ls({},u.attrs):{}}function cu(e,t){var n=new Qt(e);return t.forEach((function(e){e.steps.forEach((function(e){n.step(e)}))})),n}function du(e,t){var n=[];return e.descendants((function(e,r){t(e)&&n.push({node:e,pos:r})})),n}function fu(e,t,n){var r=[];return e.nodesBetween(t.from,t.to,(function(e,t){n(e)&&r.push({node:e,pos:t})})),r}function pu(e){return function(t){return function(e,t){for(var n=e.depth;n>0;n-=1){var r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}(t.$from,e)}}function hu(e,t){var n=au("string"==typeof t?t:t.name,e.schema);return"node"===n?function(e,t){var n=ys(t,e.schema),r=e.selection,o=r.from,i=r.to,a=[];e.doc.nodesBetween(o,i,(function(e){a.push(e)}));var s=a.reverse().find((function(e){return e.type.name===n.name}));return s?ls({},s.attrs):{}}(e,t):"mark"===n?lu(e,t):{}}function mu(e){var t=e.mapping,n=e.steps,r=[];return t.maps.forEach((function(e,o){var i=[];if(e.ranges.length)e.forEach((function(e,t){i.push({from:e,to:t})}));else{var a=n[o],s=a.from,u=a.to;if(void 0===s||void 0===u)return;i.push({from:s,to:u})}i.forEach((function(e){var n=e.from,i=e.to,a=t.slice(o).map(n,-1),s=t.slice(o).map(i),u=t.invert().map(a,-1),l=t.invert().map(s);r.push({oldRange:{from:u,to:l},newRange:{from:a,to:s}})}))})),function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify,n={};return e.filter((function(e){var r=t(e);return!Object.prototype.hasOwnProperty.call(n,r)&&(n[r]=!0)}))}(e);return 1===t.length?t:t.filter((function(e,n){return!t.filter((function(e,t){return t!==n})).some((function(t){return e.oldRange.from>=t.oldRange.from&&e.oldRange.to<=t.oldRange.to&&e.newRange.from>=t.newRange.from&&e.newRange.to<=t.newRange.to}))}))}(r)}function vu(e,t,n){var r=[];return e===t?n.resolve(e).marks().forEach((function(t){var o=qs(n.resolve(e),t.type);o&&r.push(ls({mark:t},o))})):n.nodesBetween(e,t,(function(e,t){e&&void 0!==(null==e?void 0:e.nodeSize)&&r.push.apply(r,es(e.marks.map((function(n){return{from:t,to:t+e.nodeSize,mark:n}}))))})),r}function gu(e,t,n){return Object.fromEntries(Object.entries(n).filter((function(n){var r=ts(n,1)[0],o=e.find((function(e){return e.type===t&&e.name===r}));return!!o&&o.attribute.keepOnSplit})))}function yu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.selection,o=r.empty,i=r.ranges,a=t?Ks(t,e.schema):null;if(o)return!!(e.storedMarks||e.selection.$from.marks()).filter((function(e){return!a||a.name===e.type.name})).find((function(e){return Us(e.attrs,n,{strict:!1})}));var s=0,u=[];if(i.forEach((function(t){var n=t.$from,r=t.$to,o=n.pos,i=r.pos;e.doc.nodesBetween(o,i,(function(e,t){if(e.isText||e.marks.length){var n=Math.max(o,t),r=Math.min(i,t+e.nodeSize);s+=r-n,u.push.apply(u,es(e.marks.map((function(e){return{mark:e,from:n,to:r}}))))}}))})),0===s)return!1;var l=u.filter((function(e){return!a||a.name===e.mark.type.name})).filter((function(e){return Us(e.mark.attrs,n,{strict:!1})})).reduce((function(e,t){return e+t.to-t.from}),0),c=u.filter((function(e){return!a||e.mark.type!==a&&e.mark.type.excludes(a)})).reduce((function(e,t){return e+t.to-t.from}),0);return(l>0?l+c:l)>=s}function bu(e,t){var n=vs(t).nodeExtensions.find((function(t){return t.name===e}));if(!n)return!1;var r=Cs(ms(n,"group",{name:n.name,options:n.options,storage:n.storage}));return"string"==typeof r&&r.split(" ").includes("list")}function Du(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.checkChildren,o=void 0===r||r,i=n.ignoreWhitespace,a=void 0!==i&&i;if(a){if("hardBreak"===e.type.name)return!0;if(e.isText)return/^\s*$/m.test(null!==(t=e.text)&&void 0!==t?t:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(0===e.content.childCount)return!0;if(o){var s=!0;return e.content.forEach((function(e){!1!==s&&(Du(e,{ignoreWhitespace:a,checkChildren:o})||(s=!1))})),s}return!1}function wu(e){return e instanceof Dn}function Cu(e,t,n){var r=e.state.doc.content.size,o=Js(t,0,r),i=Js(n,0,r),a=e.coordsAtPos(o),s=e.coordsAtPos(i,-1),u=Math.min(a.top,s.top),l=Math.max(a.bottom,s.bottom),c=Math.min(a.left,s.left),d=Math.max(a.right,s.right),f={top:u,bottom:l,left:c,right:d,width:d-c,height:l-u,x:c,y:u};return ls(ls({},f),{},{toJSON:function(){return f}})}function ku(e,t){var n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){var r=n.filter((function(e){return null==t?void 0:t.includes(e.type.name)}));e.tr.ensureMarks(r)}}var Eu=function(e,t){var n=pu((function(e){return e.type===t}))(e.selection);if(!n)return!0;var r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;var o=e.doc.nodeAt(r);return n.node.type!==(null==o?void 0:o.type)||!jt(e.doc,n.pos)||(e.join(n.pos),!0)},xu=function(e,t){var n=pu((function(e){return e.type===t}))(e.selection);if(!n)return!0;var r=e.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;var o=e.doc.nodeAt(r);return n.node.type!==(null==o?void 0:o.type)||!jt(e.doc,r)||(e.join(r),!0)},Au=Object.freeze({__proto__:null,blur:function(){return function(e){var t=e.editor,n=e.view;return requestAnimationFrame((function(){var e;t.isDestroyed||(n.dom.blur(),null===(e=null===window||void 0===window?void 0:window.getSelection())||void 0===e||e.removeAllRanges())})),!0}},clearContent:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t){return t.commands.setContent("",e)}},clearNodes:function(){return function(e){var t=e.state,n=e.tr,r=e.dispatch,o=n.selection.ranges;return!r||(o.forEach((function(e){var r=e.$from,o=e.$to;t.doc.nodesBetween(r.pos,o.pos,(function(e,t){if(!e.type.isText){var r=n.doc,o=n.mapping,i=r.resolve(o.map(t)),a=r.resolve(o.map(t+e.nodeSize)),s=i.blockRange(a);if(s){var u=Bt(s);if(e.type.isTextblock){var l=i.parent.contentMatchAt(i.index()).defaultType;n.setNodeMarkup(s.start,l)}(u||0===u)&&n.lift(s,u)}}}))})),!0)}},command:function(e){return function(t){return e(t)}},createParagraphNear:function(){return function(e){var t=e.state,n=e.dispatch;return Ia(t,n)}},cut:function(e,t){return function(n){var r=n.editor,o=n.tr,i=r.state.doc.slice(e.from,e.to);o.deleteRange(e.from,e.to);var a=o.mapping.map(t);return o.insert(a,i.content),o.setSelection(new yn(o.doc.resolve(a-1))),!0}},deleteCurrentNode:function(){return function(e){var t=e.tr,n=e.dispatch,r=t.selection.$anchor.node();if(r.content.size>0)return!1;for(var o=t.selection.$anchor,i=o.depth;i>0;i-=1)if(o.node(i).type===r.type){if(n){var a=o.before(i),s=o.after(i);t.delete(a,s).scrollIntoView()}return!0}return!1}},deleteNode:function(e){return function(t){for(var n=t.tr,r=t.state,o=t.dispatch,i=ys(e,r.schema),a=n.selection.$anchor,s=a.depth;s>0;s-=1)if(a.node(s).type===i){if(o){var u=a.before(s),l=a.after(s);n.delete(u,l).scrollIntoView()}return!0}return!1}},deleteRange:function(e){return function(t){var n=t.tr,r=t.dispatch,o=e.from,i=e.to;return r&&n.delete(o,i),!0}},deleteSelection:function(){return function(e){var t=e.state,n=e.dispatch;return ka(t,n)}},enter:function(){return function(e){return e.commands.keyboardShortcut("Enter")}},exitCode:function(){return function(e){var t=e.state,n=e.dispatch;return ja(t,n)}},extendMarkRange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=Ks(e,o.schema),s=r.doc,u=r.selection,l=u.$from,c=u.from,d=u.to;if(i){var f=qs(l,a,t);if(f&&f.from<=c&&f.to>=d){var p=yn.create(s,f.from,f.to);r.setSelection(p)}}return!0}},first:function(e){return function(t){for(var n="function"==typeof e?e(t):e,r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1}},focus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.editor,o=n.view,i=n.tr,a=n.dispatch;t=ls({scrollIntoView:!0},t);var s=function(){(Qs()||Ys())&&o.dom.focus(),requestAnimationFrame((function(){r.isDestroyed||(o.focus(),(null==t?void 0:t.scrollIntoView)&&r.commands.scrollIntoView())}))};if(o.hasFocus()&&null===e||!1===e)return!0;if(a&&null===e&&!Zs(r.state.selection))return s(),!0;var u=Xs(i.doc,e)||r.state.selection,l=r.state.selection.eq(u);return a&&(l||i.setSelection(u),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0}},forEach:function(e,t){return function(n){return e.every((function(e,r){return t(e,ls(ls({},n),{},{index:r}))}))}},insertContent:function(e,t){return function(n){var r=n.tr;return n.commands.insertContentAt({from:r.selection.from,to:r.selection.to},e,t)}},insertContentAt:function(e,t,n){return function(r){var o,i=r.tr,a=r.dispatch,s=r.editor;if(a){var u;n=ls({parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1},n);try{u=nu(t,s.schema,{parseOptions:ls({preserveWhitespace:"full"},n.parseOptions),errorOnInvalidContent:null!==(o=n.errorOnInvalidContent)&&void 0!==o?o:s.options.enableContentCheck})}catch(e){return s.emit("contentError",{editor:s,error:e,disableCollaboration:function(){s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}var l,c="number"==typeof e?{from:e,to:e}:{from:e.from,to:e.to},d=c.from,f=c.to,p=!0,h=!0;if(("type"in u?[u]:u).forEach((function(e){e.check(),p=!!p&&e.isText&&0===e.marks.length,h=!!h&&e.isBlock})),d===f&&h){var m=i.doc.resolve(d).parent;m.isTextblock&&!m.type.spec.code&&!m.childCount&&(d-=1,f+=1)}if(p){if(Array.isArray(t))l=t.map((function(e){return e.text||""})).join("");else if(t instanceof K){var v="";t.forEach((function(e){e.text&&(v+=e.text)})),l=v}else l="object"===Qa(t)&&t&&t.text?t.text:t;i.insertText(l,d,f)}else l=u,i.replaceWith(d,f,l);n.updateSelection&&ru(i,i.steps.length-1,-1),n.applyInputRules&&i.setMeta("applyInputRules",{from:d,text:l}),n.applyPasteRules&&i.setMeta("applyPasteRules",{from:d,text:l})}return!0}},joinBackward:function(){return function(e){var t=e.state,n=e.dispatch;return xa(t,n)}},joinDown:function(){return function(e){return function(e,t){var n,r=e.selection;if(r instanceof Dn){if(r.node.isTextblock||!jt(e.doc,r.to))return!1;n=r.to}else if(null==(n=Rt(e.doc,r.to,1)))return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0}(e.state,e.dispatch)}},joinForward:function(){return function(e){var t=e.state,n=e.dispatch;return Oa(t,n)}},joinItemBackward:function(){return function(e){var t=e.state,n=e.dispatch,r=e.tr;try{var o=Rt(t.doc,t.selection.$from.pos,-1);return null!=o&&(r.join(o,2),n&&n(r),!0)}catch(e){return!1}}},joinItemForward:function(){return function(e){var t=e.state,n=e.dispatch,r=e.tr;try{var o=Rt(t.doc,t.selection.$from.pos,1);return null!=o&&(r.join(o,2),n&&n(r),!0)}catch(e){return!1}}},joinTextblockBackward:function(){return function(e){return function(e,t){var n=Ea(e,void 0);if(!n)return!1;var r=Ma(n);return!!r&&Aa(e,r,t)}(e.state,e.dispatch)}},joinTextblockForward:function(){return function(e){return function(e,t){var n=Ba(e,void 0);if(!n)return!1;var r=Pa(n);return!!r&&Aa(e,r,t)}(e.state,e.dispatch)}},joinUp:function(){return function(e){return function(e,t){var n,r=e.selection,o=r instanceof Dn;if(o){if(r.node.isTextblock||!jt(e.doc,r.from))return!1;n=r.from}else if(null==(n=Rt(e.doc,r.from,-1)))return!1;if(t){var i=e.tr.join(n);o&&i.setSelection(Dn.create(i.doc,n-e.doc.resolve(n).nodeBefore.nodeSize)),t(i.scrollIntoView())}return!0}(e.state,e.dispatch)}},keyboardShortcut:function(e){return function(t){var n=t.editor,r=t.view,o=t.tr,i=t.dispatch,a=function(e){var t,n,r,o,i=e.split(/-(?!$)/),a=i[i.length-1];"Space"===a&&(a=" ");for(var s=0;s<i.length-1;s+=1){var u=i[s];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))t=!0;else if(/^(c|ctrl|control)$/i.test(u))n=!0;else if(/^s(hift)?$/i.test(u))r=!0;else{if(!/^mod$/i.test(u))throw new Error("Unrecognized modifier name: ".concat(u));Qs()||ou()?o=!0:n=!0}}return t&&(a="Alt-".concat(a)),n&&(a="Ctrl-".concat(a)),o&&(a="Meta-".concat(a)),r&&(a="Shift-".concat(a)),a}(e).split(/-(?!$)/),s=a.find((function(e){return!["Alt","Ctrl","Meta","Shift"].includes(e)})),u=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),l=n.captureTransaction((function(){r.someProp("handleKeyDown",(function(e){return e(r,u)}))}));return null==l||l.steps.forEach((function(e){var t=e.map(o.mapping);t&&i&&o.maybeStep(t)})),!0}},lift:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.dispatch;return!!iu(r,ys(e,r.schema),t)&&function(e,t){var n=e.selection,r=n.$from,o=n.$to,i=r.blockRange(o),a=i&&Bt(i);return null!=a&&(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)}(r,o)}},liftEmptyBlock:function(){return function(e){var t=e.state,n=e.dispatch;return Ra(t,n)}},liftListItem:function(e){return function(t){var n,r=t.state,o=t.dispatch;return(n=ys(e,r.schema),function(e,t){var r=e.selection,o=r.$from,i=r.$to,a=o.blockRange(i,(function(e){return e.childCount>0&&e.firstChild.type==n}));return!!a&&(!t||(o.node(a.depth-1).type==n?function(e,t,n,r){var o=e.tr,i=r.end,a=r.$to.end(r.depth);i<a&&(o.step(new At(i-1,a,i,a,new ee(K.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new ve(o.doc.resolve(r.$from.pos),o.doc.resolve(a),r.depth));var s=Bt(r);if(null==s)return!1;o.lift(r,s);var u=o.doc.resolve(o.mapping.map(i,-1)-1);return jt(o.doc,u.pos)&&u.nodeBefore.type==u.nodeAfter.type&&o.join(u.pos),t(o.scrollIntoView()),!0}(e,t,n,a):function(e,t,n){for(var r=e.tr,o=n.parent,i=n.end,a=n.endIndex-1,s=n.startIndex;a>s;a--)i-=o.child(a).nodeSize,r.delete(i-1,i+1);var u=r.doc.resolve(n.start),l=u.nodeAfter;if(r.mapping.map(n.end)!=n.start+u.nodeAfter.nodeSize)return!1;var c=0==n.startIndex,d=n.endIndex==o.childCount,f=u.node(-1),p=u.index(-1);if(!f.canReplace(p+(c?0:1),p+1,l.content.append(d?K.empty:K.from(o))))return!1;var h=u.pos,m=h+l.nodeSize;return r.step(new At(h-(c?1:0),m+(d?1:0),h+1,m-1,new ee((c?K.empty:K.from(o.copy(K.empty))).append(d?K.empty:K.from(o.copy(K.empty))),c?0:1,d?0:1),c?0:1)),t(r.scrollIntoView()),!0}(e,t,a)))})(r,o)}},newlineInCode:function(){return function(e){var t=e.state,n=e.dispatch;return Na(t,n)}},resetAttributes:function(e,t){return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=null,s=null,u=au("string"==typeof e?e:e.name,o.schema);return!!u&&("node"===u&&(a=ys(e,o.schema)),"mark"===u&&(s=Ks(e,o.schema)),i&&r.selection.ranges.forEach((function(e){o.doc.nodesBetween(e.$from.pos,e.$to.pos,(function(e,n){a&&a===e.type&&r.setNodeMarkup(n,void 0,su(e.attrs,t)),s&&e.marks.length&&e.marks.forEach((function(o){s===o.type&&r.addMark(n,n+e.nodeSize,s.create(su(o.attrs,t)))}))}))})),!0)}},scrollIntoView:function(){return function(e){var t=e.tr;return e.dispatch&&t.scrollIntoView(),!0}},selectAll:function(){return function(e){var t=e.tr;if(e.dispatch){var n=new Cn(t.doc);t.setSelection(n)}return!0}},selectNodeBackward:function(){return function(e){var t=e.state,n=e.dispatch;return Sa(t,n)}},selectNodeForward:function(){return function(e){var t=e.state,n=e.dispatch;return Ta(t,n)}},selectParentNode:function(){return function(e){return function(e,t){var n,r=e.selection,o=r.$from,i=r.to,a=o.sharedDepth(i);return 0!=a&&(n=o.before(a),t&&t(e.tr.setSelection(Dn.create(e.doc,n))),!0)}(e.state,e.dispatch)}},selectTextblockEnd:function(){return function(e){var t=e.state,n=e.dispatch;return za(t,n)}},selectTextblockStart:function(){return function(e){var t=e.state,n=e.dispatch;return Va(t,n)}},setContent:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(o){var i,a,s=o.editor,u=o.tr,l=o.dispatch,c=o.commands,d=u.doc;if("full"!==n.preserveWhitespace){var f=uu(e,s.schema,n,{errorOnInvalidContent:null!==(i=r.errorOnInvalidContent)&&void 0!==i?i:s.options.enableContentCheck});return l&&u.replaceWith(0,d.content.size,f).setMeta("preventUpdate",!t),!0}return l&&u.setMeta("preventUpdate",!t),c.insertContentAt({from:0,to:d.content.size},e,{parseOptions:n,errorOnInvalidContent:null!==(a=r.errorOnInvalidContent)&&void 0!==a?a:s.options.enableContentCheck})}},setMark:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=r.selection,s=a.empty,u=a.ranges,l=Ks(e,o.schema);if(i)if(s){var c=lu(o,l);r.addStoredMark(l.create(ls(ls({},c),t)))}else u.forEach((function(e){var n=e.$from.pos,i=e.$to.pos;o.doc.nodesBetween(n,i,(function(e,o){var a=Math.max(o,n),s=Math.min(o+e.nodeSize,i);e.marks.find((function(e){return e.type===l}))?e.marks.forEach((function(e){l===e.type&&r.addMark(a,s,l.create(ls(ls({},e.attrs),t)))})):r.addMark(a,s,l.create(t))}))}));return function(e,t,n){var r,o=t.selection,i=null;if(Zs(o)&&(i=o.$cursor),i){var a=null!==(r=e.storedMarks)&&void 0!==r?r:i.marks();return!!n.isInSet(a)||!a.some((function(e){return e.type.excludes(n)}))}return o.ranges.some((function(t){var r=t.$from,o=t.$to,i=0===r.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(r.pos,o.pos,(function(e,t,r){if(i)return!1;if(e.isInline){var o=!r||r.type.allowsMarkType(n),a=!!n.isInSet(e.marks)||!e.marks.some((function(e){return e.type.excludes(n)}));i=o&&a}return!i})),i}))}(o,r,l)}},setMeta:function(e,t){return function(n){return n.tr.setMeta(e,t),!0}},setNode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r,o=n.state,i=n.dispatch,a=n.chain,s=ys(e,o.schema);return o.selection.$anchor.sameParent(o.selection.$head)&&(r=o.selection.$anchor.parent.attrs),s.isTextblock?a().command((function(e){var n=e.commands;return!!$a(s,ls(ls({},r),t))(o)||n.clearNodes()})).command((function(e){var n=e.state;return $a(s,ls(ls({},r),t))(n,i)})).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)}},setNodeSelection:function(e){return function(t){var n=t.tr;if(t.dispatch){var r=n.doc,o=Js(e,0,r.content.size),i=Dn.create(r,o);n.setSelection(i)}return!0}},setTextSelection:function(e){return function(t){var n=t.tr;if(t.dispatch){var r=n.doc,o="number"==typeof e?{from:e,to:e}:e,i=o.from,a=o.to,s=yn.atStart(r).from,u=yn.atEnd(r).to,l=Js(i,s,u),c=Js(a,s,u),d=yn.create(r,l,c);n.setSelection(d)}return!0}},sinkListItem:function(e){return function(t){var n,r=t.state,o=t.dispatch,i=ys(e,r.schema);return(n=i,function(e,t){var r=e.selection,o=r.$from,i=r.$to,a=o.blockRange(i,(function(e){return e.childCount>0&&e.firstChild.type==n}));if(!a)return!1;var s=a.startIndex;if(0==s)return!1;var u=a.parent,l=u.child(s-1);if(l.type!=n)return!1;if(t){var c=l.lastChild&&l.lastChild.type==u.type,d=K.from(c?n.create():null),f=new ee(K.from(n.create(null,K.from(u.type.create(null,d)))),c?3:1,0),p=a.start,h=a.end;t(e.tr.step(new At(p-(c?3:1),h,p,h,f,1,!0)).scrollIntoView())}return!0})(r,o)}},splitBlock:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).keepMarks,t=void 0===e||e;return function(e){var n=e.tr,r=e.state,o=e.dispatch,i=e.editor,a=n.selection,s=n.doc,u=a.$from,l=a.$to,c=gu(i.extensionManager.attributes,u.node().type.name,u.node().attrs);if(a instanceof Dn&&a.node.isBlock)return!(!u.parentOffset||!_t(s,u.pos)||(o&&(t&&ku(r,i.extensionManager.splittableMarks),n.split(u.pos).scrollIntoView()),0));if(!u.parent.isBlock)return!1;var d=l.parentOffset===l.parent.content.size,f=0===u.depth?void 0:function(e){for(var t=0;t<e.edgeCount;t+=1){var n=e.edge(t).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(u.node(-1).contentMatchAt(u.indexAfter(-1))),p=d&&f?[{type:f,attrs:c}]:void 0,h=_t(n.doc,n.mapping.map(u.pos),1,p);if(p||h||!_t(n.doc,n.mapping.map(u.pos),1,f?[{type:f}]:void 0)||(h=!0,p=f?[{type:f,attrs:c}]:void 0),o){if(h&&(a instanceof yn&&n.deleteSelection(),n.split(n.mapping.map(u.pos),1,p),f&&!d&&!u.parentOffset&&u.parent.type!==f)){var m=n.mapping.map(u.before()),v=n.doc.resolve(m);u.node(-1).canReplaceWith(v.index(),v.index()+1,f)&&n.setNodeMarkup(n.mapping.map(u.before()),f)}t&&ku(r,i.extensionManager.splittableMarks),n.scrollIntoView()}return h}},splitListItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r,o=n.tr,i=n.state,a=n.dispatch,s=n.editor,u=ys(e,i.schema),l=i.selection,c=l.$from,d=l.$to,f=i.selection.node;if(f&&f.isBlock||c.depth<2||!c.sameParent(d))return!1;var p=c.node(-1);if(p.type!==u)return!1;var h=s.extensionManager.attributes;if(0===c.parent.content.size&&c.node(-1).childCount===c.indexAfter(-1)){if(2===c.depth||c.node(-3).type!==u||c.index(-2)!==c.node(-2).childCount-1)return!1;if(a){for(var m=K.empty,v=c.index(-1)?1:c.index(-2)?2:3,g=c.depth-v;g>=c.depth-3;g-=1)m=K.from(c.node(g).copy(m));var y=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,b=ls(ls({},gu(h,c.node().type.name,c.node().attrs)),t),D=(null===(r=u.contentMatch.defaultType)||void 0===r?void 0:r.createAndFill(b))||void 0;m=m.append(K.from(u.createAndFill(null,D)||void 0));var w=c.before(c.depth-(v-1));o.replace(w,c.after(-y),new ee(m,4-v,0));var C=-1;o.doc.nodesBetween(w,o.doc.content.size,(function(e,t){if(C>-1)return!1;e.isTextblock&&0===e.content.size&&(C=t+1)})),C>-1&&o.setSelection(yn.near(o.doc.resolve(C))),o.scrollIntoView()}return!0}var k=d.pos===c.end()?p.contentMatchAt(0).defaultType:null,E=ls(ls({},gu(h,p.type.name,p.attrs)),t),x=ls(ls({},gu(h,c.node().type.name,c.node().attrs)),t);o.delete(c.pos,d.pos);var A=k?[{type:u,attrs:E},{type:k,attrs:x}]:[{type:u,attrs:E}];if(!_t(o.doc,c.pos,2))return!1;if(a){var F=i.selection,S=i.storedMarks,M=s.extensionManager.splittableMarks,B=S||F.$to.parentOffset&&F.$from.marks();if(o.split(c.pos,2,A).scrollIntoView(),!B||!a)return!0;var O=B.filter((function(e){return M.includes(e.type.name)}));o.ensureMarks(O)}return!0}},toggleList:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(o){var i=o.editor,a=o.tr,s=o.state,u=o.dispatch,l=o.chain,c=o.commands,d=o.can,f=i.extensionManager,p=f.extensions,h=f.splittableMarks,m=ys(e,s.schema),v=ys(t,s.schema),g=s.selection,y=s.storedMarks,b=g.$from,D=g.$to,w=b.blockRange(D),C=y||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;var k=pu((function(e){return bu(e.type.name,p)}))(g);if(w.depth>=1&&k&&w.depth-k.depth<=1){if(k.node.type===m)return c.liftListItem(v);if(bu(k.node.type.name,p)&&m.validContent(k.node.content)&&u)return l().command((function(){return a.setNodeMarkup(k.pos,m),!0})).command((function(){return Eu(a,m)})).command((function(){return xu(a,m)})).run()}return n&&C&&u?l().command((function(){var e=d().wrapInList(m,r),t=C.filter((function(e){return h.includes(e.type.name)}));return a.ensureMarks(t),!!e||c.clearNodes()})).wrapInList(m,r).command((function(){return Eu(a,m)})).command((function(){return xu(a,m)})).run():l().command((function(){return!!d().wrapInList(m,r)||c.clearNodes()})).wrapInList(m,r).command((function(){return Eu(a,m)})).command((function(){return xu(a,m)})).run()}},toggleMark:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var o=r.state,i=r.commands,a=n.extendEmptyMarkRange,s=void 0!==a&&a,u=Ks(e,o.schema);return yu(o,u,t)?i.unsetMark(u,{extendEmptyMarkRange:s}):i.setMark(u,t)}},toggleNode:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var o,i=r.state,a=r.commands,s=ys(e,i.schema),u=ys(t,i.schema),l=iu(i,s,n);return i.selection.$anchor.sameParent(i.selection.$head)&&(o=i.selection.$anchor.parent.attrs),l?a.setNode(u,o):a.setNode(s,ls(ls({},o),n))}},toggleWrap:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.commands,i=ys(e,r.schema);return iu(r,i,t)?o.lift(i):o.wrapIn(i,t)}},undoInputRule:function(){return function(e){for(var t=e.state,n=e.dispatch,r=t.plugins,o=0;o<r.length;o+=1){var i=r[o],a=void 0;if(i.spec.isInputRules&&(a=i.getState(t))){if(n){for(var s=t.tr,u=a.transform,l=u.steps.length-1;l>=0;l-=1)s.step(u.steps[l].invert(u.docs[l]));if(a.text){var c=s.doc.resolve(a.from).marks();s.replaceWith(a.from,a.to,t.schema.text(a.text,c))}else s.delete(a.from,a.to)}return!0}}return!1}},unsetAllMarks:function(){return function(e){var t=e.tr,n=e.dispatch,r=t.selection,o=r.empty,i=r.ranges;return o||n&&i.forEach((function(e){t.removeMark(e.$from.pos,e.$to.pos)})),!0}},unsetMark:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r,o=n.tr,i=n.state,a=n.dispatch,s=t.extendEmptyMarkRange,u=void 0!==s&&s,l=o.selection,c=Ks(e,i.schema),d=l.$from,f=l.empty,p=l.ranges;if(!a)return!0;if(f&&u){var h=l.from,m=l.to,v=null===(r=d.marks().find((function(e){return e.type===c})))||void 0===r?void 0:r.attrs,g=qs(d,c,v);g&&(h=g.from,m=g.to),o.removeMark(h,m,c)}else p.forEach((function(e){o.removeMark(e.$from.pos,e.$to.pos,c)}));return o.removeStoredMark(c),!0}},updateAttributes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=null,s=null,u=au("string"==typeof e?e:e.name,o.schema);return!!u&&("node"===u&&(a=ys(e,o.schema)),"mark"===u&&(s=Ks(e,o.schema)),i&&r.selection.ranges.forEach((function(e){var n,i,u,l,c=e.$from.pos,d=e.$to.pos;r.selection.empty?o.doc.nodesBetween(c,d,(function(e,t){a&&a===e.type&&(u=Math.max(t,c),l=Math.min(t+e.nodeSize,d),n=t,i=e)})):o.doc.nodesBetween(c,d,(function(e,o){o<c&&a&&a===e.type&&(u=Math.max(o,c),l=Math.min(o+e.nodeSize,d),n=o,i=e),o>=c&&o<=d&&(a&&a===e.type&&r.setNodeMarkup(o,void 0,ls(ls({},e.attrs),t)),s&&e.marks.length&&e.marks.forEach((function(n){if(s===n.type){var i=Math.max(o,c),a=Math.min(o+e.nodeSize,d);r.addMark(i,a,s.create(ls(ls({},n.attrs),t)))}})))})),i&&(void 0!==n&&r.setNodeMarkup(n,void 0,ls(ls({},i.attrs),t)),s&&i.marks.length&&i.marks.forEach((function(e){s===e.type&&r.addMark(u,l,s.create(ls(ls({},e.attrs),t)))})))})),!0)}},wrapIn:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.dispatch;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){var o=n.selection,i=o.$from,a=o.$to,s=i.blockRange(a),u=s&&Ot(s,e,t);return!!u&&(r&&r(n.tr.wrap(s,u).scrollIntoView()),!0)}}(ys(e,r.schema),t)(r,o)}},wrapInList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.dispatch;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){var o=n.selection,i=o.$from,a=o.$to,s=i.blockRange(a);if(!s)return!1;var u=r?n.tr:null;return!!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=!1,i=t,a=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&0==t.startIndex){if(0==t.$from.index(t.depth-1))return!1;var s=a.resolve(t.start-2);i=new ve(s,s,t.depth),t.endIndex<t.parent.childCount&&(t=new ve(t.$from,a.resolve(t.$to.end(t.depth)),t.depth)),o=!0}var u=Ot(i,n,r,t);return!!u&&(e&&function(e,t,n,r,o){for(var i=K.empty,a=n.length-1;a>=0;a--)i=K.from(n[a].type.create(n[a].attrs,i));e.step(new At(t.start-(r?2:0),t.end,t.start,t.end,new ee(i,0,0),n.length,!0));for(var s=0,u=0;u<n.length;u++)n[u].type==o&&(s=u+1);for(var l=n.length-s,c=t.start+n.length-(r?2:0),d=t.parent,f=t.startIndex,p=t.endIndex,h=!0;f<p;f++,h=!1)!h&&_t(e.doc,c,l)&&(e.split(c,l),c+=2*l),c+=d.child(f).nodeSize}(e,t,u,o,n),!0)}(u,s,e,t)&&(r&&r(u.scrollIntoView()),!0)}}(ys(e,r.schema),t)(r,o)}}}),Fu=Hs.create({name:"commands",addCommands:function(){return ls({},Au)}}),Su=Hs.create({name:"drop",addProseMirrorPlugins:function(){var e=this;return[new Pn({key:new jn("tiptapDrop"),props:{handleDrop:function(t,n,r,o){e.editor.emit("drop",{editor:e.editor,event:n,slice:r,moved:o})}}})]}}),Mu=Hs.create({name:"editable",addProseMirrorPlugins:function(){var e=this;return[new Pn({key:new jn("editable"),props:{editable:function(){return e.editor.options.editable}}})]}}),Bu=new jn("focusEvents"),Ou=Hs.create({name:"focusEvents",addProseMirrorPlugins:function(){var e=this.editor;return[new Pn({key:Bu,props:{handleDOMEvents:{focus:function(t,n){e.isFocused=!0;var r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:function(t,n){e.isFocused=!1;var r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),Tu=Hs.create({name:"keymap",addKeyboardShortcuts:function(){var e=this,t=function(){return e.editor.commands.first((function(e){var t=e.commands;return[function(){return t.undoInputRule()},function(){return t.command((function(e){var n=e.tr,r=n.selection,o=n.doc,i=r.empty,a=r.$anchor,s=a.pos,u=a.parent,l=a.parent.isTextblock&&s>0?n.doc.resolve(s-1):a,c=l.parent.type.spec.isolating,d=a.pos-a.parentOffset,f=c&&1===l.parent.childCount?d===a.pos:hn.atStart(o).from===s;return!(!i||!u.type.isTextblock||u.textContent.length||!f||f&&"paragraph"===a.parent.type.name)&&t.clearNodes()}))},function(){return t.deleteSelection()},function(){return t.joinBackward()},function(){return t.selectNodeBackward()}]}))},n=function(){return e.editor.commands.first((function(e){var t=e.commands;return[function(){return t.deleteSelection()},function(){return t.deleteCurrentNode()},function(){return t.joinForward()},function(){return t.selectNodeForward()}]}))},r={Enter:function(){return e.editor.commands.first((function(e){var t=e.commands;return[function(){return t.newlineInCode()},function(){return t.createParagraphNear()},function(){return t.liftEmptyBlock()},function(){return t.splitBlock()}]}))},"Mod-Enter":function(){return e.editor.commands.exitCode()},Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:n,"Mod-Delete":n,"Mod-a":function(){return e.editor.commands.selectAll()}},o=ls({},r),i=ls(ls({},r),{},{"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":n,"Ctrl-Alt-Backspace":n,"Alt-Delete":n,"Alt-d":n,"Ctrl-a":function(){return e.editor.commands.selectTextblockStart()},"Ctrl-e":function(){return e.editor.commands.selectTextblockEnd()}});return Qs()||ou()?i:o},addProseMirrorPlugins:function(){var e=this;return[new Pn({key:new jn("clearDocument"),appendTransaction:function(t,n,r){if(!t.some((function(e){return e.getMeta("composition")}))){var o=t.some((function(e){return e.docChanged}))&&!n.doc.eq(r.doc),i=t.some((function(e){return e.getMeta("preventClearDocument")}));if(o&&!i){var a=n.selection,s=a.empty,u=a.from,l=a.to,c=hn.atStart(n.doc).from,d=hn.atEnd(n.doc).to;if(!s&&u===c&&l===d&&Du(r.doc)){var f=r.tr,p=fs({state:r,transaction:f});if(new ps({editor:e.editor,state:p}).commands.clearNodes(),f.steps.length)return f}}}}})]}}),Pu=Hs.create({name:"paste",addProseMirrorPlugins:function(){var e=this;return[new Pn({key:new jn("tiptapPaste"),props:{handlePaste:function(t,n,r){e.editor.emit("paste",{editor:e.editor,event:n,slice:r})}}})]}}),Nu=Hs.create({name:"tabindex",addProseMirrorPlugins:function(){var e=this;return[new Pn({key:new jn("tabindex"),props:{attributes:function(){return e.editor.isEditable?{tabindex:"0"}:{}}}})]}}),_u=Object.freeze({__proto__:null,ClipboardTextSerializer:$s,Commands:Fu,Drop:Su,Editable:Mu,FocusEvents:Ou,Keymap:Tu,Paste:Pu,Tabindex:Nu,focusEventsPluginKey:Bu}),ju=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;is(this,e),this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=o}return ss(e,[{key:"name",get:function(){return this.node.type.name}},{key:"node",get:function(){return this.currentNode||this.resolvedPos.node()}},{key:"element",get:function(){return this.editor.view.domAtPos(this.pos).node}},{key:"depth",get:function(){var e;return null!==(e=this.actualDepth)&&void 0!==e?e:this.resolvedPos.depth}},{key:"pos",get:function(){return this.resolvedPos.pos}},{key:"content",get:function(){return this.node.content},set:function(e){var t=this.from,n=this.to;if(this.isBlock){if(0===this.content.size)return void console.error("You can’t set content on a block node. Tried to set content on ".concat(this.name," at ").concat(this.pos));t=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:t,to:n},e)}},{key:"attributes",get:function(){return this.node.attrs}},{key:"textContent",get:function(){return this.node.textContent}},{key:"size",get:function(){return this.node.nodeSize}},{key:"from",get:function(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}},{key:"range",get:function(){return{from:this.from,to:this.to}}},{key:"to",get:function(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}},{key:"parent",get:function(){if(0===this.depth)return null;var t=this.resolvedPos.start(this.resolvedPos.depth-1);return new e(this.resolvedPos.doc.resolve(t),this.editor)}},{key:"before",get:function(){var t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new e(t,this.editor)}},{key:"after",get:function(){var t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new e(t,this.editor)}},{key:"children",get:function(){var t=this,n=[];return this.node.content.forEach((function(r,o){var i=r.isBlock&&!r.isTextblock,a=r.isAtom&&!r.isText,s=t.pos+o+(a?0:1),u=t.resolvedPos.doc.resolve(s);if(i||!(u.depth<=t.depth)){var l=new e(u,t.editor,i,i?r:null);i&&(l.actualDepth=t.depth+1),n.push(new e(u,t.editor,i,i?r:null))}})),n}},{key:"firstChild",get:function(){return this.children[0]||null}},{key:"lastChild",get:function(){var e=this.children;return e[e.length-1]||null}},{key:"closest",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=this.parent;r&&!n;){if(r.node.type.name===e)if(Object.keys(t).length>0)for(var o=r.node.attrs,i=Object.keys(t),a=0;a<i.length;a+=1){var s=i[a];if(o[s]!==t[s])break}else n=r;r=r.parent}return n}},{key:"querySelector",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.querySelectorAll(e,t,!0)[0]||null}},{key:"querySelectorAll",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];if(!this.children||0===this.children.length)return r;var o=Object.keys(t);return this.children.forEach((function(i){if(!(n&&r.length>0)){if(i.node.type.name===e){var a=o.every((function(e){return t[e]===i.node.attrs[e]}));a&&r.push(i)}n&&r.length>0||(r=r.concat(i.querySelectorAll(e,t,n)))}})),r}},{key:"setAttribute",value:function(e){var t=this.editor.state.tr;t.setNodeMarkup(this.from,void 0,ls(ls({},this.node.attrs),e)),this.editor.view.dispatch(t)}}])}(),Iu=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return is(this,t),(e=function(e,t,n){return t=Xa(t),function(e,t){if(t&&("object"==Qa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ja()?Reflect.construct(t,n||[],Xa(e).constructor):t.apply(e,n))}(this,t)).isFocused=!1,e.isInitialized=!1,e.extensionStorage={},e.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:function(){return null},onCreate:function(){return null},onUpdate:function(){return null},onSelectionUpdate:function(){return null},onTransaction:function(){return null},onFocus:function(){return null},onBlur:function(){return null},onDestroy:function(){return null},onContentError:function(e){throw e.error},onPaste:function(){return null},onDrop:function(){return null}},e.isCapturingTransaction=!1,e.capturedTransaction=null,e.setOptions(n),e.createExtensionManager(),e.createCommandManager(),e.createSchema(),e.on("beforeCreate",e.options.onBeforeCreate),e.emit("beforeCreate",{editor:e}),e.on("contentError",e.options.onContentError),e.createView(),e.injectCSS(),e.on("create",e.options.onCreate),e.on("update",e.options.onUpdate),e.on("selectionUpdate",e.options.onSelectionUpdate),e.on("transaction",e.options.onTransaction),e.on("focus",e.options.onFocus),e.on("blur",e.options.onBlur),e.on("destroy",e.options.onDestroy),e.on("drop",(function(t){var n=t.event,r=t.slice,o=t.moved;return e.options.onDrop(n,r,o)})),e.on("paste",(function(t){var n=t.event,r=t.slice;return e.options.onPaste(n,r)})),window.setTimeout((function(){e.isDestroyed||(e.commands.focus(e.options.autofocus),e.emit("create",{editor:e}),e.isInitialized=!0)}),0),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ya(e,t)}(t,e),ss(t,[{key:"storage",get:function(){return this.extensionStorage}},{key:"commands",get:function(){return this.commandManager.commands}},{key:"chain",value:function(){return this.commandManager.chain()}},{key:"can",value:function(){return this.commandManager.can()}},{key:"injectCSS",value:function(){this.options.injectCSS&&document&&(this.css=function(e,t){var n=document.querySelector("style[data-tiptap-style".concat("","]"));if(null!==n)return n;var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.setAttribute("data-tiptap-style".concat(""),""),r.innerHTML='.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 0 !important;\n  height: 0 !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',document.getElementsByTagName("head")[0].appendChild(r),r}(0,this.options.injectNonce))}},{key:"setOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=ls(ls({},this.options),e),this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}},{key:"setEditable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}},{key:"isEditable",get:function(){return this.options.editable&&this.view&&this.view.editable}},{key:"state",get:function(){return this.view.state}},{key:"registerPlugin",value:function(e,t){var n=ws(t)?t(e,es(this.state.plugins)):[].concat(es(this.state.plugins),[e]),r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}},{key:"unregisterPlugin",value:function(e){if(!this.isDestroyed){var t=this.state.plugins,n=t;if([].concat(e).forEach((function(e){var t="string"==typeof e?"".concat(e,"$"):e.key;n=n.filter((function(e){return!e.key.startsWith(t)}))})),t.length!==n.length){var r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}}}},{key:"createExtensionManager",value:function(){var e,t,n=this,r=this.options.enableCoreExtensions?[Mu,$s.configure({blockSeparator:null===(t=null===(e=this.options.coreExtensionOptions)||void 0===e?void 0:e.clipboardTextSerializer)||void 0===t?void 0:t.blockSeparator}),Fu,Ou,Tu,Nu,Su,Pu].filter((function(e){return"object"!==Qa(n.options.enableCoreExtensions)||!1!==n.options.enableCoreExtensions[e.name]})):[],o=[].concat(es(r),es(this.options.extensions)).filter((function(e){return["extension","node","mark"].includes(null==e?void 0:e.type)}));this.extensionManager=new Ls(o,this)}},{key:"createCommandManager",value:function(){this.commandManager=new ps({editor:this})}},{key:"createSchema",value:function(){this.schema=this.extensionManager.schema}},{key:"createView",value:function(){var e,t,n=this;try{t=uu(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error&&["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message)))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:function(){n.storage.collaboration&&(n.storage.collaboration.isDisabled=!0),n.options.extensions=n.options.extensions.filter((function(e){return"collaboration"!==e.name})),n.createExtensionManager()}}),t=uu(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}var r=Xs(t,this.options.autofocus);this.view=new aa(this.options.element,ls(ls({},this.options.editorProps),{},{attributes:ls({role:"textbox"},null===(e=this.options.editorProps)||void 0===e?void 0:e.attributes),dispatchTransaction:this.dispatchTransaction.bind(this),state:On.create({doc:t,selection:r||void 0})}));var o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass(),this.view.dom.editor=this}},{key:"createNodeViews",value:function(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}},{key:"prependClass",value:function(){this.view.dom.className="tiptap ".concat(this.view.dom.className)}},{key:"captureTransaction",value:function(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;var t=this.capturedTransaction;return this.capturedTransaction=null,t}},{key:"dispatchTransaction",value:function(e){var t=this;if(!this.view.isDestroyed){if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach((function(e){var n;return null===(n=t.capturedTransaction)||void 0===n?void 0:n.step(e)})):void(this.capturedTransaction=e);var n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});var o=e.getMeta("focus"),i=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:e})}}},{key:"getAttributes",value:function(e){return hu(this.state,e)}},{key:"isActive",value:function(e,t){var n="string"==typeof e?e:null,r="string"==typeof e?t:e;return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return iu(e,null,n)||yu(e,null,n);var r=au(t,e.schema);return"node"===r?iu(e,t,n):"mark"===r&&yu(e,t,n)}(this.state,n,r)}},{key:"getJSON",value:function(){return this.state.doc.toJSON()}},{key:"getHTML",value:function(){return Ss(this.state.doc.content,this.schema)}},{key:"getText",value:function(e){var t=e||{},n=t.blockSeparator,r=void 0===n?"\n\n":n,o=t.textSerializers,i=void 0===o?{}:o;return function(e,t){return Vs(e,{from:0,to:e.content.size},t)}(this.state.doc,{blockSeparator:r,textSerializers:ls(ls({},zs(this.schema)),i)})}},{key:"isEmpty",get:function(){return Du(this.state.doc)}},{key:"getCharacterCount",value:function(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}},{key:"destroy",value:function(){if(this.emit("destroy"),this.view){var e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}},{key:"isDestroyed",get:function(){var e;return!(null===(e=this.view)||void 0===e?void 0:e.docView)}},{key:"$node",value:function(e,t){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelector(e,t))||null}},{key:"$nodes",value:function(e,t){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelectorAll(e,t))||null}},{key:"$pos",value:function(e){var t=this.state.doc.resolve(e);return new ju(t,this)}},{key:"$doc",get:function(){return this.$pos(0)}}])}(hs);function Ru(e){return new Bs({find:e.find,handler:function(t){var n=t.state,r=t.range,o=t.match,i=Cs(e.getAttributes,void 0,o);if(!1===i||null===i)return null;var a=n.tr,s=o[o.length-1],u=o[0];if(s){var l=u.search(/\S/),c=r.from+u.indexOf(s),d=c+s.length;if(vu(r.from,r.to,n.doc).filter((function(t){return t.mark.type.excluded.find((function(n){return n===e.type&&n!==t.mark.type}))})).filter((function(e){return e.to>c})).length)return null;d<r.to&&a.delete(d,r.to),c>r.from&&a.delete(r.from+l,c);var f=r.from+l+s.length;a.addMark(r.from+l,f,e.type.create(i||{})),a.removeStoredMark(e.type)}}})}var Lu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};is(this,e),this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=ls(ls({},this.config),t),this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Cs(ms(this,"addOptions",{name:this.name}))),this.storage=Cs(ms(this,"addStorage",{name:this.name,options:this.options}))||{}}return ss(e,[{key:"configure",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.extend(ls(ls({},this.config),{},{addOptions:function(){return Ns(e.options,t)}}));return n.name=this.name,n.parent=this.parent,n}},{key:"extend",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new e(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(n.name,'".')),n.options=Cs(ms(n,"addOptions",{name:n.name})),n.storage=Cs(ms(n,"addStorage",{name:n.name,options:n.options})),n}}],[{key:"create",value:function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}}])}(),Hu=function(){return ss((function e(t,n,r){is(this,e),this.isDragging=!1,this.component=t,this.editor=n.editor,this.options=ls({stopEvent:null,ignoreMutation:null},r),this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.innerDecorations=n.innerDecorations,this.view=n.view,this.HTMLAttributes=n.HTMLAttributes,this.getPos=n.getPos,this.mount()}),[{key:"mount",value:function(){}},{key:"dom",get:function(){return this.editor.view.dom}},{key:"contentDOM",get:function(){return null}},{key:"onDragStart",value:function(e){var t,n,r,o,i,a,s,u=this.editor.view,l=e.target,c=3===l.nodeType?null===(t=l.parentElement)||void 0===t?void 0:t.closest("[data-drag-handle]"):l.closest("[data-drag-handle]");if(this.dom&&!(null===(n=this.contentDOM)||void 0===n?void 0:n.contains(l))&&c){var d=0,f=0;if(this.dom!==c){var p=this.dom.getBoundingClientRect(),h=c.getBoundingClientRect(),m=null!==(r=e.offsetX)&&void 0!==r?r:null===(o=e.nativeEvent)||void 0===o?void 0:o.offsetX,v=null!==(i=e.offsetY)&&void 0!==i?i:null===(a=e.nativeEvent)||void 0===a?void 0:a.offsetY;d=h.x-p.x+m,f=h.y-p.y+v}var g=this.dom.cloneNode(!0);null===(s=e.dataTransfer)||void 0===s||s.setDragImage(g,d,f);var y=this.getPos();if("number"==typeof y){var b=Dn.create(u.state.doc,y),D=u.state.tr.setSelection(b);u.dispatch(D)}}}},{key:"stopEvent",value:function(e){var t,n=this;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:e});var r=e.target;if(!this.dom.contains(r)||(null===(t=this.contentDOM)||void 0===t?void 0:t.contains(r)))return!1;var o=e.type.startsWith("drag"),i="drop"===e.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!i&&!o)return!0;var a=this.editor.isEditable,s=this.isDragging,u=!!this.node.type.spec.draggable,l=Dn.isSelectable(this.node),c="copy"===e.type,d="paste"===e.type,f="cut"===e.type,p="mousedown"===e.type;if(!u&&l&&o&&e.target===this.dom&&e.preventDefault(),u&&o&&!s&&e.target===this.dom)return e.preventDefault(),!1;if(u&&a&&!s&&p){var h=r.closest("[data-drag-handle]");h&&(this.dom===h||this.dom.contains(h))&&(this.isDragging=!0,document.addEventListener("dragend",(function(){n.isDragging=!1}),{once:!0}),document.addEventListener("drop",(function(){n.isDragging=!1}),{once:!0}),document.addEventListener("mouseup",(function(){n.isDragging=!1}),{once:!0}))}return!(s||i||c||d||f||p&&l)}},{key:"ignoreMutation",value:function(e){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:e}):!(!this.node.isLeaf&&!this.node.isAtom)||"selection"!==e.type&&(!(this.dom.contains(e.target)&&"childList"===e.type&&(Qs()||Ys())&&this.editor.isFocused&&[].concat(es(Array.from(e.addedNodes)),es(Array.from(e.removedNodes))).every((function(e){return e.isContentEditable})))&&(this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target))))}},{key:"updateAttributes",value:function(e){var t=this;this.editor.commands.command((function(n){var r=n.tr,o=t.getPos();return"number"==typeof o&&(r.setNodeMarkup(o,void 0,ls(ls({},t.node.attrs),e)),!0)}))}},{key:"deleteNode",value:function(){var e=this.getPos();if("number"==typeof e){var t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}}}])}();function Vu(e){return new js({find:e.find,handler:function(t){var n=t.state,r=t.range,o=t.match,i=t.pasteEvent,a=Cs(e.getAttributes,void 0,o,i);if(!1===a||null===a)return null;var s=n.tr,u=o[o.length-1],l=o[0],c=r.to;if(u){var d=l.search(/\S/),f=r.from+l.indexOf(u),p=f+u.length;if(vu(r.from,r.to,n.doc).filter((function(t){return t.mark.type.excluded.find((function(n){return n===e.type&&n!==t.mark.type}))})).filter((function(e){return e.to>f})).length)return null;p<r.to&&s.delete(p,r.to),f>r.from&&s.delete(r.from+d,f),c=r.from+d+u.length,s.addMark(r.from+d,c,e.type.create(a||{})),s.removeStoredMark(e.type)}}})}var zu,$u=new Uint8Array(16);function Uu(){if(!zu&&!(zu="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return zu($u)}const Gu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var Wu=[],qu=0;qu<256;++qu)Wu.push((qu+256).toString(16).substr(1));const Ku=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Wu[e[t+0]]+Wu[e[t+1]]+Wu[e[t+2]]+Wu[e[t+3]]+"-"+Wu[e[t+4]]+Wu[e[t+5]]+"-"+Wu[e[t+6]]+Wu[e[t+7]]+"-"+Wu[e[t+8]]+Wu[e[t+9]]+"-"+Wu[e[t+10]]+Wu[e[t+11]]+Wu[e[t+12]]+Wu[e[t+13]]+Wu[e[t+14]]+Wu[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&Gu.test(e)}(n))throw TypeError("Stringified UUID is invalid");return n},Zu=function(e,t,n){var r=(e=e||{}).random||(e.rng||Uu)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return Ku(r)};function Ju(e){return Ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ju(e)}function Xu(e){return function(e){if(Array.isArray(e))return el(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Qu(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||Qu(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qu(e,t){if(e){if("string"==typeof e)return el(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?el(e,t):void 0}}function el(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function tl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nl(r.key),r)}}function nl(e){var t=function(e){if("object"!=Ju(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ju(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ju(t)?t:t+""}var rl=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache=new Map(t)}return function(e,t){return t&&tl(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(e,[{key:"get",value:function(e){return this.cache.get(e)}},{key:"set",value:function(e,t,n){e<0||this.cache.set(e,[t,n])}},{key:"replace",value:function(e,t,n,r){this.remove(e),this.set(t,n,r)}},{key:"remove",value:function(e){this.cache.delete(e)}},{key:"invalidate",value:function(t){var n=new e(this.cache),r=t.mapping;return this.cache.forEach((function(e,o){var i=Yu(e,2),a=i[0],s=i[1];if(!(o<0)){var u=r.mapResult(o),l=t.doc.nodeAt(u.pos);if(u.deleted||!(null==l?void 0:l.eq(a)))n.remove(o);else if(o!==u.pos){var c=s.map((function(e){return e.map(r,0,0)})).filter((function(e){return null!=e}));n.replace(o,u.pos,l,c)}}})),n}}])}();function ol(e){var t=e.parser,n=e.nodeTypes,r=void 0===n?["code_block","codeBlock"]:n,o=e.languageExtractor,i=void 0===o?function(e){return e.attrs.language}:o,a=new jn("prosemirror-highlight");return new Pn({key:a,state:{init:function(e,n){var o=new rl,a=Yu(il(n.doc,t,r,i,o),2);return{cache:o,decorations:a[0],promises:a[1]}},apply:function(e,n){var o=n.cache.invalidate(e),a=!!e.getMeta("prosemirror-highlight-refresh");if(!e.docChanged&&!a)return{cache:o,decorations:n.decorations.map(e.mapping,e.doc),promises:n.promises};var s=Yu(il(e.doc,t,r,i,o),2);return{cache:o,decorations:s[0],promises:s[1]}}},view:function(e){var t=new Set,n=function(){var n,r,o=a.getState(e.state),i=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Qu(e))){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==t.return||t.return()}finally{if(a)throw o}}}}(null!=(n=null==o?void 0:o.promises)?n:[]);try{var s=function(){var n=r.value;t.add(n),n.then((function(){t.delete(n),function(){if(!(t.size>0)){var n=e.state.tr.setMeta("prosemirror-highlight-refresh",!0);e.dispatch(n)}}()})).catch((function(){t.delete(n)}))};for(i.s();!(r=i.n()).done;)s()}catch(e){i.e(e)}finally{i.f()}};return n(),{update:function(){n()}}},props:{decorations:function(e){var t;return null==(t=this.getState(e))?void 0:t.decorations}}})}function il(e,t,n,r,o){var i=[],a=[];return e.descendants((function(e,s){if(!e.type.isTextblock)return!0;if(n.includes(e.type.name)){var u=r(e),l=o.get(s);if(l){var c=Yu(l,2),d=(c[0],c[1]);i.push.apply(i,Xu(d))}else{var f=t({content:e.textContent,language:u||void 0,pos:s,size:e.nodeSize});f&&Array.isArray(f)?(o.set(s,e,f),i.push.apply(i,Xu(f))):f instanceof Promise&&(o.remove(s),a.push(f))}}return!1})),[_i.create(e,i),a]}function al(e){return al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},al(e)}function sl(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ul(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function ul(e,t){if(e){if("string"==typeof e)return ll(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ll(e,t):void 0}}function ll(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function cl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dl(e,t,n){return(t=function(e){var t=function(e){if("object"!=al(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=al(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==al(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fl(e){return"string"==typeof e?e:Object.entries(e).map((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||ul(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),n=t[0],r=t[1];return"".concat(n,":").concat(r)})).join(";")}var pl,hl,ml=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,vl=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,gl=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,yl=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,bl=_s.create({name:"bold",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){var e=this;return[{tag:"strong"},{tag:"b",getAttrs:function(e){return"normal"!==e.style.fontWeight&&null}},{style:"font-weight=400",clearMark:function(t){return t.type.name===e.name}},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}]},renderHTML:function(e){var t=e.HTMLAttributes;return["strong",bs(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{setBold:function(){return function(t){return t.commands.setMark(e.name)}},toggleBold:function(){return function(t){return t.commands.toggleMark(e.name)}},unsetBold:function(){return function(t){return t.commands.unsetMark(e.name)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-b":function(){return e.editor.commands.toggleBold()},"Mod-B":function(){return e.editor.commands.toggleBold()}}},addInputRules:function(){return[Ru({find:ml,type:this.type}),Ru({find:gl,type:this.type})]},addPasteRules:function(){return[Vu({find:vl,type:this.type}),Vu({find:yl,type:this.type})]}}),Dl=/(^|[^`])`([^`]+)`(?!`)/,wl=/(^|[^`])`([^`]+)`(?!`)/g,Cl=_s.create({name:"code",addOptions:function(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML:function(){return[{tag:"code"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["code",bs(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{setCode:function(){return function(t){return t.commands.setMark(e.name)}},toggleCode:function(){return function(t){return t.commands.toggleMark(e.name)}},unsetCode:function(){return function(t){return t.commands.unsetMark(e.name)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-e":function(){return e.editor.commands.toggleCode()}}},addInputRules:function(){return[Ru({find:Dl,type:this.type})]},addPasteRules:function(){return[Vu({find:wl,type:this.type})]}}),kl=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,El=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,xl=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Al=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Fl=_s.create({name:"italic",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){var e=this;return[{tag:"em"},{tag:"i",getAttrs:function(e){return"normal"!==e.style.fontStyle&&null}},{style:"font-style=normal",clearMark:function(t){return t.type.name===e.name}},{style:"font-style=italic"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["em",bs(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{setItalic:function(){return function(t){return t.commands.setMark(e.name)}},toggleItalic:function(){return function(t){return t.commands.toggleMark(e.name)}},unsetItalic:function(){return function(t){return t.commands.unsetMark(e.name)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-i":function(){return e.editor.commands.toggleItalic()},"Mod-I":function(){return e.editor.commands.toggleItalic()}}},addInputRules:function(){return[Ru({find:kl,type:this.type}),Ru({find:xl,type:this.type})]},addPasteRules:function(){return[Vu({find:El,type:this.type}),Vu({find:Al,type:this.type})]}}),Sl=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Ml=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Bl=_s.create({name:"strike",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:function(e){return!!e.includes("line-through")&&{}}}]},renderHTML:function(e){var t=e.HTMLAttributes;return["s",bs(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{setStrike:function(){return function(t){return t.commands.setMark(e.name)}},toggleStrike:function(){return function(t){return t.commands.toggleMark(e.name)}},unsetStrike:function(){return function(t){return t.commands.unsetMark(e.name)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-Shift-s":function(){return e.editor.commands.toggleStrike()}}},addInputRules:function(){return[Ru({find:Sl,type:this.type})]},addPasteRules:function(){return[Vu({find:Ml,type:this.type})]}}),Ol=_s.create({name:"underline",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:function(e){return!!e.includes("underline")&&{}}}]},renderHTML:function(e){var t=e.HTMLAttributes;return["u",bs(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{setUnderline:function(){return function(t){return t.commands.setMark(e.name)}},toggleUnderline:function(){return function(t){return t.commands.toggleMark(e.name)}},unsetUnderline:function(){return function(t){return t.commands.unsetMark(e.name)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-u":function(){return e.editor.commands.toggleUnderline()},"Mod-U":function(){return e.editor.commands.toggleUnderline()}}}}),Tl=Lu.create({name:"tableCell",addOptions:function(){return{HTMLAttributes:{}}},content:"block+",addAttributes:function(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:function(e){var t=e.getAttribute("colwidth");return t?t.split(",").map((function(e){return parseInt(e,10)})):null}}}},tableRole:"cell",isolating:!0,parseHTML:function(){return[{tag:"td"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["td",bs(this.options.HTMLAttributes,t),0]}}),Pl=Lu.create({name:"tableHeader",addOptions:function(){return{HTMLAttributes:{}}},content:"block+",addAttributes:function(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:function(e){var t=e.getAttribute("colwidth");return t?t.split(",").map((function(e){return parseInt(e,10)})):null}}}},tableRole:"header_cell",isolating:!0,parseHTML:function(){return[{tag:"th"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["th",bs(this.options.HTMLAttributes,t),0]}});function Nl(e){return Nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nl(e)}function _l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_l=function(){return!!e})()}function jl(e){return jl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jl(e)}function Il(e,t){return Il=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Il(e,t)}function Rl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ll(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rl(Object(n),!0).forEach((function(t){Hl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hl(e,t,n){return(t=Ul(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ul(r.key),r)}}function $l(e,t,n){return t&&zl(e.prototype,t),n&&zl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ul(e){var t=function(e){if("object"!=Nl(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Nl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Nl(t)?t:t+""}if("undefined"!=typeof WeakMap){var Gl=new WeakMap;pl=function(e){return Gl.get(e)},hl=function(e,t){return Gl.set(e,t),t}}else{var Wl=[],ql=0;pl=function(e){for(var t=0;t<Wl.length;t+=2)if(Wl[t]==e)return Wl[t+1]},hl=function(e,t){return 10==ql&&(ql=0),Wl[ql++]=e,Wl[ql++]=t}}var Kl=function(){return $l((function e(t,n,r,o){Vl(this,e),this.width=t,this.height=n,this.map=r,this.problems=o}),[{key:"findCell",value:function(e){for(var t=0;t<this.map.length;t++){var n=this.map[t];if(n==e){for(var r=t%this.width,o=t/this.width|0,i=r+1,a=o+1,s=1;i<this.width&&this.map[t+s]==n;s++)i++;for(var u=1;a<this.height&&this.map[t+this.width*u]==n;u++)a++;return{left:r,top:o,right:i,bottom:a}}}throw new RangeError("No cell with offset ".concat(e," found"))}},{key:"colCount",value:function(e){for(var t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError("No cell with offset ".concat(e," found"))}},{key:"nextCell",value:function(e,t,n){var r=this.findCell(e),o=r.left,i=r.right,a=r.top,s=r.bottom;return"horiz"==t?(n<0?0==o:i==this.width)?null:this.map[a*this.width+(n<0?o-1:i)]:(n<0?0==a:s==this.height)?null:this.map[o+this.width*(n<0?a-1:s)]}},{key:"rectBetween",value:function(e,t){var n=this.findCell(e),r=n.left,o=n.right,i=n.top,a=n.bottom,s=this.findCell(t),u=s.left,l=s.right,c=s.top,d=s.bottom;return{left:Math.min(r,u),top:Math.min(i,c),right:Math.max(o,l),bottom:Math.max(a,d)}}},{key:"cellsInRect",value:function(e){for(var t=[],n={},r=e.top;r<e.bottom;r++)for(var o=e.left;o<e.right;o++){var i=r*this.width+o,a=this.map[i];n[a]||(n[a]=!0,o==e.left&&o&&this.map[i-1]==a||r==e.top&&r&&this.map[i-this.width]==a||t.push(a))}return t}},{key:"positionAt",value:function(e,t,n){for(var r=0,o=0;;r++){var i=o+n.child(r).nodeSize;if(r==e){for(var a=t+e*this.width,s=(e+1)*this.width;a<s&&this.map[a]<o;)a++;return a==s?i-1:this.map[a]}o=i}}}],[{key:"get",value:function(e){return pl(e)||hl(e,function(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);for(var t=function(e){for(var t=-1,n=!1,r=0;r<e.childCount;r++){var o=e.child(r),i=0;if(n)for(var a=0;a<r;a++)for(var s=e.child(a),u=0;u<s.childCount;u++){var l=s.child(u);a+l.attrs.rowspan>r&&(i+=l.attrs.colspan)}for(var c=0;c<o.childCount;c++){var d=o.child(c);i+=d.attrs.colspan,d.attrs.rowspan>1&&(n=!0)}-1==t?t=i:t!=i&&(t=Math.max(t,i))}return t}(e),n=e.childCount,r=[],o=0,i=null,a=[],s=0,u=t*n;s<u;s++)r[s]=0;for(var l=0,c=0;l<n;l++){var d=e.child(l);c++;for(var f=0;;f++){for(;o<r.length&&0!=r[o];)o++;if(f==d.childCount)break;for(var p=d.child(f),h=p.attrs,m=h.colspan,v=h.rowspan,g=h.colwidth,y=0;y<v;y++){if(y+l>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:c,n:v-y});break}for(var b=o+y*t,D=0;D<m;D++){0==r[b+D]?r[b+D]=c:(i||(i=[])).push({type:"collision",row:l,pos:c,n:m-D});var w=g&&g[D];if(w){var C=(b+D)%t*2,k=a[C];null==k||k!=w&&1==a[C+1]?(a[C]=w,a[C+1]=1):k==w&&a[C+1]++}}}o+=m,c+=p.nodeSize}for(var E=(l+1)*t,x=0;o<E;)0==r[o++]&&x++;x&&(i||(i=[])).push({type:"missing",row:l,n:x}),c++}0!==t&&0!==n||(i||(i=[])).push({type:"zero_sized"});for(var A=new Kl(t,n,r,i),F=!1,S=0;!F&&S<a.length;S+=2)null!=a[S]&&a[S+1]<n&&(F=!0);return F&&function(e,t,n){e.problems||(e.problems=[]);for(var r={},o=0;o<e.map.length;o++){var i=e.map[o];if(!r[i]){r[i]=!0;var a=n.nodeAt(i);if(!a)throw new RangeError("No cell with offset ".concat(i," found"));for(var s=null,u=a.attrs,l=0;l<u.colspan;l++){var c=t[(o+l)%e.width*2];null==c||u.colwidth&&u.colwidth[l]==c||((s||(s=Zl(u)))[l]=c)}s&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:s})}}}(A,a,e),A}(e))}}])}();function Zl(e){if(e.colwidth)return e.colwidth.slice();for(var t=[],n=0;n<e.colspan;n++)t.push(0);return t}function Jl(e){var t=e.cached.tableNodeTypes;if(!t)for(var n in t=e.cached.tableNodeTypes={},e.nodes){var r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}return t}var Xl=new jn("selectingCells");function Yl(e){for(var t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function Ql(e){for(var t=e.selection.$head,n=t.depth;n>0;n--)if("row"==t.node(n).type.spec.tableRole)return!0;return!1}function ec(e){var t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&"cell"==t.node.type.spec.tableRole)return t.$anchor;var n=Yl(t.$head)||function(e){for(var t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){var r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n)}for(var o=e.nodeBefore,i=e.pos;o;o=o.lastChild,i--){var a=o.type.spec.tableRole;if("cell"==a||"header_cell"==a)return e.doc.resolve(i-o.nodeSize)}}(t.$head);if(n)return n;throw new RangeError("No cell found around position ".concat(t.head))}function tc(e){return"row"==e.parent.type.spec.tableRole&&!!e.nodeAfter}function nc(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function rc(e,t,n){var r=e.node(-1),o=Kl.get(r),i=e.start(-1),a=o.nextCell(e.pos-i,t,n);return null==a?null:e.node(0).resolve(i+a)}function oc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=Ll(Ll({},e),{},{colspan:e.colspan-n});return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some((function(e){return e>0}))||(r.colwidth=null)),r}function ic(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=Ll(Ll({},e),{},{colspan:e.colspan+n});if(r.colwidth){r.colwidth=r.colwidth.slice();for(var o=0;o<n;o++)r.colwidth.splice(t,0,0)}return r}var ac=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;Vl(this,t);var o=e.node(-1),i=Kl.get(o),a=e.start(-1),s=i.rectBetween(e.pos-a,r.pos-a),u=e.node(0),l=i.cellsInRect(s).filter((function(e){return e!=r.pos-a}));l.unshift(r.pos-a);var c=l.map((function(e){var t=o.nodeAt(e);if(!t)throw RangeError("No cell with offset ".concat(e," found"));var n=a+e+1;return new mn(u.resolve(n),u.resolve(n+t.content.size))}));return(n=function(e,t,n){return t=jl(t),function(e,t){if(t&&("object"==Nl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_l()?Reflect.construct(t,n||[],jl(e).constructor):t.apply(e,n))}(this,t,[c[0].$from,c[0].$to,c])).$anchorCell=e,n.$headCell=r,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Il(e,t)}(t,e),$l(t,[{key:"map",value:function(e,n){var r=e.resolve(n.map(this.$anchorCell.pos)),o=e.resolve(n.map(this.$headCell.pos));if(tc(r)&&tc(o)&&nc(r,o)){var i=this.$anchorCell.node(-1)!=r.node(-1);return i&&this.isRowSelection()?t.rowSelection(r,o):i&&this.isColSelection()?t.colSelection(r,o):new t(r,o)}return yn.between(r,o)}},{key:"content",value:function(){for(var e=this.$anchorCell.node(-1),t=Kl.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},i=[],a=r.top;a<r.bottom;a++){for(var s=[],u=a*t.width+r.left,l=r.left;l<r.right;l++,u++){var c=t.map[u];if(!o[c]){o[c]=!0;var d=t.findCell(c),f=e.nodeAt(c);if(!f)throw RangeError("No cell with offset ".concat(c," found"));var p=r.left-d.left,h=d.right-r.right;if(p>0||h>0){var m=f.attrs;if(p>0&&(m=oc(m,0,p)),h>0&&(m=oc(m,m.colspan-h,h)),d.left<r.left){if(!(f=f.type.createAndFill(m)))throw RangeError("Could not create cell with attrs ".concat(JSON.stringify(m)))}else f=f.type.create(m,f.content)}if(d.top<r.top||d.bottom>r.bottom){var v=Ll(Ll({},f.attrs),{},{rowspan:Math.min(d.bottom,r.bottom)-Math.max(d.top,r.top)});f=d.top<r.top?f.type.createAndFill(v):f.type.create(v,f.content)}s.push(f)}}i.push(e.child(a).copy(K.from(s)))}var g=this.isColSelection()&&this.isRowSelection()?e:i;return new ee(K.from(g),1,1)}},{key:"replace",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ee.empty,n=e.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],a=i.$from,s=i.$to,u=e.mapping.slice(n);e.replace(u.map(a.pos),u.map(s.pos),o?ee.empty:t)}var l=hn.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);l&&e.setSelection(l)}},{key:"replaceWith",value:function(e,t){this.replace(e,new ee(K.from(t),0,0))}},{key:"forEachCell",value:function(e){for(var t=this.$anchorCell.node(-1),n=Kl.get(t),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r)),i=0;i<o.length;i++)e(t.nodeAt(o[i]),r+o[i])}},{key:"isColSelection",value:function(){var e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;var n=e+this.$anchorCell.nodeAfter.attrs.rowspan,r=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount}},{key:"isRowSelection",value:function(){var e=this.$anchorCell.node(-1),t=Kl.get(e),n=this.$anchorCell.start(-1),r=t.colCount(this.$anchorCell.pos-n),o=t.colCount(this.$headCell.pos-n);if(Math.min(r,o)>0)return!1;var i=r+this.$anchorCell.nodeAfter.attrs.colspan,a=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,a)==t.width}},{key:"eq",value:function(e){return e instanceof t&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}},{key:"toJSON",value:function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}},{key:"getBookmark",value:function(){return new sc(this.$anchorCell.pos,this.$headCell.pos)}}],[{key:"colSelection",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=e.node(-1),o=Kl.get(r),i=e.start(-1),a=o.findCell(e.pos-i),s=o.findCell(n.pos-i),u=e.node(0);return a.top<=s.top?(a.top>0&&(e=u.resolve(i+o.map[a.left])),s.bottom<o.height&&(n=u.resolve(i+o.map[o.width*(o.height-1)+s.right-1]))):(s.top>0&&(n=u.resolve(i+o.map[s.left])),a.bottom<o.height&&(e=u.resolve(i+o.map[o.width*(o.height-1)+a.right-1]))),new t(e,n)}},{key:"rowSelection",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=e.node(-1),o=Kl.get(r),i=e.start(-1),a=o.findCell(e.pos-i),s=o.findCell(n.pos-i),u=e.node(0);return a.left<=s.left?(a.left>0&&(e=u.resolve(i+o.map[a.top*o.width])),s.right<o.width&&(n=u.resolve(i+o.map[o.width*(s.top+1)-1]))):(s.left>0&&(n=u.resolve(i+o.map[s.top*o.width])),a.right<o.width&&(e=u.resolve(i+o.map[o.width*(a.top+1)-1]))),new t(e,n)}},{key:"fromJSON",value:function(e,n){return new t(e.resolve(n.anchor),e.resolve(n.head))}},{key:"create",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;return new t(e.resolve(n),e.resolve(r))}}])}(hn);ac.prototype.visible=!1,hn.jsonID("cell",ac);var sc=function(){function e(t,n){Vl(this,e),this.anchor=t,this.head=n}return $l(e,[{key:"map",value:function(t){return new e(t.map(this.anchor),t.map(this.head))}},{key:"resolve",value:function(e){var t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&nc(t,n)?new ac(t,n):hn.near(n,1)}}])}();function uc(e){if(!(e.selection instanceof ac))return null;var t=[];return e.selection.forEachCell((function(e,n){t.push(Ti.node(n,n+e.nodeSize,{class:"selectedCell"}))})),_i.create(e.doc,t)}var lc=new jn("fix-tables");function cc(e,t,n,r){var o=e.childCount,i=t.childCount;e:for(var a=0,s=0;a<i;a++){for(var u=t.child(a),l=s,c=Math.min(o,a+3);l<c;l++)if(e.child(l)==u){s=l+1,n+=u.nodeSize;continue e}r(u,n),s<o&&e.child(s).sameMarkup(u)?cc(e.child(s),u,n+1,r):u.nodesBetween(0,u.content.size,r,n+1),n+=u.nodeSize}}function dc(e,t){var n,r=function(t,r){"table"==t.type.spec.tableRole&&(n=function(e,t,n,r){var o=Kl.get(t);if(!o.problems)return r;r||(r=e.tr);for(var i,a,s=[],u=0;u<o.height;u++)s.push(0);for(var l=0;l<o.problems.length;l++){var c=o.problems[l];if("collision"==c.type){var d=t.nodeAt(c.pos);if(!d)continue;for(var f=d.attrs,p=0;p<f.rowspan;p++)s[c.row+p]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,oc(f,f.colspan-c.n,c.n))}else if("missing"==c.type)s[c.row]+=c.n;else if("overlong_rowspan"==c.type){var h=t.nodeAt(c.pos);if(!h)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,Ll(Ll({},h.attrs),{},{rowspan:h.attrs.rowspan-c.n}))}else if("colwidth mismatch"==c.type){var m=t.nodeAt(c.pos);if(!m)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,Ll(Ll({},m.attrs),{},{colwidth:c.colwidth}))}else if("zero_sized"==c.type){var v=r.mapping.map(n);r.delete(v,v+t.nodeSize)}}for(var g=0;g<s.length;g++)s[g]&&(null==i&&(i=g),a=g);for(var y=0,b=n+1;y<o.height;y++){var D=t.child(y),w=b+D.nodeSize,C=s[y];if(C>0){var k="cell";D.firstChild&&(k=D.firstChild.type.spec.tableRole);for(var E=[],x=0;x<C;x++){var A=Jl(e.schema)[k].createAndFill();A&&E.push(A)}var F=0!=y&&i!=y-1||a!=y?w-1:b+1;r.insert(r.mapping.map(F),E)}b=w}return r.setMeta(lc,{fixTables:!0})}(e,t,r,n))};return t?t.doc!=e.doc&&cc(t.doc,e.doc,0,r):e.doc.descendants(r),n}function fc(e){var t=e.selection,n=ec(e),r=n.node(-1),o=n.start(-1),i=Kl.get(r);return Ll(Ll({},t instanceof ac?i.rectBetween(t.$anchorCell.pos-o,t.$headCell.pos-o):i.findCell(n.pos-o)),{},{tableStart:o,map:i,table:r})}function pc(e,t,n){var r=t.map,o=t.tableStart,i=t.table,a=n>0?-1:0;(function(e,t,n){for(var r=Jl(t.type.schema).header_cell,o=0;o<e.height;o++)if(t.nodeAt(e.map[n+o*e.width]).type!=r)return!1;return!0})(r,i,n+a)&&(a=0==n||n==r.width?null:0);for(var s=0;s<r.height;s++){var u=s*r.width+n;if(n>0&&n<r.width&&r.map[u-1]==r.map[u]){var l=r.map[u],c=i.nodeAt(l);e.setNodeMarkup(e.mapping.map(o+l),null,ic(c.attrs,n-r.colCount(l))),s+=c.attrs.rowspan-1}else{var d=null==a?Jl(i.type.schema).cell:i.nodeAt(r.map[u+a]).type,f=r.positionAt(s,n,i);e.insert(e.mapping.map(o+f),d.createAndFill())}}return e}function hc(e,t,n){for(var r=t.map,o=t.table,i=t.tableStart,a=e.mapping.maps.length,s=0;s<r.height;){var u=s*r.width+n,l=r.map[u],c=o.nodeAt(l),d=c.attrs;if(n>0&&r.map[u-1]==l||n<r.width-1&&r.map[u+1]==l)e.setNodeMarkup(e.mapping.slice(a).map(i+l),null,oc(d,n-r.colCount(l)));else{var f=e.mapping.slice(a).map(i+l);e.delete(f,f+c.nodeSize)}s+=d.rowspan}}function mc(e,t,n){for(var r,o=t.map,i=t.tableStart,a=t.table,s=i,u=0;u<n;u++)s+=a.child(u).nodeSize;var l=[],c=n>0?-1:0;(function(e,t,n){for(var r,o=Jl(t.type.schema).header_cell,i=0;i<e.width;i++)if((null==(r=t.nodeAt(e.map[i+n*e.width]))?void 0:r.type)!=o)return!1;return!0})(o,a,n+c)&&(c=0==n||n==o.height?null:0);for(var d=0,f=o.width*n;d<o.width;d++,f++)if(n>0&&n<o.height&&o.map[f]==o.map[f-o.width]){var p=o.map[f],h=a.nodeAt(p).attrs;e.setNodeMarkup(i+p,null,Ll(Ll({},h),{},{rowspan:h.rowspan+1})),d+=h.colspan-1}else{var m=null==c?Jl(a.type.schema).cell:null==(r=a.nodeAt(o.map[f+c*o.width]))?void 0:r.type,v=null==m?void 0:m.createAndFill();v&&l.push(v)}return e.insert(s,Jl(a.type.schema).row.create(null,l)),e}function vc(e,t,n){for(var r=t.map,o=t.table,i=t.tableStart,a=0,s=0;s<n;s++)a+=o.child(s).nodeSize;var u=a+o.child(n).nodeSize,l=e.mapping.maps.length;e.delete(a+i,u+i);for(var c=new Set,d=0,f=n*r.width;d<r.width;d++,f++){var p=r.map[f];if(!c.has(p))if(c.add(p),n>0&&p==r.map[f-r.width]){var h=o.nodeAt(p).attrs;e.setNodeMarkup(e.mapping.slice(l).map(p+i),null,Ll(Ll({},h),{},{rowspan:h.rowspan-1})),d+=h.colspan-1}else if(n<r.height&&p==r.map[f+r.width]){var m=o.nodeAt(p),v=m.attrs,g=m.type.create(Ll(Ll({},v),{},{rowspan:m.attrs.rowspan-1}),m.content),y=r.positionAt(n+1,d,o);e.insert(e.mapping.slice(l).map(i+y),g),d+=v.colspan-1}}}function gc(e){var t=e.content;return 1==t.childCount&&t.child(0).isTextblock&&0==t.child(0).childCount}function yc(e,t,n){for(var r=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1}),o=0;o<r.length;o++){var i=t.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function bc(e,t){return(t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(e){return function(t,n){if(!Ql(t))return!1;if(n){for(var r=Jl(t.schema),o=fc(t),i=t.tr,a=o.map.cellsInRect("column"==e?{left:o.left,top:0,right:o.right,bottom:o.map.height}:"row"==e?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),s=a.map((function(e){return o.table.nodeAt(e)})),u=0;u<a.length;u++)s[u].type==r.header_cell&&i.setNodeMarkup(o.tableStart+a[u],r.cell,s[u].attrs);if(0==i.steps.length)for(var l=0;l<a.length;l++)i.setNodeMarkup(o.tableStart+a[l],r.header_cell,s[l].attrs);n(i)}return!0}}(e):function(t,n){if(!Ql(t))return!1;if(n){var r=Jl(t.schema),o=fc(t),i=t.tr,a=yc("row",o,r),s=yc("column",o,r),u=("column"===e?a:"row"===e&&s)?1:0,l="column"==e?{left:0,top:u,right:1,bottom:o.map.height}:"row"==e?{left:u,top:0,right:o.map.width,bottom:1}:o,c="column"==e?s?r.cell:r.header_cell:"row"==e?a?r.cell:r.header_cell:r.cell;o.map.cellsInRect(l).forEach((function(e){var t=e+o.tableStart,n=i.doc.nodeAt(t);n&&i.setNodeMarkup(t,c,n.attrs)})),n(i)}return!0}}function Dc(e){return function(t,n){if(!Ql(t))return!1;var r,o=function(e,t){if(t<0){var n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(var r=e.index(-1)-1,o=e.before();r>=0;r--){var i=e.node(-1).child(r),a=i.lastChild;if(a)return o-1-a.nodeSize;o-=i.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;for(var s=e.node(-1),u=e.indexAfter(-1),l=e.after();u<s.childCount;u++){var c=s.child(u);if(c.childCount)return l+1;l+=c.nodeSize}}return null}(ec(t),e);if(null==o)return!1;if(n){var i=t.doc.resolve(o);n(t.tr.setSelection(yn.between(i,(r=i,r.node(0).resolve(r.pos+r.nodeAfter.nodeSize)))).scrollIntoView())}return!0}}function wc(e,t){var n=e.selection;if(!(n instanceof ac))return!1;if(t){var r=e.tr,o=Jl(e.schema).cell.createAndFill().content;n.forEachCell((function(e,t){e.content.eq(o)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new ee(o,0,0))})),r.docChanged&&t(r)}return!0}function Cc(e,t){var n=e.createAndFill();return new Qt(n).replace(0,n.content.size,t).doc}function kc(e,t,n,r,o,i,a,s){if(0==a||a==t.height)return!1;for(var u=!1,l=o;l<i;l++){var c=a*t.width+l,d=t.map[c];if(t.map[c-t.width]==d){u=!0;var f=n.nodeAt(d),p=t.findCell(d),h=p.top,m=p.left;e.setNodeMarkup(e.mapping.slice(s).map(d+r),null,Ll(Ll({},f.attrs),{},{rowspan:a-h})),e.insert(e.mapping.slice(s).map(t.positionAt(a,m,n)),f.type.createAndFill(Ll(Ll({},f.attrs),{},{rowspan:h+f.attrs.rowspan-a}))),l+=f.attrs.colspan-1}}return u}function Ec(e,t,n,r,o,i,a,s){if(0==a||a==t.width)return!1;for(var u=!1,l=o;l<i;l++){var c=l*t.width+a,d=t.map[c];if(t.map[c-1]==d){u=!0;var f=n.nodeAt(d),p=t.colCount(d),h=e.mapping.slice(s).map(d+r);e.setNodeMarkup(h,null,oc(f.attrs,a-p,f.attrs.colspan-(a-p))),e.insert(h+f.nodeSize,f.type.createAndFill(oc(f.attrs,0,a-p))),l+=f.attrs.rowspan-1}}return u}function xc(e,t,n,r,o){var i=n?e.doc.nodeAt(n-1):e.doc;if(!i)throw new Error("No table found");var a=Kl.get(i),s=r.top,u=r.left,l=u+o.width,c=s+o.height,d=e.tr,f=0;function p(){if(!(i=n?d.doc.nodeAt(n-1):d.doc))throw new Error("No table found");a=Kl.get(i),f=d.mapping.maps.length}(function(e,t,n,r,o,i,a){var s,u,l=Jl(e.doc.type.schema);if(o>t.width)for(var c=0,d=0;c<t.height;c++){var f=n.child(c);d+=f.nodeSize;var p,h=[];p=null==f.lastChild||f.lastChild.type==l.cell?s||(s=l.cell.createAndFill()):u||(u=l.header_cell.createAndFill());for(var m=t.width;m<o;m++)h.push(p);e.insert(e.mapping.slice(a).map(d-1+r),h)}if(i>t.height){for(var v=[],g=0,y=(t.height-1)*t.width;g<Math.max(t.width,o);g++){var b=!(g>=t.width)&&n.nodeAt(t.map[y+g]).type==l.header_cell;v.push(b?u||(u=l.header_cell.createAndFill()):s||(s=l.cell.createAndFill()))}for(var D=l.row.create(null,K.from(v)),w=[],C=t.height;C<i;C++)w.push(D);e.insert(e.mapping.slice(a).map(r+n.nodeSize-2),w)}return!(!s&&!u)})(d,a,i,n,l,c,f)&&p(),kc(d,a,i,n,u,l,s,f)&&p(),kc(d,a,i,n,u,l,c,f)&&p(),Ec(d,a,i,n,s,c,u,f)&&p(),Ec(d,a,i,n,s,c,l,f)&&p();for(var h=s;h<c;h++){var m=a.positionAt(h,u,i),v=a.positionAt(h,l,i);d.replace(d.mapping.slice(f).map(m+n),d.mapping.slice(f).map(v+n),new ee(o.rows[h-s],0,0))}p(),d.setSelection(new ac(d.doc.resolve(n+a.positionAt(s,u,i)),d.doc.resolve(n+a.positionAt(c-1,l-1,i)))),t(d)}bc("row",{useDeprecatedLogic:!0}),bc("column",{useDeprecatedLogic:!0}),bc("cell",{useDeprecatedLogic:!0});var Ac=Ca({ArrowLeft:Sc("horiz",-1),ArrowRight:Sc("horiz",1),ArrowUp:Sc("vert",-1),ArrowDown:Sc("vert",1),"Shift-ArrowLeft":Mc("horiz",-1),"Shift-ArrowRight":Mc("horiz",1),"Shift-ArrowUp":Mc("vert",-1),"Shift-ArrowDown":Mc("vert",1),Backspace:wc,"Mod-Backspace":wc,Delete:wc,"Mod-Delete":wc});function Fc(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function Sc(e,t){return function(n,r,o){if(!o)return!1;var i=n.selection;if(i instanceof ac)return Fc(n,r,hn.near(i.$headCell,t));if("horiz"!=e&&!i.empty)return!1;var a=Pc(o,e,t);if(null==a)return!1;if("horiz"==e)return Fc(n,r,hn.near(n.doc.resolve(i.head+t),t));var s,u=n.doc.resolve(a),l=rc(u,e,t);return s=l?hn.near(l,1):t<0?hn.near(n.doc.resolve(u.before(-1)),-1):hn.near(n.doc.resolve(u.after(-1)),1),Fc(n,r,s)}}function Mc(e,t){return function(n,r,o){if(!o)return!1;var i,a=n.selection;if(a instanceof ac)i=a;else{var s=Pc(o,e,t);if(null==s)return!1;i=new ac(n.doc.resolve(s))}var u=rc(i.$headCell,e,t);return!!u&&Fc(n,r,new ac(i.$anchorCell,u))}}function Bc(e,t){var n=Yl(e.state.doc.resolve(t));return!!n&&(e.dispatch(e.state.tr.setSelection(new ac(n))),!0)}function Oc(e,t,n){if(!Ql(e.state))return!1;var r=function(e){if(!e.size)return null;for(var t=e.content,n=e.openStart,r=e.openEnd;1==t.childCount&&(n>0&&r>0||"table"==t.child(0).type.spec.tableRole);)n--,r--,t=t.child(0).content;var o=t.child(0),i=o.type.spec.tableRole,a=o.type.schema,s=[];if("row"==i)for(var u=0;u<t.childCount;u++){var l=t.child(u).content,c=u?0:Math.max(0,n-1),d=u<t.childCount-1?0:Math.max(0,r-1);(c||d)&&(l=Cc(Jl(a).row,new ee(l,c,d)).content),s.push(l)}else{if("cell"!=i&&"header_cell"!=i)return null;s.push(n||r?Cc(Jl(a).row,new ee(t,n,r)).content:t)}return function(e,t){for(var n=[],r=0;r<t.length;r++)for(var o=t[r],i=o.childCount-1;i>=0;i--)for(var a=o.child(i).attrs,s=a.rowspan,u=a.colspan,l=r;l<r+s;l++)n[l]=(n[l]||0)+u;for(var c=0,d=0;d<n.length;d++)c=Math.max(c,n[d]);for(var f=0;f<n.length;f++)if(f>=t.length&&t.push(K.empty),n[f]<c){for(var p=Jl(e).cell.createAndFill(),h=[],m=n[f];m<c;m++)h.push(p);t[f]=t[f].append(K.from(h))}return{height:t.length,width:c,rows:t}}(a,s)}(n),o=e.state.selection;if(o instanceof ac){r||(r={width:1,height:1,rows:[K.from(Cc(Jl(e.state.schema).cell,n))]});var i=o.$anchorCell.node(-1),a=o.$anchorCell.start(-1),s=Kl.get(i).rectBetween(o.$anchorCell.pos-a,o.$headCell.pos-a);return r=function(e,t,n){var r=e.width,o=e.height,i=e.rows;if(r!=t){for(var a=[],s=[],u=0;u<i.length;u++){for(var l=i[u],c=[],d=a[u]||0,f=0;d<t;f++){var p=l.child(f%l.childCount);d+p.attrs.colspan>t&&(p=p.type.createChecked(oc(p.attrs,p.attrs.colspan,d+p.attrs.colspan-t),p.content)),c.push(p),d+=p.attrs.colspan;for(var h=1;h<p.attrs.rowspan;h++)a[u+h]=(a[u+h]||0)+p.attrs.colspan}s.push(K.from(c))}i=s,r=t}if(o!=n){for(var m=[],v=0,g=0;v<n;v++,g++){for(var y=[],b=i[g%o],D=0;D<b.childCount;D++){var w=b.child(D);v+w.attrs.rowspan>n&&(w=w.type.create(Ll(Ll({},w.attrs),{},{rowspan:Math.max(1,n-w.attrs.rowspan)}),w.content)),y.push(w)}m.push(K.from(y))}i=m,o=n}return{width:r,height:o,rows:i}}(r,s.right-s.left,s.bottom-s.top),xc(e.state,e.dispatch,a,s,r),!0}if(r){var u=ec(e.state),l=u.start(-1);return xc(e.state,e.dispatch,l,Kl.get(u.node(-1)).findCell(u.pos-l),r),!0}return!1}function Tc(e,t){var n;if(!t.ctrlKey&&!t.metaKey){var r,o=Nc(e,t.target);if(t.shiftKey&&e.state.selection instanceof ac)i(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&o&&null!=(r=Yl(e.state.selection.$anchor))&&(null==(n=_c(e,t))?void 0:n.pos)!=r.pos)i(r,t),t.preventDefault();else if(!o)return;e.root.addEventListener("mouseup",a),e.root.addEventListener("dragstart",a),e.root.addEventListener("mousemove",s)}function i(t,n){var r=_c(e,n),o=null==Xl.getState(e.state);if(!r||!nc(t,r)){if(!o)return;r=t}var i=new ac(t,r);if(o||!e.state.selection.eq(i)){var a=e.state.tr.setSelection(i);o&&a.setMeta(Xl,t.pos),e.dispatch(a)}}function a(){e.root.removeEventListener("mouseup",a),e.root.removeEventListener("dragstart",a),e.root.removeEventListener("mousemove",s),null!=Xl.getState(e.state)&&e.dispatch(e.state.tr.setMeta(Xl,-1))}function s(n){var r,s=n,u=Xl.getState(e.state);if(null!=u)r=e.state.doc.resolve(u);else if(Nc(e,s.target)!=o&&!(r=_c(e,t)))return a();r&&i(r,s)}}function Pc(e,t,n){if(!(e.state.selection instanceof yn))return null;for(var r=e.state.selection.$head,o=r.depth-1;o>=0;o--){var i=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:i.childCount))return null;if("cell"==i.type.spec.tableRole||"header_cell"==i.type.spec.tableRole){var a=r.before(o),s="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(s)?a:null}}return null}function Nc(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t;return null}function _c(e,t){var n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?Yl(e.state.doc.resolve(n.pos)):null}var jc=function(){return $l((function e(t,n){Vl(this,e),this.node=t,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width","".concat(n,"px")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Ic(t,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}),[{key:"update",value:function(e){return e.type==this.node.type&&(this.node=e,Ic(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}},{key:"ignoreMutation",value:function(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))}}])}();function Ic(e,t,n,r,o,i){var a,s=0,u=!0,l=t.firstChild,c=e.firstChild;if(c){for(var d=0,f=0;d<c.childCount;d++)for(var p=c.child(d).attrs,h=p.colspan,m=p.colwidth,v=0;v<h;v++,f++){var g=o==f?i:m&&m[v],y=g?g+"px":"";if(s+=g||r,g||(u=!1),l)l.style.width!=y&&(l.style.width=y),l=l.nextSibling;else{var b=document.createElement("col");b.style.width=y,t.appendChild(b)}}for(;l;){var D=l.nextSibling;null==(a=l.parentNode)||a.removeChild(l),l=D}u?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}}var Rc=new jn("tableColumnResizing");function Lc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.handleWidth,n=void 0===t?5:t,r=e.cellMinWidth,o=void 0===r?25:r,i=e.defaultCellMinWidth,a=void 0===i?100:i,s=e.View,u=void 0===s?jc:s,l=e.lastColumnResizable,c=void 0===l||l,d=new Pn({key:Rc,state:{init:function(e,t){var n,r,o=null==(r=null==(n=d.spec)?void 0:n.props)?void 0:r.nodeViews,i=Jl(t.schema).table.name;return u&&o&&(o[i]=function(e,t){return new u(e,a,t)}),new Hc(-1,!1)},apply:function(e,t){return t.apply(e)}},props:{attributes:function(e){var t=Rc.getState(e);return t&&t.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:function(e,t){!function(e,t,n,r){if(e.editable){var o=Rc.getState(e.state);if(o&&!o.dragging){var i=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target),a=-1;if(i){var s=i.getBoundingClientRect(),u=s.left,l=s.right;t.clientX-u<=n?a=Vc(e,t,"left",n):l-t.clientX<=n&&(a=Vc(e,t,"right",n))}if(a!=o.activeHandle){if(!r&&-1!==a){var c=e.state.doc.resolve(a),d=c.node(-1),f=Kl.get(d),p=c.start(-1);if(f.colCount(c.pos-p)+c.nodeAfter.attrs.colspan-1==f.width-1)return}$c(e,a)}}}}(e,t,n,c)},mouseleave:function(e){!function(e){if(e.editable){var t=Rc.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&$c(e,-1)}}(e)},mousedown:function(e,t){!function(e,t,n,r){var o;if(!e.editable)return!1;var i=null!=(o=e.dom.ownerDocument.defaultView)?o:window,a=Rc.getState(e.state);if(!a||-1==a.activeHandle||a.dragging)return!1;var s=e.state.doc.nodeAt(a.activeHandle),u=function(e,t,n){var r=n.colspan,o=n.colwidth,i=o&&o[o.length-1];if(i)return i;var a=e.domAtPos(t),s=a.node.childNodes[a.offset].offsetWidth,u=r;if(o)for(var l=0;l<r;l++)o[l]&&(s-=o[l],u--);return s/u}(e,a.activeHandle,s.attrs);function l(t){i.removeEventListener("mouseup",l),i.removeEventListener("mousemove",c);var r=Rc.getState(e.state);(null==r?void 0:r.dragging)&&(function(e,t,n){for(var r=e.state.doc.resolve(t),o=r.node(-1),i=Kl.get(o),a=r.start(-1),s=i.colCount(r.pos-a)+r.nodeAfter.attrs.colspan-1,u=e.state.tr,l=0;l<i.height;l++){var c=l*i.width+s;if(!l||i.map[c]!=i.map[c-i.width]){var d=i.map[c],f=o.nodeAt(d).attrs,p=1==f.colspan?0:s-i.colCount(d);if(!f.colwidth||f.colwidth[p]!=n){var h=f.colwidth?f.colwidth.slice():(m=f.colspan,Array(m).fill(0));h[p]=n,u.setNodeMarkup(a+d,null,Ll(Ll({},f),{},{colwidth:h}))}}}var m;u.docChanged&&e.dispatch(u)}(e,r.activeHandle,zc(r.dragging,t,n)),e.dispatch(e.state.tr.setMeta(Rc,{setDragging:null})))}function c(t){if(!t.which)return l(t);var o=Rc.getState(e.state);if(o&&o.dragging){var i=zc(o.dragging,t,n);Uc(e,o.activeHandle,i,r)}}e.dispatch(e.state.tr.setMeta(Rc,{setDragging:{startX:t.clientX,startWidth:u}})),Uc(e,a.activeHandle,u,r),i.addEventListener("mouseup",l),i.addEventListener("mousemove",c),t.preventDefault()}(e,t,o,a)}},decorations:function(e){var t=Rc.getState(e);if(t&&t.activeHandle>-1)return function(e,t){var n,r=[],o=e.doc.resolve(t),i=o.node(-1);if(!i)return _i.empty;for(var a=Kl.get(i),s=o.start(-1),u=a.colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1,l=0;l<a.height;l++){var c=u+l*a.width;if(!(u!=a.width-1&&a.map[c]==a.map[c+1]||0!=l&&a.map[c]==a.map[c-a.width])){var d=a.map[c],f=s+d+i.nodeAt(d).nodeSize-1,p=document.createElement("div");p.className="column-resize-handle",(null==(n=Rc.getState(e))?void 0:n.dragging)&&r.push(Ti.node(s+d,s+d+i.nodeAt(d).nodeSize,{class:"column-resize-dragging"})),r.push(Ti.widget(f,p))}}return _i.create(e.doc,r)}(e,t.activeHandle)},nodeViews:{}}});return d}var Hc=function(){function e(t,n){Vl(this,e),this.activeHandle=t,this.dragging=n}return $l(e,[{key:"apply",value:function(t){var n=this,r=t.getMeta(Rc);if(r&&null!=r.setHandle)return new e(r.setHandle,!1);if(r&&void 0!==r.setDragging)return new e(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&t.docChanged){var o=t.mapping.map(n.activeHandle,-1);return tc(t.doc.resolve(o))||(o=-1),new e(o,n.dragging)}return n}}])}();function Vc(e,t,n,r){var o="right"==n?-r:r,i=e.posAtCoords({left:t.clientX+o,top:t.clientY});if(!i)return-1;var a=i.pos,s=Yl(e.state.doc.resolve(a));if(!s)return-1;if("right"==n)return s.pos;var u=Kl.get(s.node(-1)),l=s.start(-1),c=u.map.indexOf(s.pos-l);return c%u.width==0?-1:l+u.map[c-1]}function zc(e,t,n){var r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function $c(e,t){e.dispatch(e.state.tr.setMeta(Rc,{setHandle:t}))}function Uc(e,t,n,r){for(var o=e.state.doc.resolve(t),i=o.node(-1),a=o.start(-1),s=Kl.get(i).colCount(o.pos-a)+o.nodeAfter.attrs.colspan-1,u=e.domAtPos(o.start(-1)).node;u&&"TABLE"!=u.nodeName;)u=u.parentNode;u&&Ic(i,u.firstChild,u,r,s,n)}function Gc(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).allowTableNodeSelection,t=void 0!==e&&e;return new Pn({key:Xl,state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(Xl);if(null!=n)return-1==n?null:n;if(null==t||!e.docChanged)return t;var r=e.mapping.mapResult(t),o=r.deleted,i=r.pos;return o?null:i}},props:{decorations:uc,handleDOMEvents:{mousedown:Tc},createSelectionBetween:function(e){return null!=Xl.getState(e.state)?e.state.selection:null},handleTripleClick:Bc,handleKeyDown:Ac,handlePaste:Oc},appendTransaction:function(e,n,r){return function(e,t,n){var r,o,i=(t||e).selection,a=(t||e).doc;if(i instanceof Dn&&(o=i.node.type.spec.tableRole)){if("cell"==o||"header_cell"==o)r=ac.create(a,i.from);else if("row"==o){var s=a.resolve(i.from+1);r=ac.rowSelection(s,s)}else if(!n){var u=Kl.get(i.node),l=i.from+1,c=l+u.map[u.width*u.height-1];r=ac.create(a,l+1,c)}}else i instanceof yn&&function(e){var t=e.$from,n=e.$to;if(t.pos==n.pos||t.pos<n.pos-6)return!1;for(var r=t.pos,o=n.pos,i=t.depth;i>=0&&!(t.after(i+1)<t.end(i));i--,r++);for(var a=n.depth;a>=0&&!(n.before(a+1)>n.start(a));a--,o--);return r==o&&/row|table/.test(t.node(i).type.spec.tableRole)}(i)?r=yn.create(a,i.from):i instanceof yn&&function(e){for(var t,n,r=e.$from,o=e.$to,i=r.depth;i>0;i--){var a=r.node(i);if("cell"===a.type.spec.tableRole||"header_cell"===a.type.spec.tableRole){t=a;break}}for(var s=o.depth;s>0;s--){var u=o.node(s);if("cell"===u.type.spec.tableRole||"header_cell"===u.type.spec.tableRole){n=u;break}}return t!==n&&0===o.parentOffset}(i)&&(r=yn.create(a,i.$from.start(),i.$from.end()));return r&&(t||(t=e.tr)).setSelection(r),t}(r,dc(r,n),t)}})}function Wc(e){return Wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(e)}function qc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Jc(r.key),r)}}function Zc(e,t,n){return t&&Kc(e.prototype,t),n&&Kc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jc(e){var t=function(e){if("object"!=Wc(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Wc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Wc(t)?t:t+""}function Xc(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xc=function(){return!!e})()}function Yc(e){return Yc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yc(e)}function Qc(e,t){return Qc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qc(e,t)}var ed=function(e){function t(e){return qc(this,t),function(e,t,n){return t=Yc(t),function(e,t){if(t&&("object"==Wc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Xc()?Reflect.construct(t,n||[],Yc(e).constructor):t.apply(e,n))}(this,t,[e,e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qc(e,t)}(t,e),Zc(t,[{key:"map",value:function(e,n){var r=e.resolve(n.map(this.head));return t.valid(r)?new t(r):hn.near(r)}},{key:"content",value:function(){return ee.empty}},{key:"eq",value:function(e){return e instanceof t&&e.head==this.head}},{key:"toJSON",value:function(){return{type:"gapcursor",pos:this.head}}},{key:"getBookmark",value:function(){return new td(this.anchor)}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(e.resolve(n.pos))}},{key:"valid",value:function(e){var t=e.parent;if(t.isTextblock||!function(e){for(var t=e.depth;t>=0;t--){var n=e.index(t),r=e.node(t);if(0!=n)for(var o=r.child(n-1);;o=o.lastChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e)||!function(e){for(var t=e.depth;t>=0;t--){var n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(var o=r.child(n);;o=o.firstChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e))return!1;var n=t.type.spec.allowGapCursor;if(null!=n)return n;var r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}},{key:"findGapCursorFrom",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e:for(;;){if(!r&&t.valid(e))return e;for(var o=e.pos,i=null,a=e.depth;;a--){var s=e.node(a);if(n>0?e.indexAfter(a)<s.childCount:e.index(a)>0){i=s.child(n>0?e.indexAfter(a):e.index(a)-1);break}if(0==a)return null;o+=n;var u=e.doc.resolve(o);if(t.valid(u))return u}for(;;){var l=n>0?i.firstChild:i.lastChild;if(!l){if(i.isAtom&&!i.isText&&!Dn.isSelectable(i)){e=e.doc.resolve(o+i.nodeSize*n),r=!1;continue e}break}i=l,o+=n;var c=e.doc.resolve(o);if(t.valid(c))return c}return null}}}])}(hn);ed.prototype.visible=!1,ed.findFrom=ed.findGapCursorFrom,hn.jsonID("gapcursor",ed);var td=function(){function e(t){qc(this,e),this.pos=t}return Zc(e,[{key:"map",value:function(t){return new e(t.map(this.pos))}},{key:"resolve",value:function(e){var t=e.resolve(this.pos);return ed.valid(t)?new ed(t):hn.near(t)}}])}(),nd=Ca({ArrowLeft:rd("horiz",-1),ArrowRight:rd("horiz",1),ArrowUp:rd("vert",-1),ArrowDown:rd("vert",1)});function rd(e,t){var n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,o){var i=e.selection,a=t>0?i.$to:i.$from,s=i.empty;if(i instanceof yn){if(!o.endOfTextblock(n)||0==a.depth)return!1;s=!1,a=e.doc.resolve(t>0?a.after():a.before())}var u=ed.findGapCursorFrom(a,t,s);return!!u&&(r&&r(e.tr.setSelection(new ed(u))),!0)}}function od(e,t,n){if(!e||!e.editable)return!1;var r=e.state.doc.resolve(t);if(!ed.valid(r))return!1;var o=e.posAtCoords({left:n.clientX,top:n.clientY});return!(o&&o.inside>-1&&Dn.isSelectable(e.state.doc.nodeAt(o.inside))||(e.dispatch(e.state.tr.setSelection(new ed(r))),0))}function id(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof ed))return!1;var n=e.state.selection.$from,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;for(var o=K.empty,i=r.length-1;i>=0;i--)o=K.from(r[i].createAndFill(null,o));var a=e.state.tr.replace(n.pos,n.pos,new ee(o,0,0));return a.setSelection(yn.near(a.doc.resolve(n.pos+1))),e.dispatch(a),!1}function ad(e){if(!(e.selection instanceof ed))return null;var t=document.createElement("div");return t.className="ProseMirror-gapcursor",_i.create(e.doc,[Ti.widget(e.selection.head,t,{key:"gapcursor"})])}var sd=Hs.create({name:"gapCursor",addProseMirrorPlugins:function(){return[new Pn({props:{decorations:ad,createSelectionBetween:function(e,t,n){return t.pos==n.pos&&ed.valid(n)?new ed(n):null},handleClick:od,handleKeyDown:nd,handleDOMEvents:{beforeinput:id}}})]},extendNodeSchema:function(e){var t;return{allowGapCursor:null!==(t=Cs(ms(e,"allowGapCursor",{name:e.name,options:e.options,storage:e.storage})))&&void 0!==t?t:null}}}),ud=200,ld=function(){};ld.prototype.append=function(e){return e.length?(e=ld.from(e),!this.length&&e||e.length<ud&&this.leafAppend(e)||this.length<ud&&e.leafPrepend(this)||this.appendInner(e)):this},ld.prototype.prepend=function(e){return e.length?ld.from(e).append(this):this},ld.prototype.appendInner=function(e){return new dd(this,e)},ld.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?ld.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},ld.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},ld.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},ld.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},ld.from=function(e){return e instanceof ld?e:e&&e.length?new cd(e):ld.empty};var cd=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var o=t;o<n;o++)if(!1===e(this.values[o],r+o))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var o=t-1;o>=n;o--)if(!1===e(this.values[o],r+o))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=ud)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=ud)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(ld);ld.empty=new cd([]);var dd=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var o=this.left.length;return!(t<o&&!1===this.left.forEachInner(e,t,Math.min(n,o),r))&&!(n>o&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,n)-o,r+o))&&void 0},t.prototype.forEachInvertedInner=function(e,t,n,r){var o=this.left.length;return!(t>o&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(n,o)-o,r+o))&&!(n<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),n,r))&&void 0},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(ld);const fd=ld;function pd(e){return pd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pd(e)}function hd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function md(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gd(r.key),r)}}function vd(e,t,n){return t&&md(e.prototype,t),n&&md(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function gd(e){var t=function(e){if("object"!=pd(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=pd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pd(t)?t:t+""}var yd=function(){function e(t,n){hd(this,e),this.items=t,this.eventCount=n}return vd(e,[{key:"popEvent",value:function(t,n){var r=this;if(0==this.eventCount)return null;for(var o,i,a=this.items.length;;a--)if(this.items.get(a-1).selection){--a;break}n&&(o=this.remapping(a,this.items.length),i=o.maps.length);var s,u,l=t.tr,c=[],d=[];return this.items.forEach((function(t,n){if(!t.step)return o||(o=r.remapping(a,n+1),i=o.maps.length),i--,void d.push(t);if(o){d.push(new bd(t.map));var f,p=t.step.map(o.slice(i));p&&l.maybeStep(p).doc&&(f=l.mapping.maps[l.mapping.maps.length-1],c.push(new bd(f,void 0,void 0,c.length+d.length))),i--,f&&o.appendMap(f,i)}else l.maybeStep(t.step);return t.selection?(s=o?t.selection.map(o.slice(i)):t.selection,u=new e(r.items.slice(0,a).append(d.reverse().concat(c)),r.eventCount-1),!1):void 0}),this.items.length,0),{remaining:u,transform:l,selection:s}}},{key:"addTransform",value:function(t,n,r,o){for(var i=[],a=this.eventCount,s=this.items,u=!o&&s.length?s.get(s.length-1):null,l=0;l<t.steps.length;l++){var c,d=t.steps[l].invert(t.docs[l]),f=new bd(t.mapping.maps[l],d,n);(c=u&&u.merge(f))&&(f=c,l?i.pop():s=s.slice(0,s.length-1)),i.push(f),n&&(a++,n=void 0),o||(u=f)}var p,h,m,v=a-r.depth;return v>wd&&(h=v,(p=s).forEach((function(e,t){if(e.selection&&0==h--)return m=t,!1})),s=p.slice(m),a-=v),new e(s.append(i),a)}},{key:"remapping",value:function(e,t){var n=new vt;return this.items.forEach((function(t,r){var o=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,o)}),e,t),n}},{key:"addMaps",value:function(t){return 0==this.eventCount?this:new e(this.items.append(t.map((function(e){return new bd(e)}))),this.eventCount)}},{key:"rebased",value:function(t,n){if(!this.eventCount)return this;var r=[],o=Math.max(0,this.items.length-n),i=t.mapping,a=t.steps.length,s=this.eventCount;this.items.forEach((function(e){e.selection&&s--}),o);var u=n;this.items.forEach((function(e){var n=i.getMirror(--u);if(null!=n){a=Math.min(a,n);var o=i.maps[n];if(e.step){var l=t.steps[n].invert(t.docs[n]),c=e.selection&&e.selection.map(i.slice(u+1,n));c&&s++,r.push(new bd(o,l,c))}else r.push(new bd(o))}}),o);for(var l=[],c=n;c<a;c++)l.push(new bd(i.maps[c]));var d=new e(this.items.slice(0,o).append(l).append(r),s);return d.emptyItemCount()>500&&(d=d.compress(this.items.length-r.length)),d}},{key:"emptyItemCount",value:function(){var e=0;return this.items.forEach((function(t){t.step||e++})),e}},{key:"compress",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items.length,n=this.remapping(0,t),r=n.maps.length,o=[],i=0;return this.items.forEach((function(e,a){if(a>=t)o.push(e),e.selection&&i++;else if(e.step){var s=e.step.map(n.slice(r)),u=s&&s.getMap();if(r--,u&&n.appendMap(u,r),s){var l=e.selection&&e.selection.map(n.slice(r));l&&i++;var c,d=new bd(u.invert(),s,l),f=o.length-1;(c=o.length&&o[f].merge(d))?o[f]=c:o.push(d)}}else e.map&&r--}),this.items.length,0),new e(fd.from(o.reverse()),i)}}])}();yd.empty=new yd(fd.empty,0);var bd=function(){function e(t,n,r,o){hd(this,e),this.map=t,this.step=n,this.selection=r,this.mirrorOffset=o}return vd(e,[{key:"merge",value:function(t){if(this.step&&t.step&&!t.selection){var n=t.step.merge(this.step);if(n)return new e(n.getMap().invert(),n,this.selection)}}}])}(),Dd=vd((function e(t,n,r,o,i){hd(this,e),this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=i})),wd=20;function Cd(e){for(var t=[],n=e.length-1;n>=0&&0==t.length;n--)e[n].forEach((function(e,n,r,o){return t.push(r,o)}));return t}function kd(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var o=t.map(e[r],1),i=t.map(e[r+1],-1);o<=i&&n.push(o,i)}return n}var Ed=!1,xd=null;function Ad(e){var t=e.plugins;if(xd!=t){Ed=!1,xd=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){Ed=!0;break}}return Ed}var Fd=new jn("history"),Sd=new jn("closeHistory");function Md(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Pn({key:Fd,state:{init:function(){return new Dd(yd.empty,yd.empty,null,0,-1)},apply:function(t,n,r){return function(e,t,n,r){var o,i=n.getMeta(Fd);if(i)return i.historyState;n.getMeta(Sd)&&(e=new Dd(e.done,e.undone,null,0,-1));var a=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(a&&a.getMeta(Fd))return a.getMeta(Fd).redo?new Dd(e.done.addTransform(n,void 0,r,Ad(t)),e.undone,Cd(n.mapping.maps),e.prevTime,e.prevComposition):new Dd(e.done,e.undone.addTransform(n,void 0,r,Ad(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||a&&!1===a.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new Dd(e.done.rebased(n,o),e.undone.rebased(n,o),kd(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Dd(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),kd(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);var s=n.getMeta("composition"),u=0==e.prevTime||!a&&e.prevComposition!=s&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach((function(e,r){for(var o=0;o<t.length;o+=2)e<=t[o+1]&&r>=t[o]&&(n=!0)})),n}(n,e.prevRanges)),l=a?kd(e.prevRanges,n.mapping):Cd(n.mapping.maps);return new Dd(e.done.addTransform(n,u?t.selection.getBookmark():void 0,r,Ad(t)),yd.empty,l,n.time,null==s?e.prevComposition:s)}(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput:function(e,t){var n=t.inputType,r="historyUndo"==n?Od:"historyRedo"==n?Td:null;return!!r&&(t.preventDefault(),r(e.state,e.dispatch))}}}})}function Bd(e,t){return function(n,r){var o=Fd.getState(n);if(!o||0==(e?o.undone:o.done).eventCount)return!1;if(r){var i=function(e,t,n){var r=Ad(t),o=Fd.get(t).spec.config,i=(n?e.undone:e.done).popEvent(t,r);if(!i)return null;var a=i.selection.resolve(i.transform.doc),s=(n?e.done:e.undone).addTransform(i.transform,t.selection.getBookmark(),o,r),u=new Dd(n?s:i.remaining,n?i.remaining:s,null,0,-1);return i.transform.setSelection(a).setMeta(Fd,{redo:n,historyState:u})}(o,n,e);i&&r(t?i.scrollIntoView():i)}return!0}}var Od=Bd(!1,!0),Td=Bd(!0,!0);Bd(!1,!1),Bd(!0,!1);var Pd=Hs.create({name:"history",addOptions:function(){return{depth:100,newGroupDelay:500}},addCommands:function(){return{undo:function(){return function(e){var t=e.state,n=e.dispatch;return Od(t,n)}},redo:function(){return function(e){var t=e.state,n=e.dispatch;return Td(t,n)}}}},addProseMirrorPlugins:function(){return[Md(this.options)]},addKeyboardShortcuts:function(){var e=this;return{"Mod-z":function(){return e.editor.commands.undo()},"Shift-Mod-z":function(){return e.editor.commands.redo()},"Mod-y":function(){return e.editor.commands.redo()},"Mod-я":function(){return e.editor.commands.undo()},"Shift-Mod-я":function(){return e.editor.commands.redo()}}}});const Nd=(e,t)=>{for(const n in t)e[n]=t[n];return e},_d="numeric",jd="ascii",Id="alpha",Rd="asciinumeric",Ld="alphanumeric",Hd="domain",Vd="emoji",zd="scheme",$d="slashscheme",Ud="whitespace";function Gd(e,t){return e in t||(t[e]=[]),t[e]}function Wd(e,t,n){t[_d]&&(t[Rd]=!0,t[Ld]=!0),t[jd]&&(t[Rd]=!0,t[Id]=!0),t[Rd]&&(t[Ld]=!0),t[Id]&&(t[Ld]=!0),t[Ld]&&(t[Hd]=!0),t[Vd]&&(t[Hd]=!0);for(const r in t){const t=Gd(r,n);t.indexOf(e)<0&&t.push(e)}}function qd(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}qd.groups={},qd.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let n=0;n<t.jr.length;n++){const r=t.jr[n][0],o=t.jr[n][1];if(o&&r.test(e))return o}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let o=0;o<e.length;o++)this.tt(e[o],t,n,r)},tr(e,t,n,r){let o;return r=r||qd.groups,t&&t.j?o=t:(o=new qd(t),n&&r&&Wd(t,n,r)),this.jr.push([e,o]),o},ts(e,t,n,r){let o=this;const i=e.length;if(!i)return o;for(let t=0;t<i-1;t++)o=o.tt(e[t]);return o.tt(e[i-1],t,n,r)},tt(e,t,n,r){r=r||qd.groups;const o=this;if(t&&t.j)return o.j[e]=t,t;const i=t;let a,s=o.go(e);if(s?(a=new qd,Nd(a.j,s.j),a.jr.push.apply(a.jr,s.jr),a.jd=s.jd,a.t=s.t):a=new qd,i){if(r)if(a.t&&"string"==typeof a.t){const e=Nd(function(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}(a.t,r),n);Wd(i,e,r)}else n&&Wd(i,n,r);a.t=i}return o.j[e]=a,a}};const Kd=(e,t,n,r,o)=>e.ta(t,n,r,o),Zd=(e,t,n,r,o)=>e.tr(t,n,r,o),Jd=(e,t,n,r,o)=>e.ts(t,n,r,o),Xd=(e,t,n,r,o)=>e.tt(t,n,r,o),Yd="WORD",Qd="UWORD",ef="ASCIINUMERICAL",tf="ALPHANUMERICAL",nf="LOCALHOST",rf="TLD",of="UTLD",af="SCHEME",sf="SLASH_SCHEME",uf="NUM",lf="WS",cf="NL",df="OPENBRACE",ff="CLOSEBRACE",pf="OPENBRACKET",hf="CLOSEBRACKET",mf="OPENPAREN",vf="CLOSEPAREN",gf="OPENANGLEBRACKET",yf="CLOSEANGLEBRACKET",bf="FULLWIDTHLEFTPAREN",Df="FULLWIDTHRIGHTPAREN",wf="LEFTCORNERBRACKET",Cf="RIGHTCORNERBRACKET",kf="LEFTWHITECORNERBRACKET",Ef="RIGHTWHITECORNERBRACKET",xf="FULLWIDTHLESSTHAN",Af="FULLWIDTHGREATERTHAN",Ff="AMPERSAND",Sf="APOSTROPHE",Mf="ASTERISK",Bf="AT",Of="BACKSLASH",Tf="BACKTICK",Pf="CARET",Nf="COLON",_f="COMMA",jf="DOLLAR",If="DOT",Rf="EQUALS",Lf="EXCLAMATION",Hf="HYPHEN",Vf="PERCENT",zf="PIPE",$f="PLUS",Uf="POUND",Gf="QUERY",Wf="QUOTE",qf="FULLWIDTHMIDDLEDOT",Kf="SEMI",Zf="SLASH",Jf="TILDE",Xf="UNDERSCORE",Yf="EMOJI",Qf="SYM";var ep=Object.freeze({__proto__:null,ALPHANUMERICAL:tf,AMPERSAND:Ff,APOSTROPHE:Sf,ASCIINUMERICAL:ef,ASTERISK:Mf,AT:Bf,BACKSLASH:Of,BACKTICK:Tf,CARET:Pf,CLOSEANGLEBRACKET:yf,CLOSEBRACE:ff,CLOSEBRACKET:hf,CLOSEPAREN:vf,COLON:Nf,COMMA:_f,DOLLAR:jf,DOT:If,EMOJI:Yf,EQUALS:Rf,EXCLAMATION:Lf,FULLWIDTHGREATERTHAN:Af,FULLWIDTHLEFTPAREN:bf,FULLWIDTHLESSTHAN:xf,FULLWIDTHMIDDLEDOT:qf,FULLWIDTHRIGHTPAREN:Df,HYPHEN:Hf,LEFTCORNERBRACKET:wf,LEFTWHITECORNERBRACKET:kf,LOCALHOST:nf,NL:cf,NUM:uf,OPENANGLEBRACKET:gf,OPENBRACE:df,OPENBRACKET:pf,OPENPAREN:mf,PERCENT:Vf,PIPE:zf,PLUS:$f,POUND:Uf,QUERY:Gf,QUOTE:Wf,RIGHTCORNERBRACKET:Cf,RIGHTWHITECORNERBRACKET:Ef,SCHEME:af,SEMI:Kf,SLASH:Zf,SLASH_SCHEME:sf,SYM:Qf,TILDE:Jf,TLD:rf,UNDERSCORE:Xf,UTLD:of,UWORD:Qd,WORD:Yd,WS:lf});const tp=/[a-z]/,np=/\p{L}/u,rp=/\p{Emoji}/u,op=/\d/,ip=/\s/;let ap=null,sp=null;function up(e,t){const n=function(e){const t=[],n=e.length;let r=0;for(;r<n;){let o,i=e.charCodeAt(r),a=i<55296||i>56319||r+1===n||(o=e.charCodeAt(r+1))<56320||o>57343?e[r]:e.slice(r,r+2);t.push(a),r+=a.length}return t}(t.replace(/[A-Z]/g,(e=>e.toLowerCase()))),r=n.length,o=[];let i=0,a=0;for(;a<r;){let s=e,u=null,l=0,c=null,d=-1,f=-1;for(;a<r&&(u=s.go(n[a]));)s=u,s.accepts()?(d=0,f=0,c=s):d>=0&&(d+=n[a].length,f++),l+=n[a].length,i+=n[a].length,a++;i-=d,a-=f,l-=d,o.push({t:c.t,v:t.slice(i-l,i),s:i-l,e:i})}return o}function lp(e,t,n,r,o){let i;const a=t.length;for(let n=0;n<a-1;n++){const a=t[n];e.j[a]?i=e.j[a]:(i=new qd(r),i.jr=o.slice(),e.j[a]=i),e=i}return i=new qd(n),i.jr=o.slice(),e.j[t[a-1]]=i,i}function cp(e){const t=[],n=[];let r=0;for(;r<e.length;){let o=0;for(;"0123456789".indexOf(e[r+o])>=0;)o++;if(o>0){t.push(n.join(""));for(let t=parseInt(e.substring(r,r+o),10);t>0;t--)n.pop();r+=o}else n.push(e[r]),r++}return t}const dp={defaultProtocol:"http",events:null,format:pp,formatHref:pp,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function fp(e,t=null){let n=Nd({},dp);e&&(n=Nd(n,e instanceof fp?e.o:e));const r=n.ignoreTags,o=[];for(let e=0;e<r.length;e++)o.push(r[e].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=o}function pp(e){return e}function hp(e,t){this.t="token",this.v=e,this.tk=t}function mp(e,t){class n extends hp{constructor(t,n){super(t,n),this.t=e}}for(const e in t)n.prototype[e]=t[e];return n.t=e,n}fp.prototype={o:dp,ignoreTags:[],defaultRender:e=>e,check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=null!=t;let o=this.o[e];return o?("object"==typeof o?(o=n.t in o?o[n.t]:dp[e],"function"==typeof o&&r&&(o=o(t,n))):"function"==typeof o&&r&&(o=o(t,n.t,n)),o):o},getObj(e,t,n){let r=this.o[e];return"function"==typeof r&&null!=t&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}},hp.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"…":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=dp.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),o=e.get("tagName",n,t),i=this.toFormattedString(e),a={},s=e.get("className",n,t),u=e.get("target",n,t),l=e.get("rel",n,t),c=e.getObj("attributes",n,t),d=e.getObj("events",n,t);return a.href=r,s&&(a.class=s),u&&(a.target=u),l&&(a.rel=l),c&&Nd(a,c),{tagName:o,attributes:a,content:i,eventListeners:d}}};const vp=mp("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),gp=mp("text"),yp=mp("nl"),bp=mp("url",{isLink:!0,toHref(e=dp.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==nf&&e[1].t===Nf}}),Dp=e=>new qd(e);function wp(e,t,n){const r=n[0].s,o=n[n.length-1].e;return new e(t.slice(r,o),n)}const Cp="undefined"!=typeof console&&console&&console.warn||(()=>{}),kp={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Ep(e,t=!1){if(kp.initialized&&Cp(`linkifyjs: already initialized - will not register custom scheme "${e}" until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error('linkifyjs: incorrect scheme format.\n1. Must only contain digits, lowercase ASCII letters or "-"\n2. Cannot start or end with "-"\n3. "-" cannot repeat');kp.customSchemes.push([e,t])}function xp(e){return kp.initialized||function(){kp.scanner=function(e=[]){const t={};qd.groups=t;const n=new qd;null==ap&&(ap=cp("aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2")),null==sp&&(sp=cp("ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2")),Xd(n,"'",Sf),Xd(n,"{",df),Xd(n,"}",ff),Xd(n,"[",pf),Xd(n,"]",hf),Xd(n,"(",mf),Xd(n,")",vf),Xd(n,"<",gf),Xd(n,">",yf),Xd(n,"（",bf),Xd(n,"）",Df),Xd(n,"「",wf),Xd(n,"」",Cf),Xd(n,"『",kf),Xd(n,"』",Ef),Xd(n,"＜",xf),Xd(n,"＞",Af),Xd(n,"&",Ff),Xd(n,"*",Mf),Xd(n,"@",Bf),Xd(n,"`",Tf),Xd(n,"^",Pf),Xd(n,":",Nf),Xd(n,",",_f),Xd(n,"$",jf),Xd(n,".",If),Xd(n,"=",Rf),Xd(n,"!",Lf),Xd(n,"-",Hf),Xd(n,"%",Vf),Xd(n,"|",zf),Xd(n,"+",$f),Xd(n,"#",Uf),Xd(n,"?",Gf),Xd(n,'"',Wf),Xd(n,"/",Zf),Xd(n,";",Kf),Xd(n,"~",Jf),Xd(n,"_",Xf),Xd(n,"\\",Of),Xd(n,"・",qf);const r=Zd(n,op,uf,{[_d]:!0});Zd(r,op,r);const o=Zd(r,tp,ef,{[Rd]:!0}),i=Zd(r,np,tf,{[Ld]:!0}),a=Zd(n,tp,Yd,{[jd]:!0});Zd(a,op,o),Zd(a,tp,a),Zd(o,op,o),Zd(o,tp,o);const s=Zd(n,np,Qd,{[Id]:!0});Zd(s,tp),Zd(s,op,i),Zd(s,np,s),Zd(i,op,i),Zd(i,tp),Zd(i,np,i);const u=Xd(n,"\n",cf,{[Ud]:!0}),l=Xd(n,"\r",lf,{[Ud]:!0}),c=Zd(n,ip,lf,{[Ud]:!0});Xd(n,"￼",c),Xd(l,"\n",u),Xd(l,"￼",c),Zd(l,ip,c),Xd(c,"\r"),Xd(c,"\n"),Zd(c,ip,c),Xd(c,"￼",c);const d=Zd(n,rp,Yf,{[Vd]:!0});Xd(d,"#"),Zd(d,rp,d),Xd(d,"️",d);const f=Xd(d,"‍");Xd(f,"#"),Zd(f,rp,d);const p=[[tp,a],[op,o]],h=[[tp,null],[np,s],[op,i]];for(let e=0;e<ap.length;e++)lp(n,ap[e],rf,Yd,p);for(let e=0;e<sp.length;e++)lp(n,sp[e],of,Qd,h);Wd(rf,{tld:!0,ascii:!0},t),Wd(of,{utld:!0,alpha:!0},t),lp(n,"file",af,Yd,p),lp(n,"mailto",af,Yd,p),lp(n,"http",sf,Yd,p),lp(n,"https",sf,Yd,p),lp(n,"ftp",sf,Yd,p),lp(n,"ftps",sf,Yd,p),Wd(af,{scheme:!0,ascii:!0},t),Wd(sf,{slashscheme:!0,ascii:!0},t),e=e.sort(((e,t)=>e[0]>t[0]?1:-1));for(let t=0;t<e.length;t++){const r=e[t][0],o=e[t][1]?{[zd]:!0}:{[$d]:!0};r.indexOf("-")>=0?o[Hd]=!0:tp.test(r)?op.test(r)?o[Rd]=!0:o[jd]=!0:o[_d]=!0,Jd(n,r,r,o)}return Jd(n,"localhost",nf,{ascii:!0}),n.jd=new qd(Qf),{start:n,tokens:Nd({groups:t},ep)}}(kp.customSchemes);for(let e=0;e<kp.tokenQueue.length;e++)kp.tokenQueue[e][1]({scanner:kp.scanner});kp.parser=function({groups:e}){const t=e.domain.concat([Ff,Mf,Bf,Of,Tf,Pf,jf,Rf,Hf,uf,Vf,zf,$f,Uf,Zf,Qf,Jf,Xf]),n=[Sf,Nf,_f,If,Lf,Vf,Gf,Wf,Kf,gf,yf,df,ff,hf,pf,mf,vf,bf,Df,wf,Cf,kf,Ef,xf,Af],r=[Ff,Sf,Mf,Of,Tf,Pf,jf,Rf,Hf,df,ff,Vf,zf,$f,Uf,Gf,Zf,Qf,Jf,Xf],o=Dp(),i=Xd(o,Jf);Kd(i,r,i),Kd(i,e.domain,i);const a=Dp(),s=Dp(),u=Dp();Kd(o,e.domain,a),Kd(o,e.scheme,s),Kd(o,e.slashscheme,u),Kd(a,r,i),Kd(a,e.domain,a);const l=Xd(a,Bf);Xd(i,Bf,l),Xd(s,Bf,l),Xd(u,Bf,l);const c=Xd(i,If);Kd(c,r,i),Kd(c,e.domain,i);const d=Dp();Kd(l,e.domain,d),Kd(d,e.domain,d);const f=Xd(d,If);Kd(f,e.domain,d);const p=Dp(vp);Kd(f,e.tld,p),Kd(f,e.utld,p),Xd(l,nf,p);const h=Xd(d,Hf);Xd(h,Hf,h),Kd(h,e.domain,d),Kd(p,e.domain,d),Xd(p,If,f),Xd(p,Hf,h);const m=Xd(p,Nf);Kd(m,e.numeric,vp);const v=Xd(a,Hf),g=Xd(a,If);Xd(v,Hf,v),Kd(v,e.domain,a),Kd(g,r,i),Kd(g,e.domain,a);const y=Dp(bp);Kd(g,e.tld,y),Kd(g,e.utld,y),Kd(y,e.domain,a),Kd(y,r,i),Xd(y,If,g),Xd(y,Hf,v),Xd(y,Bf,l);const b=Xd(y,Nf),D=Dp(bp);Kd(b,e.numeric,D);const w=Dp(bp),C=Dp();Kd(w,t,w),Kd(w,n,C),Kd(C,t,w),Kd(C,n,C),Xd(y,Zf,w),Xd(D,Zf,w);const k=Xd(s,Nf),E=Xd(u,Nf),x=Xd(E,Zf),A=Xd(x,Zf);Kd(s,e.domain,a),Xd(s,If,g),Xd(s,Hf,v),Kd(u,e.domain,a),Xd(u,If,g),Xd(u,Hf,v),Kd(k,e.domain,w),Xd(k,Zf,w),Xd(k,Gf,w),Kd(A,e.domain,w),Kd(A,t,w),Xd(A,Zf,w);const F=[[df,ff],[pf,hf],[mf,vf],[gf,yf],[bf,Df],[wf,Cf],[kf,Ef],[xf,Af]];for(let e=0;e<F.length;e++){const[r,o]=F[e],i=Xd(w,r);Xd(C,r,i),Xd(i,o,w);const a=Dp(bp);Kd(i,t,a);const s=Dp();Kd(i,n),Kd(a,t,a),Kd(a,n,s),Kd(s,t,a),Kd(s,n,s),Xd(a,o,w),Xd(s,o,w)}return Xd(o,nf,y),Xd(o,cf,yp),{start:o,tokens:ep}}(kp.scanner.tokens);for(let e=0;e<kp.pluginQueue.length;e++)kp.pluginQueue[e][1]({scanner:kp.scanner,parser:kp.parser});kp.initialized=!0}(),function(e,t,n){let r=n.length,o=0,i=[],a=[];for(;o<r;){let s=e,u=null,l=null,c=0,d=null,f=-1;for(;o<r&&!(u=s.go(n[o].t));)a.push(n[o++]);for(;o<r&&(l=u||s.go(n[o].t));)u=null,s=l,s.accepts()?(f=0,d=s):f>=0&&f++,o++,c++;if(f<0)o-=c,o<r&&(a.push(n[o]),o++);else{a.length>0&&(i.push(wp(gp,t,a)),a=[]),o-=f,c-=f;const e=d.t,r=n.slice(o-c,o);i.push(wp(e,t,r))}}return a.length>0&&i.push(wp(gp,t,a)),i}(kp.parser.start,e,up(kp.scanner.start,e))}function Ap(e,t=null,n=null){if(t&&"object"==typeof t){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new fp(n),o=xp(e),i=[];for(let e=0;e<o.length;e++){const n=o[e];!n.isLink||t&&n.t!==t||!r.check(n)||i.push(n.toFormattedObject(r))}return i}function Fp(e){return Fp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fp(e)}function Sp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sp(Object(n),!0).forEach((function(t){Bp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bp(e,t,n){return(t=function(e){var t=function(e){if("object"!=Fp(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Fp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Fp(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Op(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}xp.scan=up;var Tp=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function Pp(e,t){var n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach((function(e){var t="string"==typeof e?e:e.scheme;t&&n.push(t)})),!e||e.replace(Tp,"").match(new RegExp("^(?:(?:".concat(n.join("|"),"):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))"),"i"))}var Np=_s.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate:function(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach((function(e){"string"!=typeof e?Ep(e.scheme,e.optionalSlashes):Ep(e)}))},onDestroy:function(){qd.groups={},kp.scanner=null,kp.parser=null,kp.tokenQueue=[],kp.pluginQueue=[],kp.customSchemes=[],kp.initialized=!1},inclusive:function(){return this.options.autolink},addOptions:function(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:function(e,t){return!!Pp(e,t.protocols)},validate:function(e){return!!e},shouldAutoLink:function(e){return!!e}}},addAttributes:function(){return{href:{default:null,parseHTML:function(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML:function(){var e=this;return[{tag:"a[href]",getAttrs:function(t){var n=t.getAttribute("href");return!(!n||!e.options.isAllowedUri(n,{defaultValidate:function(t){return!!Pp(t,e.options.protocols)},protocols:e.options.protocols,defaultProtocol:e.options.defaultProtocol}))&&null}}]},renderHTML:function(e){var t=this,n=e.HTMLAttributes;return this.options.isAllowedUri(n.href,{defaultValidate:function(e){return!!Pp(e,t.options.protocols)},protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",bs(this.options.HTMLAttributes,n),0]:["a",bs(this.options.HTMLAttributes,Mp(Mp({},n),{},{href:""})),0]},addCommands:function(){var e=this;return{setLink:function(t){return function(n){var r=n.chain,o=t.href;return!!e.options.isAllowedUri(o,{defaultValidate:function(t){return!!Pp(t,e.options.protocols)},protocols:e.options.protocols,defaultProtocol:e.options.defaultProtocol})&&r().setMark(e.name,t).setMeta("preventAutolink",!0).run()}},toggleLink:function(t){return function(n){var r=n.chain,o=t.href;return!!e.options.isAllowedUri(o,{defaultValidate:function(t){return!!Pp(t,e.options.protocols)},protocols:e.options.protocols,defaultProtocol:e.options.defaultProtocol})&&r().toggleMark(e.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},unsetLink:function(){return function(t){return(0,t.chain)().unsetMark(e.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}}}},addPasteRules:function(){var e=this;return[Vu({find:function(t){var n=[];if(t){var r=e.options,o=r.protocols,i=r.defaultProtocol,a=Ap(t).filter((function(t){return t.isLink&&e.options.isAllowedUri(t.value,{defaultValidate:function(e){return!!Pp(e,o)},protocols:o,defaultProtocol:i})}));a.length&&a.forEach((function(e){return n.push({text:e.value,data:{href:e.href},index:e.start})}))}return n},type:this.type,getAttributes:function(e){var t;return{href:null===(t=e.data)||void 0===t?void 0:t.href}}})]},addProseMirrorPlugins:function(){var e=this,t=[],n=this.options,r=n.protocols,o=n.defaultProtocol;return this.options.autolink&&t.push(function(e){return new Pn({key:new jn("autolink"),appendTransaction:function(t,n,r){var o=t.some((function(e){return e.docChanged}))&&!n.doc.eq(r.doc),i=t.some((function(e){return e.getMeta("preventAutolink")}));if(o&&!i){var a=r.tr;if(mu(cu(n.doc,function(e){return function(e){if(Array.isArray(e))return Op(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Op(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Op(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t))).forEach((function(t){var n,o,i,s=t.newRange,u=fu(r.doc,s,(function(e){return e.isTextblock}));if(u.length>1?(n=u[0],o=r.doc.textBetween(n.pos,n.pos+n.node.nodeSize,void 0," ")):u.length&&r.doc.textBetween(s.from,s.to," "," ").endsWith(" ")&&(n=u[0],o=r.doc.textBetween(n.pos,s.to,void 0," ")),n&&o){var l=o.split(" ").filter((function(e){return""!==e}));if(l.length<=0)return!1;var c=l[l.length-1],d=n.pos+o.lastIndexOf(c);if(!c)return!1;var f=xp(c).map((function(t){return t.toObject(e.defaultProtocol)}));if(!(1===(i=f).length?i[0].isLink:3===i.length&&i[1].isLink&&["()","[]"].includes(i[0].value+i[2].value)))return!1;f.filter((function(e){return e.isLink})).map((function(e){return Mp(Mp({},e),{},{from:d+e.start+1,to:d+e.end+1})})).filter((function(e){return!r.schema.marks.code||!r.doc.rangeHasMark(e.from,e.to,r.schema.marks.code)})).filter((function(t){return e.validate(t.value)})).filter((function(t){return e.shouldAutoLink(t.value)})).forEach((function(t){vu(t.from,t.to,r.doc).some((function(t){return t.mark.type===e.type}))||a.addMark(t.from,t.to,e.type.create({href:t.href}))}))}})),a.steps.length)return a}}})}({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:function(t){return e.options.isAllowedUri(t,{defaultValidate:function(e){return!!Pp(e,r)},protocols:r,defaultProtocol:o})},shouldAutoLink:this.options.shouldAutoLink})),!0===this.options.openOnClick&&t.push(function(e){return new Pn({key:new jn("handleClickLink"),props:{handleClick:function(t,n,r){var o,i;if(0!==r.button)return!1;if(!t.editable)return!1;for(var a=r.target,s=[];"DIV"!==a.nodeName;)s.push(a),a=a.parentNode;if(!s.find((function(e){return"A"===e.nodeName})))return!1;var u=hu(t.state,e.type.name),l=r.target,c=null!==(o=null==l?void 0:l.href)&&void 0!==o?o:u.href,d=null!==(i=null==l?void 0:l.target)&&void 0!==i?i:u.target;return!(!l||!c||(window.open(c,d),0))}}})}({type:this.type})),this.options.linkOnPaste&&t.push(function(e){return new Pn({key:new jn("handlePasteLink"),props:{handlePaste:function(t,n,r){if(t.state.selection.empty)return!1;var o="";r.content.forEach((function(e){o+=e.textContent}));var i=Ap(o,{defaultProtocol:e.defaultProtocol}).find((function(e){return e.isLink&&e.value===o}));return!(!o||!i)&&e.editor.commands.setMark(e.type,{href:i.href})}}})}({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),_p=Lu.create({name:"text",group:"inline"});function jp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||Rp(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ip(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Rp(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Rp(e,t){if(e){if("string"==typeof e)return Lp(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lp(e,t):void 0}}function Lp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Hp=function(){return new Map},Vp=function(e){var t=Hp();return e.forEach((function(e,n){t.set(n,e)})),t},zp=function(e,t,n){var r=e.get(t);return void 0===r&&e.set(t,r=n()),r},$p=function(){return new Set},Up=function(e){return e[e.length-1]},Gp=function(e,t){for(var n=0;n<t.length;n++)e.push(t[n])},Wp=Array.from,qp=Array.isArray;function Kp(e){return Kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kp(e)}function Zp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Jp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xp(r.key),r)}}function Xp(e){var t=function(e){if("object"!=Kp(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Kp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Kp(t)?t:t+""}var Yp=function(){return function(e,t,n){return t&&Jp(e.prototype,t),n&&Jp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._observers=Hp()}),[{key:"on",value:function(e,t){return zp(this._observers,e,$p).add(t),t}},{key:"once",value:function(e,t){var n=this,r=function(){n.off(e,r),t.apply(void 0,arguments)};this.on(e,r)}},{key:"off",value:function(e,t){var n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}},{key:"emit",value:function(e,t){return Wp((this._observers.get(e)||Hp()).values()).forEach((function(e){return e.apply(void 0,function(e){return function(e){if(Array.isArray(e))return Zp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Zp(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zp(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t))}))}},{key:"destroy",value:function(){this._observers=Hp()}}])}(),Qp=Math.floor,eh=(Math.ceil,Math.abs),th=(Math.imul,Math.round,Math.log10,Math.log2,Math.log,Math.sqrt,function(e,t){return e<t?e:t}),nh=function(e,t){return e>t?e:t},rh=(Number.isNaN,Math.pow,Math.sign,function(e){return 0!==e?e<0:1/e<0}),oh=64,ih=128,ah=127,sh=Number.MAX_SAFE_INTEGER,uh=(Number.MIN_SAFE_INTEGER,Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Qp(e)===e}),lh=(Number.isNaN,Number.parseInt,String.fromCharCode),ch=(String.fromCodePoint,lh(65535),/^\s*/g),dh=/([A-Z])/g,fh=function(e,t){return function(e){return e.replace(ch,"")}(e.replace(dh,(function(e){return"".concat(t).concat(function(e){return e.toLowerCase()}(e))})))},ph="undefined"!=typeof TextEncoder?new TextEncoder:null,hh=ph?function(e){return ph.encode(e)}:function(e){for(var t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=t.codePointAt(o);return r},mh="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});function vh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vh=function(){return!!e})()}function gh(e){return gh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gh(e)}function yh(e,t){return yh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yh(e,t)}function bh(e){return bh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bh(e)}function Dh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ch(r.key),r)}}function wh(e,t,n){return t&&Dh(e.prototype,t),n&&Dh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ch(e){var t=function(e){if("object"!=bh(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=bh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==bh(t)?t:t+""}function kh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}mh&&1===mh.decode(new Uint8Array).length&&(mh=null);var Eh=wh((function e(){kh(this,e),this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]})),xh=function(){return new Eh},Ah=function(e){for(var t=new Uint8Array(function(e){for(var t=e.cpos,n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t}(e)),n=0,r=0;r<e.bufs.length;r++){var o=e.bufs[r];t.set(o,n),n+=o.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},Fh=function(e,t){var n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},Sh=Fh,Mh=function(e,t){for(;t>ah;)Fh(e,ih|ah&t),t=Qp(t/128);Fh(e,ah&t)},Bh=function(e,t){var n=rh(t);for(n&&(t=-t),Fh(e,(t>63?ih:0)|(n?oh:0)|63&t),t=Qp(t/64);t>0;)Fh(e,(t>ah?ih:0)|ah&t),t=Qp(t/128)},Oh=new Uint8Array(3e4),Th=Oh.length/3,Ph=ph&&ph.encodeInto?function(e,t){if(t.length<Th){var n=ph.encodeInto(t,Oh).written||0;Mh(e,n);for(var r=0;r<n;r++)Fh(e,Oh[r])}else _h(e,hh(t))}:function(e,t){var n=unescape(encodeURIComponent(t)),r=n.length;Mh(e,r);for(var o=0;o<r;o++)Fh(e,n.codePointAt(o))},Nh=function(e,t){var n=e.cbuf.length,r=e.cpos,o=th(n-r,t.length),i=t.length-o;e.cbuf.set(t.subarray(0,o),r),e.cpos+=o,i>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(nh(2*n,i)),e.cbuf.set(t.subarray(o)),e.cpos=i)},_h=function(e,t){Mh(e,t.byteLength),Nh(e,t)},jh=function(e,t){!function(e,t){var n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*nh(n,t)),e.cpos=0)}(e,t);var n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},Ih=new DataView(new ArrayBuffer(4)),Rh=function(e,t){switch(bh(t)){case"string":Fh(e,119),Ph(e,t);break;case"number":uh(t)&&eh(t)<=2147483647?(Fh(e,125),Bh(e,t)):(a=t,Ih.setFloat32(0,a),Ih.getFloat32(0)===a?(Fh(e,124),function(e,t){jh(e,4).setFloat32(0,t,!1)}(e,t)):(Fh(e,123),function(e,t){jh(e,8).setFloat64(0,t,!1)}(e,t)));break;case"bigint":Fh(e,122),function(e,t){jh(e,8).setBigInt64(0,t,!1)}(e,t);break;case"object":if(null===t)Fh(e,126);else if(qp(t)){Fh(e,117),Mh(e,t.length);for(var n=0;n<t.length;n++)Rh(e,t[n])}else if(t instanceof Uint8Array)Fh(e,116),_h(e,t);else{Fh(e,118);var r=Object.keys(t);Mh(e,r.length);for(var o=0;o<r.length;o++){var i=r[o];Ph(e,i),Rh(e,t[i])}}break;case"boolean":Fh(e,t?120:121);break;default:Fh(e,127)}var a},Lh=function(e){function t(e){var n;return kh(this,t),(n=function(e,t,n){return t=gh(t),function(e,t){if(t&&("object"==bh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,vh()?Reflect.construct(t,n||[],gh(e).constructor):t.apply(e,n))}(this,t)).w=e,n.s=null,n.count=0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yh(e,t)}(t,e),wh(t,[{key:"write",value:function(e){this.s===e?this.count++:(this.count>0&&Mh(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}])}(Eh),Hh=function(e){e.count>0&&(Bh(e.encoder,1===e.count?e.s:-e.s),e.count>1&&Mh(e.encoder,e.count-2))},Vh=function(){return wh((function e(){kh(this,e),this.encoder=new Eh,this.s=0,this.count=0}),[{key:"write",value:function(e){this.s===e?this.count++:(Hh(this),this.count=1,this.s=e)}},{key:"toUint8Array",value:function(){return Hh(this),Ah(this.encoder)}}])}(),zh=function(e){if(e.count>0){var t=2*e.diff+(1===e.count?0:1);Bh(e.encoder,t),e.count>1&&Mh(e.encoder,e.count-2)}},$h=function(){return wh((function e(){kh(this,e),this.encoder=new Eh,this.s=0,this.count=0,this.diff=0}),[{key:"write",value:function(e){this.diff===e-this.s?(this.s=e,this.count++):(zh(this),this.count=1,this.diff=e-this.s,this.s=e)}},{key:"toUint8Array",value:function(){return zh(this),Ah(this.encoder)}}])}(),Uh=function(){return wh((function e(){kh(this,e),this.sarr=[],this.s="",this.lensE=new Vh}),[{key:"write",value:function(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}},{key:"toUint8Array",value:function(){var e=new Eh;return this.sarr.push(this.s),this.s="",Ph(e,this.sarr.join("")),Nh(e,this.lensE.toUint8Array()),Ah(e)}}])}(),Gh=function(e){return new Error(e)},Wh=function(){throw Gh("Method unimplemented")},qh=function(){throw Gh("Unexpected case")};function Kh(e){return Kh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kh(e)}function Zh(e,t,n){return t=Xh(t),function(e,t){if(t&&("object"==Kh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Jh()?Reflect.construct(t,n||[],Xh(e).constructor):t.apply(e,n))}function Jh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jh=function(){return!!e})()}function Xh(e){return Xh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xh(e)}function Yh(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qh(e,t)}function Qh(e,t){return Qh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qh(e,t)}function em(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nm(r.key),r)}}function tm(e,t,n){return t&&em(e.prototype,t),n&&em(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function nm(e){var t=function(e){if("object"!=Kh(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Kh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Kh(t)?t:t+""}function rm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var om=Gh("Unexpected end of array"),im=Gh("Integer out of Range"),am=tm((function e(t){rm(this,e),this.arr=t,this.pos=0})),sm=function(e){return new am(e)},um=function(e){return function(e,t){var n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n}(e,cm(e))},lm=function(e){return e.arr[e.pos++]},cm=function(e){for(var t=0,n=1,r=e.arr.length;e.pos<r;){var o=e.arr[e.pos++];if(t+=(o&ah)*n,n*=128,o<ih)return t;if(t>sh)throw im}throw om},dm=function(e){var t=e.arr[e.pos++],n=63&t,r=64,o=(t&oh)>0?-1:1;if(!(t&ih))return o*n;for(var i=e.arr.length;e.pos<i;){if(n+=((t=e.arr[e.pos++])&ah)*r,r*=128,t<ih)return o*n;if(n>sh)throw im}throw om},fm=mh?function(e){return mh.decode(um(e))}:function(e){var t=cm(e);if(0===t)return"";var n=String.fromCodePoint(lm(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(lm(e));else for(;t>0;){var r=t<1e4?t:1e4,o=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,o),t-=r}return decodeURIComponent(escape(n))},pm=function(e,t){var n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},hm=[function(e){},function(e){return null},dm,function(e){return pm(e,4).getFloat32(0,!1)},function(e){return pm(e,8).getFloat64(0,!1)},function(e){return pm(e,8).getBigInt64(0,!1)},function(e){return!1},function(e){return!0},fm,function(e){for(var t=cm(e),n={},r=0;r<t;r++)n[fm(e)]=mm(e);return n},function(e){for(var t=cm(e),n=[],r=0;r<t;r++)n.push(mm(e));return n},um],mm=function(e){return hm[127-lm(e)](e)},vm=function(e){function t(e,n){var r;return rm(this,t),(r=Zh(this,t,[e])).reader=n,r.s=null,r.count=0,r}return Yh(t,e),tm(t,[{key:"read",value:function(){return 0===this.count&&(this.s=this.reader(this),(e=this).pos!==e.arr.length?this.count=cm(this)+1:this.count=-1),this.count--,this.s;var e}}])}(am),gm=function(e){function t(e){var n;return rm(this,t),(n=Zh(this,t,[e])).s=0,n.count=0,n}return Yh(t,e),tm(t,[{key:"read",value:function(){if(0===this.count){this.s=dm(this);var e=rh(this.s);this.count=1,e&&(this.s=-this.s,this.count=cm(this)+2)}return this.count--,this.s}}])}(am),ym=function(e){function t(e){var n;return rm(this,t),(n=Zh(this,t,[e])).s=0,n.count=0,n.diff=0,n}return Yh(t,e),tm(t,[{key:"read",value:function(){if(0===this.count){var e=dm(this),t=1&e;this.diff=Qp(e/2),this.count=1,t&&(this.count=cm(this)+2)}return this.s+=this.diff,this.count--,this.s}}])}(am),bm=function(){return tm((function e(t){rm(this,e),this.decoder=new gm(t),this.str=fm(this.decoder),this.spos=0}),[{key:"read",value:function(){var e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}])}(),Dm=(crypto.subtle,crypto.getRandomValues.bind(crypto)),wm=Math.random,Cm=function(){return Dm(new Uint32Array(1))[0]},km=[1e7]+-1e3+-4e3+-8e3+-1e11,Em=function(){return km.replace(/[018]/g,(function(e){return(e^Cm()&15>>e/4).toString(16)}))},xm=function(e){return new Promise(e)},Am=(Promise.all.bind(Promise),function(e){return void 0===e?null:e});function Fm(e){return Fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fm(e)}function Sm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mm(r.key),r)}}function Mm(e){var t=function(e){if("object"!=Fm(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Fm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Fm(t)?t:t+""}var Bm=function(){return function(e,t){return t&&Sm(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=new Map}),[{key:"setItem",value:function(e,t){this.map.set(e,t)}},{key:"getItem",value:function(e){return this.map.get(e)}}])}(),Om=new Bm;try{"undefined"!=typeof localStorage&&localStorage&&(Om=localStorage)}catch(e){}var Tm=Om;function Pm(e){return function(e){if(Array.isArray(e))return Nm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Nm(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nm(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var _m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{for(;n<e.length;n++)e[n].apply(e,Pm(t))}finally{n<e.length&&_m(e,t,n+1)}},jm=function(e){return e};function Im(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Rm(e){return Rm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rm(e)}var Lm,Hm,Vm="undefined"!=typeof process&&process.release&&/node|io\.js/.test(process.release.name)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0),zm="undefined"!=typeof window&&"undefined"!=typeof document&&!Vm,$m=("undefined"!=typeof navigator&&/Mac/.test(navigator.platform),[]),Um=function(){if(void 0===Lm)if(Vm){Lm=Hp();for(var e=process.argv,t=null,n=0;n<e.length;n++){var r=e[n];"-"===r[0]?(null!==t&&Lm.set(t,""),t=r):null!==t?(Lm.set(t,r),t=null):$m.push(r)}null!==t&&Lm.set(t,"")}else"object"===("undefined"==typeof location?"undefined":Rm(location))?(Lm=Hp(),(location.search||"?").slice(1).split("&").forEach((function(e){if(0!==e.length){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Im(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Im(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.split("="),2),n=t[0],r=t[1];Lm.set("--".concat(fh(n,"-")),r),Lm.set("-".concat(fh(n,"-")),r)}}))):Lm=Hp();return Lm},Gm=function(e){return Um().has(e)},Wm=function(e){return Am(Vm?process.env[e.toUpperCase().replaceAll("-","_")]:Tm.getItem(e))},qm=function(e){return Gm("--"+e)||null!==Wm(e)},Km=(qm("production"),Vm&&(Hm=process.env.FORCE_COLOR,["true","1","2"].includes(Hm)))||!Gm("--no-colors")&&!qm("no-color")&&(!Vm||process.stdout.isTTY)&&(!Vm||Gm("--color")||null!==Wm("COLORTERM")||(Wm("TERM")||"").includes("color")),Zm=zm?function(e){for(var t="",n=0;n<e.byteLength;n++)t+=lh(e[n]);return btoa(t)}:function(e){return Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64")},Jm=function(e){return function(t){Rh(t,e)}(t=xh()),Ah(t);var t};function Xm(e){return Xm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xm(e)}function Ym(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ev(r.key),r)}}function Qm(e,t,n){return t&&Ym(e.prototype,t),n&&Ym(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ev(e){var t=function(e){if("object"!=Xm(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Xm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Xm(t)?t:t+""}var tv=Qm((function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.left=t,this.right=n})),nv=function(e,t){return new tv(e,t)},rv="undefined"!=typeof document?document:{},ov=("undefined"!=typeof DOMParser&&new DOMParser,function(e){return function(e,t){var n,r=[],o=Ip(e);try{for(o.s();!(n=o.n()).done;){var i=jp(n.value,2),a=i[0],s=i[1];r.push(t(s,a))}}catch(e){o.e(e)}finally{o.f()}return r}(e,(function(e,t){return"".concat(t,":").concat(e,";")})).join("")});rv.ELEMENT_NODE,rv.TEXT_NODE,rv.CDATA_SECTION_NODE,rv.COMMENT_NODE,rv.DOCUMENT_NODE,rv.DOCUMENT_TYPE_NODE,rv.DOCUMENT_FRAGMENT_NODE;var iv=Symbol,av=Date.now,sv=iv(),uv=iv(),lv=iv(),cv=iv(),dv=iv(),fv=iv(),pv=iv(),hv=iv(),mv=iv();function vv(e){return vv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vv(e)}function gv(e){return function(e){if(Array.isArray(e))return yv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return yv(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yv(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function bv(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=vv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vv(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}av();var Dv=bv(bv(bv(bv(bv(bv(bv(bv(bv({},sv,nv("font-weight","bold")),uv,nv("font-weight","normal")),lv,nv("color","blue")),dv,nv("color","green")),cv,nv("color","grey")),fv,nv("color","red")),pv,nv("color","purple")),hv,nv("color","orange")),mv,nv("color","black")),wv=Km?function(e){var t;1===e.length&&(null===(t=e[0])||void 0===t?void 0:t.constructor)===Function&&(e=e[0]());for(var n=[],r=[],o=Hp(),i=[],a=0;a<e.length;a++){var s=e[a],u=Dv[s];if(void 0!==u)o.set(u.left,u.right);else{if(void 0===s)break;if(s.constructor!==String&&s.constructor!==Number)break;var l=ov(o);a>0||l.length>0?(n.push("%c"+s),r.push(l)):n.push(s)}}for(a>0&&(i=r).unshift(n.join(""));a<e.length;a++){var c=e[a];c instanceof Symbol||i.push(c)}return i}:function(e){var t;1===e.length&&(null===(t=e[0])||void 0===t?void 0:t.constructor)===Function&&(e=e[0]());for(var n=[],r=[],o=0;o<e.length;o++){var i=e[o];if(void 0===i)break;if(i.constructor===String||i.constructor===Number)n.push(i);else if(i.constructor===Object)break}for(o>0&&r.push(n.join(""));o<e.length;o++){var a=e[o];a instanceof Symbol||r.push(a)}return r},Cv=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).warn.apply(e,gv(wv(n))),n.unshift(hv),kv.forEach((function(e){return e.print(n)}))},kv=$p();function Ev(e){return Ev="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ev(e)}function xv(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ev(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ev(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ev(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Av=function(e){return xv(xv({},Symbol.iterator,(function(){return this})),"next",e)},Fv=function(e,t){return Av((function(){var n=e.next(),r=n.done,o=n.value;return{done:r,value:r?void 0:t(o)}}))};function Sv(e){return Sv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sv(e)}var Mv=Object.assign,Bv=Object.keys,Ov=function(e){return Bv(e).length},Tv=function(e,t){for(var n in e)if(!t(e[n],n))return!1;return!0},Pv=Object.freeze,Nv=function(e){for(var t in e){var n=e[t];"object"!==Sv(n)&&"function"!=typeof n||Nv(e[t])}return Pv(e)};class _v{constructor(e,t){this.clock=e,this.len=t}}class jv{constructor(){this.clients=new Map}}const Iv=(e,t,n)=>t.clients.forEach(((t,r)=>{const o=e.doc.store.clients.get(r);if(null!=o){const r=o[o.length-1],i=r.id.clock+r.length;for(let r=0,a=t[r];r<t.length&&a.clock<i;a=t[++r])Rg(e,o,a.clock,a.len,n)}})),Rv=(e,t)=>{const n=e.clients.get(t.client);return void 0!==n&&null!==((e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const o=Qp((n+r)/2),i=e[o],a=i.clock;if(a<=t){if(t<a+i.len)return o;n=o+1}else r=o-1}return null})(n,t.clock)},Lv=e=>{e.clients.forEach((e=>{let t,n;for(e.sort(((e,t)=>e.clock-t.clock)),t=1,n=1;t<e.length;t++){const r=e[n-1],o=e[t];r.clock+r.len>=o.clock?r.len=nh(r.len,o.clock+o.len-r.clock):(n<t&&(e[n]=o),n++)}e.length=n}))},Hv=e=>{const t=new jv;for(let n=0;n<e.length;n++)e[n].clients.forEach(((r,o)=>{if(!t.clients.has(o)){const i=r.slice();for(let t=n+1;t<e.length;t++)Gp(i,e[t].clients.get(o)||[]);t.clients.set(o,i)}}));return Lv(t),t},Vv=(e,t,n,r)=>{zp(e.clients,t,(()=>[])).push(new _v(n,r))},zv=()=>new jv,$v=e=>{const t=zv();return e.clients.forEach(((e,n)=>{const r=[];for(let t=0;t<e.length;t++){const n=e[t];if(n.deleted){const o=n.id.clock;let i=n.length;if(t+1<e.length)for(let n=e[t+1];t+1<e.length&&n.deleted;n=e[1+ ++t])i+=n.length;r.push(new _v(o,i))}}r.length>0&&t.clients.set(n,r)})),t},Uv=(e,t)=>{Mh(e.restEncoder,t.clients.size),Wp(t.clients.entries()).sort(((e,t)=>t[0]-e[0])).forEach((([t,n])=>{e.resetDsCurVal(),Mh(e.restEncoder,t);const r=n.length;Mh(e.restEncoder,r);for(let t=0;t<r;t++){const r=n[t];e.writeDsClock(r.clock),e.writeDsLen(r.len)}}))},Gv=e=>{const t=new jv,n=cm(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();const n=cm(e.restDecoder),r=cm(e.restDecoder);if(r>0){const o=zp(t.clients,n,(()=>[]));for(let t=0;t<r;t++)o.push(new _v(e.readDsClock(),e.readDsLen()))}}return t},Wv=(e,t,n)=>{const r=new jv,o=cm(e.restDecoder);for(let i=0;i<o;i++){e.resetDsCurVal();const o=cm(e.restDecoder),i=cm(e.restDecoder),a=n.clients.get(o)||[],s=Og(n,o);for(let n=0;n<i;n++){const n=e.readDsClock(),i=n+e.readDsLen();if(n<s){s<i&&Vv(r,o,s,i-s);let e=Pg(a,n),u=a[e];for(!u.deleted&&u.id.clock<n&&(a.splice(e+1,0,Sb(t,u,n-u.id.clock)),e++);e<a.length&&(u=a[e++],u.id.clock<i);)u.deleted||(i<u.id.clock+u.length&&a.splice(e,0,Sb(t,u,i-u.id.clock)),u.delete(t))}else Vv(r,o,n,i-n)}}if(r.clients.size>0){const e=new ng;return Mh(e.restEncoder,0),Uv(e,r),e.toUint8Array()}return null},qv=Cm;class Kv extends Yp{constructor({guid:e=Em(),collectionid:t=null,gc:n=!0,gcFilter:r=()=>!0,meta:o=null,autoLoad:i=!1,shouldLoad:a=!0}={}){super(),this.gc=n,this.gcFilter=r,this.clientID=qv(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new Mg,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=i,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=xm((e=>{this.on("load",(()=>{this.isLoaded=!0,e(this)}))}));const s=()=>xm((e=>{const t=n=>{void 0!==n&&!0!==n||(this.off("sync",t),e())};this.on("sync",t)}));this.on("sync",(e=>{!1===e&&this.isSynced&&(this.whenSynced=s()),this.isSynced=void 0===e||!0===e,this.isSynced&&!this.isLoaded&&this.emit("load",[this])})),this.whenSynced=s()}load(){const e=this._item;null===e||this.shouldLoad||Ug(e.parent.doc,(e=>{e.subdocsLoaded.add(this)}),null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Wp(this.subdocs).map((e=>e.guid)))}transact(e,t=null){return Ug(this,e,t)}get(e,t=my){const n=zp(this.share,e,(()=>{const e=new t;return e._integrate(this,null),e})),r=n.constructor;if(t!==my&&r!==t){if(r===my){const r=new t;r._map=n._map,n._map.forEach((e=>{for(;null!==e;e=e.left)e.parent=r})),r._start=n._start;for(let e=r._start;null!==e;e=e.right)e.parent=r;return r._length=n._length,this.share.set(e,r),r._integrate(this,null),r}throw new Error(`Type with the name ${e} has already been defined with a different constructor`)}return n}getArray(e=""){return this.get(e,Ny)}getText(e=""){return this.get(e,Yy)}getMap(e=""){return this.get(e,jy)}getXmlElement(e=""){return this.get(e,tb)}getXmlFragment(e=""){return this.get(e,eb)}toJSON(){const e={};return this.share.forEach(((t,n)=>{e[n]=t.toJSON()})),e}destroy(){this.isDestroyed=!0,Wp(this.subdocs).forEach((e=>e.destroy()));const e=this._item;if(null!==e){this._item=null;const t=e.content;t.doc=new Kv({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,Ug(e.parent.doc,(n=>{const r=t.doc;e.deleted||n.subdocsAdded.add(r),n.subdocsRemoved.add(this)}),null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class Zv{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return cm(this.restDecoder)}readDsLen(){return cm(this.restDecoder)}}class Jv extends Zv{readLeftID(){return mg(cm(this.restDecoder),cm(this.restDecoder))}readRightID(){return mg(cm(this.restDecoder),cm(this.restDecoder))}readClient(){return cm(this.restDecoder)}readInfo(){return lm(this.restDecoder)}readString(){return fm(this.restDecoder)}readParentInfo(){return 1===cm(this.restDecoder)}readTypeRef(){return cm(this.restDecoder)}readLen(){return cm(this.restDecoder)}readAny(){return mm(this.restDecoder)}readBuf(){return t=um(this.restDecoder),(e=t.byteLength,n=new Uint8Array(e)).set(t),n;var e,t,n}readJSON(){return JSON.parse(fm(this.restDecoder))}readKey(){return fm(this.restDecoder)}}class Xv{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=cm(this.restDecoder),this.dsCurrVal}readDsLen(){const e=cm(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class Yv extends Xv{constructor(e){super(e),this.keys=[],cm(e),this.keyClockDecoder=new ym(um(e)),this.clientDecoder=new gm(um(e)),this.leftClockDecoder=new ym(um(e)),this.rightClockDecoder=new ym(um(e)),this.infoDecoder=new vm(um(e),lm),this.stringDecoder=new bm(um(e)),this.parentInfoDecoder=new vm(um(e),lm),this.typeRefDecoder=new gm(um(e)),this.lenDecoder=new gm(um(e))}readLeftID(){return new pg(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new pg(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return mm(this.restDecoder)}readBuf(){return um(this.restDecoder)}readJSON(){return mm(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const e=this.stringDecoder.read();return this.keys.push(e),e}}}class Qv{constructor(){this.restEncoder=xh()}toUint8Array(){return Ah(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Mh(this.restEncoder,e)}writeDsLen(e){Mh(this.restEncoder,e)}}class eg extends Qv{writeLeftID(e){Mh(this.restEncoder,e.client),Mh(this.restEncoder,e.clock)}writeRightID(e){Mh(this.restEncoder,e.client),Mh(this.restEncoder,e.clock)}writeClient(e){Mh(this.restEncoder,e)}writeInfo(e){Sh(this.restEncoder,e)}writeString(e){Ph(this.restEncoder,e)}writeParentInfo(e){Mh(this.restEncoder,e?1:0)}writeTypeRef(e){Mh(this.restEncoder,e)}writeLen(e){Mh(this.restEncoder,e)}writeAny(e){Rh(this.restEncoder,e)}writeBuf(e){_h(this.restEncoder,e)}writeJSON(e){Ph(this.restEncoder,JSON.stringify(e))}writeKey(e){Ph(this.restEncoder,e)}}class tg{constructor(){this.restEncoder=xh(),this.dsCurrVal=0}toUint8Array(){return Ah(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,Mh(this.restEncoder,t)}writeDsLen(e){0===e&&qh(),Mh(this.restEncoder,e-1),this.dsCurrVal+=e}}class ng extends tg{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new $h,this.clientEncoder=new Vh,this.leftClockEncoder=new $h,this.rightClockEncoder=new $h,this.infoEncoder=new Lh(Sh),this.stringEncoder=new Uh,this.parentInfoEncoder=new Lh(Sh),this.typeRefEncoder=new Vh,this.lenEncoder=new Vh}toUint8Array(){const e=xh();return Mh(e,0),_h(e,this.keyClockEncoder.toUint8Array()),_h(e,this.clientEncoder.toUint8Array()),_h(e,this.leftClockEncoder.toUint8Array()),_h(e,this.rightClockEncoder.toUint8Array()),_h(e,Ah(this.infoEncoder)),_h(e,this.stringEncoder.toUint8Array()),_h(e,Ah(this.parentInfoEncoder)),_h(e,this.typeRefEncoder.toUint8Array()),_h(e,this.lenEncoder.toUint8Array()),Nh(e,Ah(this.restEncoder)),Ah(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Rh(this.restEncoder,e)}writeBuf(e){_h(this.restEncoder,e)}writeJSON(e){Rh(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}const rg=(e,t,n)=>{const r=new Map;n.forEach(((e,n)=>{Og(t,n)>e&&r.set(n,e)})),Bg(t).forEach(((e,t)=>{n.has(t)||r.set(t,0)})),Mh(e.restEncoder,r.size),Wp(r.entries()).sort(((e,t)=>t[0]-e[0])).forEach((([n,r])=>{((e,t,n,r)=>{r=nh(r,t[0].id.clock);const o=Pg(t,r);Mh(e.restEncoder,t.length-o),e.writeClient(n),Mh(e.restEncoder,r);const i=t[o];i.write(e,r-i.id.clock);for(let n=o+1;n<t.length;n++)t[n].write(e,0)})(e,t.clients.get(n),n,r)}))},og=(e,t,n,r=Yv)=>{const o=sm(t);((e,t,n,r=new Yv(e))=>{Ug(t,(e=>{e.local=!1;let t=!1;const n=e.doc,o=n.store,i=((e,t)=>{const n=Hp(),r=cm(e.restDecoder);for(let o=0;o<r;o++){const r=cm(e.restDecoder),o=new Array(r),i=e.readClient();let a=cm(e.restDecoder);n.set(i,{i:0,refs:o});for(let n=0;n<r;n++){const r=e.readInfo();switch(31&r){case 0:{const t=e.readLen();o[n]=new ab(mg(i,a),t),a+=t;break}case 10:{const t=cm(e.restDecoder);o[n]=new Nb(mg(i,a),t),a+=t;break}default:{const s=!(192&r),u=new Ob(mg(i,a),null,(r&ih)===ih?e.readLeftID():null,null,(r&oh)===oh?e.readRightID():null,s?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,!s||32&~r?null:e.readString(),Tb(e,r));o[n]=u,a+=u.length}}}}return n})(r,n),a=((e,t,n)=>{const r=[];let o=Wp(n.keys()).sort(((e,t)=>e-t));if(0===o.length)return null;const i=()=>{if(0===o.length)return null;let e=n.get(o[o.length-1]);for(;e.refs.length===e.i;){if(o.pop(),!(o.length>0))return null;e=n.get(o[o.length-1])}return e};let a=i();if(null===a)return null;const s=new Mg,u=new Map,l=(e,t)=>{const n=u.get(e);(null==n||n>t)&&u.set(e,t)};let c=a.refs[a.i++];const d=new Map,f=()=>{for(const e of r){const t=e.id.client,r=n.get(t);r?(r.i--,s.clients.set(t,r.refs.slice(r.i)),n.delete(t),r.i=0,r.refs=[]):s.clients.set(t,[e]),o=o.filter((e=>e!==t))}r.length=0};for(;;){if(c.constructor!==Nb){const o=zp(d,c.id.client,(()=>Og(t,c.id.client)))-c.id.clock;if(o<0)r.push(c),l(c.id.client,c.id.clock-1),f();else{const i=c.getMissing(e,t);if(null!==i){r.push(c);const e=n.get(i)||{refs:[],i:0};if(e.refs.length!==e.i){c=e.refs[e.i++];continue}l(i,Og(t,i)),f()}else(0===o||o<c.length)&&(c.integrate(e,o),d.set(c.id.client,c.id.clock+c.length))}}if(r.length>0)c=r.pop();else if(null!==a&&a.i<a.refs.length)c=a.refs[a.i++];else{if(a=i(),null===a)break;c=a.refs[a.i++]}}if(s.clients.size>0){const e=new ng;return rg(e,s,new Map),Mh(e.restEncoder,0),{missing:u,update:e.toUint8Array()}}return null})(e,o,i),s=o.pendingStructs;if(s){for(const[e,n]of s.missing)if(n<Og(o,e)){t=!0;break}if(a){for(const[e,t]of a.missing){const n=s.missing.get(e);(null==n||n>t)&&s.missing.set(e,t)}s.update=Qg([s.update,a.update])}}else o.pendingStructs=a;const u=Wv(r,e,o);if(o.pendingDs){const t=new Yv(sm(o.pendingDs));cm(t.restDecoder);const n=Wv(t,e,o);o.pendingDs=u&&n?Qg([u,n]):u||n}else o.pendingDs=u;if(t){const t=o.pendingStructs.update;o.pendingStructs=null,og(e.doc,t)}}),n,!1)})(o,e,n,new r(o))},ig=(e,t,n)=>og(e,t,n,Jv),ag=(e,t)=>((e,t=new Uint8Array([0]),n=new ng)=>{((e,t,n=new Map)=>{rg(e,t.store,n),Uv(e,$v(t.store))})(n,e,sg(t));const r=[n.toUint8Array()];if(e.store.pendingDs&&r.push(e.store.pendingDs),e.store.pendingStructs&&r.push(ey(e.store.pendingStructs.update,t)),r.length>1){if(n.constructor===eg)return Xg(r.map(((e,t)=>0===t?e:oy(e))));if(n.constructor===ng)return Qg(r)}return r[0]})(e,t,new eg),sg=e=>(e=>{const t=new Map,n=cm(e.restDecoder);for(let r=0;r<n;r++){const n=cm(e.restDecoder),r=cm(e.restDecoder);t.set(n,r)}return t})(new Zv(sm(e)));class ug{constructor(){this.l=[]}}const lg=()=>new ug,cg=(e,t)=>e.l.push(t),dg=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter((e=>t!==e)),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},fg=(e,t,n)=>_m(e.l,[t,n]);class pg{constructor(e,t){this.client=e,this.clock=t}}const hg=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,mg=(e,t)=>new pg(e,t),vg=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw qh()},gg=(e,t)=>{for(;null!==t;){if(t.parent===e)return!0;t=t.parent._item}return!1};class yg{constructor(e,t,n,r=0){this.type=e,this.tname=t,this.item=n,this.assoc=r}}const bg=e=>new yg(null==e.type?null:mg(e.type.client,e.type.clock),e.tname??null,null==e.item?null:mg(e.item.client,e.item.clock),null==e.assoc?0:e.assoc);class Dg{constructor(e,t,n=0){this.type=e,this.index=t,this.assoc=n}}const wg=(e,t,n)=>{let r=null,o=null;return null===e._item?o=vg(e):r=mg(e._item.id.client,e._item.id.clock),new yg(r,o,t,n)},Cg=(e,t,n=0)=>{let r=e._start;if(n<0){if(0===t)return wg(e,null,n);t--}for(;null!==r;){if(!r.deleted&&r.countable){if(r.length>t)return wg(e,mg(r.id.client,r.id.clock+t),n);t-=r.length}if(null===r.right&&n<0)return wg(e,r.lastId,n);r=r.right}return wg(e,null,n)},kg=(e,t)=>e===t||null!==e&&null!==t&&e.tname===t.tname&&hg(e.item,t.item)&&hg(e.type,t.type)&&e.assoc===t.assoc;class Eg{constructor(e,t){this.ds=e,this.sv=t}}const xg=(e,t)=>new Eg(e,t),Ag=(xg(zv(),new Map),e=>xg($v(e.store),Bg(e.store))),Fg=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!Rv(t.ds,e.id),Sg=(e,t)=>{const n=zp(e.meta,Sg,$p),r=e.doc.store;n.has(t)||(t.sv.forEach(((t,n)=>{t<Og(r,n)&&jg(e,mg(n,t))})),Iv(e,t.ds,(e=>{})),n.add(t))};class Mg{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Bg=e=>{const t=new Map;return e.clients.forEach(((e,n)=>{const r=e[e.length-1];t.set(n,r.id.clock+r.length)})),t},Og=(e,t)=>{const n=e.clients.get(t);if(void 0===n)return 0;const r=n[n.length-1];return r.id.clock+r.length},Tg=(e,t)=>{let n=e.clients.get(t.id.client);if(void 0===n)n=[],e.clients.set(t.id.client,n);else{const e=n[n.length-1];if(e.id.clock+e.length!==t.id.clock)throw qh()}n.push(t)},Pg=(e,t)=>{let n=0,r=e.length-1,o=e[r],i=o.id.clock;if(i===t)return r;let a=Qp(t/(i+o.length-1)*r);for(;n<=r;){if(o=e[a],i=o.id.clock,i<=t){if(t<i+o.length)return a;n=a+1}else r=a-1;a=Qp((n+r)/2)}throw qh()},Ng=(e,t)=>{const n=e.clients.get(t.client);return n[Pg(n,t.clock)]},_g=(e,t,n)=>{const r=Pg(t,n),o=t[r];return o.id.clock<n&&o instanceof Ob?(t.splice(r+1,0,Sb(e,o,n-o.id.clock)),r+1):r},jg=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[_g(e,n,t.clock)]},Ig=(e,t,n)=>{const r=t.clients.get(n.client),o=Pg(r,n.clock),i=r[o];return n.clock!==i.id.clock+i.length-1&&i.constructor!==ab&&r.splice(o+1,0,Sb(e,i,n.clock-i.id.clock+1)),i},Rg=(e,t,n,r,o)=>{if(0===r)return;const i=n+r;let a,s=_g(e,t,n);do{a=t[s++],i<a.id.clock+a.length&&_g(e,t,i),o(a)}while(s<t.length&&t[s].id.clock<i)};class Lg{constructor(e,t,n){this.doc=e,this.deleteSet=new jv,this.beforeState=Bg(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Hg=(e,t)=>!(0===t.deleteSet.clients.size&&!function(e,t){var n,r=Ip(e);try{for(r.s();!(n=r.n()).done;){var o=jp(n.value,2),i=o[0];if(t(o[1],i))return!0}}catch(e){r.e(e)}finally{r.f()}return!1}(t.afterState,((e,n)=>t.beforeState.get(n)!==e))||(Lv(t.deleteSet),((e,t)=>{rg(e,t.doc.store,t.beforeState)})(e,t),Uv(e,t.deleteSet),0)),Vg=(e,t,n)=>{const r=t._item;(null===r||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&zp(e.changed,t,$p).add(n)},zg=(e,t)=>{let n=e[t],r=e[t-1],o=t;for(;o>0&&r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n);n=r,r=e[--o-1])n instanceof Ob&&null!==n.parentSub&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);const i=t-o;return i&&e.splice(t+1-i,i),i},$g=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,o=r.store,i=n.deleteSet,a=n._mergeStructs;try{Lv(i),n.afterState=Bg(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const e=[];n.changed.forEach(((t,r)=>e.push((()=>{null!==r._item&&r._item.deleted||r._callObserver(n,t)})))),e.push((()=>{n.changedParentTypes.forEach(((e,t)=>{t._dEH.l.length>0&&(null===t._item||!t._item.deleted)&&((e=e.filter((e=>null===e.target._item||!e.target._item.deleted))).forEach((e=>{e.currentTarget=t,e._path=null})),e.sort(((e,t)=>e.path.length-t.path.length)),fg(t._dEH,e,n))}))})),e.push((()=>r.emit("afterTransaction",[n,r]))),_m(e,[]),n._needFormattingCleanup&&Zy(n)}finally{r.gc&&((e,t,n)=>{for(const[r,o]of e.clients.entries()){const e=t.clients.get(r);for(let r=o.length-1;r>=0;r--){const i=o[r],a=i.clock+i.len;for(let r=Pg(e,i.clock),o=e[r];r<e.length&&o.id.clock<a;o=e[++r]){const o=e[r];if(i.clock+i.len<=o.id.clock)break;o instanceof Ob&&o.deleted&&!o.keep&&n(o)&&o.gc(t,!1)}}}})(i,o,r.gcFilter),((e,t)=>{e.clients.forEach(((e,n)=>{const r=t.clients.get(n);for(let t=e.length-1;t>=0;t--){const n=e[t];for(let e=th(r.length-1,1+Pg(r,n.clock+n.len-1)),t=r[e];e>0&&t.id.clock>=n.clock;t=r[e])e-=1+zg(r,e)}}))})(i,o),n.afterState.forEach(((e,t)=>{const r=n.beforeState.get(t)||0;if(r!==e){const e=o.clients.get(t),n=nh(Pg(e,r),1);for(let t=e.length-1;t>=n;)t-=1+zg(e,t)}}));for(let e=a.length-1;e>=0;e--){const{client:t,clock:n}=a[e].id,r=o.clients.get(t),i=Pg(r,n);i+1<r.length&&zg(r,i+1)>1||i>0&&zg(r,i)}if(n.local||n.afterState.get(r.clientID)===n.beforeState.get(r.clientID)||(function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,gv(wv(n))),kv.forEach((function(e){return e.print(n)}))}(hv,sv,"[yjs] ",uv,fv,"Changed the client-id because another client seems to be using it."),r.clientID=qv()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const e=new eg;Hg(e,n)&&r.emit("update",[e.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const e=new ng;Hg(e,n)&&r.emit("updateV2",[e.toUint8Array(),n.origin,r,n])}const{subdocsAdded:s,subdocsLoaded:u,subdocsRemoved:l}=n;(s.size>0||l.size>0||u.size>0)&&(s.forEach((e=>{e.clientID=r.clientID,null==e.collectionid&&(e.collectionid=r.collectionid),r.subdocs.add(e)})),l.forEach((e=>r.subdocs.delete(e))),r.emit("subdocs",[{loaded:u,added:s,removed:l},r,n]),l.forEach((e=>e.destroy()))),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):$g(e,t+1)}}},Ug=(e,t,n=null,r=!0)=>{const o=e._transactionCleanups;let i=!1,a=null;null===e._transaction&&(i=!0,e._transaction=new Lg(e,n,r),o.push(e._transaction),1===o.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{a=t(e._transaction)}finally{if(i){const t=e._transaction===o[0];e._transaction=null,t&&$g(o,0)}}return a};class Gg{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}}const Wg=(e,t,n)=>{Iv(e,n.deletions,(n=>{n instanceof Ob&&t.scope.some((t=>t===e.doc||gg(t,n)))&&Fb(n,!1)}))},qg=(e,t,n)=>{let r=null;const o=e.doc,i=e.scope;Ug(o,(n=>{for(;t.length>0&&null===e.currStackItem;){const r=o.store,a=t.pop(),s=new Set,u=[];let l=!1;Iv(n,a.insertions,(e=>{if(e instanceof Ob){if(null!==e.redone){let{item:t,diff:o}=Ab(r,e.id);o>0&&(t=jg(n,mg(t.id.client,t.id.clock+o))),e=t}!e.deleted&&i.some((t=>t===n.doc||gg(t,e)))&&u.push(e)}})),Iv(n,a.deletions,(e=>{e instanceof Ob&&i.some((t=>t===n.doc||gg(t,e)))&&!Rv(a.insertions,e.id)&&s.add(e)})),s.forEach((t=>{l=null!==Bb(n,t,s,a.insertions,e.ignoreRemoteMapChanges,e)||l}));for(let t=u.length-1;t>=0;t--){const r=u[t];e.deleteFilter(r)&&(r.delete(n),l=!0)}e.currStackItem=l?a:null}n.changed.forEach(((e,t)=>{e.has(null)&&t._searchMarker&&(t._searchMarker.length=0)})),r=n}),e);const a=e.currStackItem;if(null!=a){const t=r.changedParentTypes;e.emit("stack-item-popped",[{stackItem:a,type:n,changedParentTypes:t,origin:e},e]),e.currStackItem=null}return a};class Kg extends Yp{constructor(e,{captureTimeout:t=500,captureTransaction:n=e=>!0,deleteFilter:r=()=>!0,trackedOrigins:o=new Set([null]),ignoreRemoteMapChanges:i=!1,doc:a=(qp(e)?e[0].doc:e instanceof Kv?e:e.doc)}={}){super(),this.scope=[],this.doc=a,this.addToScope(e),this.deleteFilter=r,o.add(this),this.trackedOrigins=o,this.captureTransaction=n,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=i,this.captureTimeout=t,this.afterTransactionHandler=e=>{if(!(this.captureTransaction(e)&&this.scope.some((t=>e.changedParentTypes.has(t)||t===this.doc))&&(this.trackedOrigins.has(e.origin)||e.origin&&this.trackedOrigins.has(e.origin.constructor))))return;const t=this.undoing,n=this.redoing,r=t?this.redoStack:this.undoStack;t?this.stopCapturing():n||this.clear(!1,!0);const o=new jv;e.afterState.forEach(((t,n)=>{const r=e.beforeState.get(n)||0,i=t-r;i>0&&Vv(o,n,r,i)}));const i=av();let a=!1;if(this.lastChange>0&&i-this.lastChange<this.captureTimeout&&r.length>0&&!t&&!n){const t=r[r.length-1];t.deletions=Hv([t.deletions,e.deleteSet]),t.insertions=Hv([t.insertions,o])}else r.push(new Gg(e.deleteSet,o)),a=!0;t||n||(this.lastChange=i),Iv(e,e.deleteSet,(t=>{t instanceof Ob&&this.scope.some((n=>n===e.doc||gg(n,t)))&&Fb(t,!0)}));const s=[{stackItem:r[r.length-1],origin:e.origin,type:t?"redo":"undo",changedParentTypes:e.changedParentTypes},this];a?this.emit("stack-item-added",s):this.emit("stack-item-updated",s)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",(()=>{this.destroy()}))}addToScope(e){const t=new Set(this.scope);(e=qp(e)?e:[e]).forEach((e=>{t.has(e)||(t.add(e),(e instanceof my?e.doc!==this.doc:e!==this.doc)&&Cv("[yjs#509] Not same Y.Doc"),this.scope.push(e))}))}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,t=!0){(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact((n=>{e&&(this.undoStack.forEach((e=>Wg(n,this,e))),this.undoStack=[]),t&&(this.redoStack.forEach((e=>Wg(n,this,e))),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])}))}stopCapturing(){this.lastChange=0}undo(){let e;this.undoing=!0;try{e=qg(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){let e;this.redoing=!0;try{e=qg(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}class Zg{constructor(e,t){this.gen=function*(e){const t=cm(e.restDecoder);for(let n=0;n<t;n++){const t=cm(e.restDecoder),n=e.readClient();let r=cm(e.restDecoder);for(let o=0;o<t;o++){const t=e.readInfo();if(10===t){const t=cm(e.restDecoder);yield new Nb(mg(n,r),t),r+=t}else if(31&t){const o=!(192&t),i=new Ob(mg(n,r),null,(t&ih)===ih?e.readLeftID():null,null,(t&oh)===oh?e.readRightID():null,o?e.readParentInfo()?e.readString():e.readLeftID():null,!o||32&~t?null:e.readString(),Tb(e,t));yield i,r+=i.length}else{const t=e.readLen();yield new ab(mg(n,r),t),r+=t}}}}(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}next(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===Nb);return this.curr}}class Jg{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const Xg=e=>Qg(e,Jv,eg),Yg=(e,t)=>{if(e.constructor===ab){const{client:n,clock:r}=e.id;return new ab(mg(n,r+t),e.length-t)}if(e.constructor===Nb){const{client:n,clock:r}=e.id;return new Nb(mg(n,r+t),e.length-t)}{const n=e,{client:r,clock:o}=n.id;return new Ob(mg(r,o+t),null,mg(r,o+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},Qg=(e,t=Yv,n=ng)=>{if(1===e.length)return e[0];const r=e.map((e=>new t(sm(e))));let o=r.map((e=>new Zg(e,!0))),i=null;const a=new n,s=new Jg(a);for(;o=o.filter((e=>null!==e.curr)),o.sort(((e,t)=>{if(e.curr.id.client===t.curr.id.client){const n=e.curr.id.clock-t.curr.id.clock;return 0===n?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===Nb?1:-1:n}return t.curr.id.client-e.curr.id.client})),0!==o.length;){const e=o[0],t=e.curr.id.client;if(null!==i){let n=e.curr,r=!1;for(;null!==n&&n.id.clock+n.length<=i.struct.id.clock+i.struct.length&&n.id.client>=i.struct.id.client;)n=e.next(),r=!0;if(null===n||n.id.client!==t||r&&n.id.clock>i.struct.id.clock+i.struct.length)continue;if(t!==i.struct.id.client)ny(s,i.struct,i.offset),i={struct:n,offset:0},e.next();else if(i.struct.id.clock+i.struct.length<n.id.clock)if(i.struct.constructor===Nb)i.struct.length=n.id.clock+n.length-i.struct.id.clock;else{ny(s,i.struct,i.offset);const e=n.id.clock-i.struct.id.clock-i.struct.length;i={struct:new Nb(mg(t,i.struct.id.clock+i.struct.length),e),offset:0}}else{const t=i.struct.id.clock+i.struct.length-n.id.clock;t>0&&(i.struct.constructor===Nb?i.struct.length-=t:n=Yg(n,t)),i.struct.mergeWith(n)||(ny(s,i.struct,i.offset),i={struct:n,offset:0},e.next())}}else i={struct:e.curr,offset:0},e.next();for(let n=e.curr;null!==n&&n.id.client===t&&n.id.clock===i.struct.id.clock+i.struct.length&&n.constructor!==Nb;n=e.next())ny(s,i.struct,i.offset),i={struct:n,offset:0}}null!==i&&(ny(s,i.struct,i.offset),i=null),ry(s);const u=r.map((e=>Gv(e))),l=Hv(u);return Uv(a,l),a.toUint8Array()},ey=(e,t,n=Yv,r=ng)=>{const o=sg(t),i=new r,a=new Jg(i),s=new n(sm(e)),u=new Zg(s,!1);for(;u.curr;){const e=u.curr,t=e.id.client,n=o.get(t)||0;if(u.curr.constructor!==Nb)if(e.id.clock+e.length>n)for(ny(a,e,nh(n-e.id.clock,0)),u.next();u.curr&&u.curr.id.client===t;)ny(a,u.curr,0),u.next();else for(;u.curr&&u.curr.id.client===t&&u.curr.id.clock+u.curr.length<=n;)u.next();else u.next()}ry(a);const l=Gv(s);return Uv(i,l),i.toUint8Array()},ty=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:Ah(e.encoder.restEncoder)}),e.encoder.restEncoder=xh(),e.written=0)},ny=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&ty(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),Mh(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},ry=e=>{ty(e);const t=e.encoder.restEncoder;Mh(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const r=e.clientStructs[n];Mh(t,r.written),Nh(t,r.restEncoder)}},oy=e=>((e,t,n,r)=>{const o=new n(sm(e)),i=new Zg(o,!1),a=new r,s=new Jg(a);for(let e=i.curr;null!==e;e=i.next())ny(s,t(e),0);ry(s);const u=Gv(o);return Uv(a,u),a.toUint8Array()})(e,jm,Yv,eg),iy="You must not compute changes after the event-handler fired.";class ay{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=sy(this.currentTarget,this.target))}deletes(e){return Rv(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw Gh(iy);const e=new Map,t=this.target;this.transaction.changed.get(t).forEach((n=>{if(null!==n){const r=t._map.get(n);let o,i;if(this.adds(r)){let e=r.left;for(;null!==e&&this.adds(e);)e=e.left;if(this.deletes(r)){if(null===e||!this.deletes(e))return;o="delete",i=Up(e.content.getContent())}else null!==e&&this.deletes(e)?(o="update",i=Up(e.content.getContent())):(o="add",i=void 0)}else{if(!this.deletes(r))return;o="delete",i=Up(r.content.getContent())}e.set(n,{action:o,oldValue:i})}})),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){if(0===this.transaction.doc._transactionCleanups.length)throw Gh(iy);const t=this.target,n=$p(),r=$p(),o=[];if(e={added:n,deleted:r,delta:o,keys:this.keys},this.transaction.changed.get(t).has(null)){let e=null;const i=()=>{e&&o.push(e)};for(let o=t._start;null!==o;o=o.right)o.deleted?this.deletes(o)&&!this.adds(o)&&(null!==e&&void 0!==e.delete||(i(),e={delete:0}),e.delete+=o.length,r.add(o)):this.adds(o)?(null!==e&&void 0!==e.insert||(i(),e={insert:[]}),e.insert=e.insert.concat(o.content.getContent()),n.add(o)):(null!==e&&void 0!==e.retain||(i(),e={retain:0}),e.retain+=o.length);null!==e&&void 0===e.retain&&i()}this._changes=e}return e}}const sy=(e,t)=>{const n=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)n.unshift(t._item.parentSub);else{let e=0,r=t._item.parent._start;for(;r!==t._item&&null!==r;)!r.deleted&&r.countable&&(e+=r.length),r=r.right;n.unshift(e)}t=t._item.parent}return n},uy=()=>{Cv("Invalid access: Add Yjs type to a document before reading data.")};let ly=0;class cy{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=ly++}}const dy=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=ly++},fy=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;const n=0===e._searchMarker.length?null:e._searchMarker.reduce(((e,n)=>eh(t-e.index)<eh(t-n.index)?e:n));let r=e._start,o=0;for(null!==n&&(r=n.p,o=n.index,(e=>{e.timestamp=ly++})(n));null!==r.right&&o<t;){if(!r.deleted&&r.countable){if(t<o+r.length)break;o+=r.length}r=r.right}for(;null!==r.left&&o>t;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);for(;null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);return null!==n&&eh(n.index-o)<r.parent.length/80?(dy(n,r,o),n):((e,t,n)=>{if(e.length>=80){const r=e.reduce(((e,t)=>e.timestamp<t.timestamp?e:t));return dy(r,t,n),r}{const r=new cy(t,n);return e.push(r),r}})(e._searchMarker,r,o)},py=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const o=e[r];if(n>0){let t=o.p;for(t.marker=!1;t&&(t.deleted||!t.countable);)t=t.left,t&&!t.deleted&&t.countable&&(o.index-=t.length);if(null===t||!0===t.marker){e.splice(r,1);continue}o.p=t,t.marker=!0}(t<o.index||n>0&&t===o.index)&&(o.index=nh(t,o.index+n))}},hy=(e,t,n)=>{const r=e,o=t.changedParentTypes;for(;zp(o,e,(()=>[])).push(n),null!==e._item;)e=e._item.parent;fg(r._eH,n,t)};class my{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=lg(),this._dEH=lg(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw Wh()}clone(){throw Wh()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){cg(this._eH,e)}observeDeep(e){cg(this._dEH,e)}unobserve(e){dg(this._eH,e)}unobserveDeep(e){dg(this._dEH,e)}toJSON(){}}const vy=(e,t,n)=>{e.doc??uy(),t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const o=[];let i=e._start;for(;null!==i&&r>0;){if(i.countable&&!i.deleted){const e=i.content.getContent();if(e.length<=t)t-=e.length;else{for(let n=t;n<e.length&&r>0;n++)o.push(e[n]),r--;t=0}}i=i.right}return o},gy=e=>{e.doc??uy();const t=[];let n=e._start;for(;null!==n;){if(n.countable&&!n.deleted){const e=n.content.getContent();for(let n=0;n<e.length;n++)t.push(e[n])}n=n.right}return t},yy=(e,t)=>{const n=[];let r=e._start;for(;null!==r;){if(r.countable&&Fg(r,t)){const e=r.content.getContent();for(let t=0;t<e.length;t++)n.push(e[t])}r=r.right}return n},by=(e,t)=>{let n=0,r=e._start;for(e.doc??uy();null!==r;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let r=0;r<o.length;r++)t(o[r],n++,e)}r=r.right}},Dy=(e,t)=>{const n=[];return by(e,((r,o)=>{n.push(t(r,o,e))})),n},wy=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===n){for(;null!==t&&t.deleted;)t=t.right;if(null===t)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const e=n[r++];return n.length<=r&&(n=null),{done:!1,value:e}}}},Cy=(e,t)=>{e.doc??uy();const n=fy(e,t);let r=e._start;for(null!==n&&(r=n.p,t-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},ky=(e,t,n,r)=>{let o=n;const i=e.doc,a=i.clientID,s=i.store,u=null===n?t._start:n.right;let l=[];const c=()=>{l.length>0&&(o=new Ob(mg(a,Og(s,a)),o,o&&o.lastId,u,u&&u.id,t,null,new mb(l)),o.integrate(e,0),l=[])};r.forEach((n=>{if(null===n)l.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:l.push(n);break;default:switch(c(),n.constructor){case Uint8Array:case ArrayBuffer:o=new Ob(mg(a,Og(s,a)),o,o&&o.lastId,u,u&&u.id,t,null,new sb(new Uint8Array(n))),o.integrate(e,0);break;case Kv:o=new Ob(mg(a,Og(s,a)),o,o&&o.lastId,u,u&&u.id,t,null,new cb(n)),o.integrate(e,0);break;default:if(!(n instanceof my))throw new Error("Unexpected content type in insert operation");o=new Ob(mg(a,Og(s,a)),o,o&&o.lastId,u,u&&u.id,t,null,new xb(n)),o.integrate(e,0)}}})),c()},Ey=()=>Gh("Length exceeded!"),xy=(e,t,n,r)=>{if(n>t._length)throw Ey();if(0===n)return t._searchMarker&&py(t._searchMarker,n,r.length),ky(e,t,null,r);const o=n,i=fy(t,n);let a=t._start;for(null!==i&&(a=i.p,0==(n-=i.index)&&(a=a.prev,n+=a&&a.countable&&!a.deleted?a.length:0));null!==a;a=a.right)if(!a.deleted&&a.countable){if(n<=a.length){n<a.length&&jg(e,mg(a.id.client,a.id.clock+n));break}n-=a.length}return t._searchMarker&&py(t._searchMarker,o,r.length),ky(e,t,a,r)},Ay=(e,t,n,r)=>{if(0===r)return;const o=n,i=r,a=fy(t,n);let s=t._start;for(null!==a&&(s=a.p,n-=a.index);null!==s&&n>0;s=s.right)!s.deleted&&s.countable&&(n<s.length&&jg(e,mg(s.id.client,s.id.clock+n)),n-=s.length);for(;r>0&&null!==s;)s.deleted||(r<s.length&&jg(e,mg(s.id.client,s.id.clock+r)),s.delete(e),r-=s.length),s=s.right;if(r>0)throw Ey();t._searchMarker&&py(t._searchMarker,o,-i+r)},Fy=(e,t,n)=>{const r=t._map.get(n);void 0!==r&&r.delete(e)},Sy=(e,t,n,r)=>{const o=t._map.get(n)||null,i=e.doc,a=i.clientID;let s;if(null==r)s=new mb([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:s=new mb([r]);break;case Uint8Array:s=new sb(r);break;case Kv:s=new cb(r);break;default:if(!(r instanceof my))throw new Error("Unexpected content type");s=new xb(r)}new Ob(mg(a,Og(i.store,a)),o,o&&o.lastId,null,null,t,n,s).integrate(e,0)},My=(e,t)=>{e.doc??uy();const n=e._map.get(t);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},By=e=>{const t={};return e.doc??uy(),e._map.forEach(((e,n)=>{e.deleted||(t[n]=e.content.getContent()[e.length-1])})),t},Oy=(e,t)=>{e.doc??uy();const n=e._map.get(t);return void 0!==n&&!n.deleted},Ty=e=>{return e.doc??uy(),t=e._map.entries(),n=e=>!e[1].deleted,Av((function(){var e;do{e=t.next()}while(!e.done&&!n(e.value));return e}));var t,n};class Py extends ay{}class Ny extends my{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new Ny;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Ny}clone(){const e=new Ny;return e.insert(0,this.toArray().map((e=>e instanceof my?e.clone():e))),e}get length(){return this.doc??uy(),this._length}_callObserver(e,t){super._callObserver(e,t),hy(this,e,new Py(this,e))}insert(e,t){null!==this.doc?Ug(this.doc,(n=>{xy(n,this,e,t)})):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?Ug(this.doc,(t=>{((e,t,n)=>{let r=(t._searchMarker||[]).reduce(((e,t)=>t.index>e.index?t:e),{index:0,p:t._start}).p;if(r)for(;r.right;)r=r.right;ky(e,t,r,n)})(t,this,e)})):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){null!==this.doc?Ug(this.doc,(n=>{Ay(n,this,e,t)})):this._prelimContent.splice(e,t)}get(e){return Cy(this,e)}toArray(){return gy(this)}slice(e=0,t=this.length){return vy(this,e,t)}toJSON(){return this.map((e=>e instanceof my?e.toJSON():e))}map(e){return Dy(this,e)}forEach(e){by(this,e)}[Symbol.iterator](){return wy(this)}_write(e){e.writeTypeRef(yb)}}class _y extends ay{constructor(e,t,n){super(e,t),this.keysChanged=n}}class jy extends my{constructor(e){super(),this._prelimContent=null,this._prelimContent=void 0===e?new Map:new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach(((e,t)=>{this.set(t,e)})),this._prelimContent=null}_copy(){return new jy}clone(){const e=new jy;return this.forEach(((t,n)=>{e.set(n,t instanceof my?t.clone():t)})),e}_callObserver(e,t){hy(this,e,new _y(this,e,t))}toJSON(){this.doc??uy();const e={};return this._map.forEach(((t,n)=>{if(!t.deleted){const r=t.content.getContent()[t.length-1];e[n]=r instanceof my?r.toJSON():r}})),e}get size(){return[...Ty(this)].length}keys(){return Fv(Ty(this),(e=>e[0]))}values(){return Fv(Ty(this),(e=>e[1].content.getContent()[e[1].length-1]))}entries(){return Fv(Ty(this),(e=>[e[0],e[1].content.getContent()[e[1].length-1]]))}forEach(e){this.doc??uy(),this._map.forEach(((t,n)=>{t.deleted||e(t.content.getContent()[t.length-1],n,this)}))}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?Ug(this.doc,(t=>{Fy(t,this,e)})):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?Ug(this.doc,(n=>{Sy(n,this,e,t)})):this._prelimContent.set(e,t),t}get(e){return My(this,e)}has(e){return Oy(this,e)}clear(){null!==this.doc?Ug(this.doc,(e=>{this.forEach((function(t,n,r){Fy(e,r,n)}))})):this._prelimContent.clear()}_write(e){e.writeTypeRef(bb)}}const Iy=(e,t)=>e===t||"object"==typeof e&&"object"==typeof t&&e&&t&&function(e,t){return e===t||Ov(e)===Ov(t)&&Tv(e,(function(e,n){return(void 0!==e||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(t,n))&&t[n]===e}))}(e,t);class Ry{constructor(e,t,n,r){this.left=e,this.right=t,this.index=n,this.currentAttributes=r}forward(){null===this.right&&qh(),this.right.content.constructor===fb?this.right.deleted||zy(this.currentAttributes,this.right.content):this.right.deleted||(this.index+=this.right.length),this.left=this.right,this.right=this.right.right}}const Ly=(e,t,n)=>{for(;null!==t.right&&n>0;)t.right.content.constructor===fb?t.right.deleted||zy(t.currentAttributes,t.right.content):t.right.deleted||(n<t.right.length&&jg(e,mg(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length),t.left=t.right,t.right=t.right.right;return t},Hy=(e,t,n,r)=>{const o=new Map,i=r?fy(t,n):null;if(i){const t=new Ry(i.p.left,i.p,i.index,o);return Ly(e,t,n-i.index)}{const r=new Ry(null,t._start,0,o);return Ly(e,r,n)}},Vy=(e,t,n,r)=>{for(;null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===fb&&Iy(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const o=e.doc,i=o.clientID;r.forEach(((r,a)=>{const s=n.left,u=n.right,l=new Ob(mg(i,Og(o.store,i)),s,s&&s.lastId,u,u&&u.id,t,null,new fb(a,r));l.integrate(e,0),n.right=l,n.forward()}))},zy=(e,t)=>{const{key:n,value:r}=t;null===r?e.delete(n):e.set(n,r)},$y=(e,t)=>{for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===fb&&Iy(t[e.right.content.key]??null,e.right.content.value));)e.forward()},Uy=(e,t,n,r)=>{const o=e.doc,i=o.clientID,a=new Map;for(const s in r){const u=r[s],l=n.currentAttributes.get(s)??null;if(!Iy(l,u)){a.set(s,l);const{left:r,right:c}=n;n.right=new Ob(mg(i,Og(o.store,i)),r,r&&r.lastId,c,c&&c.id,t,null,new fb(s,u)),n.right.integrate(e,0),n.forward()}}return a},Gy=(e,t,n,r,o)=>{n.currentAttributes.forEach(((e,t)=>{void 0===o[t]&&(o[t]=null)}));const i=e.doc,a=i.clientID;$y(n,o);const s=Uy(e,t,n,o),u=r.constructor===String?new vb(r):r instanceof my?new xb(r):new db(r);let{left:l,right:c,index:d}=n;t._searchMarker&&py(t._searchMarker,n.index,u.getLength()),c=new Ob(mg(a,Og(i.store,a)),l,l&&l.lastId,c,c&&c.id,t,null,u),c.integrate(e,0),n.right=c,n.index=d,n.forward(),Vy(e,t,n,s)},Wy=(e,t,n,r,o)=>{const i=e.doc,a=i.clientID;$y(n,o);const s=Uy(e,t,n,o);e:for(;null!==n.right&&(r>0||s.size>0&&(n.right.deleted||n.right.content.constructor===fb));){if(!n.right.deleted)switch(n.right.content.constructor){case fb:{const{key:t,value:i}=n.right.content,a=o[t];if(void 0!==a){if(Iy(a,i))s.delete(t);else{if(0===r)break e;s.set(t,i)}n.right.delete(e)}else n.currentAttributes.set(t,i);break}default:r<n.right.length&&jg(e,mg(n.right.id.client,n.right.id.clock+r)),r-=n.right.length}n.forward()}if(r>0){let o="";for(;r>0;r--)o+="\n";n.right=new Ob(mg(a,Og(i.store,a)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new vb(o)),n.right.integrate(e,0),n.forward()}Vy(e,t,n,s)},qy=(e,t,n,r,o)=>{let i=t;const a=Hp();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===fb){const e=i.content;a.set(e.key,e)}i=i.right}let s=0,u=!1;for(;t!==i;){if(n===t&&(u=!0),!t.deleted){const n=t.content;switch(n.constructor){case fb:{const{key:i,value:l}=n,c=r.get(i)??null;a.get(i)===n&&c!==l||(t.delete(e),s++,u||(o.get(i)??null)!==l||c===l||(null===c?o.delete(i):o.set(i,c))),u||t.deleted||zy(o,n);break}}}t=t.right}return s},Ky=e=>{let t=0;return Ug(e.doc,(n=>{let r=e._start,o=e._start,i=Hp();const a=Vp(i);for(;o;)!1===o.deleted&&(o.content.constructor===fb?zy(a,o.content):(t+=qy(n,r,o,i,a),i=Vp(a),r=o)),o=o.right})),t},Zy=e=>{const t=new Set,n=e.doc;for(const[r,o]of e.afterState.entries()){const i=e.beforeState.get(r)||0;o!==i&&Rg(e,n.store.clients.get(r),i,o,(e=>{e.deleted||e.content.constructor!==fb||e.constructor===ab||t.add(e.parent)}))}Ug(n,(n=>{Iv(e,e.deleteSet,(e=>{if(e instanceof ab||!e.parent._hasFormatting||t.has(e.parent))return;const r=e.parent;e.content.constructor===fb?t.add(r):((e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===fb){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}})(n,e)}));for(const e of t)Ky(e)}))},Jy=(e,t,n)=>{const r=n,o=Vp(t.currentAttributes),i=t.right;for(;n>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case xb:case db:case vb:n<t.right.length&&jg(e,mg(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e)}t.forward()}i&&qy(e,i,t.right,o,t.currentAttributes);const a=(t.left||t.right).parent;return a._searchMarker&&py(a._searchMarker,t.index,-r+n),t};class Xy extends ay{constructor(e,t,n){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,n.forEach((e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)}))}get changes(){if(null===this._changes){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){const e=this.target.doc,t=[];Ug(e,(e=>{const n=new Map,r=new Map;let o=this.target._start,i=null;const a={};let s="",u=0,l=0;const c=()=>{if(null!==i){let e=null;switch(i){case"delete":l>0&&(e={delete:l}),l=0;break;case"insert":("object"==typeof s||s.length>0)&&(e={insert:s},n.size>0&&(e.attributes={},n.forEach(((t,n)=>{null!==t&&(e.attributes[n]=t)})))),s="";break;case"retain":u>0&&(e={retain:u},function(e){for(var t in e)return!1;return!0}(a)||(e.attributes=Mv({},a))),u=0}e&&t.push(e),i=null}};for(;null!==o;){switch(o.content.constructor){case xb:case db:this.adds(o)?this.deletes(o)||(c(),i="insert",s=o.content.getContent()[0],c()):this.deletes(o)?("delete"!==i&&(c(),i="delete"),l+=1):o.deleted||("retain"!==i&&(c(),i="retain"),u+=1);break;case vb:this.adds(o)?this.deletes(o)||("insert"!==i&&(c(),i="insert"),s+=o.content.str):this.deletes(o)?("delete"!==i&&(c(),i="delete"),l+=o.length):o.deleted||("retain"!==i&&(c(),i="retain"),u+=o.length);break;case fb:{const{key:t,value:s}=o.content;if(this.adds(o)){if(!this.deletes(o)){const u=n.get(t)??null;Iy(u,s)?null!==s&&o.delete(e):("retain"===i&&c(),Iy(s,r.get(t)??null)?delete a[t]:a[t]=s)}}else if(this.deletes(o)){r.set(t,s);const e=n.get(t)??null;Iy(e,s)||("retain"===i&&c(),a[t]=e)}else if(!o.deleted){r.set(t,s);const n=a[t];void 0!==n&&(Iy(n,s)?null!==n&&o.delete(e):("retain"===i&&c(),null===s?delete a[t]:a[t]=s))}o.deleted||("insert"===i&&c(),zy(n,o.content));break}}o=o.right}for(c();t.length>0;){const e=t[t.length-1];if(void 0===e.retain||void 0!==e.attributes)break;t.pop()}})),this._delta=t}return this._delta}}class Yy extends my{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??uy(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach((e=>e()))}catch(e){console.error(e)}this._pending=null}_copy(){return new Yy}clone(){const e=new Yy;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const n=new Xy(this,e,t);hy(this,e,n),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??uy();let e="",t=this._start;for(;null!==t;)!t.deleted&&t.countable&&t.content.constructor===vb&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){null!==this.doc?Ug(this.doc,(n=>{const r=new Ry(null,this._start,0,new Map);for(let o=0;o<e.length;o++){const i=e[o];if(void 0!==i.insert){const a=t||"string"!=typeof i.insert||o!==e.length-1||null!==r.right||"\n"!==i.insert.slice(-1)?i.insert:i.insert.slice(0,-1);("string"!=typeof a||a.length>0)&&Gy(n,this,r,a,i.attributes||{})}else void 0!==i.retain?Wy(n,this,r,i.retain,i.attributes||{}):void 0!==i.delete&&Jy(n,r,i.delete)}})):this._pending.push((()=>this.applyDelta(e)))}toDelta(e,t,n){this.doc??uy();const r=[],o=new Map,i=this.doc;let a="",s=this._start;function u(){if(a.length>0){const e={};let t=!1;o.forEach(((n,r)=>{t=!0,e[r]=n}));const n={insert:a};t&&(n.attributes=e),r.push(n),a=""}}const l=()=>{for(;null!==s;){if(Fg(s,e)||void 0!==t&&Fg(s,t))switch(s.content.constructor){case vb:{const r=o.get("ychange");void 0===e||Fg(s,e)?void 0===t||Fg(s,t)?void 0!==r&&(u(),o.delete("ychange")):void 0!==r&&r.user===s.id.client&&"added"===r.type||(u(),o.set("ychange",n?n("added",s.id):{type:"added"})):void 0!==r&&r.user===s.id.client&&"removed"===r.type||(u(),o.set("ychange",n?n("removed",s.id):{type:"removed"})),a+=s.content.str;break}case xb:case db:{u();const e={insert:s.content.getContent()[0]};if(o.size>0){const t={};e.attributes=t,o.forEach(((e,n)=>{t[n]=e}))}r.push(e);break}case fb:Fg(s,e)&&(u(),zy(o,s.content))}s=s.right}u()};return e||t?Ug(i,(n=>{e&&Sg(n,e),t&&Sg(n,t),l()}),"cleanup"):l(),r}insert(e,t,n){if(t.length<=0)return;const r=this.doc;null!==r?Ug(r,(r=>{const o=Hy(r,this,e,!n);n||(n={},o.currentAttributes.forEach(((e,t)=>{n[t]=e}))),Gy(r,this,o,t,n)})):this._pending.push((()=>this.insert(e,t,n)))}insertEmbed(e,t,n){const r=this.doc;null!==r?Ug(r,(r=>{const o=Hy(r,this,e,!n);Gy(r,this,o,t,n||{})})):this._pending.push((()=>this.insertEmbed(e,t,n||{})))}delete(e,t){if(0===t)return;const n=this.doc;null!==n?Ug(n,(n=>{Jy(n,Hy(n,this,e,!0),t)})):this._pending.push((()=>this.delete(e,t)))}format(e,t,n){if(0===t)return;const r=this.doc;null!==r?Ug(r,(r=>{const o=Hy(r,this,e,!1);null!==o.right&&Wy(r,this,o,t,n)})):this._pending.push((()=>this.format(e,t,n)))}removeAttribute(e){null!==this.doc?Ug(this.doc,(t=>{Fy(t,this,e)})):this._pending.push((()=>this.removeAttribute(e)))}setAttribute(e,t){null!==this.doc?Ug(this.doc,(n=>{Sy(n,this,e,t)})):this._pending.push((()=>this.setAttribute(e,t)))}getAttribute(e){return My(this,e)}getAttributes(){return By(this)}_write(e){e.writeTypeRef(Db)}}class Qy{constructor(e,t=()=>!0){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??uy()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do{if(t=e.content.type,e.deleted||t.constructor!==tb&&t.constructor!==eb||null===t._start)for(;null!==e;){const t=e.next;if(null!==t){e=t;break}e=e.parent===this._root?null:e.parent._item}else e=t._start}while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class eb extends my{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new eb}clone(){const e=new eb;return e.insert(0,this.toArray().map((e=>e instanceof my?e.clone():e))),e}get length(){return this.doc??uy(),null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new Qy(this,e)}querySelector(e){e=e.toUpperCase();const t=new Qy(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),Wp(new Qy(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)))}_callObserver(e,t){hy(this,e,new nb(this,t,e))}toString(){return Dy(this,(e=>e.toString())).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},n){const r=e.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),by(this,(o=>{r.insertBefore(o.toDOM(e,t,n),null)})),r}insert(e,t){null!==this.doc?Ug(this.doc,(n=>{xy(n,this,e,t)})):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)Ug(this.doc,(n=>{const r=e&&e instanceof my?e._item:e;ky(n,this,r,t)}));else{const n=this._prelimContent,r=null===e?0:n.findIndex((t=>t===e))+1;if(0===r&&null!==e)throw Gh("Reference item not found");n.splice(r,0,...t)}}delete(e,t=1){null!==this.doc?Ug(this.doc,(n=>{Ay(n,this,e,t)})):this._prelimContent.splice(e,t)}toArray(){return gy(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return Cy(this,e)}slice(e=0,t=this.length){return vy(this,e,t)}forEach(e){by(this,e)}_write(e){e.writeTypeRef(Cb)}}class tb extends eb{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach(((e,t)=>{this.setAttribute(t,e)})),this._prelimAttrs=null}_copy(){return new tb(this.nodeName)}clone(){const e=new tb(this.nodeName);return function(e,t){for(var n in e)t(e[n],n)}(this.getAttributes(),((t,n)=>{"string"==typeof t&&e.setAttribute(n,t)})),e.insert(0,this.toArray().map((e=>e instanceof my?e.clone():e))),e}toString(){const e=this.getAttributes(),t=[],n=[];for(const t in e)n.push(t);n.sort();const r=n.length;for(let o=0;o<r;o++){const r=n[o];t.push(r+'="'+e[r]+'"')}const o=this.nodeName.toLocaleLowerCase();return`<${o}${t.length>0?" "+t.join(" "):""}>${super.toString()}</${o}>`}removeAttribute(e){null!==this.doc?Ug(this.doc,(t=>{Fy(t,this,e)})):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?Ug(this.doc,(n=>{Sy(n,this,e,t)})):this._prelimAttrs.set(e,t)}getAttribute(e){return My(this,e)}hasAttribute(e){return Oy(this,e)}getAttributes(e){return e?((e,t)=>{const n={};return this._map.forEach(((e,r)=>{let o=e;for(;null!==o&&(!t.sv.has(o.id.client)||o.id.clock>=(t.sv.get(o.id.client)||0));)o=o.left;null!==o&&Fg(o,t)&&(n[r]=o.content.getContent()[o.length-1])})),n})(0,e):By(this)}toDOM(e=document,t={},n){const r=e.createElement(this.nodeName),o=this.getAttributes();for(const e in o){const t=o[e];"string"==typeof t&&r.setAttribute(e,t)}return by(this,(o=>{r.appendChild(o.toDOM(e,t,n))})),void 0!==n&&n._createAssociation(r,this),r}_write(e){e.writeTypeRef(wb),e.writeKey(this.nodeName)}}class nb extends ay{constructor(e,t,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach((e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)}))}}class rb extends jy{constructor(e){super(),this.hookName=e}_copy(){return new rb(this.hookName)}clone(){const e=new rb(this.hookName);return this.forEach(((t,n)=>{e.set(n,t)})),e}toDOM(e=document,t={},n){const r=t[this.hookName];let o;return o=void 0!==r?r.createDom(this):document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),void 0!==n&&n._createAssociation(o,this),o}_write(e){e.writeTypeRef(kb),e.writeKey(this.hookName)}}class ob extends Yy{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new ob}clone(){const e=new ob;return e.applyDelta(this.toDelta()),e}toDOM(e=document,t,n){const r=e.createTextNode(this.toString());return void 0!==n&&n._createAssociation(r,this),r}toString(){return this.toDelta().map((e=>{const t=[];for(const n in e.attributes){const r=[];for(const t in e.attributes[n])r.push({key:t,value:e.attributes[n][t]});r.sort(((e,t)=>e.key<t.key?-1:1)),t.push({nodeName:n,attrs:r})}t.sort(((e,t)=>e.nodeName<t.nodeName?-1:1));let n="";for(let e=0;e<t.length;e++){const r=t[e];n+=`<${r.nodeName}`;for(let e=0;e<r.attrs.length;e++){const t=r.attrs[e];n+=` ${t.key}="${t.value}"`}n+=">"}n+=e.insert;for(let e=t.length-1;e>=0;e--)n+=`</${t[e].nodeName}>`;return n})).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(Eb)}}class ib{constructor(e,t){this.id=e,this.length=t}get deleted(){throw Wh()}mergeWith(e){return!1}write(e,t,n){throw Wh()}integrate(e,t){throw Wh()}}class ab extends ib{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),Tg(e.doc.store,this)}write(e,t){e.writeInfo(0),e.writeLen(this.length-t)}getMissing(e,t){return null}}class sb{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new sb(this.content)}splice(e){throw Wh()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class ub{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new ub(this.len)}splice(e){const t=new ub(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){Vv(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}const lb=(e,t)=>new Kv({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class cb{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new cb(lb(this.doc.guid,this.opts))}splice(e){throw Wh()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class db{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new db(this.embed)}splice(e){throw Wh()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class fb{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new fb(this.key,this.value)}splice(e){throw Wh()}mergeWith(e){return!1}integrate(e,t){const n=t.parent;n._searchMarker=null,n._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}class pb{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new pb(this.arr)}splice(e){const t=new pb(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeString(void 0===t?"undefined":JSON.stringify(t))}}getRef(){return 2}}const hb="development"===Wm("node_env");class mb{constructor(e){this.arr=e,hb&&Nv(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new mb(this.arr)}splice(e){const t=new mb(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeAny(t)}}getRef(){return 8}}class vb{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new vb(this.str)}splice(e){const t=new vb(this.str.slice(e));this.str=this.str.slice(0,e);const n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"�",t.str="�"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}const gb=[e=>new Ny,e=>new jy,e=>new Yy,e=>new tb(e.readKey()),e=>new eb,e=>new rb(e.readKey()),e=>new ob],yb=0,bb=1,Db=2,wb=3,Cb=4,kb=5,Eb=6;class xb{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new xb(this.type._copy())}splice(e){throw Wh()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach((t=>{t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e)})),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach((t=>{for(;null!==t;)t.gc(e,!0),t=t.left})),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const Ab=(e,t)=>{let n,r=t,o=0;do{o>0&&(r=mg(r.client,r.clock+o)),n=Ng(e,r),o=r.clock-n.id.clock,r=n.redone}while(null!==r&&n instanceof Ob);return{item:n,diff:o}},Fb=(e,t)=>{for(;null!==e&&e.keep!==t;)e.keep=t,e=e.parent._item},Sb=(e,t,n)=>{const{client:r,clock:o}=t.id,i=new Ob(mg(r,o+n),t,mg(r,o+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&i.markDeleted(),t.keep&&(i.keep=!0),null!==t.redone&&(i.redone=mg(t.redone.client,t.redone.clock+n)),t.right=i,null!==i.right&&(i.right.left=i),e._mergeStructs.push(i),null!==i.parentSub&&null===i.right&&i.parent._map.set(i.parentSub,i),t.length=n,i},Mb=(e,t)=>function(e){for(var n=0;n<e.length;n++)if(r=e[n],Rv(r.deletions,t))return!0;var r;return!1}(e),Bb=(e,t,n,r,o,i)=>{const a=e.doc,s=a.store,u=a.clientID,l=t.redone;if(null!==l)return jg(e,l);let c,d=t.parent._item,f=null;if(null!==d&&!0===d.deleted){if(null===d.redone&&(!n.has(d)||null===Bb(e,d,n,r,o,i)))return null;for(;null!==d.redone;)d=jg(e,d.redone)}const p=null===d?t.parent:d.content.type;if(null===t.parentSub){for(f=t.left,c=t;null!==f;){let t=f;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:jg(e,t.redone);if(null!==t&&t.parent._item===d){f=t;break}f=f.left}for(;null!==c;){let t=c;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:jg(e,t.redone);if(null!==t&&t.parent._item===d){c=t;break}c=c.right}}else if(c=null,t.right&&!o){for(f=t;null!==f&&null!==f.right&&(f.right.redone||Rv(r,f.right.id)||Mb(i.undoStack,f.right.id)||Mb(i.redoStack,f.right.id));)for(f=f.right;f.redone;)f=jg(e,f.redone);if(f&&null!==f.right)return null}else f=p._map.get(t.parentSub)||null;const h=Og(s,u),m=mg(u,h),v=new Ob(m,f,f&&f.lastId,c,c&&c.id,p,t.parentSub,t.content.copy());return t.redone=m,Fb(v,!0),v.integrate(e,0),v};class Ob extends ib{constructor(e,t,n,r,o,i,a,s){super(e,s.getLength()),this.origin=n,this.left=t,this.right=r,this.rightOrigin=o,this.parent=i,this.parentSub=a,this.redone=null,this.content=s,this.info=this.content.isCountable()?2:0}set marker(e){(8&this.info)>0!==e&&(this.info^=8)}get marker(){return(8&this.info)>0}get keep(){return(1&this.info)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(2&this.info)>0}get deleted(){return(4&this.info)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Og(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Og(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===pg&&this.id.client!==this.parent.client&&this.parent.clock>=Og(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Ig(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=jg(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===ab||this.right&&this.right.constructor===ab)this.parent=null;else if(this.parent){if(this.parent.constructor===pg){const e=Ng(t,this.parent);e.constructor===ab?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===Ob?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Ob&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=Ig(e,e.doc.store,mg(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,n=this.left;if(null!==n)t=n.right;else if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start;const r=new Set,o=new Set;for(;null!==t&&t!==this.right;){if(o.add(t),r.add(t),hg(this.origin,t.origin)){if(t.id.client<this.id.client)n=t,r.clear();else if(hg(this.rightOrigin,t.rightOrigin))break}else{if(null===t.origin||!o.has(Ng(e.doc.store,t.origin)))break;r.has(Ng(e.doc.store,t.origin))||(n=t,r.clear())}t=t.right}this.left=n}if(null!==this.left){const e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Tg(e.doc.store,this),this.content.integrate(e,this),Vg(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new ab(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:mg(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&hg(e.origin,this.lastId)&&this.right===e&&hg(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach((t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))})),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),Vv(e.deleteSet,this.id.client,this.id.clock,this.length),Vg(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw qh();this.content.gc(e),t?((e,t,n)=>{const r=e.clients.get(t.id.client);r[Pg(r,t.id.clock)]=n})(e,this,new ab(this.id,this.length)):this.content=new ub(this.length)}write(e,t){const n=t>0?mg(this.id.client,this.id.clock+t-1):this.origin,r=this.rightOrigin,o=this.parentSub,i=31&this.content.getRef()|(null===n?0:ih)|(null===r?0:oh)|(null===o?0:32);if(e.writeInfo(i),null!==n&&e.writeLeftID(n),null!==r&&e.writeRightID(r),null===n&&null===r){const t=this.parent;if(void 0!==t._item){const n=t._item;if(null===n){const n=vg(t);e.writeParentInfo(!0),e.writeString(n)}else e.writeParentInfo(!1),e.writeLeftID(n.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===pg?(e.writeParentInfo(!1),e.writeLeftID(t)):qh();null!==o&&e.writeString(o)}this.content.write(e,t)}}const Tb=(e,t)=>Pb[31&t](e),Pb=[()=>{qh()},e=>new ub(e.readLen()),e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++){const t=e.readString();"undefined"===t?n.push(void 0):n.push(JSON.parse(t))}return new pb(n)},e=>new sb(e.readBuf()),e=>new vb(e.readString()),e=>new db(e.readJSON()),e=>new fb(e.readKey(),e.readJSON()),e=>new xb(gb[e.readTypeRef()](e)),e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new mb(n)},e=>new cb(lb(e.readString(),e.readAny())),()=>{qh()}];class Nb extends ib{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){qh()}write(e,t){e.writeInfo(10),Mh(e.restEncoder,this.length-t)}getMissing(e,t){return null}}const _b="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},jb="__ $YJS$ __";!0===_b[jb]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),_b[jb]=!0;var Ib=new jn("y-sync"),Rb=new jn("y-undo"),Lb=new jn("yjs-cursor");function Hb(e){return Hb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hb(e)}function Vb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zb(r.key),r)}}function zb(e){var t=function(e){if("object"!=Hb(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Hb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Hb(t)?t:t+""}var $b=function(e){return function(){return function(e,t){return t&&Vb(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._=t}),[{key:"destroy",value:function(){e(this._)}}])}()},Ub=$b(clearTimeout),Gb=function(e,t){return new Ub(setTimeout(t,e))},Wb=($b(clearInterval),$b((function(e){return"undefined"!=typeof requestAnimationFrame&&cancelAnimationFrame(e)})),$b((function(e){return"undefined"!=typeof cancelIdleCallback&&cancelIdleCallback(e)})),null),qb=function(){var e=Wb;Wb=null,e.forEach((function(e,t){var n=t.state.tr,r=Ib.getState(t.state);r&&r.binding&&!r.binding.isDestroyed&&(e.forEach((function(e,t){n.setMeta(t,e)})),t.dispatch(n))}))},Kb=function(e,t,n){if(0===e)return Cg(t,0,-1);for(var r=null===t._first?null:t._first.content.type;null!==r&&t!==r;){if(r instanceof ob){if(r._length>=e)return Cg(r,e,-1);if(e-=r._length,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{do{r=null===r._item?null:r._item.parent,e--}while(r!==t&&null!==r&&null!==r._item&&null===r._item.next);null!==r&&r!==t&&(r=null===r._item?null:r._item.next.content.type)}}else{var o=(n.get(r)||{nodeSize:0}).nodeSize;if(null!==r._first&&e<o)r=r._first.content.type,e--;else{if(1===e&&0===r._length&&o>1)return new yg(null===r._item?null:r._item.id,null===r._item?vg(r):null,null);if(e-=o,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{if(0===e)return r=null===r._item?r:r._item.parent,new yg(null===r._item?null:r._item.id,null===r._item?vg(r):null,null);do{r=r._item.parent,e--}while(r!==t&&null===r._item.next);r!==t&&(r=r._item.next.content.type)}}}if(null===r)throw qh();if(0===e&&r.constructor!==ob&&r!==t)return Zb(r._item.parent,r._item)}return Cg(t,t._length,-1)},Zb=function(e,t){var n=null,r=null;return null===e._item?r=vg(e):n=mg(e._item.id.client,e._item.id.clock),new yg(n,r,t.id)},Jb=function(e,t,n,r){var o=((e,t,n=!0)=>{const r=t.store,o=e.item,i=e.type,a=e.tname,s=e.assoc;let u=null,l=0;if(null!==o){if(Og(r,o.client)<=o.clock)return null;const e=n?Ab(r,o):((e,t)=>{const n=Ng(e,t);return{item:n,diff:t.clock-n.id.clock}})(r,o),t=e.item;if(!(t instanceof Ob))return null;if(u=t.parent,null===u._item||!u._item.deleted){l=t.deleted||!t.countable?0:e.diff+(s>=0?0:1);let n=t.left;for(;null!==n;)!n.deleted&&n.countable&&(l+=n.length),n=n.left}}else{if(null!==a)u=t.get(a);else{if(null===i)throw qh();{if(Og(r,i.client)<=i.clock)return null;const{item:e}=n?Ab(r,i):{item:Ng(r,i)};if(!(e instanceof Ob&&e.content instanceof xb))return null;u=e.content.type}}l=s>=0?u._length:0}return((e,t,n=0)=>new Dg(e,t,n))(u,l,e.assoc)})(n,e);if(null===o||o.type!==t&&!gg(t,o.type._item))return null;var i=o.type,a=0;if(i.constructor===ob)a=o.index;else if(null===i._item||!i._item.deleted){for(var s=i._first,u=0;u<i._length&&u<o.index&&null!==s;){if(!s.deleted){var l=s.content.type;u++,a+=l instanceof ob?l._length:r.get(l).nodeSize}s=s.right}a+=1}for(;i!==t&&null!==i._item;){var c=i._item.parent;if(null===c._item||!c._item.deleted){a+=1;for(var d=c._first;null!==d;){var f=d.content.type;if(f===i)break;d.deleted||(a+=f instanceof ob?f._length:r.get(f).nodeSize),d=d.right}}i=c}return a-1},Xb=function(e,t,n){return e!==t},Yb=function(e){var t=document.createElement("span");t.classList.add("ProseMirror-yjs-cursor"),t.setAttribute("style","border-color: ".concat(e.color));var n=document.createElement("div");n.setAttribute("style","background-color: ".concat(e.color)),n.insertBefore(document.createTextNode(e.name),null);var r=document.createTextNode("⁠"),o=document.createTextNode("⁠");return t.insertBefore(r,null),t.insertBefore(n,null),t.insertBefore(o,null),t},Qb=function(e){return{style:"background-color: ".concat(e.color,"70"),class:"ProseMirror-yjs-selection"}},eD=/^#[0-9a-fA-F]{6}$/,tD=function(e,t,n,r,o){var i=Ib.getState(e),a=i.doc,s=[];return null!=i.snapshot||null!=i.prevSnapshot||0===i.binding.mapping.size?_i.create(e.doc,[]):(t.getStates().forEach((function(t,u){if(n(a.clientID,u,t)&&null!=t.cursor){var l=t.user||{};null==l.color?l.color="#ffa500":eD.test(l.color)||console.warn("A user uses an unsupported color format",l),null==l.name&&(l.name="User: ".concat(u));var c=Jb(a,i.type,bg(t.cursor.anchor),i.binding.mapping),d=Jb(a,i.type,bg(t.cursor.head),i.binding.mapping);if(null!==c&&null!==d){var f=nh(e.doc.content.size-1,0);c=th(c,f),d=th(d,f),s.push(Ti.widget(d,(function(){return r(l,u)}),{key:u+"",side:10}));var p=th(c,d),h=nh(c,d);s.push(Ti.inline(p,h,o(l,u),{inclusiveEnd:!0,inclusiveStart:!1}))}}})),_i.create(e.doc,s))},nD=/[\uD800-\uDBFF]/,rD=/[\uDC00-\uDFFF]/;function oD(e){return oD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oD(e)}function iD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,aD(r.key),r)}}function aD(e){var t=function(e){if("object"!=oD(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=oD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==oD(t)?t:t+""}var sD=function(e,t){return e>>>t|e<<32-t},uD=function(e){return sD(e,2)^sD(e,13)^sD(e,22)},lD=function(e){return sD(e,6)^sD(e,11)^sD(e,25)},cD=function(e){return sD(e,7)^sD(e,18)^e>>>3},dD=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),fD=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),pD=function(){return function(e,t){return t&&iD(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=new ArrayBuffer(320);this._H=new Uint32Array(t,0,8),this._H.set(fD),this._W=new Uint32Array(t,64,64)}),[{key:"_updateHash",value:function(){for(var e=this._H,t=this._W,n=16;n<64;n++)t[n]=(r=t[n-2],(sD(r,17)^sD(r,19)^r>>>10)+t[n-7]+cD(t[n-15])+t[n-16]);for(var r,o,i,a=e[0],s=e[1],u=e[2],l=e[3],c=e[4],d=e[5],f=e[6],p=e[7],h=0;h<64;h++)o=p+lD(c)+(c&d^~c&f)+dD[h]+t[h]>>>0,i=uD(a)+(a&s^a&u^s&u)>>>0,p=f,f=d,d=c,c=l+o>>>0,l=u,u=s,s=a,a=o+i>>>0;e[0]+=a,e[1]+=s,e[2]+=u,e[3]+=l,e[4]+=c,e[5]+=d,e[6]+=f,e[7]+=p}},{key:"digest",value:function(e){for(var t=0;t+56<=e.length;){for(var n=0;n<16&&t+3<e.length;n++)this._W[n]=e[t++]<<24|e[t++]<<16|e[t++]<<8|e[t++];if(t%64!=0){for(this._W.fill(0,n,16);t<e.length;)this._W[n]|=e[t]<<8*(3-t%4),t++;this._W[n]|=ih<<8*(3-t%4)}this._updateHash()}var r=t%64!=0;this._W.fill(0,0,16);for(var o=0;t<e.length;o++)for(var i=3;i>=0&&t<e.length;i--)this._W[o]|=e[t++]<<8*i;r||(this._W[o-(t%4==0?0:1)]|=ih<<8*(3-t%4)),this._W[14]=e.byteLength/536870912,this._W[15]=8*e.byteLength,this._updateHash();for(var a=new Uint8Array(32),s=0;s<this._H.length;s++)for(var u=0;u<4;u++)a[4*s+u]=this._H[s]>>>8*(3-u);return a}}])}();function hD(e){return hD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hD(e)}function mD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function vD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gD(r.key),r)}}function gD(e){var t=function(e){if("object"!=hD(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=hD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==hD(t)?t:t+""}var yD=function(e,t){return void 0===t?!e.deleted:t.sv.has(e.id.client)&&t.sv.get(e.id.client)>e.id.clock&&!Rv(t.ds,e.id)},bD=[{light:"#ecd44433",dark:"#ecd444"}],DD=function(e,t,n){if(!e.has(n)){if(e.size<t.length){var r=$p();e.forEach((function(e){return r.add(e)})),t=t.filter((function(e){return!r.has(e)}))}e.set(n,(o=t)[Qp(wm()*o.length)])}var o;return e.get(n)},wD=function(e,t){return{type:t.selection.jsonID,anchor:Kb(t.selection.anchor,e.type,e.mapping),head:Kb(t.selection.head,e.type,e.mapping)}},CD=function(){return function(e,t){return t&&vD(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var n,r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.prosemirrorView=null,this.mux=(n=!0,function(e,t){if(n){n=!1;try{e()}finally{n=!0}}else void 0!==t&&t()}),this.mapping=o,this.isOMark=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=t.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=function(){null===r.beforeTransactionSelection&&null!=r.prosemirrorView&&(r.beforeTransactionSelection=wD(r,r.prosemirrorView.state))},this.afterAllTransactions=function(){r.beforeTransactionSelection=null},this._domSelectionInView=null}),[{key:"_tr",get:function(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}},{key:"_isLocalCursorInView",value:function(){var e=this;return!!this.prosemirrorView.hasFocus()&&(zm&&null===this._domSelectionInView&&(Gb(0,(function(){e._domSelectionInView=null})),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView)}},{key:"_isDomSelectionInView",value:function(){var e=this.prosemirrorView._root.getSelection();if(null==e||null==e.anchorNode)return!1;var t=this.prosemirrorView._root.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset),0===t.getClientRects().length&&t.startContainer&&t.collapsed&&t.selectNodeContents(t.startContainer);var n=t.getBoundingClientRect(),r=rv.documentElement;return n.bottom>=0&&n.right>=0&&n.left<=(window.innerWidth||r.clientWidth||0)&&n.top<=(window.innerHeight||r.clientHeight||0)}},{key:"renderSnapshot",value:function(e,t){t||(t=xg(zv(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(Ib,{snapshot:e,prevSnapshot:t}))}},{key:"unrenderSnapshot",value:function(){var e=this;this.mapping.clear(),this.mux((function(){var t=e.type.toArray().map((function(t){return ED(t,e.prosemirrorView.state.schema,e)})).filter((function(e){return null!==e})),n=e._tr.replace(0,e.prosemirrorView.state.doc.content.size,new ee(K.from(t),0,0));n.setMeta(Ib,{snapshot:null,prevSnapshot:null}),e.prosemirrorView.dispatch(n)}))}},{key:"_forceRerender",value:function(){var e=this;this.mapping.clear(),this.mux((function(){var t=null!==e.beforeTransactionSelection?null:e.prosemirrorView.state.selection,n=e.type.toArray().map((function(t){return ED(t,e.prosemirrorView.state.schema,e)})).filter((function(e){return null!==e})),r=e._tr.replace(0,e.prosemirrorView.state.doc.content.size,new ee(K.from(n),0,0));if(t){var o=th(nh(t.anchor,0),r.doc.content.size),i=th(nh(t.head,0),r.doc.content.size);r.setSelection(yn.create(r.doc,o,i))}e.prosemirrorView.dispatch(r.setMeta(Ib,{isChangeOrigin:!0,binding:e}))}))}},{key:"_renderSnapshot",value:function(e,t,n){var r=this,o=this.doc,i=this.type;if(e||(e=Ag(this.doc)),e instanceof Uint8Array||t instanceof Uint8Array)if(e instanceof Uint8Array&&t instanceof Uint8Array||qh(),o=new Kv({gc:!1}),og(o,t),t=Ag(o),og(o,e),e=Ag(o),null===i._item){var a=Array.from(this.doc.share.keys()).find((function(e){return r.doc.share.get(e)===r.type}));i=o.getXmlFragment(a)}else{var s,u=null!==(s=o.store.clients.get(i._item.id.client))&&void 0!==s?s:[],l=u[Pg(u,i._item.id.clock)].content;i=l.type}this.mapping.clear(),this.mux((function(){o.transact((function(o){var a=n.permanentUserData;a&&a.dss.forEach((function(e){Iv(o,e,(function(e){}))}));var s=function(e,t){var r="added"===e?a.getUserByClientId(t.client):a.getUserByDeletedId(t);return{user:r,type:e,color:DD(n.colorMapping,n.colors,r)}},u=yy(i,new Eg(t.ds,e.sv)).map((function(n){return!n._item.deleted||yD(n._item,e)||yD(n._item,t)?ED(n,r.prosemirrorView.state.schema,{mapping:new Map,isOMark:new Map},e,t,s):null})).filter((function(e){return null!==e})),l=r._tr.replace(0,r.prosemirrorView.state.doc.content.size,new ee(K.from(u),0,0));r.prosemirrorView.dispatch(l.setMeta(Ib,{isChangeOrigin:!0}))}),Ib)}))}},{key:"_typeChanged",value:function(e,t){var n=this;if(null!=this.prosemirrorView){var r=Ib.getState(this.prosemirrorView.state);0!==e.length&&null==r.snapshot&&null==r.prevSnapshot?this.mux((function(){var e=function(e,t){return n.mapping.delete(t)};Iv(t,t.deleteSet,(function(e){if(e.constructor===Ob){var t=e.content.type;t&&n.mapping.delete(t)}})),t.changed.forEach(e),t.changedParentTypes.forEach(e);var r=n.type.toArray().map((function(e){return kD(e,n.prosemirrorView.state.schema,n)})).filter((function(e){return null!==e})),o=n._tr.replace(0,n.prosemirrorView.state.doc.content.size,new ee(K.from(r),0,0));!function(e,t,n){if(null!==t&&null!==t.anchor&&null!==t.head)if("all"===t.type)e.setSelection(new Cn(e.doc));else if("node"===t.type){var r=Jb(n.doc,n.type,t.anchor,n.mapping);e.setSelection(Dn.create(e.doc,r))}else{var o=Jb(n.doc,n.type,t.anchor,n.mapping),i=Jb(n.doc,n.type,t.head,n.mapping);null!==o&&null!==i&&e.setSelection(yn.between(e.doc.resolve(o),e.doc.resolve(i)))}}(o,n.beforeTransactionSelection,n),o=o.setMeta(Ib,{isChangeOrigin:!0,isUndoRedoOperation:t.origin instanceof Kg}),null!==n.beforeTransactionSelection&&n._isLocalCursorInView()&&o.scrollIntoView(),n.prosemirrorView.dispatch(o)})):this.renderSnapshot(r.snapshot,r.prevSnapshot)}}},{key:"_prosemirrorChanged",value:function(e){var t=this;this.doc.transact((function(){LD(t.doc,t.type,e,t),t.beforeTransactionSelection=wD(t,t.prosemirrorView.state)}),Ib)}},{key:"initView",value:function(e){null!=this.prosemirrorView&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}},{key:"destroy",value:function(){null!=this.prosemirrorView&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}])}(),kD=function(e,t,n,r,o,i){var a=n.mapping.get(e);if(void 0===a){if(e instanceof tb)return ED(e,t,n,r,o,i);throw Wh()}return a},ED=function(e,t,n,r,o,i){var a=[],s=function(e){if(e instanceof tb){var s=kD(e,t,n,r,o,i);null!==s&&a.push(s)}else{var u,l=null===(u=e._item.right)||void 0===u||null===(u=u.content)||void 0===u?void 0:u.type;l instanceof Yy&&!l._item.deleted&&l._item.id.client===l.doc.clientID&&(e.applyDelta([{retain:e.length}].concat(function(e){return function(e){if(Array.isArray(e))return mD(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return mD(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mD(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(l.toDelta()))),l.doc.transact((function(e){l._item.delete(e)})));var c=xD(e,t,n,r,o,i);null!==c&&c.forEach((function(e){null!==e&&a.push(e)}))}};void 0===r||void 0===o?e.toArray().forEach(s):yy(e,new Eg(o.ds,r.sv)).forEach(s);try{var u=e.getAttributes(r);void 0!==r&&(yD(e._item,r)?yD(e._item,o)||(u.ychange=i?i("added",e._item.id):{type:"added"}):u.ychange=i?i("removed",e._item.id):{type:"removed"});var l=t.node(e.nodeName,u,a);return n.mapping.set(e,l),l}catch(t){return e.doc.transact((function(t){e._item.delete(t)}),Ib),n.mapping.delete(e),null}},xD=function(e,t,n,r,o,i){var a=[],s=e.toDelta(r,o,i);try{for(var u=0;u<s.length;u++){var l=s[u];a.push(t.text(l.insert,ID(l.attributes,t)))}}catch(t){return e.doc.transact((function(t){e._item.delete(t)}),Ib),null}return a},AD=function(e,t){return e instanceof Array?function(e,t){var n=new ob,r=e.map((function(e){return{insert:e.text,attributes:RD(e.marks,t)}}));return n.applyDelta(r),t.mapping.set(n,e),n}(e,t):function(e,t){var n=new tb(e.type.name);for(var r in e.attrs){var o=e.attrs[r];null!==o&&"ychange"!==r&&n.setAttribute(r,o)}return n.insert(0,MD(e).map((function(e){return AD(e,t)}))),t.mapping.set(n,e),n}(e,t)},FD=function(e){return"object"===hD(e)&&null!==e},SD=function(e,t){for(var n=Object.keys(e).filter((function(t){return null!==e[t]})),r=n.length===(null==t?0:Object.keys(t).filter((function(e){return null!==t[e]})).length),o=0;o<n.length&&r;o++){var i=n[o],a=e[i],s=t[i];r="ychange"===i||a===s||FD(a)&&FD(s)&&SD(a,s)}return r},MD=function(e){for(var t=e.content.content,n=[],r=0;r<t.length;r++){var o=t[r];if(o.isText){for(var i=[],a=t[r];r<t.length&&a.isText;a=t[++r])i.push(a);r--,n.push(i)}else n.push(o)}return n},BD=function(e,t){var n=e.toDelta();return n.length===t.length&&n.every((function(e,n){return e.insert===t[n].text&&Bv(e.attributes||{}).length===t[n].marks.length&&Tv(e.attributes,(function(e,r){var o,i=jD(r),a=t[n].marks;return SD(e,null===(o=a.find((function(e){return e.type.name===i})))||void 0===o?void 0:o.attrs)}))}))},OD=function(e,t){if(e instanceof tb&&!(t instanceof Array)&&HD(e,t)){var n=MD(t);return e._length===n.length&&SD(e.getAttributes(),t.attrs)&&e.toArray().every((function(e,t){return OD(e,n[t])}))}return e instanceof ob&&t instanceof Array&&BD(e,t)},TD=function(e,t){return e===t||e instanceof Array&&t instanceof Array&&e.length===t.length&&e.every((function(e,n){return t[n]===e}))},PD=function(e,t,n){for(var r=e.toArray(),o=MD(t),i=o.length,a=r.length,s=th(a,i),u=0,l=0,c=!1;u<s;u++){var d=r[u],f=o[u];if(TD(n.mapping.get(d),f))c=!0;else if(!OD(d,f))break}for(;u+l<s;l++){var p=r[a-l-1],h=o[i-l-1];if(TD(n.mapping.get(p),h))c=!0;else if(!OD(p,h))break}return{equalityFactor:u+l,foundMappedChild:c}},ND=function(e,t,n){n.mapping.set(e,t);var r=function(e){for(var t="",n=e._start,r={};null!==n;)n.deleted||(n.countable&&n.content instanceof vb?t+=n.content.str:n.content instanceof fb&&(r[n.content.key]=null)),n=n.right;return{str:t,nAttrs:r}}(e),o=r.nAttrs,i=r.str,a=t.map((function(e){return{insert:e.text,attributes:Object.assign({},o,RD(e.marks,n))}})),s=function(e,t){for(var n=0,r=0;n<e.length&&n<t.length&&e[n]===t[n];)n++;for(n>0&&nD.test(e[n-1])&&n--;r+n<e.length&&r+n<t.length&&e[e.length-r-1]===t[t.length-r-1];)r++;return r>0&&rD.test(e[e.length-r])&&r--,{index:n,remove:e.length-n-r,insert:t.slice(n,t.length-r)}}(i,a.map((function(e){return e.insert})).join("")),u=s.insert,l=s.remove,c=s.index;e.delete(c,l),e.insert(c,u),e.applyDelta(a.map((function(e){return{retain:e.insert.length,attributes:e.attributes}})))},_D=/(.*)(--[a-zA-Z0-9+/=]{8})$/,jD=function(e){var t,n;return null!==(t=null===(n=_D.exec(e))||void 0===n?void 0:n[1])&&void 0!==t?t:e},ID=function(e,t){var n=[];for(var r in e)n.push(t.mark(jD(r),e[r]));return n},RD=function(e,t){var n={};return e.forEach((function(e){if("ychange"!==e.type.name){var r=zp(t.isOMark,e.type,(function(){return!e.type.excludes(e.type)}));n[r?"".concat(e.type.name,"--").concat((o=e.toJSON(),Zm(function(e){for(var t=6;t<e.length;t++)e[t%6]=e[t%6]^e[t];return e.slice(0,6)}((i=Jm(o),(new pD).digest(i)))))):e.type.name]=e.attrs}var o,i})),n},LD=function(e,t,n,r){if(t instanceof tb&&t.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.mapping.set(t,n),t instanceof tb){var o=t.getAttributes(),i=n.attrs;for(var a in i)null!==i[a]?o[a]!==i[a]&&"ychange"!==a&&t.setAttribute(a,i[a]):t.removeAttribute(a);for(var s in o)void 0===i[s]&&t.removeAttribute(s)}for(var u=MD(n),l=u.length,c=t.toArray(),d=c.length,f=th(l,d),p=0,h=0;p<f;p++){var m=c[p],v=u[p];if(!TD(r.mapping.get(m),v)){if(!OD(m,v))break;r.mapping.set(m,v)}}for(;h+p+1<f;h++){var g=c[d-h-1],y=u[l-h-1];if(!TD(r.mapping.get(g),y)){if(!OD(g,y))break;r.mapping.set(g,y)}}e.transact((function(){for(;d-p-h>0&&l-p-h>0;){var n=c[p],o=u[p],i=c[d-h-1],a=u[l-h-1];if(n instanceof ob&&o instanceof Array)BD(n,o)||ND(n,o,r),p+=1;else{var s=n instanceof tb&&HD(n,o),f=i instanceof tb&&HD(i,a);if(s&&f){var m=PD(n,o,r),v=PD(i,a,r);m.foundMappedChild&&!v.foundMappedChild?f=!1:!m.foundMappedChild&&v.foundMappedChild||m.equalityFactor<v.equalityFactor?s=!1:f=!1}s?(LD(e,n,o,r),p+=1):f?(LD(e,i,a,r),h+=1):(r.mapping.delete(t.get(p)),t.delete(p,1),t.insert(p,[AD(o,r)]),p+=1)}}var g=d-p-h;if(1===d&&0===l&&c[0]instanceof ob?(r.mapping.delete(c[0]),c[0].delete(0,c[0].length)):g>0&&(t.slice(p,p+g).forEach((function(e){return r.mapping.delete(e)})),t.delete(p,g)),p+h<l){for(var y=[],b=p;b<l-h;b++)y.push(AD(u[b],r));t.insert(p,y)}}),Ib)},HD=function(e,t){return!(t instanceof Array)&&e.nodeName===t.type.name},VD=function(e,t){var n;return null==t?null===(n=Rb.getState(e))||void 0===n||null===(n=n.undoManager)||void 0===n?void 0:n.canUndo():function(e){var t;return null!=(null===(t=Rb.getState(e))||void 0===t||null===(t=t.undoManager)||void 0===t?void 0:t.undo())}(e)},zD=function(e,t){var n;return null==t?null===(n=Rb.getState(e))||void 0===n||null===(n=n.undoManager)||void 0===n?void 0:n.canRedo():function(e){var t;return null!=(null===(t=Rb.getState(e))||void 0===t||null===(t=t.undoManager)||void 0===t?void 0:t.redo())}(e)},$D=new Set(["paragraph"]);function UD(e){return UD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UD(e)}function GD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,WD(r.key),r)}}function WD(e){var t=function(e){if("object"!=UD(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=UD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==UD(t)?t:t+""}function qD(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Pn({view:function(t){return new KD(t,e)}})}var KD=function(){return function(e,t){return t&&GD(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n){var r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(r=n.width)&&void 0!==r?r:1,this.color=!1===n.color?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map((function(e){var n=function(t){o[e](t)};return t.dom.addEventListener(e,n),{name:e,handler:n}}))}),[{key:"destroy",value:function(){var e=this;this.handlers.forEach((function(t){var n=t.name,r=t.handler;return e.editorView.dom.removeEventListener(n,r)}))}},{key:"update",value:function(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}},{key:"setCursor",value:function(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}},{key:"updateOverlay",value:function(){var e,t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r=this.editorView.dom,o=r.getBoundingClientRect(),i=o.width/r.offsetWidth,a=o.height/r.offsetHeight;if(n){var s=t.nodeBefore,u=t.nodeAfter;if(s||u){var l=this.editorView.nodeDOM(this.cursorPos-(s?s.nodeSize:0));if(l){var c=l.getBoundingClientRect(),d=s?c.bottom:c.top;s&&u&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);var f=this.width/2*a;e={left:c.left,right:c.right,top:d-f,bottom:d+f}}}}if(!e){var p=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*i;e={left:p.left-h,right:p.left+h,top:p.top,bottom:p.bottom}}var m,v,g=this.editorView.dom.offsetParent;if(this.element||(this.element=g.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!g||g==document.body&&"static"==getComputedStyle(g).position)m=-pageXOffset,v=-pageYOffset;else{var y=g.getBoundingClientRect(),b=y.width/g.offsetWidth,D=y.height/g.offsetHeight;m=y.left-g.scrollLeft*b,v=y.top-g.scrollTop*D}this.element.style.left=(e.left-m)/i+"px",this.element.style.top=(e.top-v)/a+"px",this.element.style.width=(e.right-e.left)/i+"px",this.element.style.height=(e.bottom-e.top)/a+"px"}},{key:"scheduleRemoval",value:function(e){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return t.setCursor(null)}),e)}},{key:"dragover",value:function(e){if(this.editorView.editable){var t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=n&&n.type.spec.disableDropCursor,o="function"==typeof r?r(this.editorView,t,e):r;if(t&&!o){var i=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){var a=Lt(this.editorView.state.doc,i,this.editorView.dragging.slice);null!=a&&(i=a)}this.setCursor(i),this.scheduleRemoval(5e3)}}}},{key:"dragend",value:function(){this.scheduleRemoval(20)}},{key:"drop",value:function(){this.scheduleRemoval(20)}},{key:"dragleave",value:function(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}])}(),ZD={slash_menu:{heading:{title:"Heading 1",subtext:"Top-level heading",aliases:["h","heading1","h1"],group:"Headings"},heading_2:{title:"Heading 2",subtext:"Key section heading",aliases:["h2","heading2","subheading"],group:"Headings"},heading_3:{title:"Heading 3",subtext:"Subsection and group heading",aliases:["h3","heading3","subheading"],group:"Headings"},quote:{title:"Quote",subtext:"Quote or excerpt",aliases:["quotation","blockquote","bq"],group:"Basic blocks"},numbered_list:{title:"Numbered List",subtext:"List with ordered items",aliases:["ol","li","list","numberedlist","numbered list"],group:"Basic blocks"},bullet_list:{title:"Bullet List",subtext:"List with unordered items",aliases:["ul","li","list","bulletlist","bullet list"],group:"Basic blocks"},check_list:{title:"Check List",subtext:"List with checkboxes",aliases:["ul","li","list","checklist","check list","checked list","checkbox"],group:"Basic blocks"},paragraph:{title:"Paragraph",subtext:"The body of your document",aliases:["p","paragraph"],group:"Basic blocks"},code_block:{title:"Code Block",subtext:"Code block with syntax highlighting",aliases:["code","pre"],group:"Basic blocks"},page_break:{title:"Page Break",subtext:"Page separator",aliases:["page","break","separator"],group:"Basic blocks"},table:{title:"Table",subtext:"Table with editable cells",aliases:["table"],group:"Advanced"},image:{title:"Image",subtext:"Resizable image with caption",aliases:["image","imageUpload","upload","img","picture","media","url"],group:"Media"},video:{title:"Video",subtext:"Resizable video with caption",aliases:["video","videoUpload","upload","mp4","film","media","url"],group:"Media"},audio:{title:"Audio",subtext:"Embedded audio with caption",aliases:["audio","audioUpload","upload","mp3","sound","media","url"],group:"Media"},file:{title:"File",subtext:"Embedded file",aliases:["file","upload","embed","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Search for and insert an emoji",aliases:["emoji","emote","emotion","face"],group:"Others"}},placeholders:{default:"Enter text or type '/' for commands",heading:"Heading",bulletListItem:"List",numberedListItem:"List",checkListItem:"List",emptyDocument:void 0,new_comment:"Write a comment...",edit_comment:"Edit comment...",comment_reply:"Add comment..."},file_blocks:{image:{add_button_text:"Add image"},video:{add_button_text:"Add video"},audio:{add_button_text:"Add audio"},file:{add_button_text:"Add file"}},side_menu:{add_block_label:"Add block",drag_handle_label:"Open block menu"},drag_handle:{delete_menuitem:"Delete",colors_menuitem:"Colors",header_row_menuitem:"Header row",header_column_menuitem:"Header column"},table_handle:{delete_column_menuitem:"Delete column",delete_row_menuitem:"Delete row",add_left_menuitem:"Add column left",add_right_menuitem:"Add column right",add_above_menuitem:"Add row above",add_below_menuitem:"Add row below",split_cell_menuitem:"Split cell",merge_cells_menuitem:"Merge cells",background_color_menuitem:"Background color"},suggestion_menu:{no_items_title:"No items found"},color_picker:{text_title:"Text",background_title:"Background",colors:{default:"Default",gray:"Gray",brown:"Brown",red:"Red",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"}},formatting_toolbar:{bold:{tooltip:"Bold",secondary_tooltip:"Mod+B"},italic:{tooltip:"Italic",secondary_tooltip:"Mod+I"},underline:{tooltip:"Underline",secondary_tooltip:"Mod+U"},strike:{tooltip:"Strike",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Colors"},link:{tooltip:"Create link",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Edit caption",input_placeholder:"Edit caption"},file_replace:{tooltip:{image:"Replace image",video:"Replace video",audio:"Replace audio",file:"Replace file"}},file_rename:{tooltip:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"},input_placeholder:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"}},file_download:{tooltip:{image:"Download image",video:"Download video",audio:"Download audio",file:"Download file"}},file_delete:{tooltip:{image:"Delete image",video:"Delete video",audio:"Delete audio",file:"Delete file"}},file_preview_toggle:{tooltip:"Toggle preview"},nest:{tooltip:"Nest block",secondary_tooltip:"Tab"},unnest:{tooltip:"Unnest block",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Align text left"},align_center:{tooltip:"Align text center"},align_right:{tooltip:"Align text right"},align_justify:{tooltip:"Justify text"},table_cell_merge:{tooltip:"Merge cells"},comment:{tooltip:"Add comment"}},file_panel:{upload:{title:"Upload",file_placeholder:{image:"Upload image",video:"Upload video",audio:"Upload audio",file:"Upload file"},upload_error:"Error: Upload failed"},embed:{title:"Embed",embed_button:{image:"Embed image",video:"Embed video",audio:"Embed audio",file:"Embed file"},url_placeholder:"Enter URL"}},link_toolbar:{delete:{tooltip:"Remove link"},edit:{text:"Edit link",tooltip:"Edit"},open:{tooltip:"Open in new tab"},form:{title_placeholder:"Edit title",url_placeholder:"Edit URL"}},comments:{actions:{add_reaction:"Add reaction",resolve:"Resolve",edit_comment:"Edit comment",delete_comment:"Delete comment",more_actions:"More actions"},reactions:{reacted_by:"Reacted by"},sidebar:{marked_as_resolved:"Marked as resolved",more_replies:function(e){return"".concat(e," more replies")}}},generic:{ctrl_shortcut:"Ctrl"}},JD=["data-test"],XD=["start"],YD=["default","emptyDocument"];function QD(){QD=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),s=new B(r||[]);return o(a,"_invoke",{value:A(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function g(){}function y(){}function b(){}var D={};l(D,a,(function(){return this}));var w=Object.getPrototypeOf,C=w&&w(w(O([])));C&&C!==n&&r.call(C,a)&&(D=C);var k=b.prototype=g.prototype=Object.create(D);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,s){var u=d(e[o],e,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==Cw(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(c).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,n,r){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=F(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function F(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,F(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Cw(t)+" is not iterable")}return y.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},E(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(k),l(k,u,"Generator"),l(k,a,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,B.prototype={constructor:B,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;M(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function ew(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function tw(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ew(i,r,o,a,s,"next",e)}function s(e){ew(i,r,o,a,s,"throw",e)}a(void 0)}))}}function nw(){return nw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=gw(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},nw.apply(null,arguments)}function rw(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=aw(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function ow(e){return function(e){if(Array.isArray(e))return sw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||aw(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||aw(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aw(e,t){if(e){if("string"==typeof e)return sw(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sw(e,t):void 0}}function sw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function uw(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function lw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ww(r.key),r)}}function cw(e,t,n){return t&&lw(e.prototype,t),n&&lw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function dw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fw(e,t,n){return t=gw(t),function(e,t){if(t&&("object"==Cw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,mw()?Reflect.construct(t,n||[],gw(e).constructor):t.apply(e,n))}function pw(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vw(e,t)}function hw(e){var t="function"==typeof Map?new Map:void 0;return hw=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(mw())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&vw(o,n.prototype),o}(e,arguments,gw(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),vw(n,e)},hw(e)}function mw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mw=function(){return!!e})()}function vw(e,t){return vw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vw(e,t)}function gw(e){return gw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gw(e)}function yw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yw(Object(n),!0).forEach((function(t){Dw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dw(e,t,n){return(t=ww(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ww(e){var t=function(e){if("object"!=Cw(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Cw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Cw(t)?t:t+""}function Cw(e){return Cw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cw(e)}var kw=Object.defineProperty,Ew=function(e,t,n){return function(e,t,n){return t in e?kw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=Cw(t)?t+"":t,n)};var xw=Hs.create({name:"uniqueID",priority:1e4,addOptions:function(){return{attributeName:"id",types:[],setIdAttribute:!1,generateID:function(){if(("undefined"==typeof window?"undefined":Cw(window))<"u"&&window.__TEST_OPTIONS){var e=window.__TEST_OPTIONS;return void 0===e.mockID?e.mockID=0:e.mockID++,e.mockID.toString()}return Zu()},filterTransaction:null}},addGlobalAttributes:function(){var e=this;return[{types:this.options.types,attributes:Dw({},this.options.attributeName,{default:null,parseHTML:function(t){return t.getAttribute("data-".concat(e.options.attributeName))},renderHTML:function(t){var n=Dw({},"data-".concat(e.options.attributeName),t[e.options.attributeName]);return e.options.setIdAttribute?bw(bw({},n),{},{id:t[e.options.attributeName]}):n}})}]},addProseMirrorPlugins:function(){var e=this,t=null,n=!1;return[new Pn({key:new jn("uniqueID"),appendTransaction:function(t,n,r){var o=t.some((function(e){return e.docChanged}))&&!n.doc.eq(r.doc),i=e.options.filterTransaction&&t.some((function(t){var n,r;return!(null!==(r=(n=e.options).filterTransaction)&&void 0!==r&&r.call(n,t))}));if(o&&!i){var a=r.tr,s=e.options,u=s.types,l=s.attributeName,c=s.generateID,d=cu(n.doc,t),f=d.mapping;return mu(d).forEach((function(e){var t=e.newRange,o=fu(r.doc,t,(function(e){return u.includes(e.type.name)})),i=function(e){var t=e.filter((function(t,n){return e.indexOf(t)!==n}));return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify,n={};return e.filter((function(e){var r=t(e);return!Object.prototype.hasOwnProperty.call(n,r)&&(n[r]=!0)}))}(t)}(o.map((function(e){return e.node.attrs[l]})).filter((function(e){return null!==e})));o.forEach((function(e){var t,o=e.node,s=e.pos,u=null===(t=a.doc.nodeAt(s))||void 0===t?void 0:t.attrs[l];if(null!==u)f.invert().mapResult(s).deleted&&i.includes(u)&&a.setNodeMarkup(s,void 0,bw(bw({},o.attrs),{},Dw({},l,c())));else{var d=n.doc.type.createAndFill().content;if(null===n.doc.content.findDiffStart(d)){var p=JSON.parse(JSON.stringify(r.doc.toJSON()));if(p.content[0].content[0].attrs.id="initialBlockId",JSON.stringify(p.content)===JSON.stringify(d.toJSON()))return void a.setNodeMarkup(s,void 0,bw(bw({},o.attrs),{},Dw({},l,"initialBlockId")))}a.setNodeMarkup(s,void 0,bw(bw({},o.attrs),{},Dw({},l,c())))}}))})),a.steps.length?a:void 0}},view:function(e){var n=function(n){var r;t=null!==(r=e.dom.parentElement)&&void 0!==r&&r.contains(n.target)?e.dom.parentElement:null};return window.addEventListener("dragstart",n),{destroy:function(){window.removeEventListener("dragstart",n)}}},props:{handleDOMEvents:{drop:function(e,r){var o;return n=t!==e.dom.parentElement||"copy"===(null===(o=r.dataTransfer)||void 0===o?void 0:o.effectAllowed),t=null,!1},paste:function(){return n=!0,!1}},transformPasted:function(t){if(!n)return t;var r=e.options,o=r.types,i=r.attributeName,a=function(e){var t=[];return e.forEach((function(e){if(e.isText)t.push(e);else if(o.includes(e.type.name)){var n=e.type.create(bw(bw({},e.attrs),{},Dw({},i,null)),a(e.content),e.marks);t.push(n)}else t.push(e.copy(a(e.content)))})),K.from(t)};return n=!1,new ee(a(t.content),t.openStart,t.openEnd)}}})]}});function Aw(e){return"link"===e.type}function Fw(e){return"string"!=typeof e&&"link"===e.type}function Sw(e){return"string"!=typeof e&&"text"===e.type}function Mw(e){var t,n,r,o,i,a,s,u,l,c;return Ow(e)?bw({},e):Bw(e)?{type:"tableCell",content:[].concat(e.content),props:{backgroundColor:null!==(t=null==(a=e.props)?void 0:a.backgroundColor)&&void 0!==t?t:"default",textColor:null!==(n=null==(s=e.props)?void 0:s.textColor)&&void 0!==n?n:"default",textAlignment:null!==(r=null==(u=e.props)?void 0:u.textAlignment)&&void 0!==r?r:"left",colspan:null!==(o=null==(l=e.props)?void 0:l.colspan)&&void 0!==o?o:1,rowspan:null!==(i=null==(c=e.props)?void 0:c.rowspan)&&void 0!==i?i:1}}:{type:"tableCell",content:[].concat(e),props:{backgroundColor:"default",textColor:"default",textAlignment:"left",colspan:1,rowspan:1}}}function Bw(e){return null!=e&&"string"!=typeof e&&!Array.isArray(e)&&"tableCell"===e.type}function Ow(e){return Bw(e)&&void 0!==e.props&&void 0!==e.content}function Tw(e){var t;return Ow(e)&&null!==(t=e.props.colspan)&&void 0!==t?t:1}function Pw(e){var t;return Ow(e)&&null!==(t=e.props.rowspan)&&void 0!==t?t:1}var Nw=function(e){function t(e){return dw(this,t),fw(this,t,["Unreachable case: ".concat(e)])}return pw(t,e),cw(t)}(hw(Error));function _w(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(e["data-test"],uw(e,JD));if(Object.keys(n).length>0&&t)throw new Error("Object must be empty "+JSON.stringify(e))}function jw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Ctrl";return("undefined"==typeof navigator?"undefined":Cw(navigator))<"u"&&(/Mac/.test(navigator.platform)||/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent))?e.replace("Mod","⌘"):e.replace("Mod",t)}function Iw(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}var Rw=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)};function Lw(e,t,n,r){var o=document.createElement("div");o.className=Iw("bn-block-content",n.class),o.setAttribute("data-content-type",e);for(var i=0,a=Object.entries(n);i<a.length;i++){var s=iw(a[i],2),u=s[0],l=s[1];"class"!==u&&o.setAttribute(u,l)}var c=document.createElement(t);c.className=Iw("bn-inline-content",r.class);for(var d=0,f=Object.entries(r);d<f.length;d++){var p=iw(f[d],2),h=p[0],m=p[1];"class"!==h&&c.setAttribute(h,m)}return o.appendChild(c),{dom:o,contentDOM:c}}var Hw=function(e,t){var n=IC(e,t.pmSchema);"blockContainer"===n.type.name&&(n=n.firstChild);var r=t.pmSchema.nodes[n.type.name].spec.toDOM;if(void 0===r)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");var o=r(n);if("object"!=Cw(o)||!("dom"in o))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap node's `renderHTML` function does not return an object with the `dom` property.");return o},Vw={backgroundColor:{default:"default"},textColor:{default:"default"},textAlignment:{default:"left",values:["left","center","right","justify"]}},zw=["backgroundColor","textColor"];function $w(e){return"data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Uw(e){var t=e.split("/");return t.length&&""!==t[t.length-1]?t[t.length-1]:e}function Gw(e){var t={};return Object.entries(e).filter((function(e){var t=iw(e,2),n=t[0];return t[1],!zw.includes(n)})).forEach((function(e){var n=iw(e,2),r=n[0],o=n[1];t[r]={default:o.default,keepOnSplit:!0,parseHTML:function(e){var t=e.getAttribute($w(r));if(null===t)return null;if(void 0===o.default&&"boolean"===o.type||void 0!==o.default&&"boolean"==typeof o.default)return"true"===t||"false"!==t&&null;if(void 0===o.default&&"number"===o.type||void 0!==o.default&&"number"==typeof o.default){var n=parseFloat(t);return!Number.isNaN(n)&&Number.isFinite(n)?n:null}return t},renderHTML:function(e){return e[r]!==o.default?Dw({},$w(r),e[r]):{}}}})),t}function Ww(e,t,n,r){if("boolean"==typeof e)throw new Error("Cannot find node position as getPos is a boolean, not a function.");var o=e(),i=n.state.doc.resolve(o).node().attrs.id;if(!i)throw new Error("Block doesn't have id");var a=t.getBlock(i);if(a.type!==r)throw new Error("Block type does not match");return a}function qw(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5?arguments[5]:void 0,a=document.createElement("div");if(void 0!==i)for(var s=0,u=Object.entries(i);s<u.length;s++){var l=iw(u[s],2),c=l[0],d=l[1];"class"!==c&&a.setAttribute(c,d)}a.className=Iw("bn-block-content",(null==i?void 0:i.class)||""),a.setAttribute("data-content-type",t);for(var f=0,p=Object.entries(n);f<p.length;f++){var h=iw(p[f],2),m=h[0],v=h[1],g=r[m].default;!zw.includes(m)&&v!==g&&a.setAttribute($w(m),v)}return o&&a.setAttribute("data-file-block",""),a.appendChild(e.dom),void 0!==e.contentDOM&&(e.contentDOM.className=Iw("bn-inline-content",e.contentDOM.className)),bw(bw({},e),{},{dom:a})}function Kw(e){return Lu.create(e)}function Zw(e,t){return{config:e,implementation:t}}function Jw(e,t,n){return Zw({type:e.name,content:"inline*"===e.config.content?"inline":"tableRow+"===e.config.content?"table":"none",propSchema:t},{node:e,requiredExtensions:n,toInternalHTML:Hw,toExternalHTML:Hw})}function Xw(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=iw(e,2);return[t[0],t[1].config]})))}function Yw(e,t){e.stopEvent=function(e){return"mousedown"===e.type&&setTimeout((function(){t.view.dom.blur()}),10),!0}}function Qw(e,t){var n=[{tag:"[data-content-type="+e.type+"]",contentElement:".bn-inline-content"}];return t&&n.push({tag:"*",getAttrs:function(e){if("string"==typeof e)return!1;var n=null==t?void 0:t(e);return void 0!==n&&n}}),n}function eC(e,t){var n,r=Kw({name:e.type,content:"inline"===e.content?"inline*":"",group:"blockContent",selectable:null===(n=e.isSelectable)||void 0===n||n,isolating:!0,addAttributes:function(){return Gw(e.propSchema)},parseHTML:function(){return Qw(e,t.parse)},renderHTML:function(t){var n=t.HTMLAttributes,r=document.createElement("div");return qw({dom:r,contentDOM:"inline"===e.content?r:void 0},e.type,{},e.propSchema,e.isFileBlock,n)},addNodeView:function(){var n=this;return function(r){var o,i=r.getPos,a=n.options.editor,s=Ww(i,a,n.editor,e.type),u=(null==(o=n.options.domAttributes)?void 0:o.blockContent)||{},l=qw(t.render(s,a),s.type,s.props,e.propSchema,u);return!1===e.isSelectable&&Yw(l,n.editor),l}}});if(r.name!==e.type)throw new Error("Node name does not match block type. This is a bug in BlockNote.");return Zw(e,{node:r,toInternalHTML:function(n,o){var i,a=(null==(i=r.options.domAttributes)?void 0:i.blockContent)||{};return qw(t.render(n,o),n.type,n.props,e.propSchema,e.isFileBlock,a)},toExternalHTML:function(n,o){var i,a,s=(null==(i=r.options.domAttributes)?void 0:i.blockContent)||{},u=null==(a=t.toExternalHTML)?void 0:a.call(t,n,o);return void 0===u&&(u=t.render(n,o)),qw(u,n.type,n.props,e.propSchema,s)}})}function tC(e,t){var n=e.resolve(t);if(n.nodeAfter&&n.nodeAfter.type.isInGroup("bnBlock"))return{posBeforeNode:n.pos,node:n.nodeAfter};for(var r=n.depth,o=n.node(r);r>0;){if(o.type.isInGroup("bnBlock"))return{posBeforeNode:n.before(r),node:o};r--,o=n.node(r)}var i=[];e.descendants((function(e,t){e.type.isInGroup("bnBlock")&&i.push(t)})),console.warn("Position ".concat(t," is not within a blockContainer node."));var a=e.resolve(i.find((function(e){return e>=t}))||i[i.length-1]);return{posBeforeNode:a.pos,node:a.nodeAfter}}function nC(e,t){if(!e.type.isInGroup("bnBlock"))throw new Error("Attempted to get bnBlock node at position but found node of different type ".concat(e.type.name));var n=e,r=t,o=r+n.nodeSize,i={node:n,beforePos:r,afterPos:o};if("blockContainer"===n.type.name){var a,s;if(n.forEach((function(e,t){if("blockContent"===e.type.spec.group){var n=e,o=r+t+1,i=o+e.nodeSize;a={node:n,beforePos:o,afterPos:i}}else if("blockGroup"===e.type.name){var u=e,l=r+t+1,c=l+e.nodeSize;s={node:u,beforePos:l,afterPos:c}}})),!a)throw new Error("blockContainer node does not contain a blockContent node in its children: ".concat(n));return{isBlockContainer:!0,bnBlock:i,blockContent:a,childContainer:s,blockNoteType:a.node.type.name}}if(!i.node.type.isInGroup("childContainer"))throw new Error("bnBlock node is not in the childContainer group: ".concat(i.node));return{isBlockContainer:!1,bnBlock:i,childContainer:i,blockNoteType:i.node.type.name}}function rC(e){return nC(e.node,e.posBeforeNode)}function oC(e){if(!e.nodeAfter)throw new Error("Attempted to get blockContainer node at position ".concat(e.pos," but a node at this position does not exist"));return nC(e.nodeAfter,e.pos)}function iC(e){return rC(tC(e.doc,e.selection.anchor))}function aC(e){return rC(tC(e.doc,e.selection.anchor))}function sC(e){return"doc"in e?e.doc.type.schema:e.type.schema}function uC(e){return e.cached.blockNoteEditor}function lC(e){return uC(e).schema}function cC(e){return lC(e).blockSchema}function dC(e){return lC(e).inlineContentSchema}function fC(e){return lC(e).styleSchema}function pC(e){return uC(e).blockCache}function hC(e,t,n){var r,o,i={type:"tableContent",columnWidths:[],headerRows:void 0,headerCols:void 0,rows:[]},a=[];e.content.forEach((function(e,r,o){var s={cells:[]};0===o&&e.content.forEach((function(e){var t,n,r=e.attrs.colwidth;null==r&&(r=new Array(null!==(t=e.attrs.colspan)&&void 0!==t?t:1).fill(void 0)),(n=i.columnWidths).push.apply(n,ow(r))})),s.cells=e.content.content.map((function(e,r){return a[o]||(a[o]=[]),a[o][r]="tableHeader"===e.type.name,{type:"tableCell",content:e.content.content.map((function(e){return mC(e,t,n)})).reduce((function(e,t){if(!e.length)return t;var n=e[e.length-1],r=t[0];return r&&Sw(n)&&Sw(r)&&JSON.stringify(n.styles)===JSON.stringify(r.styles)?(n.text+="\n"+r.text,e.push.apply(e,ow(t.slice(1))),e):(e.push.apply(e,ow(t)),e)}),[]),props:{colspan:e.attrs.colspan,rowspan:e.attrs.rowspan,backgroundColor:e.attrs.backgroundColor,textColor:e.attrs.textColor,textAlignment:e.attrs.textAlignment}}})),i.rows.push(s)}));for(var s=0;s<a.length;s++){var u;null!=(r=a[s])&&r.every((function(e){return e}))&&(i.headerRows=(null!==(u=i.headerRows)&&void 0!==u?u:0)+1)}for(var l=function(e){var t;null!=a&&a.every((function(t){return t[e]}))&&(i.headerCols=(null!==(t=i.headerCols)&&void 0!==t?t:0)+1)},c=0;c<(null==(o=a[0])?void 0:o.length);c++)l(c);return i}function mC(e,t,n){var r,o=[];return e.content.forEach((function(e){if("hardBreak"!==e.type.name){if("link"!==e.type.name&&"text"!==e.type.name)return t[e.type.name]?(r&&(o.push(r),r=void 0),void o.push(vC(e,t,n))):void console.warn("unrecognized inline content type",e.type.name);var i,a,s={},u=rw(e.marks);try{for(u.s();!(a=u.n()).done;){var l=a.value;if("link"===l.type.name)i=l;else{var c=n[l.type.name];if(!c){if(l.type.spec.blocknoteIgnore)continue;throw new Error("style ".concat(l.type.name," not found in styleSchema"))}if("boolean"===c.propSchema)s[c.type]=!0;else{if("string"!==c.propSchema)throw new Nw(c.propSchema);s[c.type]=l.attrs.stringValue}}}}catch(e){u.e(e)}finally{u.f()}r?Sw(r)?i?(o.push(r),r={type:"link",href:i.attrs.href,content:[{type:"text",text:e.textContent,styles:s}]}):JSON.stringify(r.styles)===JSON.stringify(s)?r.text+=e.textContent:(o.push(r),r={type:"text",text:e.textContent,styles:s}):Aw(r)&&(i?r.href===i.attrs.href?JSON.stringify(r.content[r.content.length-1].styles)===JSON.stringify(s)?r.content[r.content.length-1].text+=e.textContent:r.content.push({type:"text",text:e.textContent,styles:s}):(o.push(r),r={type:"link",href:i.attrs.href,content:[{type:"text",text:e.textContent,styles:s}]}):(o.push(r),r={type:"text",text:e.textContent,styles:s})):r=i?{type:"link",href:i.attrs.href,content:[{type:"text",text:e.textContent,styles:s}]}:{type:"text",text:e.textContent,styles:s}}else if(r)if(Sw(r))r.text+="\n";else{if(!Aw(r))throw new Error("unexpected");r.content[r.content.length-1].text+="\n"}else r={type:"text",text:"\n",styles:{}}})),r&&o.push(r),o}function vC(e,t,n){if("text"===e.type.name||"link"===e.type.name)throw new Error("unexpected");for(var r,o={},i=t[e.type.name],a=0,s=Object.entries(e.attrs);a<s.length;a++){var u=iw(s[a],2),l=u[0],c=u[1];if(!i)throw Error("ic node is of an unrecognized type: "+e.type.name);l in i.propSchema&&(o[l]=c)}return r="styled"===i.content?mC(e,t,n):void 0,{type:e.type.name,props:o,content:r}}function gC(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cC(t),o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:dC(t),i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:fC(t),a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:pC(t);if(!e.type.isInGroup("bnBlock"))throw Error("Node should be a bnBlock, but is instead: "+e.type.name);var s=null==a?void 0:a.get(e);if(s)return s;var u=nC(e,0),l=u.bnBlock.node.attrs.id;null===l&&(l=xw.options.generateID());var c=r[u.blockNoteType];if(!c)throw Error("Block is of an unrecognized type: "+u.blockNoteType);for(var d={},f=0,p=Object.entries(bw(bw({},e.attrs),u.isBlockContainer?u.blockContent.node.attrs:{}));f<p.length;f++){var h=iw(p[f],2),m=h[0],v=h[1],g=c.propSchema;m in g&&(void 0!==g[m].default||void 0!==v)&&(d[m]=v)}var y,b=r[u.blockNoteType],D=[];if(null==(n=u.childContainer)||n.node.forEach((function(e){D.push(gC(e,t,r,o,i,a))})),"inline"===b.content){if(!u.isBlockContainer)throw new Error("impossible");y=mC(u.blockContent.node,o,i)}else if("table"===b.content){if(!u.isBlockContainer)throw new Error("impossible");y=hC(u.blockContent.node,o,i)}else{if("none"!==b.content)throw new Nw(b.content);y=void 0}var w={id:l,type:b.type,props:d,content:y,children:D};return null==a||a.set(e,w),w}function yC(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=iw(e,2);return[t[0],t[1].config]})))}function bC(e,t){return function(e,t){return{config:e,implementation:t}}({type:e.name,propSchema:t},{mark:e})}function DC(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=iw(e,2);return[t[0],t[1].config]})))}function wC(e){for(var t=EC(e),n=t.height,r=t.width,o=new Array(n).fill(!1).map((function(){return new Array(r).fill(null)})),i=function(e,t){for(var i=e;i<n;i++)for(var a=t;a<r;a++)if(!o[i][a])return{row:i,col:a};throw new Error("Unable to create occupancy grid for table, no more available cells")},a=0;a<e.content.rows.length;a++)for(var s=0;s<e.content.rows[a].cells.length;s++)for(var u=Mw(e.content.rows[a].cells[s]),l=Pw(u),c=Tw(u),d=i(a,s),f=d.row,p=d.col,h=f;h<f+l;h++)for(var m=p;m<p+c;m++){if(o[h][m])throw new Error("Unable to create occupancy grid for table, cell at ".concat(h,",").concat(m," is already occupied"));o[h][m]={row:a,col:s,rowspan:l,colspan:c,cell:u}}return o}function CC(e){var t=new Set;return e.map((function(e){return{cells:e.map((function(e){return!t.has(e.row+":"+e.col)&&(t.add(e.row+":"+e.col),e.cell)})).filter((function(e){return!1!==e}))}}))}function kC(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wC(t),r=0;r<n.length;r++)for(var o=0;o<n[r].length;o++){var i=n[r][o];if(i.row===e.row&&i.col===e.col)return{row:r,col:o,cell:i.cell}}throw new Error("Unable to resolve relative table cell indices for table, cell at ".concat(e.row,",").concat(e.col," is not occupied"))}function EC(e){var t=e.content.rows.length,n=0;return e.content.rows.forEach((function(e){var t=0;e.cells.forEach((function(e){t+=Tw(e)})),n=Math.max(n,t)})),{height:t,width:n}}function xC(e,t){var n,r=null==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:wC(t))[e.row])?void 0:n[e.col];if(r)return{row:r.row,col:r.col,cell:r.cell}}function AC(e,t){var n,r=wC(e);if(t<0||t>=r.length)return[];for(var o=0,i=0;i<t;i++){var a=null==(n=r[o])?void 0:n[0];if(!a)return[];o+=a.rowspan}var s=new Array(r[0].length).fill(!1).map((function(t,n){return xC({row:o,col:n},e,r)})).filter((function(e){return void 0!==e}));return s.filter((function(e,t){return s.findIndex((function(t){return t.row===e.row&&t.col===e.col}))===t}))}function FC(e,t){var n,r=wC(e);if(t<0||t>=r[0].length)return[];for(var o=0,i=0;i<t;i++){var a=null==(n=r[0])?void 0:n[o];if(!a)return[];o+=a.colspan}var s=new Array(r.length).fill(!1).map((function(t,n){return xC({row:n,col:o},e,r)})).filter((function(e){return void 0!==e}));return s.filter((function(e,t){return s.findIndex((function(t){return t.row===e.row&&t.col===e.col}))===t}))}function SC(e){return!e||(Bw(e)?SC(e.content):"string"==typeof e?0===e.length:!!Array.isArray(e)&&e.every((function(e){return"string"==typeof e?0===e.length:Sw(e)?0===e.text.length:!!Fw(e)&&("string"==typeof e.content?0===e.content.length:e.content.every((function(e){return 0===e.text.length})))})))}function MC(e,t,n){var r=AC(e,n);if(!r.some((function(e){return Pw(e.cell)>1})))return!0;var o=n,i=n;return r.forEach((function(e){var t=Pw(e.cell);o=Math.max(o,e.row+t-1),i=Math.min(i,e.row)})),t<n?n===o:n===i}function BC(e,t,n){var r=FC(e,n);if(!r.some((function(e){return Tw(e.cell)>1})))return!0;var o=n,i=n;return r.forEach((function(e){var t=Tw(e.cell);o=Math.max(o,e.col+t-1),i=Math.min(i,e.col)})),t<n?n===o:n===i}function OC(e,t,n,r){for(var o=[],i=0,a=Object.entries(e.styles||{});i<a.length;i++){var s=iw(a[i],2),u=s[0],l=s[1],c=n[u];if(!c)throw new Error("style ".concat(u," not found in styleSchema"));if("boolean"===c.propSchema)o.push(t.mark(u));else{if("string"!==c.propSchema)throw new Nw(c.propSchema);o.push(t.mark(u,{stringValue:l}))}}return r&&t.nodes[r].spec.code?e.text.length>0?[t.text(e.text,o)]:[]:e.text.split(/(\n)/g).filter((function(e){return e.length>0})).map((function(e){return"\n"===e?t.nodes.hardBreak.createChecked():t.text(e,o)}))}function TC(e,t,n){var r=t.marks.link.create({href:e.href});return PC(e.content,t,n).map((function(e){if("text"===e.type.name)return e.mark([].concat(ow(e.marks),[r]));if("hardBreak"===e.type.name)return e;throw new Error("unexpected node type")}))}function PC(e,t,n,r){var o=[];if("string"==typeof e)return o.push.apply(o,ow(OC({text:e,styles:{}},t,n,r))),o;var i,a=rw(e);try{for(a.s();!(i=a.n()).done;){var s=i.value;o.push.apply(o,ow(OC(s,t,n,r)))}}catch(e){a.e(e)}finally{a.f()}return o}function NC(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fC(t),i=[],a=rw(e);try{for(a.s();!(r=a.n()).done;){var s=r.value;"string"==typeof s?i.push.apply(i,ow(PC(s,t,o,n))):Fw(s)?i.push.apply(i,ow(TC(s,t,o))):Sw(s)?i.push.apply(i,ow(PC([s],t,o,n))):i.push(jC(s,t,o))}}catch(e){a.e(e)}finally{a.f()}return i}function _C(e,t){for(var n,r,o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fC(t),a=[],s=new Array(null!==(n=e.headerRows)&&void 0!==n?n:0).fill(!0),u=new Array(null!==(r=e.headerCols)&&void 0!==r?r:0).fill(!0),l=null!==(o=e.columnWidths)&&void 0!==o?o:[],c=0;c<e.rows.length;c++){for(var d=e.rows[c],f=[],p=s[c],h=function(){var n=d.cells[m],r=u[m],o=null,a=kC({row:c,col:m},{content:e}),s=l[a.col]?[l[a.col]]:null;if(n)if("string"==typeof n)o=t.text(n);else if(Bw(n)){n.content&&(o=NC(n.content,t,"tableParagraph",i));var h=Tw(n);h>1&&(s=new Array(h).fill(!1).map((function(e,t){var n;return null!==(n=l[a.col+t])&&void 0!==n?n:void 0})))}else o=NC(n,t,"tableParagraph",i);var v=t.nodes[r||p?"tableHeader":"tableCell"].createChecked(bw(bw({},Bw(n)?n.props:{}),{},{colwidth:s}),t.nodes.tableParagraph.createChecked(void 0,o));f.push(v)},m=0;m<d.cells.length;m++)h();var v=t.nodes.tableRow.createChecked({},f);a.push(v)}return a}function jC(e,t,n){var r,o=e.type;if(void 0===o&&(o="paragraph"),!t.nodes[o])throw new Error("node type ".concat(o," not found in schema"));if(e.content)if("string"==typeof e.content){var i=NC([e.content],t,o,n);r=t.nodes[o].createChecked(e.props,i)}else if(Array.isArray(e.content)){var a=NC(e.content,t,o,n);r=t.nodes[o].createChecked(e.props,a)}else{if("tableContent"!==e.content.type)throw new Nw(e.content.type);var s=_C(e.content,t,n);r=t.nodes[o].createChecked(e.props,s)}else r=t.nodes[o].createChecked(e.props);return r}function IC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fC(t),r=e.id;void 0===r&&(r=xw.options.generateID());var o=[];if(e.children){var i,a=rw(e.children);try{for(a.s();!(i=a.n()).done;){var s=i.value;o.push(IC(s,t,n))}}catch(e){a.e(e)}finally{a.f()}}if(!e.type||t.nodes[e.type].isInGroup("blockContent")){var u=jC(e,t,n),l=o.length>0?t.nodes.blockGroup.createChecked({},o):void 0;return t.nodes.blockContainer.createChecked(bw({id:r},e.props),l?[u,l]:u)}if(t.nodes[e.type].isInGroup("bnBlock"))return t.nodes[e.type].createChecked(bw({id:r},e.props),o);throw new Error("block type ".concat(e.type," doesn't match blockContent or bnBlock group"))}function RC(e,t){var n,r;if(t.firstChild.descendants((function(t,o){return!(n||LC(t)&&t.attrs.id===e&&(n=t,r=o+1,1))})),void 0!==n&&void 0!==r)return{node:n,posBeforeNode:r}}function LC(e){return e.type.isInGroup("bnBlock")}function HC(e,t){return e.id!==t.id||e.type!==t.type||JSON.stringify(e.props)!==JSON.stringify(t.props)||JSON.stringify(e.content)!==JSON.stringify(t.content)}function VC(e,t,n){var r=sC(e),o=n.map((function(e){return IC(e,r)})),i=new Set(t.map((function(e){return"string"==typeof e?e:e.id}))),a=[],s="string"==typeof t[0]?t[0]:t[0].id,u=0;if(e.doc.descendants((function(t,l){if(0===i.size)return!1;if(!t.type.isInGroup("bnBlock")||!i.has(t.attrs.id))return!0;if(a.push(gC(t,r)),i.delete(t.attrs.id),n.length>0&&t.attrs.id===s){var c=e.doc.nodeSize;e.insert(l,o);var d=e.doc.nodeSize;u+=c-d}var f=e.doc.nodeSize,p=e.doc.resolve(l-u);"blockGroup"===p.node().type.name&&"doc"!==p.node(p.depth-1).type.name&&1===p.node().childCount?e.delete(p.before(),p.after()):e.delete(l-u,l-u+t.nodeSize);var h=e.doc.nodeSize;return u+=f-h,!1})),i.size>0){var l=ow(i).join("\n");throw Error("Blocks with the following IDs could not be found in the editor: "+l)}return{insertedBlocks:o.map((function(e){return gC(e,r)})),removedBlocks:a}}var zC=function(e,t){return function(n){var r=n.tr;return n.dispatch&&$C(r,e,t),!0}};function $C(e,t,n,r,o){var i=oC(e.doc.resolve(t)),a=sC(e);if(void 0!==r&&void 0!==o&&r>o)throw new Error("Invalid replaceFromPos or replaceToPos");var s=a.nodes[i.blockNoteType],u=a.nodes[n.type||i.blockNoteType],l=u.isInGroup("bnBlock")?u:a.nodes.blockContainer;if(i.isBlockContainer&&u.isInGroup("blockContent")){var c=void 0!==r&&r>i.blockContent.beforePos&&r<i.blockContent.afterPos?r-i.blockContent.beforePos-1:void 0,d=void 0!==o&&o>i.blockContent.beforePos&&o<i.blockContent.afterPos?o-i.blockContent.beforePos-1:void 0;UC(n,e,i),function(e,t,n,r,o,i,a){var s=sC(t),u="keep";if(e.content)if("string"==typeof e.content)u=NC([e.content],s,r.name);else if(Array.isArray(e.content))u=NC(e.content,s,r.name);else{if("tableContent"!==e.content.type)throw new Nw(e.content.type);u=_C(e.content,s)}else""===n.spec.content||r.spec.content!==n.spec.content&&(u=[]);if("keep"===u)t.setNodeMarkup(o.blockContent.beforePos,r,bw(bw({},o.blockContent.node.attrs),e.props));else if(void 0!==i||void 0!==a){t.setNodeMarkup(o.blockContent.beforePos,r,bw(bw({},o.blockContent.node.attrs),e.props));var l=o.blockContent.beforePos+1+(null!=i?i:0),c=o.blockContent.beforePos+1+(null!=a?a:o.blockContent.node.content.size),d=t.doc.resolve(o.blockContent.beforePos).depth,f=t.doc.resolve(l).depth,p=t.doc.resolve(c).depth;t.replace(l,c,new ee(K.from(u),f-d-1,p-d-1))}else t.replaceWith(o.blockContent.beforePos,o.blockContent.afterPos,r.createChecked(bw(bw({},o.blockContent.node.attrs),e.props),u))}(n,e,s,u,i,c,d)}else{if(i.isBlockContainer||!u.isInGroup("bnBlock")){var f=gC(i.bnBlock.node,a);return void e.replaceWith(i.bnBlock.beforePos,i.bnBlock.afterPos,IC(bw({children:f.children},n),a))}UC(n,e,i)}e.setNodeMarkup(i.bnBlock.beforePos,l,bw(bw({},i.bnBlock.node.attrs),n.props))}function UC(e,t,n){var r=sC(t);if(void 0!==e.children&&e.children.length>0){var o=e.children.map((function(e){return IC(e,r)}));if(n.childContainer)t.step(new xt(n.childContainer.beforePos+1,n.childContainer.afterPos-1,new ee(K.from(o),0,0)));else{if(!n.isBlockContainer)throw new Error("impossible");t.insert(n.blockContent.afterPos,r.nodes.blockGroup.createChecked({},o))}}}function GC(e){var t=Array.from(e.classList).filter((function(e){return!e.startsWith("bn-")}))||[];t.length>0?e.className=t.join(" "):e.removeAttribute("class")}function WC(e,t,n,r){var o;if(!t)throw new Error("blockContent is required");if("string"==typeof t)o=NC([t],e.pmSchema);else if(Array.isArray(t))o=NC(t,e.pmSchema);else{if("tableContent"!==t.type)throw new Nw(t.type);o=_C(t,e.pmSchema)}var i=n.serializeFragment(K.from(o),r);return 1===i.nodeType&&GC(i),i}function qC(e,t,n,r,o,i,a){var s,u,l,c,d,f,p,h,m,v=null!==(s=null==a?void 0:a.document)&&void 0!==s?s:document,g=t.pmSchema.nodes.blockContainer,y=n.props;if(!n.props){y={};for(var b=0,D=Object.entries(t.schema.blockSchema[n.type].propSchema);b<D.length;b++){var w=iw(D[b],2),C=w[0],k=w[1];void 0!==k.default&&(y[C]=k.default)}}var E,x=null==(l=null==(u=g.spec)?void 0:u.toDOM)?void 0:l.call(u,g.create(bw({id:n.id},y))),A=Array.from(x.dom.attributes),F=t.blockImplementations[n.type].implementation.toExternalHTML(bw(bw({},n),{},{props:y}),t),S=v.createDocumentFragment();if(F.dom.classList.contains("bn-block-content")){var M,B=[].concat(A,ow(Array.from(F.dom.attributes))).filter((function(e){return e.name.startsWith("data")&&"data-content-type"!==e.name&&"data-file-block"!==e.name&&"data-node-view-wrapper"!==e.name&&"data-node-type"!==e.name&&"data-id"!==e.name&&"data-index"!==e.name&&"data-editable"!==e.name})),O=rw(B);try{for(O.s();!(M=O.n()).done;){var T=M.value;F.dom.firstChild.setAttribute(T.name,T.value)}}catch(e){O.e(e)}finally{O.f()}GC(F.dom.firstChild),S.append.apply(S,ow(Array.from(F.dom.childNodes)))}else S.append(F.dom);if(F.contentDOM&&n.content){var P=WC(t,n.content,r,a);F.contentDOM.appendChild(P)}if(o.has(n.type)?E="OL":i.has(n.type)&&(E="UL"),E){if((null==(c=e.lastChild)?void 0:c.nodeName)!==E){var N=v.createElement(E);"OL"===E&&null!=y&&y.start&&1!==(null==y?void 0:y.start)&&N.setAttribute("start",y.start+""),e.append(N)}var _=v.createElement("li");_.append(S),e.lastChild.appendChild(_)}else e.append(S);if(n.children&&n.children.length>0){var j=v.createDocumentFragment();if(KC(j,t,n.children,r,o,i,a),"UL"===(null==(d=e.lastChild)?void 0:d.nodeName)||"OL"===(null==(f=e.lastChild)?void 0:f.nodeName))for(;"UL"===(null==(p=j.firstChild)?void 0:p.nodeName)||"OL"===(null==(h=j.firstChild)?void 0:h.nodeName);)e.lastChild.lastChild.appendChild(j.firstChild);t.pmSchema.nodes[n.type].isInGroup("blockContent")?e.append(j):null==(m=F.contentDOM)||m.append(j)}}var KC=function(e,t,n,r,o,i,a){var s,u=rw(n);try{for(u.s();!(s=u.n()).done;)qC(e,t,s.value,r,o,i,a)}catch(e){u.e(e)}finally{u.f()}},ZC=function(e,t){var n=Je.fromSchema(e);return{exportBlocks:function(e,r){var o=function(e,t,n,r,o,i){var a,s=(null!==(a=null==i?void 0:i.document)&&void 0!==a?a:document).createDocumentFragment();return KC(s,e,t,n,r,o,i),s}(t,e,n,new Set(["numberedListItem"]),new Set(["bulletListItem","checkListItem"]),r),i=document.createElement("div");return i.append(o),i.innerHTML},exportInlineContent:function(e,r){var o=WC(t,e,n,r),i=document.createElement("div");return i.append(o.cloneNode(!0)),i.innerHTML}}};function JC(e,t,n,r,o){var i,a,s,u,l,c=e.pmSchema.nodes.blockContainer,d=t.props;if(!t.props){d={};for(var f=0,p=Object.entries(e.schema.blockSchema[t.type].propSchema);f<p.length;f++){var h=iw(p[f],2),m=h[0],v=h[1];void 0!==v.default&&(d[m]=v.default)}}var g=e.blockImplementations[t.type].implementation.toInternalHTML(bw(bw({},t),{},{props:d}),e);if("numberedListItem"===t.type&&g.dom.setAttribute("data-index",r.toString()),g.contentDOM&&t.content){var y=function(e,t,n,r,o){var i;if(!t)throw new Error("blockContent is required");if("string"==typeof t)i=NC([t],e.pmSchema,r);else if(Array.isArray(t))i=NC(t,e.pmSchema,r);else{if("tableContent"!==t.type)throw new Nw(t.type);i=_C(t,e.pmSchema)}return n.serializeFragment(K.from(i),o)}(e,t.content,n,t.type,o);g.contentDOM.appendChild(y)}if(e.pmSchema.nodes[t.type].isInGroup("bnBlock")){if(t.children&&t.children.length>0){var b=XC(e,t.children,n,o);null==(i=g.contentDOM)||i.append(b)}return g.dom}var D=null==(s=null==(a=c.spec)?void 0:a.toDOM)?void 0:s.call(a,c.create(bw({id:t.id},d)));return null==(u=D.contentDOM)||u.appendChild(g.dom),t.children&&t.children.length>0&&(null==(l=D.contentDOM)||l.appendChild(YC(e,t.children,n,o))),D.dom}function XC(e,t,n,r){var o,i,a=(null!==(o=null==r?void 0:r.document)&&void 0!==o?o:document).createDocumentFragment(),s=0,u=rw(t);try{for(u.s();!(i=u.n()).done;){var l=i.value;"numberedListItem"===l.type?s++:s=0;var c=JC(e,l,n,s,r);a.appendChild(c)}}catch(e){u.e(e)}finally{u.f()}return a}var YC=function(e,t,n,r){var o,i=e.pmSchema.nodes.blockGroup,a=i.spec.toDOM(i.create({})),s=XC(e,t,n,r);return null==(o=a.contentDOM)||o.appendChild(s),a.dom},QC=function(e,t){var n=Je.fromSchema(e);return{serializeBlocks:function(e,r){return YC(t,e,n,r).outerHTML}}},ek=function(e,t){var n,r=e.querySelector(t);if(r){var o=e.querySelector("figcaption");return{targetElement:r,caption:null!==(n=null==o?void 0:o.textContent)&&void 0!==n?n:void 0}}},tk=function(e,t,n,r,o){var i=document.createElement("div");if(i.className="bn-file-block-content-wrapper",""===e.props.url){var a=function(e,t,n,r){var o=document.createElement("div");o.className="bn-add-file-button";var i=document.createElement("div");i.className="bn-add-file-button-icon",r?i.appendChild(r):i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',o.appendChild(i);var a=document.createElement("p");a.className="bn-add-file-button-text",a.innerHTML=n||t.dictionary.file_blocks.file.add_button_text,o.appendChild(a);var s=function(e){e.preventDefault()},u=function(){t.transact((function(n){return n.setMeta(t.filePanel.plugins[0],{block:e})}))};return o.addEventListener("mousedown",s,!0),o.addEventListener("click",u,!0),{dom:o,destroy:function(){o.removeEventListener("mousedown",s,!0),o.removeEventListener("click",u,!0)}}}(e,t,r,o);i.appendChild(a.dom);var s=t.onUploadStart((function(t){if(t===e.id){i.removeChild(a.dom);var n=document.createElement("div");n.className="bn-file-loading-preview",n.textContent="Loading...",i.appendChild(n)}}));return{dom:i,destroy:function(){s(),a.destroy()}}}var u={dom:i};if(!1!==e.props.showPreview&&n)i.appendChild(n.dom);else{var l=function(e){var t=document.createElement("div");t.className="bn-file-name-with-icon";var n=document.createElement("div");n.className="bn-file-icon",n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',t.appendChild(n);var r=document.createElement("p");return r.className="bn-file-name",r.textContent=e.props.name,t.appendChild(r),{dom:t}}(e);i.appendChild(l.dom),u.destroy=function(){var e;null==(e=l.destroy)||e.call(l)}}if(e.props.caption){var c=document.createElement("p");c.className="bn-file-caption",c.textContent=e.props.caption,i.appendChild(c)}return u},nk=function(e,t){var n=document.createElement("figure"),r=document.createElement("figcaption");return r.textContent=t,n.appendChild(e),n.appendChild(r),{dom:n}},rk=function(e,t){var n=document.createElement("div"),r=document.createElement("p");return r.textContent=t,n.appendChild(e),n.appendChild(r),{dom:n}},ok=function(e){return{url:e.src||void 0}},ik={type:"audio",propSchema:{backgroundColor:Vw.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0}},content:"none",isFileBlock:!0,fileBlockAccept:["audio/*"]},ak=function(e){if("AUDIO"===e.tagName)return e.closest("figure")?void 0:ok(e);if("FIGURE"===e.tagName){var t=ek(e,"audio");if(!t)return;var n=t.targetElement,r=t.caption;return bw(bw({},ok(n)),{},{caption:r})}},sk=eC(ik,{render:function(e,t){var n=document.createElement("div");n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"></path></svg>';var r=document.createElement("audio");return r.className="bn-audio",t.resolveFileUrl?t.resolveFileUrl(e.props.url).then((function(e){r.src=e})):r.src=e.props.url,r.controls=!0,r.contentEditable="false",r.draggable=!1,tk(e,t,{dom:r},t.dictionary.file_blocks.audio.add_button_text,n.firstElementChild)},parse:ak,toExternalHTML:function(e){if(!e.props.url){var t=document.createElement("p");return t.textContent="Add audio",{dom:t}}var n;return e.props.showPreview?(n=document.createElement("audio")).src=e.props.url:((n=document.createElement("a")).href=e.props.url,n.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?nk(n,e.props.caption):rk(n,e.props.caption):{dom:n}}}),uk=Symbol.for("blocknote.shikiParser"),lk=Symbol.for("blocknote.shikiHighlighterPromise"),ck=Kw({name:"codeBlock",content:"inline*",group:"blockContent",marks:"insertion deletion modification",code:!0,defining:!0,addOptions:function(){return{defaultLanguage:"text",indentLineWithTab:!0,supportedLanguages:{}}},addAttributes:function(){var e=this.options;return{language:{default:e.editor.settings.codeBlock.defaultLanguage,parseHTML:function(t){var n,r=t,o=null;"DIV"===(null==r?void 0:r.tagName)&&"codeBlock"===(null==r?void 0:r.dataset.contentType)&&(r=r.children[0]),"PRE"===(null==r?void 0:r.tagName)&&(r=null==r?void 0:r.children[0]);var i=null==r?void 0:r.getAttribute("data-language");if(i)o=i.toLowerCase();else{var a=ow((null==r?void 0:r.className.split(" "))||[]).filter((function(e){return e.startsWith("language-")})).map((function(e){return e.replace("language-","")}));a.length>0&&(o=a[0].toLowerCase())}return o?null!==(n=fk(e.editor.settings.codeBlock,o))&&void 0!==n?n:o:null},renderHTML:function(e){return e.language?{class:"language-".concat(e.language),"data-language":e.language}:{}}}}},parseHTML:function(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"pre",preserveWhitespace:"full"}]},renderHTML:function(e){var t,n,r=e.HTMLAttributes,o=document.createElement("pre"),i=Lw(this.name,"code",(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{},bw(bw({},(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{}),r)),a=i.dom,s=i.contentDOM;return a.removeChild(s),a.appendChild(o),o.appendChild(s),{dom:a,contentDOM:s}},addNodeView:function(){var e=this,t=this.options;return function(n){var r,o,i=n.editor,a=n.node,s=n.getPos,u=n.HTMLAttributes,l=document.createElement("pre"),c=document.createElement("select"),d=document.createElement("div"),f=Lw(e.name,"code",bw(bw({},(null==(r=e.options.domAttributes)?void 0:r.blockContent)||{}),u),(null==(o=e.options.domAttributes)?void 0:o.inlineContent)||{}),p=f.dom,h=f.contentDOM,m=function(e){var t=e.target.value;i.commands.command((function(e){return e.tr.setNodeAttribute(s(),"language",t),!0}))};return Object.entries(t.editor.settings.codeBlock.supportedLanguages).forEach((function(e){var t=iw(e,2),n=t[0],r=t[1].name,o=document.createElement("option");o.value=n,o.text=r,c.appendChild(o)})),d.contentEditable="false",c.value=a.attrs.language||t.editor.settings.codeBlock.defaultLanguage,p.removeChild(h),p.appendChild(d),p.appendChild(l),l.appendChild(h),d.appendChild(c),c.addEventListener("change",m),{dom:p,contentDOM:h,update:function(t){return t.type===e.type},destroy:function(){c.removeEventListener("change",m)}}}},addProseMirrorPlugins:function(){var e,t,n=this.options,r=globalThis;return[ol({parser:function(o){if(!n.editor.settings.codeBlock.createHighlighter)return[];if(!e)return r[lk]=r[lk]||n.editor.settings.codeBlock.createHighlighter(),r[lk].then((function(t){e=t}));var i=fk(n.editor.settings.codeBlock,o.language);return i&&"text"!==i&&"none"!==i&&"plaintext"!==i&&"txt"!==i?e.getLoadedLanguages().includes(i)?(t||(t=r[uk]||function(e,t){return function(n){var r,o=n.content,i=n.language,a=n.pos,s=n.size,u=[],l=e.codeToTokens(o,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cl(Object(n),!0).forEach((function(t){dl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({lang:i},null!=t?t:{theme:e.getLoadedThemes()[0]})),c=l.tokens,d=l.fg,f=l.bg,p=l.rootStyle||(d&&f?"--prosemirror-highlight:".concat(d,";--prosemirror-highlight-bg:").concat(f):"");if(p){var h=Ti.node(a,a+s,{style:p});u.push(h)}var m,v=a+1,g=sl(c);try{for(g.s();!(m=g.n()).done;){var y,b=sl(m.value);try{for(b.s();!(y=b.n()).done;){var D=y.value,w=v+D.content.length,C=Ti.inline(v,w,{style:fl(null!=(r=D.htmlStyle)?r:"color: ".concat(D.color)),class:"shiki"});u.push(C),v=w}}catch(e){b.e(e)}finally{b.f()}v+=1}}catch(e){g.e(e)}finally{g.f()}return u}}(e),r[uk]=t),t(o)):e.loadLanguage(i):[]},languageExtractor:function(e){return e.attrs.language},nodeTypes:[this.name]})]},addInputRules:function(){var e=this,t=this.options;return[new Bs({find:/^```(.*?)\s$/,handler:function(n){var r,o=n.state,i=n.range,a=n.match,s=o.doc.resolve(i.from),u=a[1].trim(),l={language:null!==(r=fk(t.editor.settings.codeBlock,u))&&void 0!==r?r:u};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e.type))return null;o.tr.delete(i.from,i.to).setBlockType(i.from,i.from,e.type,l).setSelection(yn.create(o.tr.doc,i.from))}})]},addKeyboardShortcuts:function(){var e=this;return{Delete:function(t){var n=t.editor,r=n.state.selection,o=r.$from;if(n.isActive(e.name)&&!o.parent.textContent&&Zs(r)){var i=o.pos-o.parentOffset-2;return n.chain().setNodeSelection(i).deleteSelection().run(),!0}return!1},Tab:function(t){var n=t.editor;return!(!e.options.indentLineWithTab||!n.isActive(e.name)||(n.commands.insertContent("  "),0))},Enter:function(t){var n=t.editor,r=n.state.selection.$from;if(!n.isActive(e.name))return!1;var o=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith("\n\n");return o&&i?n.chain().command((function(e){return e.tr.delete(r.pos-2,r.pos),!0})).exitCode().run():(n.commands.insertContent("\n"),!0)},"Shift-Enter":function(t){var n=t.editor,r=n.state.selection.$from;return!!n.isActive(e.name)&&(n.chain().insertContentAt(r.pos-r.parentOffset+r.parent.nodeSize,{type:"paragraph"}).run(),!0)}}}}),dk=Jw(ck,{language:{default:"text"}});function fk(e,t){var n;return null==(n=Object.entries(e.supportedLanguages).find((function(e){var n=iw(e,2),r=n[0],o=n[1].aliases;return(null==o?void 0:o.includes(t))||r===t})))?void 0:n[0]}var pk=bC(_s.create({name:"backgroundColor",addAttributes:function(){return{stringValue:{default:void 0,parseHTML:function(e){return e.getAttribute("data-background-color")},renderHTML:function(e){return{"data-background-color":e.stringValue}}}}},parseHTML:function(){return[{tag:"span",getAttrs:function(e){return"string"!=typeof e&&!!e.hasAttribute("data-background-color")&&{stringValue:e.getAttribute("data-background-color")}}}]},renderHTML:function(e){return["span",e.HTMLAttributes,0]}}),"string"),hk=bC(_s.create({name:"textColor",addAttributes:function(){return{stringValue:{default:void 0,parseHTML:function(e){return e.getAttribute("data-text-color")},renderHTML:function(e){return{"data-text-color":e.stringValue}}}}},parseHTML:function(){return[{tag:"span",getAttrs:function(e){return"string"!=typeof e&&!!e.hasAttribute("data-text-color")&&{stringValue:e.getAttribute("data-text-color")}}}]},renderHTML:function(e){return["span",e.HTMLAttributes,0]}}),"string"),mk=function(e){return{url:e.src||void 0}},vk={type:"file",propSchema:{backgroundColor:Vw.backgroundColor,name:{default:""},url:{default:""},caption:{default:""}},content:"none",isFileBlock:!0},gk=function(e){if("EMBED"===e.tagName)return e.closest("figure")?void 0:mk(e);if("FIGURE"===e.tagName){var t=ek(e,"embed");if(!t)return;var n=t.targetElement,r=t.caption;return bw(bw({},mk(n)),{},{caption:r})}},yk=eC(vk,{render:function(e,t){return tk(e,t)},parse:gk,toExternalHTML:function(e){if(!e.props.url){var t=document.createElement("p");return t.textContent="Add file",{dom:t}}var n=document.createElement("a");return n.href=e.props.url,n.textContent=e.props.name||e.props.url,e.props.caption?rk(n,e.props.caption):{dom:n}}}),bk=bw(bw({},Vw),{},{level:{default:1,values:[1,2,3]}}),Dk=Kw({name:"heading",content:"inline*",group:"blockContent",addAttributes:function(){return Gw(bk)},addInputRules:function(){return ow([1,2,3].map((function(e){return new Bs({find:new RegExp("^(#{".concat(e,"})\\s$")),handler:function(t){var n=t.state,r=t.chain,o=t.range,i=iC(n);!i.isBlockContainer||"inline*"!==i.blockContent.node.type.spec.content||r().command(zC(i.bnBlock.beforePos,{type:"heading",props:{level:e}})).deleteRange({from:o.from,to:o.to}).run()}})})))},addKeyboardShortcuts:function(){var e=this;return{"Mod-Alt-1":function(){var t=iC(e.editor.state);return!t.isBlockContainer||"inline*"!==t.blockContent.node.type.spec.content||e.editor.commands.command(zC(t.bnBlock.beforePos,{type:"heading",props:{level:1}}))},"Mod-Alt-2":function(){var t=iC(e.editor.state);return!t.isBlockContainer||"inline*"!==t.blockContent.node.type.spec.content||e.editor.commands.command(zC(t.bnBlock.beforePos,{type:"heading",props:{level:2}}))},"Mod-Alt-3":function(){var t=iC(e.editor.state);return!t.isBlockContainer||"inline*"!==t.blockContent.node.type.spec.content||e.editor.commands.command(zC(t.bnBlock.beforePos,{type:"heading",props:{level:3}}))}}},parseHTML:function(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"h1",attrs:{level:1},node:"heading"},{tag:"h2",attrs:{level:2},node:"heading"},{tag:"h3",attrs:{level:3},node:"heading"}]},renderHTML:function(e){var t,n,r=e.node,o=e.HTMLAttributes;return Lw(this.name,"h".concat(r.attrs.level),bw(bw({},(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{}),o),(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{})}}),wk=Jw(Dk,bk),Ck=function(e,t,n,r,o,i){var a=tk(e,t,n,o,i),s=a.dom,u=a.destroy,l=s;e.props.url&&e.props.showPreview&&(e.props.previewWidth?l.style.width="".concat(e.props.previewWidth,"px"):l.style.width="fit-content");var c=document.createElement("div");c.className="bn-resize-handle",c.style.left="4px";var d=document.createElement("div");d.className="bn-resize-handle",d.style.right="4px";var f,p=e.props.previewWidth,h=function(n){var o,i,a;f?(a="center"===e.props.textAlignment?"left"===f.handleUsed?f.initialWidth+2*(f.initialClientX-n.clientX):f.initialWidth+2*(n.clientX-f.initialClientX):"left"===f.handleUsed?f.initialWidth+f.initialClientX-n.clientX:f.initialWidth+n.clientX-f.initialClientX,p=Math.min(Math.max(a,64),(null==(i=null==(o=t.domElement)?void 0:o.firstElementChild)?void 0:i.clientWidth)||Number.MAX_VALUE),l.style.width="".concat(p,"px")):!t.isEditable&&r.contains(c)&&r.contains(d)&&(r.removeChild(c),r.removeChild(d))},m=function(n){(!n.target||!l.contains(n.target)||!t.isEditable)&&r.contains(c)&&r.contains(d)&&(r.removeChild(c),r.removeChild(d)),f&&(f=void 0,t.updateBlock(e,{props:{previewWidth:p}}))},v=function(){t.isEditable&&(r.appendChild(c),r.appendChild(d))},g=function(e){e.relatedTarget===c||e.relatedTarget===d||f||t.isEditable&&r.contains(c)&&r.contains(d)&&(r.removeChild(c),r.removeChild(d))},y=function(e){e.preventDefault(),f={handleUsed:"left",initialWidth:l.clientWidth,initialClientX:e.clientX}},b=function(e){e.preventDefault(),f={handleUsed:"right",initialWidth:l.clientWidth,initialClientX:e.clientX}};return window.addEventListener("mousemove",h),window.addEventListener("mouseup",m),l.addEventListener("mouseenter",v),l.addEventListener("mouseleave",g),c.addEventListener("mousedown",y),d.addEventListener("mousedown",b),{dom:l,destroy:function(){null==u||u(),window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",m),l.removeEventListener("mouseenter",v),l.removeEventListener("mouseleave",g),c.removeEventListener("mousedown",y),d.removeEventListener("mousedown",b)}}},kk=function(e){return{url:e.src||void 0,previewWidth:e.width||void 0}},Ek={type:"image",propSchema:{textAlignment:Vw.textAlignment,backgroundColor:Vw.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},content:"none",isFileBlock:!0,fileBlockAccept:["image/*"]},xk=function(e){if("IMG"===e.tagName)return e.closest("figure")?void 0:kk(e);if("FIGURE"===e.tagName){var t=ek(e,"img");if(!t)return;var n=t.targetElement,r=t.caption;return bw(bw({},kk(n)),{},{caption:r})}},Ak=eC(Ek,{render:function(e,t){var n=document.createElement("div");n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"></path></svg>';var r=document.createElement("div");r.className="bn-visual-media-wrapper";var o=document.createElement("img");return o.className="bn-visual-media",t.resolveFileUrl?t.resolveFileUrl(e.props.url).then((function(e){o.src=e})):o.src=e.props.url,o.alt=e.props.name||e.props.caption||"BlockNote image",o.contentEditable="false",o.draggable=!1,r.appendChild(o),Ck(e,t,{dom:r},r,t.dictionary.file_blocks.image.add_button_text,n.firstElementChild)},parse:xk,toExternalHTML:function(e){if(!e.props.url){var t=document.createElement("p");return t.textContent="Add image",{dom:t}}var n;return e.props.showPreview?((n=document.createElement("img")).src=e.props.url,n.alt=e.props.name||e.props.caption||"BlockNote image",e.props.previewWidth&&(n.width=e.props.previewWidth)):((n=document.createElement("a")).href=e.props.url,n.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?nk(n,e.props.caption):rk(n,e.props.caption):{dom:n}}});function Fk(e,t,n){var r,o,i,a=He.fromSchema(t),s=e,u=document.createElement("div");u.setAttribute("data-node-type","blockGroup");for(var l=0,c=Array.from(s.childNodes);l<c.length;l++){var d=c[l];u.appendChild(d.cloneNode(!0))}var f=a.parse(u,{topNode:t.nodes.blockGroup.create()});"checkListItem"===(null==(o=null==(r=f.firstChild)?void 0:r.firstChild)?void 0:o.type.name)&&(f=f.copy(f.content.cut(f.firstChild.firstChild.nodeSize+2)));var p=null==(i=f.firstChild)?void 0:i.firstChild;if(null==p||!p.isTextblock)return K.from(f);var h=t.nodes[n].create({},p.content),m=f.content.cut(p.nodeSize+2);if(m.size>0){var v=f.copy(m);return h.content.addToEnd(v)}return h.content}var Sk=function(e,t,n){return function(r){var o=r.state,i=r.dispatch,a=rC(tC(o.doc,e));if(!a.isBlockContainer)throw new Error("BlockContainer expected when calling splitBlock, position ".concat(e));var s=[{type:a.bnBlock.node.type,attrs:n?bw(bw({},a.bnBlock.node.attrs),{},{id:void 0}):{}},{type:t?a.blockContent.node.type:o.schema.nodes.paragraph,attrs:n?bw({},a.blockContent.node.attrs):{}}];return i&&o.tr.split(e,2,s),!0}},Mk=function(e){var t=e.transact((function(e){return{blockInfo:aC(e),selectionEmpty:e.selection.anchor===e.selection.head}})),n=t.blockInfo,r=t.selectionEmpty;if(!n.isBlockContainer)return!1;var o=n.bnBlock,i=n.blockContent;return!("bulletListItem"!==i.node.type.name&&"numberedListItem"!==i.node.type.name&&"checkListItem"!==i.node.type.name||!r)&&e._tiptapEditor.commands.first((function(e){var t=e.state,n=e.chain,r=e.commands;return[function(){return r.command((function(){return 0===i.node.childCount&&r.command(zC(o.beforePos,{type:"paragraph",props:{}}))}))},function(){return r.command((function(){return i.node.childCount>0&&(n().deleteSelection().command(Sk(t.selection.from,!0)).run(),!0)}))}]}))},Bk=bw({},Vw),Ok=Kw({name:"bulletListItem",content:"inline*",group:"blockContent",priority:90,addInputRules:function(){return[new Bs({find:new RegExp("^[-+*]\\s$"),handler:function(e){var t=e.state,n=e.chain,r=e.range,o=iC(t);!o.isBlockContainer||"inline*"!==o.blockContent.node.type.spec.content||n().command(zC(o.bnBlock.beforePos,{type:"bulletListItem",props:{}})).deleteRange({from:r.from,to:r.to})}})]},addKeyboardShortcuts:function(){var e=this;return{Enter:function(){return Mk(e.options.editor)},"Mod-Shift-8":function(){var t=iC(e.editor.state);return!t.isBlockContainer||"inline*"!==t.blockContent.node.type.spec.content||e.editor.commands.command(zC(t.bnBlock.beforePos,{type:"bulletListItem",props:{}}))}}},parseHTML:function(){var e=this;return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:function(e){var t;if("string"==typeof e)return!1;var n=e.parentElement;return null!==n&&("UL"===n.tagName||"DIV"===n.tagName&&"UL"===(null==(t=n.parentElement)?void 0:t.tagName))&&{}},getContent:function(t,n){return Fk(t,n,e.name)},node:"bulletListItem"}]},renderHTML:function(e){var t,n,r=e.HTMLAttributes;return Lw(this.name,"p",bw(bw({},(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{}),r),(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{})}}),Tk=Jw(Ok,Bk),Pk=bw(bw({},Vw),{},{checked:{default:!1}}),Nk=Kw({name:"checkListItem",content:"inline*",group:"blockContent",addAttributes:function(){return Gw(Pk)},addInputRules:function(){return[new Bs({find:new RegExp("\\[\\s*\\]\\s$"),handler:function(e){var t=e.state,n=e.chain,r=e.range,o=iC(t);!o.isBlockContainer||"inline*"!==o.blockContent.node.type.spec.content||n().command(zC(o.bnBlock.beforePos,{type:"checkListItem",props:{checked:!1}})).deleteRange({from:r.from,to:r.to})}}),new Bs({find:new RegExp("\\[[Xx]\\]\\s$"),handler:function(e){var t=e.state,n=e.chain,r=e.range,o=iC(t);!o.isBlockContainer||"inline*"!==o.blockContent.node.type.spec.content||n().command(zC(o.bnBlock.beforePos,{type:"checkListItem",props:{checked:!0}})).deleteRange({from:r.from,to:r.to})}})]},addKeyboardShortcuts:function(){var e=this;return{Enter:function(){return Mk(e.options.editor)},"Mod-Shift-9":function(){var t=iC(e.editor.state);return!t.isBlockContainer||"inline*"!==t.blockContent.node.type.spec.content||e.editor.commands.command(zC(t.bnBlock.beforePos,{type:"checkListItem",props:{}}))}}},parseHTML:function(){var e=this;return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"input",getAttrs:function(e){return"string"!=typeof e&&!e.closest("[data-content-type]")&&!e.closest("li")&&"checkbox"===e.type&&{checked:e.checked}},node:"checkListItem"},{tag:"li",getAttrs:function(e){var t;if("string"==typeof e)return!1;var n=e.parentElement;if(null===n)return!1;if("UL"===n.tagName||"DIV"===n.tagName&&"UL"===(null==(t=n.parentElement)?void 0:t.tagName)){var r=e.querySelector("input[type=checkbox]")||null;return null!==r&&{checked:r.checked}}return!1},getContent:function(t,n){return Fk(t,n,e.name)},node:"checkListItem"}]},renderHTML:function(e){var t,n,r=e.node,o=e.HTMLAttributes,i=document.createElement("input");i.type="checkbox",i.checked=r.attrs.checked,r.attrs.checked&&i.setAttribute("checked","");var a=Lw(this.name,"p",bw(bw({},(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{}),o),(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{}),s=a.dom,u=a.contentDOM;return s.insertBefore(i,u),{dom:s,contentDOM:u}},addNodeView:function(){var e=this;return function(t){var n,r,o=t.node,i=t.getPos,a=t.editor,s=t.HTMLAttributes,u=document.createElement("div"),l=document.createElement("div");l.contentEditable="false";var c=document.createElement("input");c.type="checkbox",c.checked=o.attrs.checked,o.attrs.checked&&c.setAttribute("checked","");var d=function(){if(a.isEditable){if("boolean"!=typeof i){var t=tC(a.state.doc,i());if("blockContainer"!==t.node.type.name)throw new Error("Expected blockContainer node, got ".concat(t.node.type.name));e.editor.commands.command(zC(t.posBeforeNode,{type:"checkListItem",props:{checked:c.checked}}))}}else c.checked=!c.checked};c.addEventListener("change",d);var f=Lw(e.name,"p",bw(bw({},(null==(n=e.options.domAttributes)?void 0:n.blockContent)||{}),s),(null==(r=e.options.domAttributes)?void 0:r.inlineContent)||{}),p=f.dom,h=f.contentDOM;if("boolean"!=typeof i){var m="label-"+e.editor.state.doc.resolve(i()).node().attrs.id;c.setAttribute("aria-labelledby",m),h.id=m}return p.removeChild(h),p.appendChild(u),u.appendChild(l),u.appendChild(h),l.appendChild(c),{dom:p,contentDOM:h,destroy:function(){c.removeEventListener("change",d)}}}}}),_k=Jw(Nk,Pk),jk=new jn("numbered-list-indexing"),Ik=bw(bw({},Vw),{},{start:{default:void 0,type:"number"}}),Rk=Kw({name:"numberedListItem",content:"inline*",group:"blockContent",priority:90,addAttributes:function(){return bw(bw({},Gw(Ik)),{},{index:{default:null,parseHTML:function(e){return e.getAttribute("data-index")},renderHTML:function(e){return{"data-index":e.index}}}})},addInputRules:function(){return[new Bs({find:new RegExp("^(\\d+)\\.\\s$"),handler:function(e){var t=e.state,n=e.chain,r=e.range,o=e.match,i=iC(t);if(i.isBlockContainer&&"inline*"===i.blockContent.node.type.spec.content&&"numberedListItem"!==i.blockNoteType){var a=parseInt(o[1]);n().command(zC(i.bnBlock.beforePos,{type:"numberedListItem",props:1===a&&{}||{start:a}})).deleteRange({from:r.from,to:r.to})}}})]},addKeyboardShortcuts:function(){var e=this;return{Enter:function(){return Mk(e.options.editor)},"Mod-Shift-7":function(){var t=iC(e.editor.state);return!t.isBlockContainer||"inline*"!==t.blockContent.node.type.spec.content||e.editor.commands.command(zC(t.bnBlock.beforePos,{type:"numberedListItem",props:{}}))}}},addProseMirrorPlugins:function(){return[new Pn({key:jk,appendTransaction:function(e,t,n){var r=n.tr;r.setMeta("numberedListIndexing",!0);var o=!1;return n.doc.descendants((function(e,t){var n;if("blockContainer"===e.type.name&&"numberedListItem"===e.firstChild.type.name){var i="".concat(e.firstChild.attrs.start||1),a=rC({posBeforeNode:t,node:e});if(!a.isBlockContainer)throw new Error("impossible");var s=r.doc.resolve(a.bnBlock.beforePos).nodeBefore;if(s){var u=rC({posBeforeNode:a.bnBlock.beforePos-s.nodeSize,node:s});if("numberedListItem"===u.blockNoteType){if(!u.isBlockContainer)throw new Error("impossible");var l=u.blockContent.node.attrs.index;i=(parseInt(l)+1).toString()}}var c=a.blockContent.node,d=c.attrs.index,f="numberedListItem"!==(null==(n=null==s?void 0:s.firstChild)?void 0:n.type.name);if(d!==i||c.attrs.start&&!f){o=!0;var p=c.attrs,h=p.start,m=uw(p,XD);r.setNodeMarkup(a.blockContent.beforePos,void 0,bw(bw({},m),{},{index:i},"number"==typeof h&&f&&{start:h}))}}})),o?r:null}})]},parseHTML:function(){var e=this;return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:function(e){var t;if("string"==typeof e)return!1;var n=e.parentElement;if(null===n)return!1;if("OL"===n.tagName||"DIV"===n.tagName&&"OL"===(null==(t=n.parentElement)?void 0:t.tagName)){var r=parseInt(n.getAttribute("start")||"1")||1;return e.previousSibling||1===r?{}:{start:r}}return!1},getContent:function(t,n){return Fk(t,n,e.name)},priority:300,node:"numberedListItem"}]},renderHTML:function(e){var t,n,r=e.HTMLAttributes;return Lw(this.name,"p",bw(bw({},(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{}),r),(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{})}}),Lk=Jw(Rk,Ik),Hk=bw({},Vw),Vk=Kw({name:"paragraph",content:"inline*",group:"blockContent",addKeyboardShortcuts:function(){var e=this;return{"Mod-Alt-0":function(){var t=iC(e.editor.state);return!t.isBlockContainer||"inline*"!==t.blockContent.node.type.spec.content||e.editor.commands.command(zC(t.bnBlock.beforePos,{type:"paragraph",props:{}}))}}},parseHTML:function(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"p",getAttrs:function(e){var t;return!("string"==typeof e||null==(t=e.textContent)||!t.trim())&&{}},node:"paragraph"}]},renderHTML:function(e){var t,n,r=e.HTMLAttributes;return Lw(this.name,"p",bw(bw({},(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{}),r),(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{})}}),zk=Jw(Vk,Hk),$k=bw({},Vw),Uk=Kw({name:"quote",content:"inline*",group:"blockContent",addInputRules:function(){return[new Bs({find:new RegExp("^>\\s$"),handler:function(e){var t=e.state,n=e.chain,r=e.range,o=iC(t);!o.isBlockContainer||"inline*"!==o.blockContent.node.type.spec.content||n().command(zC(o.bnBlock.beforePos,{type:"quote",props:{}})).deleteRange({from:r.from,to:r.to})}})]},addKeyboardShortcuts:function(){var e=this;return{"Mod-Alt-q":function(){var t=iC(e.editor.state);return!t.isBlockContainer||"inline*"!==t.blockContent.node.type.spec.content||e.editor.commands.command(zC(t.bnBlock.beforePos,{type:"quote"}))}}},parseHTML:function(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"blockquote",node:"quote"}]},renderHTML:function(e){var t,n,r=e.HTMLAttributes;return Lw(this.name,"blockquote",bw(bw({},(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{}),r),(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{})}}),Gk=Jw(Uk,$k),Wk=Hs.create({name:"BlockNoteTableExtension",addProseMirrorPlugins:function(){return[Lc({cellMinWidth:35,defaultCellMinWidth:120,View:null}),Gc()]},addKeyboardShortcuts:function(){var e=this;return{Enter:function(){return!(!e.editor.state.selection.empty||"tableParagraph"!==e.editor.state.selection.$head.parent.type.name||(e.editor.commands.insertContent({type:"hardBreak"}),0))},Backspace:function(){var t=e.editor.state.selection,n=t.empty,r=0===t.$head.parentOffset,o="tableParagraph"===t.$head.node().type.name;return n&&r&&o},Tab:function(){return e.editor.commands.command((function(e){var t=e.state,n=e.dispatch,r=e.view;return Dc(1)(t,n,r)}))},"Shift-Tab":function(){return e.editor.commands.command((function(e){var t=e.state,n=e.dispatch,r=e.view;return Dc(-1)(t,n,r)}))}}},extendNodeSchema:function(e){return{tableRole:Cs(ms(e,"tableRole",{name:e.name,options:e.options,storage:e.storage}))}}}),qk={textColor:Vw.textColor},Kk=Kw({name:"table",content:"tableRow+",group:"blockContent",tableRole:"table",marks:"deletion insertion modification",isolating:!0,parseHTML:function(){return[{tag:"table"}]},renderHTML:function(e){var t,n,r=e.HTMLAttributes;return Lw(this.name,"table",bw(bw({},(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{}),r),(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{})},addNodeView:function(){var e=this;return function(t){var n,r=t.node,o=t.HTMLAttributes,i=function(e){function t(e,n,r){var o;dw(this,t),(o=fw(this,t,[e,n])).node=e,o.cellMinWidth=n,o.blockContentHTMLAttributes=r;var i=document.createElement("div");i.className=Iw("bn-block-content",r.class),i.setAttribute("data-content-type","table");for(var a=0,s=Object.entries(r);a<s.length;a++){var u=iw(s[a],2),l=u[0],c=u[1];"class"!==l&&i.setAttribute(l,c)}var d=o.dom,f=document.createElement("div");f.className="tableWrapper-inner",f.appendChild(d.firstChild),d.appendChild(f),i.appendChild(d);var p=document.createElement("div");return p.className="table-widgets-container",p.style.position="relative",d.appendChild(p),o.dom=i,o}return pw(t,e),cw(t,[{key:"ignoreMutation",value:function(e){return!e.target.closest(".tableWrapper-inner")||function(e,t,n){var r=nw(gw(e.prototype),"ignoreMutation",n);return"function"==typeof r?function(e){return r.apply(n,e)}:r}(t,0,this)([e])}}])}(jc);return new i(r,120,bw(bw({},(null==(n=e.options.domAttributes)?void 0:n.blockContent)||{}),o))}}}),Zk=Kw({name:"tableParagraph",group:"tableContent",content:"inline*",parseHTML:function(){return[{tag:"p",getAttrs:function(e){if("string"==typeof e||!e.textContent||!e.closest("[data-content-type]"))return!1;var t=e.parentElement;return null!==t&&("TD"===t.tagName||"TH"===t.tagName)&&{}},node:"tableParagraph"}]},renderHTML:function(e){return["p",e.HTMLAttributes,0]}}),Jk=Lu.create({name:"tableRow",addOptions:function(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)+",tableRole:"row",marks:"deletion insertion modification",parseHTML:function(){return[{tag:"tr"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["tr",bs(this.options.HTMLAttributes,t),0]}});function Xk(e,t){var n=He.fromSchema(t).parse(e,{topNode:t.nodes.blockGroup.create()}),r=[];return n.content.descendants((function(e){if(e.isInline)return r.push(e),!1})),K.fromArray(r)}var Yk=Jw(Kk,qk,[Wk,Zk,Pl.extend({content:"tableContent+",parseHTML:function(){return[{tag:"th",getContent:function(e,t){return Xk(e,t)}}]}}),Tl.extend({content:"tableContent+",parseHTML:function(){return[{tag:"td",getContent:function(e,t){return Xk(e,t)}}]}}),Jk]),Qk=function(e){return{url:e.src||void 0,previewWidth:e.width||void 0}},eE={type:"video",propSchema:{textAlignment:Vw.textAlignment,backgroundColor:Vw.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},content:"none",isFileBlock:!0,fileBlockAccept:["video/*"]},tE=function(e){if("VIDEO"===e.tagName)return e.closest("figure")?void 0:Qk(e);if("FIGURE"===e.tagName){var t=ek(e,"video");if(!t)return;var n=t.targetElement,r=t.caption;return bw(bw({},Qk(n)),{},{caption:r})}},nE=eC(eE,{render:function(e,t){var n=document.createElement("div");n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"></path></svg>';var r=document.createElement("div");r.className="bn-visual-media-wrapper";var o=document.createElement("video");return o.className="bn-visual-media",t.resolveFileUrl?t.resolveFileUrl(e.props.url).then((function(e){o.src=e})):o.src=e.props.url,o.controls=!0,o.contentEditable="false",o.draggable=!1,o.width=e.props.previewWidth,r.appendChild(o),Ck(e,t,{dom:r},r,t.dictionary.file_blocks.video.add_button_text,n.firstElementChild)},parse:tE,toExternalHTML:function(e){if(!e.props.url){var t=document.createElement("p");return t.textContent="Add video",{dom:t}}var n;return e.props.showPreview?((n=document.createElement("video")).src=e.props.url,e.props.previewWidth&&(n.width=e.props.previewWidth)):((n=document.createElement("a")).href=e.props.url,n.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?nk(n,e.props.caption):rk(n,e.props.caption):{dom:n}}}),rE={paragraph:zk,heading:wk,quote:Gk,codeBlock:dk,bulletListItem:Tk,numberedListItem:Lk,checkListItem:_k,table:Yk,file:yk,image:Ak,video:nE,audio:sk},oE=Xw(rE),iE={bold:bC(bl,"boolean"),italic:bC(Fl,"boolean"),underline:bC(Ol,"boolean"),strike:bC(Bl,"boolean"),code:bC(Cl,"boolean"),textColor:hk,backgroundColor:pk},aE=(DC(iE),{text:{config:"text",implementation:{}},link:{config:"link",implementation:{}}}),sE=yC(aE);function uE(e,t){return e in t.schema.blockSchema&&t.schema.blockSchema[e]===oE[e]}function lE(e,t){return e in t.schema.inlineContentSchema&&t.schema.inlineContentSchema[e]===sE[e]}function cE(e,t){return e.type in t.schema.blockSchema&&t.schema.blockSchema[e.type].isFileBlock||!1}function dE(e,t){return t.schema.blockSchema[e.type].isFileBlock&&!e.props.url}function fE(e,t,n){return t in n.schema.blockSchema&&e in n.schema.blockSchema[t].propSchema&&n.schema.blockSchema[t].propSchema[e]===Vw[e]}function pE(e,t,n){return fE(e,t.type,n)}function hE(e){return e instanceof ac}function mE(e,t){var n,r=e.getTextCursorPosition().block;if(void 0===r.content)throw new Error("Slash Menu open in a block that doesn't contain content.");return Array.isArray(r.content)&&(1===r.content.length&&Sw(r.content[0])&&"text"===r.content[0].type&&"/"===r.content[0].text||0===r.content.length)?(n=e.updateBlock(r,t),e.setTextCursorPosition(n)):(n=e.insertBlocks([t],r,"after")[0],e.setTextCursorPosition(e.getTextCursorPosition().nextBlock)),function(e){for(var t=e.getTextCursorPosition().block,n=e.schema.blockSchema[t.type].content;"none"===n;){if(void 0===(t=e.getTextCursorPosition().nextBlock))return;n=e.schema.blockSchema[t.type].content,e.setTextCursorPosition(t,"end")}}(e),n}function vE(e,t){return e.filter((function(e){var n=e.title,r=e.aliases;return n.toLowerCase().includes(t.toLowerCase())||r&&0!==r.filter((function(e){return e.toLowerCase().includes(t.toLowerCase())})).length}))}function gE(e){return e&&Object.fromEntries(Object.entries(e).filter((function(e){return void 0!==iw(e,2)[1]})))}var yE,bE=function(){function e(t){dw(this,e),Ew(this,"blockSpecs"),Ew(this,"inlineContentSpecs"),Ew(this,"styleSpecs"),Ew(this,"blockSchema"),Ew(this,"inlineContentSchema"),Ew(this,"styleSchema"),Ew(this,"BlockNoteEditor","only for types"),Ew(this,"Block","only for types"),Ew(this,"PartialBlock","only for types"),this.blockSpecs=gE(null==t?void 0:t.blockSpecs)||rE,this.inlineContentSpecs=gE(null==t?void 0:t.inlineContentSpecs)||aE,this.styleSpecs=gE(null==t?void 0:t.styleSpecs)||iE,this.blockSchema=Xw(this.blockSpecs),this.inlineContentSchema=yC(this.inlineContentSpecs),this.styleSchema=DC(this.styleSpecs)}return cw(e,null,[{key:"create",value:function(t){return new e(t)}}])}(),DE=eC({type:"pageBreak",propSchema:{},content:"none",isFileBlock:!1,isSelectable:!1},{render:function(){var e=document.createElement("div");return e.className="bn-page-break",e.setAttribute("data-page-break",""),{dom:e}},parse:function(e){if("DIV"===e.tagName&&e.hasAttribute("data-page-break"))return{type:"pageBreak"}},toExternalHTML:function(){var e=document.createElement("div");return e.setAttribute("data-page-break",""),{dom:e}}});function wE(e){return e.map((function(e){return"columnList"===e.type?e.children.map((function(e){return wE(e.children)})).flat():bw(bw({},e),{},{children:wE(e.children)})})).flat()}function CE(e,t,n){e.transact((function(r){var o,i=(null==(o=e.getSelection())?void 0:o.blocks)||[e.getTextCursorPosition().block],a=function(e){return e.transact((function(e){var t=tC(e.doc,e.selection.anchor);if(e.selection instanceof ac)return{type:"cell",anchorBlockId:t.node.attrs.id,anchorCellOffset:e.selection.$anchorCell.pos-t.posBeforeNode,headCellOffset:e.selection.$headCell.pos-t.posBeforeNode};if(e.selection instanceof Dn)return{type:"node",anchorBlockId:t.node.attrs.id};var n=tC(e.doc,e.selection.head);return{type:"text",anchorBlockId:t.node.attrs.id,headBlockId:n.node.attrs.id,anchorOffset:e.selection.anchor-t.posBeforeNode,headOffset:e.selection.head-n.posBeforeNode}}))}(e);e.removeBlocks(i),e.insertBlocks(wE(i),t,n),function(e,t){var n,r,o,i=null==(n=RC(t.anchorBlockId,e.doc))?void 0:n.posBeforeNode;if(void 0===i)throw new Error("Could not find block with ID ".concat(t.anchorBlockId," to update selection"));if("cell"===t.type)o=ac.create(e.doc,i+t.anchorCellOffset,i+t.headCellOffset);else if("node"===t.type)o=Dn.create(e.doc,i+1);else{var a=null==(r=RC(t.headBlockId,e.doc))?void 0:r.posBeforeNode;if(void 0===a)throw new Error("Could not find block with ID ".concat(t.headBlockId," to update selection"));o=yn.create(e.doc,i+t.anchorOffset,a+t.headOffset)}e.setSelection(o)}(r,a)}))}function kE(e){return!e||"columnList"!==e.type}function EE(e,t,n){var r,o;if(t?t.children.length>0?(r=t.children[t.children.length-1],o="after"):(r=t,o="before"):n&&(r=n,o="before"),r&&o){var i=e.getParentBlock(r);return kE(i)?{referenceBlock:r,placement:o}:EE(e,"after"===o?r:e.getPrevBlock(r),i)}}function xE(e,t,n){var r,o;if(t?t.children.length>0?(r=t.children[0],o="before"):(r=t,o="after"):n&&(r=n,o="after"),r&&o){var i=e.getParentBlock(r);return kE(i)?{referenceBlock:r,placement:o}:xE(e,"before"===o?r:e.getNextBlock(r),i)}}function AE(e){e.transact((function(){var t=e.getSelection(),n=(null==t?void 0:t.blocks[0])||e.getTextCursorPosition().block,r=EE(e,e.getPrevBlock(n),e.getParentBlock(n));r&&CE(e,r.referenceBlock,r.placement)}))}function FE(e){e.transact((function(){var t=e.getSelection(),n=(null==t?void 0:t.blocks[(null==t?void 0:t.blocks.length)-1])||e.getTextCursorPosition().block,r=xE(e,e.getNextBlock(n),e.getParentBlock(n));r&&CE(e,r.referenceBlock,r.placement)}))}function SE(e){return e.exec((function(e,t){return function(e,t){return function(n,r){var o=n.selection,i=o.$from,a=o.$to,s=i.blockRange(a,(function(e){return e.childCount>0&&("blockGroup"===e.type.name||"column"===e.type.name)}));if(!s)return!1;var u=s.startIndex;if(0===u)return!1;var l=s.parent.child(u-1);if(l.type!==e)return!1;if(r){var c=l.lastChild&&l.lastChild.type===t,d=K.from(c?e.create():null),f=new ee(K.from(e.create(null,K.from(t.create(null,d)))),c?3:1,0),p=s.start,h=s.end;r(n.tr.step(new At(p-(c?3:1),h,p,h,f,1,!0)).scrollIntoView())}return!0}}(e.schema.nodes.blockContainer,e.schema.nodes.blockGroup)(e,t)}))}function ME(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"start",r="string"==typeof t?t:t.id,o=lC(sC(e.doc)),i=RC(r,e.doc);if(!i)throw new Error("Block with ID ".concat(r," not found"));var a=rC(i),s=o.blockSchema[a.blockNoteType].content;if(a.isBlockContainer){var u=a.blockContent;if("none"===s)return void e.setSelection(Dn.create(e.doc,u.beforePos));if("inline"===s)"start"===n?e.setSelection(yn.create(e.doc,u.beforePos+1)):e.setSelection(yn.create(e.doc,u.afterPos-1));else{if("table"!==s)throw new Nw(s);"start"===n?e.setSelection(yn.create(e.doc,u.beforePos+4)):e.setSelection(yn.create(e.doc,u.afterPos-4))}}else ME(e,("start"===n?a.childContainer.node.firstChild:a.childContainer.node.lastChild).attrs.id,n)}function BE(){return OE.apply(this,arguments)}function OE(){return(OE=tw(QD().mark((function e(){var t;return QD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!yE){e.next=2;break}return e.abrupt("return",yE);case 2:return e.next=4,Promise.all([Promise.all([a.e(5039),a.e(3059)]).then(a.bind(a,3059)),a.e(3861).then(a.bind(a,3861)),Promise.all([a.e(5039),a.e(55)]).then(a.bind(a,55)),a.e(6753).then(a.bind(a,6753)),Promise.all([a.e(2643),a.e(6592),a.e(3119)]).then(a.bind(a,3119)),Promise.resolve().then(a.t.bind(a,9349,19)),Promise.all([a.e(2643),a.e(1691)]).then(a.bind(a,1691)),a.e(7043).then(a.bind(a,7043)),Promise.all([a.e(2643),a.e(6531)]).then(a.bind(a,6531)),Promise.all([a.e(2643),a.e(6592),a.e(7172)]).then(a.bind(a,7172))]);case 4:return t=e.sent,e.abrupt("return",yE={rehypeParse:t[0],rehypeStringify:t[1],unified:t[2],hastUtilFromDom:t[3],rehypeRemark:t[4],remarkGfm:t[5],remarkStringify:t[6],remarkParse:t[7],remarkRehype:t[8],rehypeFormat:t[9]});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function TE(){var e=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(t){for(var n=t.children.length,r=0;r<n;r++){var o=t.children[r];if("element"===o.type&&(e(o),"u"===o.tagName))if(o.children.length>0){var i;(i=t.children).splice.apply(i,[r,1].concat(ow(o.children)));var a=o.children.length-1;n+=a,r+=a}else t.children.splice(r,1),n--,r--}}));return e}function PE(){var e=yE;if(!e)throw new Error("addSpacesToCheckboxes requires ESM dependencies to be initialized");var t=function(n){var r;if(n.children&&"length"in n.children&&n.children.length)for(var o=n.children.length-1;o>=0;o--){var i=n.children[o],a=o+1<n.children.length?n.children[o+1]:void 0;"element"===i.type&&"input"===i.tagName&&"checkbox"===(null==(r=i.properties)?void 0:r.type)&&"element"===(null==a?void 0:a.type)&&"p"===a.tagName?(a.tagName="span",a.children.splice(0,0,e.hastUtilFromDom.fromDom(document.createTextNode(" ")))):t(i)}};return t}function NE(e){var t=yE;if(!t)throw new Error("cleanHTMLToMarkdown requires ESM dependencies to be initialized");return t.unified.unified().use(t.rehypeParse.default,{fragment:!0}).use(TE).use(PE).use(t.rehypeRemark.default).use(t.remarkGfm.default).use(t.remarkStringify.default,{handlers:{text:function(e){return e.value}}}).processSync(e).value}function _E(e,t,n,r){return jE.apply(this,arguments)}function jE(){return jE=tw(QD().mark((function e(t,n,r,o){var i;return QD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BE();case 2:return i=ZC(n,r).exportBlocks(t,o),e.abrupt("return",NE(i));case 4:case"end":return e.stop()}}),e)}))),jE.apply(this,arguments)}bE.create({blockSpecs:{pageBreak:DE}});var IE=null;function RE(e){if("string"==typeof e){var t=(IE||(IE=document.implementation.createHTMLDocument("title"))).createElement("div");t.innerHTML=e,e=t}return function(e){e.querySelectorAll("li > ul, li > ol").forEach((function(e){var t=function(e){return Array.prototype.indexOf.call(e.parentElement.childNodes,e)}(e),n=e.parentElement,r=Array.from(n.childNodes).slice(t+1);e.remove(),r.forEach((function(e){e.remove()})),n.insertAdjacentElement("afterend",e),r.reverse().forEach((function(t){if(!function(e){return 3===e.nodeType&&!/\S/.test(e.nodeValue||"")}(t)){var n=document.createElement("li");n.append(t),e.insertAdjacentElement("afterend",n)}})),0===n.childNodes.length&&n.remove()}))}(e),function(e){e.querySelectorAll("li + ul, li + ol").forEach((function(e){var t,n,r=e.previousElementSibling,o=document.createElement("div");r.insertAdjacentElement("afterend",o),o.append(r);var i=document.createElement("div");for(i.setAttribute("data-node-type","blockGroup"),o.append(i);"UL"===(null==(t=o.nextElementSibling)?void 0:t.nodeName)||"OL"===(null==(n=o.nextElementSibling)?void 0:n.nodeName);)i.append(o.nextElementSibling)}))}(e),e}function LE(e,t){return HE.apply(this,arguments)}function HE(){return HE=tw(QD().mark((function e(t,n){var r,o,i,a;return QD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=RE(t),o=He.fromSchema(n).parse(r,{topNode:n.nodes.blockGroup.create()}),i=[],a=0;a<o.childCount;a++)i.push(gC(o.child(a),n));return e.abrupt("return",i);case 3:case"end":return e.stop()}}),e)}))),HE.apply(this,arguments)}function VE(e,t){var n=t.value?t.value:"",r={};t.lang&&(r["data-language"]=t.lang);var o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(o.data={meta:t.meta}),e.patch(t,o),o={type:"element",tagName:"pre",properties:{},children:[o=e.applyData(t,o)]},e.patch(t,o),o}function zE(e){return $E.apply(this,arguments)}function $E(){return($E=tw(QD().mark((function e(t){var n;return QD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BE();case 2:return n=e.sent,e.abrupt("return",n.unified.unified().use(n.remarkParse.default).use(n.remarkGfm.default).use(n.remarkRehype.default,{handlers:bw(bw({},n.remarkRehype.defaultHandlers),{},{code:VE})}).use(n.rehypeStringify.default).processSync(t).value);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function UE(e,t){return GE.apply(this,arguments)}function GE(){return GE=tw(QD().mark((function e(t,n){var r;return QD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zE(t);case 2:return r=e.sent,e.abrupt("return",LE(r,n));case 4:case"end":return e.stop()}}),e)}))),GE.apply(this,arguments)}var WE=["vscode-editor-data","blocknote/html","text/markdown","text/html","text/plain","Files"];function qE(e,t){if(!e.startsWith(".")||!t.startsWith("."))throw new Error("The strings provided are not valid file extensions.");return e===t}function KE(e,t){var n=e.split("/"),r=t.split("/");if(2!==n.length)throw new Error("The string ".concat(e," is not a valid MIME type."));if(2!==r.length)throw new Error("The string ".concat(t," is not a valid MIME type."));return"*"===n[1]||"*"===r[1]?n[0]===r[0]:("*"===n[0]||"*"===r[0]||n[0]===r[0])&&n[1]===r[1]}function ZE(e,t,n){return Array.isArray(t.content)&&0===t.content.length?e.updateBlock(t,n).id:e.insertBlocks([n],t,"after")[0].id}function JE(e,t){return XE.apply(this,arguments)}function XE(){return XE=tw(QD().mark((function e(t,n){var r,o,i,a,s,u,l,c,d,f,p;return QD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.uploadFile){e.next=3;break}return console.warn("Attempted ot insert file, but uploadFile is not set in the BlockNote editor options"),e.abrupt("return");case 3:if(null!==(o="dataTransfer"in t?t.dataTransfer:t.clipboardData)){e.next=6;break}return e.abrupt("return");case 6:i=null,a=rw(WE),e.prev=8,a.s();case 10:if((s=a.n()).done){e.next=17;break}if(u=s.value,!o.types.includes(u)){e.next=15;break}return i=u,e.abrupt("break",17);case 15:e.next=10;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),a.e(e.t0);case 22:return e.prev=22,a.f(),e.finish(22);case 25:if("Files"===i){e.next=27;break}return e.abrupt("return");case 27:if(l=o.items){e.next=30;break}return e.abrupt("return");case 30:t.preventDefault(),c=Object.values(n.schema.blockSchema).filter((function(e){return e.isFileBlock})),d=QD().mark((function e(){var o,i,a,s,u,d,f,h,m,v,g,y,b,D,w,C,k;return QD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o="file",i=rw(c),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=27;break}s=a.value,u=rw(s.fileBlockAccept||[]),e.prev=7,u.s();case 9:if((d=u.n()).done){e.next=17;break}if(f=d.value,h=f.startsWith("."),!(m=l[p].getAsFile())||!(!h&&m.type&&KE(l[p].type,f)||h&&qE("."+m.name.split(".").pop(),f))){e.next=15;break}return o=s.type,e.abrupt("break",17);case 15:e.next=9;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),u.e(e.t0);case 22:return e.prev=22,u.f(),e.finish(22);case 25:e.next=4;break;case 27:e.next=32;break;case 29:e.prev=29,e.t1=e.catch(2),i.e(e.t1);case 32:return e.prev=32,i.f(),e.finish(32);case 35:if(!(v=l[p].getAsFile())){e.next=56;break}if(g={type:o,props:{name:v.name}},"paste"!==t.type){e.next=43;break}b=n.getTextCursorPosition().block,y=ZE(n,b,g),e.next=51;break;case 43:if("drop"!==t.type){e.next=50;break}if(D={left:t.clientX,top:t.clientY},w=null==(r=n.prosemirrorView)?void 0:r.posAtCoords(D)){e.next=47;break}return e.abrupt("return",{v:void 0});case 47:y=n.transact((function(e){var t=tC(e.doc,w.pos);return ZE(n,n.getBlock(t.node.attrs.id),g)})),e.next=51;break;case 50:return e.abrupt("return",{v:void 0});case 51:return e.next=53,n.uploadFile(v,y);case 53:C=e.sent,k="string"==typeof C?{props:{url:C}}:bw({},C),n.updateBlock(y,k);case 56:case"end":return e.stop()}}),e,null,[[2,29,32,35],[7,19,22,25]])})),p=0;case 34:if(!(p<l.length)){e.next=42;break}return e.delegateYield(d(),"t1",36);case 36:if(!(f=e.t1)){e.next=39;break}return e.abrupt("return",f.v);case 39:p++,e.next=34;break;case 42:case"end":return e.stop()}}),e,null,[[8,19,22,25]])}))),XE.apply(this,arguments)}var YE=function(e){return Hs.create({name:"dropFile",addProseMirrorPlugins:function(){return[new Pn({props:{handleDOMEvents:{drop:function(t,n){if(e.isEditable){for(var r=null,o=0,i=WE;o<i.length;o++){var a=i[o];if(n.dataTransfer.types.includes(a)){r=a;break}}return null===r||"Files"===r&&(JE(n,e),!0)}}}}})]}})},QE=/(^|\n) {0,3}#{1,6} {1,8}[^\n]{1,64}\r?\n\r?\n\s{0,32}\S/,ex=new RegExp("(?:\\s|^)(_|__|\\*|\\*\\*|~~|==|\\+\\+)(?!\\s).{1,64}(?<!\\s)(?=\\1)"),tx=/\[[^\]]{1,128}\]\(https?:\/\/\S{1,999}\)/,nx=new RegExp("(?:\\s|^)`(?!\\s)[^`]{1,48}(?<!\\s)`([^\\w]|$)"),rx=/(?:^|\n)\s{0,5}-\s{1}[^\n]+\n\s{0,15}-\s/,ox=/(?:^|\n)\s{0,5}\d+\.\s{1}[^\n]+\n\s{0,15}\d+\.\s/,ix=/\n{2} {0,3}-{2,48}\n{2}/,ax=/(?:\n|^)(```|~~~|\$\$)(?!`|~)[^\s]{0,64} {0,64}[^\n]{0,64}\n[\s\S]{0,9999}?\s*\1 {0,64}(?:\n+|$)/,sx=/(?:\n|^)(?!\s)\w[^\n]{0,64}\r?\n(-|=)\1{0,64}\n\n\s{0,64}(\w|$)/,ux=/(?:^|(\r?\n\r?\n))( {0,3}>[^\n]{1,333}\n){1,999}($|(\r?\n))/,lx=/^\s*\|(.+\|)+\s*$/m,cx=/^\s*\|(\s*[-:]+[-:]\s*\|)+\s*$/m,dx=/^\s*\|(.+\|)+\s*$/m;function fx(){return fx=tw(QD().mark((function e(t,n){var r,o,i,a,s;return QD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.state.schema,t.clipboardData){e.next=3;break}return e.abrupt("return",!1);case 3:if(o=t.clipboardData.getData("text/plain")){e.next=6;break}return e.abrupt("return",!1);case 6:if(r.nodes.codeBlock){e.next=8;break}return e.abrupt("return",(n.pasteText(o),!0));case 8:return i=t.clipboardData.getData("vscode-editor-data"),a=i?JSON.parse(i):void 0,s=null==a?void 0:a.mode,e.abrupt("return",!!s&&(n.pasteHTML('<pre><code class="language-'.concat(s,'">').concat(o.replace(/\r\n?/g,"\n"),"</code></pre>")),!0));case 10:case"end":return e.stop()}}),e)}))),fx.apply(this,arguments)}var px=function(e,t){return Hs.create({name:"pasteFromClipboard",addProseMirrorPlugins:function(){return[new Pn({props:{handleDOMEvents:{paste:function(n,r){if(r.preventDefault(),e.isEditable)return t({event:r,editor:e,defaultPasteHandler:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.prioritizeMarkdownOverHTML,o=void 0===n||n,i=t.plainTextAsMarkdown;return function(e){var t,n,r=e.event,o=e.editor,i=e.prioritizeMarkdownOverHTML,a=e.plainTextAsMarkdown;if(o.transact((function(e){return e.selection.$from.parent.type.spec.code&&e.selection.$to.parent.type.spec.code}))){var s=null==(t=r.clipboardData)?void 0:t.getData("text/plain");if(s)return o.pasteText(s),!0}for(var u=0,l=WE;u<l.length;u++){var c=l[u];if(r.clipboardData.types.includes(c)){n=c;break}}if(!n)return!0;if("vscode-editor-data"===n)return function(e,t){fx.apply(this,arguments)}(r,o.prosemirrorView),!0;if("Files"===n)return JE(r,o),!0;var d=r.clipboardData.getData(n);if("blocknote/html"===n)return o.pasteHTML(d,!0),!0;if("text/markdown"===n)return o.pasteMarkdown(d),!0;if(i){var f=r.clipboardData.getData("text/plain");if(function(e){return QE.test(e)||ex.test(e)||tx.test(e)||nx.test(e)||rx.test(e)||ox.test(e)||ix.test(e)||ax.test(e)||sx.test(e)||ux.test(e)||lx.test(e)||cx.test(e)||dx.test(e)}(f))return o.pasteMarkdown(f),!0}return"text/html"===n?(o.pasteHTML(d),!0):a?(o.pasteMarkdown(d),!0):(o.pasteText(d),!0)}({event:r,editor:e,prioritizeMarkdownOverHTML:o,plainTextAsMarkdown:void 0===i||i})}})}}}})]}})};function hx(e){var t=[];return e.descendants((function(e){var n,r,o=sC(e);return"blockContainer"===e.type.name&&"blockGroup"===(null==(n=e.firstChild)?void 0:n.type.name)||("columnList"===e.type.name&&1===e.childCount?(null==(r=e.firstChild)||r.forEach((function(e){t.push(gC(e,o))})),!1):!e.type.isInGroup("bnBlock")||(t.push(gC(e,o)),!1))})),t}function mx(e,t){"node"in e.state.selection&&"blockContent"===e.state.selection.node.type.spec.group&&t.transact((function(t){return t.setSelection(new Dn(t.doc.resolve(e.state.selection.from-1)))}));var n=e.serializeForClipboard(e.state.selection.content()).dom.innerHTML,r=e.state.selection.content().content,o=function(e,t,n){var r,o,i=!1,a=e.state.selection instanceof ac;if(!a){for(var s=e.state.doc.slice(e.state.selection.from,e.state.selection.to,!1).content,u=[],l=0;l<s.childCount;l++)u.push(s.child(l));i=void 0===u.find((function(e){return e.type.isInGroup("bnBlock")||"blockGroup"===e.type.name||"blockContent"===e.type.spec.group})),i&&(t=s)}var c=ZC(e.state.schema,n);if(a){"table"===(null==(r=t.firstChild)?void 0:r.type.name)&&(t=t.firstChild.content);var d=hC(t,n.schema.inlineContentSchema,n.schema.styleSchema);o="<table>".concat(c.exportInlineContent(d,{}),"</table>")}else if(i){var f=mC(t,n.schema.inlineContentSchema,n.schema.styleSchema);o=c.exportInlineContent(f,{})}else{var p=hx(t);o=c.exportBlocks(p,{})}return o}(e,r,t);return{clipboardHTML:n,externalHTML:o,markdown:NE(o)}}var vx=function(){var e=window.getSelection();if(!e||e.isCollapsed)return!0;for(var t=e.focusNode;t;){if(t instanceof HTMLElement&&"false"===t.getAttribute("contenteditable"))return!0;t=t.parentElement}return!1},gx=function(e,t,n){n.preventDefault(),n.clipboardData.clearData();var r=mx(t,e),o=r.clipboardHTML,i=r.externalHTML,a=r.markdown;n.clipboardData.setData("blocknote/html",o),n.clipboardData.setData("text/html",i),n.clipboardData.setData("text/plain",a)},yx=function(e){return Hs.create({name:"copyToClipboard",addProseMirrorPlugins:function(){return[new Pn({props:{handleDOMEvents:{copy:function(t,n){return vx()||gx(e,t,n),!0},cut:function(t,n){return vx()||(gx(e,t,n),t.editable&&t.dispatch(t.state.tr.deleteSelection())),!0},dragstart:function(t,n){if("node"in t.state.selection&&"blockContent"===t.state.selection.node.type.spec.group){e.transact((function(e){return e.setSelection(new Dn(e.doc.resolve(t.state.selection.from-1)))})),n.preventDefault(),n.dataTransfer.clearData();var r=mx(t,e),o=r.clipboardHTML,i=r.externalHTML,a=r.markdown;return n.dataTransfer.setData("blocknote/html",o),n.dataTransfer.setData("text/html",i),n.dataTransfer.setData("text/plain",a),!0}}}}})]}})},bx=Hs.create({name:"blockBackgroundColor",addGlobalAttributes:function(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{backgroundColor:{default:Vw.backgroundColor.default,parseHTML:function(e){return e.hasAttribute("data-background-color")?e.getAttribute("data-background-color"):Vw.backgroundColor.default},renderHTML:function(e){return e.backgroundColor===Vw.backgroundColor.default?{}:{"data-background-color":e.backgroundColor}}}}}]}}),Dx=function(){return cw((function e(){dw(this,e),Ew(this,"callbacks",{})}),[{key:"on",value:function(e,t){var n=this;return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),function(){return n.off(e,t)}}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=this.callbacks[e];i&&i.forEach((function(e){return e.apply(t,r)}))}},{key:"off",value:function(e,t){var n=this.callbacks[e];n&&(t?this.callbacks[e]=n.filter((function(e){return e!==t})):delete this.callbacks[e])}},{key:"removeAllListeners",value:function(){this.callbacks={}}}])}(),wx=function(e){function t(){var e;return dw(this,t),e=fw(this,t),Ew(e,"plugins",[]),e}return pw(t,e),cw(t,[{key:"addProsemirrorPlugin",value:function(e){this.plugins.push(e)}},{key:"priority",get:function(){}}],[{key:"key",value:function(){throw new Error("You must implement the key method in your extension")}}])}(Dx),Cx=function(e){function t(e){var n;return dw(this,t),n=fw(this,t),Ew(n,"provider"),Ew(n,"recentlyUpdatedCursors"),Ew(n,"renderCursor",(function(e,r){var o=n.recentlyUpdatedCursors.get(r);if(!o){var i,a=(null!==(i=n.collaboration.renderCursor)&&void 0!==i?i:t.defaultCursorRender)(e);"always"!==n.collaboration.showCursorLabels&&(a.addEventListener("mouseenter",(function(){var e=n.recentlyUpdatedCursors.get(r);e.element.setAttribute("data-active",""),e.hideTimeout&&(clearTimeout(e.hideTimeout),n.recentlyUpdatedCursors.set(r,{element:e.element,hideTimeout:void 0}))})),a.addEventListener("mouseleave",(function(){var e=n.recentlyUpdatedCursors.get(r);n.recentlyUpdatedCursors.set(r,{element:e.element,hideTimeout:setTimeout((function(){e.element.removeAttribute("data-active")}),2e3)})}))),o={element:a,hideTimeout:void 0},n.recentlyUpdatedCursors.set(r,o)}return o.element})),Ew(n,"updateUser",(function(e){n.provider.awareness.setLocalStateField("user",e)})),n.collaboration=e,n.provider=e.provider,n.recentlyUpdatedCursors=new Map,n.provider.awareness.setLocalStateField("user",e.user),"always"!==e.showCursorLabels&&n.provider.awareness.on("change",(function(e){var t,r=rw(e.updated);try{var o=function(){var e=t.value,r=n.recentlyUpdatedCursors.get(e);r&&(r.element.setAttribute("data-active",""),r.hideTimeout&&clearTimeout(r.hideTimeout),n.recentlyUpdatedCursors.set(e,{element:r.element,hideTimeout:setTimeout((function(){r.element.removeAttribute("data-active")}),2e3)}))};for(r.s();!(t=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}})),n.addProsemirrorPlugin(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.awarenessStateFilter,r=void 0===n?Xb:n,o=t.cursorBuilder,i=void 0===o?Yb:o,a=t.selectionBuilder,s=void 0===a?Qb:a,u=t.getSelection,l=void 0===u?function(e){return e.selection}:u,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cursor";return new Pn({key:Lb,state:{init:function(t,n){return tD(n,e,r,i,s)},apply:function(t,n,o,a){var u=Ib.getState(a),l=t.getMeta(Lb);return u&&u.isChangeOrigin||l&&l.awarenessUpdated?tD(a,e,r,i,s):n.map(t.mapping,t.doc)}},props:{decorations:function(e){return Lb.getState(e)}},view:function(t){var n=function(){t.docView&&function(e,t){Wb||(Wb=new Map,Gb(0,qb)),zp(Wb,e,Hp).set(t,{awarenessUpdated:!0})}(t,Lb)},r=function(){var n=Ib.getState(t.state),r=e.getLocalState()||{};if(t.hasFocus()){var o=l(t.state),i=Kb(o.anchor,n.type,n.binding.mapping),a=Kb(o.head,n.type,n.binding.mapping);null!=r.cursor&&kg(bg(r.cursor.anchor),i)&&kg(bg(r.cursor.head),a)||e.setLocalStateField(c,{anchor:i,head:a})}else null!=r.cursor&&null!==Jb(n.doc,n.type,bg(r.cursor.anchor),n.binding.mapping)&&e.setLocalStateField(c,null)};return e.on("change",n),t.dom.addEventListener("focusin",r),t.dom.addEventListener("focusout",r),{update:r,destroy:function(){t.dom.removeEventListener("focusin",r),t.dom.removeEventListener("focusout",r),e.off("change",n),e.setLocalStateField(c,null)}}}})}(n.provider.awareness,{selectionBuilder:Qb,cursorBuilder:n.renderCursor})),n}return pw(t,e),cw(t,[{key:"priority",get:function(){return 999}}],[{key:"key",value:function(){return"yCursorPlugin"}}])}(wx);Ew(Cx,"defaultCursorRender",(function(e){var t=document.createElement("span");t.classList.add("bn-collaboration-cursor__base");var n=document.createElement("span");n.setAttribute("contentedEditable","false"),n.classList.add("bn-collaboration-cursor__caret"),n.setAttribute("style","background-color: ".concat(e.color));var r=document.createElement("span");return r.classList.add("bn-collaboration-cursor__label"),r.setAttribute("style","background-color: ".concat(e.color)),r.insertBefore(document.createTextNode(e.name),null),n.insertBefore(r,null),t.insertBefore(document.createTextNode("⁠"),null),t.insertBefore(n,null),t.insertBefore(document.createTextNode("⁠"),null),t}));var kx=Cx,Ex=function(e){function t(e){var n;return dw(this,t),(n=fw(this,t)).addProsemirrorPlugin(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.colors,r=void 0===n?bD:n,o=t.colorMapping,i=void 0===o?new Map:o,a=t.permanentUserData,s=void 0===a?null:a,u=t.onFirstRender,l=void 0===u?function(){}:u,c=t.mapping,d=!1,f=new CD(e,c),p=new Pn({props:{editable:function(e){var t=Ib.getState(e);return null==t.snapshot&&null==t.prevSnapshot}},key:Ib,state:{init:function(t,n){return{type:e,doc:e.doc,binding:f,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:r,colorMapping:i,permanentUserData:s}},apply:function(e,t){var n=e.getMeta(Ib);if(void 0!==n)for(var r in t=Object.assign({},t),n)t[r]=n[r];return t.addToHistory=!1!==e.getMeta("addToHistory"),t.isChangeOrigin=void 0!==n&&!!n.isChangeOrigin,t.isUndoRedoOperation=void 0!==n&&!!n.isChangeOrigin&&!!n.isUndoRedoOperation,null!==f.prosemirrorView&&(void 0===n||null==n.snapshot&&null==n.prevSnapshot||Gb(0,(function(){null!=f.prosemirrorView&&(null==n.restore?f._renderSnapshot(n.snapshot,n.prevSnapshot,t):(f._renderSnapshot(n.snapshot,n.snapshot,t),delete t.restore,delete t.snapshot,delete t.prevSnapshot,f.mux((function(){f._prosemirrorChanged(f.prosemirrorView.state.doc)}))))}))),t}},view:function(e){return f.initView(e),null==c&&f._forceRerender(),l(),{update:function(){var t=p.getState(e.state);if(null==t.snapshot&&null==t.prevSnapshot&&(d||null!==e.state.doc.content.findDiffStart(e.state.doc.type.createAndFill().content))){if(d=!0,!1===t.addToHistory&&!t.isChangeOrigin){var n=Rb.getState(e.state),r=n&&n.undoManager;r&&r.stopCapturing()}f.mux((function(){t.doc.transact((function(n){n.meta.set("addToHistory",t.addToHistory),f._prosemirrorChanged(e.state.doc)}),Ib)}))}},destroy:function(){f.destroy()}}}});return p}(e)),n}return pw(t,e),cw(t,[{key:"priority",get:function(){return 1001}}],[{key:"key",value:function(){return"ySyncPlugin"}}])}(wx),xx=function(e){function t(){var e;return dw(this,t),(e=fw(this,t)).addProsemirrorPlugin(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.protectedNodes,n=void 0===t?$D:t,r=e.trackedOrigins,o=void 0===r?[]:r,i=e.undoManager,a=void 0===i?null:i;return new Pn({key:Rb,state:{init:function(e,t){var r=Ib.getState(t),i=a||new Kg(r.type,{trackedOrigins:new Set([Ib].concat(o)),deleteFilter:function(e){return function(e,t){return!(e instanceof Ob&&e.content instanceof xb&&(e.content.type instanceof Yy||e.content.type instanceof tb&&t.has(e.content.type.nodeName))&&0!==e.content.type._length)}(e,n)},captureTransaction:function(e){return!1!==e.meta.get("addToHistory")}});return{undoManager:i,prevSel:null,hasUndoOps:i.undoStack.length>0,hasRedoOps:i.redoStack.length>0}},apply:function(e,t,n,r){var o=Ib.getState(r).binding,i=t.undoManager,a=i.undoStack.length>0,s=i.redoStack.length>0;return o?{undoManager:i,prevSel:wD(o,n),hasUndoOps:a,hasRedoOps:s}:a!==t.hasUndoOps||s!==t.hasRedoOps?Object.assign({},t,{hasUndoOps:i.undoStack.length>0,hasRedoOps:i.redoStack.length>0}):t}},view:function(e){var t=Ib.getState(e.state),n=Rb.getState(e.state).undoManager;return n.on("stack-item-added",(function(n){var r=n.stackItem,o=t.binding;o&&r.meta.set(o,Rb.getState(e.state).prevSel)})),n.on("stack-item-popped",(function(e){var n=e.stackItem,r=t.binding;r&&(r.beforeTransactionSelection=n.meta.get(r)||r.beforeTransactionSelection)})),{destroy:function(){n.destroy()}}}})}()),e}return pw(t,e),cw(t,[{key:"priority",get:function(){return 1e3}}],[{key:"key",value:function(){return"yUndoPlugin"}}])}(wx),Ax=_s.create({name:"comment",excludes:"",inclusive:!1,keepOnSplit:!0,addAttributes:function(){return{orphan:{parseHTML:function(e){return!!e.getAttribute("data-orphan")},renderHTML:function(e){return e.orphan?{"data-orphan":"true"}:{}},default:!1},threadId:{parseHTML:function(e){return e.getAttribute("data-bn-thread-id")},renderHTML:function(e){return{"data-bn-thread-id":e.threadId}},default:""}}},renderHTML:function(e){return["span",bs(e.HTMLAttributes,{class:"bn-thread-mark"})]},parseHTML:function(){return[{tag:"span.bn-thread-mark"}]},extendMarkSchema:function(e){return"comment"===e.name?{blocknoteIgnore:!0}:{}}}),Fx=function(e){function t(e){var n;return dw(this,t),n=fw(this,t),Ew(n,"userCache",new Map),Ew(n,"loadingUsers",new Set),n.resolveUsers=e,n}return pw(t,e),cw(t,[{key:"loadUsers",value:(n=tw(QD().mark((function e(t){var n,r,o,i,a,s,u,l,c,d,f,p=this;return QD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.filter((function(e){return!p.userCache.has(e)&&!p.loadingUsers.has(e)})),0===n.length){e.next=15;break}r=rw(n);try{for(r.s();!(o=r.n()).done;)i=o.value,this.loadingUsers.add(i)}catch(e){r.e(e)}finally{r.f()}return e.prev=4,e.next=7,this.resolveUsers(n);case 7:a=e.sent,s=rw(a);try{for(s.s();!(u=s.n()).done;)l=u.value,this.userCache.set(l.id,l)}catch(e){s.e(e)}finally{s.f()}this.emit("update",this.userCache);case 11:e.prev=11,c=rw(n);try{for(c.s();!(d=c.n()).done;)f=d.value,this.loadingUsers.delete(f)}catch(e){c.e(e)}finally{c.f()}return e.finish(11);case 15:case"end":return e.stop()}}),e,this,[[4,,11,15]])}))),function(e){return n.apply(this,arguments)})},{key:"getUser",value:function(e){return this.userCache.get(e)}},{key:"subscribe",value:function(e){return this.on("update",e)}}]);var n}(Dx),Sx=new jn("blocknote-comments"),Mx=function(e){function t(e,n,r){var o;if(dw(this,t),o=fw(this,t),Ew(o,"userStore"),Ew(o,"pendingComment",!1),Ew(o,"selectedThreadId"),Ew(o,"threadPositions",new Map),Ew(o,"updateMarksFromThreads",(function(e){o.editor.transact((function(t){t.doc.descendants((function(n,r){n.marks.forEach((function(i){if(i.type.name===o.markType){var a=i.type,s=i.attrs.threadId,u=e.get(s),l=!(u&&!u.resolved&&!u.deletedAt);if(l!==i.attrs.orphan){var c=Math.max(r,0),d=Math.min(r+n.nodeSize,t.doc.content.size-1,t.doc.content.size-1);t.removeMark(c,d,i),t.addMark(c,d,a.create(bw(bw({},i.attrs),{},{orphan:l}))),l&&o.selectedThreadId===s&&(o.selectedThreadId=void 0,o.emitStateUpdate())}}}))}))}))})),o.editor=e,o.threadStore=n,o.markType=r,!e.resolveUsers)throw new Error("resolveUsers is required for comments");o.userStore=new Fx(e.resolveUsers),o.threadStore.subscribe(o.updateMarksFromThreads),e.onCreate((function(){o.updateMarksFromThreads(o.threadStore.getThreads()),e.onSelectionChange((function(){o.pendingComment&&(o.pendingComment=!1,o.emitStateUpdate())}))}));var i=o;return o.addProsemirrorPlugin(new Pn({key:Sx,state:{init:function(){return{decorations:_i.empty}},apply:function(e,t){var n=e.getMeta(Sx);if(!e.docChanged&&!n)return t;var r=e.docChanged?function(e,t){var n=new Map;return e.descendants((function(e,r){e.marks.forEach((function(o){if(o.type.name===t){var i,a=o.attrs.threadId;if(!a)return;var s=r,u=s+e.nodeSize,l=null!==(i=n.get(a))&&void 0!==i?i:{from:1/0,to:0};n.set(a,{from:Math.min(s,l.from),to:Math.max(u,l.to)})}}))})),n}(e.doc,i.markType):i.threadPositions;(r.size>0||i.threadPositions.size>0)&&(i.threadPositions=r,i.emitStateUpdate());var o=[];if(i.selectedThreadId){var a=r.get(i.selectedThreadId);a&&o.push(Ti.inline(a.from,a.to,{class:"bn-thread-mark-selected"}))}return{decorations:_i.create(e.doc,o)}}},props:{decorations:function(e){var t,n;return null!==(t=null==(n=Sx.getState(e))?void 0:n.decorations)&&void 0!==t?t:_i.empty},handleClick:function(e,t,n){if(0===n.button){var o=e.state.doc.nodeAt(t);if(o){var a=o.marks.find((function(e){return e.type.name===r&&!0!==e.attrs.orphan})),s=null==a?void 0:a.attrs.threadId;i.selectThread(s,!1)}else i.selectThread(void 0)}}}})),o}return pw(t,e),cw(t,[{key:"emitStateUpdate",value:function(){this.emit("update",{selectedThreadId:this.selectedThreadId,pendingComment:this.pendingComment,threadPositions:this.threadPositions})}},{key:"onUpdate",value:function(e){return this.on("update",e)}},{key:"selectThread",value:function(e){var t,n,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.selectedThreadId!==e&&(this.selectedThreadId=e,this.emitStateUpdate(),this.editor.transact((function(e){return e.setMeta(Sx,{name:"SET_SELECTED_THREAD_ID"})})),e&&r)){var o=this.threadPositions.get(e);if(!o)return;null==(n=null==(t=this.editor.prosemirrorView)?void 0:t.domAtPos(o.from).node)||n.scrollIntoView({behavior:"smooth",block:"center"})}}},{key:"startPendingComment",value:function(){this.pendingComment=!0,this.emitStateUpdate()}},{key:"stopPendingComment",value:function(){this.pendingComment=!1,this.emitStateUpdate()}},{key:"createThread",value:(n=tw(QD().mark((function e(t){var n,r,o,i,a;return QD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.threadStore.createThread(t);case 2:if(n=e.sent,!this.threadStore.addThreadToDocument){e.next=9;break}return r=this.editor.prosemirrorView,o=r.state.selection,i=Ib.getState(r.state),a={prosemirror:{head:o.head,anchor:o.anchor},yjs:i?wD(i.binding,r.state):void 0},e.next=7,this.threadStore.addThreadToDocument({threadId:n.id,selection:a});case 7:e.next=10;break;case 9:this.editor._tiptapEditor.commands.setMark(this.markType,{orphan:!1,threadId:n.id});case 10:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}],[{key:"key",value:function(){return"comments"}}]);var n}(wx),Bx=function(){return cw((function e(t,n,r,o){var i=this;dw(this,e),Ew(this,"state"),Ew(this,"emitUpdate"),Ew(this,"mouseDownHandler",(function(){var e;null!=(e=i.state)&&e.show&&(i.state.show=!1,i.emitUpdate())})),Ew(this,"dragstartHandler",(function(){var e;null!=(e=i.state)&&e.show&&(i.state.show=!1,i.emitUpdate())})),Ew(this,"scrollHandler",(function(){var e;if(null!=(e=i.state)&&e.show){var t=i.pmView.root.querySelector('[data-node-type="blockContainer"][data-id="'.concat(i.state.block.id,'"]'));if(!t)return;i.state.referencePos=t.getBoundingClientRect(),i.emitUpdate()}})),Ew(this,"closeMenu",(function(){var e;null!=(e=i.state)&&e.show&&(i.state.show=!1,i.emitUpdate())})),this.editor=t,this.pluginKey=n,this.pmView=r,this.emitUpdate=function(){if(!i.state)throw new Error("Attempting to update uninitialized file panel");o(i.state)},r.dom.addEventListener("mousedown",this.mouseDownHandler),r.dom.addEventListener("dragstart",this.dragstartHandler),r.root.addEventListener("scroll",this.scrollHandler,!0)}),[{key:"update",value:function(e,t){var n,r,o=this.pluginKey.getState(e.state),i=this.pluginKey.getState(t);if((null==(n=this.state)||!n.show)&&null!=o&&o.block&&this.editor.isEditable){var a=this.pmView.root.querySelector('[data-node-type="blockContainer"][data-id="'.concat(o.block.id,'"]'));if(!a)return;return this.state={show:!0,referencePos:a.getBoundingClientRect(),block:o.block},void this.emitUpdate()}var s=(null==o?void 0:o.block)&&!(null!=i&&i.block),u=!(null!=o&&o.block)&&(null==i?void 0:i.block);s&&this.state&&!this.state.show&&(this.state.show=!0,this.emitUpdate()),u&&null!=(r=this.state)&&r.show&&(this.state.show=!1,this.emitUpdate())}},{key:"destroy",value:function(){this.pmView.dom.removeEventListener("mousedown",this.mouseDownHandler),this.pmView.dom.removeEventListener("dragstart",this.dragstartHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}}])}(),Ox=new jn("FilePanelPlugin"),Tx=function(e){function t(e){var n;return dw(this,t),n=fw(this,t),Ew(n,"view"),Ew(n,"closeMenu",(function(){var e;return null==(e=n.view)?void 0:e.closeMenu()})),n.addProsemirrorPlugin(new Pn({key:Ox,view:function(t){return n.view=new Bx(e,Ox,t,(function(e){n.emit("update",e)})),n.view},props:{handleKeyDown:function(e,t){var r;return!("Escape"!==t.key||!n.shown||(null==(r=n.view)||r.closeMenu(),0))}},state:{init:function(){return{block:void 0}},apply:function(e,t){return e.getMeta(Ox)||(e.getMeta(Ib)||!e.selectionSet&&!e.docChanged?t:{block:void 0})}}})),n}return pw(t,e),cw(t,[{key:"shown",get:function(){var e,t;return(null==(t=null==(e=this.view)?void 0:e.state)?void 0:t.show)||!1}},{key:"onUpdate",value:function(e){return this.on("update",e)}}],[{key:"key",value:function(){return"filePanel"}}])}(wx),Px=function(){return cw((function e(t,n,r){var o=this;dw(this,e),Ew(this,"state"),Ew(this,"emitUpdate"),Ew(this,"preventHide",!1),Ew(this,"preventShow",!1),Ew(this,"shouldShow",(function(e){var t=e.view,n=e.state,r=e.from,i=e.to,a=n.doc,s=n.selection,u=s.empty,l=!a.textBetween(r,i).length&&Zs(n.selection);if(s.$from.parent.type.spec.code||wu(s)&&s.node.type.spec.code||u||l)return!1;var c=document.activeElement;return!(!o.isElementWithinEditorWrapper(c)&&t.editable)})),Ew(this,"blurHandler",(function(e){var t;if(o.preventHide)o.preventHide=!1;else{var n=o.pmView.dom.parentElement;e&&e.relatedTarget&&(n===e.relatedTarget||n.contains(e.relatedTarget)||e.relatedTarget.matches(".bn-ui-container, .bn-ui-container *"))||null!=(t=o.state)&&t.show&&(o.state.show=!1,o.emitUpdate())}})),Ew(this,"isElementWithinEditorWrapper",(function(e){if(!e)return!1;var t=o.pmView.dom.parentElement;return!!t&&t.contains(e)})),Ew(this,"viewMousedownHandler",(function(e){o.isElementWithinEditorWrapper(e.target)||(o.preventShow=!0)})),Ew(this,"mouseupHandler",(function(){o.preventShow&&(o.preventShow=!1,setTimeout((function(){return o.update(o.pmView)})))})),Ew(this,"dragHandler",(function(){var e;null!=(e=o.state)&&e.show&&(o.state.show=!1,o.emitUpdate())})),Ew(this,"scrollHandler",(function(){var e;null!=(e=o.state)&&e.show&&(o.state.referencePos=o.getSelectionBoundingBox(),o.emitUpdate())})),Ew(this,"closeMenu",(function(){var e;null!=(e=o.state)&&e.show&&(o.state.show=!1,o.emitUpdate())})),this.editor=t,this.pmView=n,this.emitUpdate=function(){if(!o.state)throw new Error("Attempting to update uninitialized formatting toolbar");r(o.state)},n.dom.addEventListener("mousedown",this.viewMousedownHandler),n.root.addEventListener("mouseup",this.mouseupHandler),n.dom.addEventListener("dragstart",this.dragHandler),n.dom.addEventListener("dragover",this.dragHandler),n.dom.addEventListener("blur",this.blurHandler),n.root.addEventListener("scroll",this.scrollHandler,!0)}),[{key:"update",value:function(e,t){var n,r,o,i=e.state,a=e.composing,s=i.doc,u=i.selection,l=t&&t.doc.eq(s)&&t.selection.eq(u);if(!a&&!l){var c=u.ranges,d=Math.min.apply(Math,ow(c.map((function(e){return e.$from.pos})))),f=Math.max.apply(Math,ow(c.map((function(e){return e.$to.pos})))),p=this.shouldShow({view:e,state:i,from:d,to:f}),h=Cw(Range.prototype.getClientRects)>"u";if(this.preventShow||!p&&!this.preventHide||h)return null==(o=this.state)||!o.show||this.preventHide||p&&!this.preventShow&&this.editor.isEditable?void 0:(this.state.show=!1,void this.emitUpdate());var m={show:!0,referencePos:this.getSelectionBoundingBox()};(m.show!==(null==(n=this.state)?void 0:n.show)||m.referencePos.toJSON()!==(null==(r=this.state)?void 0:r.referencePos.toJSON()))&&(this.state=m,this.emitUpdate())}}},{key:"destroy",value:function(){this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("mouseup",this.mouseupHandler),this.pmView.dom.removeEventListener("dragstart",this.dragHandler),this.pmView.dom.removeEventListener("dragover",this.dragHandler),this.pmView.dom.removeEventListener("blur",this.blurHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}},{key:"getSelectionBoundingBox",value:function(){var e=this.pmView.state.selection,t=e.ranges,n=Math.min.apply(Math,ow(t.map((function(e){return e.$from.pos})))),r=Math.max.apply(Math,ow(t.map((function(e){return e.$to.pos}))));if(wu(e)){var o=this.pmView.nodeDOM(n);if(o)return o.getBoundingClientRect()}return Cu(this.pmView,n,r)}}])}(),Nx=new jn("FormattingToolbarPlugin"),_x=function(e){function t(e){var n;return dw(this,t),n=fw(this,t),Ew(n,"view"),Ew(n,"closeMenu",(function(){return n.view.closeMenu()})),n.addProsemirrorPlugin(new Pn({key:Nx,view:function(t){return n.view=new Px(e,t,(function(e){n.emit("update",e)})),n.view},props:{handleKeyDown:function(e,t){return!("Escape"!==t.key||!n.shown||(n.view.closeMenu(),0))}}})),n}return pw(t,e),cw(t,[{key:"shown",get:function(){var e,t;return(null==(t=null==(e=this.view)?void 0:e.state)?void 0:t.show)||!1}},{key:"onUpdate",value:function(e){return this.on("update",e)}}],[{key:"key",value:function(){return"formattingToolbar"}}])}(wx),jx=Lu.create({name:"hardBreak",inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,priority:10,parseHTML:function(){return[{tag:"br"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["br",bs(this.options.HTMLAttributes,t)]},renderText:function(){return"\n"}}),Ix=function(e,t){var n=e.resolve(t);if(!(n.depth<=1)){var r=n.posAtIndex(n.index(n.depth-1),n.depth-1);return oC(e.resolve(r))}},Rx=function(e,t){var n=e.resolve(t),r=n.index();if(0!==r){var o=n.posAtIndex(r-1);return oC(e.resolve(o))}},Lx=function(e,t){for(;t.childContainer;){var n=t.childContainer.node,r=e.resolve(t.childContainer.beforePos+1).posAtIndex(n.childCount-1);t=oC(e.resolve(r))}return t},Hx=function(e){return function(t){var n=t.state,r=t.dispatch,o=oC(n.doc.resolve(e)),i=Rx(n.doc,o.bnBlock.beforePos);if(!i)return!1;var a=Lx(n.doc,i);return!!function(e,t){return e.isBlockContainer&&"inline*"===e.blockContent.node.type.spec.content&&e.blockContent.node.childCount>0&&t.isBlockContainer&&"inline*"===t.blockContent.node.type.spec.content}(a,o)&&function(e,t,n,r){if(!r.isBlockContainer)throw new Error("Attempted to merge block at position ".concat(r.bnBlock.beforePos," into previous block at position ").concat(n.bnBlock.beforePos,", but next block is not a block container"));if(r.childContainer){var o=e.doc.resolve(r.childContainer.beforePos+1),i=e.doc.resolve(r.childContainer.afterPos-1),a=o.blockRange(i);if(t){var s=e.doc.resolve(r.bnBlock.beforePos);e.tr.lift(a,s.depth)}}if(t){if(!n.isBlockContainer)throw new Error("Attempted to merge block at position ".concat(r.bnBlock.beforePos," into previous block at position ").concat(n.bnBlock.beforePos,", but previous block is not a block container"));t(e.tr.delete(n.blockContent.afterPos-1,r.blockContent.beforePos+1))}return!0}(n,r,a,o)}},Vx=Hs.create({priority:50,addKeyboardShortcuts:function(){var e=this,t=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e.editor.commands.first((function(n){var r=n.commands;return[function(){return r.command((function(e){var t=e.state,n=iC(t);if(!n.isBlockContainer)return!1;var o=n.bnBlock,i=n.blockContent,a=t.doc.resolve(o.beforePos).depth,s=0===t.selection.$anchor.parentOffset,u=t.selection.anchor===t.selection.head,l=0===i.node.childCount;return!!(s&&u&&l&&a>1)&&r.liftListItem("blockContainer")}))},function(){return r.command((function(n){var o,i=iC(n.state),a=null!==(o=e.options.editor.schema.blockSchema[i.blockNoteType].hardBreakShortcut)&&void 0!==o?o:"shift+enter";return"none"!==a&&!!("shift+enter"===a&&t||"enter"===a)&&r.insertContent({type:"hardBreak"})}))},function(){return r.command((function(e){var t=e.state,n=e.dispatch,r=iC(t);if(!r.isBlockContainer)return!1;var o=r.bnBlock,i=r.blockContent,a=0===t.selection.$anchor.parentOffset,s=t.selection.anchor===t.selection.head,u=0===i.node.childCount;if(a&&s&&u){var l=o.afterPos,c=l+2;if(n){var d=t.schema.nodes.blockContainer.createAndFill();t.tr.insert(l,d).scrollIntoView(),t.tr.setSelection(new yn(t.doc.resolve(c)))}return!0}return!1}))},function(){return r.command((function(e){var t=e.state,n=e.chain,r=iC(t);if(!r.isBlockContainer)return!1;var o=r.blockContent,i=0===t.selection.$anchor.parentOffset;return 0!==o.node.childCount&&(n().deleteSelection().command(Sk(t.selection.from,i,i)).run(),!0)}))}]}))};return{Backspace:function(){return e.editor.commands.first((function(e){var t=e.chain,n=e.commands;return[function(){return n.deleteSelection()},function(){return n.undoInputRule()},function(){return n.command((function(e){var t=e.state,r=iC(t);if(!r.isBlockContainer)return!1;var o=t.selection.from===r.blockContent.beforePos+1,i="paragraph"===r.blockContent.node.type.name;return!(!o||i)&&n.command(zC(r.bnBlock.beforePos,{type:"paragraph",props:{}}))}))},function(){return n.command((function(e){var t=e.state,r=iC(t);if(!r.isBlockContainer)return!1;var o=r.blockContent;return t.selection.from===o.beforePos+1&&n.liftListItem("blockContainer")}))},function(){return n.command((function(e){var n=e.state,r=iC(n);if(!r.isBlockContainer)return!1;var o=r.bnBlock,i=r.blockContent,a=n.selection.from===i.beforePos+1,s=n.selection.empty,u=o.beforePos;return!(!a||!s)&&t().command(Hx(u)).scrollIntoView().run()}))},function(){return n.command((function(e){var t=e.state,n=e.dispatch,r=iC(t);if(!r.isBlockContainer||t.selection.from!==r.blockContent.beforePos+1||Rx(t.doc,r.bnBlock.beforePos))return!1;var o=Ix(t.doc,r.bnBlock.beforePos);if("column"!==(null==o?void 0:o.blockNoteType))return!1;var i=o,a=Ix(t.doc,i.bnBlock.beforePos);if("columnList"!==(null==a?void 0:a.blockNoteType))throw new Error("parent of column is not a column list");var s=1===i.childContainer.node.childCount,u=s&&2===a.childContainer.node.childCount,l=a.childContainer.node.firstChild===i.bnBlock.node;if(n){var c=t.doc.slice(r.bnBlock.beforePos,r.bnBlock.afterPos,!1);if(u)if(l){t.tr.step(new At(a.bnBlock.beforePos,a.bnBlock.afterPos,i.bnBlock.afterPos+1,a.bnBlock.afterPos-2,c,c.size,!1));var d=t.tr.doc.resolve(i.bnBlock.beforePos);t.tr.setSelection(yn.between(d,d))}else{t.tr.step(new At(a.bnBlock.beforePos,a.bnBlock.afterPos,a.bnBlock.beforePos+2,i.bnBlock.beforePos-1,c,0,!1));var f=t.tr.doc.resolve(t.tr.mapping.map(i.bnBlock.beforePos-1));t.tr.setSelection(yn.between(f,f))}else if(s)if(l){t.tr.delete(i.bnBlock.beforePos,i.bnBlock.afterPos),t.tr.insert(a.bnBlock.beforePos,c.content);var p=t.tr.doc.resolve(a.bnBlock.beforePos);t.tr.setSelection(yn.between(p,p))}else t.tr.delete(i.bnBlock.beforePos-1,i.bnBlock.beforePos+1);else{t.tr.delete(r.bnBlock.beforePos,r.bnBlock.afterPos),l?t.tr.insert(a.bnBlock.beforePos-1,c.content):t.tr.insert(i.bnBlock.beforePos-1,c.content);var h=t.tr.doc.resolve(i.bnBlock.beforePos-1);t.tr.setSelection(yn.between(h,h))}}return!0}))},function(){return n.command((function(e){var n=e.state,r=iC(n);if(!r.isBlockContainer)return!1;if(0===r.blockContent.node.childCount&&"inline*"===r.blockContent.node.type.spec.content){var o=Rx(n.doc,r.bnBlock.beforePos);if(!o||!o.isBlockContainer)return!1;var i=t();if("tableRow+"===o.blockContent.node.type.spec.content){var a=r.bnBlock.beforePos-1-1-1-1-1;i=i.setTextSelection(a)}else if(""===o.blockContent.node.type.spec.content){var s=o.blockContent.afterPos-o.blockContent.node.nodeSize;i=i.setNodeSelection(s)}else{var u=o.blockContent.afterPos-o.blockContent.node.nodeSize;i=i.setTextSelection(u)}return i.deleteRange({from:r.bnBlock.beforePos,to:r.bnBlock.afterPos}).scrollIntoView().run()}return!1}))},function(){return n.command((function(e){var n=e.state,r=iC(n);if(!r.isBlockContainer)throw new Error("todo");var o=n.selection.from===r.blockContent.beforePos+1,i=n.selection.empty,a=Rx(n.doc,r.bnBlock.beforePos);if(a&&o&&i){var s=Lx(n.doc,a);if(!s.isBlockContainer)throw new Error("todo");if(""===s.blockContent.node.type.spec.content||"inline*"===s.blockContent.node.type.spec.content&&0===s.blockContent.node.childCount)return t().cut({from:r.bnBlock.beforePos,to:r.bnBlock.afterPos},s.bnBlock.afterPos).deleteRange({from:s.bnBlock.beforePos,to:s.bnBlock.afterPos}).run()}return!1}))}]}))},Delete:function(){return e.editor.commands.first((function(e){var t=e.commands;return[function(){return t.deleteSelection()},function(){return t.command((function(e){var n=e.state,r=iC(n);if(!r.isBlockContainer)return!1;var o=r.bnBlock,i=r.blockContent,a=r.childContainer,s=n.doc.resolve(o.beforePos).depth,u=o.afterPos===n.doc.nodeSize-3,l=n.selection.from===i.afterPos-1,c=n.selection.empty;if(!u&&l&&c&&void 0===a){for(var d=s,f=o.afterPos+1,p=n.doc.resolve(f).depth;p<d;)d=p,f+=2,p=n.doc.resolve(f).depth;return t.command(Hx(f-1))}return!1}))}]}))},Enter:function(){return t()},"Shift-Enter":function(){return t(!0)},Tab:function(){var t,n,r;return("prefer-indent"===e.options.tabBehavior||!(null!=(t=e.options.editor.formattingToolbar)&&t.shown||null!=(n=e.options.editor.linkToolbar)&&n.shown||null!=(r=e.options.editor.filePanel)&&r.shown))&&SE(e.options.editor)},"Shift-Tab":function(){var t,n,r;return!("prefer-indent"!==e.options.tabBehavior&&(null!=(t=e.options.editor.formattingToolbar)&&t.shown||null!=(n=e.options.editor.linkToolbar)&&n.shown||null!=(r=e.options.editor.filePanel)&&r.shown)||(e.editor.commands.liftListItem("blockContainer"),0))},"Shift-Mod-ArrowUp":function(){return e.options.editor.moveBlocksUp(),!0},"Shift-Mod-ArrowDown":function(){return e.options.editor.moveBlocksDown(),!0},"Mod-z":function(){return e.options.editor.undo()},"Mod-y":function(){return e.options.editor.redo()},"Shift-Mod-z":function(){return e.options.editor.redo()}}}}),zx=function(){return cw((function e(t,n,r){var o=this;dw(this,e),Ew(this,"state"),Ew(this,"emitUpdate"),Ew(this,"menuUpdateTimer"),Ew(this,"startMenuUpdateTimer"),Ew(this,"stopMenuUpdateTimer"),Ew(this,"mouseHoveredLinkMark"),Ew(this,"mouseHoveredLinkMarkRange"),Ew(this,"keyboardHoveredLinkMark"),Ew(this,"keyboardHoveredLinkMarkRange"),Ew(this,"linkMark"),Ew(this,"linkMarkRange"),Ew(this,"mouseOverHandler",(function(e){if(o.mouseHoveredLinkMark=void 0,o.mouseHoveredLinkMarkRange=void 0,o.stopMenuUpdateTimer(),e.target instanceof HTMLAnchorElement&&"A"===e.target.nodeName){var t,n=e.target,r=o.pmView.posAtDOM(n,0)+1,i=o.pmView.state.doc.resolve(r),a=rw(i.marks());try{for(a.s();!(t=a.n()).done;){var s=t.value;if(s.type.name===o.pmView.state.schema.mark("link").type.name){o.mouseHoveredLinkMark=s,o.mouseHoveredLinkMarkRange=qs(i,s.type,s.attrs)||void 0;break}}}catch(e){a.e(e)}finally{a.f()}}return o.startMenuUpdateTimer(),!1})),Ew(this,"clickHandler",(function(e){var t,n=o.pmView.dom.parentElement;o.linkMark&&e&&e.target&&n!==e.target&&!n.contains(e.target)&&null!=(t=o.state)&&t.show&&(o.state.show=!1,o.emitUpdate())})),Ew(this,"scrollHandler",(function(){var e;void 0!==o.linkMark&&null!=(e=o.state)&&e.show&&(o.state.referencePos=Cu(o.pmView,o.linkMarkRange.from,o.linkMarkRange.to),o.emitUpdate())})),Ew(this,"closeMenu",(function(){var e;null!=(e=o.state)&&e.show&&(o.state.show=!1,o.emitUpdate())})),this.editor=t,this.pmView=n,this.emitUpdate=function(){if(!o.state)throw new Error("Attempting to update uninitialized link toolbar");r(o.state)},this.startMenuUpdateTimer=function(){o.menuUpdateTimer=setTimeout((function(){o.update(o.pmView,void 0,!0)}),250)},this.stopMenuUpdateTimer=function(){return o.menuUpdateTimer&&(clearTimeout(o.menuUpdateTimer),o.menuUpdateTimer=void 0),!1},this.pmView.dom.addEventListener("mouseover",this.mouseOverHandler),this.pmView.root.addEventListener("click",this.clickHandler,!0),this.pmView.root.addEventListener("scroll",this.scrollHandler,!0)}),[{key:"editLink",value:function(e,t){var n,r=this;this.editor.transact((function(n){var o=sC(n);n.insertText(t,r.linkMarkRange.from,r.linkMarkRange.to),n.addMark(r.linkMarkRange.from,r.linkMarkRange.from+t.length,o.mark("link",{href:e}))})),this.pmView.focus(),null!=(n=this.state)&&n.show&&(this.state.show=!1,this.emitUpdate())}},{key:"deleteLink",value:function(){var e,t=this;this.editor.transact((function(e){return e.removeMark(t.linkMarkRange.from,t.linkMarkRange.to,t.linkMark.type).setMeta("preventAutolink",!0)})),this.pmView.focus(),null!=(e=this.state)&&e.show&&(this.state.show=!1,this.emitUpdate())}},{key:"update",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.state;if((!t||t.selection.from!==o.selection.from||t.selection.to!==o.selection.to)&&this.pmView.hasFocus()){var i=this.linkMark;if(this.linkMark=void 0,this.linkMarkRange=void 0,this.keyboardHoveredLinkMark=void 0,this.keyboardHoveredLinkMarkRange=void 0,this.pmView.state.selection.empty){var a,s=rw(this.pmView.state.selection.$from.marks());try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.type.name===this.pmView.state.schema.mark("link").type.name){this.keyboardHoveredLinkMark=u,this.keyboardHoveredLinkMarkRange=qs(this.pmView.state.selection.$from,u.type,u.attrs)||void 0;break}}}catch(e){s.e(e)}finally{s.f()}}return this.mouseHoveredLinkMark&&r&&(this.linkMark=this.mouseHoveredLinkMark,this.linkMarkRange=this.mouseHoveredLinkMarkRange),this.keyboardHoveredLinkMark&&(this.linkMark=this.keyboardHoveredLinkMark,this.linkMarkRange=this.keyboardHoveredLinkMarkRange),this.linkMark&&this.editor.isEditable?(this.state={show:!0,referencePos:Cu(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),url:this.linkMark.attrs.href,text:this.pmView.state.doc.textBetween(this.linkMarkRange.from,this.linkMarkRange.to)},void this.emitUpdate()):null==(n=this.state)||!n.show||!i||this.linkMark&&this.editor.isEditable?void 0:(this.state.show=!1,void this.emitUpdate())}}},{key:"destroy",value:function(){this.pmView.dom.removeEventListener("mouseover",this.mouseOverHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0),this.pmView.root.removeEventListener("click",this.clickHandler,!0)}}])}(),$x=new jn("LinkToolbarPlugin"),Ux=function(e){function t(e){var n;return dw(this,t),n=fw(this,t),Ew(n,"view"),Ew(n,"editLink",(function(e,t){n.view.editLink(e,t)})),Ew(n,"deleteLink",(function(){n.view.deleteLink()})),Ew(n,"startHideTimer",(function(){n.view.startMenuUpdateTimer()})),Ew(n,"stopHideTimer",(function(){n.view.stopMenuUpdateTimer()})),Ew(n,"closeMenu",(function(){return n.view.closeMenu()})),n.addProsemirrorPlugin(new Pn({key:$x,view:function(t){return n.view=new zx(e,t,(function(e){n.emit("update",e)})),n.view},props:{handleKeyDown:function(e,t){return!("Escape"!==t.key||!n.shown||(n.view.closeMenu(),0))}}})),n}return pw(t,e),cw(t,[{key:"onUpdate",value:function(e){return this.on("update",e)}},{key:"shown",get:function(){var e,t;return(null==(t=null==(e=this.view)?void 0:e.state)?void 0:t.show)||!1}}],[{key:"key",value:function(){return"linkToolbar"}}])}(wx),Gx=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"],Wx="https",qx=new jn("node-selection-keyboard"),Kx=function(e){function t(){var e;return dw(this,t),(e=fw(this,t)).addProsemirrorPlugin(new Pn({key:qx,props:{handleKeyDown:function(e,t){if("node"in e.state.selection){if(t.ctrlKey||t.metaKey)return!1;if(1===t.key.length)return t.preventDefault(),!0;if(!("Enter"!==t.key||t.shiftKey||t.altKey||t.ctrlKey||t.metaKey)){var n=e.state.tr;return e.dispatch(n.insert(e.state.tr.selection.$to.after(),e.state.schema.nodes.paragraph.createChecked()).setSelection(new yn(n.doc.resolve(e.state.tr.selection.$to.after()+1)))),!0}}return!1}}})),e}return pw(t,e),cw(t,null,[{key:"key",value:function(){return"nodeSelectionKeyboard"}}])}(wx),Zx=new jn("blocknote-placeholder"),Jx=function(e){function t(e,n){var r;return dw(this,t),(r=fw(this,t)).addProsemirrorPlugin(new Pn({key:Zx,view:function(t){var r,o,i="placeholder-selector-".concat(Zu());t.dom.classList.add(i);var a=document.createElement("style"),s=e._tiptapEditor.options.injectNonce;s&&a.setAttribute("nonce",s),(null==(r=e.prosemirrorView)?void 0:r.root)instanceof ShadowRoot?e.prosemirrorView.root.append(a):null==(o=e.prosemirrorView)||o.root.head.appendChild(a);var u=a.sheet,l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return".".concat(i," .bn-block-content").concat(e," .bn-inline-content:has(> .ProseMirror-trailingBreak:only-child):before")};try{for(var c=n.default,d=n.emptyDocument,f=uw(n,YD),p=0,h=Object.entries(f);p<h.length;p++){var m=iw(h[p],2),v=m[0],g=m[1],y='[data-content-type="'.concat(v,'"]');u.insertRule("".concat(l(y)," { content: ").concat(JSON.stringify(g),"; }"))}u.insertRule("".concat(l("[data-is-only-empty-block]")," { content: ").concat(JSON.stringify(d),"; }")),u.insertRule("".concat(l("[data-is-empty-and-focused]")," { content: ").concat(JSON.stringify(c),"; }"))}catch(c){console.warn("Failed to insert placeholder CSS rule - this is likely due to the browser not supporting certain CSS pseudo-element selectors (:has, :only-child:, or :before)",c)}return{destroy:function(){var t,n;(null==(t=e.prosemirrorView)?void 0:t.root)instanceof ShadowRoot?e.prosemirrorView.root.removeChild(a):null==(n=e.prosemirrorView)||n.root.head.removeChild(a)}}},props:{decorations:function(t){var n=t.doc,r=t.selection;if(e.isEditable&&r.empty&&!r.$from.parent.type.spec.code){var o=[];6===t.doc.content.size&&o.push(Ti.node(2,4,{"data-is-only-empty-block":"true"}));var i=r.$anchor,a=i.parent;if(0===a.content.size){var s=i.before();o.push(Ti.node(s,s+a.nodeSize,{"data-is-empty-and-focused":"true"}))}return _i.create(n,o)}}}})),r}return pw(t,e),cw(t,null,[{key:"key",value:function(){return"placeholder"}}])}(wx),Xx=new jn("previous-blocks"),Yx={index:"index",level:"level",type:"type",depth:"depth","depth-change":"depth-change"},Qx=function(e){function t(){var e,n;return dw(this,t),(e=fw(this,t)).addProsemirrorPlugin(new Pn({key:Xx,view:function(e){var t,r=this;return{update:(t=tw(QD().mark((function e(t,o){var i;return QD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null==(i=r.key)?void 0:i.getState(t.state).updatedBlocks.size)>0&&(n=setTimeout((function(){t.dispatch(t.state.tr.setMeta(Xx,{clearUpdate:!0}))}),0));case 1:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)}),destroy:function(){n&&clearTimeout(n)}}},state:{init:function(){return{prevTransactionOldBlockAttrs:{},currentTransactionOldBlockAttrs:{},updatedBlocks:new Set}},apply:function(e,t,n,r){if(t.currentTransactionOldBlockAttrs={},t.updatedBlocks.clear(),!e.docChanged||n.doc.eq(r.doc))return t;var o,i={},a=du(n.doc,(function(e){return e.attrs.id})),s=new Map(a.map((function(e){return[e.node.attrs.id,e]}))),u=du(r.doc,(function(e){return e.attrs.id})),l=rw(u);try{for(l.s();!(o=l.n()).done;){var c=o.value,d=s.get(c.node.attrs.id),f=null==d?void 0:d.node.firstChild,p=c.node.firstChild;if(d&&f&&p){var h={index:p.attrs.index,level:p.attrs.level,type:p.type.name,depth:r.doc.resolve(c.pos).depth},m={index:f.attrs.index,level:f.attrs.level,type:f.type.name,depth:n.doc.resolve(d.pos).depth};i[c.node.attrs.id]=m,e.getMeta("numberedListIndexing")&&(c.node.attrs.id in t.prevTransactionOldBlockAttrs&&(m=t.prevTransactionOldBlockAttrs[c.node.attrs.id]),"numberedListItem"===h.type&&(m.index=h.index)),t.currentTransactionOldBlockAttrs[c.node.attrs.id]=m,JSON.stringify(m)!==JSON.stringify(h)&&(m["depth-change"]=m.depth-h.depth,t.updatedBlocks.add(c.node.attrs.id))}}}catch(e){l.e(e)}finally{l.f()}return t.prevTransactionOldBlockAttrs=i,t}},props:{decorations:function(e){var t=this.getState(e);if(0!==t.updatedBlocks.size){var n=[];return e.doc.descendants((function(e,r){if(e.attrs.id&&t.updatedBlocks.has(e.attrs.id)){for(var o=t.currentTransactionOldBlockAttrs[e.attrs.id],i={},a=0,s=Object.entries(o);a<s.length;a++){var u=iw(s[a],2),l=u[0],c=u[1];i["data-prev-"+Yx[l]]=c||"none"}var d=Ti.node(r,r+e.nodeSize,bw({},i));n.push(d)}})),_i.create(e.doc,n)}}}})),e}return pw(t,e),cw(t,null,[{key:"key",value:function(){return"previousBlockType"}}])}(wx),eA=new jn("blocknote-show-selection"),tA=function(e){function t(e){var n;return dw(this,t),n=fw(this,t),Ew(n,"enabled",!1),n.editor=e,n.addProsemirrorPlugin(new Pn({key:eA,props:{decorations:function(e){var t=e.doc,r=e.selection;if(!n.enabled)return _i.empty;var o=Ti.inline(r.from,r.to,{"data-show-selection":"true"});return _i.create(t,[o])}}})),n}return pw(t,e),cw(t,[{key:"setEnabled",value:function(e){this.enabled!==e&&(this.enabled=e,this.editor.transact((function(e){return e.setMeta(eA,{})})))}},{key:"getEnabled",value:function(){return this.enabled}}],[{key:"key",value:function(){return"showSelection"}}])}(wx);function nA(e,t){for(var n,r;e&&e.parentElement&&e.parentElement!==t.dom&&"blockContainer"!==(null==(n=e.getAttribute)?void 0:n.call(e,"data-node-type"));)e=e.parentElement;if("blockContainer"===(null==(r=e.getAttribute)?void 0:r.call(e,"data-node-type")))return{node:e,id:e.getAttribute("data-id")}}var rA,oA=function(e){function t(e,n){var r;dw(this,t),r=fw(this,t,[e,n]),Ew(r,"nodes");var o=e.node();return r.nodes=[],e.doc.nodesBetween(e.pos,n.pos,(function(e,t,n){if(null!==n&&n.eq(o))return r.nodes.push(e),!1})),r}return pw(t,e),cw(t,[{key:"content",value:function(){return new ee(K.from(this.nodes),0,0)}},{key:"eq",value:function(e){if(!(e instanceof t)||this.nodes.length!==e.nodes.length||this.from!==e.from||this.to!==e.to)return!1;for(var n=0;n<this.nodes.length;n++)if(!this.nodes[n].eq(e.nodes[n]))return!1;return!0}},{key:"map",value:function(e,n){var r=n.mapResult(this.from),o=n.mapResult(this.to);return o.deleted?hn.near(e.resolve(r.pos)):r.deleted?hn.near(e.resolve(o.pos)):new t(e.resolve(r.pos),e.resolve(o.pos))}},{key:"toJSON",value:function(){return{type:"multiple-node",anchor:this.anchor,head:this.head}}}],[{key:"create",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;return new t(e.resolve(n),e.resolve(r))}}])}(hn);function iA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;t===n&&(n+=e.state.doc.resolve(t+1).node().nodeSize);for(var r=e.domAtPos(t).node.cloneNode(!0),o=e.domAtPos(t).node,i=function(e,t){return Array.prototype.indexOf.call(e.children,t)},a=i(o,e.domAtPos(t+1).node.parentElement),s=i(o,e.domAtPos(n-1).node.parentElement),u=o.childElementCount-1;u>=0;u--)(u>s||u<a)&&r.removeChild(r.children[u]);aA(e.root);for(var l=(rA=r).getElementsByTagName("iframe"),c=0;c<l.length;c++){var d=l[c],f=d.parentElement;f&&f.removeChild(d)}var p=e.dom.className.split(" ").filter((function(e){return"ProseMirror"!==e&&"bn-root"!==e&&"bn-editor"!==e})).join(" ");rA.className=rA.className+" bn-drag-preview "+p,e.root instanceof ShadowRoot?e.root.appendChild(rA):e.root.body.appendChild(rA)}function aA(e){void 0!==rA&&(e instanceof ShadowRoot?e.removeChild(rA):e.body.removeChild(rA),rA=void 0)}hn.jsonID("multiple-node",oA);var sA=.1;function uA(e,t,n){var r,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=rw(e.root.elementsFromPoint(t.left+("editor"===n?50:0),t.top));try{for(i.s();!(r=i.n()).done;){var a=r.value;if(e.dom.contains(a))return o&&a.closest("[data-node-type=columnList]")?uA(e,{left:t.left+50,top:t.top},n,!1):nA(a,e)}}catch(e){i.e(e)}finally{i.f()}}var lA=function(){return cw((function e(t,n,r,o){var i=this;dw(this,e),Ew(this,"state"),Ew(this,"emitUpdate"),Ew(this,"mousePos"),Ew(this,"hoveredBlock"),Ew(this,"menuFrozen",!1),Ew(this,"isDragOrigin",!1),Ew(this,"updateState",(function(e){i.state=e,i.emitUpdate(i.state)})),Ew(this,"updateStateFromMousePos",(function(){var e,t,n,r;if(!i.menuFrozen&&i.mousePos){var o=function(e,t,n){if(t.dom.firstChild){var r=t.dom.firstChild.getBoundingClientRect(),o={left:e.x,top:e.y},i=o.left<r.left,a=o.left>r.right;"viewport"===n&&(i&&(o.left=r.left+10),a&&(o.left=r.right-10));var s=uA(t,o,n);if(!a&&s){var u=s.node.getBoundingClientRect();o.left=u.right-10,s=uA(t,o,"viewport",!1)}return s}}(i.mousePos,i.pmView,i.sideMenuDetection);if(o&&i.editor.isEditable){if(null==(t=i.state)||!t.show||null==(n=i.hoveredBlock)||!n.hasAttribute("data-id")||(null==(r=i.hoveredBlock)?void 0:r.getAttribute("data-id"))!==o.id){i.hoveredBlock=o.node;var a=o.node.firstChild;if(a&&i.editor.isEditable){var s=a.getBoundingClientRect(),u=o.node.closest("[data-node-type=column]");i.updateState({show:!0,referencePos:new DOMRect(u?u.firstElementChild.getBoundingClientRect().x:i.pmView.dom.firstChild.getBoundingClientRect().x,s.y,s.width,s.height),block:i.editor.getBlock(i.hoveredBlock.getAttribute("data-id"))})}}}else null!=(e=i.state)&&e.show&&(i.state.show=!1,i.updateState(i.state))}})),Ew(this,"onDrop",(function(e){var t,n;if(null!==i.pmView.dragging){i.editor._tiptapEditor.commands.blur();var r=e.target instanceof Node&&(null==(t=e.target instanceof HTMLElement?e.target:e.target.parentElement)?void 0:t.closest(".bn-editor"))||null;if(r&&(i.isDragOrigin||i.pmView.dom!==r?i.isDragOrigin&&i.pmView.dom!==r&&setTimeout((function(){return i.pmView.dispatch(i.pmView.state.tr.deleteSelection())}),0):i.pmView.dispatch(i.pmView.state.tr.setSelection(yn.create(i.pmView.state.tr.doc,i.pmView.state.tr.selection.to)))),"editor"!==i.sideMenuDetection&&!e.synthetic&&null!=(n=e.dataTransfer)&&n.types.includes("blocknote/html")){var o=i.pmView.posAtCoords({left:e.clientX,top:e.clientY});if(!o||-1===o.inside){var a=i.createSyntheticEvent(e);i.pmView.dom.dispatchEvent(a)}}}})),Ew(this,"onDragEnd",(function(){i.pmView.dragging=null})),Ew(this,"onDragStart",(function(e){var t,n=null==(t=e.dataTransfer)?void 0:t.getData("blocknote/html");if(n){if(i.pmView.dragging)throw new Error("New drag was started while an existing drag is ongoing");var r=document.createElement("div");r.innerHTML=n;var o=He.fromSchema(i.pmView.state.schema).parse(r,{topNode:i.pmView.state.schema.nodes.blockGroup.create()});i.pmView.dragging={slice:new ee(o.content,0,0),move:!0}}})),Ew(this,"onDragOver",(function(e){var t;if("editor"!==i.sideMenuDetection&&!e.synthetic&&null!=(t=e.dataTransfer)&&t.types.includes("blocknote/html")){var n=i.pmView.posAtCoords({left:e.clientX,top:e.clientY});if(!n||-1===n.inside&&i.pmView.dom.firstChild){var r=i.createSyntheticEvent(e);i.pmView.dom.dispatchEvent(r)}}})),Ew(this,"onKeyDown",(function(e){var t;null!=(t=i.state)&&t.show&&i.editor.isFocused()&&(i.state.show=!1,i.emitUpdate(i.state))})),Ew(this,"onMouseMove",(function(e){var t;if(!i.menuFrozen){i.mousePos={x:e.clientX,y:e.clientY};var n=i.pmView.dom.getBoundingClientRect(),r=i.mousePos.x>n.left&&i.mousePos.x<n.right&&i.mousePos.y>n.top&&i.mousePos.y<n.bottom,o=i.pmView.dom.parentElement;r&&e&&e.target&&o!==e.target&&!o.contains(e.target)?null!=(t=i.state)&&t.show&&(i.state.show=!1,i.emitUpdate(i.state)):i.updateStateFromMousePos()}})),Ew(this,"onScroll",(function(){var e;null!=(e=i.state)&&e.show&&(i.state.referencePos=i.hoveredBlock.getBoundingClientRect(),i.emitUpdate(i.state))})),this.editor=t,this.sideMenuDetection=n,this.pmView=r,this.emitUpdate=function(){if(!i.state)throw new Error("Attempting to update uninitialized side menu");o(i.state)},this.pmView.root.addEventListener("dragstart",this.onDragStart),this.pmView.root.addEventListener("dragover",this.onDragOver),this.pmView.root.addEventListener("drop",this.onDrop,!0),this.pmView.root.addEventListener("dragend",this.onDragEnd,!0),BE(),this.pmView.root.addEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.addEventListener("keydown",this.onKeyDown,!0),r.root.addEventListener("scroll",this.onScroll,!0)}),[{key:"createSyntheticEvent",value:function(e){var t=new Event(e.type,e),n=this.pmView.dom.firstChild.getBoundingClientRect();return t.clientX=e.clientX,t.clientY=e.clientY,e.clientX<n.left&&e.clientX>n.left-n.width*sA?t.clientX=n.left+n.width*sA/2:e.clientX>n.right&&e.clientX<n.right+n.width*sA?t.clientX=n.right-n.width*sA/2:(e.clientX<n.left||e.clientX>n.right)&&(t.clientX=n.left+sA*n.width*2),t.clientY=Math.min(Math.max(e.clientY,n.top),n.top+n.height),t.dataTransfer=e.dataTransfer,t.preventDefault=function(){return e.preventDefault()},t.synthetic=!0,t}},{key:"update",value:function(e,t){var n;!t.doc.eq(this.pmView.state.doc)&&null!=(n=this.state)&&n.show&&this.updateStateFromMousePos()}},{key:"destroy",value:function(){var e;null!=(e=this.state)&&e.show&&(this.state.show=!1,this.emitUpdate(this.state)),this.pmView.root.removeEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.removeEventListener("dragstart",this.onDragStart),this.pmView.root.removeEventListener("dragover",this.onDragOver),this.pmView.root.removeEventListener("drop",this.onDrop,!0),this.pmView.root.removeEventListener("dragend",this.onDragEnd,!0),this.pmView.root.removeEventListener("keydown",this.onKeyDown,!0),this.pmView.root.removeEventListener("scroll",this.onScroll,!0)}}])}(),cA=new jn("SideMenuPlugin"),dA=function(e){function t(e,n){var r;return dw(this,t),r=fw(this,t),Ew(r,"view"),Ew(r,"blockDragStart",(function(e,t){r.view&&(r.view.isDragOrigin=!0),function(e,t,n){if(e.dataTransfer){var r=n.prosemirrorView;if(r){var o=RC(t.id,r.state.doc);if(!o)throw new Error("Block with ID ".concat(t.id," not found"));var i=o.posBeforeNode;if(null!=i){var a=r.state.selection,s=r.state.doc,u=function(e,t){var n,r,o="blockContent"===t.resolve(e.from).node().type.spec.group,i="blockContent"===t.resolve(e.to).node().type.spec.group,a=Math.min(e.$anchor.depth,e.$head.depth);if(o&&i){var s=e.$from.start(a-1),u=e.$to.end(a-1);n=t.resolve(s-1).pos,r=t.resolve(u+1).pos}else n=e.from,r=e.to;return{from:n,to:r}}(a,s),l=u.from,c=u.to,d=l<=i&&i<c,f=a.$anchor.node()!==a.$head.node()||a instanceof oA;d&&f?(r.dispatch(r.state.tr.setSelection(oA.create(s,l,c))),iA(r,l,c)):(r.dispatch(r.state.tr.setSelection(Dn.create(r.state.doc,i))),iA(r,i));var p=r.state.selection.content(),h=n.pmSchema,m=r.serializeForClipboard(p).dom.innerHTML,v=ZC(h,n),g=hx(p.content),y=v.exportBlocks(g,{}),b=NE(y);e.dataTransfer.clearData(),e.dataTransfer.setData("blocknote/html",m),e.dataTransfer.setData("text/html",y),e.dataTransfer.setData("text/plain",b),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(rA,0,0)}}}}(e,t,r.editor)})),Ew(r,"blockDragEnd",(function(){r.editor.prosemirrorView&&aA(r.editor.prosemirrorView.root),r.view&&(r.view.isDragOrigin=!1)})),Ew(r,"freezeMenu",(function(){r.view.menuFrozen=!0,r.view.state.show=!0,r.view.emitUpdate(r.view.state)})),Ew(r,"unfreezeMenu",(function(){r.view.menuFrozen=!1,r.view.state.show=!1,r.view.emitUpdate(r.view.state)})),r.editor=e,r.addProsemirrorPlugin(new Pn({key:cA,view:function(t){return r.view=new lA(e,n,t,(function(e){r.emit("update",e)})),r.view}})),r}return pw(t,e),cw(t,[{key:"onUpdate",value:function(e){return this.on("update",e)}}],[{key:"key",value:function(){return"sideMenu"}}])}(wx),fA=new Map;var pA,hA=pu((function(e){return"blockContainer"===e.type.name})),mA=function(){return cw((function e(t,n){var r,o,i=this;dw(this,e),Ew(this,"state"),Ew(this,"emitUpdate"),Ew(this,"rootEl"),Ew(this,"pluginState"),Ew(this,"handleScroll",(function(){var e,t;if(null!=(e=i.state)&&e.show){var n=null==(t=i.rootEl)?void 0:t.querySelector('[data-decoration-id="'.concat(i.pluginState.decorationId,'"]'));if(!n)return;i.state.referencePos=n.getBoundingClientRect(),i.emitUpdate(i.pluginState.triggerCharacter)}})),Ew(this,"closeMenu",(function(){i.editor.transact((function(e){return e.setMeta(vA,null)}))})),Ew(this,"clearQuery",(function(){void 0!==i.pluginState&&i.editor._tiptapEditor.chain().focus().deleteRange({from:i.pluginState.queryStartPos()-(i.pluginState.deleteTriggerCharacter?i.pluginState.triggerCharacter.length:0),to:i.editor.transact((function(e){return e.selection.from}))}).run()})),this.editor=t,this.pluginState=void 0,this.emitUpdate=function(e){var t;if(!i.state)throw new Error("Attempting to update uninitialized suggestions menu");n(e,bw(bw({},i.state),{},{ignoreQueryLength:null==(t=i.pluginState)?void 0:t.ignoreQueryLength}))},this.rootEl=null==(r=this.editor.prosemirrorView)?void 0:r.root,null==(o=this.rootEl)||o.addEventListener("scroll",this.handleScroll,!0)}),[{key:"update",value:function(e,t){var n,r=vA.getState(t),o=vA.getState(e.state),i=void 0!==r&&void 0===o;if(void 0===r&&void 0!==o||void 0!==r&&void 0!==o||i){if(this.pluginState=i?r:o,i||!this.editor.isEditable)return this.state&&(this.state.show=!1),void this.emitUpdate(this.pluginState.triggerCharacter);var a=null==(n=this.rootEl)?void 0:n.querySelector('[data-decoration-id="'.concat(this.pluginState.decorationId,'"]'));this.editor.isEditable&&a&&(this.state={show:!0,referencePos:a.getBoundingClientRect(),query:this.pluginState.query},this.emitUpdate(this.pluginState.triggerCharacter))}}},{key:"destroy",value:function(){var e;null==(e=this.rootEl)||e.removeEventListener("scroll",this.handleScroll,!0)}}])}(),vA=new jn("SuggestionMenuPlugin"),gA=function(e){function t(e){var n;dw(this,t),n=fw(this,t),Ew(n,"view"),Ew(n,"triggerCharacters",[]),Ew(n,"addTriggerCharacter",(function(e){n.triggerCharacters.push(e)})),Ew(n,"removeTriggerCharacter",(function(e){n.triggerCharacters=n.triggerCharacters.filter((function(t){return t!==e}))})),Ew(n,"closeMenu",(function(){return n.view.closeMenu()})),Ew(n,"clearQuery",(function(){return n.view.clearQuery()}));var r=n.triggerCharacters;return n.addProsemirrorPlugin(new Pn({key:vA,view:function(){return n.view=new mA(e,(function(e,t){n.emit("update ".concat(e),t)})),n.view},state:{init:function(){},apply:function(t,r,o,i){if(void 0!==t.getMeta("orderedListIndexing")||t.selection.$from.parent.type.spec.code)return r;var a=t.getMeta(vA);if("object"==Cw(a)&&null!==a){r&&n.closeMenu();var s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",r=Ib.getState(e._tiptapEditor.state);if(!r){var o=function(e){if(fA.has(e))return fA.get(e);var t=new vt;return e._tiptapEditor.on("transaction",(function(e){var n=e.transaction;t.appendMapping(n.mapping)})),e._tiptapEditor.on("destroy",(function(){fA.delete(e)})),fA.set(e,t),t}(e),i=o.maps.length;return function(){return o.slice(i).map(t,"left"===n?-1:1)}}var a=Kb(t+("right"===n?1:0),r.binding.type,r.binding.mapping);return function(){var t=Ib.getState(e._tiptapEditor.state),r=Jb(t.doc,t.binding.type,a,t.binding.mapping);if(null===r)throw new Error("Position not found, cannot track positions");return r+("right"===n?-1:0)}}(e,i.selection.from-a.triggerCharacter.length);return{triggerCharacter:a.triggerCharacter,deleteTriggerCharacter:!1!==a.deleteTriggerCharacter,queryStartPos:function(){return s()+a.triggerCharacter.length},query:"",decorationId:"id_".concat(Math.floor(4294967295*Math.random())),ignoreQueryLength:null==a?void 0:a.ignoreQueryLength}}if(void 0===r)return r;if(!(i.selection.from!==i.selection.to||null===a||t.getMeta("focus")||t.getMeta("blur")||t.getMeta("pointer")||void 0!==r.triggerCharacter&&i.selection.from<r.queryStartPos())&&i.selection.$from.sameParent(i.doc.resolve(r.queryStartPos()))){var u=bw({},r);return u.query=i.doc.textBetween(r.queryStartPos(),i.selection.from),u}}},props:{handleTextInput:function(e,t,n,o){return!!r.includes(o)&&(e.dispatch(e.state.tr.insertText(o)),e.dispatch(e.state.tr.setMeta(vA,{triggerCharacter:o}).scrollIntoView()),!0)},decorations:function(e){var t=this.getState(e);if(void 0===t)return null;if(!t.deleteTriggerCharacter){var n=hA(e.selection);if(n)return _i.create(e.doc,[Ti.node(n.pos,n.pos+n.node.nodeSize,{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":t.decorationId})])}return _i.create(e.doc,[Ti.inline(t.queryStartPos()-t.triggerCharacter.length,t.queryStartPos(),{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":t.decorationId})])}}})),n}return pw(t,e),cw(t,[{key:"onUpdate",value:function(e,t){return this.triggerCharacters.includes(e)||this.addTriggerCharacter(e),this.on("update ".concat(e),t)}},{key:"shown",get:function(){var e,t;return(null==(t=null==(e=this.view)?void 0:e.state)?void 0:t.show)||!1}}],[{key:"key",value:function(){return"suggestionMenu"}}])}(wx),yA=_s.create({name:"insertion",inclusive:!1,excludes:"deletion modification insertion",addAttributes:function(){return{id:{default:null,validate:"number"}}},extendMarkSchema:function(e){return"insertion"!==e.name?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM:function(e,t){return["ins",bw({"data-id":String(e.attrs.id),"data-inline":String(t)},!t&&{style:"display: contents"}),0]},parseDOM:[{tag:"ins",getAttrs:function(e){return!!e.dataset.id&&{id:parseInt(e.dataset.id,10)}}}]}}}),bA=_s.create({name:"deletion",inclusive:!1,excludes:"insertion modification deletion",addAttributes:function(){return{id:{default:null,validate:"number"}}},extendMarkSchema:function(e){return"deletion"!==e.name?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM:function(e,t){return["del",bw({"data-id":String(e.attrs.id),"data-inline":String(t)},!t&&{style:"display: contents"}),0]},parseDOM:[{tag:"del",getAttrs:function(e){return!!e.dataset.id&&{id:parseInt(e.dataset.id,10)}}}]}}}),DA=_s.create({name:"modification",inclusive:!1,excludes:"deletion insertion",addAttributes:function(){return{id:{default:null,validate:"number"},type:{validate:"string"},attrName:{default:null,validate:"string|null"},previousValue:{default:null},newValue:{default:null}}},extendMarkSchema:function(e){return"modification"!==e.name?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM:function(e,t){return[t?"span":"div",{"data-type":"modification","data-id":String(e.attrs.id),"data-mod-type":e.attrs.type,"data-mod-prev-val":JSON.stringify(e.attrs.previousValue),"data-mod-new-val":JSON.stringify(e.attrs.newValue)},0]},parseDOM:[{tag:"span[data-type='modification']",getAttrs:function(e){return!!e.dataset.id&&{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal,newValue:e.dataset.modNewVal}}},{tag:"div[data-type='modification']",getAttrs:function(e){return!!e.dataset.id&&{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal}}}]}}});function wA(e){pA||((pA=document.createElement("div")).innerHTML="_",pA.style.opacity="0",pA.style.height="1px",pA.style.width="1px",e instanceof Document?e.body.appendChild(pA):e.appendChild(pA))}function CA(e){return Array.prototype.indexOf.call(e.parentElement.childNodes,e)}var kA=function(){return cw((function e(t,n,r){var o=this;dw(this,e),Ew(this,"state"),Ew(this,"emitUpdate"),Ew(this,"tableId"),Ew(this,"tablePos"),Ew(this,"tableElement"),Ew(this,"menuFrozen",!1),Ew(this,"mouseState","up"),Ew(this,"prevWasEditable",null),Ew(this,"viewMousedownHandler",(function(){o.mouseState="down"})),Ew(this,"mouseUpHandler",(function(e){o.mouseState="up",o.mouseMoveHandler(e)})),Ew(this,"mouseMoveHandler",(function(e){var t,n,r,i,a,s,u;if(!o.menuFrozen&&"selecting"!==o.mouseState&&e.target instanceof Element&&o.pmView.dom.contains(e.target)){var l=function(e){for(var t=e;t&&"TD"!==t.nodeName&&"TH"!==t.nodeName&&!t.classList.contains("tableWrapper");){if(t.classList.contains("ProseMirror"))return;var n=t.parentNode;if(!(n&&n instanceof Element))return;t=n}return"TD"===t.nodeName||"TH"===t.nodeName?{type:"cell",domNode:t,tbodyNode:t.closest("tbody")}:{type:"wrapper",domNode:t,tbodyNode:t.querySelector("tbody")}}(e.target);if("cell"===(null==l?void 0:l.type)&&"down"===o.mouseState&&(null==(t=o.state)||!t.draggingState))return o.mouseState="selecting",void(null!=(n=o.state)&&n.show&&(o.state.show=!1,o.state.showAddOrRemoveRowsButton=!1,o.state.showAddOrRemoveColumnsButton=!1,o.emitUpdate()));if(l&&o.editor.isEditable){if(l.tbodyNode){var c=l.tbodyNode.getBoundingClientRect(),d=nA(l.domNode,o.pmView);if(d){var f;o.tableElement=d.node;var p=o.editor.transact((function(e){return RC(d.id,e.doc)}));if(!p)throw new Error("Block with ID ".concat(d.id," not found"));var h=gC(p.node,o.editor.pmSchema,o.editor.schema.blockSchema,o.editor.schema.inlineContentSchema,o.editor.schema.styleSchema);if(function(e,t,n){return"table"===t.type&&t.type in n.schema.blockSchema&&uE(t.type,n)}(0,h,o.editor)&&(o.tablePos=p.posBeforeNode+1,f=h),f){o.tableId=d.id;var m=null==(i=l.domNode.closest(".tableWrapper"))?void 0:i.querySelector(".table-widgets-container");if("wrapper"===(null==l?void 0:l.type)){var v=e.clientY>=c.bottom-1&&e.clientY<c.bottom+20,g=e.clientX>=c.right-1&&e.clientX<c.right+20,y=e.clientX>c.right||e.clientY>c.bottom;o.state=bw(bw({},o.state),{},{show:!0,showAddOrRemoveRowsButton:v,showAddOrRemoveColumnsButton:g,referencePosTable:c,block:f,widgetContainer:m,colIndex:y||null==(a=o.state)?void 0:a.colIndex,rowIndex:y||null==(s=o.state)?void 0:s.rowIndex,referencePosCell:y||null==(u=o.state)?void 0:u.referencePosCell})}else{var b=CA(l.domNode),D=CA(l.domNode.parentElement),w=l.domNode.getBoundingClientRect();if(void 0!==o.state&&o.state.show&&o.tableId===d.id&&o.state.rowIndex===D&&o.state.colIndex===b)return;o.state={show:!0,showAddOrRemoveColumnsButton:b===f.content.rows[0].cells.length-1,showAddOrRemoveRowsButton:D===f.content.rows.length-1,referencePosTable:c,block:f,draggingState:void 0,referencePosCell:w,colIndex:b,rowIndex:D,widgetContainer:m}}return o.emitUpdate(),!1}}}}else null!=(r=o.state)&&r.show&&(o.state.show=!1,o.state.showAddOrRemoveRowsButton=!1,o.state.showAddOrRemoveColumnsButton=!1,o.emitUpdate())}})),Ew(this,"dragOverHandler",(function(e){var t;if(void 0!==(null==(t=o.state)?void 0:t.draggingState)){e.preventDefault(),e.dataTransfer.dropEffect="move",function(e,t){for(var n=t.querySelectorAll(".prosemirror-dropcursor-block, .prosemirror-dropcursor-inline"),r=0;r<n.length;r++)n[r].style.visibility="hidden"}(0,o.pmView.root);var n={left:Math.min(Math.max(e.clientX,o.state.referencePosTable.left+1),o.state.referencePosTable.right-1),top:Math.min(Math.max(e.clientY,o.state.referencePosTable.top+1),o.state.referencePosTable.bottom-1)},r=o.pmView.root.elementsFromPoint(n.left,n.top).filter((function(e){return"TD"===e.tagName||"TH"===e.tagName}));if(0!==r.length){var i=r[0],a=!1,s=CA(i.parentElement),u=CA(i),l="row"===o.state.draggingState.draggedCellOrientation?o.state.rowIndex:o.state.colIndex,c=("row"===o.state.draggingState.draggedCellOrientation?s:u)!==l;(o.state.rowIndex!==s||o.state.colIndex!==u)&&(o.state.rowIndex=s,o.state.colIndex=u,o.state.referencePosCell=i.getBoundingClientRect(),a=!0);var d="row"===o.state.draggingState.draggedCellOrientation?n.top:n.left;o.state.draggingState.mousePos!==d&&(o.state.draggingState.mousePos=d,a=!0),a&&o.emitUpdate(),c&&o.editor.transact((function(e){return e.setMeta(EA,!0)}))}}})),Ew(this,"dropHandler",(function(e){if(o.mouseState="up",void 0===o.state||void 0===o.state.draggingState)return!1;if(void 0===o.state.rowIndex||void 0===o.state.colIndex)throw new Error("Attempted to drop table row or column, but no table block was hovered prior.");e.preventDefault();var t=o.state,n=t.draggingState,r=t.colIndex,i=t.rowIndex,a=o.state.block.content.columnWidths;if("row"===n.draggedCellOrientation){if(!MC(o.state.block,n.originalIndex,i))return!1;var s=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:wC(e),o=kC({row:t,col:0},e,r).row,i=kC({row:n,col:0},e,r).row,a=iw(r.splice(o,1),1)[0];return r.splice(i,0,a),CC(r)}(o.state.block,n.originalIndex,i);o.editor.updateBlock(o.state.block,{type:"table",content:bw(bw({},o.state.block.content),{},{rows:s})})}else{if(!BC(o.state.block,n.originalIndex,r))return!1;var u=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:wC(e),o=kC({row:0,col:t},e,r).col,i=kC({row:0,col:n},e,r).col;return r.forEach((function(e){var t=iw(e.splice(o,1),1)[0];e.splice(i,0,t)})),CC(r)}(o.state.block,n.originalIndex,r),l=iw(a.splice(n.originalIndex,1),1)[0];a.splice(r,0,l),o.editor.updateBlock(o.state.block,{type:"table",content:bw(bw({},o.state.block.content),{},{columnWidths:a,rows:u})})}return o.editor.setTextCursorPosition(o.state.block.id),!0})),this.editor=t,this.pmView=n,this.emitUpdate=function(){if(!o.state)throw new Error("Attempting to update uninitialized image toolbar");r(o.state)},n.dom.addEventListener("mousemove",this.mouseMoveHandler),n.dom.addEventListener("mousedown",this.viewMousedownHandler),window.addEventListener("mouseup",this.mouseUpHandler),n.root.addEventListener("dragover",this.dragOverHandler),n.root.addEventListener("drop",this.dropHandler)}),[{key:"update",value:function(){var e;if(this.state&&this.state.show){if(this.state.block=this.editor.getBlock(this.state.block.id),!this.state.block||"table"!==this.state.block.type||null==(e=this.tableElement)||!e.isConnected)return this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,void this.emitUpdate();var t=EC(this.state.block),n=t.height,r=t.width;void 0!==this.state.rowIndex&&void 0!==this.state.colIndex&&(this.state.rowIndex>=n&&(this.state.rowIndex=n-1),this.state.colIndex>=r&&(this.state.colIndex=r-1));var o=this.tableElement.querySelector("tbody");if(!o)throw new Error("Table block does not contain a 'tbody' HTML element. This should never happen.");if(void 0!==this.state.rowIndex&&void 0!==this.state.colIndex){var i=o.children[this.state.rowIndex].children[this.state.colIndex];i?this.state.referencePosCell=i.getBoundingClientRect():(this.state.rowIndex=void 0,this.state.colIndex=void 0)}this.state.referencePosTable=o.getBoundingClientRect(),this.emitUpdate()}}},{key:"destroy",value:function(){this.pmView.dom.removeEventListener("mousemove",this.mouseMoveHandler),window.removeEventListener("mouseup",this.mouseUpHandler),this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("dragover",this.dragOverHandler),this.pmView.root.removeEventListener("drop",this.dropHandler)}}])}(),EA=new jn("TableHandlesPlugin"),xA=function(e){function t(e){var n;return dw(this,t),n=fw(this,t),Ew(n,"view"),Ew(n,"colDragStart",(function(e){if(void 0===n.view.state||void 0===n.view.state.colIndex)throw new Error("Attempted to drag table column, but no table block was hovered prior.");if(n.view.state.draggingState={draggedCellOrientation:"col",originalIndex:n.view.state.colIndex,mousePos:e.clientX},n.view.emitUpdate(),n.editor.transact((function(e){return e.setMeta(EA,{draggedCellOrientation:n.view.state.draggingState.draggedCellOrientation,originalIndex:n.view.state.colIndex,newIndex:n.view.state.colIndex,tablePos:n.view.tablePos})})),!n.editor.prosemirrorView)throw new Error("Editor view not initialized.");wA(n.editor.prosemirrorView.root),e.dataTransfer.setDragImage(pA,0,0),e.dataTransfer.effectAllowed="move"})),Ew(n,"rowDragStart",(function(e){if(void 0===n.view.state||void 0===n.view.state.rowIndex)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(n.view.state.draggingState={draggedCellOrientation:"row",originalIndex:n.view.state.rowIndex,mousePos:e.clientY},n.view.emitUpdate(),n.editor.transact((function(e){return e.setMeta(EA,{draggedCellOrientation:n.view.state.draggingState.draggedCellOrientation,originalIndex:n.view.state.rowIndex,newIndex:n.view.state.rowIndex,tablePos:n.view.tablePos})})),!n.editor.prosemirrorView)throw new Error("Editor view not initialized.");wA(n.editor.prosemirrorView.root),e.dataTransfer.setDragImage(pA,0,0),e.dataTransfer.effectAllowed="copyMove"})),Ew(n,"dragEnd",(function(){if(void 0===n.view.state)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(n.view.state.draggingState=void 0,n.view.emitUpdate(),n.editor.transact((function(e){return e.setMeta(EA,null)})),!n.editor.prosemirrorView)throw new Error("Editor view not initialized.");var e;e=n.editor.prosemirrorView.root,pA&&(e instanceof Document?e.body.removeChild(pA):e.removeChild(pA),pA=void 0)})),Ew(n,"freezeHandles",(function(){n.view.menuFrozen=!0})),Ew(n,"unfreezeHandles",(function(){n.view.menuFrozen=!1})),Ew(n,"getCellsAtRowHandle",(function(e,t){return AC(e,t)})),Ew(n,"getCellsAtColumnHandle",(function(e,t){return FC(e,t)})),Ew(n,"setCellSelection",(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,o=n.view;if(!o)throw new Error("Table handles view not initialized");var i=e.doc.resolve(o.tablePos+1),a=e.doc.resolve(i.posAtIndex(t.row)+1),s=e.doc.resolve(a.posAtIndex(t.col)),u=e.doc.resolve(i.posAtIndex(r.row)+1),l=e.doc.resolve(u.posAtIndex(r.col)),c=e.tr;return c.setSelection(new ac(s,l)),e.apply(c)})),Ew(n,"addRowOrColumn",(function(e,t){n.editor.exec((function(r,o){var i=n.setCellSelection(r,"row"===t.orientation?{row:e,col:0}:{row:0,col:e});return"row"===t.orientation?"above"===t.side?function(e,t){if(!Ql(e))return!1;if(t){var n=fc(e);t(mc(e.tr,n,n.top))}return!0}(i,o):function(e,t){if(!Ql(e))return!1;if(t){var n=fc(e);t(mc(e.tr,n,n.bottom))}return!0}(i,o):"left"===t.side?function(e,t){if(!Ql(e))return!1;if(t){var n=fc(e);t(pc(e.tr,n,n.left))}return!0}(i,o):function(e,t){if(!Ql(e))return!1;if(t){var n=fc(e);t(pc(e.tr,n,n.right))}return!0}(i,o)}))})),Ew(n,"removeRowOrColumn",(function(e,t){return"row"===t?n.editor.exec((function(t,r){return function(e,t){if(!Ql(e))return!1;if(t){var n=fc(e),r=e.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(var o=n.bottom-1;vc(r,n,o),o!=n.top;o--){var i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=Kl.get(n.table)}t(r)}return!0}(n.setCellSelection(t,{row:e,col:0}),r)})):n.editor.exec((function(t,r){return function(e,t){if(!Ql(e))return!1;if(t){var n=fc(e),r=e.tr;if(0==n.left&&n.right==n.map.width)return!1;for(var o=n.right-1;hc(r,n,o),o!=n.left;o--){var i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=Kl.get(i)}t(r)}return!0}(n.setCellSelection(t,{row:0,col:e}),r)}))})),Ew(n,"mergeCells",(function(e){return n.editor.exec((function(t,r){return function(e,t){var n=e.selection;if(!(n instanceof ac)||n.$anchorCell.pos==n.$headCell.pos)return!1;var r=fc(e),o=r.map;if(function(e,t){for(var n=e.width,r=e.height,o=e.map,i=t.top*n+t.left,a=i,s=(t.bottom-1)*n+t.left,u=i+(t.right-t.left-1),l=t.top;l<t.bottom;l++){if(t.left>0&&o[a]==o[a-1]||t.right<n&&o[u]==o[u+1])return!0;a+=n,u+=n}for(var c=t.left;c<t.right;c++){if(t.top>0&&o[i]==o[i-n]||t.bottom<r&&o[s]==o[s+n])return!0;i++,s++}return!1}(o,r))return!1;if(t){for(var i,a,s=e.tr,u={},l=K.empty,c=r.top;c<r.bottom;c++)for(var d=r.left;d<r.right;d++){var f=o.map[c*o.width+d],p=r.table.nodeAt(f);if(!u[f]&&p)if(u[f]=!0,null==i)i=f,a=p;else{gc(p)||(l=l.append(p.content));var h=s.mapping.map(f+r.tableStart);s.delete(h,h+p.nodeSize)}}if(null==i||null==a)return!0;if(s.setNodeMarkup(i+r.tableStart,null,Ll(Ll({},ic(a.attrs,a.attrs.colspan,r.right-r.left-a.attrs.colspan)),{},{rowspan:r.bottom-r.top})),l.size){var m=i+1+a.content.size,v=gc(a)?i+1:m;s.replaceWith(v+r.tableStart,m+r.tableStart,l)}s.setSelection(new ac(s.doc.resolve(i+r.tableStart))),t(s)}return!0}(e?n.setCellSelection(t,e.relativeStartCell,e.relativeEndCell):t,r)}))})),Ew(n,"splitCell",(function(e){return n.editor.exec((function(t,r){return o=e?n.setCellSelection(t,e):t,i=r,s=Jl(o.schema),(a=function(e){var t=e.node;return s[t.type.spec.tableRole]},function(e,t){var n,r,o,i=e.selection;if(i instanceof ac){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;r=i.$anchorCell.nodeAfter,o=i.$anchorCell.pos}else{if(!(r=function(e){for(var t=e.depth;t>0;t--){var n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}(i.$from)))return!1;o=null==(n=Yl(i.$from))?void 0:n.pos}if(null==r||null==o)return!1;if(1==r.attrs.colspan&&1==r.attrs.rowspan)return!1;if(t){var s=r.attrs,u=[],l=s.colwidth;s.rowspan>1&&(s=Ll(Ll({},s),{},{rowspan:1})),s.colspan>1&&(s=Ll(Ll({},s),{},{colspan:1}));for(var c,d=fc(e),f=e.tr,p=0;p<d.right-d.left;p++)u.push(l?Ll(Ll({},s),{},{colwidth:l&&l[p]?[l[p]]:null}):s);for(var h=d.top;h<d.bottom;h++){var m=d.map.positionAt(h,d.left,d.table);h==d.top&&(m+=r.nodeSize);for(var v=d.left,g=0;v<d.right;v++,g++)v==d.left&&h==d.top||f.insert(c=f.mapping.map(m+d.tableStart,1),a({node:r,row:h,col:v}).createAndFill(u[g]))}f.setNodeMarkup(o,a({node:r,row:d.top,col:d.left}),u[0]),i instanceof ac&&f.setSelection(new ac(f.doc.resolve(i.$anchorCell.pos),c?f.doc.resolve(c):void 0)),t(f)}return!0})(o,i);var o,i,a,s}))})),Ew(n,"getCellSelection",(function(){return n.editor.transact((function(e){var t=e.selection,n=t.$from,r=t.$to;if(hE(t))t.ranges.forEach((function(e){var t,o;n=e.$from.min(null!==(t=n)&&void 0!==t?t:e.$from),r=e.$to.max(null!==(o=r)&&void 0!==o?o:e.$to)}));else if(n=e.doc.resolve(t.$from.pos-t.$from.parentOffset-1),r=e.doc.resolve(t.$to.pos-t.$to.parentOffset-1),0===n.pos||0===r.pos)return;for(var o=e.doc.resolve(n.pos-n.parentOffset-1),i=e.doc.resolve(r.pos-r.parentOffset-1),a=e.doc.resolve(o.pos-o.parentOffset-1),s=n.index(o.depth),u=o.index(a.depth),l=r.index(i.depth),c=i.index(a.depth),d=[],f=u;f<=c;f++)for(var p=s;p<=l;p++)d.push({row:f,col:p});return{from:{row:u,col:s},to:{row:c,col:l},cells:d}}))})),Ew(n,"getMergeDirection",(function(e){return n.editor.transact((function(t){var r=hE(t.selection)?t.selection:void 0;if(r&&e&&!(r.ranges.length<=1)){var o=n.getCellSelection();return o?function(e,t,n){var r=kC(e,n),o=kC(t,n);return r.col===o.col}(o.from,o.to,e)?"vertical":"horizontal":void 0}}))})),Ew(n,"cropEmptyRowsOrColumns",(function(e,t){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wC(e);if("columns"===t){for(var r=0,o=n[0].length-1;o>=0&&n.every((function(e){return SC(e[o].cell)&&1===e[o].colspan}));o--)r++;for(var i=n.length-1;i>=0;i--){var a=Math.max(n[i].length-r,1);n[i]=n[i].slice(0,a)}return CC(n)}for(var s=0,u=n.length-1;u>=0&&n[u].every((function(e){return SC(e.cell)&&1===e.rowspan}));u--)s++;var l=Math.min(s,n.length-1);return n.splice(n.length-l,l),CC(n)}(e,t)})),Ew(n,"addRowsOrColumns",(function(e,t,n){return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:wC(e),o=EC(e),i=o.width,a=o.height;if("columns"===t)r.forEach((function(e,t){if(n>=0)for(var r=0;r<n;r++)e.push({row:t,col:Math.max.apply(Math,ow(e.map((function(e){return e.col}))))+1,rowspan:1,colspan:1,cell:Mw("")});else e.splice(i+n,-1*n)}));else if(n>0)for(var s=function(e){var t=new Array(i).fill(null).map((function(t,n){return{row:a+e,col:n,rowspan:1,colspan:1,cell:Mw("")}}));r.push(t)},u=0;u<n;u++)s(u);else n<0&&r.splice(a+n,-1*n);return CC(r)}(e,t,n)})),n.editor=e,n.addProsemirrorPlugin(new Pn({key:EA,view:function(t){return n.view=new kA(e,t,(function(e){n.emit("update",e)})),n.view},props:{decorations:function(e){if(void 0!==n.view&&void 0!==n.view.state&&void 0!==n.view.state.draggingState&&void 0!==n.view.tablePos){var t="row"===n.view.state.draggingState.draggedCellOrientation?n.view.state.rowIndex:n.view.state.colIndex;if(void 0!==t){var r=[],o=n.view.state,i=o.block,a=o.draggingState,s=a.originalIndex,u=a.draggedCellOrientation;if(t===s||!i||"row"===u&&!MC(i,s,t)||"col"===u&&!BC(i,s,t))return _i.create(e.doc,r);var l=e.doc.resolve(n.view.tablePos+1);return"row"===n.view.state.draggingState.draggedCellOrientation?AC(n.view.state.block,t).forEach((function(n){var o=n.row,i=n.col,a=e.doc.resolve(l.posAtIndex(o)+1),u=e.doc.resolve(a.posAtIndex(i)+1),c=u.node(),d=u.pos+(t>s?c.nodeSize-2:0);r.push(Ti.widget(d,(function(){var e=document.createElement("div");return e.className="bn-table-drop-cursor",e.style.left="0",e.style.right="0",t>s?e.style.bottom="-2px":e.style.top="-3px",e.style.height="4px",e})))})):FC(n.view.state.block,t).forEach((function(n){var o=n.row,i=n.col,a=e.doc.resolve(l.posAtIndex(o)+1),u=e.doc.resolve(a.posAtIndex(i)+1),c=u.node(),d=u.pos+(t>s?c.nodeSize-2:0);r.push(Ti.widget(d,(function(){var e=document.createElement("div");return e.className="bn-table-drop-cursor",e.style.top="0",e.style.bottom="0",t>s?e.style.right="-2px":e.style.left="-3px",e.style.width="4px",e})))})),_i.create(e.doc,r)}}}}})),n}return pw(t,e),cw(t,[{key:"onUpdate",value:function(e){return this.on("update",e)}}],[{key:"key",value:function(){return"tableHandles"}}])}(wx),AA=Hs.create({name:"textAlignment",addGlobalAttributes:function(){return[{types:["paragraph","heading","bulletListItem","numberedListItem","checkListItem","tableCell","tableHeader"],attributes:{textAlignment:{default:"left",parseHTML:function(e){return e.getAttribute("data-text-alignment")},renderHTML:function(e){return"left"===e.textAlignment?{}:{"data-text-alignment":e.textAlignment}}}}}]}}),FA=Hs.create({name:"blockTextColor",addGlobalAttributes:function(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{textColor:{default:Vw.textColor.default,parseHTML:function(e){return e.hasAttribute("data-text-color")?e.getAttribute("data-text-color"):Vw.textColor.default},renderHTML:function(e){return e.textColor===Vw.textColor.default?{}:{"data-text-color":e.textColor}}}}}]}}),SA=Hs.create({name:"trailingNode",addProseMirrorPlugins:function(){var e=new jn(this.name);return[new Pn({key:e,appendTransaction:function(t,n,r){var o=r.doc,i=r.tr,a=r.schema,s=e.getState(r),u=o.content.size-2,l=a.nodes.blockContainer,c=a.nodes.paragraph;if(s)return i.insert(u,l.create(void 0,c.create()))},state:{init:function(e,t){},apply:function(e,t){if(!e.docChanged)return t;var n=e.doc.lastChild;if(!n||"blockGroup"!==n.type.name)throw new Error("Expected blockGroup");if(!(n=n.lastChild)||"blockContainer"!==n.type.name)return!0;var r=n.firstChild;if(!r)throw new Error("Expected blockContent");return n.nodeSize>4||"inline*"!==r.type.spec.content}}})]}}),MA={blockColor:"data-block-color",blockStyle:"data-block-style",id:"data-id",depth:"data-depth",depthChange:"data-depth-change"},BA=Lu.create({name:"blockContainer",group:"blockGroupChild bnBlock",content:"blockContent blockGroup?",priority:50,defining:!0,marks:"insertion modification deletion",parseHTML:function(){return[{tag:"div[data-node-type="+this.name+"]",getAttrs:function(e){if("string"==typeof e)return!1;for(var t={},n=0,r=Object.entries(MA);n<r.length;n++){var o=iw(r[n],2),i=o[0],a=o[1];e.getAttribute(a)&&(t[i]=e.getAttribute(a))}return t}},{tag:'div[data-node-type="blockOuter"]',skip:!0}]},renderHTML:function(e){var t,n=e.HTMLAttributes,r=document.createElement("div");r.className="bn-block-outer",r.setAttribute("data-node-type","blockOuter");for(var o=0,i=Object.entries(n);o<i.length;o++){var a=iw(i[o],2),s=a[0],u=a[1];"class"!==s&&r.setAttribute(s,u)}var l=bw(bw({},(null==(t=this.options.domAttributes)?void 0:t.block)||{}),n),c=document.createElement("div");c.className=Iw("bn-block",l.class),c.setAttribute("data-node-type",this.name);for(var d=0,f=Object.entries(l);d<f.length;d++){var p=iw(f[d],2),h=p[0],m=p[1];"class"!==h&&c.setAttribute(h,m)}return r.appendChild(c),{dom:r,contentDOM:c}}}),OA=Lu.create({name:"blockGroup",group:"childContainer",content:"blockGroupChild+",marks:"deletion insertion modification",parseHTML:function(){return[{tag:"div",getAttrs:function(e){return"string"!=typeof e&&"blockGroup"===e.getAttribute("data-node-type")&&null}}]},renderHTML:function(e){var t,n=e.HTMLAttributes,r=bw(bw({},(null==(t=this.options.domAttributes)?void 0:t.blockGroup)||{}),n),o=document.createElement("div");o.className=Iw("bn-block-group",r.class),o.setAttribute("data-node-type","blockGroup");for(var i=0,a=Object.entries(r);i<a.length;i++){var s=iw(a[i],2),u=s[0],l=s[1];"class"!==u&&o.setAttribute(u,l)}return{dom:o,contentDOM:o}}}),TA=Lu.create({name:"doc",topNode:!0,content:"blockGroup",marks:"insertion modification deletion"}),PA=function(e){function t(e){var n,r=e.editor,o=e.collaboration;return dw(this,t),n=fw(this,t,[r]),Ew(n,"editor"),Ew(n,"collaboration"),Ew(n,"forkedState"),n.editor=r,n.collaboration=o,n}return pw(t,e),cw(t,[{key:"findTypeInOtherYdoc",value:function(e,t){var n=e.doc;if(null===e._item){var r=Array.from(n.share.keys()).find((function(t){return n.share.get(t)===e}));if(null==r)throw new Error("type does not exist in other ydoc");return t.get(r,e.constructor)}var o,i=e._item,a=null!==(o=t.store.clients.get(i.id.client))&&void 0!==o?o:[];return a[Pg(a,i.id.clock)].content.type}},{key:"isForkedFromRemote",get:function(){return void 0!==this.forkedState}},{key:"fork",value:function(){if(!this.isForkedFromRemote){var e=this.collaboration.fragment;if(!e)throw new Error("No fragment to fork from");var t=new Kv;ig(t,ag(e.doc));var n=this.findTypeInOtherYdoc(e,t);this.forkedState={originalFragment:e,forkedFragment:n},this.editor._tiptapEditor.unregisterPlugin([Lb,Rb,Ib]),this.editor._tiptapEditor.registerPlugin(new Ex(n).plugins[0]),this.editor._tiptapEditor.registerPlugin((new xx).plugins[0]),this.emit("forked",!0)}}},{key:"merge",value:function(e){var t=e.keepChanges;if(this.forkedState){this.editor._tiptapEditor.unregisterPlugin(Ib),this.editor._tiptapEditor.unregisterPlugin(Rb);var n=this.forkedState,r=n.originalFragment,o=n.forkedFragment;if(t){var i=ag(o.doc);ig(r.doc,i)}this.editor.extensions.ySyncPlugin=new Ex(r),this.editor.extensions.yCursorPlugin=new kx(this.collaboration),this.editor.extensions.yUndoPlugin=new xx,this.editor._tiptapEditor.registerPlugin(this.editor.extensions.ySyncPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yCursorPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yUndoPlugin.plugins[0]),this.forkedState=void 0,this.emit("forked",!1)}}}],[{key:"key",value:function(){return"ForkYDocPlugin"}}])}(wx),NA=!1;function _A(e,t){var n=[];return e.forEach((function(e,r,o){o!==t&&n.push(e)})),K.from(n)}function jA(e,t){var n=K.from(e.content);if(n=function(e,t){for(var n=[],r=0;r<e.childCount;r++)if("tableRow"===e.child(r).type.name)if(n.length>0&&"table"===n[n.length-1].type.name){var o=n[n.length-1],i=o.copy(o.content.addToEnd(e.child(r)));n[n.length-1]=i}else{var a=t.nodes.table.createChecked(void 0,e.child(r));n.push(a)}else n.push(e.child(r));return K.from(n)}(n,t.state.schema),!function(e,t){var n,r,o=1===e.childCount,i="inline*"===(null==(n=e.firstChild)?void 0:n.type.spec.content),a="tableRow+"===(null==(r=e.firstChild)?void 0:r.type.spec.content);if(o){if(i)return!1;if(a){var s=iC(t.state);if(s.isBlockContainer)return!("tableRow+"===s.blockContent.node.type.spec.content)}}return!0}(n,t))return new ee(n,e.openStart,e.openEnd);for(var r=0;r<n.childCount;r++)if("blockContent"===n.child(r).type.spec.group){var o=[n.child(r)];if(r+1<n.childCount&&"blockGroup"===n.child(r+1).type.name){var i=n.child(r+1).child(0).child(0);("bulletListItem"===i.type.name||"numberedListItem"===i.type.name||"checkListItem"===i.type.name)&&(o.push(n.child(r+1)),n=_A(n,r+1))}var a=t.state.schema.nodes.blockContainer.createChecked(void 0,o);n=n.replaceChild(r,a)}return new ee(n,e.openStart,e.openEnd)}var IA=function(e){function t(e,n){var r;dw(this,t),r=fw(this,t,[bw(bw({},e),{},{content:void 0})]),Ew(r,"_state"),Ew(r,"mount",(function(e,t,n){t?(r.options.element=t,r.createViewAlternative(e,n)):r.destroy()}));var o,i,a=r.schema,s=a.nodes.doc.createAndFill;a.nodes.doc.createAndFill=function(){if(o)return o;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=s.apply(a.nodes.doc,t),i=JSON.parse(JSON.stringify(r.toJSON()));return i.content[0].content[0].attrs.id="initialBlockId",o=ye.fromJSON(a,i)};try{var u;i=uu({type:"doc",content:[{type:"blockGroup",content:null==e?void 0:e.content.map((function(e){return IC(e,r.schema,n).toJSON()}))}]},r.schema,r.options.parseOptions)}catch(u){throw console.error("Error creating document from blocks passed as `initialContent`. Caused by exception: ",u),new Error("Error creating document from blocks passed as `initialContent`:\n"+ +JSON.stringify(e.content))}return r._state=On.create({doc:i,schema:r.schema}),r}return pw(t,e),cw(t,[{key:"state",get:function(){return this.view&&(this._state=this.view.state),this._state}},{key:"dispatch",value:function(e){if(!this.view)return this._state=this.state.apply(e),void this.emit("transaction",{editor:this,transaction:e});if(!this.view.isDestroyed)if(this.isCapturingTransaction)this.dispatchTransaction(e);else{var t=this.state.applyTransaction(e),n=t.state,r=t.transactions,o=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),o&&this.emit("selectionUpdate",{editor:this,transaction:e});var i=e.getMeta("focus"),a=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),a&&this.emit("blur",{editor:this,event:a.event,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&(this.emit("update",{editor:this,transaction:e}),this.emit("v3-update",{editor:this,transaction:e,appendedTransactions:r.slice(1)}))}}},{key:"forceEnablePlugins",value:function(){if(this.view)throw new Error("forcePluginsEnabled called after view has been initialized");this._state=this.state.reconfigure({plugins:this.extensionManager.plugins})}},{key:"createViewAlternative",value:function(e,t){this.contentComponent=t;var n={};this.extensionManager.extensions.forEach((function(t){"mark"===t.type&&t.config.addMarkView&&(n[t.name]=t.config.addMarkView(e))})),this.view=new aa({mount:this.options.element},bw(bw({},this.options.editorProps),{},{dispatchTransaction:this.dispatch.bind(this),state:this.state,markViews:n,nodeViews:this.extensionManager.nodeViews}));var r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.commands.focus(this.options.autofocus||"true"===this.options.element.getAttribute("data-bn-autofocus"),{scrollIntoView:!1}),this.emit("create",{editor:this}),this.isInitialized=!0}}])}(Iu);Ew(IA,"create",(function(e,t){var n,r,o=null==(n=null==globalThis?void 0:globalThis.window)?void 0:n.setTimeout;Cw(null==(r=null==globalThis?void 0:globalThis.window)?void 0:r.setTimeout)<"u"&&(globalThis.window.setTimeout=function(){return 0});try{return new IA(e,t)}finally{o&&(globalThis.window.setTimeout=o)}}));var RA=IA;RA.prototype.createView=function(){this.options.onPaste=this.options.onDrop=void 0};var LA,HA={enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!1},VA=function(e){function t(e){var n,r,o,i,a,s,u,l,c,d,f,p,h,m,v,g,y,b,D,w,C,k,E,x,A,F;dw(this,t),f=fw(this,t),Ew(f,"pmSchema"),Ew(f,"extensions",{}),Ew(f,"headless",!1),Ew(f,"_tiptapEditor"),Ew(f,"elementRenderer",null),Ew(f,"blockCache",new WeakMap),Ew(f,"dictionary"),Ew(f,"schema"),Ew(f,"blockImplementations"),Ew(f,"inlineContentImplementations"),Ew(f,"styleImplementations"),Ew(f,"formattingToolbar"),Ew(f,"linkToolbar"),Ew(f,"sideMenu"),Ew(f,"suggestionMenus"),Ew(f,"filePanel"),Ew(f,"tableHandles"),Ew(f,"comments"),Ew(f,"showSelectionPlugin"),Ew(f,"forkYDocPlugin"),Ew(f,"uploadFile"),Ew(f,"onUploadStartCallbacks",[]),Ew(f,"onUploadEndCallbacks",[]),Ew(f,"resolveFileUrl"),Ew(f,"resolveUsers"),Ew(f,"settings"),Ew(f,"activeTransaction",null),Ew(f,"mount",(function(e,t){f._tiptapEditor.mount(f,e,t)})),f.options=e;var S=e;if(S.onEditorContentChange)throw new Error("onEditorContentChange initialization option is deprecated, use <BlockNoteView onChange={...} />, the useEditorChange(...) hook, or editor.onChange(...)");if(S.onTextCursorPositionChange)throw new Error("onTextCursorPositionChange initialization option is deprecated, use <BlockNoteView onSelectionChange={...} />, the useEditorSelectionChange(...) hook, or editor.onSelectionChange(...)");if(S.onEditorReady)throw new Error("onEditorReady is deprecated. Editor is immediately ready for use after creation.");if(S.editable)throw new Error("editable initialization option is deprecated, use <BlockNoteView editable={true/false} />, or alternatively editor.isEditable = true/false");f.dictionary=e.dictionary||ZD,f.settings={tables:{splitCells:null!==(n=null==(p=null==e?void 0:e.tables)?void 0:p.splitCells)&&void 0!==n&&n,cellBackgroundColor:null!==(r=null==(h=null==e?void 0:e.tables)?void 0:h.cellBackgroundColor)&&void 0!==r&&r,cellTextColor:null!==(o=null==(m=null==e?void 0:e.tables)?void 0:m.cellTextColor)&&void 0!==o&&o,headers:null!==(i=null==(v=null==e?void 0:e.tables)?void 0:v.headers)&&void 0!==i&&i},codeBlock:{indentLineWithTab:null===(a=null==(g=null==e?void 0:e.codeBlock)?void 0:g.indentLineWithTab)||void 0===a||a,defaultLanguage:null!==(s=null==(y=null==e?void 0:e.codeBlock)?void 0:y.defaultLanguage)&&void 0!==s?s:"text",supportedLanguages:null!==(u=null==(b=null==e?void 0:e.codeBlock)?void 0:b.supportedLanguages)&&void 0!==u?u:{},createHighlighter:null!==(l=null==(D=null==e?void 0:e.codeBlock)?void 0:D.createHighlighter)&&void 0!==l?l:void 0}};var M=bw(bw({defaultStyles:!0,schema:e.schema||bE.create(),_headless:!1},e),{},{placeholders:bw(bw({},f.dictionary.placeholders),e.placeholders)});if(M.comments&&!M.resolveUsers)throw new Error("resolveUsers is required when using comments");f.resolveUsers=M.resolveUsers,f.schema=M.schema,f.blockImplementations=M.schema.blockSpecs,f.inlineContentImplementations=M.schema.inlineContentSpecs,f.styleImplementations=M.schema.styleSpecs,f.extensions=function(e){var t,n,r,o={},i=rw(function(e){var t=[_u.ClipboardTextSerializer,_u.Commands,_u.Editable,_u.FocusEvents,_u.Tabindex,sd,Hs.create({name:"dropCursor",addProseMirrorPlugins:function(){return[e.dropCursor({width:5,color:"#ddeeff",editor:e.editor})]}}),xw.configure({types:["blockContainer","columnList","column"],setIdAttribute:e.setIdAttribute}),jx,_p,yA,bA,DA,Np.extend({inclusive:!1}).configure({defaultProtocol:Wx,protocols:NA?[]:Gx})].concat(ow(Object.values(e.styleSpecs).map((function(t){return t.implementation.mark.configure({editor:e.editor})}))),[FA,bx,AA,Hs.create({name:"OverrideEscape",addKeyboardShortcuts:function(){var t=this;return{Escape:function(){return!e.editor.suggestionMenus.shown&&t.editor.commands.blur()}}}}),TA,BA.configure({editor:e.editor,domAttributes:e.domAttributes}),Vx.configure({editor:e.editor,tabBehavior:e.tabBehavior}),OA.configure({domAttributes:e.domAttributes})],ow(Object.values(e.inlineContentSpecs).filter((function(e){return"link"!==e.config&&"text"!==e.config})).map((function(t){return t.implementation.node.configure({editor:e.editor})}))),ow(Object.values(e.blockSpecs).flatMap((function(t){return[].concat(ow((t.implementation.requiredExtensions||[]).map((function(t){return t.configure({editor:e.editor,domAttributes:e.domAttributes})}))),[t.implementation.node.configure({editor:e.editor,domAttributes:e.domAttributes})])}))),[yx(e.editor),px(e.editor,e.pasteHandler||function(e){return e.defaultPasteHandler()}),YE(e.editor)],ow(void 0===e.trailingBlock||e.trailingBlock?[SA]:[]),ow(e.comments?[Ax]:[]));return NA=!0,e.collaboration||t.push(Pd),t}(e));try{for(i.s();!(r=i.n()).done;){var a=r.value;o[a.name]=a}}catch(e){i.e(e)}finally{i.f()}e.collaboration&&(o.ySyncPlugin=new Ex(e.collaboration.fragment),o.yUndoPlugin=new xx,null!=(n=e.collaboration.provider)&&n.awareness&&(o.yCursorPlugin=new kx(e.collaboration)),o.forkYDocPlugin=new PA({editor:e.editor,collaboration:e.collaboration})),o.formattingToolbar=new _x(e.editor),o.linkToolbar=new Ux(e.editor),o.sideMenu=new dA(e.editor,e.sideMenuDetection),o.suggestionMenus=new gA(e.editor),o.filePanel=new Tx(e.editor),o.placeholder=new Jx(e.editor,e.placeholders),(null===(t=e.animations)||void 0===t||t)&&(o.animations=new Qx),e.tableHandles&&(o.tableHandles=new xA(e.editor)),o.nodeSelectionKeyboard=new Kx,o.showSelection=new tA(e.editor),e.comments&&(o.comments=new Mx(e.editor,e.comments.threadStore,Ax.name));var s,u=rw(e.disableExtensions||[]);try{for(u.s();!(s=u.n()).done;)delete o[s.value]}catch(e){u.e(e)}finally{u.f()}return o}({editor:f,domAttributes:M.domAttributes||{},blockSpecs:f.schema.blockSpecs,styleSpecs:f.schema.styleSpecs,inlineContentSpecs:f.schema.inlineContentSpecs,collaboration:M.collaboration,trailingBlock:M.trailingBlock,disableExtensions:M.disableExtensions,setIdAttribute:M.setIdAttribute,animations:null===(c=M.animations)||void 0===c||c,tableHandles:uE("table",f),dropCursor:null!==(d=f.options.dropCursor)&&void 0!==d?d:qD,placeholders:M.placeholders,tabBehavior:M.tabBehavior,sideMenuDetection:M.sideMenuDetection||"viewport",comments:M.comments,pasteHandler:M.pasteHandler}),((null==(w=M._tiptapOptions)?void 0:w.extensions)||[]).forEach((function(e){f.extensions[e.name]=e}));var B,O=rw(M.extensions||[]);try{for(O.s();!(B=O.n()).done;){var T=B.value;"function"==typeof T&&(T=T(f));var P=T.constructor.key();if(!P)throw new Error("Extension ".concat(T.constructor.name," does not have a key method"));if(f.extensions[P])throw new Error("Extension ".concat(T.constructor.name," already exists with key ").concat(P));f.extensions[P]=T}}catch(e){O.e(e)}finally{O.f()}if(Object.entries(M._extensions||{}).forEach((function(e){var t=iw(e,2),n=t[0],r=t[1],o="function"==typeof r?r(f):r;f.extensions[n]="plugin"in o?new(function(e){function t(){var e;return dw(this,t),(e=fw(this,t)).addProsemirrorPlugin(o.plugin),e}return pw(t,e),cw(t,[{key:"priority",get:function(){return o.priority}}],[{key:"key",value:function(){return n}}])}(wx)):o})),f.formattingToolbar=f.extensions.formattingToolbar,f.linkToolbar=f.extensions.linkToolbar,f.sideMenu=f.extensions.sideMenu,f.suggestionMenus=f.extensions.suggestionMenus,f.filePanel=f.extensions.filePanel,f.tableHandles=f.extensions.tableHandles,f.comments=f.extensions.comments,f.showSelectionPlugin=f.extensions.showSelection,f.forkYDocPlugin=f.extensions.forkYDocPlugin,M.uploadFile){var N=M.uploadFile;f.uploadFile=function(){var e=tw(QD().mark((function e(t,n){return QD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.onUploadStartCallbacks.forEach((function(e){return e.apply(f,[n])})),e.prev=1,e.next=4,N(t,n);case 4:return e.abrupt("return",e.sent);case 5:return e.prev=5,f.onUploadEndCallbacks.forEach((function(e){return e.apply(f,[n])})),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[1,,5,8]])})));return function(t,n){return e.apply(this,arguments)}}()}f.resolveFileUrl=M.resolveFileUrl,f.headless=M._headless;var _="ySyncPlugin"in f.extensions||"liveblocksExtension"in f.extensions;_&&M.initialContent&&console.warn("When using Collaboration, initialContent might cause conflicts, because changes should come from the collaboration provider");var j=M.initialContent||(_?[{type:"paragraph",id:"initialBlockId"}]:[{type:"paragraph",id:xw.options.generateID()}]);if(!Array.isArray(j)||0===j.length)throw new Error("initialContent must be a non-empty array of blocks, received: "+j);var I=ow(Object.entries(f.extensions).map((function(e){var t=iw(e,2),n=t[0],r=t[1];return r instanceof Hs||r instanceof Lu||r instanceof _s?r:r instanceof wx&&!r.plugins.length?void 0:Hs.create({name:n,priority:r.priority,addProseMirrorPlugins:function(){return r.plugins}})}))).filter((function(e){return void 0!==e})),R=bw(bw(bw({},HA),M._tiptapOptions),{},{content:j,extensions:I,editorProps:bw(bw({},null==(C=M._tiptapOptions)?void 0:C.editorProps),{},{attributes:bw(bw(bw({tabIndex:"0"},null==(E=null==(k=M._tiptapOptions)?void 0:k.editorProps)?void 0:E.attributes),null==(x=M.domAttributes)?void 0:x.editor),{},{class:Iw("bn-editor",M.defaultStyles?"bn-default-styles":"",(null==(F=null==(A=M.domAttributes)?void 0:A.editor)?void 0:F.class)||"")}),transformPasted:jA})});return f.headless?f.pmSchema=function(e,t){return xs(Ls.resolve(e),t)}(R.extensions):(f._tiptapEditor=RA.create(R,f.schema.styleSchema),f.pmSchema=f._tiptapEditor.schema),f.pmSchema.cached.blockNoteEditor=f,f.emit("create"),f}return pw(t,e),cw(t,[{key:"exec",value:function(e){var t=this;if(this.activeTransaction)throw new Error("`exec` should not be called within a `transact` call, move the `exec` call outside of the `transact` call");return e(this._tiptapEditor.state,(function(e){return t._tiptapEditor.dispatch(e)}),this._tiptapEditor.view)}},{key:"canExec",value:function(e){if(this.activeTransaction)throw new Error("`canExec` should not be called within a `transact` call, move the `canExec` call outside of the `transact` call");return e(this._tiptapEditor.state,void 0,this._tiptapEditor.view)}},{key:"transact",value:function(e){if(this.activeTransaction)return e(this.activeTransaction);try{this.activeTransaction=this._tiptapEditor.state.tr;var t=e(this.activeTransaction),n=this.activeTransaction;return this.activeTransaction=null,n&&(n.docChanged||n.selectionSet||n.scrolledIntoView||n.storedMarksSet||!n.isGeneric)&&this._tiptapEditor.dispatch(n),t}finally{this.activeTransaction=null}}},{key:"extension",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.key(),n=this.extensions[t];if(!n)throw new Error("Extension ".concat(t," not found"));return n}},{key:"prosemirrorState",get:function(){if(this.activeTransaction)throw new Error("`prosemirrorState` should not be called within a `transact` call, move the `prosemirrorState` call outside of the `transact` call or use `editor.transact` to read the current editor state");return this._tiptapEditor.state}},{key:"prosemirrorView",get:function(){return this._tiptapEditor.view}},{key:"domElement",get:function(){var e;return null==(e=this.prosemirrorView)?void 0:e.dom}},{key:"isFocused",value:function(){var e;return(null==(e=this.prosemirrorView)?void 0:e.hasFocus())||!1}},{key:"focus",value:function(){var e;null==(e=this.prosemirrorView)||e.focus()}},{key:"onUploadStart",value:function(e){var t=this;return this.onUploadStartCallbacks.push(e),function(){var n=t.onUploadStartCallbacks.indexOf(e);n>-1&&t.onUploadStartCallbacks.splice(n,1)}}},{key:"onUploadEnd",value:function(e){var t=this;return this.onUploadEndCallbacks.push(e),function(){var n=t.onUploadEndCallbacks.indexOf(e);n>-1&&t.onUploadEndCallbacks.splice(n,1)}}},{key:"topLevelBlocks",get:function(){return this.document}},{key:"document",get:function(){var e=this;return this.transact((function(t){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cC(t),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:dC(t),o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:fC(t),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:pC(t),a=[];return e.firstChild.descendants((function(e){return a.push(gC(e,t,n,r,o,i)),!1})),a}(t.doc,e.pmSchema)}))}},{key:"getBlock",value:function(e){return this.transact((function(t){return function(e,t){var n="string"==typeof t?t:t.id,r=sC(e),o=RC(n,e);if(o)return gC(o.node,r)}(t.doc,e)}))}},{key:"getPrevBlock",value:function(e){return this.transact((function(t){return function(e,t){var n=RC("string"==typeof t?t:t.id,e),r=sC(e);if(n){var o=e.resolve(n.posBeforeNode).nodeBefore;return o?gC(o,r):void 0}}(t.doc,e)}))}},{key:"getNextBlock",value:function(e){return this.transact((function(t){return function(e,t){var n=RC("string"==typeof t?t:t.id,e),r=sC(e);if(n){var o=e.resolve(n.posBeforeNode+n.node.nodeSize).nodeAfter;return o?gC(o,r):void 0}}(t.doc,e)}))}},{key:"getParentBlock",value:function(e){return this.transact((function(t){return function(e,t){var n="string"==typeof t?t:t.id,r=sC(e),o=RC(n,e);if(o){var i=e.resolve(o.posBeforeNode),a=i.node(),s=i.node(-1),u="doc"!==s.type.name?"blockGroup"===a.type.name?s:a:void 0;return u?gC(u,r):void 0}}(t.doc,e)}))}},{key:"forEachBlock",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.document.slice();t&&n.reverse(),function n(r){var o,i=rw(r);try{for(i.s();!(o=i.n()).done;){var a=o.value;if(!1===e(a))return!1;if(!n(t?a.children.slice().reverse():a.children))return!1}}catch(e){i.e(e)}finally{i.f()}return!0}(n)}},{key:"onEditorContentChange",value:function(e){this._tiptapEditor.on("update",e)}},{key:"onEditorSelectionChange",value:function(e){this._tiptapEditor.on("selectionUpdate",e)}},{key:"getTextCursorPosition",value:function(){return this.transact((function(e){return function(e){var t,n=aC(e).bnBlock,r=sC(e.doc),o=e.doc.resolve(n.beforePos),i=o.nodeBefore,a=e.doc.resolve(n.afterPos).nodeAfter;return o.depth>1&&((t=o.node()).type.isInGroup("bnBlock")||(t=o.node(o.depth-1))),{block:gC(n.node,r),prevBlock:null===i?void 0:gC(i,r),nextBlock:null===a?void 0:gC(a,r),parentBlock:void 0===t?void 0:gC(t,r)}}(e)}))}},{key:"setTextCursorPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"start";return this.transact((function(n){return ME(n,e,t)}))}},{key:"getSelection",value:function(){return this.transact((function(e){return function(e){var t=sC(e);if(!e.selection.empty&&!("node"in e.selection)){var n=e.doc.resolve(tC(e.doc,e.selection.from).posBeforeNode),r=e.doc.resolve(tC(e.doc,e.selection.to).posBeforeNode),o=function(r,o){var i=n.posAtIndex(r,o),a=e.doc.resolve(i).nodeAfter;if(!a)throw new Error("Error getting selection - node not found at position ".concat(i));return gC(a,t)},i=[],a=n.sharedDepth(r.pos),s=n.index(a),u=r.index(a);if(n.depth>a){i.push(gC(n.nodeAfter,t));for(var l=n.depth;l>a;l--)if(n.node(l).type.isInGroup("childContainer"))for(var c=n.index(l)+1,d=n.node(l).childCount,f=c;f<d;f++)i.push(o(f,l))}else i.push(o(s,a));for(var p=s+1;p<=u;p++)i.push(o(p,a));if(0===i.length)throw new Error("Error getting selection - selection doesn't span any blocks (".concat(e.selection,")"));return{blocks:i}}}(e)}))}},{key:"getSelectionCutBlocks",value:function(){return this.transact((function(e){return function(e){for(var t=sC(e),n=e.selection.$from,r=e.selection.$to;r.parentOffset>=r.parent.nodeSize-2&&r.depth>0;)r=e.doc.resolve(r.pos+1);for(;0===r.parentOffset&&r.depth>0;)r=e.doc.resolve(r.pos-1);for(;0===n.parentOffset&&n.depth>0;)n=e.doc.resolve(n.pos-1);for(;n.parentOffset>=n.parent.nodeSize-2&&n.depth>0;)n=e.doc.resolve(n.pos+1);var o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cC(t),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:dC(t),o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:fC(t),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:pC(t);if(0===e.content.childCount)return{blocks:[],blockCutAtStart:void 0,blockCutAtEnd:void 0};if(1!==e.content.childCount)throw new Error("slice must be a single block, did you forget includeParents=true?");return function e(a,s,u){if("blockGroup"!==a.type.name)throw new Error("unexpected");var l,c,d=[];return a.forEach((function(f,p,h){if("blockContainer"!==f.type.name)throw new Error("unexpected");if(0!==f.childCount){if(0===f.childCount||f.childCount>2)throw new Error("unexpected, blockContainer.childCount: "+f.childCount);var m=0===h,v=h===a.childCount-1;if("blockGroup"===f.firstChild.type.name){if(!m)throw new Error("unexpected");var g=e(f.firstChild,Math.max(0,s-1),v?Math.max(0,u-1):0);return l=g.blockCutAtStart,v&&(c=g.blockCutAtEnd),void d.push.apply(d,ow(g.blocks))}var y=gC(f,t,n,r,o,i),b=f.childCount>1?f.child(1):void 0,D=[];if(b){var w=e(b,0,v?Math.max(0,u-1):0);D=w.blocks,v&&(c=w.blockCutAtEnd)}v&&!b&&u>1&&(c=y.id),m&&s>1&&(l=y.id),d.push(bw(bw({},y),{},{children:D}))}})),{blocks:d,blockCutAtStart:l,blockCutAtEnd:c}}(e.content.firstChild,Math.max(e.openStart-1,0),Math.max(e.openEnd-1,0))}(e.doc.slice(n.pos,r.pos,!0),t);return bw({_meta:{startPos:n.pos,endPos:r.pos}},o)}(e)}))}},{key:"setSelection",value:function(e,t){return this.transact((function(n){return function(e,t,n){var r="string"==typeof t?t:t.id,o="string"==typeof n?n:n.id,i=lC(sC(e));if(r===o)throw new Error("Attempting to set selection with the same anchor and head blocks (id ".concat(r,")"));var a=RC(r,e.doc);if(!a)throw new Error("Block with ID ".concat(r," not found"));var s=RC(o,e.doc);if(!s)throw new Error("Block with ID ".concat(o," not found"));var u,l,c=rC(a),d=rC(s),f=i.blockSchema[c.blockNoteType],p=i.blockSchema[d.blockNoteType];if(!c.isBlockContainer||"none"===f.content)throw new Error("Attempting to set selection anchor in block without content (id ".concat(r,")"));if(!d.isBlockContainer||"none"===p.content)throw new Error("Attempting to set selection anchor in block without content (id ".concat(o,")"));if("table"===f.content){var h=Kl.get(c.blockContent.node);u=c.blockContent.beforePos+h.positionAt(0,0,c.blockContent.node)+1+2}else u=c.blockContent.beforePos+1;if("table"===p.content){var m=Kl.get(d.blockContent.node),v=d.blockContent.beforePos+m.positionAt(m.height-1,m.width-1,d.blockContent.node)+1;l=v+e.doc.resolve(v).nodeAfter.nodeSize-2}else l=d.blockContent.afterPos-1;e.setSelection(yn.create(e.doc,u,l))}(n,e,t)}))}},{key:"isEditable",get:function(){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return!1}return void 0===this._tiptapEditor.isEditable||this._tiptapEditor.isEditable},set:function(e){if(this._tiptapEditor)this._tiptapEditor.options.editable!==e&&this._tiptapEditor.setEditable(e);else if(!this.headless)throw new Error("no editor, but also not headless?")}},{key:"insertBlocks",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"before";return this.transact((function(r){return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"before",o="string"==typeof n?n:n.id,i=sC(e),a=t.map((function(e){return IC(e,i)})),s=RC(o,e.doc);if(!s)throw new Error("Block with ID ".concat(o," not found"));var u=s.posBeforeNode;return"after"===r&&(u+=s.node.nodeSize),e.step(new xt(u,u,new ee(K.from(a),0,0))),a.map((function(e){return gC(e,i)}))}(r,e,t,n)}))}},{key:"updateBlock",value:function(e,t){return this.transact((function(n){return function(e,t,n){var r="string"==typeof t?t:t.id,o=RC(r,e.doc);if(!o)throw new Error("Block with ID ".concat(r," not found"));return $C(e,o.posBeforeNode,n,void 0,void 0),gC(e.doc.resolve(o.posBeforeNode+1).node(),sC(e))}(n,e,t)}))}},{key:"removeBlocks",value:function(e){return this.transact((function(t){return VC(t,e,[]).removedBlocks}))}},{key:"replaceBlocks",value:function(e,t){return this.transact((function(n){return VC(n,e,t)}))}},{key:"undo",value:function(){return this.options.collaboration?this.exec(VD):this.exec(Od)}},{key:"redo",value:function(){return this.options.collaboration?this.exec(zD):this.exec(Td)}},{key:"insertInlineContent",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).updateSelection,n=void 0!==t&&t,r=NC(e,this.pmSchema);this.transact((function(e){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{updateSelection:!0},o="number"==typeof t?{from:t,to:t}:{from:t.from,to:t.to},i=o.from,a=o.to,s=!0,u=!0,l="";if(n.forEach((function(e){e.check(),s&&e.isText&&0===e.marks.length?l+=e.text:s=!1,u=!!u&&e.isBlock})),i===a&&u){var c=e.doc.resolve(i).parent;c.isTextblock&&!c.type.spec.code&&!c.childCount&&(i-=1,a+=1)}s?e.insertText(l,i,a):e.replaceWith(i,a,n),r.updateSelection&&ru(e,e.steps.length-1,-1)}(e,{from:e.selection.from,to:e.selection.to},r,{updateSelection:n})}))}},{key:"getActiveStyles",value:function(){var e=this;return this.transact((function(t){var n,r={},o=rw(t.selection.$to.marks());try{for(o.s();!(n=o.n()).done;){var i=n.value,a=e.schema.styleSchema[i.type.name];a?"boolean"===a.propSchema?r[a.type]=!0:r[a.type]=i.attrs.stringValue:"link"!==i.type.name&&!i.type.spec.blocknoteIgnore&&console.warn("mark not found in styleschema",i.type.name)}}catch(e){o.e(e)}finally{o.f()}return r}))}},{key:"addStyles",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=iw(n[t],2),o=r[0],i=r[1],a=this.schema.styleSchema[o];if(!a)throw new Error("style ".concat(o," not found in styleSchema"));if("boolean"===a.propSchema)this._tiptapEditor.commands.setMark(o);else{if("string"!==a.propSchema)throw new Nw(a.propSchema);this._tiptapEditor.commands.setMark(o,{stringValue:i})}}}},{key:"removeStyles",value:function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];this._tiptapEditor.commands.unsetMark(r)}}},{key:"toggleStyles",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=iw(n[t],2),o=r[0],i=r[1],a=this.schema.styleSchema[o];if(!a)throw new Error("style ".concat(o," not found in styleSchema"));if("boolean"===a.propSchema)this._tiptapEditor.commands.toggleMark(o);else{if("string"!==a.propSchema)throw new Nw(a.propSchema);this._tiptapEditor.commands.toggleMark(o,{stringValue:i})}}}},{key:"getSelectedText",value:function(){return this.transact((function(e){return e.doc.textBetween(e.selection.from,e.selection.to)}))}},{key:"getSelectedLinkUrl",value:function(){return this._tiptapEditor.getAttributes("link").href}},{key:"createLink",value:function(e,t){if(""!==e){var n=this.pmSchema.mark("link",{href:e});this.transact((function(e){var r=e.selection,o=r.from,i=r.to;t?e.insertText(t,o,i).addMark(o,o+t.length,n):e.setSelection(yn.create(e.doc,i)).addMark(o,i,n)}))}}},{key:"canNestBlock",value:function(){return this.transact((function(e){var t=aC(e).bnBlock;return null!==e.doc.resolve(t.beforePos).nodeBefore}))}},{key:"nestBlock",value:function(){SE(this)}},{key:"canUnnestBlock",value:function(){return this.transact((function(e){var t=aC(e).bnBlock;return e.doc.resolve(t.beforePos).depth>1}))}},{key:"unnestBlock",value:function(){this._tiptapEditor.commands.liftListItem("blockContainer")}},{key:"moveBlocksUp",value:function(){return AE(this)}},{key:"moveBlocksDown",value:function(){return FE(this)}},{key:"blocksToHTMLLossy",value:(s=tw(QD().mark((function e(){var t,n=arguments;return QD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:this.document,e.abrupt("return",ZC(this.pmSchema,this).exportBlocks(t,{}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"blocksToFullHTML",value:(a=tw(QD().mark((function e(t){return QD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",QC(this.pmSchema,this).serializeBlocks(t,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"tryParseHTMLToBlocks",value:(i=tw(QD().mark((function e(t){return QD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",LE(t,this.pmSchema));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"blocksToMarkdownLossy",value:(o=tw(QD().mark((function e(){var t,n=arguments;return QD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:this.document,e.abrupt("return",_E(t,this.pmSchema,this,{}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"tryParseMarkdownToBlocks",value:(r=tw(QD().mark((function e(t){return QD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",UE(t,this.pmSchema));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"updateCollaborationUserInfo",value:function(e){if(!this.options.collaboration)throw new Error("Cannot update collaboration user info when collaboration is disabled.");this.extensions.yCursorPlugin.updateUser(e)}},{key:"onChange",value:function(e){var t=this;if(!this.headless){var n=function(n){var r=n.transaction,o=n.appendedTransactions;e(t,{getChanges:function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={type:"local"};e.getMeta("paste")?n={type:"paste"}:"drop"===e.getMeta("uiEvent")?n={type:"drop"}:e.getMeta("history$")?n={type:e.getMeta("history$").redo?"redo":"undo"}:e.getMeta("y-sync$")&&(n=e.getMeta("y-sync$").isUndoRedoOperation?{type:"undo-redo"}:{type:"yjs-remote"});var r,o=sC(e),i=cu(e.before,[e].concat(ow(t))),a=mu(i),s=a.flatMap((function(e){return fu(i.before,e.oldRange,LC)})).map((function(e){return gC(e.node,o)})),u=a.flatMap((function(e){return fu(i.doc,e.newRange,LC)})).map((function(e){return gC(e.node,o)})),l=new Map(u.map((function(e){return[e.id,e]}))),c=new Map(s.map((function(e){return[e.id,e]}))),d=[],f=rw(l);try{for(f.s();!(r=f.n()).done;){var p=iw(r.value,2),h=p[0],m=p[1];c.has(h)||d.push({type:"insert",block:m,source:n,prevBlock:void 0})}}catch(e){f.e(e)}finally{f.f()}var v,g=rw(c);try{for(g.s();!(v=g.n()).done;){var y=iw(v.value,2),b=y[0],D=y[1];l.has(b)||d.push({type:"delete",block:D,source:n,prevBlock:void 0})}}catch(e){g.e(e)}finally{g.f()}var w,C=rw(l);try{for(C.s();!(w=C.n()).done;){var k=iw(w.value,2),E=k[0],x=k[1];if(c.has(E)){var A=c.get(E);HC(A,x)&&d.push({type:"update",block:x,prevBlock:A,source:n})}}}catch(e){C.e(e)}finally{C.f()}return d}(r,o)}})};return this._tiptapEditor.on("v3-update",n),function(){t._tiptapEditor.off("v3-update",n)}}}},{key:"onSelectionChange",value:function(e,t){var n=this;if(!this.headless){var r=function(r){r.transaction.getMeta(Ib)&&!t||e(n)};return this._tiptapEditor.on("selectionUpdate",r),function(){n._tiptapEditor.off("selectionUpdate",r)}}}},{key:"onCreate",value:function(e){var t=this;return this.on("create",e),function(){t.off("create",e)}}},{key:"getSelectionBoundingBox",value:function(){if(this.prosemirrorView){var e=this.prosemirrorState.selection,t=e.ranges,n=Math.min.apply(Math,ow(t.map((function(e){return e.$from.pos})))),r=Math.max.apply(Math,ow(t.map((function(e){return e.$to.pos}))));if(wu(e)){var o=this.prosemirrorView.nodeDOM(n);if(o)return o.getBoundingClientRect()}return Cu(this.prosemirrorView,n,r)}}},{key:"isEmpty",get:function(){var e=this.document;return 0===e.length||1===e.length&&"paragraph"===e[0].type&&0===e[0].content.length}},{key:"openSuggestionMenu",value:function(e,t){var n=this;this.prosemirrorView&&(this.focus(),this.transact((function(r){null!=t&&t.deleteTriggerCharacter&&r.insertText(e),r.scrollIntoView().setMeta(n.suggestionMenus.plugins[0],{triggerCharacter:e,deleteTriggerCharacter:(null==t?void 0:t.deleteTriggerCharacter)||!1,ignoreQueryLength:(null==t?void 0:t.ignoreQueryLength)||!1})})))}},{key:"getForceSelectionVisible",value:function(){return this.showSelectionPlugin.getEnabled()}},{key:"setForceSelectionVisible",value:function(e){this.showSelectionPlugin.setEnabled(e)}},{key:"convertHtmlToBlockNoteHtml",value:function(e){return RE(e.trim()).innerHTML}},{key:"pasteHTML",value:function(e){var t,n=e;arguments.length>1&&void 0!==arguments[1]&&arguments[1]||(n=this.convertHtmlToBlockNoteHtml(e)),n&&(null==(t=this.prosemirrorView)||t.pasteHTML(n))}},{key:"pasteText",value:function(e){var t;return null==(t=this.prosemirrorView)?void 0:t.pasteText(e)}},{key:"pasteMarkdown",value:(n=tw(QD().mark((function e(t){return QD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,zE(t);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.pasteHTML.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}],[{key:"create",value:function(){return new t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}}]);var n,r,o,i,a,s}(Dx);function zA(){return $A.apply(this,arguments)}function $A(){return $A=tw(QD().mark((function e(){return QD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",LA||(LA=tw(QD().mark((function e(){var t,n,r,o,i,s;return QD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([a.e(8517).then(a.bind(a,8517)),a.e(3274).then(a.t.bind(a,3274,17))]);case 2:return t=e.sent,n=iw(t,2),r=n[0],o=n[1],i="default"in r?r.default:r,s="default"in o?o.default:o,e.next=10,i.init({data:s});case 10:return e.abrupt("return",{emojiMart:i,emojiData:s});case 11:case"end":return e.stop()}}),e)})))(),LA));case 1:case"end":return e.stop()}}),e)}))),$A.apply(this,arguments)}function UA(e,t){return GA.apply(this,arguments)}function GA(){return GA=tw(QD().mark((function e(t,n){var r,o,i;return QD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(lE("text",t)){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,zA();case 4:if(r=e.sent,o=r.emojiData,i=r.emojiMart,""!==n.trim()){e.next=11;break}e.t0=Object.values(o.emojis),e.next=14;break;case 11:return e.next=13,i.SearchIndex.search(n);case 13:e.t0=e.sent;case 14:return e.abrupt("return",e.t0.map((function(e){return{id:e.skins[0].native,onItemClick:function(){return t.insertInlineContent(e.skins[0].native+" ")}}})));case 15:case"end":return e.stop()}}),e)}))),GA.apply(this,arguments)}function WA(){return"undefined"!=typeof window}function qA(e){return JA(e)?(e.nodeName||"").toLowerCase():"#document"}function KA(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function ZA(e){var t;return null==(t=(JA(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function JA(e){return!!WA()&&(e instanceof Node||e instanceof KA(e).Node)}function XA(e){return!!WA()&&(e instanceof Element||e instanceof KA(e).Element)}function YA(e){return!!WA()&&(e instanceof HTMLElement||e instanceof KA(e).HTMLElement)}function QA(e){return!(!WA()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof KA(e).ShadowRoot)}function eF(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=aF(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function tF(e){return["table","td","th"].includes(qA(e))}function nF(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(e){return!1}}))}function rF(e){const t=oF(),n=XA(e)?aF(e):e;return["transform","translate","scale","rotate","perspective"].some((e=>!!n[e]&&"none"!==n[e]))||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function oF(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function iF(e){return["html","body","#document"].includes(qA(e))}function aF(e){return KA(e).getComputedStyle(e)}function sF(e){return XA(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function uF(e){if("html"===qA(e))return e;const t=e.assignedSlot||e.parentNode||QA(e)&&e.host||ZA(e);return QA(t)?t.host:t}function lF(e){const t=uF(e);return iF(t)?e.ownerDocument?e.ownerDocument.body:e.body:YA(t)&&eF(t)?t:lF(t)}function cF(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const o=lF(e),i=o===(null==(r=e.ownerDocument)?void 0:r.body),a=KA(o);if(i){const e=dF(a);return t.concat(a,a.visualViewport||[],eF(o)?o:[],e&&n?cF(e):[])}return t.concat(o,cF(o,[],n))}function dF(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function fF(e){let t=e.activeElement;for(;null!=(null==(n=t)||null==(n=n.shadowRoot)?void 0:n.activeElement);){var n;t=t.shadowRoot.activeElement}return t}function pF(e,t){if(!e||!t)return!1;const n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&QA(n)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function hF(){const e=navigator.userAgentData;return null!=e&&e.platform?e.platform:navigator.platform}function mF(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map((e=>{let{brand:t,version:n}=e;return t+"/"+n})).join(" "):navigator.userAgent}function vF(){return/apple/i.test(navigator.vendor)}function gF(){const e=/android/i;return e.test(hF())||e.test(mF())}function yF(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function bF(e){return(null==e?void 0:e.ownerDocument)||document}function DF(e,t){if(null==t)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return null!=n.target&&t.contains(n.target)}function wF(e){return"composedPath"in e?e.composedPath()[0]:e.target}var CF=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"].join(","),kF="undefined"==typeof Element,EF=kF?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,xF=!kF&&Element.prototype.getRootNode?function(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null==e?void 0:e.ownerDocument},AF=function e(t,n){var r;void 0===n&&(n=!0);var o=null==t||null===(r=t.getAttribute)||void 0===r?void 0:r.call(t,"inert");return""===o||"true"===o||n&&t&&e(t.parentNode)},FF=function e(t,n,r){for(var o=[],i=Array.from(t);i.length;){var a=i.shift();if(!AF(a,!1))if("SLOT"===a.tagName){var s=a.assignedElements(),u=e(s.length?s:a.children,!0,r);r.flatten?o.push.apply(o,u):o.push({scopeParent:a,candidates:u})}else{EF.call(a,CF)&&r.filter(a)&&(n||!t.includes(a))&&o.push(a);var l=a.shadowRoot||"function"==typeof r.getShadowRoot&&r.getShadowRoot(a),c=!AF(l,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(l&&c){var d=e(!0===l?a.children:l.children,!0,r);r.flatten?o.push.apply(o,d):o.push({scopeParent:a,candidates:d})}else i.unshift.apply(i,a.children)}}return o},SF=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},MF=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||function(e){var t,n=null==e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===n||"true"===n}(e))&&!SF(e)?0:e.tabIndex},BF=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},OF=function(e){return"INPUT"===e.tagName},TF=function(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return 0===n&&0===r},PF=function(e,t){return!(t.disabled||AF(t)||function(e){return OF(e)&&"hidden"===e.type}(t)||function(e,t){var n=t.displayCheck,r=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var o=EF.call(e,"details>summary:first-of-type")?e.parentElement:e;if(EF.call(o,"details:not([open]) *"))return!0;if(n&&"full"!==n&&"legacy-full"!==n){if("non-zero-area"===n)return TF(e)}else{if("function"==typeof r){for(var i=e;e;){var a=e.parentElement,s=xF(e);if(a&&!a.shadowRoot&&!0===r(a))return TF(e);e=e.assignedSlot?e.assignedSlot:a||s===e.ownerDocument?a:s.host}e=i}if(function(e){var t,n,r,o,i=e&&xF(e),a=null===(t=i)||void 0===t?void 0:t.host,s=!1;if(i&&i!==e)for(s=!!(null!==(n=a)&&void 0!==n&&null!==(r=n.ownerDocument)&&void 0!==r&&r.contains(a)||null!=e&&null!==(o=e.ownerDocument)&&void 0!==o&&o.contains(e));!s&&a;){var u,l,c;s=!(null===(l=a=null===(u=i=xF(a))||void 0===u?void 0:u.host)||void 0===l||null===(c=l.ownerDocument)||void 0===c||!c.contains(a))}return s}(e))return!e.getClientRects().length;if("legacy-full"!==n)return!0}return!1}(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}))}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var r=t.children.item(n);if("LEGEND"===r.tagName)return!!EF.call(t,"fieldset[disabled] *")||!r.contains(e)}return!0}t=t.parentElement}return!1}(t))},NF=function(e,t){return!(function(e){return function(e){return OF(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,n=e.form||xF(e),r=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=r(window.CSS.escape(e.name));else try{t=r(e.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message),!1}var o=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(t,e.form);return!o||o===e}(e)}(t)||MF(t)<0||!PF(e,t))},_F=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},jF=function e(t){var n=[],r=[];return t.forEach((function(t,o){var i=!!t.scopeParent,a=i?t.scopeParent:t,s=function(e,t){var n=MF(e);return n<0&&t&&!SF(e)?0:n}(a,i),u=i?e(t.candidates):a;0===s?i?n.push.apply(n,u):n.push(a):r.push({documentOrder:o,tabIndex:s,item:t,isScope:i,content:u})})),r.sort(BF).reduce((function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e}),[]).concat(n)},IF=function(e,t){var n;return n=(t=t||{}).getShadowRoot?FF([e],t.includeContainer,{filter:NF.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:_F}):function(e,t,n){if(AF(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(CF));return t&&EF.call(e,CF)&&r.unshift(e),r.filter(n)}(e,t.includeContainer,NF.bind(null,t)),jF(n)},RF=a(2326);const LF=Math.min,HF=Math.max,VF=Math.round,zF=Math.floor,$F=e=>({x:e,y:e}),UF={left:"right",right:"left",bottom:"top",top:"bottom"},GF={start:"end",end:"start"};function WF(e,t,n){return HF(e,LF(t,n))}function qF(e,t){return"function"==typeof e?e(t):e}function KF(e){return e.split("-")[0]}function ZF(e){return e.split("-")[1]}function JF(e){return"x"===e?"y":"x"}function XF(e){return"y"===e?"height":"width"}function YF(e){return["top","bottom"].includes(KF(e))?"y":"x"}function QF(e){return JF(YF(e))}function eS(e){return e.replace(/start|end/g,(e=>GF[e]))}function tS(e){return e.replace(/left|right|bottom|top/g,(e=>UF[e]))}function nS(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function rS(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function oS(e,t,n){let{reference:r,floating:o}=e;const i=YF(t),a=QF(t),s=XF(a),u=KF(t),l="y"===i,c=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,f=r[s]/2-o[s]/2;let p;switch(u){case"top":p={x:c,y:r.y-o.height};break;case"bottom":p={x:c,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-o.width,y:d};break;default:p={x:r.x,y:r.y}}switch(ZF(t)){case"start":p[a]-=f*(n&&l?-1:1);break;case"end":p[a]+=f*(n&&l?-1:1)}return p}async function iS(e,t){var n;void 0===t&&(t={});const{x:r,y:o,platform:i,rects:a,elements:s,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=qF(t,e),h=nS(p),m=s[f?"floating"===d?"reference":"floating":d],v=rS(await i.getClippingRect({element:null==(n=await(null==i.isElement?void 0:i.isElement(m)))||n?m:m.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(s.floating)),boundary:l,rootBoundary:c,strategy:u})),g="floating"===d?{x:r,y:o,width:a.floating.width,height:a.floating.height}:a.reference,y=await(null==i.getOffsetParent?void 0:i.getOffsetParent(s.floating)),b=await(null==i.isElement?void 0:i.isElement(y))&&await(null==i.getScale?void 0:i.getScale(y))||{x:1,y:1},D=rS(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:g,offsetParent:y,strategy:u}):g);return{top:(v.top-D.top+h.top)/b.y,bottom:(D.bottom-v.bottom+h.bottom)/b.y,left:(v.left-D.left+h.left)/b.x,right:(D.right-v.right+h.right)/b.x}}function aS(e){const t=LF(...e.map((e=>e.left))),n=LF(...e.map((e=>e.top)));return{x:t,y:n,width:HF(...e.map((e=>e.right)))-t,height:HF(...e.map((e=>e.bottom)))-n}}function sS(e){const t=aF(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=YA(e),i=o?e.offsetWidth:n,a=o?e.offsetHeight:r,s=VF(n)!==i||VF(r)!==a;return s&&(n=i,r=a),{width:n,height:r,$:s}}function uS(e){return XA(e)?e:e.contextElement}function lS(e){const t=uS(e);if(!YA(t))return $F(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:i}=sS(t);let a=(i?VF(n.width):n.width)/r,s=(i?VF(n.height):n.height)/o;return a&&Number.isFinite(a)||(a=1),s&&Number.isFinite(s)||(s=1),{x:a,y:s}}const cS=$F(0);function dS(e){const t=KA(e);return oF()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:cS}function fS(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const o=e.getBoundingClientRect(),i=uS(e);let a=$F(1);t&&(r?XA(r)&&(a=lS(r)):a=lS(e));const s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==KA(e))&&t}(i,n,r)?dS(i):$F(0);let u=(o.left+s.x)/a.x,l=(o.top+s.y)/a.y,c=o.width/a.x,d=o.height/a.y;if(i){const e=KA(i),t=r&&XA(r)?KA(r):r;let n=e,o=dF(n);for(;o&&r&&t!==n;){const e=lS(o),t=o.getBoundingClientRect(),r=aF(o),i=t.left+(o.clientLeft+parseFloat(r.paddingLeft))*e.x,a=t.top+(o.clientTop+parseFloat(r.paddingTop))*e.y;u*=e.x,l*=e.y,c*=e.x,d*=e.y,u+=i,l+=a,n=KA(o),o=dF(n)}}return rS({width:c,height:d,x:u,y:l})}function pS(e,t){const n=sF(e).scrollLeft;return t?t.left+n:fS(ZA(e)).left+n}function hS(e,t,n){void 0===n&&(n=!1);const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:pS(e,r)),y:r.top+t.scrollTop}}function mS(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=KA(e),r=ZA(e),o=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,s=0,u=0;if(o){i=o.width,a=o.height;const e=oF();(!e||e&&"fixed"===t)&&(s=o.offsetLeft,u=o.offsetTop)}return{width:i,height:a,x:s,y:u}}(e,n);else if("document"===t)r=function(e){const t=ZA(e),n=sF(e),r=e.ownerDocument.body,o=HF(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=HF(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+pS(e);const s=-n.scrollTop;return"rtl"===aF(r).direction&&(a+=HF(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:a,y:s}}(ZA(e));else if(XA(t))r=function(e,t){const n=fS(e,!0,"fixed"===t),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=YA(e)?lS(e):$F(1);return{width:e.clientWidth*i.x,height:e.clientHeight*i.y,x:o*i.x,y:r*i.y}}(t,n);else{const n=dS(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return rS(r)}function vS(e,t){const n=uF(e);return!(n===t||!XA(n)||iF(n))&&("fixed"===aF(n).position||vS(n,t))}function gS(e,t,n){const r=YA(t),o=ZA(t),i="fixed"===n,a=fS(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const u=$F(0);function l(){u.x=pS(o)}if(r||!r&&!i)if(("body"!==qA(t)||eF(o))&&(s=sF(t)),r){const e=fS(t,!0,i,t);u.x=e.x+t.clientLeft,u.y=e.y+t.clientTop}else o&&l();i&&!r&&o&&l();const c=!o||r||i?$F(0):hS(o,s);return{x:a.left+s.scrollLeft-u.x-c.x,y:a.top+s.scrollTop-u.y-c.y,width:a.width,height:a.height}}function yS(e){return"static"===aF(e).position}function bS(e,t){if(!YA(e)||"fixed"===aF(e).position)return null;if(t)return t(e);let n=e.offsetParent;return ZA(e)===n&&(n=n.ownerDocument.body),n}function DS(e,t){const n=KA(e);if(nF(e))return n;if(!YA(e)){let t=uF(e);for(;t&&!iF(t);){if(XA(t)&&!yS(t))return t;t=uF(t)}return n}let r=bS(e,t);for(;r&&tF(r)&&yS(r);)r=bS(r,t);return r&&iF(r)&&yS(r)&&!rF(r)?n:r||function(e){let t=uF(e);for(;YA(t)&&!iF(t);){if(rF(t))return t;if(nF(t))return null;t=uF(t)}return null}(e)||n}const wS={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const i="fixed"===o,a=ZA(r),s=!!t&&nF(t.floating);if(r===a||s&&i)return n;let u={scrollLeft:0,scrollTop:0},l=$F(1);const c=$F(0),d=YA(r);if((d||!d&&!i)&&(("body"!==qA(r)||eF(a))&&(u=sF(r)),YA(r))){const e=fS(r);l=lS(r),c.x=e.x+r.clientLeft,c.y=e.y+r.clientTop}const f=!a||d||i?$F(0):hS(a,u,!0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x+f.x,y:n.y*l.y-u.scrollTop*l.y+c.y+f.y}},getDocumentElement:ZA,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i="clippingAncestors"===n?nF(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=cF(e,[],!1).filter((e=>XA(e)&&"body"!==qA(e))),o=null;const i="fixed"===aF(e).position;let a=i?uF(e):e;for(;XA(a)&&!iF(a);){const t=aF(a),n=rF(a);n||"fixed"!==t.position||(o=null),(i?!n&&!o:!n&&"static"===t.position&&o&&["absolute","fixed"].includes(o.position)||eF(a)&&!n&&vS(e,a))?r=r.filter((e=>e!==a)):o=t,a=uF(a)}return t.set(e,r),r}(t,this._c):[].concat(n),a=[...i,r],s=a[0],u=a.reduce(((e,n)=>{const r=mS(t,n,o);return e.top=HF(r.top,e.top),e.right=LF(r.right,e.right),e.bottom=LF(r.bottom,e.bottom),e.left=HF(r.left,e.left),e}),mS(t,s,o));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}},getOffsetParent:DS,getElementRects:async function(e){const t=this.getOffsetParent||DS,n=this.getDimensions,r=await n(e.floating);return{reference:gS(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=sS(e);return{width:t,height:n}},getScale:lS,isElement:XA,isRTL:function(e){return"rtl"===aF(e).direction}};function CS(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}const kS=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:i,placement:a,middlewareData:s}=t,u=await async function(e,t){const{placement:n,platform:r,elements:o}=e,i=await(null==r.isRTL?void 0:r.isRTL(o.floating)),a=KF(n),s=ZF(n),u="y"===YF(n),l=["left","top"].includes(a)?-1:1,c=i&&u?-1:1,d=qF(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:h}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&"number"==typeof h&&(p="end"===s?-1*h:h),u?{x:p*c,y:f*l}:{x:f*l,y:p*c}}(t,e);return a===(null==(n=s.offset)?void 0:n.placement)&&null!=(r=s.arrow)&&r.alignmentOffset?{}:{x:o+u.x,y:i+u.y,data:{...u,placement:a}}}}},ES=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:s={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...u}=qF(e,t),l={x:n,y:r},c=await iS(t,u),d=YF(KF(o)),f=JF(d);let p=l[f],h=l[d];if(i){const e="y"===f?"bottom":"right";p=WF(p+c["y"===f?"top":"left"],p,p-c[e])}if(a){const e="y"===d?"bottom":"right";h=WF(h+c["y"===d?"top":"left"],h,h-c[e])}const m=s.fn({...t,[f]:p,[d]:h});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:i,[d]:a}}}}}},xS=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:i,rects:a,initialPlacement:s,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:m=!0,...v}=qF(e,t);if(null!=(n=i.arrow)&&n.alignmentOffset)return{};const g=KF(o),y=YF(s),b=KF(s)===s,D=await(null==u.isRTL?void 0:u.isRTL(l.floating)),w=f||(b||!m?[tS(s)]:function(e){const t=tS(e);return[eS(e),t,eS(t)]}(s)),C="none"!==h;!f&&C&&w.push(...function(e,t,n,r){const o=ZF(e);let i=function(e,t,n){const r=["left","right"],o=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?i:a;default:return[]}}(KF(e),"start"===n,r);return o&&(i=i.map((e=>e+"-"+o)),t&&(i=i.concat(i.map(eS)))),i}(s,m,h,D));const k=[s,...w],E=await iS(t,v),x=[];let A=(null==(r=i.flip)?void 0:r.overflows)||[];if(c&&x.push(E[g]),d){const e=function(e,t,n){void 0===n&&(n=!1);const r=ZF(e),o=QF(e),i=XF(o);let a="x"===o?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=tS(a)),[a,tS(a)]}(o,a,D);x.push(E[e[0]],E[e[1]])}if(A=[...A,{placement:o,overflows:x}],!x.every((e=>e<=0))){var F,S;const e=((null==(F=i.flip)?void 0:F.index)||0)+1,t=k[e];if(t&&("alignment"!==d||y===YF(t)||A.every((e=>e.overflows[0]>0&&YF(e.placement)===y))))return{data:{index:e,overflows:A},reset:{placement:t}};let n=null==(S=A.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:S.placement;if(!n)switch(p){case"bestFit":{var M;const e=null==(M=A.filter((e=>{if(C){const t=YF(e.placement);return t===y||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:M[0];e&&(n=e);break}case"initialPlacement":n=s}if(o!==n)return{reset:{placement:n}}}return{}}}},AS=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:i,platform:a,elements:s}=t,{apply:u=()=>{},...l}=qF(e,t),c=await iS(t,l),d=KF(o),f=ZF(o),p="y"===YF(o),{width:h,height:m}=i.floating;let v,g;"top"===d||"bottom"===d?(v=d,g=f===(await(null==a.isRTL?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(g=d,v="end"===f?"top":"bottom");const y=m-c.top-c.bottom,b=h-c.left-c.right,D=LF(m-c[v],y),w=LF(h-c[g],b),C=!t.middlewareData.shift;let k=D,E=w;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(E=b),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(k=y),C&&!f){const e=HF(c.left,0),t=HF(c.right,0),n=HF(c.top,0),r=HF(c.bottom,0);p?E=h-2*(0!==e||0!==t?e+t:HF(c.left,c.right)):k=m-2*(0!==n||0!==r?n+r:HF(c.top,c.bottom))}await u({...t,availableWidth:E,availableHeight:k});const x=await a.getDimensions(s.floating);return h!==x.width||m!==x.height?{reset:{rects:!0}}:{}}}},FS=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:i,platform:a,elements:s,middlewareData:u}=t,{element:l,padding:c=0}=qF(e,t)||{};if(null==l)return{};const d=nS(c),f={x:n,y:r},p=QF(o),h=XF(p),m=await a.getDimensions(l),v="y"===p,g=v?"top":"left",y=v?"bottom":"right",b=v?"clientHeight":"clientWidth",D=i.reference[h]+i.reference[p]-f[p]-i.floating[h],w=f[p]-i.reference[p],C=await(null==a.getOffsetParent?void 0:a.getOffsetParent(l));let k=C?C[b]:0;k&&await(null==a.isElement?void 0:a.isElement(C))||(k=s.floating[b]||i.floating[h]);const E=D/2-w/2,x=k/2-m[h]/2-1,A=LF(d[g],x),F=LF(d[y],x),S=A,M=k-m[h]-F,B=k/2-m[h]/2+E,O=WF(S,B,M),T=!u.arrow&&null!=ZF(o)&&B!==O&&i.reference[h]/2-(B<S?A:F)-m[h]/2<0,P=T?B<S?B-S:B-M:0;return{[p]:f[p]+P,data:{[p]:O,centerOffset:B-O-P,...T&&{alignmentOffset:P}},reset:T}}}),SS=function(e){return void 0===e&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:o,platform:i,strategy:a}=t,{padding:s=2,x:u,y:l}=qF(e,t),c=Array.from(await(null==i.getClientRects?void 0:i.getClientRects(r.reference))||[]),d=function(e){const t=e.slice().sort(((e,t)=>e.y-t.y)),n=[];let r=null;for(let e=0;e<t.length;e++){const o=t[e];!r||o.y-r.y>r.height/2?n.push([o]):n[n.length-1].push(o),r=o}return n.map((e=>rS(aS(e))))}(c),f=rS(aS(c)),p=nS(s),h=await i.getElementRects({reference:{getBoundingClientRect:function(){if(2===d.length&&d[0].left>d[1].right&&null!=u&&null!=l)return d.find((e=>u>e.left-p.left&&u<e.right+p.right&&l>e.top-p.top&&l<e.bottom+p.bottom))||f;if(d.length>=2){if("y"===YF(n)){const e=d[0],t=d[d.length-1],r="top"===KF(n),o=e.top,i=t.bottom,a=r?e.left:t.left,s=r?e.right:t.right;return{top:o,bottom:i,left:a,right:s,width:s-a,height:i-o,x:a,y:o}}const e="left"===KF(n),t=HF(...d.map((e=>e.right))),r=LF(...d.map((e=>e.left))),o=d.filter((n=>e?n.left===r:n.right===t)),i=o[0].top,a=o[o.length-1].bottom;return{top:i,bottom:a,left:r,right:t,width:t-r,height:a-i,x:r,y:i}}return f}},floating:r.floating,strategy:a});return o.reference.x!==h.reference.x||o.reference.y!==h.reference.y||o.reference.width!==h.reference.width||o.reference.height!==h.reference.height?{reset:{rects:h}}:{}}}},MS=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:i,middlewareData:a}=t,{offset:s=0,mainAxis:u=!0,crossAxis:l=!0}=qF(e,t),c={x:n,y:r},d=YF(o),f=JF(d);let p=c[f],h=c[d];const m=qF(s,t),v="number"==typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const e="y"===f?"height":"width",t=i.reference[f]-i.floating[e]+v.mainAxis,n=i.reference[f]+i.reference[e]-v.mainAxis;p<t?p=t:p>n&&(p=n)}if(l){var g,y;const e="y"===f?"width":"height",t=["top","left"].includes(KF(o)),n=i.reference[d]-i.floating[e]+(t&&(null==(g=a.offset)?void 0:g[d])||0)+(t?0:v.crossAxis),r=i.reference[d]+i.reference[e]+(t?0:(null==(y=a.offset)?void 0:y[d])||0)-(t?v.crossAxis:0);h<n?h=n:h>r&&(h=r)}return{[f]:p,[d]:h}}}},BS=(e,t,n)=>{const r=new Map,o={platform:wS,...n},i={...o.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:a}=n,s=i.filter(Boolean),u=await(null==a.isRTL?void 0:a.isRTL(t));let l=await a.getElementRects({reference:e,floating:t,strategy:o}),{x:c,y:d}=oS(l,r,u),f=r,p={},h=0;for(let n=0;n<s.length;n++){const{name:i,fn:m}=s[n],{x:v,y:g,data:y,reset:b}=await m({x:c,y:d,initialPlacement:r,placement:f,strategy:o,middlewareData:p,rects:l,platform:a,elements:{reference:e,floating:t}});c=null!=v?v:c,d=null!=g?g:d,p={...p,[i]:{...p[i],...y}},b&&h<=50&&(h++,"object"==typeof b&&(b.placement&&(f=b.placement),b.rects&&(l=!0===b.rects?await a.getElementRects({reference:e,floating:t,strategy:o}):b.rects),({x:c,y:d}=oS(l,f,u))),n=-1)}return{x:c,y:d,placement:f,strategy:o,middlewareData:p}})(e,t,{...o,platform:i})};var OS="undefined"!=typeof document?d.useLayoutEffect:function(){};function TS(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!=r--;)if(!TS(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;0!=r--;){const n=o[r];if(!("_owner"===n&&e.$$typeof||TS(e[n],t[n])))return!1}return!0}return e!=e&&t!=t}function PS(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function NS(e,t){const n=PS(e);return Math.round(t*n)/n}function _S(e){const t=d.useRef(e);return OS((()=>{t.current=e})),t}const jS=e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"==typeof e?e(t):e;return n&&(o=n,{}.hasOwnProperty.call(o,"current"))?null!=n.current?FS({element:n.current,padding:r}).fn(t):{}:n?FS({element:n,padding:r}).fn(t):{};var o}}),IS=(e,t)=>({...kS(e),options:[e,t]}),RS=(e,t)=>({...ES(e),options:[e,t]}),LS=(e,t)=>({...MS(e),options:[e,t]}),HS=(e,t)=>({...xS(e),options:[e,t]}),VS=(e,t)=>({...AS(e),options:[e,t]}),zS=(e,t)=>({...SS(e),options:[e,t]}),$S=(e,t)=>({...jS(e),options:[e,t]}),US={...f},GS=US.useInsertionEffect||(e=>e());function WS(e){const t=d.useRef((()=>{}));return GS((()=>{t.current=e})),d.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}var qS="undefined"!=typeof document?d.useLayoutEffect:d.useEffect;function KS(){return KS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KS.apply(this,arguments)}let ZS=!1,JS=0;const XS=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+JS++,YS=US.useId||function(){const[e,t]=d.useState((()=>ZS?XS():void 0));return qS((()=>{null==e&&t(XS())}),[]),d.useEffect((()=>{ZS=!0}),[]),e};const QS=d.createContext(null),eM=d.createContext(null),tM=()=>{var e;return(null==(e=d.useContext(QS))?void 0:e.id)||null},nM=()=>d.useContext(eM);function rM(e){return"data-floating-ui-"+e}function oM(e){const t=(0,d.useRef)(e);return qS((()=>{t.current=e})),t}const iM=rM("safe-polygon");function aM(e,t,n){return n&&!yF(n)?0:"number"==typeof e?e:null==e?void 0:e[t]}function sM(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,dataRef:o,events:i,elements:a}=e,{enabled:s=!0,delay:u=0,handleClose:l=null,mouseOnly:c=!1,restMs:f=0,move:p=!0}=t,h=nM(),m=tM(),v=oM(l),g=oM(u),y=oM(n),b=d.useRef(),D=d.useRef(-1),w=d.useRef(),C=d.useRef(-1),k=d.useRef(!0),E=d.useRef(!1),x=d.useRef((()=>{})),A=d.useRef(!1),F=d.useCallback((()=>{var e;const t=null==(e=o.current.openEvent)?void 0:e.type;return(null==t?void 0:t.includes("mouse"))&&"mousedown"!==t}),[o]);d.useEffect((()=>{if(s)return i.on("openchange",e),()=>{i.off("openchange",e)};function e(e){let{open:t}=e;t||(clearTimeout(D.current),clearTimeout(C.current),k.current=!0,A.current=!1)}}),[s,i]),d.useEffect((()=>{if(!s)return;if(!v.current)return;if(!n)return;function e(e){F()&&r(!1,e,"hover")}const t=bF(a.floating).documentElement;return t.addEventListener("mouseleave",e),()=>{t.removeEventListener("mouseleave",e)}}),[a.floating,n,r,s,v,F]);const S=d.useCallback((function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="hover");const o=aM(g.current,"close",b.current);o&&!w.current?(clearTimeout(D.current),D.current=window.setTimeout((()=>r(!1,e,n)),o)):t&&(clearTimeout(D.current),r(!1,e,n))}),[g,r]),M=WS((()=>{x.current(),w.current=void 0})),B=WS((()=>{if(E.current){const e=bF(a.floating).body;e.style.pointerEvents="",e.removeAttribute(iM),E.current=!1}})),O=WS((()=>!!o.current.openEvent&&["click","mousedown"].includes(o.current.openEvent.type)));d.useEffect((()=>{if(s&&XA(a.domReference)){var e;const r=a.domReference;return n&&r.addEventListener("mouseleave",u),null==(e=a.floating)||e.addEventListener("mouseleave",u),p&&r.addEventListener("mousemove",t,{once:!0}),r.addEventListener("mouseenter",t),r.addEventListener("mouseleave",i),()=>{var e;n&&r.removeEventListener("mouseleave",u),null==(e=a.floating)||e.removeEventListener("mouseleave",u),p&&r.removeEventListener("mousemove",t),r.removeEventListener("mouseenter",t),r.removeEventListener("mouseleave",i)}}function t(e){if(clearTimeout(D.current),k.current=!1,c&&!yF(b.current)||f>0&&!aM(g.current,"open"))return;const t=aM(g.current,"open",b.current);t?D.current=window.setTimeout((()=>{y.current||r(!0,e,"hover")}),t):n||r(!0,e,"hover")}function i(e){if(O())return;x.current();const t=bF(a.floating);if(clearTimeout(C.current),A.current=!1,v.current&&o.current.floatingContext){n||clearTimeout(D.current),w.current=v.current({...o.current.floatingContext,tree:h,x:e.clientX,y:e.clientY,onClose(){B(),M(),O()||S(e,!0,"safe-polygon")}});const r=w.current;return t.addEventListener("mousemove",r),void(x.current=()=>{t.removeEventListener("mousemove",r)})}("touch"!==b.current||!pF(a.floating,e.relatedTarget))&&S(e)}function u(e){O()||o.current.floatingContext&&(null==v.current||v.current({...o.current.floatingContext,tree:h,x:e.clientX,y:e.clientY,onClose(){B(),M(),O()||S(e)}})(e))}}),[a,s,e,c,f,p,S,M,B,r,n,y,h,g,v,o,O]),qS((()=>{var e;if(s&&n&&null!=(e=v.current)&&e.__options.blockPointerEvents&&F()){E.current=!0;const e=a.floating;if(XA(a.domReference)&&e){var t;const n=bF(a.floating).body;n.setAttribute(iM,"");const r=a.domReference,o=null==h||null==(t=h.nodesRef.current.find((e=>e.id===m)))||null==(t=t.context)?void 0:t.elements.floating;return o&&(o.style.pointerEvents=""),n.style.pointerEvents="none",r.style.pointerEvents="auto",e.style.pointerEvents="auto",()=>{n.style.pointerEvents="",r.style.pointerEvents="",e.style.pointerEvents=""}}}}),[s,n,m,a,h,v,F]),qS((()=>{n||(b.current=void 0,A.current=!1,M(),B())}),[n,M,B]),d.useEffect((()=>()=>{M(),clearTimeout(D.current),clearTimeout(C.current),B()}),[s,a.domReference,M,B]);const T=d.useMemo((()=>{function e(e){b.current=e.pointerType}return{onPointerDown:e,onPointerEnter:e,onMouseMove(e){const{nativeEvent:t}=e;function o(){k.current||y.current||r(!0,t,"hover")}c&&!yF(b.current)||n||0===f||A.current&&e.movementX**2+e.movementY**2<2||(clearTimeout(C.current),"touch"===b.current?o():(A.current=!0,C.current=window.setTimeout(o,f)))}}}),[c,r,n,y,f]),P=d.useMemo((()=>({onMouseEnter(){clearTimeout(D.current)},onMouseLeave(e){O()||S(e.nativeEvent,!1)}})),[S,O]);return d.useMemo((()=>s?{reference:T,floating:P}:{}),[s,T,P])}const uM=()=>{},lM=d.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:uM,setState:uM,isInstantPhase:!1});function cM(e){const{children:t,delay:n,timeoutMs:r=0}=e,[o,i]=d.useReducer(((e,t)=>({...e,...t})),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),a=d.useRef(null),s=d.useCallback((e=>{i({currentId:e})}),[]);return qS((()=>{o.currentId?null===a.current?a.current=o.currentId:o.isInstantPhase||i({isInstantPhase:!0}):(o.isInstantPhase&&i({isInstantPhase:!1}),a.current=null)}),[o.currentId,o.isInstantPhase]),d.createElement(lM.Provider,{value:d.useMemo((()=>({...o,setState:i,setCurrentId:s})),[o,s])},t)}function dM(e,t){let n=e.filter((e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)})),r=n;for(;r.length;)r=e.filter((e=>{var t;return null==(t=r)?void 0:t.some((t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)}))})),n=n.concat(r);return n}const fM=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function pM(e,t){const n=IF(e,fM());"prev"===t&&n.reverse();const r=n.indexOf(fF(bF(e)));return n.slice(r+1)[0]}function hM(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!pF(n,r)}function mM(e){IF(e,fM()).forEach((e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")}))}function vM(e){e.querySelectorAll("[data-tabindex]").forEach((e=>{const t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}))}const gM={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};function yM(e){"Tab"===e.key&&(e.target,clearTimeout(void 0))}const bM=d.forwardRef((function(e,t){const[n,r]=d.useState();qS((()=>(vF()&&r("button"),document.addEventListener("keydown",yM),()=>{document.removeEventListener("keydown",yM)})),[]);const o={ref:t,tabIndex:0,role:n,"aria-hidden":!n||void 0,[rM("focus-guard")]:"",style:gM};return d.createElement("span",KS({},e,o))})),DM=d.createContext(null),wM=rM("portal");function CM(e){const{children:t,id:n,root:r,preserveTabOrder:o=!0}=e,i=function(e){void 0===e&&(e={});const{id:t,root:n}=e,r=YS(),o=kM(),[i,a]=d.useState(null),s=d.useRef(null);return qS((()=>()=>{null==i||i.remove(),queueMicrotask((()=>{s.current=null}))}),[i]),qS((()=>{if(!r)return;if(s.current)return;const e=t?document.getElementById(t):null;if(!e)return;const n=document.createElement("div");n.id=r,n.setAttribute(wM,""),e.appendChild(n),s.current=n,a(n)}),[t,r]),qS((()=>{if(null===n)return;if(!r)return;if(s.current)return;let e=n||(null==o?void 0:o.portalNode);e&&!XA(e)&&(e=e.current),e=e||document.body;let i=null;t&&(i=document.createElement("div"),i.id=t,e.appendChild(i));const u=document.createElement("div");u.id=r,u.setAttribute(wM,""),e=i||e,e.appendChild(u),s.current=u,a(u)}),[t,n,r,o]),i}({id:n,root:r}),[a,s]=d.useState(null),u=d.useRef(null),l=d.useRef(null),c=d.useRef(null),f=d.useRef(null),p=null==a?void 0:a.modal,h=null==a?void 0:a.open,m=!!a&&!a.modal&&a.open&&o&&!(!r&&!i);return d.useEffect((()=>{if(i&&o&&!p)return i.addEventListener("focusin",e,!0),i.addEventListener("focusout",e,!0),()=>{i.removeEventListener("focusin",e,!0),i.removeEventListener("focusout",e,!0)};function e(e){i&&hM(e)&&("focusin"===e.type?vM:mM)(i)}}),[i,o,p]),d.useEffect((()=>{i&&(h||vM(i))}),[h,i]),d.createElement(DM.Provider,{value:d.useMemo((()=>({preserveTabOrder:o,beforeOutsideRef:u,afterOutsideRef:l,beforeInsideRef:c,afterInsideRef:f,portalNode:i,setFocusManagerState:s})),[o,i])},m&&i&&d.createElement(bM,{"data-type":"outside",ref:u,onFocus:e=>{if(hM(e,i)){var t;null==(t=c.current)||t.focus()}else{const e=pM(document.body,"prev")||(null==a?void 0:a.refs.domReference.current);null==e||e.focus()}}}),m&&i&&d.createElement("span",{"aria-owns":i.id,style:gM}),i&&RF.createPortal(t,i),m&&i&&d.createElement(bM,{"data-type":"outside",ref:l,onFocus:e=>{if(hM(e,i)){var t;null==(t=f.current)||t.focus()}else{const t=pM(document.body,"next")||(null==a?void 0:a.refs.domReference.current);null==t||t.focus(),(null==a?void 0:a.closeOnFocusOut)&&(null==a||a.onOpenChange(!1,e.nativeEvent,"focus-out"))}}}))}const kM=()=>d.useContext(DM),EM="data-floating-ui-focusable",xM={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},AM={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},FM=e=>{var t,n;return{escapeKey:"boolean"==typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"==typeof e?e:null==(n=null==e?void 0:e.outsidePress)||n}};function SM(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,elements:o,dataRef:i}=e,{enabled:a=!0,escapeKey:s=!0,outsidePress:u=!0,outsidePressEvent:l="pointerdown",referencePress:c=!1,referencePressEvent:f="pointerdown",ancestorScroll:p=!1,bubbles:h,capture:m}=t,v=nM(),g=WS("function"==typeof u?u:()=>!1),y="function"==typeof u?g:u,b=d.useRef(!1),D=d.useRef(!1),{escapeKey:w,outsidePress:C}=FM(h),{escapeKey:k,outsidePress:E}=FM(m),x=d.useRef(!1),A=WS((e=>{var t;if(!n||!a||!s||"Escape"!==e.key)return;if(x.current)return;const o=null==(t=i.current.floatingContext)?void 0:t.nodeId,u=v?dM(v.nodesRef.current,o):[];if(!w&&(e.stopPropagation(),u.length>0)){let e=!0;if(u.forEach((t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__escapeKeyBubbles||(e=!1)})),!e)return}r(!1,function(e){return"nativeEvent"in e}(e)?e.nativeEvent:e,"escape-key")})),F=WS((e=>{var t;const n=()=>{var t;A(e),null==(t=wF(e))||t.removeEventListener("keydown",n)};null==(t=wF(e))||t.addEventListener("keydown",n)})),S=WS((e=>{var t;const n=b.current;b.current=!1;const a=D.current;if(D.current=!1,"click"===l&&a)return;if(n)return;if("function"==typeof y&&!y(e))return;const s=wF(e),u="["+rM("inert")+"]",c=bF(o.floating).querySelectorAll(u);let d=XA(s)?s:null;for(;d&&!iF(d);){const e=uF(d);if(iF(e)||!XA(e))break;d=e}if(c.length&&XA(s)&&!s.matches("html,body")&&!pF(s,o.floating)&&Array.from(c).every((e=>!pF(d,e))))return;if(YA(s)&&O){const t=s.clientWidth>0&&s.scrollWidth>s.clientWidth,n=s.clientHeight>0&&s.scrollHeight>s.clientHeight;let r=n&&e.offsetX>s.clientWidth;if(n&&"rtl"===aF(s).direction&&(r=e.offsetX<=s.offsetWidth-s.clientWidth),r||t&&e.offsetY>s.clientHeight)return}const f=null==(t=i.current.floatingContext)?void 0:t.nodeId,p=v&&dM(v.nodesRef.current,f).some((t=>{var n;return DF(e,null==(n=t.context)?void 0:n.elements.floating)}));if(DF(e,o.floating)||DF(e,o.domReference)||p)return;const h=v?dM(v.nodesRef.current,f):[];if(h.length>0){let e=!0;if(h.forEach((t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__outsidePressBubbles||(e=!1)})),!e)return}r(!1,e,"outside-press")})),M=WS((e=>{var t;const n=()=>{var t;S(e),null==(t=wF(e))||t.removeEventListener(l,n)};null==(t=wF(e))||t.addEventListener(l,n)}));d.useEffect((()=>{if(!n||!a)return;i.current.__escapeKeyBubbles=w,i.current.__outsidePressBubbles=C;let e=-1;function t(e){r(!1,e,"ancestor-scroll")}function u(){window.clearTimeout(e),x.current=!0}function c(){e=window.setTimeout((()=>{x.current=!1}),oF()?5:0)}const d=bF(o.floating);s&&(d.addEventListener("keydown",k?F:A,k),d.addEventListener("compositionstart",u),d.addEventListener("compositionend",c)),y&&d.addEventListener(l,E?M:S,E);let f=[];return p&&(XA(o.domReference)&&(f=cF(o.domReference)),XA(o.floating)&&(f=f.concat(cF(o.floating))),!XA(o.reference)&&o.reference&&o.reference.contextElement&&(f=f.concat(cF(o.reference.contextElement)))),f=f.filter((e=>{var t;return e!==(null==(t=d.defaultView)?void 0:t.visualViewport)})),f.forEach((e=>{e.addEventListener("scroll",t,{passive:!0})})),()=>{s&&(d.removeEventListener("keydown",k?F:A,k),d.removeEventListener("compositionstart",u),d.removeEventListener("compositionend",c)),y&&d.removeEventListener(l,E?M:S,E),f.forEach((e=>{e.removeEventListener("scroll",t)})),window.clearTimeout(e)}}),[i,o,s,y,l,n,r,p,a,w,C,A,k,F,S,E,M]),d.useEffect((()=>{b.current=!1}),[y,l]);const B=d.useMemo((()=>({onKeyDown:A,[xM[f]]:e=>{c&&r(!1,e.nativeEvent,"reference-press")}})),[A,r,c,f]),O=d.useMemo((()=>({onKeyDown:A,onMouseDown(){D.current=!0},onMouseUp(){D.current=!0},[AM[l]]:()=>{b.current=!0}})),[A,l]);return d.useMemo((()=>a?{reference:B,floating:O}:{}),[a,B,O])}function MM(e){void 0===e&&(e={});const{nodeId:t}=e,n=function(e){const{open:t=!1,onOpenChange:n,elements:r}=e,o=YS(),i=d.useRef({}),[a]=d.useState((()=>function(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach((e=>e(n)))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter((e=>e!==n)))||[])}}}())),s=null!=tM(),[u,l]=d.useState(r.reference),c=WS(((e,t,r)=>{i.current.openEvent=e?t:void 0,a.emit("openchange",{open:e,event:t,reason:r,nested:s}),null==n||n(e,t,r)})),f=d.useMemo((()=>({setPositionReference:l})),[]),p=d.useMemo((()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference})),[u,r.reference,r.floating]);return d.useMemo((()=>({dataRef:i,open:t,onOpenChange:c,elements:p,events:a,floatingId:o,refs:f})),[t,c,p,a,o,f])}({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,o=r.elements,[i,a]=d.useState(null),[s,u]=d.useState(null),l=(null==o?void 0:o.domReference)||i,c=d.useRef(null),f=nM();qS((()=>{l&&(c.current=l)}),[l]);const p=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:i,floating:a}={},transform:s=!0,whileElementsMounted:u,open:l}=e,[c,f]=d.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,h]=d.useState(r);TS(p,r)||h(r);const[m,v]=d.useState(null),[g,y]=d.useState(null),b=d.useCallback((e=>{e!==k.current&&(k.current=e,v(e))}),[]),D=d.useCallback((e=>{e!==E.current&&(E.current=e,y(e))}),[]),w=i||m,C=a||g,k=d.useRef(null),E=d.useRef(null),x=d.useRef(c),A=null!=u,F=_S(u),S=_S(o),M=_S(l),B=d.useCallback((()=>{if(!k.current||!E.current)return;const e={placement:t,strategy:n,middleware:p};S.current&&(e.platform=S.current),BS(k.current,E.current,e).then((e=>{const t={...e,isPositioned:!1!==M.current};O.current&&!TS(x.current,t)&&(x.current=t,RF.flushSync((()=>{f(t)})))}))}),[p,t,n,S,M]);OS((()=>{!1===l&&x.current.isPositioned&&(x.current.isPositioned=!1,f((e=>({...e,isPositioned:!1}))))}),[l]);const O=d.useRef(!1);OS((()=>(O.current=!0,()=>{O.current=!1})),[]),OS((()=>{if(w&&(k.current=w),C&&(E.current=C),w&&C){if(F.current)return F.current(w,C,B);B()}}),[w,C,B,F,A]);const T=d.useMemo((()=>({reference:k,floating:E,setReference:b,setFloating:D})),[b,D]),P=d.useMemo((()=>({reference:w,floating:C})),[w,C]),N=d.useMemo((()=>{const e={position:n,left:0,top:0};if(!P.floating)return e;const t=NS(P.floating,c.x),r=NS(P.floating,c.y);return s?{...e,transform:"translate("+t+"px, "+r+"px)",...PS(P.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}}),[n,s,P.floating,c.x,c.y]);return d.useMemo((()=>({...c,update:B,refs:T,elements:P,floatingStyles:N})),[c,B,T,P,N])}({...e,elements:{...o,...s&&{reference:s}}}),h=d.useCallback((e=>{const t=XA(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;u(t),p.refs.setReference(t)}),[p.refs]),m=d.useCallback((e=>{(XA(e)||null===e)&&(c.current=e,a(e)),(XA(p.refs.reference.current)||null===p.refs.reference.current||null!==e&&!XA(e))&&p.refs.setReference(e)}),[p.refs]),v=d.useMemo((()=>({...p.refs,setReference:m,setPositionReference:h,domReference:c})),[p.refs,m,h]),g=d.useMemo((()=>({...p.elements,domReference:l})),[p.elements,l]),y=d.useMemo((()=>({...p,...r,refs:v,elements:g,nodeId:t})),[p,v,g,t,r]);return qS((()=>{r.dataRef.current.floatingContext=y;const e=null==f?void 0:f.nodesRef.current.find((e=>e.id===t));e&&(e.context=y)})),d.useMemo((()=>({...p,context:y,refs:v,elements:g})),[p,v,g,y])}function BM(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,events:o,dataRef:i,elements:a}=e,{enabled:s=!0,visibleOnly:u=!0}=t,l=d.useRef(!1),c=d.useRef(),f=d.useRef(!0);d.useEffect((()=>{if(!s)return;const e=KA(a.domReference);function t(){!n&&YA(a.domReference)&&a.domReference===fF(bF(a.domReference))&&(l.current=!0)}function r(){f.current=!0}return e.addEventListener("blur",t),e.addEventListener("keydown",r,!0),()=>{e.removeEventListener("blur",t),e.removeEventListener("keydown",r,!0)}}),[a.domReference,n,s]),d.useEffect((()=>{if(s)return o.on("openchange",e),()=>{o.off("openchange",e)};function e(e){let{reason:t}=e;"reference-press"!==t&&"escape-key"!==t||(l.current=!0)}}),[o,s]),d.useEffect((()=>()=>{clearTimeout(c.current)}),[]);const p=d.useMemo((()=>({onPointerDown(e){(function(e){return!mF().includes("jsdom/")&&(!gF()&&0===e.width&&0===e.height||gF()&&1===e.width&&1===e.height&&0===e.pressure&&0===e.detail&&"mouse"===e.pointerType||e.width<1&&e.height<1&&0===e.pressure&&0===e.detail&&"touch"===e.pointerType)})(e.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(e){if(l.current)return;const t=wF(e.nativeEvent);if(u&&XA(t))try{if(vF()&&hF().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints)throw Error();if(!t.matches(":focus-visible"))return}catch(e){if(!f.current&&(!YA(n=t)||!n.matches("input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])")))return}var n;r(!0,e.nativeEvent,"focus")},onBlur(e){l.current=!1;const t=e.relatedTarget,n=e.nativeEvent,o=XA(t)&&t.hasAttribute(rM("focus-guard"))&&"outside"===t.getAttribute("data-type");c.current=window.setTimeout((()=>{var e;const s=fF(a.domReference?a.domReference.ownerDocument:document);(t||s!==a.domReference)&&(pF(null==(e=i.current.floatingContext)?void 0:e.refs.floating.current,s)||pF(a.domReference,s)||o||r(!1,n,"focus"))}))}})),[i,a.domReference,r,u]);return d.useMemo((()=>s?{reference:p}:{}),[s,p])}const OM="active",TM="selected";function PM(e,t,n){const r=new Map,o="item"===n;let i=e;if(o&&e){const{[OM]:t,[TM]:n,...r}=e;i=r}return{..."floating"===n&&{tabIndex:-1,[EM]:""},...i,...t.map((t=>{const r=t?t[n]:null;return"function"==typeof r?e?r(e):null:r})).concat(e).reduce(((e,t)=>t?(Object.entries(t).forEach((t=>{let[n,i]=t;var a;o&&[OM,TM].includes(n)||(0===n.indexOf("on")?(r.has(n)||r.set(n,[]),"function"==typeof i&&(null==(a=r.get(n))||a.push(i),e[n]=function(){for(var e,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return null==(e=r.get(n))?void 0:e.map((e=>e(...o))).find((e=>void 0!==e))})):e[n]=i)})),e):e),{})}}function NM(e){void 0===e&&(e=[]);const t=e.map((e=>null==e?void 0:e.reference)),n=e.map((e=>null==e?void 0:e.floating)),r=e.map((e=>null==e?void 0:e.item)),o=d.useCallback((t=>PM(t,e,"reference")),t),i=d.useCallback((t=>PM(t,e,"floating")),n),a=d.useCallback((t=>PM(t,e,"item")),r);return d.useMemo((()=>({getReferenceProps:o,getFloatingProps:i,getItemProps:a})),[o,i,a])}const _M=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function jM(e,t){var n;void 0===t&&(t={});const{open:r,floatingId:o}=e,{enabled:i=!0,role:a="dialog"}=t,s=null!=(n=_M.get(a))?n:a,u=YS(),l=null!=tM(),c=d.useMemo((()=>"tooltip"===s||"label"===a?{["aria-"+("label"===a?"labelledby":"describedby")]:r?o:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":"alertdialog"===s?"dialog":s,"aria-controls":r?o:void 0,..."listbox"===s&&{role:"combobox"},..."menu"===s&&{id:u},..."menu"===s&&l&&{role:"menuitem"},..."select"===a&&{"aria-autocomplete":"none"},..."combobox"===a&&{"aria-autocomplete":"list"}}),[s,o,l,r,u,a]),f=d.useMemo((()=>{const e={id:o,...s&&{role:s}};return"tooltip"===s||"label"===a?e:{...e,..."menu"===s&&{"aria-labelledby":u}}}),[s,o,u,a]),p=d.useCallback((e=>{let{active:t,selected:n}=e;const r={role:"option",...t&&{id:o+"-option"}};switch(a){case"select":return{...r,"aria-selected":t&&n};case"combobox":return{...r,...t&&{"aria-selected":!0}}}return{}}),[o,a]);return d.useMemo((()=>i?{reference:c,floating:f,item:p}:{}),[i,c,f,p])}const IM=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,((e,t)=>(t?"-":"")+e.toLowerCase()));function RM(e,t){return"function"==typeof e?e(t):e}function LM(e,t){void 0===t&&(t={});const{initial:n={opacity:0},open:r,close:o,common:i,duration:a=250}=t,s=e.placement,u=s.split("-")[0],l=d.useMemo((()=>({side:u,placement:s})),[u,s]),c="number"==typeof a,f=(c?a:a.open)||0,p=(c?a:a.close)||0,[h,m]=d.useState((()=>({...RM(i,l),...RM(n,l)}))),{isMounted:v,status:g}=function(e,t){void 0===t&&(t={});const{open:n,elements:{floating:r}}=e,{duration:o=250}=t,i=("number"==typeof o?o:o.close)||0,[a,s]=d.useState("unmounted"),u=function(e,t){const[n,r]=d.useState(e);return e&&!n&&r(!0),d.useEffect((()=>{if(!e&&n){const e=setTimeout((()=>r(!1)),t);return()=>clearTimeout(e)}}),[e,n,t]),n}(n,i);return u||"close"!==a||s("unmounted"),qS((()=>{if(r){if(n){s("initial");const e=requestAnimationFrame((()=>{s("open")}));return()=>{cancelAnimationFrame(e)}}s("close")}}),[n,r]),{isMounted:u,status:a}}(e,{duration:a}),y=oM(n),b=oM(r),D=oM(o),w=oM(i);return qS((()=>{const e=RM(y.current,l),t=RM(D.current,l),n=RM(w.current,l),r=RM(b.current,l)||Object.keys(e).reduce(((e,t)=>(e[t]="",e)),{});if("initial"===g&&m((t=>({transitionProperty:t.transitionProperty,...n,...e}))),"open"===g&&m({transitionProperty:Object.keys(r).map(IM).join(","),transitionDuration:f+"ms",...n,...r}),"close"===g){const r=t||e;m({transitionProperty:Object.keys(r).map(IM).join(","),transitionDuration:p+"ms",...n,...r})}}),[p,D,y,b,w,f,g,l]),{isMounted:v,styles:h}}function HM(e){return HM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HM(e)}function VM(e){return function(e){if(Array.isArray(e))return zM(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return zM(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zM(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function $M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,YM(r.key),r)}}function GM(e,t,n){return t&&UM(e.prototype,t),n&&UM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function WM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(WM=function(){return!!e})()}function qM(e){return qM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qM(e)}function KM(e,t){return KM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},KM(e,t)}function ZM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function JM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZM(Object(n),!0).forEach((function(t){XM(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function XM(e,t,n){return(t=YM(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YM(e){var t=function(e){if("object"!=HM(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=HM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==HM(t)?t:t+""}var QM,eB={exports:{}},tB={};eB.exports=function(){if(QM)return tB;QM=1;var e=d,t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=e.useState,r=e.useEffect,o=e.useLayoutEffect,i=e.useDebugValue;function a(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!t(e,r)}catch(e){return!0}}var s="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),u=n({inst:{value:s,getSnapshot:t}}),l=u[0].inst,c=u[1];return o((function(){l.value=s,l.getSnapshot=t,a(l)&&c({inst:l})}),[e,s,t]),r((function(){return a(l)&&c({inst:l}),e((function(){a(l)&&c({inst:l})}))}),[e]),i(s),s};return tB.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:s,tB}();var nB=eB.exports;d.Component;var rB,oB={exports:{}},iB={};oB.exports=function(){if(rB)return iB;rB=1;var e=d,t=nB,n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=t.useSyncExternalStore,o=e.useRef,i=e.useEffect,a=e.useMemo,s=e.useDebugValue;return iB.useSyncExternalStoreWithSelector=function(e,t,u,l,c){var d=o(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=a((function(){function e(e){if(!i){if(i=!0,r=e,e=l(e),void 0!==c&&f.hasValue){var t=f.value;if(c(t,e))return o=t}return o=e}if(t=o,n(r,e))return t;var a=l(e);return void 0!==c&&c(t,a)?t:(r=e,o=a)}var r,o,i=!1,a=void 0===u?null:u;return[function(){return e(t())},null===a?void 0:function(){return e(a())}]}),[t,u,l,c]);var p=r(e,d[0],d[1]);return i((function(){f.hasValue=!0,f.value=p}),[p]),s(p),p},iB}(),oB.exports,"undefined"!=typeof window?d.useLayoutEffect:d.useEffect,"undefined"==typeof window||Boolean("undefined"!=typeof window&&window.next),(0,d.createContext)({editor:null}).Consumer;var aB=(0,d.createContext)({onDragStart:void 0}),sB=function(){return(0,d.useContext)(aB)},uB=d.forwardRef((function(e,t){var n=sB().onDragStart,r=e.as||"div";return d.createElement(r,JM(JM({},e),{},{ref:t,"data-node-view-wrapper":"",onDragStart:n,style:JM({whiteSpace:"normal"},e.style)}))})),lB=function(){return GM((function e(t,n){var r,o=this,i=n.editor,a=n.props,s=void 0===a?{}:a,u=n.as,l=void 0===u?"div":u,c=n.className,d=void 0===c?"":c;$M(this,e),this.ref=null,this.id=Math.floor(4294967295*Math.random()).toString(),this.component=t,this.editor=i,this.props=s,this.element=document.createElement(l),this.element.classList.add("react-renderer"),d&&(r=this.element.classList).add.apply(r,VM(d.split(" "))),this.editor.isInitialized?(0,RF.flushSync)((function(){o.render()})):this.render()}),[{key:"render",value:function(){var e,t=this,n=this.component,r=this.props,o=this.editor;(function(e){return!("function"!=typeof e||!e.prototype||!e.prototype.isReactComponent)}(n)||function(e){var t;return!("object"!==HM(e)||"Symbol(react.forward_ref)"!==(null===(t=e.$$typeof)||void 0===t?void 0:t.toString()))}(n))&&(r.ref=function(e){t.ref=e}),this.reactElement=d.createElement(n,JM({},r)),null===(e=null==o?void 0:o.contentComponent)||void 0===e||e.setRenderer(this.id,this)}},{key:"updateProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props=JM(JM({},this.props),e),this.render()}},{key:"destroy",value:function(){var e,t=this.editor;null===(e=null==t?void 0:t.contentComponent)||void 0===e||e.removeRenderer(this.id)}},{key:"updateAttributes",value:function(e){var t=this;Object.keys(e).forEach((function(n){t.element.setAttribute(n,e[n])}))}}])}(),cB=function(e){function t(){return $M(this,t),function(e,t,n){return t=qM(t),function(e,t){if(t&&("object"==HM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,WM()?Reflect.construct(t,n||[],qM(e).constructor):t.apply(e,n))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KM(e,t)}(t,e),GM(t,[{key:"mount",value:function(){var e,t=this,n={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:function(){return t.getPos()},updateAttributes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.updateAttributes(e)},deleteNode:function(){return t.deleteNode()}};this.component.displayName||(this.component.displayName=(e=this.extension.name).charAt(0).toUpperCase()+e.substring(1));var r={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:function(e){e&&t.contentDOMElement&&e.firstChild!==t.contentDOMElement&&e.appendChild(t.contentDOMElement)}},o=this.component,i=d.memo((function(e){return d.createElement(aB.Provider,{value:r},d.createElement(o,e))}));i.displayName="ReactNodeView",this.node.isLeaf?this.contentDOMElement=null:this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.style.whiteSpace="inherit");var a=this.node.isInline?"span":"div";this.options.as&&(a=this.options.as);var s=this.options.className,u=void 0===s?"":s;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new lB(i,{editor:this.editor,props:n,as:a,className:"node-".concat(this.node.type.name," ").concat(u).trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}},{key:"dom",get:function(){var e;if(this.renderer.element.firstElementChild&&!(null===(e=this.renderer.element.firstElementChild)||void 0===e?void 0:e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}},{key:"contentDOM",get:function(){return this.node.isLeaf?null:this.contentDOMElement}},{key:"handleSelectionUpdate",value:function(){var e=this.editor.state.selection,t=e.from,n=e.to,r=this.getPos();if("number"==typeof r)if(t<=r&&n>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}},{key:"update",value:function(e,t,n){var r=this,o=function(e){r.renderer.updateProps(e),"function"==typeof r.options.attrs&&r.updateElementAttributes()};if(e.type!==this.node.type)return!1;if("function"==typeof this.options.update){var i=this.node,a=this.decorations,s=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=n,this.options.update({oldNode:i,oldDecorations:a,newNode:e,newDecorations:t,oldInnerDecorations:s,innerDecorations:n,updateProps:function(){return o({node:e,decorations:t,innerDecorations:n})}})}return e===this.node&&this.decorations===t&&this.innerDecorations===n||(this.node=e,this.decorations=t,this.innerDecorations=n,o({node:e,decorations:t,innerDecorations:n})),!0}},{key:"selectNode",value:function(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}},{key:"deselectNode",value:function(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}},{key:"destroy",value:function(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}},{key:"updateElementAttributes",value:function(){if(this.options.attrs){var e={};if("function"==typeof this.options.attrs){var t=this.editor.extensionManager.attributes,n=Ds(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:n})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}])}(Hu);function dB(e,t){return function(n){return n.editor.contentComponent?new cB(e,n,t):{}}}var fB=a(7384),pB=["show","referencePos"],hB=["show","referencePos"],mB=["show","referencePos"],vB=["editor","className","theme","children","editable","onSelectionChange","onChange","formattingToolbar","linkToolbar","slashMenu","emojiPicker","sideMenu","filePanel","tableHandles","comments","autoFocus","renderEditor"],gB=["className","renderEditor","editorColorScheme","children"];function yB(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=FB(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function bB(){bB=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),s=new B(r||[]);return o(a,"_invoke",{value:A(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function g(){}function y(){}function b(){}var D={};l(D,a,(function(){return this}));var w=Object.getPrototypeOf,C=w&&w(w(O([])));C&&C!==n&&r.call(C,a)&&(D=C);var k=b.prototype=g.prototype=Object.create(D);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,s){var u=d(e[o],e,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==MB(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(c).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,n,r){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=F(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function F(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,F(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(MB(t)+" is not iterable")}return y.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},E(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(k),l(k,u,"Generator"),l(k,a,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,B.prototype={constructor:B,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;M(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function DB(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function wB(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){DB(i,r,o,a,s,"next",e)}function s(e){DB(i,r,o,a,s,"throw",e)}a(void 0)}))}}function CB(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function kB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kB(Object(n),!0).forEach((function(t){xB(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xB(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=MB(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=MB(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==MB(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||FB(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FB(e,t){if(e){if("string"==typeof e)return SB(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?SB(e,t):void 0}}function SB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function MB(e){return MB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MB(e)}Object.defineProperty;var BB=(0,d.createContext)(void 0);function OB(e){return(0,d.useContext)(BB)}function TB(e){var t=OB();if(null==t||!t.editor)throw new Error("useBlockNoteEditor was called outside of a BlockNoteContext provider or BlockNoteView component");return t.editor}function PB(e,t,n){var r=OB();t||(t=null==r?void 0:r.editor),(0,d.useEffect)((function(){if(!t)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return t.onSelectionChange(e,n)}),[e,t,n])}function NB(e,t,n,r){var o=MM(EB({open:e},r)),i=o.refs,a=o.update,s=o.context,u=o.floatingStyles,l=o.isPositioned,c=LM(s),f=c.isMounted,p=c.styles,h=NM([SM(s,"object"==MB(null==r?void 0:r.canDismiss)?r.canDismiss:{enabled:null==r?void 0:r.canDismiss})]),m=h.getReferenceProps,v=h.getFloatingProps;return(0,d.useEffect)((function(){a()}),[t,a]),(0,d.useEffect)((function(){null!==t&&(t instanceof HTMLElement||function(e){return void 0!==e.getBoundingClientRect}(t)?i.setReference(t):i.setReference({getBoundingClientRect:function(){return t}}))}),[t,i]),(0,d.useMemo)((function(){return{isMounted:f,ref:i.setFloating,setReference:i.setReference,style:EB(EB(EB({display:"flex"},p),u),{},{zIndex:n}),getFloatingProps:v,getReferenceProps:m,isPositioned:l}}),[l,u,f,i.setFloating,i.setReference,p,n,v,m])}function _B(e){var t=AB((0,d.useState)(),2),n=t[0],r=t[1];return(0,d.useEffect)((function(){return e((function(e){r(EB({},e))}))}),[e]),n}var jB=(0,d.createContext)(void 0);function IB(){return(0,d.useContext)(jB)}var RB=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,d.useMemo)((function(){var t=VA.create(e);return window&&(window.ProseMirror=t._tiptapEditor),t}),t)};function LB(){return OB().editor.dictionary}function HB(e,t){var n=OB();t||(t=null==n?void 0:n.editor),(0,d.useEffect)((function(){if(!t)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return t.onChange(e)}),[e,t])}var VB=function(e){var t=AB((0,d.useState)(!1),2),n=t[0],r=t[1],o=AB((0,d.useState)(e.editor.isEmpty),2),i=o[0],a=o[1],s=IB();HB((function(){a(e.editor.isEmpty)}),e.editor);var u=(0,d.useCallback)((function(){r(!0)}),[]),l=(0,d.useCallback)((function(){r(!1)}),[]);return(0,d.useEffect)((function(){e.editable&&e.autoFocus&&e.editor.focus()}),[e.autoFocus,e.editable,e.editor]),(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(s.Comments.Editor,{autoFocus:e.autoFocus,className:"bn-comment-editor",editor:e.editor,onFocus:u,onBlur:l,editable:e.editable}),e.actions&&(0,B.jsx)("div",{className:"bn-comment-actions-wrapper",children:(0,B.jsx)(e.actions,{isFocused:n,isEmpty:i})})]})},zB=Jw(Kw(rE.paragraph.implementation.node.config),{}),$B=CB(iE,["textColor","backgroundColor"]),UB=bE.create({blockSpecs:{paragraph:zB},styleSpecs:$B});function GB(){var e=TB();if(!e.comments)throw new Error("Comments plugin not found");var t=e.comments,n=IB(),r=LB(),o=RB({trailingBlock:!1,dictionary:EB(EB({},r),{},{placeholders:{emptyDocument:r.placeholders.new_comment}}),schema:UB,sideMenuDetection:"editor"});return(0,B.jsx)(n.Comments.Card,{className:"bn-thread",children:(0,B.jsx)(VB,{autoFocus:!0,editable:!0,editor:o,actions:function(e){var r,i=e.isEmpty;return(0,B.jsx)(n.Generic.Toolbar.Root,{className:Iw("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:(0,B.jsx)(n.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Save",variant:"compact",isDisabled:i,onClick:(r=wB(bB().mark((function e(){return bB().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.createThread({initialComment:{body:o.document}});case 2:t.stopPendingComment();case 3:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)}),children:"Save"})})}})})}var WB,qB=function(e){var t=TB();if(!t.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");var n=t.comments;(0,d.useEffect)((function(){var e=n.onUpdate((function(e){return t.setForceSelectionVisible(e.pendingComment)}));return function(){return e()}}),[n,t]);var r=_B(n.onUpdate.bind(n)),o=function(e,t){var n=TB();t=t||n;var r=AB((0,d.useState)((function(){if(e)return t.getSelectionBoundingBox()})),2),o=r[0],i=r[1];return PB((0,d.useCallback)((function(){if(e){var n=t.getSelectionBoundingBox();i(n)}}),[t,e]),t,!0),(0,d.useEffect)((function(){i(e?t.getSelectionBoundingBox():void 0)}),[e,t]),o}(null==r?void 0:r.pendingComment),i=NB((null==r?void 0:r.pendingComment)||!1,o||null,5e3,EB({placement:"bottom",middleware:[IS(10),RS(),HS()],onOpenChange:function(e){e||(n.stopPendingComment(),t.focus())}},e.floatingOptions)),a=i.isMounted,s=i.ref,u=i.style,l=i.getFloatingProps;if(!a||!r)return null;var c=e.floatingComposer||GB;return(0,B.jsx)("div",EB(EB({ref:s,style:u},l()),{},{children:(0,B.jsx)(c,{})}))},KB={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ZB=d.createContext&&d.createContext(KB),JB=["attr","size","title"];function XB(){return XB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XB.apply(this,arguments)}function YB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YB(Object(n),!0).forEach((function(t){eO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eO(e,t,n){return t=function(e){var t=function(e,t){if("object"!=MB(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=MB(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==MB(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tO(e){return e&&e.map((function(e,t){return d.createElement(e.tag,QB({key:t},e.attr),tO(e.child))}))}function nO(e){return function(t){return d.createElement(rO,XB({attr:QB({},e.attr)},t),tO(e.child))}}function rO(e){var t=function(t){var n,r=e.attr,o=e.size,i=e.title,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,JB),s=o||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),d.createElement("svg",XB({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,a,{className:n,style:QB(QB({color:e.color||t.color},t.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),i&&d.createElement("title",null,i),e.children)};return void 0!==ZB?d.createElement(ZB.Consumer,null,(function(e){return t(e)})):t(KB)}function oO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 7V11L2 6L8 1V5H13C17.4183 5 21 8.58172 21 13C21 17.4183 17.4183 21 13 21H4V19H13C16.3137 19 19 16.3137 19 13C19 9.68629 16.3137 7 13 7H8Z"},child:[]}]})(e)}function iO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.29117 20.8242L2 22L3.17581 16.7088C2.42544 15.3056 2 13.7025 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.2975 22 8.6944 21.5746 7.29117 20.8242ZM7.58075 18.711L8.23428 19.0605C9.38248 19.6745 10.6655 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 13.3345 4.32549 14.6175 4.93949 15.7657L5.28896 16.4192L4.63416 19.3658L7.58075 18.711Z"},child:[]}]})(e)}function aO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.24264 17.9967H3V13.754L14.435 2.319C14.8256 1.92848 15.4587 1.92848 15.8492 2.319L18.6777 5.14743C19.0682 5.53795 19.0682 6.17112 18.6777 6.56164L7.24264 17.9967ZM3 19.9967H21V21.9967H3V19.9967Z"},child:[]}]})(e)}function sO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"},child:[]}]})(e)}function uO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.55397 22H3.3999L10.9999 3H12.9999L20.5999 22H18.4458L16.0458 16H7.95397L5.55397 22ZM8.75397 14H15.2458L11.9999 5.88517L8.75397 14Z"},child:[]}]})(e)}function lO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM21.0005 8V20H19.0005L19 10.204L17 10.74V8.67L19.5005 8H21.0005Z"},child:[]}]})(e)}function cO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 8C20.5711 8 22.25 9.67893 22.25 11.75C22.25 12.6074 21.9623 13.3976 21.4781 14.0292L21.3302 14.2102L18.0343 18H22V20H15L14.9993 18.444L19.8207 12.8981C20.0881 12.5908 20.25 12.1893 20.25 11.75C20.25 10.7835 19.4665 10 18.5 10C17.5818 10 16.8288 10.7071 16.7558 11.6065L16.75 11.75H14.75C14.75 9.67893 16.4289 8 18.5 8Z"},child:[]}]})(e)}function dO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8L21.9984 10L19.4934 12.883C21.0823 13.3184 22.25 14.7728 22.25 16.5C22.25 18.5711 20.5711 20.25 18.5 20.25C16.674 20.25 15.1528 18.9449 14.8184 17.2166L16.7821 16.8352C16.9384 17.6413 17.6481 18.25 18.5 18.25C19.4665 18.25 20.25 17.4665 20.25 16.5C20.25 15.5335 19.4665 14.75 18.5 14.75C18.214 14.75 17.944 14.8186 17.7056 14.9403L16.3992 13.3932L19.3484 10H15V8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(e)}function fO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM3 12.5L7 9V16L3 12.5Z"},child:[]}]})(e)}function pO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM7 12.5L3 16V9L7 12.5Z"},child:[]}]})(e)}function hO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 5H11V19H8V21H16V19H13V5H16V3H8V5ZM2 7C1.44772 7 1 7.44772 1 8V16C1 16.5523 1.44772 17 2 17H8V15H3V9H8V7H2ZM16 9H21V15H16V17H22C22.5523 17 23 16.5523 23 16V8C23 7.44772 22.5523 7 22 7H16V9Z"},child:[]}]})(e)}function mO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 17H22V19H19V22H17V17ZM7 7H2V5H5V2H7V7ZM18.364 15.5355L16.9497 14.1213L18.364 12.7071C20.3166 10.7545 20.3166 7.58866 18.364 5.63604C16.4113 3.68342 13.2455 3.68342 11.2929 5.63604L9.87868 7.05025L8.46447 5.63604L9.87868 4.22183C12.6123 1.48816 17.0445 1.48816 19.7782 4.22183C22.5118 6.9555 22.5118 11.3877 19.7782 14.1213L18.364 15.5355ZM15.5355 18.364L14.1213 19.7782C11.3877 22.5118 6.9555 22.5118 4.22183 19.7782C1.48816 17.0445 1.48816 12.6123 4.22183 9.87868L5.63604 8.46447L7.05025 9.87868L5.63604 11.2929C3.68342 13.2455 3.68342 16.4113 5.63604 18.364C7.58866 20.3166 10.7545 20.3166 12.7071 18.364L14.1213 16.9497L15.5355 18.364ZM14.8284 7.75736L16.2426 9.17157L9.17157 16.2426L7.75736 14.8284L14.8284 7.75736Z"},child:[]}]})(e)}function vO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.3638 15.5355L16.9496 14.1213L18.3638 12.7071C20.3164 10.7545 20.3164 7.58866 18.3638 5.63604C16.4112 3.68341 13.2453 3.68341 11.2927 5.63604L9.87849 7.05025L8.46428 5.63604L9.87849 4.22182C12.6122 1.48815 17.0443 1.48815 19.778 4.22182C22.5117 6.95549 22.5117 11.3876 19.778 14.1213L18.3638 15.5355ZM15.5353 18.364L14.1211 19.7782C11.3875 22.5118 6.95531 22.5118 4.22164 19.7782C1.48797 17.0445 1.48797 12.6123 4.22164 9.87868L5.63585 8.46446L7.05007 9.87868L5.63585 11.2929C3.68323 13.2455 3.68323 16.4113 5.63585 18.364C7.58847 20.3166 10.7543 20.3166 12.7069 18.364L14.1211 16.9497L15.5353 18.364ZM14.8282 7.75736L16.2425 9.17157L9.17139 16.2426L7.75717 14.8284L14.8282 7.75736Z"},child:[]}]})(e)}function gO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.00008 6V9H5.00008V6H8.00008ZM3.00008 4V11H10.0001V4H3.00008ZM13.0001 4H21.0001V6H13.0001V4ZM13.0001 11H21.0001V13H13.0001V11ZM13.0001 18H21.0001V20H13.0001V18ZM10.7072 16.2071L9.29297 14.7929L6.00008 18.0858L4.20718 16.2929L2.79297 17.7071L6.00008 20.9142L10.7072 16.2071Z"},child:[]}]})(e)}function yO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM5 3V6H6V7H3V6H4V4H3V3H5ZM3 14V11.5H5V11H3V10H6V12.5H4V13H6V14H3ZM5 19.5H3V18.5H5V18H3V17H6V21H3V20H5V19.5ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(e)}function bO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM4.5 6.5C3.67157 6.5 3 5.82843 3 5C3 4.17157 3.67157 3.5 4.5 3.5C5.32843 3.5 6 4.17157 6 5C6 5.82843 5.32843 6.5 4.5 6.5ZM4.5 13.5C3.67157 13.5 3 12.8284 3 12C3 11.1716 3.67157 10.5 4.5 10.5C5.32843 10.5 6 11.1716 6 12C6 12.8284 5.32843 13.5 4.5 13.5ZM4.5 20.4C3.67157 20.4 3 19.7284 3 18.9C3 18.0716 3.67157 17.4 4.5 17.4C5.32843 17.4 6 18.0716 6 18.9C6 19.7284 5.32843 20.4 4.5 20.4ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(e)}function DO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM11 5H5V10.999H7V9L10 12L7 15V13H5V19H11V17H13V19H19V13H17V15L14 12L17 9V10.999H19V5H13V7H11V5ZM13 13V15H11V13H13ZM13 9V11H11V9H13Z"},child:[]}]})(e)}function wO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20C20.5523 3 21 3.44772 21 4V20ZM19 11V5H13.001V7H15L12 10L9 7H11V5H5V11H7V13H5V19H11V17H9L12 14L15 17H13.001V19H19V13H17V11H19ZM11 13H9V11H11V13ZM15 13H13V11H15V13Z"},child:[]}]})(e)}function CO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 4H3V6H21V4ZM21 11H8V13H21V11ZM21 18H8V20H21V18ZM5 11H3V20H5V11Z"},child:[]}]})(e)}function kO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 6V21H11V6H5V4H19V6H13Z"},child:[]}]})(e)}function EO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"},child:[]}]})(e)}function xO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 15V18H24V20H21V23H19V20H16V18H19V15H21ZM21.0082 3C21.556 3 22 3.44495 22 3.9934L22.0007 13.3417C21.3749 13.1204 20.7015 13 20 13V5H4L4.001 19L13.2929 9.70715C13.6528 9.34604 14.22 9.31823 14.6123 9.62322L14.7065 9.70772L18.2521 13.2586C15.791 14.0069 14 16.2943 14 19C14 19.7015 14.1204 20.3749 14.3417 21.0007L2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7Z"},child:[]}]})(e)}function AO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V5.757L19 7.757V5H5V13.1L9 9.1005L13.328 13.429L12.0012 14.7562L11.995 18.995L16.2414 19.0012L17.571 17.671L18.8995 19H19V16.242L21 14.242V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM21.7782 7.80761L23.1924 9.22183L15.4142 17L13.9979 16.9979L14 15.5858L21.7782 7.80761ZM15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7Z"},child:[]}]})(e)}function FO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 3.9934C3 3.44476 3.44495 3 3.9934 3H20.0066C20.5552 3 21 3.44495 21 3.9934V20.0066C21 20.5552 20.5551 21 20.0066 21H3.9934C3.44476 21 3 20.5551 3 20.0066V3.9934ZM10.6219 8.41459C10.5562 8.37078 10.479 8.34741 10.4 8.34741C10.1791 8.34741 10 8.52649 10 8.74741V15.2526C10 15.3316 10.0234 15.4088 10.0672 15.4745C10.1897 15.6583 10.4381 15.708 10.6219 15.5854L15.5008 12.3328C15.5447 12.3035 15.5824 12.2658 15.6117 12.2219C15.7343 12.0381 15.6846 11.7897 15.5008 11.6672L10.6219 8.41459Z"},child:[]}]})(e)}function SO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"},child:[]}]})(e)}function MO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"},child:[]}]})(e)}function BO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"},child:[]}]})(e)}function OO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 4V6H15V4H9Z"},child:[]}]})(e)}function TO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM9 11V17H11V11H9ZM13 11V17H15V11H13ZM9 4V6H15V4H9Z"},child:[]}]})(e)}function PO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 19H20V12H22V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V12H4V19ZM14 9H19L12 16L5 9H10V3H14V9Z"},child:[]}]})(e)}function NO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10 6V8H5V19H16V14H18V20C18 20.5523 17.5523 21 17 21H4C3.44772 21 3 20.5523 3 20V7C3 6.44772 3.44772 6 4 6H10ZM21 3V12L17.206 8.207L11.2071 14.2071L9.79289 12.7929L15.792 6.793L12 3H21Z"},child:[]}]})(e)}function _O(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 10C3.9 10 3 10.9 3 12C3 13.1 3.9 14 5 14C6.1 14 7 13.1 7 12C7 10.9 6.1 10 5 10ZM19 10C17.9 10 17 10.9 17 12C17 13.1 17.9 14 19 14C20.1 14 21 13.1 21 12C21 10.9 20.1 10 19 10ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z"},child:[]}]})(e)}function jO(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM8 13H16C16 15.2091 14.2091 17 12 17C9.79086 17 8 15.2091 8 13ZM8 11C7.17157 11 6.5 10.3284 6.5 9.5C6.5 8.67157 7.17157 8 8 8C8.82843 8 9.5 8.67157 9.5 9.5C9.5 10.3284 8.82843 11 8 11ZM16 11C15.1716 11 14.5 10.3284 14.5 9.5C14.5 8.67157 15.1716 8 16 8C16.8284 8 17.5 8.67157 17.5 9.5C17.5 10.3284 16.8284 11 16 11Z"},child:[]}]})(e)}function IO(){return RO.apply(this,arguments)}function RO(){return RO=wB(bB().mark((function e(){return bB().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WB||(WB=wB(bB().mark((function e(){var t,n,r,o,i,s;return bB().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([a.e(8517).then(a.bind(a,8517)),a.e(3274).then(a.t.bind(a,3274,17))]);case 2:return t=e.sent,n=AB(t,2),r=n[0],o=n[1],i="default"in r?r.default:r,s="default"in o?o.default:o,e.next=10,i.init({data:s});case 10:return e.abrupt("return",{emojiMart:i,emojiData:s});case 11:case"end":return e.stop()}}),e)})))(),WB));case 1:case"end":return e.stop()}}),e)}))),RO.apply(this,arguments)}function LO(e){var t=(0,d.useRef)(null),n=(0,d.useRef)(null);return n.current&&n.current.update(e),(0,d.useEffect)((function(){return wB(bB().mark((function r(){var o,i;return bB().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,IO();case 2:o=r.sent,i=o.emojiMart,n.current=new i.Picker(EB(EB({},e),{},{ref:t}));case 5:case"end":return r.stop()}}),r)})))(),function(){n.current=null}}),[]),d.createElement("div",{ref:t})}var HO=function(e){var t=AB((0,d.useState)(!1),2),n=t[0],r=t[1],o=IB(),i=OB();return(0,B.jsxs)(o.Generic.Popover.Root,{opened:n,children:[(0,B.jsx)(o.Generic.Popover.Trigger,{children:(0,B.jsx)("div",{onClick:function(e){e.preventDefault(),e.stopPropagation(),r(!n)},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.children})}),(0,B.jsx)(o.Generic.Popover.Content,{variant:"panel-popover",children:(0,B.jsx)(LO,{perLine:7,onClickOutside:function(){return r(!1)},onEmojiSelect:function(t){e.onEmojiSelect(t),r(!1)},theme:null==i?void 0:i.colorSchemePreference})})]})};function VO(e,t){var n=e.comments;if(!n)throw new Error("Comments plugin not found");var r=n.userStore,o=(0,d.useCallback)((function(){var e,n=new Map,o=yB(t);try{for(o.s();!(e=o.n()).done;){var i=e.value,a=r.getUser(i);a&&n.set(i,a)}}catch(e){o.e(e)}finally{o.f()}return n}),[r,t]),i=(0,d.useMemo)((function(){return{current:o()}}),[o]),a=(0,d.useCallback)((function(e){var n=r.subscribe((function(t){i.current=o(),e()}));return r.loadUsers(t),n}),[r,o,t,i]);return(0,d.useSyncExternalStore)(a,(function(){return i.current}))}var zO=function(e){var t=IB(),n=LB(),r=TB();if(!r.comments)throw new Error("ReactionBadge must be used inside a BlockNote editor with comments enabled");var o=e.comment.reactions.find((function(t){return t.emoji===e.emoji}));if(!o)throw new Error("Trying to render reaction badge for non-existing reaction");var i=AB((0,d.useState)([]),2),a=i[0],s=i[1],u=VO(r,a);return(0,B.jsx)(t.Generic.Badge.Root,{className:Iw("bn-badge","bn-comment-reaction"),text:o.userIds.length.toString(),icon:o.emoji,isSelected:r.comments.threadStore.auth.canDeleteReaction(e.comment,o.emoji),onClick:function(){return e.onReactionSelect(o.emoji)},onMouseEnter:function(){return s(o.userIds)},mainTooltip:n.comments.reactions.reacted_by,secondaryTooltip:"".concat(Array.from(u.values()).map((function(e){return e.username})).join("\n"))},o.emoji)},$O=function(e){var t=e.comment,n=e.thread,r=e.showResolveButton,o=LB(),i=RB({initialContent:t.body,trailingBlock:!1,dictionary:EB(EB({},o),{},{placeholders:{emptyDocument:o.placeholders.edit_comment}}),schema:UB,sideMenuDetection:"editor"},[t.body]),a=IB(),s=AB((0,d.useState)(!1),2),u=s[0],l=s[1],c=TB();if(!c.comments)throw new Error("Comments plugin not found");var f,p=c.comments.threadStore,h=(0,d.useCallback)((function(){l(!0)}),[]),m=(0,d.useCallback)((function(){i.replaceBlocks(i.document,t.body),l(!1)}),[i,t.body]),v=(0,d.useCallback)(function(){var e=wB(bB().mark((function e(r){return bB().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.updateComment({commentId:t.id,comment:{body:i.document},threadId:n.id});case 2:l(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,n.id,i,p]),g=(0,d.useCallback)(wB(bB().mark((function e(){return bB().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.deleteComment({commentId:t.id,threadId:n.id});case 2:case"end":return e.stop()}}),e)}))),[t,n.id,p]),y=(0,d.useCallback)(function(){var e=wB(bB().mark((function e(r){return bB().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p.auth.canAddReaction(t,r)){e.next=5;break}return e.next=3,p.addReaction({threadId:n.id,commentId:t.id,emoji:r});case 3:e.next=9;break;case 5:if(e.t0=p.auth.canDeleteReaction(t,r),!e.t0){e.next=9;break}return e.next=9,p.deleteReaction({threadId:n.id,commentId:t.id,emoji:r});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p,t,n.id]),b=(0,d.useCallback)(wB(bB().mark((function e(){return bB().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.resolveThread({threadId:n.id});case 2:case"end":return e.stop()}}),e)}))),[n.id,p]),D=(0,d.useCallback)(wB(bB().mark((function e(){return bB().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.unresolveThread({threadId:n.id});case 2:case"end":return e.stop()}}),e)}))),[n.id,p]),w=function(e,t){return VO(e,[t]).get(t)}(c,t.userId);if(!t.body)return null;var C=p.auth.canAddReaction(t),k=p.auth.canDeleteComment(t),E=p.auth.canUpdateComment(t),x=r&&(n.resolved?p.auth.canUnresolveThread(n):p.auth.canResolveThread(n));u||(f=(0,B.jsxs)(a.Generic.Toolbar.Root,{className:Iw("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:[C&&(0,B.jsx)(HO,{onEmojiSelect:function(e){return y(e.native)},children:(0,B.jsx)(a.Generic.Toolbar.Button,{mainTooltip:o.comments.actions.add_reaction,variant:"compact",children:(0,B.jsx)(jO,{size:16})},"add-reaction")}),x&&(n.resolved?(0,B.jsx)(a.Generic.Toolbar.Button,{mainTooltip:"Re-open",variant:"compact",onClick:D,children:(0,B.jsx)(oO,{size:16})},"reopen"):(0,B.jsx)(a.Generic.Toolbar.Button,{mainTooltip:o.comments.actions.resolve,variant:"compact",onClick:b,children:(0,B.jsx)(BO,{size:16})},"resolve")),(k||E)&&(0,B.jsxs)(a.Generic.Menu.Root,{position:"bottom-start",children:[(0,B.jsx)(a.Generic.Menu.Trigger,{children:(0,B.jsx)(a.Generic.Toolbar.Button,{mainTooltip:o.comments.actions.more_actions,variant:"compact",children:(0,B.jsx)(_O,{size:16})},"more-actions")}),(0,B.jsxs)(a.Generic.Menu.Dropdown,{className:"bn-menu-dropdown",children:[E&&(0,B.jsx)(a.Generic.Menu.Item,{icon:(0,B.jsx)(aO,{}),onClick:h,children:o.comments.actions.edit_comment},"edit-comment"),k&&(0,B.jsx)(a.Generic.Menu.Item,{icon:(0,B.jsx)(TO,{}),onClick:g,children:o.comments.actions.delete_comment},"delete-comment")]})]})]}));var A=t.createdAt.toLocaleDateString(void 0,{month:"short",day:"numeric"});if(!t.body)throw new Error("soft deletes are not yet supported");return(0,B.jsx)(a.Comments.Comment,{authorInfo:null!=w?w:"loading",timeString:A,edited:t.updatedAt.getTime()!==t.createdAt.getTime(),showActions:"hover",actions:f,className:"bn-thread-comment",children:(0,B.jsx)(VB,{autoFocus:u,editor:i,editable:u,actions:t.reactions.length>0||u?function(e){var n=e.isEmpty;return(0,B.jsxs)(B.Fragment,{children:[t.reactions.length>0&&!u&&(0,B.jsxs)(a.Generic.Badge.Group,{className:Iw("bn-badge-group","bn-comment-reactions"),children:[t.reactions.map((function(e){return(0,B.jsx)(zO,{comment:t,emoji:e.emoji,onReactionSelect:y},e.emoji)})),(0,B.jsx)(HO,{onEmojiSelect:function(e){return y(e.native)},children:(0,B.jsx)(a.Generic.Badge.Root,{className:Iw("bn-badge","bn-comment-add-reaction"),text:"+",icon:(0,B.jsx)(jO,{size:16}),mainTooltip:o.comments.actions.add_reaction})})]}),u&&(0,B.jsxs)(a.Generic.Toolbar.Root,{variant:"action-toolbar",className:Iw("bn-action-toolbar","bn-comment-actions"),children:[(0,B.jsx)(a.Generic.Toolbar.Button,{mainTooltip:"Save",variant:"compact",onClick:v,isDisabled:n,children:"Save"}),(0,B.jsx)(a.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Cancel",variant:"compact",onClick:m,children:"Cancel"})]})]})}:void 0})})},UO=function(e){var t=e.thread,n=e.maxCommentsBeforeCollapse,r=IB(),o=LB(),i=VO(TB(),t.resolvedBy?[t.resolvedBy]:[]),a=t.comments.map((function(e,n){return(0,B.jsx)($O,{thread:t,comment:e,showResolveButton:0===n},e.id)}));if(t.resolved&&t.resolvedUpdatedAt&&t.resolvedBy){if(!i.get(t.resolvedBy))throw new Error("User ".concat(t.resolvedBy," resolved thread ").concat(t.id,", but their data could not be found."));var s=t.comments.findLastIndex((function(e){return t.resolvedUpdatedAt.getTime()>e.createdAt.getTime()}))+1;a.splice(s,0,(0,B.jsx)(r.Comments.Comment,{className:"bn-thread-comment",authorInfo:t.resolvedBy&&i.get(t.resolvedBy)||"loading",timeString:t.resolvedUpdatedAt.toLocaleDateString(void 0,{month:"short",day:"numeric"}),edited:!1,showActions:!1,children:(0,B.jsx)("div",{className:"bn-resolved-text",children:o.comments.sidebar.marked_as_resolved})},"resolved-comment"))}return n&&a.length>n&&a.splice(1,a.length-2,(0,B.jsx)(r.Comments.ExpandSectionsPrompt,{className:"bn-thread-expand-prompt",children:o.comments.sidebar.more_replies(t.comments.length-2)},"expand-prompt")),a},GO=function(e){var t=e.thread,n=e.selected,r=e.referenceText,o=e.maxCommentsBeforeCollapse,i=e.onFocus,a=e.onBlur,s=e.tabIndex,u=IB(),l=LB(),c=TB().comments;if(!c)throw new Error("Comments plugin not found");var f=RB({trailingBlock:!1,dictionary:EB(EB({},l),{},{placeholders:{emptyDocument:l.placeholders.comment_reply}}),schema:UB,sideMenuDetection:"editor"}),p=(0,d.useCallback)(wB(bB().mark((function e(){return bB().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.threadStore.addComment({comment:{body:f.document},threadId:t.id});case 2:f.removeBlocks(f.document);case 3:case"end":return e.stop()}}),e)}))),[c,f,t.id]);return(0,B.jsxs)(u.Comments.Card,{className:"bn-thread",headerText:r,onFocus:i,onBlur:a,selected:n,tabIndex:s,children:[(0,B.jsx)(u.Comments.CardSection,{className:"bn-thread-comments",children:(0,B.jsx)(UO,{thread:t,maxCommentsBeforeCollapse:n?void 0:o||5})}),n&&(0,B.jsx)(u.Comments.CardSection,{className:"bn-thread-composer",children:(0,B.jsx)(VB,{autoFocus:!1,editable:!0,editor:f,actions:function(e){var t=e.isEmpty;return t?null:(0,B.jsx)(u.Generic.Toolbar.Root,{variant:"action-toolbar",className:Iw("bn-action-toolbar","bn-comment-actions"),children:(0,B.jsx)(u.Generic.Toolbar.Button,{mainTooltip:"Save",variant:"compact",isDisabled:t,onClick:p,children:"Save"})})}})})]})};var WO=function(e){var t=TB();if(!t.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");var n=_B(t.comments.onUpdate.bind(t.comments)),r=NB(!(null==n||!n.selectedThreadId),null,5e3,EB({placement:"bottom",middleware:[IS(10),RS(),HS()],onOpenChange:function(e){var n;e||(null==(n=t.comments)||n.selectThread(void 0),t.focus())}},e.floatingOptions)),o=r.isMounted,i=r.ref,a=r.style,s=r.getFloatingProps,u=r.setReference,l=(0,d.useCallback)((function(){var e;if(null!=n&&n.selectedThreadId){var r=null==(e=t.domElement)?void 0:e.querySelector('[data-bn-thread-id="'.concat(null==n?void 0:n.selectedThreadId,'"]'));r&&u(r)}}),[u,t,null==n?void 0:n.selectedThreadId]);(0,d.useEffect)((function(){if(null!=n&&n.selectedThreadId)return t.onChange((function(){l()}))}),[t,l,null==n?void 0:n.selectedThreadId]),(0,d.useLayoutEffect)(l,[l]);var c=function(e){var t=e.comments;if(!t)throw new Error("Comments plugin not found");var n=t.threadStore,r=(0,d.useRef)();r.current||(r.current=n.getThreads());var o=(0,d.useCallback)((function(e){return n.subscribe((function(t){r.current=t,e()}))}),[n]);return(0,d.useSyncExternalStore)(o,(function(){return r.current}))}(t);if(!o||!n||!n.selectedThreadId)return null;var f=e.floatingThread||GO;return(0,B.jsx)("div",EB(EB({ref:i,style:a},s()),{},{children:(0,B.jsx)(f,{thread:c.get(n.selectedThreadId),selected:!0})}))},qO=function(e){var t=IB(),n=LB(),r=e.block,o=TB(),i=AB((0,d.useState)(""),2),a=i[0],s=i[1],u=(0,d.useCallback)((function(e){s(e.currentTarget.value)}),[]),l=(0,d.useCallback)((function(e){"Enter"===e.key&&(e.preventDefault(),o.updateBlock(r,{props:{name:Uw(a),url:a}}))}),[o,r,a]),c=(0,d.useCallback)((function(){o.updateBlock(r,{props:{name:Uw(a),url:a}})}),[o,r,a]);return(0,B.jsxs)(t.FilePanel.TabPanel,{className:"bn-tab-panel",children:[(0,B.jsx)(t.FilePanel.TextInput,{className:"bn-text-input",placeholder:n.file_panel.embed.url_placeholder,value:a,onChange:u,onKeyDown:l,"data-test":"embed-input"}),(0,B.jsx)(t.FilePanel.Button,{className:"bn-button",onClick:c,"data-test":"embed-input-button",children:n.file_panel.embed.embed_button[r.type]||n.file_panel.embed.embed_button.file})]})},KO=function(e){var t,n=IB(),r=LB(),o=e.block,i=e.setLoading,a=TB(),s=AB((0,d.useState)(!1),2),u=s[0],l=s[1];(0,d.useEffect)((function(){u&&setTimeout((function(){l(!1)}),3e3)}),[u]);var c=(0,d.useCallback)((function(e){function t(){return t=wB(bB().mark((function e(t){var n;return bB().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i(!0),void 0===a.uploadFile){e.next=14;break}return e.prev=1,e.next=4,a.uploadFile(t,o.id);case 4:"string"==typeof(n=e.sent)&&(n={props:{name:t.name,url:n}}),a.updateBlock(o,n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),l(!0);case 11:return e.prev=11,i(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])}))),t.apply(this,arguments)}null!==e&&function(e){t.apply(this,arguments)}(e)}),[o,a,i]),f=a.schema.blockSchema[o.type],p=f.isFileBlock&&null!=(t=f.fileBlockAccept)&&t.length?f.fileBlockAccept.join(","):"*/*";return(0,B.jsxs)(n.FilePanel.TabPanel,{className:"bn-tab-panel",children:[(0,B.jsx)(n.FilePanel.FileInput,{className:"bn-file-input","data-test":"upload-input",accept:p,placeholder:r.file_panel.upload.file_placeholder[o.type]||r.file_panel.upload.file_placeholder.file,value:null,onChange:c}),u&&(0,B.jsx)("div",{className:"bn-error-text",children:r.file_panel.upload.upload_error})]})},ZO=function(e){var t,n=IB(),r=LB(),o=TB(),i=AB((0,d.useState)(!1),2),a=i[0],s=i[1],u=null!==(t=e.tabs)&&void 0!==t?t:[].concat(function(e){return function(e){if(Array.isArray(e))return SB(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||FB(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(void 0!==o.uploadFile?[{name:r.file_panel.upload.title,tabPanel:(0,B.jsx)(KO,{block:e.block,setLoading:s})}]:[]),[{name:r.file_panel.embed.title,tabPanel:(0,B.jsx)(qO,{block:e.block})}]),l=AB((0,d.useState)(e.defaultOpenTab||u[0].name),2),c=l[0],f=l[1];return(0,B.jsx)(n.FilePanel.Root,{className:"bn-panel",defaultOpenTab:c,openTab:c,setOpenTab:f,tabs:u,loading:a})},JO=function(e){var t=TB();if(!t.filePanel)throw new Error("FileToolbarController can only be used when BlockNote editor schema contains file block");var n=_B(t.filePanel.onUpdate.bind(t.filePanel)),r=NB((null==n?void 0:n.show)||!1,(null==n?void 0:n.referencePos)||null,5e3,EB({placement:"bottom",middleware:[IS(10),HS()],onOpenChange:function(e){e||(t.filePanel.closeMenu(),t.focus())}},e.floatingOptions)),o=r.isMounted,i=r.ref,a=r.style,s=r.getFloatingProps;if(!o||!n)return null;n.show,n.referencePos;var u=CB(n,pB),l=e.filePanel||ZO;return(0,B.jsx)("div",EB(EB({ref:i,style:a},s()),{},{children:(0,B.jsx)(l,EB({},u))}))};function XO(e,t){HB(e,t),PB(e,t)}function YO(e){return function(t){e.forEach((function(e){"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}function QO(e){var t=OB();if(e||(e=null==t?void 0:t.editor),!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");var n=e,r=AB((0,d.useState)((function(){var e;return(null==(e=n.getSelection())?void 0:e.blocks)||[n.getTextCursorPosition().block]})),2),o=r[0],i=r[1];return XO((function(){var e;return i((null==(e=n.getSelection())?void 0:e.blocks)||[n.getTextCursorPosition().block])}),n),o}var eT={bold:function(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 11H12.5C13.8807 11 15 9.88071 15 8.5C15 7.11929 13.8807 6 12.5 6H8V11ZM18 15.5C18 17.9853 15.9853 20 13.5 20H6V4H12.5C14.9853 4 17 6.01472 17 8.5C17 9.70431 16.5269 10.7981 15.7564 11.6058C17.0979 12.3847 18 13.837 18 15.5ZM8 13V18H13.5C14.8807 18 16 16.8807 16 15.5C16 14.1193 14.8807 13 13.5 13H8Z"},child:[]}]})(e)},italic:function(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15 20H7V18H9.92661L12.0425 6H9V4H17V6H14.0734L11.9575 18H15V20Z"},child:[]}]})(e)},underline:function(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 3V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V3H18V12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12V3H8ZM4 20H20V22H4V20Z"},child:[]}]})(e)},strike:function(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.1538 14C17.3846 14.5161 17.5 15.0893 17.5 15.7196C17.5 17.0625 16.9762 18.1116 15.9286 18.867C14.8809 19.6223 13.4335 20 11.5862 20C9.94674 20 8.32335 19.6185 6.71592 18.8555V16.6009C8.23538 17.4783 9.7908 17.917 11.3822 17.917C13.9333 17.917 15.2128 17.1846 15.2208 15.7196C15.2208 15.0939 15.0049 14.5598 14.5731 14.1173C14.5339 14.0772 14.4939 14.0381 14.4531 14H3V12H21V14H17.1538ZM13.076 11H7.62908C7.4566 10.8433 7.29616 10.6692 7.14776 10.4778C6.71592 9.92084 6.5 9.24559 6.5 8.45207C6.5 7.21602 6.96583 6.165 7.89749 5.299C8.82916 4.43299 10.2706 4 12.2219 4C13.6934 4 15.1009 4.32808 16.4444 4.98426V7.13591C15.2448 6.44921 13.9293 6.10587 12.4978 6.10587C10.0187 6.10587 8.77917 6.88793 8.77917 8.45207C8.77917 8.87172 8.99709 9.23796 9.43293 9.55079C9.86878 9.86362 10.4066 10.1135 11.0463 10.3004C11.6665 10.4816 12.3431 10.7148 13.076 11H13.076Z"},child:[]}]})(e)},code:function(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M23 12L15.9289 19.0711L14.5147 17.6569L20.1716 12L14.5147 6.34317L15.9289 4.92896L23 12ZM3.82843 12L9.48528 17.6569L8.07107 19.0711L1 12L8.07107 4.92896L9.48528 6.34317L3.82843 12Z"},child:[]}]})(e)}},tT=function(e){var t=LB(),n=IB(),r=TB(),o=function(e,t){return e in t.schema.styleSchema&&t.schema.styleSchema[e].type===e&&"boolean"===t.schema.styleSchema[e].propSchema}(e.basicTextStyle,r),i=QO(r),a=AB((0,d.useState)(e.basicTextStyle in r.getActiveStyles()),2),s=a[0],u=a[1];if(XO((function(){o&&u(e.basicTextStyle in r.getActiveStyles())}),r),!(0,d.useMemo)((function(){return!!o&&!!i.find((function(e){return void 0!==e.content}))}),[o,i])||!r.isEditable)return null;var l=eT[e.basicTextStyle];return(0,B.jsx)(n.FormattingToolbar.Button,{className:"bn-button","data-test":e.basicTextStyle,onClick:function(){return function(e){if(r.focus(),o){if("boolean"!==r.schema.styleSchema[e].propSchema)throw new Error("can only toggle boolean styles");r.toggleStyles(xB({},e,!0))}}(e.basicTextStyle)},isSelected:s,label:t.formatting_toolbar[e.basicTextStyle].tooltip,mainTooltip:t.formatting_toolbar[e.basicTextStyle].tooltip,secondaryTooltip:jw(t.formatting_toolbar[e.basicTextStyle].secondary_tooltip,t.generic.ctrl_shortcut),icon:(0,B.jsx)(l,{})})},nT=function(e){var t=e.textColor||"default",n=e.backgroundColor||"default",r=e.size||16,o=(0,d.useMemo)((function(){return{pointerEvents:"none",fontSize:(.75*r).toString()+"px",height:r.toString()+"px",lineHeight:r.toString()+"px",textAlign:"center",width:r.toString()+"px"}}),[r]);return(0,B.jsx)("div",{className:"bn-color-icon","data-background-color":n,"data-text-color":t,style:o,children:"A"})},rT=["default","gray","brown","red","orange","yellow","green","blue","purple","pink"],oT=function(e){var t=IB(),n=LB();return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)((function(){return e.text?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(t.Generic.Menu.Label,{children:n.color_picker.text_title}),rT.map((function(r){return(0,B.jsx)(t.Generic.Menu.Item,{onClick:function(){e.onClick&&e.onClick(),e.text.setColor(r)},"data-test":"text-color-"+r,icon:(0,B.jsx)(nT,{textColor:r,size:e.iconSize}),checked:e.text.color===r,children:n.color_picker.colors[r]},"text-color-"+r)}))]}):null}),{}),(0,B.jsx)((function(){return e.background?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(t.Generic.Menu.Label,{children:n.color_picker.background_title}),rT.map((function(r){return(0,B.jsx)(t.Generic.Menu.Item,{onClick:function(){e.onClick&&e.onClick(),e.background.setColor(r)},"data-test":"background-color-"+r,icon:(0,B.jsx)(nT,{backgroundColor:r,size:e.iconSize}),checked:e.background.color===r,children:n.color_picker.colors[r]},"background-color-"+r)}))]}):null}),{})]})};function iT(e,t){return"".concat(e,"Color")in t.schema.styleSchema&&t.schema.styleSchema["".concat(e,"Color")].type==="".concat(e,"Color")&&"string"===t.schema.styleSchema["".concat(e,"Color")].propSchema}var aT=function(){var e=IB(),t=LB(),n=TB(),r=iT("text",n),o=iT("background",n),i=QO(n),a=AB((0,d.useState)(r&&n.getActiveStyles().textColor||"default"),2),s=a[0],u=a[1],l=AB((0,d.useState)(o&&n.getActiveStyles().backgroundColor||"default"),2),c=l[0],f=l[1];XO((function(){r&&u(n.getActiveStyles().textColor||"default"),o&&f(n.getActiveStyles().backgroundColor||"default")}),n);var p=(0,d.useCallback)((function(e){if(!r)throw Error("Tried to set text color, but style does not exist in editor schema.");"default"===e?n.removeStyles({textColor:e}):n.addStyles({textColor:e}),setTimeout((function(){n.focus()}))}),[n,r]),h=(0,d.useCallback)((function(e){if(!o)throw Error("Tried to set background color, but style does not exist in editor schema.");"default"===e?n.removeStyles({backgroundColor:e}):n.addStyles({backgroundColor:e}),setTimeout((function(){n.focus()}))}),[o,n]);return(0,d.useMemo)((function(){if(!r&&!o)return!1;var e,t=yB(i);try{for(t.s();!(e=t.n()).done;)if(void 0!==e.value.content)return!0}catch(e){t.e(e)}finally{t.f()}return!1}),[o,i,r])&&n.isEditable?(0,B.jsxs)(e.Generic.Menu.Root,{children:[(0,B.jsx)(e.Generic.Menu.Trigger,{children:(0,B.jsx)(e.FormattingToolbar.Button,{className:"bn-button","data-test":"colors",label:t.formatting_toolbar.colors.tooltip,mainTooltip:t.formatting_toolbar.colors.tooltip,icon:(0,B.jsx)(nT,{textColor:s,backgroundColor:c,size:20})})}),(0,B.jsx)(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-color-picker-dropdown",children:(0,B.jsx)(oT,{text:r?{color:s,setColor:p}:void 0,background:o?{color:c,setColor:h}:void 0})})]}):null},sT=function(e){var t,n=yB(Gx);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.startsWith(r))return e}}catch(e){n.e(e)}finally{n.f()}return"".concat(Wx,"://").concat(e)},uT=function(e){var t=IB(),n=LB(),r=e.url,o=e.text,i=e.editLink,a=e.showTextField,s=AB((0,d.useState)(r),2),u=s[0],l=s[1],c=AB((0,d.useState)(o),2),f=c[0],p=c[1];(0,d.useEffect)((function(){l(r),p(o)}),[o,r]);var h=(0,d.useCallback)((function(e){"Enter"===e.key&&(e.preventDefault(),i(sT(u),f))}),[i,u,f]),m=(0,d.useCallback)((function(e){return l(e.currentTarget.value)}),[]),v=(0,d.useCallback)((function(e){return p(e.currentTarget.value)}),[]),g=(0,d.useCallback)((function(){return i(sT(u),f)}),[i,u,f]);return(0,B.jsxs)(t.Generic.Form.Root,{children:[(0,B.jsx)(t.Generic.Form.TextInput,{className:"bn-text-input",name:"url",icon:(0,B.jsx)(vO,{}),autoFocus:!0,placeholder:n.link_toolbar.form.url_placeholder,value:u,onKeyDown:h,onChange:m,onSubmit:g}),!1!==a&&(0,B.jsx)(t.Generic.Form.TextInput,{className:"bn-text-input",name:"title",icon:(0,B.jsx)(kO,{}),placeholder:n.link_toolbar.form.title_placeholder,value:f,onKeyDown:h,onChange:v,onSubmit:g})]})},lT=function(){var e,t=TB(),n=IB(),r=LB(),o=function(e){return"link"in e.schema.inlineContentSchema&&"link"===e.schema.inlineContentSchema.link}(t),i=QO(t),a=AB((0,d.useState)(!1),2),s=a[0],u=a[1],l=AB((0,d.useState)(t.getSelectedLinkUrl()||""),2),c=l[0],f=l[1],p=AB((0,d.useState)(t.getSelectedText()),2),h=p[0],m=p[1];XO((function(){m(t.getSelectedText()||""),f(t.getSelectedLinkUrl()||"")}),t),(0,d.useEffect)((function(){var e,n=function(e){(e.ctrlKey||e.metaKey)&&"k"===e.key&&(u(!0),e.preventDefault())};return null==(e=t.prosemirrorView)||e.dom.addEventListener("keydown",n),function(){var e;null==(e=t.prosemirrorView)||e.dom.removeEventListener("keydown",n)}}),[null==(e=t.prosemirrorView)?void 0:e.dom]);var v=(0,d.useCallback)((function(e){t.createLink(e),t.focus()}),[t]),g=t.transact((function(e){return hE(e.selection)}));return(0,d.useMemo)((function(){if(!o)return!1;var e,t=yB(i);try{for(t.s();!(e=t.n()).done;)if(void 0===e.value.content)return!1}catch(e){t.e(e)}finally{t.f()}return!g}),[o,i,g])&&"link"in t.schema.inlineContentSchema&&t.isEditable?(0,B.jsxs)(n.Generic.Popover.Root,{opened:s,children:[(0,B.jsx)(n.Generic.Popover.Trigger,{children:(0,B.jsx)(n.FormattingToolbar.Button,{className:"bn-button","data-test":"createLink",label:r.formatting_toolbar.link.tooltip,mainTooltip:r.formatting_toolbar.link.tooltip,secondaryTooltip:jw(r.formatting_toolbar.link.secondary_tooltip,r.generic.ctrl_shortcut),icon:(0,B.jsx)(vO,{}),onClick:function(){return u(!0)}})}),(0,B.jsx)(n.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:(0,B.jsx)(uT,{url:c,text:h,editLink:v,showTextField:!1})})]}):null},cT=function(){var e=LB(),t=IB(),n=TB(),r=AB((0,d.useState)(),2),o=r[0],i=r[1],a=QO(n),s=(0,d.useMemo)((function(){if(1===a.length){var e=a[0];return cE(e,n)?(i(e.props.caption),e):void 0}}),[n,a]),u=(0,d.useCallback)((function(e){s&&"Enter"===e.key&&(e.preventDefault(),n.updateBlock(s,{props:{caption:o}}))}),[o,n,s]),l=(0,d.useCallback)((function(e){return i(e.currentTarget.value)}),[]);return s&&!dE(s,n)&&n.isEditable?(0,B.jsxs)(t.Generic.Popover.Root,{children:[(0,B.jsx)(t.Generic.Popover.Trigger,{children:(0,B.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_caption.tooltip,mainTooltip:e.formatting_toolbar.file_caption.tooltip,icon:(0,B.jsx)(hO,{}),isSelected:""!==s.props.caption})}),(0,B.jsx)(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:(0,B.jsx)(t.Generic.Form.Root,{children:(0,B.jsx)(t.Generic.Form.TextInput,{name:"file-caption",icon:(0,B.jsx)(hO,{}),value:o||"",autoFocus:!0,placeholder:e.formatting_toolbar.file_caption.input_placeholder,onKeyDown:u,onChange:l})})})]}):null},dT=function(){var e=LB(),t=IB(),n=TB(),r=QO(n),o=(0,d.useMemo)((function(){if(1===r.length){var e=r[0];return cE(e,n)?e:void 0}}),[n,r]),i=(0,d.useCallback)((function(){n.focus(),n.removeBlocks([o])}),[n,o]);return o&&!dE(o,n)&&n.isEditable?(0,B.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_delete.tooltip[o.type]||e.formatting_toolbar.file_delete.tooltip.file,mainTooltip:e.formatting_toolbar.file_delete.tooltip[o.type]||e.formatting_toolbar.file_delete.tooltip.file,icon:(0,B.jsx)(OO,{}),onClick:i}):null},fT=function(){var e=LB(),t=IB(),n=TB(),r=AB((0,d.useState)(),2),o=r[0],i=r[1],a=QO(n),s=(0,d.useMemo)((function(){if(1===a.length){var e=a[0];return cE(e,n)?(i(e.props.name),e):void 0}}),[n,a]),u=(0,d.useCallback)((function(e){s&&"Enter"===e.key&&(e.preventDefault(),n.updateBlock(s,{props:{name:o}}))}),[o,n,s]),l=(0,d.useCallback)((function(e){return i(e.currentTarget.value)}),[]);return s&&!dE(s,n)&&n.isEditable?(0,B.jsxs)(t.Generic.Popover.Root,{children:[(0,B.jsx)(t.Generic.Popover.Trigger,{children:(0,B.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_rename.tooltip[s.type]||e.formatting_toolbar.file_rename.tooltip.file,mainTooltip:e.formatting_toolbar.file_rename.tooltip[s.type]||e.formatting_toolbar.file_rename.tooltip.file,icon:(0,B.jsx)(uO,{})})}),(0,B.jsx)(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:(0,B.jsx)(t.Generic.Form.Root,{children:(0,B.jsx)(t.Generic.Form.TextInput,{name:"file-name",icon:(0,B.jsx)(uO,{}),value:o||"",autoFocus:!0,placeholder:e.formatting_toolbar.file_rename.input_placeholder[s.type]||e.formatting_toolbar.file_rename.input_placeholder.file,onKeyDown:u,onChange:l})})})]}):null},pT=function(){var e=LB(),t=IB(),n=TB(),r=QO(n),o=AB((0,d.useState)(!1),2),i=o[0],a=o[1];(0,d.useEffect)((function(){a(!1)}),[r]);var s=1===r.length?r[0]:void 0;return void 0!==s&&cE(s,n)&&n.isEditable?(0,B.jsxs)(t.Generic.Popover.Root,{opened:i,position:"bottom",children:[(0,B.jsx)(t.Generic.Popover.Trigger,{children:(0,B.jsx)(t.FormattingToolbar.Button,{className:"bn-button",onClick:function(){return a(!i)},isSelected:i,mainTooltip:e.formatting_toolbar.file_replace.tooltip[s.type]||e.formatting_toolbar.file_replace.tooltip.file,label:e.formatting_toolbar.file_replace.tooltip[s.type]||e.formatting_toolbar.file_replace.tooltip.file,icon:(0,B.jsx)(AO,{})})}),(0,B.jsx)(t.Generic.Popover.Content,{className:"bn-popover-content bn-panel-popover",variant:"panel-popover",children:(0,B.jsx)(ZO,{block:s})})]}):null},hT=function(){var e=LB(),t=IB(),n=TB(),r=QO(n),o=AB((0,d.useState)((function(){return n.canNestBlock()})),2),i=o[0],a=o[1];XO((function(){a(n.canNestBlock())}),n);var s=(0,d.useCallback)((function(){n.focus(),n.nestBlock()}),[n]);return(0,d.useMemo)((function(){return!r.find((function(e){return"inline"!==n.schema.blockSchema[e.type].content}))}),[n.schema.blockSchema,r])&&n.isEditable?(0,B.jsx)(t.FormattingToolbar.Button,{className:"bn-button","data-test":"nestBlock",onClick:s,isDisabled:!i,label:e.formatting_toolbar.nest.tooltip,mainTooltip:e.formatting_toolbar.nest.tooltip,secondaryTooltip:jw(e.formatting_toolbar.nest.secondary_tooltip,e.generic.ctrl_shortcut),icon:(0,B.jsx)(pO,{})}):null},mT=function(){var e=LB(),t=IB(),n=TB(),r=QO(n),o=AB((0,d.useState)((function(){return n.canUnnestBlock()})),2),i=o[0],a=o[1];XO((function(){a(n.canUnnestBlock())}),n);var s=(0,d.useCallback)((function(){n.focus(),n.unnestBlock()}),[n]);return(0,d.useMemo)((function(){return!r.find((function(e){return"inline"!==n.schema.blockSchema[e.type].content}))}),[n.schema.blockSchema,r])&&n.isEditable?(0,B.jsx)(t.FormattingToolbar.Button,{className:"bn-button","data-test":"unnestBlock",onClick:s,isDisabled:!i,label:e.formatting_toolbar.unnest.tooltip,mainTooltip:e.formatting_toolbar.unnest.tooltip,secondaryTooltip:jw(e.formatting_toolbar.unnest.secondary_tooltip,e.generic.ctrl_shortcut),icon:(0,B.jsx)(fO,{})}):null},vT=function(e){var t=IB(),n=LB(),r=TB(),o=QO(r),i=AB((0,d.useState)(r.getTextCursorPosition().block),2),a=i[0],s=i[1],u=(0,d.useMemo)((function(){return(e.items||function(e){return[{name:e.slash_menu.paragraph.title,type:"paragraph",icon:kO,isSelected:function(e){return"paragraph"===e.type}},{name:e.slash_menu.heading.title,type:"heading",props:{level:1},icon:lO,isSelected:function(e){return"heading"===e.type&&"level"in e.props&&1===e.props.level}},{name:e.slash_menu.heading_2.title,type:"heading",props:{level:2},icon:cO,isSelected:function(e){return"heading"===e.type&&"level"in e.props&&2===e.props.level}},{name:e.slash_menu.heading_3.title,type:"heading",props:{level:3},icon:dO,isSelected:function(e){return"heading"===e.type&&"level"in e.props&&3===e.props.level}},{name:e.slash_menu.quote.title,type:"quote",icon:CO,isSelected:function(e){return"quote"===e.type}},{name:e.slash_menu.bullet_list.title,type:"bulletListItem",icon:bO,isSelected:function(e){return"bulletListItem"===e.type}},{name:e.slash_menu.numbered_list.title,type:"numberedListItem",icon:yO,isSelected:function(e){return"numberedListItem"===e.type}},{name:e.slash_menu.check_list.title,type:"checkListItem",icon:gO,isSelected:function(e){return"checkListItem"===e.type}}]}(n)).filter((function(e){return e.type in r.schema.blockSchema}))}),[r,n,e.items]),l=(0,d.useMemo)((function(){return void 0!==u.find((function(e){return e.type===a.type}))}),[a.type,u]),c=(0,d.useMemo)((function(){return u.map((function(e){var t=e.icon;return{text:e.name,icon:(0,B.jsx)(t,{size:16}),onClick:function(){return function(e){r.focus(),r.transact((function(){var t,n=yB(o);try{for(n.s();!(t=n.n()).done;){var i=t.value;r.updateBlock(i,{type:e.type,props:e.props})}}catch(e){n.e(e)}finally{n.f()}}))}(e)},isSelected:e.isSelected(a)}}))}),[a,u,r,o]);return XO((function(){s(r.getTextCursorPosition().block)}),r),l&&r.isEditable?(0,B.jsx)(t.FormattingToolbar.Select,{className:"bn-select",items:c}):null},gT=function(){var e=LB(),t=IB(),n=TB(),r=(0,d.useCallback)((function(){var e;null==(e=n.comments)||e.startPendingComment(),n.formattingToolbar.closeMenu()}),[n]);return n.comments?(0,B.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.comment.tooltip,mainTooltip:e.formatting_toolbar.comment.tooltip,icon:(0,B.jsx)(iO,{}),onClick:r}):null},yT=function(){var e=LB(),t=IB(),n=TB(),r=(0,d.useCallback)((function(){n._tiptapEditor.chain().focus().addPendingComment().run()}),[n]);return n._tiptapEditor.commands.addPendingComment&&n.isEditable?(0,B.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.comment.tooltip,mainTooltip:e.formatting_toolbar.comment.tooltip,icon:(0,B.jsx)(iO,{}),onClick:r}):null};function bT(e,t){try{var n=new URL(e,t);if("javascript:"!==n.protocol)return n.href}catch(e){}return"#"}var DT=function(){var e=LB(),t=IB(),n=TB(),r=QO(n),o=(0,d.useMemo)((function(){if(1===r.length){var e=r[0];return cE(e,n)?e:void 0}}),[n,r]),i=(0,d.useCallback)((function(){o&&o.props.url&&(n.focus(),n.resolveFileUrl?n.resolveFileUrl(o.props.url).then((function(e){return window.open(bT(e,window.location.href))})):window.open(bT(o.props.url,window.location.href)))}),[n,o]);return!o||dE(o,n)?null:(0,B.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_download.tooltip[o.type]||e.formatting_toolbar.file_download.tooltip.file,mainTooltip:e.formatting_toolbar.file_download.tooltip[o.type]||e.formatting_toolbar.file_download.tooltip.file,icon:(0,B.jsx)(PO,{}),onClick:i})},wT=function(){var e=LB(),t=IB(),n=TB(),r=QO(n),o=(0,d.useMemo)((function(){if(1===r.length){var e=r[0];return function(e,t){return e.type in t.schema.blockSchema&&t.schema.blockSchema[e.type].isFileBlock&&"showPreview"in t.schema.blockSchema[e.type].propSchema||!1}(e,n)?e:void 0}}),[n,r]),i=(0,d.useCallback)((function(){o&&n.updateBlock(o,{props:{showPreview:!o.props.showPreview}})}),[n,o]);return o&&!dE(o,n)&&n.isEditable?(0,B.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:"Toggle preview",mainTooltip:e.formatting_toolbar.file_preview_toggle.tooltip,icon:(0,B.jsx)(xO,{}),isSelected:o.props.showPreview,onClick:i}):null},CT=function(){var e=LB(),t=IB(),n=TB(),r=QO(n),o=(0,d.useMemo)((function(){var e;if(1===r.length){var t=r[0];return"table"===t.type?null==(e=n.tableHandles)?void 0:e.getMergeDirection(t):void 0}}),[n,r]),i=(0,d.useCallback)((function(){var e;null==(e=n.tableHandles)||e.mergeCells()}),[n]);return n.isEditable&&void 0!==o&&n.settings.tables.splitCells?(0,B.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.table_cell_merge.tooltip,mainTooltip:e.formatting_toolbar.table_cell_merge.tooltip,icon:"horizontal"===o?(0,B.jsx)(DO,{}):(0,B.jsx)(wO,{}),onClick:i}):null},kT={left:function(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H17V21H3V19ZM3 14H21V16H3V14ZM3 9H17V11H3V9Z"},child:[]}]})(e)},center:function(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM5 19H19V21H5V19ZM3 14H21V16H3V14ZM5 9H19V11H5V9Z"},child:[]}]})(e)},right:function(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM7 19H21V21H7V19ZM3 14H21V16H3V14ZM7 9H21V11H7V9Z"},child:[]}]})(e)},justify:function(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM3 14H21V16H3V14ZM3 9H21V11H3V9Z"},child:[]}]})(e)}},ET=function(e){var t=IB(),n=LB(),r=TB(),o=QO(r),i=(0,d.useMemo)((function(){var e,t=o[0];if(pE("textAlignment",t,r))return t.props.textAlignment;if("table"===t.type){var n=null==(e=r.tableHandles)?void 0:e.getCellSelection();if(!n)return;var i=n.cells.map((function(e){var n=e.row,r=e.col;return Mw(t.content.rows[n].cells[r]).props.textAlignment})),a=i[0];if(i.every((function(e){return e===a})))return a}}),[r,o]),a=(0,d.useCallback)((function(e){var t;r.focus();var n,i=yB(o);try{var a=function(){var o=n.value;if(fE("textAlignment",o.type,r))r.updateBlock(o,{props:{textAlignment:e}});else if("table"===o.type){var i=null==(t=r.tableHandles)?void 0:t.getCellSelection();if(!i)return 1;var a=o.content.rows.map((function(e){return EB(EB({},e),{},{cells:e.cells.map((function(e){return Mw(e)}))})}));i.cells.forEach((function(t){var n=t.row,r=t.col;a[n].cells[r].props.textAlignment=e})),r.updateBlock(o,{type:"table",content:EB(EB({},o.content),{},{type:"tableContent",rows:a})}),r.setTextCursorPosition(o)}};for(i.s();!(n=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}}),[r,o]);if(!(0,d.useMemo)((function(){return!!o.find((function(e){return"textAlignment"in e.props||"table"===e.type&&e.children}))}),[o])||!r.isEditable)return null;var s=kT[e.textAlignment];return(0,B.jsx)(t.FormattingToolbar.Button,{className:"bn-button","data-test":"alignText".concat(e.textAlignment.slice(0,1).toUpperCase()+e.textAlignment.slice(1)),onClick:function(){return a(e.textAlignment)},isSelected:i===e.textAlignment,label:n.formatting_toolbar["align_".concat(e.textAlignment)].tooltip,mainTooltip:n.formatting_toolbar["align_".concat(e.textAlignment)].tooltip,icon:(0,B.jsx)(s,{})})},xT=function(e){return[(0,B.jsx)(vT,{items:e},"blockTypeSelect"),(0,B.jsx)(CT,{},"tableCellMergeButton"),(0,B.jsx)(cT,{},"fileCaptionButton"),(0,B.jsx)(pT,{},"replaceFileButton"),(0,B.jsx)(fT,{},"fileRenameButton"),(0,B.jsx)(dT,{},"fileDeleteButton"),(0,B.jsx)(DT,{},"fileDownloadButton"),(0,B.jsx)(wT,{},"filePreviewButton"),(0,B.jsx)(tT,{basicTextStyle:"bold"},"boldStyleButton"),(0,B.jsx)(tT,{basicTextStyle:"italic"},"italicStyleButton"),(0,B.jsx)(tT,{basicTextStyle:"underline"},"underlineStyleButton"),(0,B.jsx)(tT,{basicTextStyle:"strike"},"strikeStyleButton"),(0,B.jsx)(ET,{textAlignment:"left"},"textAlignLeftButton"),(0,B.jsx)(ET,{textAlignment:"center"},"textAlignCenterButton"),(0,B.jsx)(ET,{textAlignment:"right"},"textAlignRightButton"),(0,B.jsx)(aT,{},"colorStyleButton"),(0,B.jsx)(hT,{},"nestBlockButton"),(0,B.jsx)(mT,{},"unnestBlockButton"),(0,B.jsx)(lT,{},"createLinkButton"),(0,B.jsx)(gT,{},"addCommentButton"),(0,B.jsx)(yT,{},"addTiptapCommentButton")]},AT=function(e){var t=IB();return(0,B.jsx)(t.FormattingToolbar.Root,{className:"bn-toolbar bn-formatting-toolbar",children:e.children||xT(e.blockTypeSelectItems)})},FT=function(e){switch(e){case"left":default:return"top-start";case"center":return"top";case"right":return"top-end"}},ST=function(e){var t=(0,d.useRef)(null),n=TB(),r=AB((0,d.useState)((function(){var e=n.getTextCursorPosition().block;return"textAlignment"in e.props?FT(e.props.textAlignment):"top-start"})),2),o=r[0],i=r[1];XO((function(){var e=n.getTextCursorPosition().block;"textAlignment"in e.props?i(FT(e.props.textAlignment)):i("top-start")}),n);var a=_B(n.formattingToolbar.onUpdate.bind(n.formattingToolbar)),s=NB((null==a?void 0:a.show)||!1,(null==a?void 0:a.referencePos)||null,3e3,EB({placement:o,middleware:[IS(10),RS(),HS()],onOpenChange:function(e,t){e||(n.formattingToolbar.closeMenu(),n.focus())}},e.floatingOptions)),u=s.isMounted,l=s.ref,c=s.style,f=s.getFloatingProps,p=(0,d.useMemo)((function(){return YO([t,l])}),[t,l]);if(!u||!a)return null;if(!a.show&&t.current)return(0,B.jsx)("div",{ref:p,style:c,dangerouslySetInnerHTML:{__html:t.current.innerHTML}});var h=e.formattingToolbar||AT;return(0,B.jsx)("div",EB(EB({ref:p,style:c},f()),{},{children:(0,B.jsx)(h,{})}))},MT=function(e){var t=IB(),n=LB();return(0,B.jsx)(t.LinkToolbar.Button,{className:"bn-button",label:n.link_toolbar.delete.tooltip,mainTooltip:n.link_toolbar.delete.tooltip,isSelected:!1,onClick:e.deleteLink,icon:(0,B.jsx)(mO,{})})},BT=function(e){var t=IB(),n=LB();return(0,B.jsxs)(t.Generic.Popover.Root,{children:[(0,B.jsx)(t.Generic.Popover.Trigger,{children:(0,B.jsx)(t.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.edit.tooltip,isSelected:!1,children:n.link_toolbar.edit.text})}),(0,B.jsx)(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:(0,B.jsx)(uT,EB({},e))})]})},OT=function(e){var t=IB(),n=LB();return(0,B.jsx)(t.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.open.tooltip,label:n.link_toolbar.open.tooltip,isSelected:!1,onClick:function(){window.open(bT(e.url,window.location.href),"_blank")},icon:(0,B.jsx)(NO,{})})},TT=function(e){var t=IB();return e.children?(0,B.jsx)(t.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",children:e.children}):(0,B.jsxs)(t.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",onMouseEnter:e.stopHideTimer,onMouseLeave:e.startHideTimer,children:[(0,B.jsx)(BT,{url:e.url,text:e.text,editLink:e.editLink}),(0,B.jsx)(OT,{url:e.url}),(0,B.jsx)(MT,{deleteLink:e.deleteLink})]})},PT=function(e){var t=TB(),n={deleteLink:t.linkToolbar.deleteLink,editLink:t.linkToolbar.editLink,startHideTimer:t.linkToolbar.startHideTimer,stopHideTimer:t.linkToolbar.stopHideTimer},r=_B(t.linkToolbar.onUpdate.bind(t.linkToolbar)),o=NB((null==r?void 0:r.show)||!1,(null==r?void 0:r.referencePos)||null,4e3,EB({placement:"top-start",middleware:[IS(10),HS()],onOpenChange:function(e){e||(t.linkToolbar.closeMenu(),t.focus())}},e.floatingOptions)),i=o.isMounted,a=o.ref,s=o.style,u=o.getFloatingProps;if(!i||!r)return null;r.show,r.referencePos;var l=CB(r,hB),c=e.linkToolbar||TT;return(0,B.jsx)("div",EB(EB({ref:a,style:s},u()),{},{children:(0,B.jsx)(c,EB(EB({},l),n))}))};function NT(e){return nO({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"},child:[]},{tag:"path",attr:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},child:[]}]})(e)}var _T=function(e){var t=IB(),n=LB(),r=TB(),o=(0,d.useCallback)((function(){var t=e.block.content;if(void 0!==t&&Array.isArray(t)&&0===t.length)r.setTextCursorPosition(e.block),r.openSuggestionMenu("/");else{var n=r.insertBlocks([{type:"paragraph"}],e.block,"after")[0];r.setTextCursorPosition(n),r.openSuggestionMenu("/")}}),[r,e.block]);return(0,B.jsx)(t.SideMenu.Button,{className:"bn-button",label:n.side_menu.add_block_label,icon:(0,B.jsx)(NT,{size:24,onClick:o,"data-test":"dragHandleAdd"})})};function jT(e){return nO({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(e)}function IT(e){return nO({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(e)}var RT=function(e){var t=IB(),n=TB();return fE("textColor",e.block.type,n)||fE("backgroundColor",e.block.type,n)?(0,B.jsxs)(t.Generic.Menu.Root,{position:"right",sub:!0,children:[(0,B.jsx)(t.Generic.Menu.Trigger,{sub:!0,children:(0,B.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children})}),(0,B.jsx)(t.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:(0,B.jsx)(oT,{iconSize:18,text:fE("textColor",e.block.type,n)&&pE("textColor",e.block,n)?{color:e.block.props.textColor,setColor:function(t){return n.updateBlock(e.block,{type:e.block.type,props:{textColor:t}})}}:void 0,background:fE("backgroundColor",e.block.type,n)&&pE("backgroundColor",e.block,n)?{color:e.block.props.backgroundColor,setColor:function(t){return n.updateBlock(e.block,{props:{backgroundColor:t}})}}:void 0})})]}):null},LT=function(e){var t=IB(),n=TB();return(0,B.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",onClick:function(){return n.removeBlocks([e.block])},children:e.children})},HT=function(e){var t=IB(),n=TB();if("table"!==e.block.type||!n.settings.tables.headers)return null;var r=!!e.block.content.headerRows;return(0,B.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:function(){var t=n.getBlock(e.block.id);t&&n.updateBlock(t,EB(EB({},t),{},{content:EB(EB({},t.content),{},{headerRows:r?void 0:1})}))},children:e.children})},VT=function(e){var t=IB(),n=TB();if("table"!==e.block.type||!n.settings.tables.headers)return null;var r=!!e.block.content.headerCols;return(0,B.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:function(){n.updateBlock(e.block,{type:"table",content:EB(EB({},e.block.content),{},{type:"tableContent",headerCols:r?void 0:1})})},children:e.children})},zT=function(e){var t=IB(),n=LB();return(0,B.jsx)(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:e.children||(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(LT,EB(EB({},e),{},{children:n.drag_handle.delete_menuitem})),(0,B.jsx)(RT,EB(EB({},e),{},{children:n.drag_handle.colors_menuitem})),(0,B.jsx)(HT,EB(EB({},e),{},{children:n.drag_handle.header_row_menuitem})),(0,B.jsx)(VT,EB(EB({},e),{},{children:n.drag_handle.header_column_menuitem}))]})})},$T=function(e){var t=IB(),n=LB(),r=e.dragHandleMenu||zT;return(0,B.jsxs)(t.Generic.Menu.Root,{onOpenChange:function(t){t?e.freezeMenu():e.unfreezeMenu()},position:"left",children:[(0,B.jsx)(t.Generic.Menu.Trigger,{children:(0,B.jsx)(t.SideMenu.Button,{label:n.side_menu.drag_handle_label,draggable:!0,onDragStart:function(t){return e.blockDragStart(t,e.block)},onDragEnd:e.blockDragEnd,className:"bn-button",icon:(0,B.jsx)(jT,{size:24,"data-test":"dragHandle"})})}),(0,B.jsx)(r,{block:e.block,children:e.children})]})},UT=function(e){var t=IB(),n=(0,d.useMemo)((function(){var t={"data-block-type":e.block.type};return"heading"===e.block.type&&(t["data-level"]=e.block.props.level.toString()),e.editor.schema.blockSchema[e.block.type].isFileBlock&&(e.block.props.url?t["data-url"]="true":t["data-url"]="false"),t}),[e.block,e.editor.schema.blockSchema]);return(0,B.jsx)(t.SideMenu.Root,EB(EB({className:"bn-side-menu"},n),{},{children:e.children||(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(_T,EB({},e)),(0,B.jsx)($T,EB({},e))]})}))},GT=function(e){var t=TB(),n={blockDragStart:t.sideMenu.blockDragStart,blockDragEnd:t.sideMenu.blockDragEnd,freezeMenu:t.sideMenu.freezeMenu,unfreezeMenu:t.sideMenu.unfreezeMenu},r=_B(t.sideMenu.onUpdate.bind(t.sideMenu)),o=NB((null==r?void 0:r.show)||!1,(null==r?void 0:r.referencePos)||null,1e3,EB({placement:"left-start"},e.floatingOptions)),i=o.isMounted,a=o.ref,s=o.style,u=o.getFloatingProps;if(!i||!r)return null;r.show,r.referencePos;var l=CB(r,mB),c=e.sideMenu||UT;return(0,B.jsx)("div",EB(EB({ref:a,style:s},u()),{},{children:(0,B.jsx)(c,EB(EB(EB({},l),n),{},{editor:t}))}))};function WT(e,t){return qT.apply(this,arguments)}function qT(){return qT=wB(bB().mark((function e(t,n){return bB().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,UA(t,n);case 2:return e.abrupt("return",e.sent.map((function(e){var t=e.id;return{id:t,onItemClick:e.onItemClick,icon:t}})));case 3:case"end":return e.stop()}}),e)}))),qT.apply(this,arguments)}function KT(e){var t=IB(),n=LB(),r=e.items,o=e.loadingState,i=e.selectedIndex,a=e.onItemClick,s=e.columns,u="loading-initial"===o||"loading"===o?(0,B.jsx)(t.GridSuggestionMenu.Loader,{className:"bn-grid-suggestion-menu-loader",columns:s}):null,l=(0,d.useMemo)((function(){for(var e=[],n=function(){var n=r[o];e.push((0,B.jsx)(t.GridSuggestionMenu.Item,{className:"bn-grid-suggestion-menu-item",item:n,id:"bn-grid-suggestion-menu-item-".concat(o),isSelected:o===i,onClick:function(){return null==a?void 0:a(n)}},n.id))},o=0;o<r.length;o++)n();return e}),[t,r,a,i]);return(0,B.jsxs)(t.GridSuggestionMenu.Root,{id:"bn-grid-suggestion-menu",columns:s,className:"bn-grid-suggestion-menu",children:[u,l,0===l.length&&"loaded"===e.loadingState&&(0,B.jsx)(t.GridSuggestionMenu.EmptyItem,{className:"bn-grid-suggestion-menu-empty-item",columns:s,children:n.suggestion_menu.no_items_title})]})}function ZT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,o=(0,d.useRef)(0);(0,d.useEffect)((function(){void 0!==t&&(e.length>0?o.current=t.length:t.length-o.current>r&&n())}),[n,r,e.length,t])}function JT(e,t){var n=AB((0,d.useState)([]),2),r=n[0],o=n[1],i=AB((0,d.useState)(!1),2),a=i[0],s=i[1],u=(0,d.useRef)(),l=(0,d.useRef)();return(0,d.useEffect)((function(){var n=e;u.current=e,s(!0),t(e).then((function(e){u.current===n&&(o(e),s(!1),l.current=n)}))}),[e,t]),{items:r||[],usedQuery:l.current,loadingState:void 0===l.current?"loading-initial":a?"loading":"loaded"}}function XT(e){var t=OB().setContentEditableProps,n=TB(),r=e.getItems,o=e.gridSuggestionMenuComponent,i=e.query,a=e.clearQuery,s=e.closeMenu,u=e.onItemClick,l=e.columns,c=(0,d.useCallback)((function(e){s(),a(),null==u||u(e)}),[u,s,a]),f=JT(i,r),p=f.items,h=f.usedQuery,m=f.loadingState;ZT(p,h,s);var v=function(e,t,n,r,o){var i=AB((0,d.useState)(0),2),a=i[0],s=i[1],u=void 0!==r&&r>1;return(0,d.useEffect)((function(){var t,i=function(e){return"ArrowLeft"===e.key&&(e.preventDefault(),n.length&&s((a-1+n.length)%n.length)),"ArrowRight"===e.key&&(e.preventDefault(),n.length&&s((a+1+n.length)%n.length)),"ArrowUp"===e.key?(e.preventDefault(),n.length&&s((a-r+n.length)%n.length),!0):"ArrowDown"===e.key?(e.preventDefault(),n.length&&s((a+r)%n.length),!0):"Enter"===e.key&&!e.isComposing&&(e.stopPropagation(),e.preventDefault(),n.length&&(null==o||o(n[a])),!0)};return null==(t=e.domElement)||t.addEventListener("keydown",i,!0),function(){var t;null==(t=e.domElement)||t.removeEventListener("keydown",i,!0)}}),[e.domElement,n,a,o,r,u]),(0,d.useEffect)((function(){s(0)}),[t]),{selectedIndex:0===n.length?void 0:a}}(n,i,p,l,c),g=v.selectedIndex;return(0,d.useEffect)((function(){return t((function(e){return EB(EB({},e),{},{"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})})),function(){t((function(e){return EB(EB({},e),{},{"aria-expanded":!1,"aria-controls":void 0})}))}}),[t]),(0,d.useEffect)((function(){return t((function(e){return EB(EB({},e),{},{"aria-activedescendant":g?"bn-suggestion-menu-item-"+g:void 0})})),function(){t((function(e){return EB(EB({},e),{},{"aria-activedescendant":void 0})}))}}),[t,g]),(0,B.jsx)(o,{items:p,onItemClick:c,loadingState:m,selectedIndex:g,columns:l})}function YT(e){var t=TB(),n=e.triggerCharacter,r=e.gridSuggestionMenuComponent,o=e.columns,i=e.minQueryLength,a=e.onItemClick,s=e.getItems,u=e.floatingOptions,l=(0,d.useMemo)((function(){return a||function(e){e.onItemClick(t)}}),[t,a]),c=(0,d.useMemo)((function(){return s||function(){var e=wB(bB().mark((function e(n){return bB().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,WT(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),[t,s]),f={closeMenu:t.suggestionMenus.closeMenu,clearQuery:t.suggestionMenus.clearQuery},p=_B((0,d.useCallback)((function(e){return t.suggestionMenus.onUpdate(n,e)}),[t.suggestionMenus,n])),h=NB((null==p?void 0:p.show)||!1,(null==p?void 0:p.referencePos)||null,2e3,EB({placement:"bottom-start",middleware:[IS(10),HS(),VS({apply:function(e){var t=e.availableHeight,n=e.elements;Object.assign(n.floating.style,{maxHeight:"".concat(t-10,"px")})}})],onOpenChange:function(e){e||t.suggestionMenus.closeMenu()}},u)),m=h.isMounted,v=h.ref,g=h.style,y=h.getFloatingProps;return m&&p&&(null!=p&&p.ignoreQueryLength||!i||!(p.query.startsWith(" ")||p.query.length<i))?(0,B.jsx)("div",EB(EB({ref:v,style:g},y()),{},{children:(0,B.jsx)(XT,{query:p.query,closeMenu:f.closeMenu,clearQuery:f.clearQuery,getItems:c,columns:o,gridSuggestionMenuComponent:r||KT,onItemClick:l})})):null}function QT(e){var t=IB(),n=LB(),r=e.items,o=e.loadingState,i=e.selectedIndex,a=e.onItemClick,s="loading-initial"===o||"loading"===o?(0,B.jsx)(t.SuggestionMenu.Loader,{className:"bn-suggestion-menu-loader"}):null,u=(0,d.useMemo)((function(){for(var e,n=[],o=function(){var o=r[s];o.group!==e&&(e=o.group,n.push((0,B.jsx)(t.SuggestionMenu.Label,{className:"bn-suggestion-menu-label",children:e},e))),n.push((0,B.jsx)(t.SuggestionMenu.Item,{className:Iw("bn-suggestion-menu-item","small"===o.size?"bn-suggestion-menu-item-small":""),item:o,id:"bn-suggestion-menu-item-".concat(s),isSelected:s===i,onClick:function(){return null==a?void 0:a(o)}},o.title))},s=0;s<r.length;s++)o();return n}),[t,r,a,i]);return(0,B.jsxs)(t.SuggestionMenu.Root,{id:"bn-suggestion-menu",className:"bn-suggestion-menu",children:[u,0===u.length&&("loading"===e.loadingState||"loaded"===e.loadingState)&&(0,B.jsx)(t.SuggestionMenu.EmptyItem,{className:"bn-suggestion-menu-item",children:n.suggestion_menu.no_items_title}),s]})}function eP(e){var t=OB().setContentEditableProps,n=TB(),r=e.getItems,o=e.suggestionMenuComponent,i=e.query,a=e.clearQuery,s=e.closeMenu,u=e.onItemClick,l=(0,d.useCallback)((function(e){s(),a(),null==u||u(e)}),[u,s,a]),c=JT(i,r),f=c.items,p=c.usedQuery,h=c.loadingState;ZT(f,p,s);var m=function(e,t,n,r,o){var i=function(e,t){var n=AB((0,d.useState)(0),2),r=n[0],o=n[1];return{selectedIndex:r,setSelectedIndex:o,handler:function(n){if("ArrowUp"===n.key)return n.preventDefault(),e.length&&o((r-1+e.length)%e.length),!0;if("ArrowDown"===n.key)return n.preventDefault(),e.length&&o((r+1)%e.length),!0;var i=function(e){return void 0!==e.nativeEvent}(n)?n.nativeEvent.isComposing:n.isComposing;return"Enter"===n.key&&!i&&(n.preventDefault(),n.stopPropagation(),e.length&&(null==t||t(e[r])),!0)}}}(n,r),a=i.selectedIndex,s=i.setSelectedIndex,u=i.handler;return(0,d.useEffect)((function(){var t;return null==(t=o||e.domElement)||t.addEventListener("keydown",u,!0),function(){var t;null==(t=o||e.domElement)||t.removeEventListener("keydown",u,!0)}}),[e.domElement,n,a,r,o,u]),(0,d.useEffect)((function(){s(0)}),[t,s]),{selectedIndex:0===n.length?void 0:a}}(n,i,f,l).selectedIndex;return(0,d.useEffect)((function(){return t((function(e){return EB(EB({},e),{},{"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})})),function(){t((function(e){return EB(EB({},e),{},{"aria-expanded":!1,"aria-controls":void 0})}))}}),[t]),(0,d.useEffect)((function(){return t((function(e){return EB(EB({},e),{},{"aria-activedescendant":m?"bn-suggestion-menu-item-"+m:void 0})})),function(){t((function(e){return EB(EB({},e),{},{"aria-activedescendant":void 0})}))}}),[t,m]),(0,B.jsx)(o,{items:f,onItemClick:l,loadingState:h,selectedIndex:m})}var tP={heading:lO,heading_2:cO,heading_3:dO,quote:CO,numbered_list:yO,bullet_list:bO,check_list:gO,paragraph:kO,table:function(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 10V14H19V10H13ZM11 10H5V14H11V10ZM13 19H19V16H13V19ZM11 19V16H5V19H11ZM13 5V8H19V5H13ZM11 5H5V8H11V5ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3Z"},child:[]}]})(e)},image:EO,video:function(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"},child:[]}]})(e)},audio:SO,file:sO,emoji:function(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM8 13C8 15.2091 9.79086 17 12 17C14.2091 17 16 15.2091 16 13H8ZM8 11C8.82843 11 9.5 10.3284 9.5 9.5C9.5 8.67157 8.82843 8 8 8C7.17157 8 6.5 8.67157 6.5 9.5C6.5 10.3284 7.17157 11 8 11ZM16 11C16.8284 11 17.5 10.3284 17.5 9.5C17.5 8.67157 16.8284 8 16 8C15.1716 8 14.5 8.67157 14.5 9.5C14.5 10.3284 15.1716 11 16 11Z"},child:[]}]})(e)},code_block:function(e){return nO({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3.41436 5.99995L5.70726 3.70706L4.29304 2.29285L0.585938 5.99995L4.29304 9.70706L5.70726 8.29285L3.41436 5.99995ZM9.58594 5.99995L7.29304 3.70706L8.70726 2.29285L12.4144 5.99995L8.70726 9.70706L7.29304 8.29285L9.58594 5.99995ZM14.0002 2.99995H21.0002C21.5524 2.99995 22.0002 3.44767 22.0002 3.99995V20C22.0002 20.5522 21.5524 21 21.0002 21H3.00015C2.44787 21 2.00015 20.5522 2.00015 20V12H4.00015V19H20.0002V4.99995H14.0002V2.99995Z"},child:[]}]})(e)}};function nP(e){return function(e){var t=[];return uE("heading",e)&&t.push(bw({onItemClick:function(){mE(e,{type:"heading",props:{level:1}})},badge:jw("Mod-Alt-1"),key:"heading"},e.dictionary.slash_menu.heading),bw({onItemClick:function(){mE(e,{type:"heading",props:{level:2}})},badge:jw("Mod-Alt-2"),key:"heading_2"},e.dictionary.slash_menu.heading_2),bw({onItemClick:function(){mE(e,{type:"heading",props:{level:3}})},badge:jw("Mod-Alt-3"),key:"heading_3"},e.dictionary.slash_menu.heading_3)),uE("quote",e)&&t.push(bw({onItemClick:function(){mE(e,{type:"quote"})},key:"quote"},e.dictionary.slash_menu.quote)),uE("numberedListItem",e)&&t.push(bw({onItemClick:function(){mE(e,{type:"numberedListItem"})},badge:jw("Mod-Shift-7"),key:"numbered_list"},e.dictionary.slash_menu.numbered_list)),uE("bulletListItem",e)&&t.push(bw({onItemClick:function(){mE(e,{type:"bulletListItem"})},badge:jw("Mod-Shift-8"),key:"bullet_list"},e.dictionary.slash_menu.bullet_list)),uE("checkListItem",e)&&t.push(bw({onItemClick:function(){mE(e,{type:"checkListItem"})},badge:jw("Mod-Shift-9"),key:"check_list"},e.dictionary.slash_menu.check_list)),uE("paragraph",e)&&t.push(bw({onItemClick:function(){mE(e,{type:"paragraph"})},badge:jw("Mod-Alt-0"),key:"paragraph"},e.dictionary.slash_menu.paragraph)),uE("codeBlock",e)&&t.push(bw({onItemClick:function(){mE(e,{type:"codeBlock"})},badge:jw("Mod-Alt-c"),key:"code_block"},e.dictionary.slash_menu.code_block)),uE("table",e)&&t.push(bw({onItemClick:function(){mE(e,{type:"table",content:{type:"tableContent",rows:[{cells:["","",""]},{cells:["","",""]}]}})},badge:void 0,key:"table"},e.dictionary.slash_menu.table)),uE("image",e)&&t.push(bw({onItemClick:function(){var t=mE(e,{type:"image"});e.transact((function(n){return n.setMeta(e.filePanel.plugins[0],{block:t})}))},key:"image"},e.dictionary.slash_menu.image)),uE("video",e)&&t.push(bw({onItemClick:function(){var t=mE(e,{type:"video"});e.transact((function(n){return n.setMeta(e.filePanel.plugins[0],{block:t})}))},key:"video"},e.dictionary.slash_menu.video)),uE("audio",e)&&t.push(bw({onItemClick:function(){var t=mE(e,{type:"audio"});e.transact((function(n){return n.setMeta(e.filePanel.plugins[0],{block:t})}))},key:"audio"},e.dictionary.slash_menu.audio)),uE("file",e)&&t.push(bw({onItemClick:function(){var t=mE(e,{type:"file"});e.transact((function(n){return n.setMeta(e.filePanel.plugins[0],{block:t})}))},key:"file"},e.dictionary.slash_menu.file)),t.push(bw({onItemClick:function(){e.openSuggestionMenu(":",{deleteTriggerCharacter:!0,ignoreQueryLength:!0})},key:"emoji"},e.dictionary.slash_menu.emoji)),t}(e).map((function(e){var t=tP[e.key];return EB(EB({},e),{},{icon:(0,B.jsx)(t,{size:18})})}))}function rP(e){var t=TB(),n=e.triggerCharacter,r=e.suggestionMenuComponent,o=e.minQueryLength,i=e.onItemClick,a=e.getItems,s=e.floatingOptions,u=(0,d.useMemo)((function(){return i||function(e){e.onItemClick(t)}}),[t,i]),l=(0,d.useMemo)((function(){return a||function(){var e=wB(bB().mark((function e(n){return bB().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vE(nP(t),n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),[t,a]),c={closeMenu:t.suggestionMenus.closeMenu,clearQuery:t.suggestionMenus.clearQuery},f=_B((0,d.useCallback)((function(e){return t.suggestionMenus.onUpdate(n,e)}),[t.suggestionMenus,n])),p=NB((null==f?void 0:f.show)||!1,(null==f?void 0:f.referencePos)||null,2e3,EB({placement:"bottom-start",middleware:[IS(10),HS({mainAxis:!0,crossAxis:!1}),RS(),VS({apply:function(e){var t=e.availableHeight,n=e.elements;Object.assign(n.floating.style,{maxHeight:"".concat(t-10,"px")})}})],onOpenChange:function(e){e||t.suggestionMenus.closeMenu()}},s)),h=p.isMounted,m=p.ref,v=p.style,g=p.getFloatingProps;return h&&f&&(null!=f&&f.ignoreQueryLength||!o||!(f.query.startsWith(" ")||f.query.length<o))?(0,B.jsx)("div",EB(EB({ref:m,style:v},g()),{},{children:(0,B.jsx)(eP,{query:f.query,closeMenu:c.closeMenu,clearQuery:c.clearQuery,getItems:l,suggestionMenuComponent:r||QT,onItemClick:u})})):null}var oP=function(e){var t=IB(),n=(0,d.useRef)(!1),r=AB((0,d.useState)(),2),o=r[0],i=r[1],a=(0,d.useCallback)((function(t){e.onMouseDown(),i({originalContent:e.block.content,originalCroppedContent:{rows:e.editor.tableHandles.cropEmptyRowsOrColumns(e.block,"addOrRemoveColumns"===e.orientation?"columns":"rows")},startPos:"addOrRemoveColumns"===e.orientation?t.clientX:t.clientY}),n.current=!1,t.preventDefault()}),[e]),s=(0,d.useCallback)((function(){n.current||e.editor.updateBlock(e.block,{type:"table",content:EB(EB({},e.block.content),{},{rows:"addOrRemoveColumns"===e.orientation?e.editor.tableHandles.addRowsOrColumns(e.block,"columns",1):e.editor.tableHandles.addRowsOrColumns(e.block,"rows",1)})})}),[e.block,e.orientation,e.editor]);return(0,d.useEffect)((function(){var t=function(t){var r,i,a,s;if(!o)throw new Error("editingState is undefined");n.current=!0;var u=("addOrRemoveColumns"===e.orientation?t.clientX:t.clientY)-o.startPos,l="addOrRemoveColumns"===e.orientation?null!==(r=null==(a=o.originalCroppedContent.rows[0])?void 0:a.cells.length)&&void 0!==r?r:0:o.originalCroppedContent.rows.length,c="addOrRemoveColumns"===e.orientation?null!==(i=null==(s=o.originalContent.rows[0])?void 0:s.cells.length)&&void 0!==i?i:0:o.originalContent.rows.length,d="addOrRemoveColumns"===e.orientation?e.block.content.rows[0].cells.length:e.block.content.rows.length,f=c+function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,n=Math.floor(e)+t,r=Math.ceil(e)-t;return e>=n&&e<=r?Math.round(e):e<n?Math.floor(e):Math.ceil(e)}(u/("addOrRemoveColumns"===e.orientation?120:31),.3);f>=l&&f>0&&f!==d&&(e.editor.updateBlock(e.block,{type:"table",content:EB(EB({},e.block.content),{},{rows:"addOrRemoveColumns"===e.orientation?e.editor.tableHandles.addRowsOrColumns({type:"table",content:o.originalCroppedContent},"columns",f-l):e.editor.tableHandles.addRowsOrColumns({type:"table",content:o.originalCroppedContent},"rows",f-l)})}),e.block.content&&e.editor.setTextCursorPosition(e.block))};return o&&window.addEventListener("mousemove",t),function(){window.removeEventListener("mousemove",t)}}),[o,e.block,e.editor,e.orientation]),(0,d.useEffect)((function(){var t=e.onMouseUp,n=function(){i(void 0),t()};return o&&window.addEventListener("mouseup",n),function(){window.removeEventListener("mouseup",n)}}),[o,e.onMouseUp]),(0,B.jsx)(t.TableHandle.ExtendButton,{className:Iw("bn-extend-button","addOrRemoveColumns"===e.orientation?"bn-extend-button-add-remove-columns":"bn-extend-button-add-remove-rows",null!==o?"bn-extend-button-editing":""),onClick:s,onMouseDown:a,children:e.children||(0,B.jsx)(MO,{size:18,"data-test":"extendButton"})})},iP=function(e){var t=IB(),n=LB(),r=TB().tableHandles;return r?(0,B.jsx)(t.Generic.Menu.Item,{onClick:function(){r.addRowOrColumn(e.index,"row"===e.orientation?{orientation:"row",side:e.side}:{orientation:"column",side:e.side})},children:n.table_handle["add_".concat(e.side,"_menuitem")]}):null},aP=function(e){var t=IB(),n=LB(),r=TB().tableHandles;return r?(0,B.jsx)(t.Generic.Menu.Item,{onClick:function(){r.removeRowOrColumn(e.index,e.orientation)},children:"row"===e.orientation?n.table_handle.delete_row_menuitem:n.table_handle.delete_column_menuitem}):null},sP=function(e){var t=IB(),n=LB(),r=TB(),o=r.tableHandles,i=(0,d.useMemo)((function(){return o&&e.block?"row"===e.orientation?o.getCellsAtRowHandle(e.block,e.index):o.getCellsAtColumnHandle(e.block,e.index):[]}),[e.block,e.index,e.orientation,o]),a=function(t,n){var o=e.block.content.rows.map((function(e){return EB(EB({},e),{},{cells:e.cells.map((function(e){return Mw(e)}))})}));i.forEach((function(e){var r=e.row,i=e.col;"text"===n?o[r].cells[i].props.textColor=t:o[r].cells[i].props.backgroundColor=t})),r.updateBlock(e.block,{type:"table",content:EB(EB({},e.block.content),{},{rows:o})}),r.setTextCursorPosition(e.block)};if(!i||!i[0]||!o||!1===r.settings.tables.cellTextColor&&!1===r.settings.tables.cellBackgroundColor)return null;var s=Mw(i[0].cell);return(0,B.jsxs)(t.Generic.Menu.Root,{position:"right",sub:!0,children:[(0,B.jsx)(t.Generic.Menu.Trigger,{sub:!0,children:(0,B.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children||n.drag_handle.colors_menuitem})}),(0,B.jsx)(t.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:(0,B.jsx)(oT,{iconSize:18,text:r.settings.tables.cellTextColor?{color:i.every((function(e){var t=e.cell;return Ow(t)&&t.props.textColor===s.props.textColor}))?s.props.textColor:"default",setColor:function(e){a(e,"text")}}:void 0,background:r.settings.tables.cellBackgroundColor?{color:i.every((function(e){var t=e.cell;return Ow(t)&&t.props.backgroundColor===s.props.backgroundColor}))?s.props.backgroundColor:"default",setColor:function(e){return a(e,"background")}}:void 0})})]})},uP=function(e){var t=IB(),n=LB(),r=TB();if(!r.tableHandles||0!==e.index||"row"!==e.orientation||!r.settings.tables.headers)return null;var o=!!e.block.content.headerRows;return(0,B.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:function(){var t=r.getBlock(e.block.id);t&&r.updateBlock(t,EB(EB({},t),{},{content:EB(EB({},t.content),{},{headerRows:o?void 0:1})}))},children:n.drag_handle.header_row_menuitem})},lP=function(e){var t=IB(),n=LB(),r=TB();if(!r.tableHandles||0!==e.index||"column"!==e.orientation||!r.settings.tables.headers)return null;var o=!!e.block.content.headerCols;return(0,B.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:function(){var t=r.getBlock(e.block.id);t&&r.updateBlock(t,EB(EB({},t),{},{content:EB(EB({},t.content),{},{headerCols:o?void 0:1})}))},children:n.drag_handle.header_column_menuitem})},cP=function(e){var t=IB();return(0,B.jsx)(t.Generic.Menu.Dropdown,{className:"bn-table-handle-menu",children:e.children||(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(aP,{orientation:e.orientation,block:e.block,index:e.index}),(0,B.jsx)(iP,{orientation:e.orientation,block:e.block,index:e.index,side:"row"===e.orientation?"above":"left"}),(0,B.jsx)(iP,{orientation:e.orientation,block:e.block,index:e.index,side:"row"===e.orientation?"below":"right"}),(0,B.jsx)(uP,{orientation:e.orientation,block:e.block,index:e.index}),(0,B.jsx)(lP,{orientation:e.orientation,block:e.block,index:e.index}),(0,B.jsx)(sP,{orientation:e.orientation,block:e.block,index:e.index})]})})},dP=function(e){var t=IB(),n=AB((0,d.useState)(!1),2),r=n[0],o=n[1],i=e.tableHandleMenu||cP,a=(0,d.useMemo)((function(){var t=e.editor.tableHandles;return!(!t||!e.block||"table"!==e.block.type)&&("column"===e.orientation?t.getCellsAtColumnHandle(e.block,e.index).every((function(e){return 1===Tw(e.cell)})):t.getCellsAtRowHandle(e.block,e.index).every((function(e){return 1===Pw(e.cell)})))}),[e.block,e.editor.tableHandles,e.index,e.orientation]);return(0,B.jsxs)(t.Generic.Menu.Root,{onOpenChange:function(t){t?(e.freezeHandles(),e.hideOtherSide()):(e.unfreezeHandles(),e.showOtherSide(),e.editor.focus())},position:"right",children:[(0,B.jsx)(t.Generic.Menu.Trigger,{children:(0,B.jsx)(t.TableHandle.Root,{className:Iw("bn-table-handle",r?"bn-table-handle-dragging":"",a?"":"bn-table-handle-not-draggable"),draggable:a,onDragStart:function(t){o(!0),e.dragStart(t)},onDragEnd:function(){e.dragEnd(),o(!1)},style:"column"===e.orientation?{transform:"rotate(0.25turn)"}:void 0,children:e.children||(0,B.jsx)(jT,{size:24,"data-test":"tableHandle"})})}),(0,RF.createPortal)((0,B.jsx)(i,{orientation:e.orientation,block:e.block,index:e.index}),e.menuContainer)]})};function fP(e,t,n){var r=MM({open:t,placement:"addOrRemoveColumns"===e?"right":"bottom",middleware:[VS({apply:function(t){var n=t.rects,r=t.elements;Object.assign(r.floating.style,"addOrRemoveColumns"===e?{height:"".concat(n.reference.height,"px")}:{width:"".concat(n.reference.width,"px")})}})]}),o=r.refs,i=r.update,a=r.context,s=r.floatingStyles,u=LM(a),l=u.isMounted,c=u.styles;return(0,d.useEffect)((function(){i()}),[n,i]),(0,d.useEffect)((function(){null!==n&&o.setReference({getBoundingClientRect:function(){return n}})}),[e,n,o]),(0,d.useMemo)((function(){return{isMounted:l,ref:o.setFloating,style:EB(EB({display:"flex"},c),s)}}),[s,l,o.setFloating,c])}function pP(e,t,n){return n&&"row"===n.draggedCellOrientation?new DOMRect(t.x,n.mousePos,t.width,0):new DOMRect(t.x,e.y,t.width,e.height)}function hP(e,t,n){return n&&"col"===n.draggedCellOrientation?new DOMRect(n.mousePos,t.y,0,t.height):new DOMRect(e.x,t.y,e.width,t.height)}function mP(e){return new DOMRect(e.x,e.y,e.width,0)}function vP(e,t,n,r,o){var i=MM({open:t,placement:"row"===e?"left":"col"===e?"top":"bottom-end",middleware:[IS("row"===e?-10:"col"===e?-12:{mainAxis:1,crossAxis:-1})]}),a=i.refs,s=i.update,u=i.context,l=i.floatingStyles,c=LM(u),f=c.isMounted,p=c.styles;return(0,d.useEffect)((function(){s()}),[n,r,s]),(0,d.useEffect)((function(){null===n||null===r||o&&"cell"===e||a.setReference({getBoundingClientRect:function(){return("row"===e?pP:"col"===e?hP:mP)(n,r,o)}})}),[o,e,n,r,a]),(0,d.useMemo)((function(){return{isMounted:f,ref:a.setFloating,style:EB(EB({display:"flex"},p),l)}}),[l,f,a.setFloating,p])}var gP=function(e){var t,n,r=IB(),o=LB(),i=TB(),a=function(t,n){var r=e.block.content.rows.map((function(e){return EB(EB({},e),{},{cells:e.cells.map((function(e){return Mw(e)}))})}));"text"===n?r[e.rowIndex].cells[e.colIndex].props.textColor=t:r[e.rowIndex].cells[e.colIndex].props.backgroundColor=t,i.updateBlock(e.block,{type:"table",content:EB(EB({},e.block.content),{},{rows:r})}),i.setTextCursorPosition(e.block)},s=null==(n=null==(t=e.block.content.rows[e.rowIndex])?void 0:t.cells)?void 0:n[e.colIndex];return!s||!1===i.settings.tables.cellTextColor&&!1===i.settings.tables.cellBackgroundColor?null:(0,B.jsxs)(r.Generic.Menu.Root,{position:"right",sub:!0,children:[(0,B.jsx)(r.Generic.Menu.Trigger,{sub:!0,children:(0,B.jsx)(r.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children||o.drag_handle.colors_menuitem})}),(0,B.jsx)(r.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:(0,B.jsx)(oT,{iconSize:18,text:i.settings.tables.cellTextColor?{color:Ow(s)?s.props.textColor:"default",setColor:function(e){return a(e,"text")}}:void 0,background:i.settings.tables.cellBackgroundColor?{color:Ow(s)?s.props.backgroundColor:"default",setColor:function(e){return a(e,"background")}}:void 0})})]})},yP=function(e){var t,n,r=IB(),o=LB(),i=TB(),a=null==(n=null==(t=e.block.content.rows[e.rowIndex])?void 0:t.cells)?void 0:n[e.colIndex];return a&&Ow(a)&&(1!==Pw(a)||1!==Tw(a))&&i.settings.tables.splitCells?(0,B.jsx)(r.Generic.Menu.Item,{onClick:function(){var t;null==(t=i.tableHandles)||t.splitCell({row:e.rowIndex,col:e.colIndex})},children:o.table_handle.split_cell_menuitem}):null},bP=function(e){var t=IB();return(0,B.jsx)(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:e.children||(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(yP,{block:e.block,rowIndex:e.rowIndex,colIndex:e.colIndex}),(0,B.jsx)(gP,{block:e.block,rowIndex:e.rowIndex,colIndex:e.colIndex})]})})},DP=function(e){var t=IB(),n=e.tableCellMenu||bP;return e.editor.settings.tables.splitCells||e.editor.settings.tables.cellBackgroundColor||e.editor.settings.tables.cellTextColor?(0,B.jsxs)(t.Generic.Menu.Root,{onOpenChange:function(t){t?e.freezeHandles():(e.unfreezeHandles(),e.editor.focus())},position:"right",children:[(0,B.jsx)(t.Generic.Menu.Trigger,{children:(0,B.jsx)(t.Generic.Menu.Button,{className:"bn-table-cell-handle",children:e.children||(0,B.jsx)(IT,{size:12,"data-test":"tableCellHandle"})})}),(0,RF.createPortal)((0,B.jsx)(n,{block:e.block,rowIndex:e.rowIndex,colIndex:e.colIndex}),e.menuContainer)]}):null},wP=function(e){var t,n,r=TB(),o=AB((0,d.useState)(null),2),i=o[0],a=o[1];if(!r.tableHandles)throw new Error("TableHandlesController can only be used when BlockNote editor schema contains table block");var s={rowDragStart:r.tableHandles.rowDragStart,colDragStart:r.tableHandles.colDragStart,dragEnd:r.tableHandles.dragEnd,freezeHandles:r.tableHandles.freezeHandles,unfreezeHandles:r.tableHandles.unfreezeHandles},u=s.freezeHandles,l=s.unfreezeHandles,c=(0,d.useCallback)((function(){u(),F(!0),E(!0)}),[u]),f=(0,d.useCallback)((function(){l(),F(!1),E(!1)}),[l]),p=_B(r.tableHandles.onUpdate.bind(r.tableHandles)),h=(0,d.useMemo)((function(){var e,t;return null!=p&&p.draggingState?{draggedCellOrientation:null==(e=null==p?void 0:p.draggingState)?void 0:e.draggedCellOrientation,mousePos:null==(t=null==p?void 0:p.draggingState)?void 0:t.mousePos}:void 0}),[null==p?void 0:p.draggingState,null==(t=null==p?void 0:p.draggingState)?void 0:t.draggedCellOrientation,null==(n=null==p?void 0:p.draggingState)?void 0:n.mousePos]),m=function(e,t,n,r){var o=vP("row",e,t,n,r),i=vP("col",e,t,n,r),a=vP("cell",e,t,n,r);return(0,d.useMemo)((function(){return{rowHandle:o,colHandle:i,cellHandle:a}}),[i,o,a])}((null==p?void 0:p.show)||!1,(null==p?void 0:p.referencePosCell)||null,(null==p?void 0:p.referencePosTable)||null,h),v=m.rowHandle,g=m.colHandle,y=m.cellHandle,b=function(e,t,n){var r=fP("addOrRemoveRows",t,n),o=fP("addOrRemoveColumns",e,n);return(0,d.useMemo)((function(){return{addOrRemoveRowsButton:r,addOrRemoveColumnsButton:o}}),[o,r])}((null==p?void 0:p.showAddOrRemoveColumnsButton)||!1,(null==p?void 0:p.showAddOrRemoveRowsButton)||!1,(null==p?void 0:p.referencePosTable)||null),D=b.addOrRemoveColumnsButton,w=b.addOrRemoveRowsButton,C=AB((0,d.useState)(!1),2),k=C[0],E=C[1],x=AB((0,d.useState)(!1),2),A=x[0],F=x[1];if(!p)return null;var S=e.tableHandle||dP,M=e.extendButton||oP,O=e.tableCellHandle||DP;return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{ref:a}),(0,B.jsxs)(CM,{root:p.widgetContainer,children:[!k&&i&&v.isMounted&&void 0!==p.rowIndex&&(0,B.jsx)("div",{ref:v.ref,style:v.style,children:(0,B.jsx)(S,{editor:r,orientation:"row",showOtherSide:function(){return F(!1)},hideOtherSide:function(){return F(!0)},index:p.rowIndex,block:p.block,dragStart:s.rowDragStart,dragEnd:s.dragEnd,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles,menuContainer:i})}),!A&&i&&g.isMounted&&void 0!==p.colIndex&&(0,B.jsx)("div",{ref:g.ref,style:g.style,children:(0,B.jsx)(S,{editor:r,orientation:"column",showOtherSide:function(){return E(!1)},hideOtherSide:function(){return E(!0)},index:p.colIndex,block:p.block,dragStart:s.colDragStart,dragEnd:s.dragEnd,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles,menuContainer:i})}),i&&y.isMounted&&void 0!==p.colIndex&&void 0!==p.rowIndex&&(0,B.jsx)("div",{ref:y.ref,style:y.style,children:(0,B.jsx)(O,{editor:r,block:p.block,rowIndex:p.rowIndex,colIndex:p.colIndex,menuContainer:i,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles})}),(0,B.jsx)("div",{ref:w.ref,style:w.style,children:(0,B.jsx)(M,{editor:r,orientation:"addOrRemoveRows",block:p.block,onMouseDown:c,onMouseUp:f})}),(0,B.jsx)("div",{ref:D.ref,style:D.style,children:(0,B.jsx)(M,{editor:r,orientation:"addOrRemoveColumns",block:p.block,onMouseDown:c,onMouseUp:f})})]})]})};function CP(e){var t=TB();if(!t)throw new Error("BlockNoteDefaultUI must be used within a BlockNoteContext.Provider");return(0,B.jsxs)(B.Fragment,{children:[!1!==e.formattingToolbar&&(0,B.jsx)(ST,{}),!1!==e.linkToolbar&&(0,B.jsx)(PT,{}),!1!==e.slashMenu&&(0,B.jsx)(rP,{triggerCharacter:"/"}),!1!==e.emojiPicker&&(0,B.jsx)(YT,{triggerCharacter:":",columns:10,minQueryLength:2}),!1!==e.sideMenu&&(0,B.jsx)(GT,{}),t.filePanel&&!1!==e.filePanel&&(0,B.jsx)(JO,{}),t.tableHandles&&!1!==e.tableHandles&&(0,B.jsx)(wP,{}),t.comments&&!1!==e.comments&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(qB,{}),(0,B.jsx)(WO,{})]})]})}var kP=function(){var e=(0,d.useMemo)((function(){var e;return null==(e=window.matchMedia)?void 0:e.call(window,"(prefers-color-scheme: dark)")}),[]),t=(0,d.useMemo)((function(){var e;return null==(e=window.matchMedia)?void 0:e.call(window,"(prefers-color-scheme: light)")}),[]),n=null==e?void 0:e.matches,r=null==t?void 0:t.matches,o=AB((0,d.useState)(n?"dark":r?"light":"no-preference"),2),i=o[0],a=o[1];return(0,d.useEffect)((function(){a(n?"dark":r?"light":"no-preference")}),[n,r]),(0,d.useEffect)((function(){if("function"==typeof(null==e?void 0:e.addEventListener)){var n=function(e){return e.matches&&a("dark")},r=function(e){return e.matches&&a("light")};return null==e||e.addEventListener("change",n),null==t||t.addEventListener("change",r),function(){null==e||e.removeEventListener("change",n),null==t||t.removeEventListener("change",r)}}var o=function(){return a(e.matches?"dark":t.matches?"light":"no-preference")};return null==e||e.addEventListener("change",o),null==t||t.addEventListener("change",o),function(){null==e||e.removeEventListener("change",o),null==t||t.removeEventListener("change",o)}}),[e,t]),window.matchMedia,i},EP=(0,d.createContext)(void 0),xP=function(e){var t=e.contentComponent,n=(0,d.useSyncExternalStore)(t.subscribe,t.getSnapshot,t.getServerSnapshot);return(0,B.jsx)(B.Fragment,{children:Object.values(n)})},AP=(0,d.forwardRef)((function(e,t){var n=AB((0,d.useState)(),2),r=n[0],o=n[1];return(0,d.useImperativeHandle)(t,(function(){return function(e,t){(0,RF.flushSync)((function(){o({node:e,container:t})})),o(void 0)}}),[]),(0,B.jsx)(B.Fragment,{children:r&&(0,RF.createPortal)(r.node,r.container)})})),FP=function(){};function SP(e,t){var n=e.editor,r=e.className,o=e.theme,i=e.children,a=e.editable,s=e.onSelectionChange,u=e.onChange,l=e.formattingToolbar,c=e.linkToolbar,f=e.slashMenu,p=e.emojiPicker,h=e.sideMenu,m=e.filePanel,v=e.tableHandles,g=e.comments,y=e.autoFocus,b=e.renderEditor,D=void 0===b?!n.headless:b,w=CB(e,vB),C=AB((0,d.useState)(),2),k=C[0],E=C[1],x=OB(),A=kP(),F=(null==x?void 0:x.colorSchemePreference)||A,S=o||("dark"===F?"dark":"light");HB(u||FP,n),PB(s||FP,n),(0,d.useEffect)((function(){n.isEditable=!1!==a}),[a,n]);var M=(0,d.useCallback)((function(e){n.elementRenderer=e}),[n]),O=(0,d.useMemo)((function(){return EB(EB({},x),{},{editor:n,setContentEditableProps:E})}),[x,n]),T={formattingToolbar:l,linkToolbar:c,slashMenu:f,emojiPicker:p,sideMenu:h,filePanel:m,tableHandles:v,comments:g},P={autoFocus:y,contentEditableProps:k};return(0,B.jsx)(BB.Provider,{value:O,children:(0,B.jsxs)(EP.Provider,{value:{editorProps:P,defaultUIProps:T},children:[(0,B.jsx)(AP,{ref:M}),(0,B.jsx)(MP,EB(EB({className:r,renderEditor:D,editorColorScheme:S,ref:t},w),{},{children:i}))]})})}var MP=d.forwardRef((function(e,t){var n=e.className,r=e.renderEditor,o=e.editorColorScheme,i=e.children,a=CB(e,gB);return(0,B.jsx)("div",EB(EB({className:Iw("bn-container",o,n),"data-color-scheme":o},a),{},{ref:t,children:r?(0,B.jsx)(OP,{children:i}):i}))})),BP=d.forwardRef(SP),OP=function(e){var t=(0,d.useContext)(EP),n=TB(),r=(0,d.useMemo)((function(){return function(){var e=new Set,t={};return{subscribe:function(t){return e.add(t),function(){e.delete(t)}},getSnapshot:function(){return t},getServerSnapshot:function(){return t},setRenderer:function(n,r){t=EB(EB({},t),{},xB({},n,(0,RF.createPortal)(r.reactElement,r.element,n))),e.forEach((function(e){return e()}))},removeRenderer:function(n){var r=EB({},t);delete r[n],t=r,e.forEach((function(e){return e()}))}}}()}),[]),o=(0,d.useCallback)((function(e){n.mount(e,r)}),[n,r]);return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(xP,{contentComponent:r}),(0,B.jsx)(TP,EB(EB(EB({},t.editorProps),e),{},{mount:o})),(0,B.jsx)(CP,EB({},t.defaultUIProps)),e.children]})},TP=function(e){var t=e.autoFocus,n=e.mount,r=e.contentEditableProps;return(0,B.jsx)("div",EB({"aria-autocomplete":"list","aria-haspopup":"listbox","data-bn-autofocus":t,ref:n},r))};function PP(e,t){var n,r,o=document.createElement("div");if(null!=t&&t.elementRenderer)t.elementRenderer(e((function(e){return n=e||void 0})),o);else{if(null==t||!t.headless)throw new Error("elementRenderer not available, expected headless editor");r=(0,fB.H)(o),(0,RF.flushSync)((function(){r.render(e((function(e){return n=e||void 0})))}))}if(!o.childElementCount)return console.warn("ReactInlineContentSpec: renderHTML() failed"),{dom:document.createElement("span")};null==n||n.setAttribute("data-tmp-find","true");var i=o.cloneNode(!0),a=i.firstElementChild,s=i.querySelector("[data-tmp-find]");return null==s||s.removeAttribute("data-tmp-find"),null==r||r.unmount(),{dom:a,contentDOM:s||void 0}}function NP(e){var t;return(0,B.jsx)(uB,EB(EB(EB({onDragOver:function(e){return e.preventDefault()}},Object.fromEntries(Object.entries(e.domAttributes||{}).filter((function(e){return"class"!==AB(e,1)[0]})))),{},{className:Iw("bn-block-content",(null==(t=e.domAttributes)?void 0:t.class)||""),"data-content-type":e.blockType},Object.fromEntries(Object.entries(e.blockProps).filter((function(t){var n=AB(t,2),r=n[0],o=n[1],i=e.propSchema[r];return!zw.includes(r)&&o!==i.default})).map((function(e){var t=AB(e,2),n=t[0],r=t[1];return[$w(n),r]})))),{},{"data-file-block":!0===e.isFileBlock||void 0,children:e.children}))}function _P(e,t){var n,r=Kw({name:e.type,content:"inline"===e.content?"inline*":"",group:"blockContent",selectable:null===(n=e.isSelectable)||void 0===n||n,isolating:!0,addAttributes:function(){return Gw(e.propSchema)},parseHTML:function(){return Qw(e,t.parse)},renderHTML:function(t){var n=t.HTMLAttributes,r=document.createElement("div");return qw({dom:r,contentDOM:"inline"===e.content?r:void 0},e.type,{},e.propSchema,e.isFileBlock,n)},addNodeView:function(){var n=this;return function(r){var o=dB((function(r){var o,i=n.options.editor,a=Ww(r.getPos,i,n.editor,e.type),s=(null==(o=n.options.domAttributes)?void 0:o.blockContent)||{},u=sB().nodeViewContentRef;if(!u)throw new Error("nodeViewContentRef is not set");var l=t.render;return(0,B.jsx)(NP,{blockType:a.type,blockProps:a.props,propSchema:e.propSchema,isFileBlock:e.isFileBlock,domAttributes:s,children:(0,B.jsx)(l,{block:a,editor:i,contentRef:function(e){u(e),e&&(e.className=Iw("bn-inline-content",e.className))}})})}),{className:"bn-react-node-view-renderer"})(r);return!1===e.isSelectable&&Yw(o,n.editor),o}}});return Zw(e,{node:r,toInternalHTML:function(n,o){var i,a=(null==(i=r.options.domAttributes)?void 0:i.blockContent)||{},s=t.render;return PP((function(t){return(0,B.jsx)(NP,{blockType:n.type,blockProps:n.props,propSchema:e.propSchema,domAttributes:a,children:(0,B.jsx)(s,{block:n,editor:o,contentRef:function(e){t(e),e&&(e.className=Iw("bn-inline-content",e.className))}})})}),o)},toExternalHTML:function(n,o){var i,a=(null==(i=r.options.domAttributes)?void 0:i.blockContent)||{},s=t.toExternalHTML||t.render;return PP((function(t){return(0,B.jsx)(NP,{blockType:n.type,blockProps:n.props,propSchema:e.propSchema,domAttributes:a,children:(0,B.jsx)(s,{block:n,editor:o,contentRef:function(e){t(e),e&&(e.className=Iw("bn-inline-content",e.className))}})})}),o)}})}function jP(e){var t=TB(),n=AB((0,d.useState)("loading"),2),r=n[0],o=n[1],i=AB((0,d.useState)(),2),a=i[0],s=i[1];if((0,d.useEffect)((function(){var n=!0;return wB(bB().mark((function r(){var i;return bB().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i="",o("loading"),r.prev=2,!t.resolveFileUrl){r.next=9;break}return r.next=6,t.resolveFileUrl(e);case 6:r.t0=r.sent,r.next=10;break;case 9:r.t0=e;case 10:i=r.t0,r.next=17;break;case 13:return r.prev=13,r.t1=r.catch(2),o("error"),r.abrupt("return");case 17:n&&(o("loaded"),s(i));case 18:case"end":return r.stop()}}),r,null,[[2,13]])})))(),function(){n=!1}}),[t,e]),"loaded"!==r)return{loadingState:r};if(!a)throw new Error("Finished fetching file but did not get download URL.");return{loadingState:r,downloadUrl:a}}var IP=function(e){return(0,B.jsxs)("figure",{children:[e.children,(0,B.jsx)("figcaption",{children:e.caption})]})};function RP(e){var t=AB((0,d.useState)(!1),2),n=t[0],r=t[1];return function(e){var t=TB();(0,d.useEffect)((function(){return t.onUploadStart(e)}),[e,t])}((function(t){t===e&&r(!0)})),function(e){var t=TB();(0,d.useEffect)((function(){return t.onUploadEnd(e)}),[e,t])}((function(t){t===e&&r(!1)})),n}var LP=function(e){var t=LB(),n=(0,d.useCallback)((function(e){e.preventDefault()}),[]),r=(0,d.useCallback)((function(){e.editor.transact((function(t){return t.setMeta(e.editor.filePanel.plugins[0],{block:e.block})}))}),[e.block,e.editor]);return(0,B.jsxs)("div",{className:"bn-add-file-button",onMouseDown:n,onClick:r,children:[(0,B.jsx)("div",{className:"bn-add-file-button-icon",children:e.buttonIcon||(0,B.jsx)(sO,{size:24})}),(0,B.jsx)("div",{className:"bn-add-file-button-text",children:e.buttonText||t.file_blocks.file.add_button_text})]})},HP=function(e){return(0,B.jsxs)("div",{className:"bn-file-name-with-icon",contentEditable:!1,draggable:!1,children:[(0,B.jsx)("div",{className:"bn-file-icon",children:(0,B.jsx)(sO,{size:24})}),(0,B.jsx)("p",{className:"bn-file-name",children:e.block.props.name})]})},VP=function(e){var t=RP(e.block.id);return(0,B.jsx)("div",{className:"bn-file-block-content-wrapper",onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,style:e.style,children:t?(0,B.jsx)("div",{className:"bn-file-loading-preview",children:"Loading..."}):""===e.block.props.url?(0,B.jsx)(LP,EB({},e)):(0,B.jsxs)(B.Fragment,{children:[!1!==e.block.props.showPreview&&e.children?e.children:(0,B.jsx)(HP,EB({},e)),e.block.props.caption&&(0,B.jsx)("p",{className:"bn-file-caption",children:e.block.props.caption})]})})},zP=function(e){return(0,B.jsxs)("div",{children:[e.children,(0,B.jsx)("p",{children:e.caption})]})},$P=function(e){var t=jP(e.block.props.url);return(0,B.jsx)("audio",{className:"bn-audio",src:"loading"===t.loadingState?e.block.props.url:t.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},UP=(_P(ik,{render:function(e){return(0,B.jsx)(VP,EB(EB({},e),{},{buttonText:e.editor.dictionary.file_blocks.audio.add_button_text,buttonIcon:(0,B.jsx)(SO,{size:24}),children:(0,B.jsx)($P,EB({},e))}))},parse:ak,toExternalHTML:function(e){if(!e.block.props.url)return(0,B.jsx)("p",{children:"Add audio"});var t=e.block.props.showPreview?(0,B.jsx)("audio",{src:e.block.props.url}):(0,B.jsx)("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?e.block.props.showPreview?(0,B.jsx)(IP,{caption:e.block.props.caption,children:t}):(0,B.jsx)(zP,{caption:e.block.props.caption,children:t}):t}}),_P(vk,{render:function(e){return(0,B.jsx)(VP,EB({},e))},parse:gk,toExternalHTML:function(e){if(!e.block.props.url)return(0,B.jsx)("p",{children:"Add file"});var t=(0,B.jsx)("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?(0,B.jsx)(zP,{caption:e.block.props.caption,children:t}):t}}),function(e){var t=AB((0,d.useState)(void 0),2),n=t[0],r=t[1],o=AB((0,d.useState)(e.block.props.previewWidth),2),i=o[0],a=o[1],s=AB((0,d.useState)(!1),2),u=s[0],l=s[1],c=(0,d.useRef)(null);(0,d.useEffect)((function(){var t=function(t){var r,o,i;i="center"===e.block.props.textAlignment?"left"===n.handleUsed?n.initialWidth+2*(n.initialClientX-t.clientX):n.initialWidth+2*(t.clientX-n.initialClientX):"left"===n.handleUsed?n.initialWidth+n.initialClientX-t.clientX:n.initialWidth+t.clientX-n.initialClientX,a(Math.min(Math.max(i,64),(null==(o=null==(r=e.editor.domElement)?void 0:r.firstElementChild)?void 0:o.clientWidth)||Number.MAX_VALUE))},o=function(){r(void 0),e.editor.updateBlock(e.block,{props:{previewWidth:i}})};return n&&(window.addEventListener("mousemove",t),window.addEventListener("mouseup",o)),function(){window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",o)}}),[e,n,i]);var f=(0,d.useCallback)((function(){e.editor.isEditable&&l(!0)}),[e.editor.isEditable]),p=(0,d.useCallback)((function(){l(!1)}),[]),h=(0,d.useCallback)((function(e){e.preventDefault(),r({handleUsed:"left",initialWidth:c.current.clientWidth,initialClientX:e.clientX})}),[]),m=(0,d.useCallback)((function(e){e.preventDefault(),r({handleUsed:"right",initialWidth:c.current.clientWidth,initialClientX:e.clientX})}),[]),v=RP(e.block.id);return(0,B.jsx)(VP,EB(EB({},e),{},{onMouseEnter:f,onMouseLeave:p,style:e.block.props.url&&!v&&e.block.props.showPreview?{width:i?"".concat(i,"px"):"fit-content"}:void 0,children:(0,B.jsxs)("div",{className:"bn-visual-media-wrapper",ref:c,children:[e.children,(u||n)&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{className:"bn-resize-handle",style:{left:"4px"},onMouseDown:h}),(0,B.jsx)("div",{className:"bn-resize-handle",style:{right:"4px"},onMouseDown:m})]})]})}))}),GP=function(e){var t=jP(e.block.props.url);return(0,B.jsx)("img",{className:"bn-visual-media",src:"loading"===t.loadingState?e.block.props.url:t.downloadUrl,alt:e.block.props.caption||"BlockNote image",contentEditable:!1,draggable:!1})};_P(Ek,{render:function(e){return(0,B.jsx)(UP,EB(EB({},e),{},{buttonText:e.editor.dictionary.file_blocks.image.add_button_text,buttonIcon:(0,B.jsx)(EO,{size:24}),children:(0,B.jsx)(GP,EB({},e))}))},parse:xk,toExternalHTML:function(e){if(!e.block.props.url)return(0,B.jsx)("p",{children:"Add image"});var t=e.block.props.showPreview?(0,B.jsx)("img",{src:e.block.props.url,alt:e.block.props.name||e.block.props.caption||"BlockNote image",width:e.block.props.previewWidth}):(0,B.jsx)("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?e.block.props.showPreview?(0,B.jsx)(IP,{caption:e.block.props.caption,children:t}):(0,B.jsx)(zP,{caption:e.block.props.caption,children:t}):t}});var WP=function(e){var t=jP(e.block.props.url);return(0,B.jsx)("video",{className:"bn-visual-media",src:"loading"===t.loadingState?e.block.props.url:t.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})};function qP(e){return(0,B.jsx)(uB,EB(EB({as:"span",className:"bn-inline-content-section","data-inline-content-type":e.inlineContentType},Object.fromEntries(Object.entries(e.inlineContentProps).filter((function(t){var n=AB(t,2),r=n[0];return n[1]!==e.propSchema[r].default})).map((function(e){var t=AB(e,2),n=t[0],r=t[1];return[$w(n),r]})))),{},{children:e.children}))}function KP(e,t){var n=Kw({name:e.type,inline:!0,group:"inline",selectable:"styled"===e.content,atom:"none"===e.content,content:"styled"===e.content?"inline*":"",addAttributes:function(){return Gw(e.propSchema)},addKeyboardShortcuts:function(){return function(e){return{Backspace:function(t){var n=t.editor,r=n.state.selection.$from;return n.state.selection.empty&&r.node().type.name===e.type&&0===r.parentOffset}}}(e)},parseHTML:function(){return function(e){return[{tag:'[data-inline-content-type="'.concat(e.type,'"]'),contentElement:function(e){var t=e;return t.matches("[data-editable]")?t:t.querySelector("[data-editable]")||t}}]}(e)},renderHTML:function(n){var r=n.node,o=this.options.editor,i=vC(r,o.schema.inlineContentSchema,o.schema.styleSchema),a=t.render;return function(e,t,n,r){return e.dom.setAttribute("data-inline-content-type",t),Object.entries(n).filter((function(e){var t=iw(e,2),n=t[0];return t[1]!==r[n].default})).map((function(e){var t=iw(e,2),n=t[0],r=t[1];return[$w(n),r]})).forEach((function(t){var n=iw(t,2),r=n[0],o=n[1];return e.dom.setAttribute(r,o)})),void 0!==e.contentDOM&&e.contentDOM.setAttribute("data-editable",""),e}(PP((function(e){return(0,B.jsx)(a,{inlineContent:i,updateInlineContent:function(){},contentRef:e})}),o),e.type,r.attrs,e.propSchema)},addNodeView:function(){var n=this.options.editor;return function(r){return dB((function(r){var o=sB().nodeViewContentRef;if(!o)throw new Error("nodeViewContentRef is not set");var i=t.render;return(0,B.jsx)(qP,{inlineContentProps:r.node.attrs,inlineContentType:e.type,propSchema:e.propSchema,children:(0,B.jsx)(i,{contentRef:o,inlineContent:vC(r.node,n.schema.inlineContentSchema,n.schema.styleSchema),updateInlineContent:function(e){var t=NC([e],n.pmSchema);n.transact((function(e){return e.replaceWith(r.getPos(),r.getPos()+r.node.nodeSize,t)}))}})})}),{className:"bn-ic-react-node-view-renderer",as:"span"})(r)}}});return function(e,t){return{config:e,implementation:t}}(e,{node:n})}function ZP(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=n.top<r.top,i=n.bottom>r.bottom;return o&&i?"both":o?"top":i?"bottom":"none"}function JP(e){if("number"==typeof e)return!0;if("string"==typeof e){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&""!==e.trim())return!0;const t=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every((e=>t.test(e)))}return!1}function XP(e){return"0rem"===e?"0rem":`calc(${e} * var(--mantine-scale))`}function YP(e,{shouldScale:t=!1}={}){return function n(r){if(0===r||"0"===r)return`0${e}`;if("number"==typeof r){const n=`${r/16}${e}`;return t?XP(n):n}if("string"==typeof r){if(""===r)return r;if(r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map((e=>n(e))).join(",");if(r.includes(" "))return r.split(" ").map((e=>n(e))).join(" ");if(r.includes(e))return t?XP(r):r;const o=r.replace("px","");if(!Number.isNaN(Number(o))){const n=`${Number(o)/16}${e}`;return t?XP(n):n}}return r}}_P(eE,{render:function(e){return(0,B.jsx)(UP,EB(EB({},e),{},{buttonText:e.editor.dictionary.file_blocks.video.add_button_text,buttonIcon:(0,B.jsx)(FO,{size:24}),children:(0,B.jsx)(WP,EB({},e))}))},parse:tE,toExternalHTML:function(e){if(!e.block.props.url)return(0,B.jsx)("p",{children:"Add video"});var t=e.block.props.showPreview?(0,B.jsx)("video",{src:e.block.props.url}):(0,B.jsx)("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?e.block.props.showPreview?(0,B.jsx)(IP,{caption:e.block.props.caption,children:t}):(0,B.jsx)(zP,{caption:e.block.props.caption,children:t}):t}}),new WeakSet;const QP=YP("rem",{shouldScale:!0}),eN=YP("em");function tN(e,t="size",n=!0){if(void 0!==e)return JP(e)?n?QP(e):e:`var(--${t}-${e})`}function nN(e){return tN(e,"mantine-spacing")}function rN(e){return void 0===e?"var(--mantine-radius-default)":tN(e,"mantine-radius")}function oN(e){return tN(e,"mantine-font-size")}function iN(e){return tN(e,"mantine-line-height",!1)}function aN(e){if(e)return tN(e,"mantine-shadow",!1)}function sN(e){return Object.keys(e).reduce(((t,n)=>(void 0!==e[n]&&(t[n]=e[n]),t)),{})}function uN(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)?function(e){let t=e.replace("#","");if(3===t.length){const e=t.split("");t=[e[0],e[0],e[1],e[1],e[2],e[2]].join("")}if(8===t.length){const e=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:e}}const n=parseInt(t,16);return{r:n>>16&255,g:n>>8&255,b:255&n,a:1}}(e):e.startsWith("rgb")?function(e){const[t,n,r,o]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:o||1}}(e):e.startsWith("hsl")?function(e){const t=e.match(/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i);if(!t)return{r:0,g:0,b:0,a:1};const n=parseInt(t[1],10),r=parseInt(t[2],10)/100,o=parseInt(t[3],10)/100,i=t[5]?parseFloat(t[5]):void 0,a=(1-Math.abs(2*o-1))*r,s=n/60,u=a*(1-Math.abs(s%2-1)),l=o-a/2;let c,d,f;return s>=0&&s<1?(c=a,d=u,f=0):s>=1&&s<2?(c=u,d=a,f=0):s>=2&&s<3?(c=0,d=a,f=u):s>=3&&s<4?(c=0,d=u,f=a):s>=4&&s<5?(c=u,d=0,f=a):(c=a,d=0,f=u),{r:Math.round(255*(c+l)),g:Math.round(255*(d+l)),b:Math.round(255*(f+l)),a:i||1}}(e):{r:0,g:0,b:0,a:1}}function lN(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${100*t}%)`;const{r:n,g:r,b:o,a:i}=uN(e),a=1-t,s=e=>Math.round(e*a);return`rgba(${s(n)}, ${s(r)}, ${s(o)}, ${i})`}function cN(e,t){return"number"==typeof e.primaryShade?e.primaryShade:"dark"===t?e.primaryShade.dark:e.primaryShade.light}function dN(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function fN(e,t=.179){return!e.startsWith("var(")&&function(e){if(e.startsWith("oklch("))return(function(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}(e)||0)/100;const{r:t,g:n,b:r}=uN(e),o=n/255,i=r/255;return.2126*dN(t/255)+.7152*dN(o)+.0722*dN(i)}(e)>t}function pN({color:e,theme:t,colorScheme:n}){if("string"!=typeof e)throw new Error("[@mantine/core] Failed to parse color. Expected color to be a string, instead got "+typeof e);if("bright"===e)return{color:e,value:"dark"===n?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:fN("dark"===n?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if("dimmed"===e)return{color:e,value:"dark"===n?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:fN("dark"===n?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if("white"===e||"black"===e)return{color:e,value:"white"===e?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:fN("white"===e?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,o]=e.split("."),i=o?Number(o):void 0,a=r in t.colors;if(a){const e=void 0!==i?t.colors[r][i]:t.colors[r][cN(t,n||"light")];return{color:r,value:e,shade:i,isThemeColor:a,isLight:fN(e,t.luminanceThreshold),variable:o?`--mantine-color-${r}-${i}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:a,isLight:fN(e,t.luminanceThreshold),shade:i,variable:void 0}}function hN(e,t){const n=pN({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function mN(e,t){const n={from:e?.from||t.defaultGradient.from,to:e?.to||t.defaultGradient.to,deg:e?.deg??t.defaultGradient.deg??0},r=hN(n.from,t),o=hN(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${o} 100%)`}function vN(e,t){if("string"!=typeof e||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var("))return`color-mix(in srgb, ${e}, transparent ${100*(1-t)}%)`;if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:o}=uN(e);return`rgba(${n}, ${r}, ${o}, ${t})`}const gN=vN,yN="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",bN={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:{dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:({color:e,theme:t,variant:n,gradient:r,autoContrast:o})=>{const i=pN({color:e,theme:t}),a="boolean"==typeof o?o:t.autoContrast;if("filled"===n){const t=a&&i.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return i.isThemeColor?void 0===i.shade?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:t,border:`${QP(1)} solid transparent`}:{background:`var(--mantine-color-${i.color}-${i.shade})`,hover:`var(--mantine-color-${i.color}-${9===i.shade?8:i.shade+1})`,color:t,border:`${QP(1)} solid transparent`}:{background:e,hover:lN(e,.1),color:t,border:`${QP(1)} solid transparent`}}if("light"===n){if(i.isThemeColor){if(void 0===i.shade)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${QP(1)} solid transparent`};const n=t.colors[i.color][i.shade];return{background:vN(n,.1),hover:vN(n,.12),color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${QP(1)} solid transparent`}}return{background:vN(e,.1),hover:vN(e,.12),color:e,border:`${QP(1)} solid transparent`}}return"outline"===n?i.isThemeColor?void 0===i.shade?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${QP(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:vN(t.colors[i.color][i.shade],.05),color:`var(--mantine-color-${i.color}-${i.shade})`,border:`${QP(1)} solid var(--mantine-color-${i.color}-${i.shade})`}:{background:"transparent",hover:vN(e,.05),color:e,border:`${QP(1)} solid ${e}`}:"subtle"===n?i.isThemeColor?void 0===i.shade?{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${QP(1)} solid transparent`}:{background:"transparent",hover:vN(t.colors[i.color][i.shade],.12),color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${QP(1)} solid transparent`}:{background:"transparent",hover:vN(e,.12),color:e,border:`${QP(1)} solid transparent`}:"transparent"===n?i.isThemeColor?void 0===i.shade?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${QP(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${QP(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${QP(1)} solid transparent`}:"white"===n?i.isThemeColor?void 0===i.shade?{background:"var(--mantine-color-white)",hover:lN(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${QP(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:lN(t.white,.01),color:`var(--mantine-color-${i.color}-${i.shade})`,border:`${QP(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:lN(t.white,.01),color:e,border:`${QP(1)} solid transparent`}:"gradient"===n?{background:mN(r,t),hover:mN(r,t),color:"var(--mantine-color-white)",border:"none"}:"default"===n?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${QP(1)} solid var(--mantine-color-default-border)`}:{}},autoContrast:!1,luminanceThreshold:.3,fontFamily:yN,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:yN,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:QP(34),lineHeight:"1.3"},h2:{fontSize:QP(26),lineHeight:"1.35"},h3:{fontSize:QP(22),lineHeight:"1.4"},h4:{fontSize:QP(18),lineHeight:"1.45"},h5:{fontSize:QP(16),lineHeight:"1.5"},h6:{fontSize:QP(14),lineHeight:"1.5"}}},fontSizes:{xs:QP(12),sm:QP(14),md:QP(16),lg:QP(18),xl:QP(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:QP(2),sm:QP(4),md:QP(8),lg:QP(16),xl:QP(32)},spacing:{xs:QP(10),sm:QP(12),md:QP(16),lg:QP(20),xl:QP(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${QP(1)} ${QP(3)} rgba(0, 0, 0, 0.05), 0 ${QP(1)} ${QP(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${QP(1)} ${QP(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${QP(10)} ${QP(15)} ${QP(-5)}, rgba(0, 0, 0, 0.04) 0 ${QP(7)} ${QP(7)} ${QP(-5)}`,md:`0 ${QP(1)} ${QP(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${QP(20)} ${QP(25)} ${QP(-5)}, rgba(0, 0, 0, 0.04) 0 ${QP(10)} ${QP(10)} ${QP(-5)}`,lg:`0 ${QP(1)} ${QP(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${QP(28)} ${QP(23)} ${QP(-7)}, rgba(0, 0, 0, 0.04) 0 ${QP(12)} ${QP(12)} ${QP(-7)}`,xl:`0 ${QP(1)} ${QP(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${QP(36)} ${QP(28)} ${QP(-7)}, rgba(0, 0, 0, 0.04) 0 ${QP(17)} ${QP(17)} ${QP(-7)}`},other:{},components:{}};function DN(e){return e&&"object"==typeof e&&!Array.isArray(e)}function wN(e,t){const n={...e},r=t;return DN(e)&&DN(t)&&Object.keys(t).forEach((t=>{DN(r[t])?n[t]=t in e?wN(n[t],r[t]):r[t]:n[t]=r[t]})),n}const CN="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function kN(e){return!(e<0||e>9)&&parseInt(e.toString(),10)===e}function EN(e){if(!(e.primaryColor in e.colors))throw new Error("[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color");if(!("object"!=typeof e.primaryShade||kN(e.primaryShade.dark)&&kN(e.primaryShade.light)))throw new Error(CN);if("number"==typeof e.primaryShade&&!kN(e.primaryShade))throw new Error(CN)}const xN=(0,d.createContext)(null);function AN(){const e=(0,d.useContext)(xN);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function FN({theme:e,children:t,inherit:n=!0}){const r=(0,d.useContext)(xN)||bN,o=(0,d.useMemo)((()=>function(e,t){if(!t)return EN(e),e;const n=wN(e,t);return t.fontFamily&&!t.headings?.fontFamily&&(n.headings.fontFamily=t.fontFamily),EN(n),n}(n?r:bN,e)),[e,r,n]);return(0,B.jsx)(xN.Provider,{value:o,children:t})}function SN(e,t,n){const r=AN(),o=r.components[e]?.defaultProps;return{...t,..."function"==typeof o?o(r):o,...sN(n)}}FN.displayName="@mantine/core/MantineThemeProvider";const MN=(0,d.createContext)(null);function BN(){const e=(0,d.useContext)(MN);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function ON(){return BN().getStyleNonce}function TN(){return BN().env||"default"}function PN(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=PN(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const NN=function(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=PN(e))&&(r&&(r+=" "),r+=t);return r},_N={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"},jN={};function IN({theme:e,classNames:t,props:n,stylesCtx:r}){return function(e){const t={};return e.forEach((e=>{Object.entries(e).forEach((([e,n])=>{t[e]?t[e]=NN(t[e],n):t[e]=n}))})),t}((Array.isArray(t)?t:[t]).map((t=>"function"==typeof t?t(e,n,r):t||jN)))}function RN({selector:e,stylesCtx:t,theme:n,classNames:r,props:o}){return IN({theme:n,classNames:r,props:o,stylesCtx:t})[e]}function LN({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:o,classNames:i,classes:a,unstyled:s,className:u,rootSelector:l,props:c,stylesCtx:d,withStaticClasses:f,headless:p,transformedStyles:h}){return NN(function({theme:e,options:t,unstyled:n}){return NN(t?.focusable&&!n&&(e.focusClassName||_N[e.focusRing]),t?.active&&!n&&e.activeClassName)}({theme:e,options:t,unstyled:s||p}),function({themeName:e,theme:t,selector:n,props:r,stylesCtx:o}){return e.map((e=>IN({theme:t,classNames:t.components[e]?.classNames,props:r,stylesCtx:o})?.[n]))}({theme:e,themeName:n,selector:r,props:c,stylesCtx:d}),function({options:e,classes:t,selector:n,unstyled:r}){return e?.variant&&!r?t[`${n}--${e.variant}`]:void 0}({options:t,classes:a,selector:r,unstyled:s}),RN({selector:r,stylesCtx:d,theme:e,classNames:i,props:c}),RN({selector:r,stylesCtx:d,theme:e,classNames:h,props:c}),function({selector:e,stylesCtx:t,options:n,props:r,theme:o}){return IN({theme:o,classNames:n?.classNames,props:n?.props||r,stylesCtx:t})[e]}({selector:r,stylesCtx:d,options:t,props:c,theme:e}),function({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}({rootSelector:l,selector:r,className:u}),function({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}({selector:r,classes:a,unstyled:s||p}),f&&!p&&function({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return!1===r?[]:e.map((e=>`${t}-${e}-${n}`))}({themeName:n,classNamesPrefix:o,selector:r,withStaticClass:t?.withStaticClass}),t?.className)}function HN({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce(((t,o)=>"function"==typeof o?{...t,...o(e,n,r)}:{...t,...o}),{})}function VN({theme:e,themeName:t,props:n,stylesCtx:r,selector:o}){return t.map((t=>HN({theme:e,styles:e.components[t]?.styles,props:n,stylesCtx:r})[o])).reduce(((e,t)=>({...e,...t})),{})}function zN({style:e,theme:t}){return Array.isArray(e)?[...e].reduce(((e,n)=>({...e,...zN({style:n,theme:t})})),{}):"function"==typeof e?e(t):null==e?{}:e}function $N({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:o,selector:i,themeName:a,headless:s}){return function(e){return e.reduce(((e,t)=>(t&&Object.keys(t).forEach((n=>{e[n]={...e[n],...sN(t[n])}})),e)),{})}([s?{}:t?.(n,r,o),...a.map((e=>n.components?.[e]?.vars?.(n,r,o))),e?.(n,r,o)])?.[i]}function UN({theme:e,themeName:t,selector:n,options:r,props:o,stylesCtx:i,rootSelector:a,styles:s,style:u,vars:l,varsResolver:c,headless:d,withStylesTransform:f}){return{...!f&&VN({theme:e,themeName:t,props:o,stylesCtx:i,selector:n}),...!f&&HN({theme:e,styles:s,props:o,stylesCtx:i})[n],...!f&&HN({theme:e,styles:r?.styles,props:r?.props||o,stylesCtx:i})[n],...$N({theme:e,props:o,stylesCtx:i,vars:l,varsResolver:c,selector:n,themeName:t,headless:d}),...a===n?zN({style:u,theme:e}):null,...zN({style:r?.style,theme:e})}}function GN({name:e,classes:t,props:n,stylesCtx:r,className:o,style:i,rootSelector:a="root",unstyled:s,classNames:u,styles:l,vars:c,varsResolver:d}){const f=AN(),p=BN().classNamesPrefix,h=BN().withStaticClasses,m=BN().headless,v=(Array.isArray(e)?e:[e]).filter((e=>e)),{withStylesTransform:g,getTransformedStyles:y}=function({props:e,stylesCtx:t,themeName:n}){const r=AN(),o=(BN().stylesTransform?.styles)?.();return{getTransformedStyles:i=>o?[...i.map((n=>o(n,{props:e,theme:r,ctx:t}))),...n.map((n=>o(r.components[n]?.styles,{props:e,theme:r,ctx:t})))].filter(Boolean):[],withStylesTransform:!!o}}({props:n,stylesCtx:r,themeName:v});return(e,b)=>({className:LN({theme:f,options:b,themeName:v,selector:e,classNamesPrefix:p,classNames:u,classes:t,unstyled:s,className:o,rootSelector:a,props:n,stylesCtx:r,withStaticClasses:h,headless:m,transformedStyles:y([b?.styles,l])}),style:UN({theme:f,themeName:v,selector:e,options:b,props:n,stylesCtx:r,rootSelector:a,styles:l,style:i,vars:c,varsResolver:d,headless:m,withStylesTransform:g})})}function WN(e){return Object.keys(e)}function qN(e){return WN(e).reduce(((t,n)=>{return void 0!==e[n]?`${t}${r=n,r.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}:${e[n]};`:t;var r}),"").trim()}function KN({selector:e,styles:t,media:n,container:r}){const o=t?qN(t):"",i=Array.isArray(n)?n.map((t=>`@media${t.query}{${e}{${qN(t.styles)}}}`)):[],a=Array.isArray(r)?r.map((t=>`@container ${t.query}{${e}{${qN(t.styles)}}}`)):[];return`${o?`${e}{${o}}`:""}${i.join("")}${a.join("")}`.trim()}function ZN(e){const t=ON();return(0,B.jsx)("style",{"data-mantine-styles":"inline",nonce:t?.(),dangerouslySetInnerHTML:{__html:KN(e)}})}function JN(e){return e.startsWith("data-")?e:`data-${e}`}function XN(e){return e?"string"==typeof e?{[JN(e)]:!0}:Array.isArray(e)?[...e].reduce(((e,t)=>({...e,...XN(t)})),{}):(t=e,Object.keys(t).reduce(((e,n)=>{const r=t[n];return void 0===r||""===r||!1===r||null===r||(e[JN(n)]=t[n]),e}),{})):null;var t}function YN(e,t){return Array.isArray(e)?[...e].reduce(((e,n)=>({...e,...YN(n,t)})),{}):"function"==typeof e?e(t):null==e?{}:e}function QN({theme:e,style:t,vars:n,styleProps:r}){return{...YN(t,e),...YN(n,e),...r}}function e_(e){const{m:t,mx:n,my:r,mt:o,mb:i,ml:a,mr:s,me:u,ms:l,p:c,px:d,py:f,pt:p,pb:h,pl:m,pr:v,pe:g,ps:y,bd:b,bg:D,c:w,opacity:C,ff:k,fz:E,fw:x,lts:A,ta:F,lh:S,fs:M,tt:B,td:O,w:T,miw:P,maw:N,h:_,mih:j,mah:I,bgsz:R,bgp:L,bgr:H,bga:V,pos:z,top:$,left:U,bottom:G,right:W,inset:q,display:K,flex:Z,hiddenFrom:J,visibleFrom:X,lightHidden:Y,darkHidden:Q,sx:ee,...te}=e;return{styleProps:sN({m:t,mx:n,my:r,mt:o,mb:i,ml:a,mr:s,me:u,ms:l,p:c,px:d,py:f,pt:p,pb:h,pl:m,pr:v,pe:g,ps:y,bd:b,bg:D,c:w,opacity:C,ff:k,fz:E,fw:x,lts:A,ta:F,lh:S,fs:M,tt:B,td:O,w:T,miw:P,maw:N,h:_,mih:j,mah:I,bgsz:R,bgp:L,bgr:H,bga:V,pos:z,top:$,left:U,bottom:G,right:W,inset:q,display:K,flex:Z,hiddenFrom:J,visibleFrom:X,lightHidden:Y,darkHidden:Q,sx:ee}),rest:te}}const t_={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function n_(e,t){const n=pN({color:e,theme:t});return"dimmed"===n.color?"var(--mantine-color-dimmed)":"bright"===n.color?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}const r_={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"},o_=["h1","h2","h3","h4","h5","h6"],i_=["h1","h2","h3","h4","h5","h6"],a_={color:n_,textColor:function(e,t){const n=pN({color:e,theme:t});return n.isThemeColor&&void 0===n.shade?`var(--mantine-color-${n.color}-text)`:n_(e,t)},fontSize:function(e,t){return"string"==typeof e&&e in t.fontSizes?`var(--mantine-font-size-${e})`:"string"==typeof e&&o_.includes(e)?`var(--mantine-${e}-font-size)`:"number"==typeof e||"string"==typeof e?QP(e):e},spacing:function(e,t){if("number"==typeof e)return QP(e);if("string"==typeof e){const n=e.replace("-","");if(!(n in t.spacing))return QP(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e},identity:function(e){return e},size:function(e){return"number"==typeof e?QP(e):e},lineHeight:function(e,t){return"string"==typeof e&&e in t.lineHeights?`var(--mantine-line-height-${e})`:"string"==typeof e&&i_.includes(e)?`var(--mantine-${e}-line-height)`:e},fontFamily:function(e){return"string"==typeof e&&e in r_?r_[e]:e},border:function(e,t){if("number"==typeof e)return QP(e);if("string"==typeof e){const[n,r,...o]=e.split(" ").filter((e=>""!==e.trim()));let i=`${QP(n)}`;return r&&(i+=` ${r}`),o.length>0&&(i+=` ${n_(o.join(" "),t)}`),i.trim()}return e}};function s_(e){return e.replace("(min-width: ","").replace("em)","")}function u_(e,t){return"object"==typeof e&&null!==e&&t in e?e[t]:e}function l_({styleProps:e,data:t,theme:n}){return function({media:e,...t}){const n=Object.keys(e).sort(((e,t)=>Number(s_(e))-Number(s_(t)))).map((t=>({query:t,styles:e[t]})));return{...t,media:n}}(WN(e).reduce(((r,o)=>{if("hiddenFrom"===o||"visibleFrom"===o||"sx"===o)return r;const i=t[o],a=Array.isArray(i.property)?i.property:[i.property],s="object"==typeof(u=e[o])&&null!==u?"base"in u?u.base:void 0:u;var u;if(!function(e){if("object"!=typeof e||null===e)return!1;const t=Object.keys(e);return 1!==t.length||"base"!==t[0]}(e[o]))return a.forEach((e=>{r.inlineStyles[e]=a_[i.type](s,n)})),r;r.hasResponsiveStyles=!0;const l=function(e){return"object"==typeof e&&null!==e?WN(e).filter((e=>"base"!==e)):[]}(e[o]);return a.forEach((t=>{s&&(r.styles[t]=a_[i.type](s,n)),l.forEach((a=>{const s=`(min-width: ${n.breakpoints[a]})`;r.media[s]={...r.media[s],[t]:a_[i.type](u_(e[o],a),n)}}))})),r}),{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function c_(){return`__m__-${(0,d.useId)().replace(/:/g,"")}`}const d_=(0,d.forwardRef)((({component:e,style:t,__vars:n,className:r,variant:o,mod:i,size:a,hiddenFrom:s,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:d,__size:f,...p},h)=>{const m=AN(),v=e||"div",{styleProps:g,rest:y}=e_(p),b=BN().stylesTransform?.sx,D=b?.()?.(g.sx),w=c_(),C=l_({styleProps:g,theme:m,data:t_}),k={ref:h,style:QN({theme:m,style:t,vars:n,styleProps:C.inlineStyles}),className:NN(r,D,{[w]:C.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${s}`]:s,[`mantine-visible-from-${u}`]:u}),"data-variant":o,"data-size":JP(a)?void 0:a||void 0,size:f,...XN(i),...y};return(0,B.jsxs)(B.Fragment,{children:[C.hasResponsiveStyles&&(0,B.jsx)(ZN,{selector:`.${w}`,styles:C.styles,media:C.media}),"function"==typeof d?d(k):(0,B.jsx)(v,{...k})]})}));d_.displayName="@mantine/core/Box";const f_=d_;function p_(e){return e}function h_(e){const t=(0,d.forwardRef)(e);return t.extend=p_,t.withProps=e=>{const n=(0,d.forwardRef)(((n,r)=>(0,B.jsx)(t,{...e,...n,ref:r})));return n.extend=t.extend,n.displayName=`WithProps(${t.displayName})`,n},t}var m_={root:"m_6d731127"};const v_={gap:"md",align:"stretch",justify:"flex-start"},g_=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":nN(t),"--stack-align":n,"--stack-justify":r}}),y_=h_(((e,t)=>{const n=SN("Stack",v_,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,align:l,justify:c,gap:d,variant:f,...p}=n,h=GN({name:"Stack",props:n,classes:m_,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:u,varsResolver:g_});return(0,B.jsx)(f_,{ref:t,...h("root"),variant:f,...p})}));function b_(e){const t=(0,d.forwardRef)(e);return t.withProps=e=>{const n=(0,d.forwardRef)(((n,r)=>(0,B.jsx)(t,{...e,...n,ref:r})));return n.extend=t.extend,n.displayName=`WithProps(${t.displayName})`,n},t.extend=p_,t}y_.classes=m_,y_.displayName="@mantine/core/Stack";var D_={root:"m_b6d8b162"};function w_(e){return"start"===e?"start":"end"===e||e?"end":void 0}const C_={inherit:!1},k_=(e,{variant:t,lineClamp:n,gradient:r,size:o,color:i})=>({root:{"--text-fz":oN(o),"--text-lh":iN(o),"--text-gradient":"gradient"===t?mN(r,e):void 0,"--text-line-clamp":"number"==typeof n?n.toString():void 0,"--text-color":i?hN(i,e):void 0}}),E_=b_(((e,t)=>{const n=SN("Text",C_,e),{lineClamp:r,truncate:o,inline:i,inherit:a,gradient:s,span:u,__staticSelector:l,vars:c,className:d,style:f,classNames:p,styles:h,unstyled:m,variant:v,mod:g,size:y,...b}=n,D=GN({name:["Text",l],props:n,classes:D_,className:d,style:f,classNames:p,styles:h,unstyled:m,vars:c,varsResolver:k_});return(0,B.jsx)(f_,{...D("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:v,mod:[{"data-truncate":w_(o),"data-line-clamp":"number"==typeof r,"data-inline":i,"data-inherit":a},g],size:y,...b})}));E_.classes=D_,E_.displayName="@mantine/core/Text";var x_={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const A_=(0,d.forwardRef)((({className:e,...t},n)=>(0,B.jsxs)(f_,{component:"span",className:NN(x_.barsLoader,e),...t,ref:n,children:[(0,B.jsx)("span",{className:x_.bar}),(0,B.jsx)("span",{className:x_.bar}),(0,B.jsx)("span",{className:x_.bar})]})));A_.displayName="@mantine/core/Bars";const F_=(0,d.forwardRef)((({className:e,...t},n)=>(0,B.jsxs)(f_,{component:"span",className:NN(x_.dotsLoader,e),...t,ref:n,children:[(0,B.jsx)("span",{className:x_.dot}),(0,B.jsx)("span",{className:x_.dot}),(0,B.jsx)("span",{className:x_.dot})]})));F_.displayName="@mantine/core/Dots";const S_=(0,d.forwardRef)((({className:e,...t},n)=>(0,B.jsx)(f_,{component:"span",className:NN(x_.ovalLoader,e),...t,ref:n})));S_.displayName="@mantine/core/Oval";const M_={bars:A_,oval:S_,dots:F_},B_={loaders:M_,type:"oval"},O_=(e,{size:t,color:n})=>({root:{"--loader-size":tN(t,"loader-size"),"--loader-color":n?hN(n,e):void 0}}),T_=h_(((e,t)=>{const n=SN("Loader",B_,e),{size:r,color:o,type:i,vars:a,className:s,style:u,classNames:l,styles:c,unstyled:d,loaders:f,variant:p,children:h,...m}=n,v=GN({name:"Loader",props:n,classes:x_,className:s,style:u,classNames:l,styles:c,unstyled:d,vars:a,varsResolver:O_});return h?(0,B.jsx)(f_,{...v("root"),ref:t,...m,children:h}):(0,B.jsx)(f_,{...v("root"),ref:t,component:f[i],variant:p,size:r,...m})}));T_.defaultLoaders=M_,T_.classes=x_,T_.displayName="@mantine/core/Loader";const P_=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${"bottom"===e?10:-10}px)`},transitionProperty:"transform, opacity"}),N_={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...P_("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...P_("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...P_("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...P_("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...P_("top"),common:{transformOrigin:"top right"}}},__={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function j_({transition:e,state:t,duration:n,timingFunction:r}){const o={WebkitBackfaceVisibility:"hidden",willChange:"transform, opacity",transitionDuration:`${n}ms`,transitionTimingFunction:r};return"string"==typeof e?e in N_?{transitionProperty:N_[e].transitionProperty,...o,...N_[e].common,...N_[e][__[t]]}:{}:{transitionProperty:e.transitionProperty,...o,...e.common,...e[__[t]]}}function I_(e,t){const n=(0,d.useRef)(!1);(0,d.useEffect)((()=>()=>{n.current=!1}),[]),(0,d.useEffect)((()=>{if(n.current)return e();n.current=!0}),t)}function R_({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:o,onExit:i,onEntered:a,onExited:s,enterDelay:u,exitDelay:l}){const c=AN(),f=function(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,o]=(0,d.useState)(n?t:function(e){return"undefined"!=typeof window&&"matchMedia"in window&&window.matchMedia(e).matches}(e)),i=(0,d.useRef)(null);return(0,d.useEffect)((()=>{if("matchMedia"in window)return i.current=window.matchMedia(e),o(i.current.matches),function(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch(n){return e.addListener(t),()=>e.removeListener(t)}}(i.current,(e=>o(e.matches)))}),[e]),r}("(prefers-reduced-motion: reduce)",void 0,void 0),p=!!c.respectReducedMotion&&f,[h,m]=(0,d.useState)(p?0:e),[v,g]=(0,d.useState)(r?"entered":"exited"),y=(0,d.useRef)(-1),b=(0,d.useRef)(-1),D=(0,d.useRef)(-1),w=n=>{const r=n?o:i,u=n?a:s;window.clearTimeout(y.current);const l=p?0:n?e:t;m(l),0===l?("function"==typeof r&&r(),"function"==typeof u&&u(),g(n?"entered":"exited")):D.current=requestAnimationFrame((()=>{RF.flushSync((()=>{g(n?"pre-entering":"pre-exiting")})),D.current=requestAnimationFrame((()=>{"function"==typeof r&&r(),g(n?"entering":"exiting"),y.current=window.setTimeout((()=>{"function"==typeof u&&u(),g(n?"entered":"exited")}),l)}))}))};return I_((()=>{var e;e=r,window.clearTimeout(b.current),"number"==typeof(e?u:l)?b.current=window.setTimeout((()=>{w(e)}),e?u:l):w(e)}),[r]),(0,d.useEffect)((()=>()=>{window.clearTimeout(y.current),cancelAnimationFrame(D.current)}),[]),{transitionDuration:h,transitionStatus:v,transitionTimingFunction:n||"ease"}}function L_({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:o,children:i,timingFunction:a="ease",onExit:s,onEntered:u,onEnter:l,onExited:c,enterDelay:d,exitDelay:f}){const p=TN(),{transitionDuration:h,transitionStatus:m,transitionTimingFunction:v}=R_({mounted:o,exitDuration:r,duration:n,timingFunction:a,onExit:s,onEntered:u,onEnter:l,onExited:c,enterDelay:d,exitDelay:f});return 0===h||"test"===p?o?(0,B.jsx)(B.Fragment,{children:i({})}):e?i({display:"none"}):null:"exited"===m?e?i({display:"none"}):null:(0,B.jsx)(B.Fragment,{children:i(j_({transition:t,duration:h,state:m,timingFunction:v}))})}L_.displayName="@mantine/core/Transition";var H_={root:"m_87cf2631"};const V_={__staticSelector:"UnstyledButton"},z_=b_(((e,t)=>{const n=SN("UnstyledButton",V_,e),{className:r,component:o="button",__staticSelector:i,unstyled:a,classNames:s,styles:u,style:l,...c}=n,d=GN({name:i,props:n,classes:H_,className:r,style:l,classNames:s,styles:u,unstyled:a});return(0,B.jsx)(f_,{...d("root",{focusable:!0}),component:o,ref:t,type:"button"===o?"button":void 0,...c})}));z_.classes=H_,z_.displayName="@mantine/core/UnstyledButton";var $_={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const U_={orientation:"horizontal"},G_=(e,{borderWidth:t})=>({group:{"--button-border-width":QP(t)}}),W_=h_(((e,t)=>{const n=SN("ButtonGroup",U_,e),{className:r,style:o,classNames:i,styles:a,unstyled:s,orientation:u,vars:l,borderWidth:c,variant:d,mod:f,...p}=SN("ButtonGroup",U_,e),h=GN({name:"ButtonGroup",props:n,classes:$_,className:r,style:o,classNames:i,styles:a,unstyled:s,vars:l,varsResolver:G_,rootSelector:"group"});return(0,B.jsx)(f_,{...h("group"),ref:t,variant:d,mod:[{"data-orientation":u},f],role:"group",...p})}));W_.classes=$_,W_.displayName="@mantine/core/ButtonGroup";const q_={},K_=(e,{radius:t,color:n,gradient:r,variant:o,autoContrast:i,size:a})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:o||"filled",autoContrast:i});return{groupSection:{"--section-height":tN(a,"section-height"),"--section-padding-x":tN(a,"section-padding-x"),"--section-fz":a?.includes("compact")?oN(a.replace("compact-","")):oN(a),"--section-radius":void 0===t?void 0:rN(t),"--section-bg":n||o?s.background:void 0,"--section-color":s.color,"--section-bd":n||o?s.border:void 0}}},Z_=h_(((e,t)=>{const n=SN("ButtonGroupSection",q_,e),{className:r,style:o,classNames:i,styles:a,unstyled:s,vars:u,variant:l,gradient:c,radius:d,autoContrast:f,...p}=SN("ButtonGroupSection",q_,e),h=GN({name:"ButtonGroupSection",props:n,classes:$_,className:r,style:o,classNames:i,styles:a,unstyled:s,vars:u,varsResolver:K_,rootSelector:"groupSection"});return(0,B.jsx)(f_,{...h("groupSection"),ref:t,variant:l,...p})}));Z_.classes=$_,Z_.displayName="@mantine/core/ButtonGroupSection";const J_={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${QP(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},X_={},Y_=(e,{radius:t,color:n,gradient:r,variant:o,size:i,justify:a,autoContrast:s})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:o||"filled",autoContrast:s});return{root:{"--button-justify":a,"--button-height":tN(i,"button-height"),"--button-padding-x":tN(i,"button-padding-x"),"--button-fz":i?.includes("compact")?oN(i.replace("compact-","")):oN(i),"--button-radius":void 0===t?void 0:rN(t),"--button-bg":n||o?u.background:void 0,"--button-hover":n||o?u.hover:void 0,"--button-color":u.color,"--button-bd":n||o?u.border:void 0,"--button-hover-color":n||o?u.hoverColor:void 0}}},Q_=b_(((e,t)=>{const n=SN("Button",X_,e),{style:r,vars:o,className:i,color:a,disabled:s,children:u,leftSection:l,rightSection:c,fullWidth:d,variant:f,radius:p,loading:h,loaderProps:m,gradient:v,classNames:g,styles:y,unstyled:b,"data-disabled":D,autoContrast:w,mod:C,...k}=n,E=GN({name:"Button",props:n,classes:$_,className:i,style:r,classNames:g,styles:y,unstyled:b,vars:o,varsResolver:Y_}),x=!!l,A=!!c;return(0,B.jsxs)(z_,{ref:t,...E("root",{active:!s&&!h&&!D}),unstyled:b,variant:f,disabled:s||h,mod:[{disabled:s||D,loading:h,block:d,"with-left-section":x,"with-right-section":A},C],...k,children:[(0,B.jsx)(L_,{mounted:!!h,transition:J_,duration:150,children:e=>(0,B.jsx)(f_,{component:"span",...E("loader",{style:e}),"aria-hidden":!0,children:(0,B.jsx)(T_,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),(0,B.jsxs)("span",{...E("inner"),children:[l&&(0,B.jsx)(f_,{component:"span",...E("section"),mod:{position:"left"},children:l}),(0,B.jsx)(f_,{component:"span",mod:{loading:h},...E("label"),children:u}),c&&(0,B.jsx)(f_,{component:"span",...E("section"),mod:{position:"right"},children:c})]})]})}));Q_.classes=$_,Q_.displayName="@mantine/core/Button",Q_.Group=W_,Q_.GroupSection=Z_;var ej={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const tj={orientation:"horizontal"},nj=(e,{borderWidth:t})=>({group:{"--ai-border-width":QP(t)}}),rj=h_(((e,t)=>{const n=SN("ActionIconGroup",tj,e),{className:r,style:o,classNames:i,styles:a,unstyled:s,orientation:u,vars:l,borderWidth:c,variant:d,mod:f,...p}=SN("ActionIconGroup",tj,e),h=GN({name:"ActionIconGroup",props:n,classes:ej,className:r,style:o,classNames:i,styles:a,unstyled:s,vars:l,varsResolver:nj,rootSelector:"group"});return(0,B.jsx)(f_,{...h("group"),ref:t,variant:d,mod:[{"data-orientation":u},f],role:"group",...p})}));rj.classes=ej,rj.displayName="@mantine/core/ActionIconGroup";const oj={},ij=(e,{radius:t,color:n,gradient:r,variant:o,autoContrast:i,size:a})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:o||"filled",autoContrast:i});return{groupSection:{"--section-height":tN(a,"section-height"),"--section-padding-x":tN(a,"section-padding-x"),"--section-fz":oN(a),"--section-radius":void 0===t?void 0:rN(t),"--section-bg":n||o?s.background:void 0,"--section-color":s.color,"--section-bd":n||o?s.border:void 0}}},aj=h_(((e,t)=>{const n=SN("ActionIconGroupSection",oj,e),{className:r,style:o,classNames:i,styles:a,unstyled:s,vars:u,variant:l,gradient:c,radius:d,autoContrast:f,...p}=SN("ActionIconGroupSection",oj,e),h=GN({name:"ActionIconGroupSection",props:n,classes:ej,className:r,style:o,classNames:i,styles:a,unstyled:s,vars:u,varsResolver:ij,rootSelector:"groupSection"});return(0,B.jsx)(f_,{...h("groupSection"),ref:t,variant:l,...p})}));aj.classes=ej,aj.displayName="@mantine/core/ActionIconGroupSection";const sj={},uj=(e,{size:t,radius:n,variant:r,gradient:o,color:i,autoContrast:a})=>{const s=e.variantColorResolver({color:i||e.primaryColor,theme:e,gradient:o,variant:r||"filled",autoContrast:a});return{root:{"--ai-size":tN(t,"ai-size"),"--ai-radius":void 0===n?void 0:rN(n),"--ai-bg":i||r?s.background:void 0,"--ai-hover":i||r?s.hover:void 0,"--ai-hover-color":i||r?s.hoverColor:void 0,"--ai-color":s.color,"--ai-bd":i||r?s.border:void 0}}},lj=b_(((e,t)=>{const n=SN("ActionIcon",sj,e),{className:r,unstyled:o,variant:i,classNames:a,styles:s,style:u,loading:l,loaderProps:c,size:d,color:f,radius:p,__staticSelector:h,gradient:m,vars:v,children:g,disabled:y,"data-disabled":b,autoContrast:D,mod:w,...C}=n,k=GN({name:["ActionIcon",h],props:n,className:r,style:u,classes:ej,classNames:a,styles:s,unstyled:o,vars:v,varsResolver:uj});return(0,B.jsxs)(z_,{...k("root",{active:!y&&!l&&!b}),...C,unstyled:o,variant:i,size:d,disabled:y||l,ref:t,mod:[{loading:l,disabled:y||b},w],children:[(0,B.jsx)(L_,{mounted:!!l,transition:"slide-down",duration:150,children:e=>(0,B.jsx)(f_,{component:"span",...k("loader",{style:e}),"aria-hidden":!0,children:(0,B.jsx)(T_,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),(0,B.jsx)(f_,{component:"span",mod:{loading:l},...k("icon"),children:g})]})}));function cj(e,t){if("function"==typeof e)return e(t);"object"==typeof e&&null!==e&&"current"in e&&(e.current=t)}function dj(...e){const t=new Map;return n=>{if(e.forEach((e=>{const r=cj(e,n);r&&t.set(e,r)})),t.size>0)return()=>{e.forEach((e=>{const n=t.get(e);n?n():cj(e,null)})),t.clear()}}}function fj(...e){return(0,d.useCallback)(dj(...e),e)}function pj(e){return!Array.isArray(e)&&null!==e&&"object"==typeof e&&e.type!==d.Fragment}lj.classes=ej,lj.displayName="@mantine/core/ActionIcon",lj.Group=rj,lj.GroupSection=aj;const hj={app:100,modal:200,popover:300,overlay:400,max:9999};function mj(e){return hj[e]}function vj(e){const t=d.version;return"string"!=typeof d.version||t.startsWith("18.")?e?.ref:e?.props?.ref}const gj=(0,d.createContext)({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function yj(){return(0,d.useContext)(gj)}function bj(e,t){if("rtl"===e&&(t.includes("right")||t.includes("left"))){const[e,n]=t.split("-"),r="right"===e?"left":"right";return void 0===n?r:`${r}-${n}`}return t}function Dj(e,t,n,r){return"center"===e||"center"===r?{top:t}:"end"===e?{bottom:n}:"start"===e?{top:n}:{}}function wj(e,t,n,r,o){return"center"===e||"center"===r?{left:t}:"end"===e?{["ltr"===o?"right":"left"]:n}:"start"===e?{["ltr"===o?"left":"right"]:n}:{}}const Cj={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function kj({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:o,arrowX:i,arrowY:a,dir:s}){const[u,l="center"]=e.split("-"),c={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[Cj[u]]:r},d=-t/2;return"left"===u?{...c,...Dj(l,a,n,o),right:d,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:"right"===u?{...c,...Dj(l,a,n,o),left:d,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:"top"===u?{...c,...wj(l,i,n,o,s),bottom:d,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:"bottom"===u?{...c,...wj(l,i,n,o,s),top:d,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const Ej=(0,d.forwardRef)((({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:o,visible:i,arrowX:a,arrowY:s,style:u,...l},c)=>{const{dir:d}=yj();return i?(0,B.jsx)("div",{...l,ref:c,style:{...u,...kj({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:o,dir:d,arrowX:a,arrowY:s})}}):null}));Ej.displayName="@mantine/core/FloatingArrow";const xj="undefined"!=typeof document?d.useLayoutEffect:d.useEffect;function Aj(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),"string"==typeof e.className&&t.classList.add(...e.className.split(" ").filter(Boolean)),"object"==typeof e.style&&Object.assign(t.style,e.style),"string"==typeof e.id&&t.setAttribute("id",e.id),t}const Fj={},Sj=h_(((e,t)=>{const{children:n,target:r,reuseTargetNode:o,...i}=SN("Portal",Fj,e),[a,s]=(0,d.useState)(!1),u=(0,d.useRef)(null);return xj((()=>(s(!0),u.current=function({target:e,reuseTargetNode:t,...n}){if(e)return"string"==typeof e?document.querySelector(e)||Aj(n):e;if(t){const e=document.querySelector("[data-mantine-shared-portal-node]");if(e)return e;const t=Aj(n);return t.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(t),t}return Aj(n)}({target:r,reuseTargetNode:o,...i}),cj(t,u.current),r||o||!u.current||document.body.appendChild(u.current),()=>{r||o||!u.current||document.body.removeChild(u.current)})),[r]),a&&u.current?(0,RF.createPortal)((0,B.jsx)(B.Fragment,{children:n}),u.current):null}));Sj.displayName="@mantine/core/Portal";const Mj=h_((({withinPortal:e=!0,children:t,...n},r)=>"test"!==TN()&&e?(0,B.jsx)(Sj,{ref:r,...n,children:t}):(0,B.jsx)(B.Fragment,{children:t})));Mj.displayName="@mantine/core/OptionalPortal";const Bj={duration:100,transition:"fade"};function Oj(e,t){return Array.isArray(e)?[...e].reduce(((e,n)=>({...e,...Oj(n,t)})),{}):"function"==typeof e?e(t):null==e?{}:e}var Tj={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const Pj={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:mj("popover")},Nj=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":void 0===t?void 0:rN(t),"--tooltip-bg":n?hN(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),_j=h_(((e,t)=>{const n=SN("TooltipFloating",Pj,e),{children:r,refProp:o,withinPortal:i,style:a,className:s,classNames:u,styles:l,unstyled:c,radius:f,color:p,label:h,offset:m,position:v,multiline:g,zIndex:y,disabled:b,defaultOpened:D,variant:w,vars:C,portalProps:k,...E}=n,x=AN(),A=GN({name:"TooltipFloating",props:n,classes:Tj,className:s,style:a,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:C,varsResolver:Nj}),{handleMouseMove:F,x:S,y:M,opened:O,boundaryRef:T,floating:P,setOpened:N}=function({offset:e,position:t,defaultOpened:n}){const[r,o]=(0,d.useState)(n),i=(0,d.useRef)(null),{x:a,y:s,elements:u,refs:l,update:c,placement:f}=MM({placement:t,middleware:[RS({crossAxis:!0,padding:5,rootBoundary:"document"})]}),p=f.includes("right")?e:t.includes("left")?-1*e:0,h=f.includes("bottom")?e:t.includes("top")?-1*e:0,m=(0,d.useCallback)((({clientX:e,clientY:t})=>{l.setPositionReference({getBoundingClientRect:()=>({width:0,height:0,x:e,y:t,left:e+p,top:t+h,right:e,bottom:t})})}),[u.reference]);return(0,d.useEffect)((()=>{if(l.floating.current){const e=i.current;e.addEventListener("mousemove",m);const t=cF(l.floating.current);return t.forEach((e=>{e.addEventListener("scroll",c)})),()=>{e.removeEventListener("mousemove",m),t.forEach((e=>{e.removeEventListener("scroll",c)}))}}}),[u.reference,l.floating.current,c,m,r]),{handleMouseMove:m,x:a,y:s,opened:r,setOpened:o,boundaryRef:i,floating:l.setFloating}}({offset:m,position:v,defaultOpened:D});if(!pj(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const _=fj(T,vj(r),t),j=r.props;return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(Mj,{...k,withinPortal:i,children:(0,B.jsx)(f_,{...E,...A("tooltip",{style:{...Oj(a,x),zIndex:y,display:!b&&O?"block":"none",top:(M&&Math.round(M))??"",left:(S&&Math.round(S))??""}}),variant:w,ref:P,mod:{multiline:g},children:h})}),(0,d.cloneElement)(r,{...j,[o]:_,onMouseEnter:e=>{j.onMouseEnter?.(e),F(e),N(!0)},onMouseLeave:e=>{j.onMouseLeave?.(e),N(!1)}})]})}));_j.classes=Tj,_j.displayName="@mantine/core/TooltipFloating";const jj=(0,d.createContext)(!1),Ij=jj.Provider,Rj={openDelay:0,closeDelay:0};function Lj(e){const{openDelay:t,closeDelay:n,children:r}=SN("TooltipGroup",Rj,e);return(0,B.jsx)(Ij,{value:!0,children:(0,B.jsx)(cM,{delay:{open:t,close:n},children:r})})}Lj.displayName="@mantine/core/TooltipGroup",Lj.extend=e=>e;const Hj=d["useId".toString()]||(()=>{});function Vj(e){const t=function(){const e=Hj();return e?`mantine-${e.replace(/:/g,"")}`:""}(),[n,r]=(0,d.useState)(t);return xj((()=>{r(function(e="mantine-"){return`${e}${Math.random().toString(36).slice(2,11)}`}())}),[]),"string"==typeof e?e:"undefined"==typeof window?t:n}function zj({opened:e,floating:t,position:n,positionDependencies:r}){const[o,i]=(0,d.useState)(0);(0,d.useEffect)((()=>{if(t.refs.reference.current&&t.refs.floating.current&&e)return function(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:s="function"==typeof IntersectionObserver,animationFrame:u=!1}=r,l=uS(e),c=o||i?[...l?cF(l):[],...cF(t)]:[];c.forEach((e=>{o&&e.addEventListener("scroll",n,{passive:!0}),i&&e.addEventListener("resize",n)}));const d=l&&s?function(e,t){let n,r=null;const o=ZA(e);function i(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function a(s,u){void 0===s&&(s=!1),void 0===u&&(u=1),i();const l=e.getBoundingClientRect(),{left:c,top:d,width:f,height:p}=l;if(s||t(),!f||!p)return;const h={rootMargin:-zF(d)+"px "+-zF(o.clientWidth-(c+f))+"px "+-zF(o.clientHeight-(d+p))+"px "+-zF(c)+"px",threshold:HF(0,LF(1,u))||1};let m=!0;function v(t){const r=t[0].intersectionRatio;if(r!==u){if(!m)return a();r?a(!1,r):n=setTimeout((()=>{a(!1,1e-7)}),1e3)}1!==r||CS(l,e.getBoundingClientRect())||a(),m=!1}try{r=new IntersectionObserver(v,{...h,root:o.ownerDocument})}catch(e){r=new IntersectionObserver(v,h)}r.observe(e)}(!0),i}(l,n):null;let f,p=-1,h=null;a&&(h=new ResizeObserver((e=>{let[r]=e;r&&r.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var e;null==(e=h)||e.observe(t)}))),n()})),l&&!u&&h.observe(l),h.observe(t));let m=u?fS(e):null;return u&&function t(){const r=fS(e);m&&!CS(m,r)&&n(),m=r,f=requestAnimationFrame(t)}(),n(),()=>{var e;c.forEach((e=>{o&&e.removeEventListener("scroll",n),i&&e.removeEventListener("resize",n)})),null==d||d(),null==(e=h)||e.disconnect(),h=null,u&&cancelAnimationFrame(f)}}(t.refs.reference.current,t.refs.floating.current,t.update)}),[t.refs.reference.current,t.refs.floating.current,e,o,n]),I_((()=>{t.update()}),r),I_((()=>{i((e=>e+1))}),[e])}function $j(e){const t=function(e){if(void 0===e)return{shift:!0,flip:!0};const t={...e};return void 0===e.shift&&(t.shift=!0),void 0===e.flip&&(t.flip=!0),t}(e.middlewares),n=[IS(e.offset)];return t.shift&&n.push(RS("boolean"==typeof t.shift?{padding:8}:{padding:8,...t.shift})),t.flip&&n.push("boolean"==typeof t.flip?HS():HS(t.flip)),n.push($S({element:e.arrowRef,padding:e.arrowOffset})),t.inline?n.push("boolean"==typeof t.inline?zS():zS(t.inline)):e.inline&&n.push(zS()),n}function Uj(e){const[t,n]=(0,d.useState)(e.defaultOpened),r="boolean"==typeof e.opened?e.opened:t,o=(0,d.useContext)(jj),i=Vj(),a=(0,d.useCallback)((e=>{n(e),e&&y(i)}),[i]),{x:s,y:u,context:l,refs:c,update:f,placement:p,middlewareData:{arrow:{x:h,y:m}={}}}=MM({strategy:e.strategy,placement:e.position,open:r,onOpenChange:a,middleware:$j(e)}),{delay:v,currentId:g,setCurrentId:y}=function(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,floatingId:o}=e,{id:i,enabled:a=!0}=t,s=null!=i?i:o,u=d.useContext(lM),{currentId:l,setCurrentId:c,initialDelay:f,setState:p,timeoutMs:h}=u;return qS((()=>{a&&l&&(p({delay:{open:1,close:aM(f,"close")}}),l!==s&&r(!1))}),[a,s,r,p,l,f]),qS((()=>{function e(){r(!1),p({delay:f,currentId:null})}if(a&&l&&!n&&l===s){if(h){const t=window.setTimeout(e,h);return()=>{clearTimeout(t)}}e()}}),[a,n,p,l,s,r,f,h]),qS((()=>{a&&c!==uM&&n&&c(s)}),[a,n,c,s]),u}(l,{id:i}),{getReferenceProps:b,getFloatingProps:D}=NM([sM(l,{enabled:e.events?.hover,delay:o?v:{open:e.openDelay,close:e.closeDelay},mouseOnly:!e.events?.touch}),BM(l,{enabled:e.events?.focus,visibleOnly:!0}),jM(l,{role:"tooltip"}),SM(l,{enabled:void 0===e.opened})]);zj({opened:r,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:c,update:f}}),I_((()=>{e.onPositionChange?.(p)}),[p]);const w=r&&g&&g!==i;return{x:s,y:u,arrowX:h,arrowY:m,reference:c.setReference,floating:c.setFloating,getFloatingProps:D,getReferenceProps:b,isGroupPhase:w,opened:r,placement:p}}const Gj={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:mj("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},Wj=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":void 0===t?void 0:rN(t),"--tooltip-bg":n?hN(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),qj=h_(((e,t)=>{const n=SN("Tooltip",Gj,e),{children:r,position:o,refProp:i,label:a,openDelay:s,closeDelay:u,onPositionChange:l,opened:c,defaultOpened:f,withinPortal:p,radius:h,color:m,classNames:v,styles:g,unstyled:y,style:b,className:D,withArrow:w,arrowSize:C,arrowOffset:k,arrowRadius:E,arrowPosition:x,offset:A,transitionProps:F,multiline:S,events:M,zIndex:O,disabled:T,positionDependencies:P,onClick:N,onMouseEnter:_,onMouseLeave:j,inline:I,variant:R,keepMounted:L,vars:H,portalProps:V,mod:z,floatingStrategy:$,middlewares:U,...G}=SN("Tooltip",Gj,n),{dir:W}=yj(),q=(0,d.useRef)(null),K=Uj({position:bj(W,o),closeDelay:u,openDelay:s,onPositionChange:l,opened:c,defaultOpened:f,events:M,arrowRef:q,arrowOffset:k,offset:"number"==typeof A?A+(w?C/2:0):A,positionDependencies:[...P,r],inline:I,strategy:$,middlewares:U}),Z=GN({name:"Tooltip",props:n,classes:Tj,className:D,style:b,classNames:v,styles:g,unstyled:y,rootSelector:"tooltip",vars:H,varsResolver:Wj});if(!pj(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const J=fj(K.reference,vj(r),t),X=function(e){return{...Bj,duration:100,transition:"fade",...e}}(F),Y=r.props;return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(Mj,{...V,withinPortal:p,children:(0,B.jsx)(L_,{...X,keepMounted:L,mounted:!T&&!!K.opened,duration:K.isGroupPhase?10:X.duration,children:e=>(0,B.jsxs)(f_,{...G,"data-fixed":"fixed"===$||void 0,variant:R,mod:[{multiline:S},z],...K.getFloatingProps({ref:K.floating,className:Z("tooltip").className,style:{...Z("tooltip").style,...e,zIndex:O,top:K.y??0,left:K.x??0}}),children:[a,(0,B.jsx)(Ej,{ref:q,arrowX:K.arrowX,arrowY:K.arrowY,visible:w,position:K.placement,arrowSize:C,arrowOffset:k,arrowRadius:E,arrowPosition:x,...Z("arrow")})]})})}),(0,d.cloneElement)(r,K.getReferenceProps({onClick:N,onMouseEnter:_,onMouseLeave:j,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,className:NN(D,Y.className),...Y,[i]:J}))]})}));function Kj({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[o,i]=(0,d.useState)(void 0!==t?t:n);return void 0!==e?[e,r,!0]:[o,(e,...t)=>{i(e),r?.(e,...t)},!1]}function Zj({size:e,style:t,...n}){const r=void 0!==e?{width:QP(e),height:QP(e),...t}:t;return(0,B.jsx)("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:(0,B.jsx)("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Jj(e=null){const t=(0,d.createContext)(e);return[({children:e,value:n})=>(0,B.jsx)(t.Provider,{value:n,children:e}),()=>(0,d.useContext)(t)]}qj.classes=Tj,qj.displayName="@mantine/core/Tooltip",qj.Floating=_j,qj.Group=Lj;const[Xj,Yj]=Jj(),Qj={};function eI(e){const{value:t,defaultValue:n,onChange:r,multiple:o,children:i}=SN("ChipGroup",Qj,e),[a,s]=Kj({value:t,defaultValue:n,finalValue:o?[]:null,onChange:r});return(0,B.jsx)(Xj,{value:{isChipSelected:e=>Array.isArray(a)?a.includes(e):e===a,onChange:e=>{const t=e.currentTarget.value;Array.isArray(a)?s(a.includes(t)?a.filter((e=>e!==t)):[...a,t]):s(t)},multiple:o},children:i})}eI.displayName="@mantine/core/ChipGroup";var tI={root:"m_f59ffda3",label:"m_be049a53","label--outline":"m_3904c1af","label--filled":"m_fa109255","label--light":"m_f7e165c3",iconWrapper:"m_9ac86df9",checkIcon:"m_d6d72580",input:"m_bde07329"};const nI={type:"checkbox"},rI=(e,{size:t,radius:n,variant:r,color:o,autoContrast:i})=>{const a=e.variantColorResolver({color:o||e.primaryColor,theme:e,variant:r||"filled",autoContrast:i});return{root:{"--chip-fz":oN(t),"--chip-size":tN(t,"chip-size"),"--chip-radius":void 0===n?void 0:rN(n),"--chip-checked-padding":tN(t,"chip-checked-padding"),"--chip-padding":tN(t,"chip-padding"),"--chip-icon-size":tN(t,"chip-icon-size"),"--chip-bg":o||r?a.background:void 0,"--chip-hover":o||r?a.hover:void 0,"--chip-color":o||r?a.color:void 0,"--chip-bd":o||r?a.border:void 0,"--chip-spacing":tN(t,"chip-spacing")}}},oI=h_(((e,t)=>{const n=SN("Chip",nI,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,id:l,checked:c,defaultChecked:d,onChange:f,value:p,wrapperProps:h,type:m,disabled:v,children:g,size:y,variant:b,icon:D,rootRef:w,autoContrast:C,mod:k,...E}=n,x=GN({name:"Chip",classes:tI,props:n,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:u,varsResolver:rI}),A=Yj(),F=Vj(l),{styleProps:S,rest:M}=e_(E),[O,T]=Kj({value:c,defaultValue:d,finalValue:!1,onChange:f}),P=A?{checked:A.isChipSelected(p),onChange:e=>{A.onChange(e),f?.(e.currentTarget.checked)},type:A.multiple?"checkbox":"radio"}:{},N=P.checked||O;return(0,B.jsxs)(f_,{size:y,variant:b,ref:w,mod:k,...x("root"),...S,...h,children:[(0,B.jsx)("input",{type:m,...x("input"),checked:N,onChange:e=>T(e.currentTarget.checked),id:F,disabled:v,ref:t,value:p,...P,...M}),(0,B.jsxs)("label",{htmlFor:F,"data-checked":N||void 0,"data-disabled":v||void 0,...x("label",{variant:b||"filled"}),children:[N&&(0,B.jsx)("span",{...x("iconWrapper"),children:D||(0,B.jsx)(Zj,{...x("checkIcon")})}),(0,B.jsx)("span",{children:g})]})]})}));oI.classes=tI,oI.displayName="@mantine/core/Chip",oI.Group=eI;var iI={root:"m_4081bf90"};const aI={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},sI=(e,{grow:t,preventGrowOverflow:n,gap:r,align:o,justify:i,wrap:a},{childWidth:s})=>({root:{"--group-child-width":t&&n?s:void 0,"--group-gap":nN(r),"--group-align":o,"--group-justify":i,"--group-wrap":a}}),uI=h_(((e,t)=>{const n=SN("Group",aI,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,children:u,gap:l,align:c,justify:f,wrap:p,grow:h,preventGrowOverflow:m,vars:v,variant:g,__size:y,mod:b,...D}=n,w=function(e){return d.Children.toArray(e).filter(Boolean)}(u),C=w.length,k=nN(l??"md"),E=GN({name:"Group",props:n,stylesCtx:{childWidth:`calc(${100/C}% - (${k} - ${k} / ${C}))`},className:o,style:i,classes:iI,classNames:r,styles:a,unstyled:s,vars:v,varsResolver:sI});return(0,B.jsx)(f_,{...E("root"),ref:t,variant:g,mod:[{grow:h},b],size:y,...D,children:w})}));uI.classes=iI,uI.displayName="@mantine/core/Group";var lI={root:"m_1b7284a3"};const cI={},dI=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":void 0===t?void 0:rN(t),"--paper-shadow":aN(n)}}),fI=b_(((e,t)=>{const n=SN("Paper",cI,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,withBorder:u,vars:l,radius:c,shadow:d,variant:f,mod:p,...h}=n,m=GN({name:"Paper",props:n,classes:lI,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:l,varsResolver:dI});return(0,B.jsx)(f_,{ref:t,mod:[{"data-with-border":u},p],...m("root"),variant:f,...h})}));function pI(e){const t=(0,d.createContext)(null);return[({children:e,value:n})=>(0,B.jsx)(t.Provider,{value:n,children:e}),()=>{const n=(0,d.useContext)(t);if(null===n)throw new Error(e);return n}]}fI.classes=lI,fI.displayName="@mantine/core/Paper";const[hI,mI]=pI("Card component was not found in tree");var vI={root:"m_e615b15f",section:"m_599a2148"};const gI={},yI=b_(((e,t)=>{const n=SN("CardSection",gI,e),{classNames:r,className:o,style:i,styles:a,vars:s,withBorder:u,inheritPadding:l,mod:c,...d}=n,f=mI();return(0,B.jsx)(f_,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...f.getStyles("section",{className:o,style:i,styles:a,classNames:r}),...d})}));yI.classes=vI,yI.displayName="@mantine/core/CardSection";const bI={},DI=(e,{padding:t})=>({root:{"--card-padding":nN(t)}}),wI=b_(((e,t)=>{const n=SN("Card",bI,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,children:l,padding:c,...f}=n,p=GN({name:"Card",props:n,classes:vI,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:u,varsResolver:DI}),h=d.Children.toArray(l),m=h.map(((e,t)=>"object"==typeof e&&e&&"type"in e&&e.type===yI?(0,d.cloneElement)(e,{"data-first-section":0===t||void 0,"data-last-section":t===h.length-1||void 0}):e));return(0,B.jsx)(hI,{value:{getStyles:p},children:(0,B.jsx)(fI,{ref:t,unstyled:s,...p("root"),...f,children:m})})}));wI.classes=vI,wI.displayName="@mantine/core/Card",wI.Section=yI;var CI={root:"m_3eebeb36",label:"m_9e365f20"};const kI={orientation:"horizontal"},EI=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?hN(t,e):void 0,"--divider-border-style":n,"--divider-size":tN(r,"divider-size")}}),xI=h_(((e,t)=>{const n=SN("Divider",kI,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,color:l,orientation:c,label:d,labelPosition:f,mod:p,...h}=n,m=GN({name:"Divider",classes:CI,props:n,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:u,varsResolver:EI});return(0,B.jsx)(f_,{ref:t,mod:[{orientation:c,"with-label":!!d},p],...m("root"),...h,role:"separator",children:d&&(0,B.jsx)(f_,{component:"span",mod:{position:f},...m("label"),children:d})})}));xI.classes=CI,xI.displayName="@mantine/core/Divider";var AI={root:"m_18320242","skeleton-fade":"m_299c329c"};const FI={visible:!0,animate:!0},SI=(e,{width:t,height:n,radius:r,circle:o})=>({root:{"--skeleton-height":QP(n),"--skeleton-width":QP(o?n:t),"--skeleton-radius":o?"1000px":void 0===r?void 0:rN(r)}}),MI=h_(((e,t)=>{const n=SN("Skeleton",FI,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,width:l,height:c,circle:d,visible:f,radius:p,animate:h,mod:m,...v}=n,g=GN({name:"Skeleton",classes:AI,props:n,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:u,varsResolver:SI});return(0,B.jsx)(f_,{ref:t,...g("root"),mod:[{visible:f,animate:h},m],...v})}));MI.classes=AI,MI.displayName="@mantine/core/Skeleton";const BI=(0,d.createContext)(null),OI=BI.Provider;var TI={group:"m_11def92b",root:"m_f85678b6",image:"m_11f8ac07",placeholder:"m_104cd71f"};const PI={},NI=(e,{spacing:t})=>({group:{"--ag-spacing":nN(t)}}),_I=h_(((e,t)=>{const n=SN("AvatarGroup",PI,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,spacing:l,...c}=n,d=GN({name:"AvatarGroup",classes:TI,props:n,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:u,varsResolver:NI,rootSelector:"group"});return(0,B.jsx)(OI,{value:!0,children:(0,B.jsx)(f_,{ref:t,...d("group"),...c})})}));function jI(e){return(0,B.jsx)("svg",{...e,"data-avatar-placeholder-icon":!0,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,B.jsx)("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}_I.classes=TI,_I.displayName="@mantine/core/AvatarGroup";const II=["blue","cyan","grape","green","indigo","lime","orange","pink","red","teal","violet"];function RI(e,t=2){const n=e.split(" ");return 1===n.length?e.slice(0,t).toUpperCase():n.map((e=>e[0])).slice(0,t).join("").toUpperCase()}const LI={},HI=(e,{size:t,radius:n,variant:r,gradient:o,color:i,autoContrast:a,name:s,allowedInitialsColors:u})=>{const l="initials"===i&&"string"==typeof s?function(e,t=II){const n=function(e){let t=0;for(let n=0;n<e.length;n+=1)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}(e);return t[Math.abs(n)%t.length]}(s,u):i,c=e.variantColorResolver({color:l||"gray",theme:e,gradient:o,variant:r||"light",autoContrast:a});return{root:{"--avatar-size":tN(t,"avatar-size"),"--avatar-radius":void 0===n?void 0:rN(n),"--avatar-bg":l||r?c.background:void 0,"--avatar-color":l||r?c.color:void 0,"--avatar-bd":l||r?c.border:void 0}}},VI=b_(((e,t)=>{const n=SN("Avatar",LI,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,src:l,alt:c,radius:f,color:p,gradient:h,imageProps:m,children:v,autoContrast:g,mod:y,name:b,allowedInitialsColors:D,...w}=n,C={withinGroup:!!(0,d.useContext)(BI)},[k,E]=(0,d.useState)(!l),x=GN({name:"Avatar",props:n,classes:TI,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:u,varsResolver:HI});return(0,d.useEffect)((()=>E(!l)),[l]),(0,B.jsx)(f_,{...x("root"),mod:[{"within-group":C.withinGroup},y],ref:t,...w,children:k?(0,B.jsx)("span",{...x("placeholder"),title:c,children:v||"string"==typeof b&&RI(b)||(0,B.jsx)(jI,{})}):(0,B.jsx)("img",{...m,...x("image"),src:l,alt:c,onError:e=>{E(!0),m?.onError?.(e)}})})}));VI.classes=TI,VI.displayName="@mantine/core/Avatar",VI.Group=_I;const[zI,$I]=Jj({size:"sm"});function UI({classNames:e,styles:t,props:n,stylesCtx:r}){const o=AN();return{resolvedClassNames:IN({theme:o,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:HN({theme:o,styles:t,props:n,stylesCtx:r||void 0})}}const GI=(0,d.forwardRef)((({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>(0,B.jsx)("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:(0,B.jsx)("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})));GI.displayName="@mantine/core/CloseIcon";var WI={root:"m_86a44da5","root--subtle":"m_220c80f2"};const qI={variant:"subtle"},KI=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":tN(t,"cb-size"),"--cb-radius":void 0===n?void 0:rN(n),"--cb-icon-size":QP(r)}}),ZI=b_(((e,t)=>{const n=SN("CloseButton",qI,e),{iconSize:r,children:o,vars:i,radius:a,className:s,classNames:u,style:l,styles:c,unstyled:d,"data-disabled":f,disabled:p,variant:h,icon:m,mod:v,__staticSelector:g,...y}=n,b=GN({name:g||"CloseButton",props:n,className:s,style:l,classes:WI,classNames:u,styles:c,unstyled:d,vars:i,varsResolver:KI});return(0,B.jsxs)(z_,{ref:t,...y,unstyled:d,variant:h,disabled:p,mod:[{disabled:p||f},v],...b("root",{variant:h,active:!p&&!f}),children:[m||(0,B.jsx)(GI,{}),o]})}));ZI.classes=WI,ZI.displayName="@mantine/core/CloseButton";const JI={},XI=h_(((e,t)=>{const n=SN("InputClearButton",JI,e),{size:r,variant:o,vars:i,classNames:a,styles:s,...u}=n,l=$I(),{resolvedClassNames:c,resolvedStyles:d}=UI({classNames:a,styles:s,props:n});return(0,B.jsx)(ZI,{variant:o||"transparent",ref:t,size:r||l?.size||"sm",classNames:c,styles:d,__staticSelector:"InputClearButton",...u})}));XI.displayName="@mantine/core/InputClearButton";const[YI,QI]=Jj({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var eR={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const tR={},nR=(e,{size:t})=>({description:{"--input-description-size":void 0===t?void 0:`calc(${oN(t)} - ${QP(2)})`}}),rR=h_(((e,t)=>{const n=SN("InputDescription",tR,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,size:l,__staticSelector:c,__inheritStyles:d=!0,variant:f,...p}=SN("InputDescription",tR,n),h=QI(),m=GN({name:["InputWrapper",c],props:n,classes:eR,className:o,style:i,classNames:r,styles:a,unstyled:s,rootSelector:"description",vars:u,varsResolver:nR}),v=d&&h?.getStyles||m;return(0,B.jsx)(f_,{component:"p",ref:t,variant:f,size:l,...v("description",h?.getStyles?{className:o,style:i}:void 0),...p})}));rR.classes=eR,rR.displayName="@mantine/core/InputDescription";const oR={},iR=(e,{size:t})=>({error:{"--input-error-size":void 0===t?void 0:`calc(${oN(t)} - ${QP(2)})`}}),aR=h_(((e,t)=>{const n=SN("InputError",oR,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,size:l,__staticSelector:c,__inheritStyles:d=!0,variant:f,...p}=n,h=GN({name:["InputWrapper",c],props:n,classes:eR,className:o,style:i,classNames:r,styles:a,unstyled:s,rootSelector:"error",vars:u,varsResolver:iR}),m=QI(),v=d&&m?.getStyles||h;return(0,B.jsx)(f_,{component:"p",ref:t,variant:f,size:l,...v("error",m?.getStyles?{className:o,style:i}:void 0),...p})}));aR.classes=eR,aR.displayName="@mantine/core/InputError";const sR={labelElement:"label"},uR=(e,{size:t})=>({label:{"--input-label-size":oN(t),"--input-asterisk-color":void 0}}),lR=h_(((e,t)=>{const n=SN("InputLabel",sR,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,labelElement:l,size:c,required:d,htmlFor:f,onMouseDown:p,children:h,__staticSelector:m,variant:v,mod:g,...y}=SN("InputLabel",sR,n),b=GN({name:["InputWrapper",m],props:n,classes:eR,className:o,style:i,classNames:r,styles:a,unstyled:s,rootSelector:"label",vars:u,varsResolver:uR}),D=QI(),w=D?.getStyles||b;return(0,B.jsxs)(f_,{...w("label",D?.getStyles?{className:o,style:i}:void 0),component:l,variant:v,size:c,ref:t,htmlFor:"label"===l?f:void 0,mod:[{required:d},g],onMouseDown:e=>{p?.(e),!e.defaultPrevented&&e.detail>1&&e.preventDefault()},...y,children:[h,d&&(0,B.jsx)("span",{...w("required"),"aria-hidden":!0,children:" *"})]})}));lR.classes=eR,lR.displayName="@mantine/core/InputLabel";const cR={},dR=h_(((e,t)=>{const n=SN("InputPlaceholder",cR,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,__staticSelector:l,variant:c,error:d,mod:f,...p}=SN("InputPlaceholder",cR,n),h=GN({name:["InputPlaceholder",l],props:n,classes:eR,className:o,style:i,classNames:r,styles:a,unstyled:s,rootSelector:"placeholder"});return(0,B.jsx)(f_,{...h("placeholder"),mod:[{error:!!d},f],component:"span",variant:c,ref:t,...p})}));function fR(e,{hasDescription:t,hasError:n}){const r=e.findIndex((e=>"input"===e)),o=e.slice(0,r),i=e.slice(r+1),a=t&&o.includes("description")||n&&o.includes("error");return{offsetBottom:t&&i.includes("description")||n&&i.includes("error"),offsetTop:a}}dR.classes=eR,dR.displayName="@mantine/core/InputPlaceholder";const pR={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},hR=(e,{size:t})=>({label:{"--input-label-size":oN(t),"--input-asterisk-color":void 0},error:{"--input-error-size":void 0===t?void 0:`calc(${oN(t)} - ${QP(2)})`},description:{"--input-description-size":void 0===t?void 0:`calc(${oN(t)} - ${QP(2)})`}}),mR=h_(((e,t)=>{const n=SN("InputWrapper",pR,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:p,inputWrapperOrder:h,label:m,error:v,description:g,labelProps:y,descriptionProps:b,errorProps:D,labelElement:w,children:C,withAsterisk:k,id:E,required:x,__stylesApiProps:A,mod:F,...S}=n,M=GN({name:["InputWrapper",f],props:A||n,classes:eR,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:u,varsResolver:hR}),O={size:l,variant:c,__staticSelector:f},T=Vj(E),P="boolean"==typeof k?k:x,N=D?.id||`${T}-error`,_=b?.id||`${T}-description`,j=T,I=!!v&&"boolean"!=typeof v,R=!!g,L=`${I?N:""} ${R?_:""}`,H=L.trim().length>0?L.trim():void 0,V=y?.id||`${T}-label`,z=m&&(0,B.jsx)(lR,{labelElement:w,id:V,htmlFor:j,required:P,...O,...y,children:m},"label"),$=R&&(0,B.jsx)(rR,{...b,...O,size:b?.size||O.size,id:b?.id||_,children:g},"description"),U=(0,B.jsx)(d.Fragment,{children:p(C)},"input"),G=I&&(0,d.createElement)(aR,{...D,...O,size:D?.size||O.size,key:"error",id:D?.id||N},v),W=h.map((e=>{switch(e){case"label":return z;case"input":return U;case"description":return $;case"error":return G;default:return null}}));return(0,B.jsx)(YI,{value:{getStyles:M,describedBy:H,inputId:j,labelId:V,...fR(h,{hasDescription:R,hasError:I})},children:(0,B.jsx)(f_,{ref:t,variant:c,size:l,mod:[{error:!!v},F],...M("root"),...S,children:W})})}));mR.classes=eR,mR.displayName="@mantine/core/InputWrapper";const vR={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},gR=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":tN(t.size,"input-height"),"--input-fz":oN(t.size),"--input-radius":void 0===t.radius?void 0:rN(t.radius),"--input-left-section-width":void 0!==t.leftSectionWidth?QP(t.leftSectionWidth):void 0,"--input-right-section-width":void 0!==t.rightSectionWidth?QP(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?tN(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),yR=b_(((e,t)=>{const n=SN("Input",vR,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,required:u,__staticSelector:l,__stylesApiProps:c,size:d,wrapperProps:f,error:p,disabled:h,leftSection:m,leftSectionProps:v,leftSectionWidth:g,rightSection:y,rightSectionProps:b,rightSectionWidth:D,rightSectionPointerEvents:w,leftSectionPointerEvents:C,variant:k,vars:E,pointer:x,multiline:A,radius:F,id:S,withAria:M,withErrorStyles:O,mod:T,inputSize:P,__clearSection:N,__clearable:_,__defaultRightSection:j,...I}=n,{styleProps:R,rest:L}=e_(I),H=QI(),V=GN({name:["Input",l],props:c||n,classes:eR,className:o,style:i,classNames:r,styles:a,unstyled:s,stylesCtx:{offsetBottom:H?.offsetBottom,offsetTop:H?.offsetTop},rootSelector:"wrapper",vars:E,varsResolver:gR}),z=M?{required:u,disabled:h,"aria-invalid":!!p,"aria-describedby":H?.describedBy,id:H?.inputId||S}:{},$=y||_&&N||j;return(0,B.jsx)(zI,{value:{size:d||"sm"},children:(0,B.jsxs)(f_,{...V("wrapper"),...R,...f,mod:[{error:!!p&&O,pointer:x,disabled:h,multiline:A,"data-with-right-section":!!$,"data-with-left-section":!!m},T],variant:k,size:d,children:[m&&(0,B.jsx)("div",{...v,"data-position":"left",...V("section",{className:v?.className,style:v?.style}),children:m}),(0,B.jsx)(f_,{component:"input",...L,...z,ref:t,required:u,mod:{disabled:h,error:!!p&&O},variant:k,__size:P,...V("input")}),$&&(0,B.jsx)("div",{...b,"data-position":"right",...V("section",{className:b?.className,style:b?.style}),children:$})]})})}));yR.classes=eR,yR.Wrapper=mR,yR.Label=lR,yR.Error=aR,yR.Description=rR,yR.Placeholder=dR,yR.ClearButton=XI,yR.displayName="@mantine/core/Input";const bR={__staticSelector:"InputBase",withAria:!0},DR=b_(((e,t)=>{const{inputProps:n,wrapperProps:r,...o}=function(e,t,n){const r=SN("InputBase",t,n),{label:o,description:i,error:a,required:s,classNames:u,styles:l,className:c,unstyled:d,__staticSelector:f,__stylesApiProps:p,errorProps:h,labelProps:m,descriptionProps:v,wrapperProps:g,id:y,size:b,style:D,inputContainer:w,inputWrapperOrder:C,withAsterisk:k,variant:E,vars:x,mod:A,...F}=r,{styleProps:S,rest:M}=e_(F);return{...M,classNames:u,styles:l,unstyled:d,wrapperProps:{...{label:o,description:i,error:a,required:s,classNames:u,className:c,__staticSelector:f,__stylesApiProps:p||r,errorProps:h,labelProps:m,descriptionProps:v,unstyled:d,styles:l,size:b,style:D,inputContainer:w,inputWrapperOrder:C,withAsterisk:k,variant:E,id:y,mod:A,...g},...S},inputProps:{required:s,classNames:u,styles:l,unstyled:d,size:b,__staticSelector:f,__stylesApiProps:p||r,error:a,variant:E,id:y}}}(0,bR,e);return(0,B.jsx)(yR.Wrapper,{...r,children:(0,B.jsx)(yR,{...n,...o,ref:t})})}));DR.classes={...yR.classes,...yR.Wrapper.classes},DR.displayName="@mantine/core/InputBase";const wR={},CR=h_(((e,t)=>{const n=SN("TextInput",wR,e);return(0,B.jsx)(DR,{component:"input",ref:t,...n,__staticSelector:"TextInput"})}));function kR(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}CR.classes=DR.classes,CR.displayName="@mantine/core/TextInput";const ER=["mousedown","touchstart"];var xR={root:"m_9814e45f"};const AR={zIndex:mj("modal")},FR=(e,{gradient:t,color:n,backgroundOpacity:r,blur:o,radius:i,zIndex:a})=>({root:{"--overlay-bg":t||(void 0!==n||void 0!==r)&&vN(n||"#000",r??.6)||void 0,"--overlay-filter":o?`blur(${QP(o)})`:void 0,"--overlay-radius":void 0===i?void 0:rN(i),"--overlay-z-index":a?.toString()}}),SR=b_(((e,t)=>{const n=SN("Overlay",AR,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,fixed:l,center:c,children:d,radius:f,zIndex:p,gradient:h,blur:m,color:v,backgroundOpacity:g,mod:y,...b}=n,D=GN({name:"Overlay",props:n,classes:xR,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:u,varsResolver:FR});return(0,B.jsx)(f_,{ref:t,...D("root"),mod:[{center:c,fixed:l},y],...b,children:d})}));SR.classes=xR,SR.displayName="@mantine/core/Overlay";const[MR,BR]=pI("Popover component was not found in the tree"),OR=()=>{};function TR(e,t={active:!0}){return"function"==typeof e&&t.active?n=>{"Escape"===n.key&&(e(n),t.onTrigger?.())}:t.onKeyDown||OR}const PR=/input|select|textarea|button|object/,NR="a, input, select, textarea, button, object, [tabindex]";function _R(e){return"none"===e.style.display}function jR(e){let t=e.getAttribute("tabindex");return null===t&&(t=void 0),parseInt(t,10)}function IR(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(jR(e));return(PR.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&function(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||"hidden"===e.getAttribute("type"))return!1;let t=e;for(;t&&t!==document.body&&11!==t.nodeType;){if(_R(t))return!1;t=t.parentNode}return!0}(e)}function RR(e){const t=jR(e);return(Number.isNaN(t)||t>=0)&&IR(e)}function LR(e=!0){const t=(0,d.useRef)(null),n=e=>{let t=e.querySelector("[data-autofocus]");if(!t){const n=Array.from(e.querySelectorAll(NR));t=n.find(RR)||n.find(IR)||null,!t&&IR(e)&&(t=e)}t&&t.focus({preventScroll:!0})},r=(0,d.useCallback)((r=>{e&&null!==r&&t.current!==r&&(r?(setTimeout((()=>{r.getRootNode()&&n(r)})),t.current=r):t.current=null)}),[e]);return(0,d.useEffect)((()=>{if(!e)return;t.current&&setTimeout((()=>n(t.current)));const r=e=>{"Tab"===e.key&&t.current&&function(e,t){const n=(r=e,Array.from(r.querySelectorAll(NR)).filter(RR));var r;if(!n.length)return void t.preventDefault();const o=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let a=o===i.activeElement||e===i.activeElement;const s=i.activeElement;if("INPUT"===s.tagName&&"radio"===s.getAttribute("type")){const e=n.filter((e=>"radio"===e.getAttribute("type")&&e.getAttribute("name")===s.getAttribute("name")));a=e.includes(o)}if(!a)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}(t.current,e)};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)}),[e]),r}var HR={root:"m_515a97f8"};const VR={},zR=h_(((e,t)=>{const n=SN("VisuallyHidden",VR,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,...l}=n,c=GN({name:"VisuallyHidden",classes:HR,props:n,className:o,style:i,classNames:r,styles:a,unstyled:s});return(0,B.jsx)(f_,{component:"span",ref:t,...c("root"),...l})}));function $R({children:e,active:t=!0,refProp:n="ref",innerRef:r}){const o=fj(LR(t),r);return pj(e)?(0,d.cloneElement)(e,{[n]:o}):e}function UR(e){return(0,B.jsx)(zR,{tabIndex:-1,"data-autofocus":!0,...e})}zR.classes=HR,zR.displayName="@mantine/core/VisuallyHidden",$R.displayName="@mantine/core/FocusTrap",UR.displayName="@mantine/core/FocusTrapInitialFocus",$R.InitialFocus=UR;var GR={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const WR={},qR=h_(((e,t)=>{const n=SN("PopoverDropdown",WR,e),{className:r,style:o,vars:i,children:a,onKeyDownCapture:s,variant:u,classNames:l,styles:c,...f}=n,p=BR(),h=function({opened:e,shouldReturnFocus:t=!0}){const n=(0,d.useRef)(null),r=()=>{n.current&&"focus"in n.current&&"function"==typeof n.current.focus&&n.current?.focus({preventScroll:!0})};return I_((()=>{let o=-1;const i=e=>{"Tab"===e.key&&window.clearTimeout(o)};return document.addEventListener("keydown",i),e?n.current=document.activeElement:t&&(o=window.setTimeout(r,10)),()=>{window.clearTimeout(o),document.removeEventListener("keydown",i)}}),[e,t]),r}({opened:p.opened,shouldReturnFocus:p.returnFocus}),m=p.withRoles?{"aria-labelledby":p.getTargetId(),id:p.getDropdownId(),role:"dialog",tabIndex:-1}:{},v=fj(t,p.floating);return p.disabled?null:(0,B.jsx)(Mj,{...p.portalProps,withinPortal:p.withinPortal,children:(0,B.jsx)(L_,{mounted:p.opened,...p.transitionProps,transition:p.transitionProps?.transition||"fade",duration:p.transitionProps?.duration??150,keepMounted:p.keepMounted,exitDuration:"number"==typeof p.transitionProps?.exitDuration?p.transitionProps.exitDuration:p.transitionProps?.duration,children:e=>(0,B.jsx)($R,{active:p.trapFocus&&p.opened,innerRef:v,children:(0,B.jsxs)(f_,{...m,...f,variant:u,onKeyDownCapture:TR((()=>{p.onClose?.(),p.onDismiss?.()}),{active:p.closeOnEscape,onTrigger:h,onKeyDown:s}),"data-position":p.placement,"data-fixed":"fixed"===p.floatingStrategy||void 0,...p.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...e,zIndex:p.zIndex,top:p.y??0,left:p.x??0,width:"target"===p.width?void 0:QP(p.width)},p.resolvedStyles.dropdown,c?.dropdown,o]}),children:[a,(0,B.jsx)(Ej,{ref:p.arrowRef,arrowX:p.arrowX,arrowY:p.arrowY,visible:p.withArrow,position:p.placement,arrowSize:p.arrowSize,arrowRadius:p.arrowRadius,arrowOffset:p.arrowOffset,arrowPosition:p.arrowPosition,...p.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})}));qR.classes=GR,qR.displayName="@mantine/core/PopoverDropdown";const KR={refProp:"ref",popupType:"dialog"},ZR=h_(((e,t)=>{const{children:n,refProp:r,popupType:o,...i}=SN("PopoverTarget",KR,e);if(!pj(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const a=i,s=BR(),u=fj(s.reference,vj(n),t),l=s.withRoles?{"aria-haspopup":o,"aria-expanded":s.opened,"aria-controls":s.getDropdownId(),id:s.getTargetId()}:{};return(0,d.cloneElement)(n,{...a,...l,...s.targetProps,className:NN(s.targetProps.className,a.className,n.props.className),[r]:u,...s.controlled?null:{onClick:s.onToggle}})}));function JR(e,t){const n=function(e){if(void 0===e)return{shift:!0,flip:!0};const t={...e};return void 0===e.shift&&(t.shift=!0),void 0===e.flip&&(t.flip=!0),t}(e.middlewares),r=[IS(e.offset)];return n.shift&&r.push(RS("boolean"==typeof n.shift?{limiter:LS(),padding:5}:{limiter:LS(),padding:5,...n.shift})),n.flip&&r.push("boolean"==typeof n.flip?HS():HS(n.flip)),n.inline&&r.push("boolean"==typeof n.inline?zS():zS(n.inline)),r.push($S({element:e.arrowRef,padding:e.arrowOffset})),(n.size||"target"===e.width)&&r.push(VS({..."boolean"==typeof n.size?{}:n.size,apply({rects:r,availableWidth:o,availableHeight:i,...a}){const s=t(),u=s.refs.floating.current?.style??{};n.size&&("object"==typeof n.size&&n.size.apply?n.size.apply({rects:r,availableWidth:o,availableHeight:i,...a}):Object.assign(u,{maxWidth:`${o}px`,maxHeight:`${i}px`})),"target"===e.width&&Object.assign(u,{width:`${r.reference.width}px`})}})),r}ZR.displayName="@mantine/core/PopoverTarget";const XR={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:mj("popover"),__staticSelector:"Popover",width:"max-content"},YR=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":void 0===t?void 0:rN(t),"--popover-shadow":aN(n)}});function QR(e){const t=SN("Popover",XR,e),{children:n,position:r,offset:o,onPositionChange:i,positionDependencies:a,opened:s,transitionProps:u,onExitTransitionEnd:l,onEnterTransitionEnd:c,width:f,middlewares:p,withArrow:h,arrowSize:m,arrowOffset:v,arrowRadius:g,arrowPosition:y,unstyled:b,classNames:D,styles:w,closeOnClickOutside:C,withinPortal:k,portalProps:E,closeOnEscape:x,clickOutsideEvents:A,trapFocus:F,onClose:S,onDismiss:M,onOpen:O,onChange:T,zIndex:P,radius:N,shadow:_,id:j,defaultOpened:I,__staticSelector:R,withRoles:L,disabled:H,returnFocus:V,variant:z,keepMounted:$,vars:U,floatingStrategy:G,withOverlay:W,overlayProps:q,...K}=t,Z=GN({name:R,props:t,classes:GR,classNames:D,styles:w,unstyled:b,rootSelector:"dropdown",vars:U,varsResolver:YR}),{resolvedStyles:J}=UI({classNames:D,styles:w,props:t}),X=(0,d.useRef)(null),[Y,Q]=(0,d.useState)(null),[ee,te]=(0,d.useState)(null),{dir:ne}=yj(),re=Vj(j),oe=function(e){const[t,n]=Kj({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=(0,d.useRef)(t),o=MM({strategy:e.strategy,placement:e.position,middleware:JR(e,(()=>o))});return zj({opened:t,position:e.position,positionDependencies:e.positionDependencies||[],floating:o}),I_((()=>{e.onPositionChange?.(o.placement)}),[o.placement]),I_((()=>{t!==r.current&&(t?e.onOpen?.():e.onClose?.()),r.current=t}),[t,e.onClose,e.onOpen]),{floating:o,controlled:"boolean"==typeof e.opened,opened:t,onClose:()=>{t&&n(!1)},onToggle:()=>n(!t)}}({middlewares:p,width:f,position:bj(ne,r),offset:"number"==typeof o?o+(h?m/2:0):o,arrowRef:X,arrowOffset:v,onPositionChange:i,positionDependencies:a,opened:s,defaultOpened:I,onChange:T,onOpen:O,onClose:S,onDismiss:M,strategy:G});!function(e,t,n){const r=(0,d.useRef)(null);(0,d.useEffect)((()=>{const o=t=>{const{target:o}=t??{};if(Array.isArray(n)){const r=o?.hasAttribute("data-ignore-outside-clicks")||!document.body.contains(o)&&"HTML"!==o.tagName;n.every((e=>!!e&&!t.composedPath().includes(e)))&&!r&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||ER).forEach((e=>document.addEventListener(e,o))),()=>{(t||ER).forEach((e=>document.removeEventListener(e,o)))}}),[r,e,n])}((()=>{C&&(oe.onClose(),M?.())}),A,[Y,ee]);const ie=(0,d.useCallback)((e=>{Q(e),oe.floating.refs.setReference(e)}),[oe.floating.refs.setReference]),ae=(0,d.useCallback)((e=>{te(e),oe.floating.refs.setFloating(e)}),[oe.floating.refs.setFloating]),se=(0,d.useCallback)((()=>{u?.onExited?.(),l?.()}),[u?.onExited,l]),ue=(0,d.useCallback)((()=>{u?.onEntered?.(),c?.()}),[u?.onEntered,c]);return(0,B.jsxs)(MR,{value:{returnFocus:V,disabled:H,controlled:oe.controlled,reference:ie,floating:ae,x:oe.floating.x,y:oe.floating.y,arrowX:oe.floating?.middlewareData?.arrow?.x,arrowY:oe.floating?.middlewareData?.arrow?.y,opened:oe.opened,arrowRef:X,transitionProps:{...u,onExited:se,onEntered:ue},width:f,withArrow:h,arrowSize:m,arrowOffset:v,arrowRadius:g,arrowPosition:y,placement:oe.floating.placement,trapFocus:F,withinPortal:k,portalProps:E,zIndex:P,radius:N,shadow:_,closeOnEscape:x,onDismiss:M,onClose:oe.onClose,onToggle:oe.onToggle,getTargetId:()=>`${re}-target`,getDropdownId:()=>`${re}-dropdown`,withRoles:L,targetProps:K,__staticSelector:R,classNames:D,styles:w,unstyled:b,variant:z,keepMounted:$,getStyles:Z,resolvedStyles:J,floatingStrategy:G},children:[n,W&&(0,B.jsx)(L_,{transition:"fade",mounted:oe.opened,duration:u?.duration||250,exitDuration:u?.exitDuration||250,children:e=>(0,B.jsx)(Mj,{withinPortal:k,children:(0,B.jsx)(SR,{...q,...Z("overlay",{className:q?.className,style:[e,q?.style]})})})})]})}QR.Target=ZR,QR.Dropdown=qR,QR.displayName="@mantine/core/Popover",QR.extend=e=>e;const[eL,tL]=pI("Menu component was not found in the tree");var nL={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const rL={},oL=h_(((e,t)=>{const{classNames:n,className:r,style:o,styles:i,vars:a,...s}=SN("MenuDivider",rL,e),u=tL();return(0,B.jsx)(f_,{ref:t,...u.getStyles("divider",{className:r,style:o,styles:i,classNames:n}),...s})}));function iL(e,t){return n=>{e?.(n),t?.(n)}}oL.classes=nL,oL.displayName="@mantine/core/MenuDivider";const aL={},sL=h_(((e,t)=>{const{classNames:n,className:r,style:o,styles:i,vars:a,onMouseEnter:s,onMouseLeave:u,onKeyDown:l,children:c,...f}=SN("MenuDropdown",aL,e),p=(0,d.useRef)(null),h=tL(),m=iL(l,(e=>{"ArrowUp"!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),p.current?.querySelectorAll("[data-menu-item]:not(:disabled)")[0]?.focus())})),v=iL(s,(()=>("hover"===h.trigger||"click-hover"===h.trigger)&&h.openDropdown())),g=iL(u,(()=>("hover"===h.trigger||"click-hover"===h.trigger)&&h.closeDropdown()));return(0,B.jsxs)(QR.Dropdown,{...f,onMouseEnter:v,onMouseLeave:g,role:"menu","aria-orientation":"vertical",ref:fj(t,p),...h.getStyles("dropdown",{className:r,style:o,styles:i,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:m,children:[h.withInitialFocusPlaceholder&&(0,B.jsx)("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),c]})}));function uL({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:o=!1,dir:i="rtl",orientation:a}){return s=>{n?.(s);const u=Array.from(kR(s.currentTarget,e)?.querySelectorAll(t)||[]).filter((t=>function(e,t,n){return kR(e,n)===kR(t,n)}(s.currentTarget,t,e))),l=u.findIndex((e=>s.currentTarget===e)),c=function(e,t,n){for(let n=e+1;n<t.length;n+=1)if(!t[n].disabled)return n;if(n)for(let e=0;e<t.length;e+=1)if(!t[e].disabled)return e;return e}(l,u,r),d=function(e,t,n){for(let n=e-1;n>=0;n-=1)if(!t[n].disabled)return n;if(n)for(let e=t.length-1;e>-1;e-=1)if(!t[e].disabled)return e;return e}(l,u,r),f="rtl"===i?d:c,p="rtl"===i?c:d;switch(s.key){case"ArrowRight":"horizontal"===a&&(s.stopPropagation(),s.preventDefault(),u[f].focus(),o&&u[f].click());break;case"ArrowLeft":"horizontal"===a&&(s.stopPropagation(),s.preventDefault(),u[p].focus(),o&&u[p].click());break;case"ArrowUp":"vertical"===a&&(s.stopPropagation(),s.preventDefault(),u[d].focus(),o&&u[d].click());break;case"ArrowDown":"vertical"===a&&(s.stopPropagation(),s.preventDefault(),u[c].focus(),o&&u[c].click());break;case"Home":s.stopPropagation(),s.preventDefault(),!u[0].disabled&&u[0].focus();break;case"End":{s.stopPropagation(),s.preventDefault();const e=u.length-1;!u[e].disabled&&u[e].focus();break}}}}sL.classes=nL,sL.displayName="@mantine/core/MenuDropdown";const lL={},cL=b_(((e,t)=>{const{classNames:n,className:r,style:o,styles:i,vars:a,color:s,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:p,"data-disabled":h,...m}=SN("MenuItem",lL,e),v=tL(),g=AN(),{dir:y}=yj(),b=(0,d.useRef)(null),D=v.getItemIndex(b.current),w=m,C=iL(w.onMouseLeave,(()=>v.setHovered(-1))),k=iL(w.onMouseEnter,(()=>v.setHovered(v.getItemIndex(b.current)))),E=iL(w.onClick,(()=>{h||("boolean"==typeof u?u&&v.closeDropdownImmediately():v.closeOnItemClick&&v.closeDropdownImmediately())})),x=iL(w.onFocus,(()=>v.setHovered(v.getItemIndex(b.current)))),A=s?g.variantColorResolver({color:s,theme:g,variant:"light"}):void 0,F=s?pN({color:s,theme:g}):null;return(0,B.jsxs)(z_,{...m,unstyled:v.unstyled,tabIndex:v.menuItemTabIndex,onFocus:x,...v.getStyles("item",{className:r,style:o,styles:i,classNames:n}),ref:fj(b,t),role:"menuitem",disabled:p,"data-menu-item":!0,"data-disabled":p||h||void 0,"data-hovered":v.hovered===D||void 0,"data-mantine-stop-propagation":!0,onMouseEnter:k,onMouseLeave:C,onClick:E,onKeyDown:uL({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:v.loop,dir:y,orientation:"vertical",onKeyDown:w.onKeyDown}),__vars:{"--menu-item-color":F?.isThemeColor&&void 0===F?.shade?`var(--mantine-color-${F.color}-6)`:A?.color,"--menu-item-hover":A?.hover},children:[l&&(0,B.jsx)("div",{...v.getStyles("itemSection",{styles:i,classNames:n}),"data-position":"left",children:l}),f&&(0,B.jsx)("div",{...v.getStyles("itemLabel",{styles:i,classNames:n}),children:f}),c&&(0,B.jsx)("div",{...v.getStyles("itemSection",{styles:i,classNames:n}),"data-position":"right",children:c})]})}));cL.classes=nL,cL.displayName="@mantine/core/MenuItem";const dL={},fL=h_(((e,t)=>{const{classNames:n,className:r,style:o,styles:i,vars:a,...s}=SN("MenuLabel",dL,e),u=tL();return(0,B.jsx)(f_,{ref:t,...u.getStyles("label",{className:r,style:o,styles:i,classNames:n}),...s})}));fL.classes=nL,fL.displayName="@mantine/core/MenuLabel";const pL={refProp:"ref"},hL=(0,d.forwardRef)(((e,t)=>{const{children:n,refProp:r,...o}=SN("MenuTarget",pL,e);if(!pj(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const i=tL(),a=n.props,s=iL(a.onClick,(()=>{"click"===i.trigger?i.toggleDropdown():"click-hover"===i.trigger&&(i.setOpenedViaClick(!0),i.opened||i.openDropdown())})),u=iL(a.onMouseEnter,(()=>("hover"===i.trigger||"click-hover"===i.trigger)&&i.openDropdown())),l=iL(a.onMouseLeave,(()=>{"hover"===i.trigger?i.closeDropdown():"click-hover"!==i.trigger||i.openedViaClick||i.closeDropdown()}));return(0,B.jsx)(QR.Target,{refProp:r,popupType:"menu",ref:t,...o,children:(0,d.cloneElement)(n,{onClick:s,onMouseEnter:u,onMouseLeave:l,"data-expanded":!!i.opened||void 0})})}));hL.displayName="@mantine/core/MenuTarget";const mL={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function vL(e){const t=SN("Menu",mL,e),{children:n,onOpen:r,onClose:o,opened:i,defaultOpened:a,trapFocus:s,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:p,openDelay:h,closeDelay:m,classNames:v,styles:g,unstyled:y,variant:b,vars:D,menuItemTabIndex:w,keepMounted:C,withInitialFocusPlaceholder:k,...E}=t,x=GN({name:"Menu",classes:nL,props:t,classNames:v,styles:g,unstyled:y}),[A,{setHovered:F,resetHovered:S}]=function(){const[e,t]=(0,d.useState)(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}(),[M,O]=Kj({value:i,defaultValue:a,finalValue:!1,onChange:u}),[T,P]=(0,d.useState)(!1),N=()=>{O(!1),P(!1),M&&o?.()},_=()=>{O(!0),!M&&r?.()},j=()=>{M?N():_()},{openDropdown:I,closeDropdown:R}=function({open:e,close:t,openDelay:n,closeDelay:r}){const o=(0,d.useRef)(-1),i=(0,d.useRef)(-1),a=()=>{window.clearTimeout(o.current),window.clearTimeout(i.current)};return(0,d.useEffect)((()=>a),[]),{openDropdown:()=>{a(),0===n||void 0===n?e():o.current=window.setTimeout(e,n)},closeDropdown:()=>{a(),0===r||void 0===r?t():i.current=window.setTimeout(t,r)}}}({open:_,close:N,closeDelay:m,openDelay:h}),{resolvedClassNames:L,resolvedStyles:H}=UI({classNames:v,styles:g,props:t});return I_((()=>{S()}),[M]),(0,B.jsx)(eL,{value:{getStyles:x,opened:M,toggleDropdown:j,getItemIndex:e=>function(e,t,n){return n?Array.from(kR(n,"[data-menu-dropdown]")?.querySelectorAll("[data-menu-item]")||[]).findIndex((e=>e===n)):null}(0,0,e),hovered:A,setHovered:F,openedViaClick:T,setOpenedViaClick:P,closeOnItemClick:l,closeDropdown:"click"===p?N:R,openDropdown:"click"===p?_:I,closeDropdownImmediately:N,loop:c,trigger:p,unstyled:y,menuItemTabIndex:w,withInitialFocusPlaceholder:k},children:(0,B.jsx)(QR,{...E,opened:M,onChange:j,defaultOpened:a,trapFocus:!C&&s,closeOnEscape:f,__staticSelector:"Menu",classNames:L,styles:H,unstyled:y,variant:b,keepMounted:C,children:n})})}function gL(e,t){return n=>{if("string"!=typeof n||0===n.trim().length)throw new Error(t);return`${e}-${n}`}}function yL({color:e,theme:t,autoContrast:n}){return("boolean"==typeof n?n:t.autoContrast)&&pN({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function bL(e,t){return yL({color:e.colors[e.primaryColor][cN(e,t)],theme:e,autoContrast:null})}function DL(e,t){return"boolean"==typeof e?e:t.autoContrast}vL.extend=e=>e,vL.withProps=function(e){const t=e;return e=>{const n=(0,d.forwardRef)(((n,r)=>(0,B.jsx)(t,{...e,...n,ref:r})));return n.extend=t.extend,n.displayName=`WithProps(${t.displayName})`,n}}(vL),vL.classes=nL,vL.displayName="@mantine/core/Menu",vL.Item=cL,vL.Label=fL,vL.Dropdown=sL,vL.Target=hL,vL.Divider=oL;const[wL,CL]=pI("Tabs component was not found in the tree");var kL={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const EL={},xL=h_(((e,t)=>{const n=SN("TabsList",EL,e),{children:r,className:o,grow:i,justify:a,classNames:s,styles:u,style:l,mod:c,...d}=n,f=CL();return(0,B.jsx)(f_,{...d,...f.getStyles("list",{className:o,style:l,classNames:s,styles:u,props:n,variant:f.variant}),ref:t,role:"tablist",variant:f.variant,mod:[{grow:i,orientation:f.orientation,placement:"vertical"===f.orientation&&f.placement,inverted:f.inverted},c],"aria-orientation":f.orientation,__vars:{"--tabs-justify":a},children:r})}));xL.classes=kL,xL.displayName="@mantine/core/TabsList";const AL={},FL=h_(((e,t)=>{const n=SN("TabsPanel",AL,e),{children:r,className:o,value:i,classNames:a,styles:s,style:u,mod:l,keepMounted:c,...d}=n,f=CL(),p=f.value===i,h=f.keepMounted||c||p?r:null;return(0,B.jsx)(f_,{...d,...f.getStyles("panel",{className:o,classNames:a,styles:s,style:[u,p?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(i),"aria-labelledby":f.getTabId(i),children:h})}));FL.classes=kL,FL.displayName="@mantine/core/TabsPanel";const SL={},ML=h_(((e,t)=>{const n=SN("TabsTab",SL,e),{className:r,children:o,rightSection:i,leftSection:a,value:s,onClick:u,onKeyDown:l,disabled:c,color:d,style:f,classNames:p,styles:h,vars:m,mod:v,tabIndex:g,...y}=n,b=AN(),{dir:D}=yj(),w=CL(),C=s===w.value,k={classNames:p,styles:h,props:n};return(0,B.jsxs)(z_,{...y,...w.getStyles("tab",{className:r,style:f,variant:w.variant,...k}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:C,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:"vertical"===w.orientation&&w.placement},v],ref:t,role:"tab",id:w.getTabId(s),"aria-selected":C,tabIndex:void 0!==g?g:C||null===w.value?0:-1,"aria-controls":w.getPanelId(s),onClick:e=>{w.onChange(w.allowTabDeactivation&&s===w.value?null:s),u?.(e)},__vars:{"--tabs-color":d?hN(d,b):void 0},onKeyDown:uL({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:D,onKeyDown:l}),children:[a&&(0,B.jsx)("span",{...w.getStyles("tabSection",k),"data-position":"left",children:a}),o&&(0,B.jsx)("span",{...w.getStyles("tabLabel",k),children:o}),i&&(0,B.jsx)("span",{...w.getStyles("tabSection",k),"data-position":"right",children:i})]})}));ML.classes=kL,ML.displayName="@mantine/core/TabsTab";const BL="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",OL={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},TL=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":rN(t),"--tabs-color":hN(n,e),"--tabs-text-color":DL(r,e)?yL({color:n,theme:e,autoContrast:r}):void 0}}),PL=h_(((e,t)=>{const n=SN("Tabs",OL,e),{defaultValue:r,value:o,onChange:i,orientation:a,children:s,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:d,variant:f,color:p,radius:h,inverted:m,placement:v,keepMounted:g,classNames:y,styles:b,unstyled:D,className:w,style:C,vars:k,autoContrast:E,mod:x,...A}=n,F=Vj(l),[S,M]=Kj({value:o,defaultValue:r,finalValue:null,onChange:i}),O=GN({name:"Tabs",props:n,classes:kL,className:w,style:C,classNames:y,styles:b,unstyled:D,vars:k,varsResolver:TL});return(0,B.jsx)(wL,{value:{placement:v,value:S,orientation:a,id:F,loop:u,activateTabWithKeyboard:c,getTabId:gL(`${F}-tab`,BL),getPanelId:gL(`${F}-panel`,BL),onChange:M,allowTabDeactivation:d,variant:f,color:p,radius:h,inverted:m,keepMounted:g,unstyled:D,getStyles:O},children:(0,B.jsx)(f_,{ref:t,id:F,variant:f,mod:[{orientation:a,inverted:"horizontal"===a&&m,placement:"vertical"===a&&v},x],...O("root"),...A,children:s})})}));PL.classes=kL,PL.displayName="@mantine/core/Tabs",PL.Tab=ML,PL.Panel=FL,PL.List=xL;var NL={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const _L={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:mj("overlay")},jL=(e,{zIndex:t})=>({root:{"--lo-z-index":t?.toString()}}),IL=h_(((e,t)=>{const n=SN("LoadingOverlay",_L,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,transitionProps:l,loaderProps:c,overlayProps:d,visible:f,zIndex:p,...h}=n,m=AN(),v=GN({name:"LoadingOverlay",classes:NL,props:n,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:u,varsResolver:jL}),g={..._L.overlayProps,...d};return(0,B.jsx)(L_,{transition:"fade",...l,mounted:!!f,children:e=>(0,B.jsxs)(f_,{...v("root",{style:e}),ref:t,...h,children:[(0,B.jsx)(T_,{...v("loader"),unstyled:s,...c}),(0,B.jsx)(SR,{...g,...v("overlay"),darkHidden:!0,unstyled:s,color:d?.color||m.white}),(0,B.jsx)(SR,{...g,...v("overlay"),lightHidden:!0,unstyled:s,color:d?.color||m.colors.dark[5]})]})})}));IL.classes=NL,IL.displayName="@mantine/core/LoadingOverlay";const RL={multiple:!1},LL=(0,d.forwardRef)(((e,t)=>{const{onChange:n,children:r,multiple:o,accept:i,name:a,form:s,resetRef:u,disabled:l,capture:c,inputProps:f,...p}=SN("FileButton",RL,e),h=(0,d.useRef)(null);return cj(u,(()=>{h.current&&(h.current.value="")})),(0,B.jsxs)(B.Fragment,{children:[r({onClick:()=>{!l&&h.current?.click()},...p}),(0,B.jsx)("input",{style:{display:"none"},type:"file",accept:i,multiple:o,onChange:e=>{n(o?Array.from(e.currentTarget.files):e.currentTarget.files[0]||null)},ref:fj(t,h),name:a,form:s,capture:c,...f})]})}));LL.displayName="@mantine/core/FileButton";const HL={valueComponent:({value:e})=>(0,B.jsx)("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(e)?e.map((e=>e.name)).join(", "):e?.name})},VL=h_(((e,t)=>{const n=SN("FileInput",HL,e),{unstyled:r,vars:o,onChange:i,value:a,defaultValue:s,multiple:u,accept:l,name:c,form:f,valueComponent:p,clearable:h,clearButtonProps:m,readOnly:v,capture:g,fileInputProps:y,rightSection:b,size:D,placeholder:w,component:C,resetRef:k,classNames:E,styles:x,...A}=n,F=(0,d.useRef)(null),{resolvedClassNames:S,resolvedStyles:M}=UI({classNames:E,styles:x,props:n}),[O,T]=Kj({value:a,defaultValue:s,onChange:i,finalValue:u?[]:null}),P=Array.isArray(O)?0!==O.length:null!==O,N=b||(h&&P&&!v?(0,B.jsx)(ZI,{...m,variant:"subtle",onClick:()=>T(u?[]:null),size:D,unstyled:r}):null);(0,d.useEffect)((()=>{(Array.isArray(O)&&0===O.length||null===O)&&F.current?.()}),[O]);const _=p;return(0,B.jsx)(LL,{onChange:T,multiple:u,accept:l,name:c,form:f,resetRef:fj(F,k),disabled:v,capture:g,inputProps:y,children:e=>(0,B.jsx)(DR,{component:C||"button",ref:t,rightSection:N,...e,...A,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:n,unstyled:r,size:D,classNames:E,styles:x,children:P?(0,B.jsx)(_,{value:O}):(0,B.jsx)(yR.Placeholder,{__staticSelector:"FileInput",classNames:S,styles:M,children:w})})})}));VL.classes=DR.classes,VL.displayName="@mantine/core/FileInput";const zL=VL;var $L={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const UL={},GL=(e,{radius:t,color:n,gradient:r,variant:o,size:i,autoContrast:a})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:o||"filled",autoContrast:a});return{root:{"--badge-height":tN(i,"badge-height"),"--badge-padding-x":tN(i,"badge-padding-x"),"--badge-fz":tN(i,"badge-fz"),"--badge-radius":void 0===t?void 0:rN(t),"--badge-bg":n||o?s.background:void 0,"--badge-color":n||o?s.color:void 0,"--badge-bd":n||o?s.border:void 0,"--badge-dot-color":"dot"===o?hN(n,e):void 0}}},WL=b_(((e,t)=>{const n=SN("Badge",UL,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,radius:l,color:c,gradient:d,leftSection:f,rightSection:p,children:h,variant:m,fullWidth:v,autoContrast:g,circle:y,mod:b,...D}=n,w=GN({name:"Badge",props:n,classes:$L,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:u,varsResolver:GL});return(0,B.jsxs)(f_,{variant:m,mod:[{block:v,circle:y,"with-right-section":!!p,"with-left-section":!!f},b],...w("root",{variant:m}),ref:t,...D,children:[f&&(0,B.jsx)("span",{...w("section"),"data-position":"left",children:f}),(0,B.jsx)("span",{...w("label"),children:h}),p&&(0,B.jsx)("span",{...w("section"),"data-position":"right",children:p})]})}));WL.classes=$L,WL.displayName="@mantine/core/Badge";const qL={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var KL={root:"m_8bffd616"};const ZL={},JL=b_(((e,t)=>{const n=SN("Flex",ZL,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:u,gap:l,rowGap:c,columnGap:d,align:f,justify:p,wrap:h,direction:m,...v}=n,g=GN({name:"Flex",classes:KL,props:n,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:u}),y=AN(),b=c_(),D=l_({styleProps:{gap:l,rowGap:c,columnGap:d,align:f,justify:p,wrap:h,direction:m},theme:y,data:qL});return(0,B.jsxs)(B.Fragment,{children:[D.hasResponsiveStyles&&(0,B.jsx)(ZN,{selector:`.${b}`,styles:D.styles,media:D.media}),(0,B.jsx)(f_,{ref:t,...g("root",{className:b,style:sN(D.inlineStyles)}),...v})]})}));function XL(e){return"auto"===e||"dark"===e||"light"===e}function YL({key:e="mantine-color-scheme-value"}={}){let t;return{get:t=>{if("undefined"==typeof window)return t;try{const n=window.localStorage.getItem(e);return XL(n)?n:t}catch{return t}},set:t=>{try{window.localStorage.setItem(e,t)}catch(e){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",e)}},subscribe:n=>{t=t=>{t.storageArea===window.localStorage&&t.key===e&&XL(t.newValue)&&n(t.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}function QL(){const e=AN(),t=ON(),n=WN(e.breakpoints).reduce(((t,n)=>{const r=e.breakpoints[n].includes("px"),o=function(e){const t=function(e){return"string"==typeof e&&e.includes("var(--mantine-scale)")?e.match(/^calc\((.*?)\)$/)?.[1].split("*")[0].trim():e}(e);return"number"==typeof t?t:"string"==typeof t?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?16*Number(t.replace("rem","")):t.includes("em")?16*Number(t.replace("em","")):Number(t):NaN}(e.breakpoints[n]);return`${t}@media (max-width: ${r?o-.1+"px":eN(o-.1)}) {.mantine-visible-from-${n} {display: none !important;}}@media (min-width: ${r?`${o}px`:eN(o)}) {.mantine-hidden-from-${n} {display: none !important;}}`}),"");return(0,B.jsx)("style",{"data-mantine-styles":"classes",nonce:t?.(),dangerouslySetInnerHTML:{__html:n}})}function eH(e){return Object.entries(e).map((([e,t])=>`${e}: ${t};`)).join("")}function tH(e,t){return(Array.isArray(e)?e:[e]).reduce(((e,t)=>`${t}{${e}}`),t)}function nH({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:o=!0}){if(!e.colors[t])return{};if("light"===n){const n=cN(e,"light"),i={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${n})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${9===n?8:n+1})`,[`--mantine-color-${r}-light`]:gN(e.colors[t][n],.1),[`--mantine-color-${r}-light-hover`]:gN(e.colors[t][n],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${n})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${n})`,[`--mantine-color-${r}-outline-hover`]:gN(e.colors[t][n],.05)};return o?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...i}:i}const i=cN(e,"dark"),a={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${i})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${9===i?8:i+1})`,[`--mantine-color-${r}-light`]:gN(e.colors[t][Math.max(0,i-2)],.15),[`--mantine-color-${r}-light-hover`]:gN(e.colors[t][Math.max(0,i-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(i-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(i-4,0)})`,[`--mantine-color-${r}-outline-hover`]:gN(e.colors[t][Math.max(i-4,0)],.05)};return o?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...a}:a}function rH(e,t,n){WN(t).forEach((r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]})))}JL.classes=KL,JL.displayName="@mantine/core/Flex";const oH=e=>{const t=cN(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:QP(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":bL(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":bL(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};rH(r.variables,e.breakpoints,"breakpoint"),rH(r.variables,e.spacing,"spacing"),rH(r.variables,e.fontSizes,"font-size"),rH(r.variables,e.lineHeights,"line-height"),rH(r.variables,e.shadows,"shadow"),rH(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach(((t,n)=>{r.variables[`--mantine-primary-color-${n}`]=`var(--mantine-color-${e.primaryColor}-${n})`})),WN(e.colors).forEach((t=>{const n=e.colors[t];if(function(e){return!!e&&"object"==typeof e&&"mantine-virtual-color"in e}(n))return Object.assign(r.light,nH({theme:e,name:n.name,color:n.light,colorScheme:"light",withColorValues:!0})),void Object.assign(r.dark,nH({theme:e,name:n.name,color:n.dark,colorScheme:"dark",withColorValues:!0}));n.forEach(((e,n)=>{r.variables[`--mantine-color-${t}-${n}`]=e})),Object.assign(r.light,nH({theme:e,color:t,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,nH({theme:e,color:t,colorScheme:"dark",withColorValues:!1}))}));const o=e.headings.sizes;return WN(o).forEach((t=>{r.variables[`--mantine-${t}-font-size`]=o[t].fontSize,r.variables[`--mantine-${t}-line-height`]=o[t].lineHeight,r.variables[`--mantine-${t}-font-weight`]=o[t].fontWeight||e.headings.fontWeight})),r},iH=oH(bN);function aH({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=AN(),r=ON(),o=function({theme:e,generator:t}){const n=oH(e),r=t?.(e);return r?wN(n,r):n}({theme:n,generator:BN().cssVariablesResolver}),i=":root"===e&&t,a=i?function(e){const t={variables:{},light:{},dark:{}};return WN(e.variables).forEach((n=>{iH.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])})),WN(e.light).forEach((n=>{iH.light[n]!==e.light[n]&&(t.light[n]=e.light[n])})),WN(e.dark).forEach((n=>{iH.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])})),t}(o):o,s=function(e,t){const n=eH(e.variables),r=n?tH(t,n):"",o=eH(e.dark),i=eH(e.light);return`${r}${o?tH(":host"===t?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,o):""}${i?tH(":host"===t?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,i):""}`}(a,e);return s?(0,B.jsx)("style",{"data-mantine-styles":!0,nonce:r?.(),dangerouslySetInnerHTML:{__html:`${s}${i?"":(u=e,`\n  ${u}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }\n  ${u}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }\n`)}`}}):null;var u}function sH(e,t){const n="undefined"!=typeof window&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)")?.matches,r="auto"!==e?e:n?"dark":"light";t()?.setAttribute("data-mantine-color-scheme",r)}function uH({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:o=!0,deduplicateCssVariables:i=!0,withCssVariables:a=!0,cssVariablesSelector:s=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=YL(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:p,forceColorScheme:h,stylesTransform:m,env:v}){const{colorScheme:g,setColorScheme:y,clearColorScheme:b}=function({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const o=(0,d.useRef)(null),[i,a]=(0,d.useState)((()=>e.get(t))),s=r||i,u=(0,d.useCallback)((t=>{r||(sH(t,n),a(t),e.set(t))}),[e.set,s,r]),l=(0,d.useCallback)((()=>{a(t),sH(t,n),e.clear()}),[e.clear,t]);return(0,d.useEffect)((()=>(e.subscribe(u),e.unsubscribe)),[e.subscribe,e.unsubscribe]),xj((()=>{sH(e.get(t),n)}),[]),(0,d.useEffect)((()=>{if(r)return sH(r,n),()=>{};void 0===r&&sH(i,n),"undefined"!=typeof window&&"matchMedia"in window&&(o.current=window.matchMedia("(prefers-color-scheme: dark)"));const e=e=>{"auto"===i&&sH(e.matches?"dark":"light",n)};return o.current?.addEventListener("change",e),()=>o.current?.removeEventListener("change",e)}),[i,r]),{colorScheme:s,setColorScheme:u,clearColorScheme:l}}({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return function({respectReducedMotion:e,getRootElement:t}){xj((()=>{e&&t()?.setAttribute("data-respect-reduced-motion","true")}),[e])}({respectReducedMotion:e?.respectReducedMotion||!1,getRootElement:f}),(0,B.jsx)(MN.Provider,{value:{colorScheme:g,setColorScheme:y,clearColorScheme:b,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:p,cssVariablesSelector:s,withStaticClasses:r,stylesTransform:m,env:v},children:(0,B.jsxs)(FN,{theme:e,children:[a&&(0,B.jsx)(aH,{cssVariablesSelector:s,deduplicateCssVariables:i}),o&&(0,B.jsx)(QL,{}),t]})})}function lH({onBlur:e,onFocus:t}={}){const n=(0,d.useRef)(null),[r,o]=(0,d.useState)(!1),i=(0,d.useRef)(!1),a=e=>{o(e),i.current=e},s=e=>{i.current||(a(!0),t?.(e))},u=t=>{i.current&&!function(e){return e.currentTarget instanceof HTMLElement&&e.relatedTarget instanceof HTMLElement&&e.currentTarget.contains(e.relatedTarget)}(t)&&(a(!1),e?.(t))};return(0,d.useEffect)((()=>{const e=n.current;if(e)return e.addEventListener("focusin",s),e.addEventListener("focusout",u),()=>{e?.removeEventListener("focusin",s),e?.removeEventListener("focusout",u)}}),[s,u]),{ref:n,focused:r}}aH.displayName="@mantine/CssVariables",function(){const e=console.error;console.error=(...t)=>{t.length>1&&"string"==typeof t[0]&&t[0].toLowerCase().includes("extra attributes from the server")&&"string"==typeof t[1]&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}(),uH.displayName="@mantine/core/MantineProvider";var cH=["className","children","mainTooltip","secondaryTooltip","icon","isSelected","isDisabled","onClick","label","variant"],dH=["className","text","icon","isSelected","mainTooltip","secondaryTooltip","onClick","onMouseEnter"],fH=["className","children"],pH=["className","children","headerText","selected","onFocus","onBlur","tabIndex"],hH=["className","children"],mH=["className","children"],vH=["authorInfo","timeString","edited"],gH=["className","showActions","authorInfo","timeString","edited","actions","children"],yH=["className","autoFocus","onFocus","onBlur","editor","editable"],bH=["className","name","label","variant","icon","value","autoFocus","placeholder","disabled","onKeyDown","onChange","onSubmit","autoComplete","rightSection"],DH=["children","onOpenChange","position","sub"],wH=["children","onOpenChange","position","sub"],CH=["className","children","icon","checked","subTrigger","onClick"],kH=["children","sub"],EH=["className","children","sub"],xH=["className"],AH=["className","children"],FH=["className","children","icon","onClick","onDragEnd","onDragStart","draggable","label"],SH=["className","tabs","defaultOpenTab","openTab","setOpenTab","loading"],MH=["className","children","onClick","label"],BH=["className","accept","value","placeholder","onChange"],OH=["className","children"],TH=["className","value","placeholder","onKeyDown","onChange"],PH=["opened","position","children"],NH=["children"],_H=["className","children","variant"],jH=["className","children"],IH=["className","children","icon","onClick","onDragEnd","onDragStart","draggable","label"],RH=["className","children","id"],LH=["className","children"],HH=["className","isSelected","onClick","item","id"],VH=["className","children"],zH=["className"],$H=["className","children","id","columns"],UH=["className","children","columns"],GH=["className","isSelected","onClick","item","id"],WH=["className","children","columns"],qH=["children","className","onMouseDown","onClick"],KH=["className","children","draggable","onDragStart","onDragEnd","style","label"],ZH=["className","children","onMouseEnter","onMouseLeave","variant"],JH=["className","items","isDisabled"],XH=["className","theme"];function YH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YH(Object(n),!0).forEach((function(t){eV(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YH(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eV(e,t,n){return(t=function(e){var t=function(e){if("object"!=oV(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=oV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==oV(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tV(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nV(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nV(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nV(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function rV(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function oV(e){return oV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oV(e)}var iV=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function e(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"--bn";for(var i in r){var a=i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),s="".concat(o,"-").concat(a);"object"!=oV(r[i])?("number"==typeof r[i]&&(r[i]="".concat(r[i],"px")),n?t.style.removeProperty(s):t.style.setProperty(s,r[i].toString())):e(r[i],s)}}(e),[]},aV=function(e,t){return iV(e,t)},sV={colors:{editor:{text:void 0,background:void 0},menu:{text:void 0,background:void 0},tooltip:{text:void 0,background:void 0},hovered:{text:void 0,background:void 0},selected:{text:void 0,background:void 0},disabled:{text:void 0,background:void 0},shadow:void 0,border:void 0,sideMenu:void 0,highlights:{gray:{text:void 0,background:void 0},brown:{text:void 0,background:void 0},red:{text:void 0,background:void 0},orange:{text:void 0,background:void 0},yellow:{text:void 0,background:void 0},green:{text:void 0,background:void 0},blue:{text:void 0,background:void 0},purple:{text:void 0,background:void 0},pink:{text:void 0,background:void 0}}},borderRadius:void 0,fontFamily:void 0},uV=function(e){return(0,B.jsxs)(y_,{gap:0,className:"bn-tooltip",children:[(0,B.jsx)(E_,{size:"sm",lineClamp:5,children:e.mainTooltip}),e.secondaryTooltip&&(0,B.jsx)(E_,{size:"xs",lineClamp:5,children:e.secondaryTooltip})]})},lV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.mainTooltip,i=e.secondaryTooltip,a=e.icon,s=e.isSelected,u=e.isDisabled,l=e.onClick,c=e.label,f=e.variant,p=rV(e,cH);_w(p,!1);var h=tV((0,d.useState)(!1),2),m=h[0],v=h[1],g=r?(0,B.jsx)(Q_,QH(QH({"aria-label":c,className:n,onMouseDown:function(e){Rw()&&e.currentTarget.focus()},onClick:function(e){v(!0),null==l||l(e)},onPointerLeave:function(){return v(!1)},"aria-pressed":s,"data-selected":s||void 0,"data-test":o?o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1):void 0,size:"compact"===f?"compact-xs":"xs",disabled:u||!1,ref:t},p),{},{children:r})):(0,B.jsx)(lj,QH(QH({className:n,"aria-label":c,onMouseDown:function(e){Rw()&&e.currentTarget.focus()},onClick:function(e){v(!0),null==l||l(e)},onPointerLeave:function(){return v(!1)},"aria-pressed":s,"data-selected":s||void 0,"data-test":o?o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1):void 0,size:"compact"===f?20:30,disabled:u||!1,ref:t},p),{},{children:a}));return o?(0,B.jsx)(qj,{disabled:m,withinPortal:!1,label:(0,B.jsx)(uV,{mainTooltip:o,secondaryTooltip:i}),children:g}):g})),cV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.text,o=e.icon,i=e.isSelected,a=e.mainTooltip,s=e.secondaryTooltip,u=e.onClick,l=e.onMouseEnter;_w(rV(e,dH),!1);var c=tV((0,d.useState)(!1),2),f=c[0],p=c[1],h=(0,B.jsxs)(oI,{className:n,checked:!0===i,wrapperProps:{onMouseEnter:l,onMouseLeave:function(){return p(!1)},onClick:function(e){p(!0),null==u||u(e)}},variant:"light",icon:null,ref:t,children:[(0,B.jsx)("span",{children:o}),(0,B.jsx)("span",{children:r})]});return!a||f?h:(0,B.jsx)(qj,{refProp:"rootRef",withinPortal:!1,label:(0,B.jsx)(uV,{mainTooltip:a,secondaryTooltip:s}),children:h})})),dV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.children;return _w(rV(e,fH)),(0,B.jsx)(uI,{className:n,ref:t,children:r})})),fV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.headerText,i=e.selected,a=e.onFocus,s=e.onBlur,u=e.tabIndex;_w(rV(e,pH),!1);var l=(0,d.useRef)(null);return(0,d.useEffect)((function(){var e;i&&(null==(e=l.current)||e.scrollIntoView({behavior:"smooth",block:"center"}))}),[i]),(0,B.jsxs)(wI,{className:Iw(n,i?"selected":""),onFocus:a,onBlur:s,tabIndex:u,ref:YO([t,l]),children:[o&&(0,B.jsx)(E_,{className:"bn-header-text",children:o}),r]})})),pV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.children;return _w(rV(e,hH),!1),(0,B.jsx)(wI.Section,{className:n,ref:t,children:r})})),hV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.children;return _w(rV(e,mH),!1),(0,B.jsx)(xI,{className:n,label:(0,B.jsx)(E_,{children:r}),ref:t})})),mV=(0,d.forwardRef)((function(e,t){var n=e.authorInfo,r=e.timeString,o=e.edited;return _w(rV(e,vH),!1),"loading"===n?(0,B.jsxs)(uI,{children:[(0,B.jsx)(MI,{height:24,width:24}),(0,B.jsx)("div",{children:(0,B.jsx)(MI,{height:12,width:100})})]}):(0,B.jsxs)(uI,{children:[(0,B.jsx)(VI,{src:n.avatarUrl,alt:n.username,radius:"xl",size:"sm",color:"initials"}),(0,B.jsxs)(E_,{fz:"sm",fw:"bold",children:[n.username,(0,B.jsxs)(E_,{fz:"xs",c:"dimmed",span:!0,ml:"xs",children:[r," ",o&&"(edited)"]})]})]})})),vV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.showActions,o=(e.authorInfo,e.timeString,e.edited,e.actions),i=e.children,a=rV(e,gH),s=function(){const[e,t]=(0,d.useState)(!1),n=(0,d.useRef)(null),r=(0,d.useCallback)((()=>t(!0)),[]),o=(0,d.useCallback)((()=>t(!1)),[]);return(0,d.useEffect)((()=>{const e=n.current;if(e)return e.addEventListener("mouseenter",r),e.addEventListener("mouseleave",o),()=>{e?.removeEventListener("mouseenter",r),e?.removeEventListener("mouseleave",o)}}),[n.current]),{ref:n,hovered:e}}(),u=s.hovered,l=s.ref,c=lH(),f=c.focused,p=c.ref,h=YO([t,l]);return _w(a,!1),(0,B.jsxs)(uI,{pos:"relative",ref:h,className:n,children:[o&&(!0===r||void 0===r||"hover"===r&&u||f)?(0,B.jsx)(uI,{ref:p,style:{position:"absolute",right:0,top:0,zIndex:10},children:o}):null,(0,B.jsx)(mV,QH({},e)),i]})})),gV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.autoFocus,o=e.onFocus,i=e.onBlur,a=(e.editor,e.editable);return _w(rV(e,yH),!1),(0,B.jsx)(cz,{autoFocus:r,className:n,editor:e.editor,sideMenu:!1,slashMenu:!1,tableHandles:!1,filePanel:!1,formattingToolbar:!1,editable:a,ref:t,onFocus:o,onBlur:i,children:(0,B.jsx)(ST,{formattingToolbar:yV})})})),yV=function(){var e=xT([]).filter((function(e){return"nestBlockButton"!==e.key&&"unnestBlockButton"!==e.key}));return(0,B.jsx)(AT,{blockTypeSelectItems:[],children:e})},bV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.name,o=e.label,i=e.variant,a=e.icon,s=e.value,u=e.autoFocus,l=e.placeholder,c=e.disabled,d=e.onKeyDown,f=e.onChange,p=e.onSubmit,h=e.autoComplete,m=e.rightSection;return _w(rV(e,bH)),(0,B.jsx)(CR,{size:"xs",className:Iw(n||"","large"===i?"bn-mt-input-large":""),ref:t,name:r,label:o,leftSection:a,value:s,autoFocus:u,"data-autofocus":u?"true":void 0,rightSection:m,placeholder:l,disabled:c,onKeyDown:d,onChange:f,onSubmit:p,autoComplete:h})})),DV={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},wV=d.createContext&&d.createContext(DV),CV=["attr","size","title"];function kV(){return kV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kV.apply(this,arguments)}function EV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EV(Object(n),!0).forEach((function(t){AV(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EV(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function AV(e,t,n){return t=function(e){var t=function(e,t){if("object"!=oV(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=oV(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==oV(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FV(e){return e&&e.map((function(e,t){return d.createElement(e.tag,xV({key:t},e.attr),FV(e.child))}))}function SV(e){return function(t){return d.createElement(MV,kV({attr:xV({},e.attr)},t),FV(e.child))}}function MV(e){var t=function(t){var n,r=e.attr,o=e.size,i=e.title,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,CV),s=o||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),d.createElement("svg",kV({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,a,{className:n,style:xV(xV({color:e.color||t.color},t.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),i&&d.createElement("title",null,i),e.children)};return void 0!==wV?d.createElement(wV.Consumer,null,(function(e){return t(e)})):t(DV)}function BV(e){return SV({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function OV(e){return SV({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(e)}var TV,PV,NV=(0,d.createContext)(void 0),_V=(0,d.forwardRef)((function(e,t){var n=e.children,r=e.onOpenChange,o=e.position;e.sub,_w(rV(e,DH));var i=tV((0,d.useState)(!1),2),a=i[0],s=i[1],u=(0,d.useRef)(null),l=(0,d.useRef)(),c=(0,d.useCallback)((function(){l.current&&clearTimeout(l.current),l.current=setTimeout((function(){s(!1)}),250)}),[]),f=(0,d.useCallback)((function(){l.current&&clearTimeout(l.current),s(!0)}),[]);return(0,B.jsx)(NV.Provider,{value:{onMenuMouseOver:f,onMenuMouseLeave:c},children:(0,B.jsx)(vL.Item,{className:"bn-menu-item bn-mt-sub-menu-item",ref:dj(t,u),onMouseOver:f,onMouseLeave:c,children:(0,B.jsx)(vL,{portalProps:{target:u.current?u.current.parentElement:void 0},middlewares:{flip:!0,shift:!0,inline:!1,size:!0},trigger:"hover",opened:a,onChange:r,position:o,children:n})})})})),jV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.icon,i=e.checked,a=e.subTrigger,s=e.onClick,u=rV(e,CH);return _w(u,!1),a?(0,B.jsxs)("div",QH(QH({onClick:function(e){e.preventDefault(),e.stopPropagation()},ref:t},u),{},{children:[r,(0,B.jsx)(OV,{size:15})]})):(0,B.jsx)(vL.Item,QH(QH({className:n,ref:t,leftSection:o,rightSection:i?(0,B.jsx)(Zj,{size:10}):!1===i?(0,B.jsx)("div",{className:"bn-tick-space"}):null,onClick:s},u),{},{children:r}))})),IV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.children;e.sub,_w(rV(e,EH));var o=(0,d.useContext)(NV);return(0,B.jsx)(vL.Dropdown,{className:n,ref:t,onMouseOver:null==o?void 0:o.onMenuMouseOver,onMouseLeave:null==o?void 0:o.onMenuMouseLeave,children:r})})),RV=(0,d.forwardRef)((function(e,t){var n=e.className;return _w(rV(e,xH)),(0,B.jsx)(vL.Divider,{className:n,ref:t})})),LV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.children;return _w(rV(e,AH)),(0,B.jsx)(vL.Label,{className:n,ref:t,children:r})})),HV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.icon,i=e.onClick,a=e.onDragEnd,s=e.onDragStart,u=e.draggable,l=e.label,c=rV(e,FH);return _w(c,!1),o?(0,B.jsx)(lj,QH(QH({size:24,className:n,ref:t,onClick:i,onDragEnd:a,onDragStart:s,draggable:u,"aria-label":l},c),{},{children:o})):(0,B.jsx)(Q_,QH(QH({className:n,ref:t,onClick:i,onDragEnd:a,onDragStart:s,draggable:u,"aria-label":l},c),{},{children:r}))})),VV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.tabs,o=e.defaultOpenTab,i=e.openTab,a=e.setOpenTab,s=e.loading;return _w(rV(e,SH)),(0,B.jsx)(uI,{className:n,ref:t,children:(0,B.jsxs)(PL,{value:i,defaultValue:o,onChange:a,children:[s&&(0,B.jsx)(IL,{visible:s}),(0,B.jsx)(PL.List,{children:r.map((function(e){return(0,B.jsx)(PL.Tab,{"data-test":"".concat(e.name.toLowerCase(),"-tab"),value:e.name,children:e.name},e.name)}))}),r.map((function(e){return(0,B.jsx)(PL.Panel,{value:e.name,children:e.tabPanel},e.name)}))]})})})),zV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.onClick,i=e.label,a=rV(e,MH);return _w(a),(0,B.jsx)(Q_,QH(QH({size:"xs","aria-label":i,className:n,ref:t,onClick:o},a),{},{children:r}))})),$V=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.accept,o=e.value,i=e.placeholder,a=e.onChange,s=rV(e,BH);return _w(s),(0,B.jsx)(zL,QH({size:"xs",className:n,ref:t,accept:r,value:o,placeholder:i,onChange:a},s))})),UV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.children;return _w(rV(e,OH)),(0,B.jsx)("div",{className:n,ref:t,children:r})})),GV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.value,o=e.placeholder,i=e.onKeyDown,a=e.onChange;return _w(rV(e,TH)),(0,B.jsx)(CR,{size:"xs","data-test":"embed-input",className:n,ref:t,value:r,placeholder:o,onKeyDown:i,onChange:a})})),WV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.children;return e.variant,_w(rV(e,_H)),(0,B.jsx)(qR,{className:n,ref:t,children:r})})),qV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.children,o=rV(e,jH);return _w(o,!1),(0,B.jsx)(uI,QH(QH({align:"center",gap:0,className:n,ref:t},o),{},{children:r}))})),KV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.icon,i=e.onClick,a=e.onDragEnd,s=e.onDragStart,u=e.draggable,l=e.label,c=rV(e,IH);return _w(c,!1),o?(0,B.jsx)(lj,QH(QH({size:24,className:n,ref:t,onClick:i,onDragEnd:a,onDragStart:s,draggable:u,"aria-label":l},c),{},{children:o})):(0,B.jsx)(Q_,QH(QH({className:n,ref:t,onClick:i,onDragEnd:a,onDragStart:s,draggable:u,"aria-label":l},c),{},{children:r}))})),ZV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.id;return _w(rV(e,RH)),(0,B.jsx)(y_,{gap:0,className:n,ref:t,id:o,role:"listbox",children:r})})),JV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.children;return _w(rV(e,LH)),(0,B.jsx)(uI,{className:n,ref:t,children:(0,B.jsx)(uI,{className:"bn-mt-suggestion-menu-item-title",children:r})})})),XV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.isSelected,o=e.onClick,i=e.item,a=e.id;_w(rV(e,HH));var s=(0,d.useRef)(null);return(0,d.useEffect)((function(){if(s.current&&r){var e=ZP(s.current,document.querySelector(".bn-suggestion-menu, #ai-suggestion-menu"));"top"===e?s.current.scrollIntoView(!0):"bottom"===e&&s.current.scrollIntoView(!1)}}),[r]),(0,B.jsxs)(uI,{gap:0,className:n,ref:dj(t,s),id:a,role:"option",onMouseDown:function(e){return e.preventDefault()},onClick:o,"aria-selected":r||void 0,children:[i.icon&&(0,B.jsx)(uI,{className:"bn-mt-suggestion-menu-item-section","data-position":"left",children:i.icon}),(0,B.jsxs)(y_,{gap:0,className:"bn-mt-suggestion-menu-item-body",children:[(0,B.jsx)(E_,{className:"bn-mt-suggestion-menu-item-title",children:i.title}),(0,B.jsx)(E_,{className:"bn-mt-suggestion-menu-item-subtitle",children:i.subtext})]}),i.badge&&(0,B.jsx)(uI,{"data-position":"right",className:"bn-mt-suggestion-menu-item-section",children:(0,B.jsx)(WL,{size:"xs",children:i.badge})})]})})),YV=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.children;return _w(rV(e,VH)),(0,B.jsx)(uI,{className:n,ref:t,children:r})})),QV=(0,d.forwardRef)((function(e,t){var n=e.className;return _w(rV(e,zH)),(0,B.jsx)(T_,{className:n,type:"dots",size:16,ref:t})})),ez=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.id,i=e.columns;return _w(rV(e,$H)),(0,B.jsx)("div",{className:n,style:{gridTemplateColumns:"repeat(".concat(i,", 1fr)")},ref:t,id:o,role:"grid",children:r})})),tz=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.columns;return _w(rV(e,UH)),(0,B.jsx)(uI,{className:n,style:{gridColumn:"1 / ".concat(o+1)},ref:t,children:(0,B.jsx)(uI,{className:"bn-mt-suggestion-menu-item-title",children:r})})})),nz=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.isSelected,o=e.onClick,i=e.item,a=e.id;_w(rV(e,GH));var s=(0,d.useRef)(null);return(0,d.useEffect)((function(){if(s.current&&r){var e=ZP(s.current,document.querySelector(".bn-grid-suggestion-menu"));"top"===e?s.current.scrollIntoView(!0):"bottom"===e&&s.current.scrollIntoView(!1)}}),[r]),(0,B.jsx)("div",{className:n,ref:dj(t,s),id:a,role:"option",onClick:o,"aria-selected":r||void 0,children:i.icon})})),rz=(0,d.forwardRef)((function(e,t){var n=e.className,r=(e.children,e.columns);return _w(rV(e,WH)),(0,B.jsx)(T_,{className:n,style:{gridColumn:"1 / ".concat(r+1)},type:"dots",ref:t})})),oz=(0,d.forwardRef)((function(e,t){var n=e.children,r=e.className,o=e.onMouseDown,i=e.onClick,a=rV(e,qH);return _w(a,!1),(0,B.jsx)(Q_,QH(QH({className:r,ref:t,onMouseDown:o,onClick:i},a),{},{children:n}))})),iz=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.draggable,i=e.onDragStart,a=e.onDragEnd,s=e.style,u=e.label,l=rV(e,KH);return _w(l,!1),(0,B.jsx)(Q_,QH(QH({className:n,ref:t,"aria-label":u,draggable:o,onDragStart:i,onDragEnd:a,style:s},l),{},{children:r}))})),az=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.onMouseEnter,i=e.onMouseLeave,a=e.variant;_w(rV(e,ZH));var s=lH(),u=dj(t,s.ref,LR(s.focused));return(0,B.jsx)(JL,{className:n,ref:u,role:"toolbar",onMouseEnter:o,onMouseLeave:i,gap:"action-toolbar"===a?2:void 0,children:r})})),sz=(0,d.forwardRef)((function(e,t){var n=e.className,r=e.items,o=e.isDisabled;_w(rV(e,JH));var i=r.filter((function(e){return e.isSelected}))[0];return i?(0,B.jsxs)(vL,{withinPortal:!1,transitionProps:{exitDuration:0},disabled:o,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},children:[(0,B.jsx)(vL.Target,{children:(0,B.jsx)(Q_,{onMouseDown:function(e){Rw()&&e.currentTarget.focus()},leftSection:i.icon,rightSection:(0,B.jsx)(BV,{}),size:"xs",variant:"subtle",disabled:o,children:i.text})}),(0,B.jsx)(vL.Dropdown,{className:n,ref:t,children:r.map((function(e){return(0,B.jsx)(vL.Item,{onClick:e.onClick,leftSection:e.icon,rightSection:e.isSelected?(0,B.jsx)(Zj,{size:10,className:"bn-tick-icon"}):(0,B.jsx)("div",{className:"bn-tick-space"}),disabled:e.isDisabled,children:e.text},e.text)}))})]}):null})),uz={FormattingToolbar:{Root:az,Button:lV,Select:sz},FilePanel:{Root:VV,Button:zV,FileInput:$V,TabPanel:UV,TextInput:GV},GridSuggestionMenu:{Root:ez,Item:nz,EmptyItem:tz,Loader:rz},LinkToolbar:{Root:az,Button:lV,Select:sz},SideMenu:{Root:qV,Button:KV},SuggestionMenu:{Root:ZV,Item:XV,EmptyItem:JV,Label:YV,Loader:QV},TableHandle:{Root:iz,ExtendButton:oz},Generic:{Badge:{Root:cV,Group:dV},Form:{Root:function(e){return(0,B.jsx)("div",{children:e.children})},TextInput:bV},Menu:{Root:function(e){var t=e.children,n=e.onOpenChange,r=e.position,o=e.sub;return _w(rV(e,wH)),o?(0,B.jsx)(_V,QH({},e)):(0,B.jsx)(vL,{withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onChange:n,position:r,children:t})},Trigger:function(e){var t=e.children;return e.sub,_w(rV(e,kH)),(0,B.jsx)(vL.Target,{children:t})},Dropdown:IV,Divider:RV,Label:LV,Item:jV,Button:HV},Popover:{Root:function(e){var t=e.opened,n=e.position,r=e.children;return _w(rV(e,PH)),(0,B.jsx)(QR,{withinPortal:!1,opened:t,position:n,children:r})},Trigger:function(e){var t=e.children;return _w(rV(e,NH)),(0,B.jsx)(ZR,{children:t})},Content:WV},Toolbar:{Root:az,Button:lV,Select:sz}},Comments:{Comment:vV,Editor:gV,Card:fV,CardSection:pV,ExpandSectionsPrompt:hV}},lz={activeClassName:""},cz=function(e){var t=e.className,n=e.theme,r=rV(e,XH),o=OB(),i=kP(),a=(null==o?void 0:o.colorSchemePreference)||i,s=(0,d.useCallback)((function(e){if(e&&(function(e){iV(sV,e,!0)}(e),"object"==oV(n)))return"light"in n&&"dark"in n?void aV(n["dark"===a?"dark":"light"],e):void aV(n,e)}),[a,n]),u="string"==typeof n?n:"no-preference"!==a?a:"light";return(0,B.jsx)(jB.Provider,{value:uz,children:(0,B.jsx)(uH,{theme:lz,cssVariablesSelector:".bn-mantine",getRootElement:function(){},children:(0,B.jsx)(BP,QH(QH({"data-mantine-color-scheme":u,className:Iw("bn-mantine",t||""),theme:"object"==oV(n)?void 0:n},r),{},{ref:s}))})})};class dz extends Error{constructor(e){super(e),this.name="ShikiError"}}function fz(e,t,n){return t=hz(t),function(e,t){if(t&&("object"==Fz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,pz()?Reflect.construct(t,n||[],hz(e).constructor):t.apply(e,n))}function pz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pz=function(){return!!e})()}function hz(e){return hz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hz(e)}function mz(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vz(e,t)}function vz(e,t){return vz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vz(e,t)}function gz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gz(Object(n),!0).forEach((function(t){Cz(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gz(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bz(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Dz(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Dz(e,t){if(e){if("string"==typeof e)return wz(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wz(e,t):void 0}}function wz(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Cz(e,t,n){return(t=Az(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ez(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Az(r.key),r)}}function xz(e,t,n){return t&&Ez(e.prototype,t),n&&Ez(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Az(e){var t=function(e){if("object"!=Fz(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Fz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Fz(t)?t:t+""}function Fz(e){return Fz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fz(e)}function Sz(e){return Array.isArray(e)?function(e){for(var t=[],n=0,r=e.length;n<r;n++)t[n]=Sz(e[n]);return t}(e):e instanceof RegExp?e:"object"===Fz(e)?function(e){var t={};for(var n in e)t[n]=Sz(e[n]);return t}(e):e}function Mz(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach((function(t){for(var n in t)e[n]=t[n]})),e}function Bz(e){var t=~e.lastIndexOf("/")||~e.lastIndexOf("\\");return 0===t?e:~t==e.length-1?Bz(e.substring(0,e.length-1)):e.substr(1+~t)}var Oz=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,Tz=function(){return xz((function e(){kz(this,e)}),null,[{key:"hasCaptures",value:function(e){return null!==e&&(Oz.lastIndex=0,Oz.test(e))}},{key:"replaceCaptures",value:function(e,t,n){return e.replace(Oz,(function(e,r,o,i){var a=n[parseInt(r||o,10)];if(!a)return e;for(var s=t.substring(a.start,a.end);"."===s[0];)s=s.substring(1);switch(i){case"downcase":return s.toLowerCase();case"upcase":return s.toUpperCase();default:return s}}))}}])}();function Pz(e,t){return e<t?-1:e>t?1:0}function Nz(e,t){if(null===e&&null===t)return 0;if(!e)return-1;if(!t)return 1;var n=e.length,r=t.length;if(n===r){for(var o=0;o<n;o++){var i=Pz(e[o],t[o]);if(0!==i)return i}return 0}return n-r}function _z(e){return!!(/^#[0-9a-f]{6}$/i.test(e)||/^#[0-9a-f]{8}$/i.test(e)||/^#[0-9a-f]{3}$/i.test(e)||/^#[0-9a-f]{4}$/i.test(e))}function jz(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var Iz=function(){return xz((function e(t){kz(this,e),Cz(this,"cache",new Map),this.fn=t}),[{key:"get",value:function(e){if(this.cache.has(e))return this.cache.get(e);var t=this.fn(e);return this.cache.set(e,t),t}}])}(),Rz=function(){return xz((function e(t,n,r){var o=this;kz(this,e),Cz(this,"_cachedMatchRoot",new Iz((function(e){return o._root.match(e)}))),this._colorMap=t,this._defaults=n,this._root=r}),[{key:"getColorMap",value:function(){return this._colorMap.getColorMap()}},{key:"getDefaults",value:function(){return this._defaults}},{key:"match",value:function(e){if(null===e)return this._defaults;var t=e.scopeName,n=this._cachedMatchRoot.get(t).find((function(t){return function(e,t){if(0===t.length)return!0;for(var n=0;n<t.length;n++){var r=t[n],o=!1;if(">"===r){if(n===t.length-1)return!1;r=t[++n],o=!0}for(;e&&!Hz(e.scopeName,r);){if(o)return!1;e=e.parent}if(!e)return!1;e=e.parent}return!0}(e.parent,t.parentScopes)}));return n?new Vz(n.fontStyle,n.foreground,n.background):null}}],[{key:"createFromRawTheme",value:function(e,t){return this.createFromParsedTheme(function(e){if(!e)return[];if(!e.settings||!Array.isArray(e.settings))return[];for(var t=e.settings,n=[],r=0,o=0,i=t.length;o<i;o++){var a=t[o];if(a.settings){var s=void 0;if("string"==typeof a.scope){var u=a.scope;s=(u=(u=u.replace(/^[,]+/,"")).replace(/[,]+$/,"")).split(",")}else s=Array.isArray(a.scope)?a.scope:[""];var l=-1;if("string"==typeof a.settings.fontStyle){l=0;for(var c=a.settings.fontStyle.split(" "),d=0,f=c.length;d<f;d++)switch(c[d]){case"italic":l|=1;break;case"bold":l|=2;break;case"underline":l|=4;break;case"strikethrough":l|=8}}var p=null;"string"==typeof a.settings.foreground&&_z(a.settings.foreground)&&(p=a.settings.foreground);var h=null;"string"==typeof a.settings.background&&_z(a.settings.background)&&(h=a.settings.background);for(var m=0,v=s.length;m<v;m++){var g=s[m].trim().split(" "),y=g[g.length-1],b=null;g.length>1&&(b=g.slice(0,g.length-1)).reverse(),n[r++]=new zz(y,b,o,l,p,h)}}}return n}(e),t)}},{key:"createFromParsedTheme",value:function(e,t){return function(e,t){e.sort((function(e,t){var n=Pz(e.scope,t.scope);return 0!==n||0!==(n=Nz(e.parentScopes,t.parentScopes))?n:e.index-t.index}));for(var n=0,r="#000000",o="#ffffff";e.length>=1&&""===e[0].scope;){var i=e.shift();-1!==i.fontStyle&&(n=i.fontStyle),null!==i.foreground&&(r=i.foreground),null!==i.background&&(o=i.background)}for(var a=new Uz(t),s=new Vz(n,a.getId(r),a.getId(o)),u=new qz(new Wz(0,null,-1,0,0),[]),l=0,c=e.length;l<c;l++){var d=e[l];u.insert(0,d.scope,d.parentScopes,d.fontStyle,a.getId(d.foreground),a.getId(d.background))}return new Rz(a,s,u)}(e,t)}}])}(),Lz=function(){function e(t,n){kz(this,e),this.parent=t,this.scopeName=n}return xz(e,[{key:"push",value:function(t){return new e(this,t)}},{key:"getSegments",value:function(){for(var e=this,t=[];e;)t.push(e.scopeName),e=e.parent;return t.reverse(),t}},{key:"toString",value:function(){return this.getSegments().join(" ")}},{key:"extends",value:function(e){return this===e||null!==this.parent&&this.parent.extends(e)}},{key:"getExtensionIfDefined",value:function(e){for(var t=[],n=this;n&&n!==e;)t.push(n.scopeName),n=n.parent;return n===e?t.reverse():void 0}}],[{key:"push",value:function(t,n){var r,o=bz(n);try{for(o.s();!(r=o.n()).done;)t=new e(t,r.value)}catch(e){o.e(e)}finally{o.f()}return t}},{key:"from",value:function(){for(var t=null,n=0;n<arguments.length;n++)t=new e(t,n<0||arguments.length<=n?void 0:arguments[n]);return t}}])}();function Hz(e,t){return t===e||e.startsWith(t)&&"."===e[t.length]}var Vz=xz((function e(t,n,r){kz(this,e),this.fontStyle=t,this.foregroundId=n,this.backgroundId=r})),zz=xz((function e(t,n,r,o,i,a){kz(this,e),this.scope=t,this.parentScopes=n,this.index=r,this.fontStyle=o,this.foreground=i,this.background=a})),$z=function(e){return e[e.NotSet=-1]="NotSet",e[e.None=0]="None",e[e.Italic=1]="Italic",e[e.Bold=2]="Bold",e[e.Underline=4]="Underline",e[e.Strikethrough=8]="Strikethrough",e}($z||{});var Uz=function(){return xz((function e(t){if(kz(this,e),Cz(this,"_isFrozen",void 0),Cz(this,"_lastColorId",void 0),Cz(this,"_id2color",void 0),Cz(this,"_color2id",void 0),this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(var n=0,r=t.length;n<r;n++)this._color2id[t[n]]=n,this._id2color[n]=t[n]}else this._isFrozen=!1}),[{key:"getId",value:function(e){if(null===e)return 0;e=e.toUpperCase();var t=this._color2id[e];if(t)return t;if(this._isFrozen)throw new Error("Missing color in color map - ".concat(e));return t=++this._lastColorId,this._color2id[e]=t,this._id2color[t]=e,t}},{key:"getColorMap",value:function(){return this._id2color.slice(0)}}])}(),Gz=Object.freeze([]),Wz=function(){function e(t,n,r,o,i){kz(this,e),Cz(this,"scopeDepth",void 0),Cz(this,"parentScopes",void 0),Cz(this,"fontStyle",void 0),Cz(this,"foreground",void 0),Cz(this,"background",void 0),this.scopeDepth=t,this.parentScopes=n||Gz,this.fontStyle=r,this.foreground=o,this.background=i}return xz(e,[{key:"clone",value:function(){return new e(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}},{key:"acceptOverwrite",value:function(e,t,n,r){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,-1!==t&&(this.fontStyle=t),0!==n&&(this.foreground=n),0!==r&&(this.background=r)}}],[{key:"cloneArr",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++)t[n]=e[n].clone();return t}}])}(),qz=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};kz(this,e),Cz(this,"_rulesWithParentScopes",void 0),this._mainRule=t,this._children=r,this._rulesWithParentScopes=n}return xz(e,[{key:"match",value:function(t){if(""!==t){var n,r,o=t.indexOf(".");if(-1===o?(n=t,r=""):(n=t.substring(0,o),r=t.substring(o+1)),this._children.hasOwnProperty(n))return this._children[n].match(r)}var i=this._rulesWithParentScopes.concat(this._mainRule);return i.sort(e._cmpBySpecificity),i}},{key:"insert",value:function(t,n,r,o,i,a){if(""!==n){var s,u,l,c=n.indexOf(".");-1===c?(s=n,u=""):(s=n.substring(0,c),u=n.substring(c+1)),this._children.hasOwnProperty(s)?l=this._children[s]:(l=new e(this._mainRule.clone(),Wz.cloneArr(this._rulesWithParentScopes)),this._children[s]=l),l.insert(t+1,u,r,o,i,a)}else this._doInsertHere(t,r,o,i,a)}},{key:"_doInsertHere",value:function(e,t,n,r,o){if(null!==t){for(var i=0,a=this._rulesWithParentScopes.length;i<a;i++){var s=this._rulesWithParentScopes[i];if(0===Nz(s.parentScopes,t))return void s.acceptOverwrite(e,n,r,o)}-1===n&&(n=this._mainRule.fontStyle),0===r&&(r=this._mainRule.foreground),0===o&&(o=this._mainRule.background),this._rulesWithParentScopes.push(new Wz(e,t,n,r,o))}else this._mainRule.acceptOverwrite(e,n,r,o)}}],[{key:"_cmpBySpecificity",value:function(e,t){if(e.scopeDepth!==t.scopeDepth)return t.scopeDepth-e.scopeDepth;for(var n=0,r=0;">"===e.parentScopes[n]&&n++,">"===t.parentScopes[r]&&r++,!(n>=e.parentScopes.length||r>=t.parentScopes.length);){var o=t.parentScopes[r].length-e.parentScopes[n].length;if(0!==o)return o;n++,r++}return t.parentScopes.length-e.parentScopes.length}}])}(),Kz=function(){function e(){kz(this,e)}return xz(e,null,[{key:"toBinaryStr",value:function(e){return e.toString(2).padStart(32,"0")}},{key:"print",value:function(t){var n=e.getLanguageId(t),r=e.getTokenType(t),o=e.getFontStyle(t),i=e.getForeground(t),a=e.getBackground(t);console.log({languageId:n,tokenType:r,fontStyle:o,foreground:i,background:a})}},{key:"getLanguageId",value:function(e){return(255&e)>>>0}},{key:"getTokenType",value:function(e){return(768&e)>>>8}},{key:"containsBalancedBrackets",value:function(e){return!!(1024&e)}},{key:"getFontStyle",value:function(e){return(30720&e)>>>11}},{key:"getForeground",value:function(e){return(16744448&e)>>>15}},{key:"getBackground",value:function(e){return(4278190080&e)>>>24}},{key:"set",value:function(t,n,r,o,i,a,s){var u=e.getLanguageId(t),l=e.getTokenType(t),c=e.containsBalancedBrackets(t)?1:0,d=e.getFontStyle(t),f=e.getForeground(t),p=e.getBackground(t);return 0!==n&&(u=n),8!==r&&(l=r),null!==o&&(c=o?1:0),-1!==i&&(d=i),0!==a&&(f=a),0!==s&&(p=s),(u|l<<8|c<<10|d<<11|f<<15|p<<24)>>>0}}])}();function Zz(e,t){for(var n=[],r=function(e){var t=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=t.exec(e);return{next:function(){if(!n)return null;var r=n[0];return n=t.exec(e),r}}}(e),o=r.next();null!==o;){var i=0;if(2===o.length&&":"===o.charAt(1)){switch(o.charAt(0)){case"R":i=1;break;case"L":i=-1;break;default:console.log("Unknown priority ".concat(o," in scope selector"))}o=r.next()}var a=u();if(n.push({matcher:a,priority:i}),","!==o)break;o=r.next()}return n;function s(){if("-"===o){o=r.next();var e=s();return function(t){return!!e&&!e(t)}}if("("===o){o=r.next();var n=function(){for(var e=[],t=u();t&&(e.push(t),"|"===o||","===o);){do{o=r.next()}while("|"===o||","===o);t=u()}return function(t){return e.some((function(e){return e(t)}))}}();return")"===o&&(o=r.next()),n}if(Jz(o)){var i=[];do{i.push(o),o=r.next()}while(Jz(o));return function(e){return t(i,e)}}return null}function u(){for(var e=[],t=s();t;)e.push(t),t=s();return function(t){return e.every((function(e){return e(t)}))}}}function Jz(e){return!!e&&!!e.match(/[\w\.:]+/)}function Xz(e){"function"==typeof e.dispose&&e.dispose()}var Yz=function(){return xz((function e(t){kz(this,e),this.scopeName=t}),[{key:"toKey",value:function(){return this.scopeName}}])}(),Qz=function(){return xz((function e(t,n){kz(this,e),this.scopeName=t,this.ruleName=n}),[{key:"toKey",value:function(){return"".concat(this.scopeName,"#").concat(this.ruleName)}}])}(),e$=function(){return xz((function e(){kz(this,e),Cz(this,"_references",[]),Cz(this,"_seenReferenceKeys",new Set),Cz(this,"visitedRule",new Set)}),[{key:"references",get:function(){return this._references}},{key:"add",value:function(e){var t=e.toKey();this._seenReferenceKeys.has(t)||(this._seenReferenceKeys.add(t),this._references.push(e))}}])}(),t$=function(){return xz((function e(t,n){kz(this,e),Cz(this,"seenFullScopeRequests",new Set),Cz(this,"seenPartialScopeRequests",new Set),Cz(this,"Q",void 0),this.repo=t,this.initialScopeName=n,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new Yz(this.initialScopeName)]}),[{key:"processQueue",value:function(){var e=this.Q;this.Q=[];var t,n=new e$,r=bz(e);try{for(r.s();!(t=r.n()).done;)n$(t.value,this.initialScopeName,this.repo,n)}catch(e){r.e(e)}finally{r.f()}var o,i=bz(n.references);try{for(i.s();!(o=i.n()).done;){var a=o.value;if(a instanceof Yz){if(this.seenFullScopeRequests.has(a.scopeName))continue;this.seenFullScopeRequests.add(a.scopeName),this.Q.push(a)}else{if(this.seenFullScopeRequests.has(a.scopeName))continue;if(this.seenPartialScopeRequests.has(a.toKey()))continue;this.seenPartialScopeRequests.add(a.toKey()),this.Q.push(a)}}}catch(e){i.e(e)}finally{i.f()}}}])}();function n$(e,t,n,r){var o=n.lookup(e.scopeName);if(o){var i=n.lookup(t);e instanceof Yz?o$({baseGrammar:i,selfGrammar:o},r):r$(e.ruleName,{baseGrammar:i,selfGrammar:o,repository:o.repository},r);var a=n.injections(e.scopeName);if(a){var s,u=bz(a);try{for(u.s();!(s=u.n()).done;){var l=s.value;r.add(new Yz(l))}}catch(e){u.e(e)}finally{u.f()}}}else if(e.scopeName===t)throw new Error("No grammar provided for <".concat(t,">"))}function r$(e,t,n){t.repository&&t.repository[e]&&i$([t.repository[e]],t,n)}function o$(e,t){e.selfGrammar.patterns&&Array.isArray(e.selfGrammar.patterns)&&i$(e.selfGrammar.patterns,yz(yz({},e),{},{repository:e.selfGrammar.repository}),t),e.selfGrammar.injections&&i$(Object.values(e.selfGrammar.injections),yz(yz({},e),{},{repository:e.selfGrammar.repository}),t)}function i$(e,t,n){var r,o=bz(e);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(!n.visitedRule.has(i)){n.visitedRule.add(i);var a=i.repository?Mz({},t.repository,i.repository):t.repository;Array.isArray(i.patterns)&&i$(i.patterns,yz(yz({},t),{},{repository:a}),n);var s=i.include;if(s){var u=d$(s);switch(u.kind){case 0:o$(yz(yz({},t),{},{selfGrammar:t.baseGrammar}),n);break;case 1:o$(t,n);break;case 2:r$(u.ruleName,yz(yz({},t),{},{repository:a}),n);break;case 3:case 4:var l=u.scopeName===t.selfGrammar.scopeName?t.selfGrammar:u.scopeName===t.baseGrammar.scopeName?t.baseGrammar:void 0;if(l){var c={baseGrammar:t.baseGrammar,selfGrammar:l,repository:a};4===u.kind?r$(u.ruleName,c,n):o$(c,n)}else 4===u.kind?n.add(new Qz(u.scopeName,u.ruleName)):n.add(new Yz(u.scopeName))}}}}}catch(e){o.e(e)}finally{o.f()}}var a$=xz((function e(){kz(this,e),Cz(this,"kind",0)})),s$=xz((function e(){kz(this,e),Cz(this,"kind",1)})),u$=xz((function e(t){kz(this,e),Cz(this,"kind",2),this.ruleName=t})),l$=xz((function e(t){kz(this,e),Cz(this,"kind",3),this.scopeName=t})),c$=xz((function e(t,n){kz(this,e),Cz(this,"kind",4),this.scopeName=t,this.ruleName=n}));function d$(e){if("$base"===e)return new a$;if("$self"===e)return new s$;var t=e.indexOf("#");if(-1===t)return new l$(e);if(0===t)return new u$(e.substring(1));var n=e.substring(0,t),r=e.substring(t+1);return new c$(n,r)}var f$=/\\(\d+)/,p$=/\\(\d+)/g;Symbol("RuleId");var h$=function(){return xz((function e(t,n,r,o){kz(this,e),Cz(this,"$location",void 0),Cz(this,"id",void 0),Cz(this,"_nameIsCapturing",void 0),Cz(this,"_name",void 0),Cz(this,"_contentNameIsCapturing",void 0),Cz(this,"_contentName",void 0),this.$location=t,this.id=n,this._name=r||null,this._nameIsCapturing=Tz.hasCaptures(this._name),this._contentName=o||null,this._contentNameIsCapturing=Tz.hasCaptures(this._contentName)}),[{key:"debugName",get:function(){var e=this.$location?"".concat(Bz(this.$location.filename),":").concat(this.$location.line):"unknown";return"".concat(this.constructor.name,"#").concat(this.id," @ ").concat(e)}},{key:"getName",value:function(e,t){return this._nameIsCapturing&&null!==this._name&&null!==e&&null!==t?Tz.replaceCaptures(this._name,e,t):this._name}},{key:"getContentName",value:function(e,t){return this._contentNameIsCapturing&&null!==this._contentName?Tz.replaceCaptures(this._contentName,e,t):this._contentName}}])}(),m$=function(e){function t(e,n,r,o,i){var a;return kz(this,t),Cz(a=fz(this,t,[e,n,r,o]),"retokenizeCapturedWithRuleId",void 0),a.retokenizeCapturedWithRuleId=i,a}return mz(t,e),xz(t,[{key:"dispose",value:function(){}},{key:"collectPatterns",value:function(e,t){throw new Error("Not supported!")}},{key:"compile",value:function(e,t){throw new Error("Not supported!")}},{key:"compileAG",value:function(e,t,n,r){throw new Error("Not supported!")}}])}(h$),v$=function(e){function t(e,n,r,o,i){var a;return kz(this,t),Cz(a=fz(this,t,[e,n,r,null]),"_match",void 0),Cz(a,"captures",void 0),Cz(a,"_cachedCompiledPatterns",void 0),a._match=new w$(o,a.id),a.captures=i,a._cachedCompiledPatterns=null,a}return mz(t,e),xz(t,[{key:"dispose",value:function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}},{key:"debugMatchRegExp",get:function(){return"".concat(this._match.source)}},{key:"collectPatterns",value:function(e,t){t.push(this._match)}},{key:"compile",value:function(e,t){return this._getCachedCompiledPatterns(e).compile(e)}},{key:"compileAG",value:function(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}},{key:"_getCachedCompiledPatterns",value:function(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new C$,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}])}(h$),g$=function(e){function t(e,n,r,o,i){var a;return kz(this,t),Cz(a=fz(this,t,[e,n,r,o]),"hasMissingPatterns",void 0),Cz(a,"patterns",void 0),Cz(a,"_cachedCompiledPatterns",void 0),a.patterns=i.patterns,a.hasMissingPatterns=i.hasMissingPatterns,a._cachedCompiledPatterns=null,a}return mz(t,e),xz(t,[{key:"dispose",value:function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}},{key:"collectPatterns",value:function(e,t){var n,r=bz(this.patterns);try{for(r.s();!(n=r.n()).done;){var o=n.value;e.getRule(o).collectPatterns(e,t)}}catch(e){r.e(e)}finally{r.f()}}},{key:"compile",value:function(e,t){return this._getCachedCompiledPatterns(e).compile(e)}},{key:"compileAG",value:function(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}},{key:"_getCachedCompiledPatterns",value:function(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new C$,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}])}(h$),y$=function(e){function t(e,n,r,o,i,a,s,u,l,c){var d;return kz(this,t),Cz(d=fz(this,t,[e,n,r,o]),"_begin",void 0),Cz(d,"beginCaptures",void 0),Cz(d,"_end",void 0),Cz(d,"endHasBackReferences",void 0),Cz(d,"endCaptures",void 0),Cz(d,"applyEndPatternLast",void 0),Cz(d,"hasMissingPatterns",void 0),Cz(d,"patterns",void 0),Cz(d,"_cachedCompiledPatterns",void 0),d._begin=new w$(i,d.id),d.beginCaptures=a,d._end=new w$(s||"￿",-1),d.endHasBackReferences=d._end.hasBackReferences,d.endCaptures=u,d.applyEndPatternLast=l||!1,d.patterns=c.patterns,d.hasMissingPatterns=c.hasMissingPatterns,d._cachedCompiledPatterns=null,d}return mz(t,e),xz(t,[{key:"dispose",value:function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}},{key:"debugBeginRegExp",get:function(){return"".concat(this._begin.source)}},{key:"debugEndRegExp",get:function(){return"".concat(this._end.source)}},{key:"getEndWithResolvedBackReferences",value:function(e,t){return this._end.resolveBackReferences(e,t)}},{key:"collectPatterns",value:function(e,t){t.push(this._begin)}},{key:"compile",value:function(e,t){return this._getCachedCompiledPatterns(e,t).compile(e)}},{key:"compileAG",value:function(e,t,n,r){return this._getCachedCompiledPatterns(e,t).compileAG(e,n,r)}},{key:"_getCachedCompiledPatterns",value:function(e,t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new C$;var n,r=bz(this.patterns);try{for(r.s();!(n=r.n()).done;){var o=n.value;e.getRule(o).collectPatterns(e,this._cachedCompiledPatterns)}}catch(e){r.e(e)}finally{r.f()}this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,t):this._cachedCompiledPatterns.setSource(0,t)),this._cachedCompiledPatterns}}])}(h$),b$=function(e){function t(e,n,r,o,i,a,s,u,l){var c;return kz(this,t),Cz(c=fz(this,t,[e,n,r,o]),"_begin",void 0),Cz(c,"beginCaptures",void 0),Cz(c,"whileCaptures",void 0),Cz(c,"_while",void 0),Cz(c,"whileHasBackReferences",void 0),Cz(c,"hasMissingPatterns",void 0),Cz(c,"patterns",void 0),Cz(c,"_cachedCompiledPatterns",void 0),Cz(c,"_cachedCompiledWhilePatterns",void 0),c._begin=new w$(i,c.id),c.beginCaptures=a,c.whileCaptures=u,c._while=new w$(s,-2),c.whileHasBackReferences=c._while.hasBackReferences,c.patterns=l.patterns,c.hasMissingPatterns=l.hasMissingPatterns,c._cachedCompiledPatterns=null,c._cachedCompiledWhilePatterns=null,c}return mz(t,e),xz(t,[{key:"dispose",value:function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}},{key:"debugBeginRegExp",get:function(){return"".concat(this._begin.source)}},{key:"debugWhileRegExp",get:function(){return"".concat(this._while.source)}},{key:"getWhileWithResolvedBackReferences",value:function(e,t){return this._while.resolveBackReferences(e,t)}},{key:"collectPatterns",value:function(e,t){t.push(this._begin)}},{key:"compile",value:function(e,t){return this._getCachedCompiledPatterns(e).compile(e)}},{key:"compileAG",value:function(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}},{key:"_getCachedCompiledPatterns",value:function(e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new C$;var t,n=bz(this.patterns);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.getRule(r).collectPatterns(e,this._cachedCompiledPatterns)}}catch(e){n.e(e)}finally{n.f()}}return this._cachedCompiledPatterns}},{key:"compileWhile",value:function(e,t){return this._getCachedCompiledWhilePatterns(e,t).compile(e)}},{key:"compileWhileAG",value:function(e,t,n,r){return this._getCachedCompiledWhilePatterns(e,t).compileAG(e,n,r)}},{key:"_getCachedCompiledWhilePatterns",value:function(e,t){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new C$,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,t||"￿"),this._cachedCompiledWhilePatterns}}])}(h$),D$=function(){function e(){kz(this,e)}return xz(e,null,[{key:"createCaptureRule",value:function(e,t,n,r,o){return e.registerRule((function(e){return new m$(t,e,n,r,o)}))}},{key:"getCompiledRuleId",value:function(t,n,r){return t.id||n.registerRule((function(o){if(t.id=o,t.match)return new v$(t.$vscodeTextmateLocation,t.id,t.name,t.match,e._compileCaptures(t.captures,n,r));if(void 0===t.begin){t.repository&&(r=Mz({},r,t.repository));var i=t.patterns;return void 0===i&&t.include&&(i=[{include:t.include}]),new g$(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,e._compilePatterns(i,n,r))}return t.while?new b$(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,e._compileCaptures(t.beginCaptures||t.captures,n,r),t.while,e._compileCaptures(t.whileCaptures||t.captures,n,r),e._compilePatterns(t.patterns,n,r)):new y$(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,e._compileCaptures(t.beginCaptures||t.captures,n,r),t.end,e._compileCaptures(t.endCaptures||t.captures,n,r),t.applyEndPatternLast,e._compilePatterns(t.patterns,n,r))})),t.id}},{key:"_compileCaptures",value:function(t,n,r){var o=[];if(t){var i=0;for(var a in t)if("$vscodeTextmateLocation"!==a){var s=parseInt(a,10);s>i&&(i=s)}for(var u=0;u<=i;u++)o[u]=null;for(var l in t)if("$vscodeTextmateLocation"!==l){var c=parseInt(l,10),d=0;t[l].patterns&&(d=e.getCompiledRuleId(t[l],n,r)),o[c]=e.createCaptureRule(n,t[l].$vscodeTextmateLocation,t[l].name,t[l].contentName,d)}}return o}},{key:"_compilePatterns",value:function(t,n,r){var o=[];if(t)for(var i=0,a=t.length;i<a;i++){var s=t[i],u=-1;if(s.include){var l=d$(s.include);switch(l.kind){case 0:case 1:u=e.getCompiledRuleId(r[s.include],n,r);break;case 2:var c=r[l.ruleName];c&&(u=e.getCompiledRuleId(c,n,r));break;case 3:case 4:var d=l.scopeName,f=4===l.kind?l.ruleName:null,p=n.getExternalGrammar(d,r);if(p)if(f){var h=p.repository[f];h&&(u=e.getCompiledRuleId(h,n,p.repository))}else u=e.getCompiledRuleId(p.repository.$self,n,p.repository)}}else u=e.getCompiledRuleId(s,n,r);if(-1!==u){var m=n.getRule(u),v=!1;if((m instanceof g$||m instanceof y$||m instanceof b$)&&m.hasMissingPatterns&&0===m.patterns.length&&(v=!0),v)continue;o.push(u)}}return{patterns:o,hasMissingPatterns:(t?t.length:0)!==o.length}}}])}(),w$=function(){function e(t,n){if(kz(this,e),Cz(this,"source",void 0),Cz(this,"ruleId",void 0),Cz(this,"hasAnchor",void 0),Cz(this,"hasBackReferences",void 0),Cz(this,"_anchorCache",void 0),t&&"string"==typeof t){for(var r=t.length,o=0,i=[],a=!1,s=0;s<r;s++)if("\\"===t.charAt(s)&&s+1<r){var u=t.charAt(s+1);"z"===u?(i.push(t.substring(o,s)),i.push("$(?!\\n)(?<!\\n)"),o=s+2):"A"!==u&&"G"!==u||(a=!0),s++}this.hasAnchor=a,0===o?this.source=t:(i.push(t.substring(o,r)),this.source=i.join(""))}else this.hasAnchor=!1,this.source=t;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,"string"==typeof this.source?this.hasBackReferences=f$.test(this.source):this.hasBackReferences=!1}return xz(e,[{key:"clone",value:function(){return new e(this.source,this.ruleId)}},{key:"setSource",value:function(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}},{key:"resolveBackReferences",value:function(e,t){if("string"!=typeof this.source)throw new Error("This method should only be called if the source is a string");var n=t.map((function(t){return e.substring(t.start,t.end)}));return p$.lastIndex=0,this.source.replace(p$,(function(e,t){return jz(n[parseInt(t,10)]||"")}))}},{key:"_buildAnchorCache",value:function(){if("string"!=typeof this.source)throw new Error("This method should only be called if the source is a string");var e,t,n,r,o=[],i=[],a=[],s=[];for(e=0,t=this.source.length;e<t;e++)n=this.source.charAt(e),o[e]=n,i[e]=n,a[e]=n,s[e]=n,"\\"===n&&e+1<t&&("A"===(r=this.source.charAt(e+1))?(o[e+1]="￿",i[e+1]="￿",a[e+1]="A",s[e+1]="A"):"G"===r?(o[e+1]="￿",i[e+1]="G",a[e+1]="￿",s[e+1]="G"):(o[e+1]=r,i[e+1]=r,a[e+1]=r,s[e+1]=r),e++);return{A0_G0:o.join(""),A0_G1:i.join(""),A1_G0:a.join(""),A1_G1:s.join("")}}},{key:"resolveAnchors",value:function(e,t){return this.hasAnchor&&this._anchorCache&&"string"==typeof this.source?e?t?this._anchorCache.A1_G1:this._anchorCache.A1_G0:t?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source}}])}(),C$=function(){return xz((function e(){kz(this,e),Cz(this,"_items",void 0),Cz(this,"_hasAnchors",void 0),Cz(this,"_cached",void 0),Cz(this,"_anchorCache",void 0),this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}),[{key:"dispose",value:function(){this._disposeCaches()}},{key:"_disposeCaches",value:function(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}},{key:"push",value:function(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}},{key:"unshift",value:function(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}},{key:"length",value:function(){return this._items.length}},{key:"setSource",value:function(e,t){this._items[e].source!==t&&(this._disposeCaches(),this._items[e].setSource(t))}},{key:"compile",value:function(e){if(!this._cached){var t=this._items.map((function(e){return e.source}));this._cached=new k$(e,t,this._items.map((function(e){return e.ruleId})))}return this._cached}},{key:"compileAG",value:function(e,t,n){return this._hasAnchors?t?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G0):this.compile(e)}},{key:"_resolveAnchors",value:function(e,t,n){var r=this._items.map((function(e){return e.resolveAnchors(t,n)}));return new k$(e,r,this._items.map((function(e){return e.ruleId})))}}])}(),k$=function(){return xz((function e(t,n,r){kz(this,e),Cz(this,"scanner",void 0),this.regExps=n,this.rules=r,this.scanner=t.createOnigScanner(n)}),[{key:"dispose",value:function(){"function"==typeof this.scanner.dispose&&this.scanner.dispose()}},{key:"toString",value:function(){for(var e=[],t=0,n=this.rules.length;t<n;t++)e.push("   - "+this.rules[t]+": "+this.regExps[t]);return e.join("\n")}},{key:"findNextMatchSync",value:function(e,t,n){var r=this.scanner.findNextMatchSync(e,t,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}}])}(),E$=xz((function e(t,n){kz(this,e),this.languageId=t,this.tokenType=n})),x$=(TV=function(){function e(t,n){var r=this;kz(this,e),Cz(this,"_defaultAttributes",void 0),Cz(this,"_embeddedLanguagesMatcher",void 0),Cz(this,"_getBasicScopeAttributes",new Iz((function(e){var t=r._scopeToLanguage(e),n=r._toStandardTokenType(e);return new E$(t,n)}))),this._defaultAttributes=new E$(t,8),this._embeddedLanguagesMatcher=new A$(Object.entries(n||{}))}return xz(e,[{key:"getDefaultAttributes",value:function(){return this._defaultAttributes}},{key:"getBasicScopeAttributes",value:function(t){return null===t?e._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(t)}},{key:"_scopeToLanguage",value:function(e){return this._embeddedLanguagesMatcher.match(e)||0}},{key:"_toStandardTokenType",value:function(t){var n=t.match(e.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}}])}(),Cz(TV,"_NULL_SCOPE_METADATA",new E$(0,0)),Cz(TV,"STANDARD_TOKEN_TYPE_REGEXP",/\b(comment|string|regex|meta\.embedded)\b/),TV),A$=function(){return xz((function e(t){if(kz(this,e),Cz(this,"values",void 0),Cz(this,"scopesRegExp",void 0),0===t.length)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);var n=t.map((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||Dz(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),n=t[0];return t[1],jz(n)}));n.sort(),n.reverse(),this.scopesRegExp=new RegExp("^((".concat(n.join(")|("),"))($|\\.)"),"")}}),[{key:"match",value:function(e){if(this.scopesRegExp){var t=e.match(this.scopesRegExp);if(t)return this.values.get(t[1])}}}])}(),F$=("undefined"!=typeof process&&process.env.VSCODE_TEXTMATE_DEBUG,xz((function e(t,n){kz(this,e),this.stack=t,this.stoppedEarly=n})));function S$(e,t,n,r,o,i,a,s){var u=t.content.length,l=!1,c=-1;if(a){var d=function(e,t,n,r,o,i){for(var a=o.beginRuleCapturedEOL?0:-1,s=[],u=o;u;u=u.pop()){var l=u.getRule(e);l instanceof b$&&s.push({rule:l,stack:u})}for(var c=s.pop();c;c=s.pop()){var d=B$(c.rule,e,c.stack.endRule,n,r===a),f=d.ruleScanner,p=d.findOptions,h=f.findNextMatchSync(t,r,p);if(!h){o=c.stack.pop();break}if(-2!==h.ruleId){o=c.stack.pop();break}h.captureIndices&&h.captureIndices.length&&(i.produce(c.stack,h.captureIndices[0].start),O$(e,t,n,c.stack,i,c.rule.whileCaptures,h.captureIndices),i.produce(c.stack,h.captureIndices[0].end),a=h.captureIndices[0].end,h.captureIndices[0].end>r&&(r=h.captureIndices[0].end,n=!1))}return{stack:o,linePos:r,anchorPosition:a,isFirstLine:n}}(e,t,n,r,o,i);o=d.stack,r=d.linePos,n=d.isFirstLine,c=d.anchorPosition}for(var f=Date.now();!l;){if(0!==s&&Date.now()-f>s)return new F$(o,!0);p()}return new F$(o,!1);function p(){var a=function(e,t,n,r,o,i){var a=function(e,t,n,r,o,i){var a=M$(o.getRule(e),e,o.endRule,n,r===i),s=a.ruleScanner,u=a.findOptions,l=s.findNextMatchSync(t,r,u);return l?{captureIndices:l.captureIndices,matchedRuleId:l.ruleId}:null}(e,t,n,r,o,i),s=e.getInjections();if(0===s.length)return a;var u=function(e,t,n,r,o,i,a){for(var s,u=Number.MAX_VALUE,l=null,c=0,d=i.contentNameScopesList.getScopeNames(),f=0,p=e.length;f<p;f++){var h=e[f];if(h.matcher(d)){var m=M$(t.getRule(h.ruleId),t,null,r,o===a),v=m.ruleScanner,g=m.findOptions,y=v.findNextMatchSync(n,o,g);if(y){var b=y.captureIndices[0].start;if(!(b>=u)&&(u=b,l=y.captureIndices,s=y.ruleId,c=h.priority,u===o))break}}}return l?{priorityMatch:-1===c,captureIndices:l,matchedRuleId:s}:null}(s,e,t,n,r,o,i);if(!u)return a;if(!a)return u;var l=a.captureIndices[0].start,c=u.captureIndices[0].start;return c<l||u.priorityMatch&&c===l?u:a}(e,t,n,r,o,c);if(!a)return i.produce(o,u),void(l=!0);var s=a.captureIndices,d=a.matchedRuleId,f=!!(s&&s.length>0)&&s[0].end>r;if(-1===d){var p=o.getRule(e);i.produce(o,s[0].start),o=o.withContentNameScopesList(o.nameScopesList),O$(e,t,n,o,i,p.endCaptures,s),i.produce(o,s[0].end);var h=o;if(o=o.parent,c=h.getAnchorPos(),!f&&h.getEnterPos()===r)return o=h,i.produce(o,u),void(l=!0)}else{var m=e.getRule(d);i.produce(o,s[0].start);var v=o,g=m.getName(t.content,s),y=o.contentNameScopesList.pushAttributed(g,e);if(o=o.push(d,r,c,s[0].end===u,null,y,y),m instanceof y$){var b=m;O$(e,t,n,o,i,b.beginCaptures,s),i.produce(o,s[0].end),c=s[0].end;var D=b.getContentName(t.content,s),w=y.pushAttributed(D,e);if(o=o.withContentNameScopesList(w),b.endHasBackReferences&&(o=o.withEndRule(b.getEndWithResolvedBackReferences(t.content,s))),!f&&v.hasSameRuleAs(o))return o=o.pop(),i.produce(o,u),void(l=!0)}else if(m instanceof b$){var C=m;O$(e,t,n,o,i,C.beginCaptures,s),i.produce(o,s[0].end),c=s[0].end;var k=C.getContentName(t.content,s),E=y.pushAttributed(k,e);if(o=o.withContentNameScopesList(E),C.whileHasBackReferences&&(o=o.withEndRule(C.getWhileWithResolvedBackReferences(t.content,s))),!f&&v.hasSameRuleAs(o))return o=o.pop(),i.produce(o,u),void(l=!0)}else if(O$(e,t,n,o,i,m.captures,s),i.produce(o,s[0].end),o=o.pop(),!f)return o=o.safePop(),i.produce(o,u),void(l=!0)}s[0].end>r&&(r=s[0].end,n=!1)}}function M$(e,t,n,r,o){return{ruleScanner:e.compileAG(t,n,r,o),findOptions:0}}function B$(e,t,n,r,o){return{ruleScanner:e.compileWhileAG(t,n,r,o),findOptions:0}}function O$(e,t,n,r,o,i,a){if(0!==i.length){for(var s=t.content,u=Math.min(i.length,a.length),l=[],c=a[0].end,d=0;d<u;d++){var f=i[d];if(null!==f){var p=a[d];if(0!==p.length){if(p.start>c)break;for(;l.length>0&&l[l.length-1].endPos<=p.start;)o.produceFromScopes(l[l.length-1].scopes,l[l.length-1].endPos),l.pop();if(l.length>0?o.produceFromScopes(l[l.length-1].scopes,p.start):o.produce(r,p.start),f.retokenizeCapturedWithRuleId){var h=f.getName(s,a),m=r.contentNameScopesList.pushAttributed(h,e),v=f.getContentName(s,a),g=m.pushAttributed(v,e),y=r.push(f.retokenizeCapturedWithRuleId,p.start,-1,!1,null,m,g),b=e.createOnigString(s.substring(0,p.end));S$(e,b,n&&0===p.start,p.start,y,o,!1,0),Xz(b)}else{var D=f.getName(s,a);if(null!==D){var w=(l.length>0?l[l.length-1].scopes:r.contentNameScopesList).pushAttributed(D,e);l.push(new T$(w,p.end))}}}}}for(;l.length>0;)o.produceFromScopes(l[l.length-1].scopes,l[l.length-1].endPos),l.pop()}}var T$=xz((function e(t,n){kz(this,e),Cz(this,"scopes",void 0),Cz(this,"endPos",void 0),this.scopes=t,this.endPos=n}));function P$(e,t,n,r,o){var i,a=Zz(t,N$),s=D$.getCompiledRuleId(n,r,o.repository),u=bz(a);try{for(u.s();!(i=u.n()).done;){var l=i.value;e.push({debugSelector:t,matcher:l.matcher,ruleId:s,grammar:o,priority:l.priority})}}catch(e){u.e(e)}finally{u.f()}}function N$(e,t){if(t.length<e.length)return!1;var n=0;return e.every((function(e){for(var r=n;r<t.length;r++)if(_$(t[r],e))return n=r+1,!0;return!1}))}function _$(e,t){if(!e)return!1;if(e===t)return!0;var n=t.length;return e.length>n&&e.substr(0,n)===t&&"."===e[n]}var j$=function(){return xz((function e(t,n,r,o,i,a,s,u){if(kz(this,e),Cz(this,"_rootId",void 0),Cz(this,"_lastRuleId",void 0),Cz(this,"_ruleId2desc",void 0),Cz(this,"_includedGrammars",void 0),Cz(this,"_grammarRepository",void 0),Cz(this,"_grammar",void 0),Cz(this,"_injections",void 0),Cz(this,"_basicScopeAttributesProvider",void 0),Cz(this,"_tokenTypeMatchers",void 0),this._rootScopeName=t,this.balancedBracketSelectors=a,this._onigLib=u,this._basicScopeAttributesProvider=new x$(r,o),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=s,this._grammar=I$(n,null),this._injections=null,this._tokenTypeMatchers=[],i)for(var l=0,c=Object.keys(i);l<c.length;l++){var d,f=c[l],p=bz(Zz(f,N$));try{for(p.s();!(d=p.n()).done;){var h=d.value;this._tokenTypeMatchers.push({matcher:h.matcher,type:i[f]})}}catch(e){p.e(e)}finally{p.f()}}}),[{key:"themeProvider",get:function(){return this._grammarRepository}},{key:"dispose",value:function(){var e,t=bz(this._ruleId2desc);try{for(t.s();!(e=t.n()).done;){var n=e.value;n&&n.dispose()}}catch(e){t.e(e)}finally{t.f()}}},{key:"createOnigScanner",value:function(e){return this._onigLib.createOnigScanner(e)}},{key:"createOnigString",value:function(e){return this._onigLib.createOnigString(e)}},{key:"getMetadataForScope",value:function(e){return this._basicScopeAttributesProvider.getBasicScopeAttributes(e)}},{key:"_collectInjections",value:function(){var e,t=this,n=[],r=this._rootScopeName,o=(e=r)===t._rootScopeName?t._grammar:t.getExternalGrammar(e);if(o){var i=o.injections;if(i)for(var a in i)P$(n,a,i[a],this,o);var s=this._grammarRepository.injections(r);s&&s.forEach((function(e){var r=t.getExternalGrammar(e);if(r){var o=r.injectionSelector;o&&P$(n,o,r,t,r)}}))}return n.sort((function(e,t){return e.priority-t.priority})),n}},{key:"getInjections",value:function(){return null===this._injections&&(this._injections=this._collectInjections()),this._injections}},{key:"registerRule",value:function(e){var t=++this._lastRuleId,n=e(t);return this._ruleId2desc[t]=n,n}},{key:"getRule",value:function(e){return this._ruleId2desc[e]}},{key:"getExternalGrammar",value:function(e,t){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){var n=this._grammarRepository.lookup(e);if(n)return this._includedGrammars[e]=I$(n,t&&t.$base),this._includedGrammars[e]}}},{key:"tokenizeLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this._tokenize(e,t,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}},{key:"tokenizeLine2",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this._tokenize(e,t,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}},{key:"_tokenize",value:function(e,t,n,r){var o;if(-1===this._rootId&&(this._rootId=D$.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections()),t&&t!==L$.NULL)o=!1,t.reset();else{o=!0;var i,a=this._basicScopeAttributesProvider.getDefaultAttributes(),s=this.themeProvider.getDefaults(),u=Kz.set(0,a.languageId,a.tokenType,null,s.fontStyle,s.foregroundId,s.backgroundId),l=this.getRule(this._rootId).getName(null,null);i=l?R$.createRootAndLookUpScopeName(l,u,this):R$.createRoot("unknown",u),t=new L$(null,this._rootId,-1,-1,!1,null,i,i)}e+="\n";var c=this.createOnigString(e),d=c.content.length,f=new V$(n,e,this._tokenTypeMatchers,this.balancedBracketSelectors),p=S$(this,c,o,0,t,f,!0,r);return Xz(c),{lineLength:d,lineTokens:f,ruleStack:p.stack,stoppedEarly:p.stoppedEarly}}}])}();function I$(e,t){return(e=Sz(e)).repository=e.repository||{},e.repository.$self={$vscodeTextmateLocation:e.$vscodeTextmateLocation,patterns:e.patterns,name:e.scopeName},e.repository.$base=t||e.repository.$self,e}var R$=function(){function e(t,n,r){kz(this,e),this.parent=t,this.scopePath=n,this.tokenAttributes=r}return xz(e,[{key:"scopeName",get:function(){return this.scopePath.scopeName}},{key:"toString",value:function(){return this.getScopeNames().join(" ")}},{key:"equals",value:function(t){return e.equals(this,t)}},{key:"pushAttributed",value:function(t,n){if(null===t)return this;if(-1===t.indexOf(" "))return e._pushAttributed(this,t,n);var r,o=this,i=bz(t.split(/ /g));try{for(i.s();!(r=i.n()).done;){var a=r.value;o=e._pushAttributed(o,a,n)}}catch(e){i.e(e)}finally{i.f()}return o}},{key:"getScopeNames",value:function(){return this.scopePath.getSegments()}},{key:"getExtensionIfDefined",value:function(e){for(var t=[],n=this;n&&n!==e;){var r,o;t.push({encodedTokenAttributes:n.tokenAttributes,scopeNames:n.scopePath.getExtensionIfDefined(null!==(r=null===(o=n.parent)||void 0===o?void 0:o.scopePath)&&void 0!==r?r:null)}),n=n.parent}return n===e?t.reverse():void 0}}],[{key:"fromExtension",value:function(t,n){var r,o,i=t,a=null!==(r=null==t?void 0:t.scopePath)&&void 0!==r?r:null,s=bz(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;i=new e(i,a=Lz.push(a,u.scopeNames),u.encodedTokenAttributes)}}catch(e){s.e(e)}finally{s.f()}return i}},{key:"createRoot",value:function(t,n){return new e(null,new Lz(null,t),n)}},{key:"createRootAndLookUpScopeName",value:function(t,n,r){var o=r.getMetadataForScope(t),i=new Lz(null,t),a=r.themeProvider.themeMatch(i),s=e.mergeAttributes(n,o,a);return new e(null,i,s)}},{key:"equals",value:function(e,t){for(;;){if(e===t)return!0;if(!e&&!t)return!0;if(!e||!t)return!1;if(e.scopeName!==t.scopeName||e.tokenAttributes!==t.tokenAttributes)return!1;e=e.parent,t=t.parent}}},{key:"mergeAttributes",value:function(e,t,n){var r=-1,o=0,i=0;return null!==n&&(r=n.fontStyle,o=n.foregroundId,i=n.backgroundId),Kz.set(e,t.languageId,t.tokenType,null,r,o,i)}},{key:"_pushAttributed",value:function(t,n,r){var o=r.getMetadataForScope(n),i=t.scopePath.push(n),a=r.themeProvider.themeMatch(i),s=e.mergeAttributes(t.tokenAttributes,o,a);return new e(t,i,s)}}])}(),L$=(PV=function(){function e(t,n,r,o,i,a,s,u){kz(this,e),Cz(this,"_stackElementBrand",void 0),Cz(this,"_enterPos",void 0),Cz(this,"_anchorPos",void 0),Cz(this,"depth",void 0),this.parent=t,this.ruleId=n,this.beginRuleCapturedEOL=i,this.endRule=a,this.nameScopesList=s,this.contentNameScopesList=u,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=o}return xz(e,[{key:"equals",value:function(t){return null!==t&&e._equals(this,t)}},{key:"clone",value:function(){return this}},{key:"reset",value:function(){e._reset(this)}},{key:"pop",value:function(){return this.parent}},{key:"safePop",value:function(){return this.parent?this.parent:this}},{key:"push",value:function(t,n,r,o,i,a,s){return new e(this,t,n,r,o,i,a,s)}},{key:"getEnterPos",value:function(){return this._enterPos}},{key:"getAnchorPos",value:function(){return this._anchorPos}},{key:"getRule",value:function(e){return e.getRule(this.ruleId)}},{key:"toString",value:function(){var e=[];return this._writeString(e,0),"["+e.join(",")+"]"}},{key:"_writeString",value:function(e,t){var n,r;return this.parent&&(t=this.parent._writeString(e,t)),e[t++]="(".concat(this.ruleId,", ").concat(null===(n=this.nameScopesList)||void 0===n?void 0:n.toString(),", ").concat(null===(r=this.contentNameScopesList)||void 0===r?void 0:r.toString(),")"),t}},{key:"withContentNameScopesList",value:function(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}},{key:"withEndRule",value:function(t){return this.endRule===t?this:new e(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,t,this.nameScopesList,this.contentNameScopesList)}},{key:"hasSameRuleAs",value:function(e){for(var t=this;t&&t._enterPos===e._enterPos;){if(t.ruleId===e.ruleId)return!0;t=t.parent}return!1}},{key:"toStateStackFrame",value:function(){var e,t,n,r,o,i;return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:null!==(e=null===(t=this.nameScopesList)||void 0===t?void 0:t.getExtensionIfDefined(null!==(n=null===(r=this.parent)||void 0===r?void 0:r.nameScopesList)&&void 0!==n?n:null))&&void 0!==e?e:[],contentNameScopesList:null!==(o=null===(i=this.contentNameScopesList)||void 0===i?void 0:i.getExtensionIfDefined(this.nameScopesList))&&void 0!==o?o:[]}}}],[{key:"_equals",value:function(e,t){return e===t||!!this._structuralEquals(e,t)&&R$.equals(e.contentNameScopesList,t.contentNameScopesList)}},{key:"_structuralEquals",value:function(e,t){for(;;){if(e===t)return!0;if(!e&&!t)return!0;if(!e||!t)return!1;if(e.depth!==t.depth||e.ruleId!==t.ruleId||e.endRule!==t.endRule)return!1;e=e.parent,t=t.parent}}},{key:"_reset",value:function(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}},{key:"pushFrame",value:function(t,n){var r,o,i,a=R$.fromExtension(null!==(r=null==t?void 0:t.nameScopesList)&&void 0!==r?r:null,n.nameScopesList);return new e(t,n.ruleId,null!==(o=n.enterPos)&&void 0!==o?o:-1,null!==(i=n.anchorPos)&&void 0!==i?i:-1,n.beginRuleCapturedEOL,n.endRule,a,R$.fromExtension(a,n.contentNameScopesList))}}])}(),Cz(PV,"NULL",new PV(null,0,0,0,!1,null,null,null)),PV),H$=function(){return xz((function e(t,n){var r=this;kz(this,e),Cz(this,"balancedBracketScopes",void 0),Cz(this,"unbalancedBracketScopes",void 0),Cz(this,"allowAny",!1),this.balancedBracketScopes=t.flatMap((function(e){return"*"===e?(r.allowAny=!0,[]):Zz(e,N$).map((function(e){return e.matcher}))})),this.unbalancedBracketScopes=n.flatMap((function(e){return Zz(e,N$).map((function(e){return e.matcher}))}))}),[{key:"matchesAlways",get:function(){return this.allowAny&&0===this.unbalancedBracketScopes.length}},{key:"matchesNever",get:function(){return 0===this.balancedBracketScopes.length&&!this.allowAny}},{key:"match",value:function(e){var t,n=bz(this.unbalancedBracketScopes);try{for(n.s();!(t=n.n()).done;)if((0,t.value)(e))return!1}catch(e){n.e(e)}finally{n.f()}var r,o=bz(this.balancedBracketScopes);try{for(o.s();!(r=o.n()).done;)if((0,r.value)(e))return!0}catch(e){o.e(e)}finally{o.f()}return this.allowAny}}])}(),V$=function(){return xz((function e(t,n,r,o){kz(this,e),Cz(this,"_emitBinaryTokens",void 0),Cz(this,"_lineText",void 0),Cz(this,"_tokens",void 0),Cz(this,"_binaryTokens",void 0),Cz(this,"_lastTokenEndIndex",void 0),Cz(this,"_tokenTypeOverrides",void 0),this.balancedBracketSelectors=o,this._emitBinaryTokens=t,this._tokenTypeOverrides=r,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}),[{key:"produce",value:function(e,t){this.produceFromScopes(e.contentNameScopesList,t)}},{key:"produceFromScopes",value:function(e,t){var n;if(!(this._lastTokenEndIndex>=t)){if(this._emitBinaryTokens){var r,o,i=null!==(r=null==e?void 0:e.tokenAttributes)&&void 0!==r?r:0,a=!1;if(null!==(o=this.balancedBracketSelectors)&&void 0!==o&&o.matchesAlways&&(a=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){var s,u,l=null!==(s=null==e?void 0:e.getScopeNames())&&void 0!==s?s:[],c=bz(this._tokenTypeOverrides);try{for(c.s();!(u=c.n()).done;){var d=u.value;d.matcher(l)&&(i=Kz.set(i,0,d.type,null,-1,0,0))}}catch(e){c.e(e)}finally{c.f()}this.balancedBracketSelectors&&(a=this.balancedBracketSelectors.match(l))}return a&&(i=Kz.set(i,0,8,a,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===i||(this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(i)),void(this._lastTokenEndIndex=t)}var f=null!==(n=null==e?void 0:e.getScopeNames())&&void 0!==n?n:[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:t,scopes:f}),this._lastTokenEndIndex=t}}},{key:"getResult",value:function(e,t){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===t-1&&this._tokens.pop(),0===this._tokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}},{key:"getBinaryResult",value:function(e,t){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===t-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),0===this._binaryTokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._binaryTokens[this._binaryTokens.length-2]=0);for(var n=new Uint32Array(this._binaryTokens.length),r=0,o=this._binaryTokens.length;r<o;r++)n[r]=this._binaryTokens[r];return n}}])}(),z$=function(){return xz((function e(t,n){kz(this,e),Cz(this,"_grammars",new Map),Cz(this,"_rawGrammars",new Map),Cz(this,"_injectionGrammars",new Map),Cz(this,"_theme",void 0),this._onigLib=n,this._theme=t}),[{key:"dispose",value:function(){var e,t=bz(this._grammars.values());try{for(t.s();!(e=t.n()).done;)e.value.dispose()}catch(e){t.e(e)}finally{t.f()}}},{key:"setTheme",value:function(e){this._theme=e}},{key:"getColorMap",value:function(){return this._theme.getColorMap()}},{key:"addGrammar",value:function(e,t){this._rawGrammars.set(e.scopeName,e),t&&this._injectionGrammars.set(e.scopeName,t)}},{key:"lookup",value:function(e){return this._rawGrammars.get(e)}},{key:"injections",value:function(e){return this._injectionGrammars.get(e)}},{key:"getDefaults",value:function(){return this._theme.getDefaults()}},{key:"themeMatch",value:function(e){return this._theme.match(e)}},{key:"grammarForScopeName",value:function(e,t,n,r,o){if(!this._grammars.has(e)){var i=this._rawGrammars.get(e);if(!i)return null;this._grammars.set(e,function(e,t,n,r,o,i,a,s){return new j$(e,t,n,r,o,i,a,s)}(e,i,t,n,r,o,this,this._onigLib))}return this._grammars.get(e)}}])}(),$$=function(){return xz((function e(t){kz(this,e),Cz(this,"_options",void 0),Cz(this,"_syncRegistry",void 0),Cz(this,"_ensureGrammarCache",void 0),this._options=t,this._syncRegistry=new z$(Rz.createFromRawTheme(t.theme,t.colorMap),t.onigLib),this._ensureGrammarCache=new Map}),[{key:"dispose",value:function(){this._syncRegistry.dispose()}},{key:"setTheme",value:function(e,t){this._syncRegistry.setTheme(Rz.createFromRawTheme(e,t))}},{key:"getColorMap",value:function(){return this._syncRegistry.getColorMap()}},{key:"loadGrammarWithEmbeddedLanguages",value:function(e,t,n){return this.loadGrammarWithConfiguration(e,t,{embeddedLanguages:n})}},{key:"loadGrammarWithConfiguration",value:function(e,t,n){return this._loadGrammar(e,t,n.embeddedLanguages,n.tokenTypes,new H$(n.balancedBracketSelectors||[],n.unbalancedBracketSelectors||[]))}},{key:"loadGrammar",value:function(e){return this._loadGrammar(e,0,null,null,null)}},{key:"_loadGrammar",value:function(e,t,n,r,o){for(var i=this,a=new t$(this._syncRegistry,e);a.Q.length>0;)a.Q.map((function(e){return i._loadSingleGrammar(e.scopeName)})),a.processQueue();return this._grammarForScopeName(e,t,n,r,o)}},{key:"_loadSingleGrammar",value:function(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}},{key:"_doLoadSingleGrammar",value:function(e){var t=this._options.loadGrammar(e);if(t){var n="function"==typeof this._options.getInjections?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(t,n)}}},{key:"addGrammar",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this._syncRegistry.addGrammar(e,t),this._grammarForScopeName(e.scopeName,n,r)}},{key:"_grammarForScopeName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return this._syncRegistry.grammarForScopeName(e,t,n,r,o)}}])}(),U$=L$.NULL,G$=a(3159);function W$(e,t){const n="string"==typeof e?{}:{...e.colorReplacements},r="string"==typeof e?e:e.name;for(const[e,o]of Object.entries(t?.colorReplacements||{}))"string"==typeof o?n[e]=o:e===r&&Object.assign(n,o);return n}function q$(e,t){return e&&t?.[e?.toLowerCase()]||e}async function K$(e){return Promise.resolve("function"==typeof e?e():e).then((e=>e.default||e))}function Z$(e){return!e||["plaintext","txt","text","plain"].includes(e)}function J$(e){return"ansi"===e||Z$(e)}function X$(e){return"none"===e}function Y$(e){return X$(e)}function Q$(e,t){if(!t)return e;e.properties||={},e.properties.class||=[],"string"==typeof e.properties.class&&(e.properties.class=e.properties.class.split(/\s+/g)),Array.isArray(e.properties.class)||(e.properties.class=[]);const n=Array.isArray(t)?t:t.split(/\s+/g);for(const t of n)t&&!e.properties.class.includes(t)&&e.properties.class.push(t);return e}function eU(e,t=!1){const n=e.split(/(\r?\n)/g);let r=0;const o=[];for(let e=0;e<n.length;e+=2){const i=t?n[e]+(n[e+1]||""):n[e];o.push([i,r]),r+=n[e].length,r+=n[e+1]?.length||0}return o}const tU="light-dark()";function nU(e){const t={};if(e.color&&(t.color=e.color),e.bgColor&&(t["background-color"]=e.bgColor),e.fontStyle){e.fontStyle&$z.Italic&&(t["font-style"]="italic"),e.fontStyle&$z.Bold&&(t["font-weight"]="bold");const n=[];e.fontStyle&$z.Underline&&n.push("underline"),e.fontStyle&$z.Strikethrough&&n.push("line-through"),n.length&&(t["text-decoration"]=n.join(" "))}return t}function rU(e){return"string"==typeof e?e:Object.entries(e).map((([e,t])=>`${e}:${t}`)).join(";")}const oU=new WeakMap;function iU(e,t){oU.set(e,t)}function aU(e){return oU.get(e)}class sU{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,t){return new sU(Object.fromEntries((n=t,Array.isArray(n)?n:[n]).map((e=>[e,U$]))),e);var n}constructor(...e){if(2===e.length){const[t,n]=e;this.lang=n,this._stacks=t}else{const[t,n,r]=e;this.lang=n,this._stacks={[r]:t}}}getInternalStack(e=this.theme){return this._stacks[e]}getScopes(e=this.theme){return function(e){const t=[],n=new Set;return function e(r){if(n.has(r))return;n.add(r);const o=r?.nameScopesList?.scopeName;o&&t.push(o),r.parent&&e(r.parent)}(e),t}(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function uU(){const e=new WeakMap;function t(t){if(!e.has(t.meta)){let n=function(e){if("number"==typeof e){if(e<0||e>t.source.length)throw new dz(`Invalid decoration offset: ${e}. Code length: ${t.source.length}`);return{...r.indexToPos(e),offset:e}}{const t=r.lines[e.line];if(void 0===t)throw new dz(`Invalid decoration position ${JSON.stringify(e)}. Lines length: ${r.lines.length}`);if(e.character<0||e.character>t.length)throw new dz(`Invalid decoration position ${JSON.stringify(e)}. Line ${e.line} length: ${t.length}`);return{...e,offset:r.posToIndex(e.line,e.character)}}};const r=function(e){const t=eU(e,!0).map((([e])=>e));return{lines:t,indexToPos:function(n){if(n===e.length)return{line:t.length-1,character:t[t.length-1].length};let r=n,o=0;for(const e of t){if(r<e.length)break;r-=e.length,o++}return{line:o,character:r}},posToIndex:function(e,n){let r=0;for(let n=0;n<e;n++)r+=t[n].length;return r+=n,r}}}(t.source),o=(t.options.decorations||[]).map((e=>({...e,start:n(e.start),end:n(e.end)})));!function(e){for(let t=0;t<e.length;t++){const n=e[t];if(n.start.offset>n.end.offset)throw new dz(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=t+1;r<e.length;r++){const t=e[r],o=n.start.offset<=t.start.offset&&t.start.offset<n.end.offset,i=n.start.offset<t.end.offset&&t.end.offset<=n.end.offset,a=t.start.offset<=n.start.offset&&n.start.offset<t.end.offset,s=t.start.offset<n.end.offset&&n.end.offset<=t.end.offset;if(o||i||a||s){if(o&&i)continue;if(a&&s)continue;throw new dz(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(t.start)} intersect.`)}}}}(o),e.set(t.meta,{decorations:o,converter:r,source:t.source})}return e.get(t.meta)}return{name:"shiki:decorations",tokens(e){if(!this.options.decorations?.length)return;const n=function(e,t){const n=Array.from(t instanceof Set?t:new Set(t)).sort(((e,t)=>e-t));return n.length?e.map((e=>e.flatMap((e=>{const t=n.filter((t=>e.offset<t&&t<e.offset+e.content.length)).map((t=>t-e.offset)).sort(((e,t)=>e-t));return t.length?function(e,t){let n=0;const r=[];for(const o of t)o>n&&r.push({...e,content:e.content.slice(n,o),offset:e.offset+n}),n=o;return n<e.content.length&&r.push({...e,content:e.content.slice(n),offset:e.offset+n}),r}(e,t):e})))):e}(e,t(this).decorations.flatMap((e=>[e.start.offset,e.end.offset])));return n},code(e){if(!this.options.decorations?.length)return;const n=t(this),r=Array.from(e.children).filter((e=>"element"===e.type&&"span"===e.tagName));if(r.length!==n.converter.lines.length)throw new dz(`Number of lines in code element (${r.length}) does not match the number of lines in the source (${n.converter.lines.length}). Failed to apply decorations.`);function o(e,t,n,o){const i=r[e];let s="",u=-1,l=-1;if(0===t&&(u=0),0===n&&(l=0),n===Number.POSITIVE_INFINITY&&(l=i.children.length),-1===u||-1===l)for(let e=0;e<i.children.length;e++)s+=lU(i.children[e]),-1===u&&s.length===t&&(u=e+1),-1===l&&s.length===n&&(l=e+1);if(-1===u)throw new dz(`Failed to find start index for decoration ${JSON.stringify(o.start)}`);if(-1===l)throw new dz(`Failed to find end index for decoration ${JSON.stringify(o.end)}`);const c=i.children.slice(u,l);if(o.alwaysWrap||c.length!==i.children.length)if(o.alwaysWrap||1!==c.length||"element"!==c[0].type){const e={type:"element",tagName:"span",properties:{},children:c};a(e,o,"wrapper"),i.children.splice(u,c.length,e)}else a(c[0],o,"token");else a(i,o,"line")}function i(e,t){r[e]=a(r[e],t,"line")}function a(e,t,n){const r=t.properties||{},o=t.transform||(e=>e);return e.tagName=t.tagName||"span",e.properties={...e.properties,...r,class:e.properties.class},t.properties?.class&&Q$(e,t.properties.class),o(e,n)||e}const s=[],u=n.decorations.sort(((e,t)=>t.start.offset-e.start.offset||e.end.offset-t.end.offset));for(const e of u){const{start:t,end:n}=e;if(t.line===n.line)o(t.line,t.character,n.character,e);else if(t.line<n.line){o(t.line,t.character,Number.POSITIVE_INFINITY,e);for(let r=t.line+1;r<n.line;r++)s.unshift((()=>i(r,e)));o(n.line,0,n.character,e)}}s.forEach((e=>e()))}}}function lU(e){return"text"===e.type?e.value:"element"===e.type?e.children.map(lU).join(""):""}const cU=[uU()];function dU(e){return[...e.transformers||[],...cU]}var fU=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],pU={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function hU(e,t){const n=e.indexOf("",t);if(-1!==n&&"["===e[n+1]){const t=e.indexOf("m",n);if(-1!==t)return{sequence:e.substring(n+2,t).split(";"),startPosition:n,position:t+1}}return{position:e.length}}function mU(e){const t=e.shift();if("2"===t){const t=e.splice(0,3).map((e=>Number.parseInt(e)));if(3!==t.length||t.some((e=>Number.isNaN(e))))return;return{type:"rgb",rgb:t}}if("5"===t){const t=e.shift();if(t)return{type:"table",index:Number(t)}}}function vU(e){const t=[];for(;e.length>0;){const n=e.shift();if(!n)continue;const r=Number.parseInt(n);if(!Number.isNaN(r))if(0===r)t.push({type:"resetAll"});else if(r<=9)pU[r]&&t.push({type:"setDecoration",value:pU[r]});else if(r<=29){const e=pU[r-20];e&&(t.push({type:"resetDecoration",value:e}),"dim"===e&&t.push({type:"resetDecoration",value:"bold"}))}else if(r<=37)t.push({type:"setForegroundColor",value:{type:"named",name:fU[r-30]}});else if(38===r){const n=mU(e);n&&t.push({type:"setForegroundColor",value:n})}else if(39===r)t.push({type:"resetForegroundColor"});else if(r<=47)t.push({type:"setBackgroundColor",value:{type:"named",name:fU[r-40]}});else if(48===r){const n=mU(e);n&&t.push({type:"setBackgroundColor",value:n})}else 49===r?t.push({type:"resetBackgroundColor"}):53===r?t.push({type:"setDecoration",value:"overline"}):55===r?t.push({type:"resetDecoration",value:"overline"}):r>=90&&r<=97?t.push({type:"setForegroundColor",value:{type:"named",name:fU[r-90+8]}}):r>=100&&r<=107&&t.push({type:"setBackgroundColor",value:{type:"named",name:fU[r-100+8]}})}return t}var gU={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function yU(e=gU){function t(t){return e[t]}function n(e){return`#${e.map((e=>Math.max(0,Math.min(e,255)).toString(16).padStart(2,"0"))).join("")}`}let r;return{value:function(e){switch(e.type){case"named":return t(e.name);case"rgb":return n(e.rgb);case"table":return function(e){return function(){if(r)return r;r=[];for(let e=0;e<fU.length;e++)r.push(t(fU[e]));let e=[0,95,135,175,215,255];for(let t=0;t<6;t++)for(let o=0;o<6;o++)for(let i=0;i<6;i++)r.push(n([e[t],e[o],e[i]]));let o=8;for(let e=0;e<24;e++,o+=10)r.push(n([o,o,o]));return r}()[e]}(e.index)}}}}function bU(e,t,n={}){const{lang:r="text",theme:o=e.getLoadedThemes()[0]}=n;if(Z$(r)||X$(o))return eU(t).map((e=>[{content:e[0],offset:e[1]}]));const{theme:i,colorMap:a}=e.setTheme(o);if("ansi"===r)return function(e,t,n){const r=W$(e,n),o=eU(t),i=yU(Object.fromEntries(fU.map((t=>[t,e.colors?.[`terminal.ansi${t[0].toUpperCase()}${t.substring(1)}`]])))),a=function(){let e=null,t=null,n=new Set;return{parse(r){const o=[];let i=0;do{const a=hU(r,i),s=a.sequence?r.substring(i,a.startPosition):r.substring(i);if(s.length>0&&o.push({value:s,foreground:e,background:t,decorations:new Set(n)}),a.sequence){const r=vU(a.sequence);for(const o of r)"resetAll"===o.type?(e=null,t=null,n.clear()):"resetForegroundColor"===o.type?e=null:"resetBackgroundColor"===o.type?t=null:"resetDecoration"===o.type&&n.delete(o.value);for(const o of r)"setForegroundColor"===o.type?e=o.value:"setBackgroundColor"===o.type?t=o.value:"setDecoration"===o.type&&n.add(o.value)}i=a.position}while(i<r.length);return o}}}();return o.map((t=>a.parse(t[0]).map((n=>{let o,a;n.decorations.has("reverse")?(o=n.background?i.value(n.background):e.bg,a=n.foreground?i.value(n.foreground):e.fg):(o=n.foreground?i.value(n.foreground):e.fg,a=n.background?i.value(n.background):void 0),o=q$(o,r),a=q$(a,r),n.decorations.has("dim")&&(o=function(e){const t=e.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(t){if(t[3]){const e=Math.round(Number.parseInt(t[3],16)/2).toString(16).padStart(2,"0");return`#${t[1]}${t[2]}${e}`}return t[2]?`#${t[1]}${t[2]}80`:`#${Array.from(t[1]).map((e=>`${e}${e}`)).join("")}80`}const n=e.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:e}(o));let s=$z.None;return n.decorations.has("bold")&&(s|=$z.Bold),n.decorations.has("italic")&&(s|=$z.Italic),n.decorations.has("underline")&&(s|=$z.Underline),n.decorations.has("strikethrough")&&(s|=$z.Strikethrough),{content:n.value,offset:t[1],color:o,bgColor:a,fontStyle:s}}))))}(i,t,n);const s=e.getLanguage(r);if(n.grammarState){if(n.grammarState.lang!==s.name)throw new dz(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${s.name}"`);if(!n.grammarState.themes.includes(i.name))throw new dz(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${i.name}"`)}return function(e,t,n,r,o){const i=DU(e,t,n,r,o),a=new sU(DU(e,t,n,r,o).stateStack,t.name,n.name);return iU(i.tokens,a),i.tokens}(t,s,i,a,n)}function DU(e,t,n,r,o){const i=W$(n,o),{tokenizeMaxLineLength:a=0,tokenizeTimeLimit:s=500}=o,u=eU(e);let l=o.grammarState?function(e,t){if(!(e instanceof sU))throw new dz("Invalid grammar state");return e.getInternalStack(t)}(o.grammarState,n.name)??U$:null!=o.grammarContextCode?DU(o.grammarContextCode,t,n,r,{...o,grammarState:void 0,grammarContextCode:void 0}).stateStack:U$,c=[];const d=[];for(let e=0,p=u.length;e<p;e++){const[p,h]=u[e];if(""===p){c=[],d.push([]);continue}if(a>0&&p.length>=a){c=[],d.push([{content:p,offset:h,color:"",fontStyle:0}]);continue}let m,v,g;o.includeExplanation&&(m=t.tokenizeLine(p,l,s),v=m.tokens,g=0);const y=t.tokenizeLine2(p,l,s),b=y.tokens.length/2;for(let e=0;e<b;e++){const t=y.tokens[2*e],a=e+1<b?y.tokens[2*e+2]:p.length;if(t===a)continue;const s=y.tokens[2*e+1],u=q$(r[Kz.getForeground(s)],i),l=Kz.getFontStyle(s),d={content:p.substring(t,a),offset:h+t,color:u,fontStyle:l};if(o.includeExplanation){const e=[];if("scopeName"!==o.includeExplanation)for(const t of n.settings){let n;switch(typeof t.scope){case"string":n=t.scope.split(/,/).map((e=>e.trim()));break;case"object":n=t.scope;break;default:continue}e.push({settings:t,selectors:n.map((e=>e.split(/ /)))})}d.explanation=[];let r=0;for(;t+r<a;){const t=v[g],n=p.substring(t.startIndex,t.endIndex);r+=n.length,d.explanation.push({content:n,scopes:"scopeName"===o.includeExplanation?(f=t.scopes,f.map((e=>({scopeName:e})))):wU(e,t.scopes)}),g+=1}}c.push(d)}d.push(c),c=[],l=y.ruleStack}var f;return{tokens:d,stateStack:l}}function wU(e,t){const n=[];for(let r=0,o=t.length;r<o;r++){const o=t[r];n[r]={scopeName:o,themeMatches:EU(e,o,t.slice(0,r))}}return n}function CU(e,t){return e===t||t.substring(0,e.length)===e&&"."===t[e.length]}function kU(e,t,n){if(!CU(e[e.length-1],t))return!1;let r=e.length-2,o=n.length-1;for(;r>=0&&o>=0;)CU(e[r],n[o])&&(r-=1),o-=1;return-1===r}function EU(e,t,n){const r=[];for(const{selectors:o,settings:i}of e)for(const e of o)if(kU(e,t,n)){r.push(i);break}return r}function xU(e,t,n){const r=Object.entries(n.themes).filter((e=>e[1])).map((e=>({color:e[0],theme:e[1]}))),o=r.map((r=>{const o=bU(e,t,{...n,theme:r.theme});return{tokens:o,state:aU(o),theme:"string"==typeof r.theme?r.theme:r.theme.name}})),i=function(...e){const t=e.map((()=>[])),n=e.length;for(let r=0;r<e[0].length;r++){const o=e.map((e=>e[r])),i=t.map((()=>[]));t.forEach(((e,t)=>e.push(i[t])));const a=o.map((()=>0)),s=o.map((e=>e[0]));for(;s.every((e=>e));){const e=Math.min(...s.map((e=>e.content.length)));for(let t=0;t<n;t++){const n=s[t];n.content.length===e?(i[t].push(n),a[t]+=1,s[t]=o[t][a[t]]):(i[t].push({...n,content:n.content.slice(0,e)}),s[t]={...n,content:n.content.slice(e),offset:n.offset+e})}}}return t}(...o.map((e=>e.tokens))),a=i[0].map(((e,t)=>e.map(((e,o)=>{const a={content:e.content,variants:{},offset:e.offset};return"includeExplanation"in n&&n.includeExplanation&&(a.explanation=e.explanation),i.forEach(((e,n)=>{const{content:i,explanation:s,offset:u,...l}=e[t][o];a.variants[r[n].color]=l})),a})))),s=o[0].state?new sU(Object.fromEntries(o.map((e=>[e.theme,e.state?.getInternalStack(e.theme)]))),o[0].state.lang):void 0;return s&&iU(a,s),a}function AU(e,t,n){let r,o,i,a,s,u;if("themes"in n){const{defaultColor:l="light",cssVariablePrefix:c="--shiki-"}=n,d=Object.entries(n.themes).filter((e=>e[1])).map((e=>({color:e[0],theme:e[1]}))).sort(((e,t)=>e.color===l?-1:t.color===l?1:0));if(0===d.length)throw new dz("`themes` option must not be empty");const f=xU(e,t,n);if(u=aU(f),l&&tU!==l&&!d.find((e=>e.color===l)))throw new dz(`\`themes\` option must contain the defaultColor key \`${l}\``);const p=d.map((t=>e.getTheme(t.theme))),h=d.map((e=>e.color));i=f.map((e=>e.map((e=>function(e,t,n,r){const o={content:e.content,explanation:e.explanation,offset:e.offset},i=t.map((t=>nU(e.variants[t]))),a=new Set(i.flatMap((e=>Object.keys(e)))),s={};return i.forEach(((e,o)=>{for(const u of a){const a=e[u]||"inherit";if(0===o&&r)if(r===tU&&i.length>1){const e=t.findIndex((e=>"light"===e)),r=t.findIndex((e=>"dark"===e));if(-1===e||-1===r)throw new dz('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const l=i[e][u]||"inherit",c=i[r][u]||"inherit";s[u]=`light-dark(${l}, ${c})`;const d="color"===u?"":"background-color"===u?"-bg":`-${u}`,f=n+t[o]+("color"===u?"":d);s[f]=a}else s[u]=a;else{const e="color"===u?"":"background-color"===u?"-bg":`-${u}`,r=n+t[o]+("color"===u?"":e);s[r]=a}}})),o.htmlStyle=s,o}(e,h,c,l))))),u&&iU(i,u);const m=d.map((e=>W$(e.theme,n)));o=FU(d,p,m,c,l,"fg"),r=FU(d,p,m,c,l,"bg"),a=`shiki-themes ${p.map((e=>e.name)).join(" ")}`,s=l?void 0:[o,r].join(";")}else{if(!("theme"in n))throw new dz("Invalid options, either `theme` or `themes` must be provided");{const s=W$(n.theme,n);i=bU(e,t,n);const l=e.getTheme(n.theme);r=q$(l.bg,s),o=q$(l.fg,s),a=l.name,u=aU(i)}}return{tokens:i,fg:o,bg:r,themeName:a,rootStyle:s,grammarState:u}}function FU(e,t,n,r,o,i){return e.map(((a,s)=>{const u=q$(t[s][i],n[s])||"inherit",l=`${r+a.color}${"bg"===i?"-bg":""}:${u}`;if(0===s&&o){if(o===tU&&e.length>1){const r=e.findIndex((e=>"light"===e.color)),o=e.findIndex((e=>"dark"===e.color));if(-1===r||-1===o)throw new dz('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');return`light-dark(${q$(t[r][i],n[r])||"inherit"}, ${q$(t[o][i],n[o])||"inherit"});${l}`}return u}return l})).join(";")}function SU(e,t,n,r={meta:{},options:n,codeToHast:(t,n)=>SU(e,t,n),codeToTokens:(t,n)=>AU(e,t,n)}){let o=t;for(const e of dU(n))o=e.preprocess?.call(r,o,n)||o;let{tokens:i,fg:a,bg:s,themeName:u,rootStyle:l,grammarState:c}=AU(e,o,n);const{mergeWhitespaces:d=!0,mergeSameStyleTokens:f=!1}=n;!0===d?i=function(e){return e.map((e=>{const t=[];let n="",r=0;return e.forEach(((o,i)=>{const a=!(o.fontStyle&&(o.fontStyle&$z.Underline||o.fontStyle&$z.Strikethrough));a&&o.content.match(/^\s+$/)&&e[i+1]?(r||(r=o.offset),n+=o.content):n?(a?t.push({...o,offset:r,content:n+o.content}):t.push({content:n,offset:r},o),r=0,n=""):t.push(o)})),t}))}(i):"never"===d&&(i=function(e){return e.map((e=>e.flatMap((e=>{if(e.content.match(/^\s+$/))return e;const t=e.content.match(/^(\s*)(.*?)(\s*)$/);if(!t)return e;const[,n,r,o]=t;if(!n&&!o)return e;const i=[{...e,offset:e.offset+n.length,content:r}];return n&&i.unshift({content:n,offset:e.offset}),o&&i.push({content:o,offset:e.offset+n.length+r.length}),i}))))}(i)),f&&(i=function(e){return e.map((e=>{const t=[];for(const n of e){if(0===t.length){t.push({...n});continue}const e=t[t.length-1],r=rU(e.htmlStyle||nU(e)),o=rU(n.htmlStyle||nU(n)),i=e.fontStyle&&(e.fontStyle&$z.Underline||e.fontStyle&$z.Strikethrough),a=n.fontStyle&&(n.fontStyle&$z.Underline||n.fontStyle&$z.Strikethrough);i||a||r!==o?t.push({...n}):e.content+=n.content}return t}))}(i));const p={...r,get source(){return o}};for(const e of dU(n))i=e.tokens?.call(p,i)||i;return function(e,t,n,r=aU(e)){const o=dU(t),i=[],a={type:"root",children:[]},{structure:s="classic",tabindex:u="0"}=t;let l={type:"element",tagName:"pre",properties:{class:`shiki ${t.themeName||""}`,style:t.rootStyle||`background-color:${t.bg};color:${t.fg}`,...!1!==u&&null!=u?{tabindex:u.toString()}:{},...Object.fromEntries(Array.from(Object.entries(t.meta||{})).filter((([e])=>!e.startsWith("_"))))},children:[]},c={type:"element",tagName:"code",properties:{},children:i};const d=[],f={...n,structure:s,addClassToHast:Q$,get source(){return n.source},get tokens(){return e},get options(){return t},get root(){return a},get pre(){return l},get code(){return c},get lines(){return d}};if(e.forEach(((e,t)=>{t&&("inline"===s?a.children.push({type:"element",tagName:"br",properties:{},children:[]}):"classic"===s&&i.push({type:"text",value:"\n"}));let n={type:"element",tagName:"span",properties:{class:"line"},children:[]},r=0;for(const i of e){let e={type:"element",tagName:"span",properties:{...i.htmlAttrs},children:[{type:"text",value:i.content}]};const u=rU(i.htmlStyle||nU(i));u&&(e.properties.style=u);for(const a of o)e=a?.span?.call(f,e,t+1,r,n,i)||e;"inline"===s?a.children.push(e):"classic"===s&&n.children.push(e),r+=i.content.length}if("classic"===s){for(const e of o)n=e?.line?.call(f,n,t+1)||n;d.push(n),i.push(n)}})),"classic"===s){for(const e of o)c=e?.code?.call(f,c)||c;l.children.push(c);for(const e of o)l=e?.pre?.call(f,l)||l;a.children.push(l)}let p=a;for(const e of o)p=e?.root?.call(f,p)||p;return r&&iU(p,r),p}(i,{...n,fg:a,bg:s,themeName:u,rootStyle:l},p,c)}const MU=G$.V;const BU="__shiki_resolved";function OU(e){if(e?.[BU])return e;const t={...e};t.tokenColors&&!t.settings&&(t.settings=t.tokenColors,delete t.tokenColors),t.type||="dark",t.colorReplacements={...t.colorReplacements},t.settings||=[];let{bg:n,fg:r}=t;if(!n||!r){const e=t.settings?t.settings.find((e=>!e.name&&!e.scope)):void 0;e?.settings?.foreground&&(r=e.settings.foreground),e?.settings?.background&&(n=e.settings.background),!r&&t?.colors?.["editor.foreground"]&&(r=t.colors["editor.foreground"]),!n&&t?.colors?.["editor.background"]&&(n=t.colors["editor.background"]),r||(r="light"===t.type?"#333333":"#bbbbbb"),n||(n="light"===t.type?"#fffffe":"#1e1e1e"),t.fg=r,t.bg=n}t.settings[0]&&t.settings[0].settings&&!t.settings[0].scope||t.settings.unshift({settings:{foreground:t.fg,background:t.bg}});let o=0;const i=new Map;function a(e){if(i.has(e))return i.get(e);o+=1;const n=`#${o.toString(16).padStart(8,"0").toLowerCase()}`;return t.colorReplacements?.[`#${n}`]?a(e):(i.set(e,n),n)}t.settings=t.settings.map((e=>{const n=e.settings?.foreground&&!e.settings.foreground.startsWith("#"),r=e.settings?.background&&!e.settings.background.startsWith("#");if(!n&&!r)return e;const o={...e,settings:{...e.settings}};if(n){const n=a(e.settings.foreground);t.colorReplacements[n]=e.settings.foreground,o.settings.foreground=n}if(r){const n=a(e.settings.background);t.colorReplacements[n]=e.settings.background,o.settings.background=n}return o}));for(const e of Object.keys(t.colors||{}))if(("editor.foreground"===e||"editor.background"===e||e.startsWith("terminal.ansi"))&&!t.colors[e]?.startsWith("#")){const n=a(t.colors[e]);t.colorReplacements[n]=t.colors[e],t.colors[e]=n}return Object.defineProperty(t,BU,{enumerable:!1,writable:!1,value:!0}),t}async function TU(e){return Array.from(new Set((await Promise.all(e.filter((e=>!J$(e))).map((async e=>await K$(e).then((e=>Array.isArray(e)?e:[e])))))).flat()))}async function PU(e){return(await Promise.all(e.map((async e=>Y$(e)?null:OU(await K$(e)))))).filter((e=>!!e))}class NU extends Error{constructor(e){super(e),this.name="ShikiError"}}class _U extends $${constructor(e,t,n,r={}){super(e),this._resolver=e,this._themes=t,this._langs=n,this._alias=r,this._themes.map((e=>this.loadTheme(e))),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return"string"==typeof e?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const t=OU(e);return t.name&&(this._resolvedThemes.set(t.name,t),this._loadedThemesCache=null),t}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let t=this._textmateThemeCache.get(e);t||(t=Rz.createFromRawTheme(e),this._textmateThemeCache.set(e,t)),this._syncRegistry.setTheme(t)}getGrammar(e){if(this._alias[e]){const t=new Set([e]);for(;this._alias[e];){if(e=this._alias[e],t.has(e))throw new NU(`Circular alias \`${Array.from(t).join(" -> ")} -> ${e}\``);t.add(e)}}return this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const t=new Set([...this._langMap.values()].filter((t=>t.embeddedLangsLazy?.includes(e.name))));this._resolver.addLanguage(e);const n={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const r=this.loadGrammarWithConfiguration(e.scopeName,1,n);if(r.name=e.name,this._resolvedGrammars.set(e.name,r),e.aliases&&e.aliases.forEach((t=>{this._alias[t]=e.name})),this._loadedLanguagesCache=null,t.size)for(const e of t)this._resolvedGrammars.delete(e.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(e.scopeName),this._syncRegistry?._grammars?.delete(e.scopeName),this.loadLanguage(this._langMap.get(e.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const t of e)this.resolveEmbeddedLanguages(t);const t=Array.from(this._langGraph.entries()),n=t.filter((([e,t])=>!t));if(n.length){const e=t.filter((([e,t])=>t&&t.embeddedLangs?.some((e=>n.map((([e])=>e)).includes(e))))).filter((e=>!n.includes(e)));throw new NU(`Missing languages ${n.map((([e])=>`\`${e}\``)).join(", ")}, required by ${e.map((([e])=>`\`${e}\``)).join(", ")}`)}for(const[e,n]of t)this._resolver.addLanguage(n);for(const[e,n]of t)this.loadLanguage(n)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){if(this._langMap.set(e.name,e),this._langGraph.set(e.name,e),e.embeddedLangs)for(const t of e.embeddedLangs)this._langGraph.set(t,this._langMap.get(t))}}class jU{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,t){this._onigLib={createOnigScanner:t=>e.createScanner(t),createOnigString:t=>e.createString(t)},t.forEach((e=>this.addLanguage(e)))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach((t=>{this._langs.set(t,e)})),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach((t=>{this._injections.get(t)||this._injections.set(t,[]),this._injections.get(t).push(e.scopeName)}))}getInjections(e){const t=e.split(".");let n=[];for(let e=1;e<=t.length;e++){const r=t.slice(0,e).join(".");n=[...n,...this._injections.get(r)||[]]}return n}}let IU=0;async function RU(e){e.engine||function(e,t=3){t>3||console.trace(`[SHIKI DEPRECATE]: ${e}`)}("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[t,n,r]=await Promise.all([PU(e.themes||[]),TU(e.langs||[]),e.engine]);return function(e){IU+=1,!1!==e.warnings&&IU>=10&&IU%10==0&&console.warn(`[Shiki] ${IU} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let t=!1;if(!e.engine)throw new NU("`engine` option is required for synchronous mode");const n=(e.langs||[]).flat(1),r=(e.themes||[]).flat(1).map(OU),o=new jU(e.engine,n),i=new _U(o,r,n,e.langAlias);let a;function s(e){if("none"===e)return{bg:"",fg:"",name:"none",settings:[],type:"dark"};c();const t=i.getTheme(e);if(!t)throw new NU(`Theme \`${e}\` not found, you may need to load it first`);return t}function u(...e){c(),i.loadLanguages(e.flat(1))}function l(...e){c();for(const t of e.flat(1))i.loadTheme(t)}function c(){if(t)throw new NU("Shiki instance has been disposed")}function d(){t||(t=!0,i.dispose(),IU-=1)}return{setTheme:function(e){c();const t=s(e);return a!==e&&(i.setTheme(t),a=e),{theme:t,colorMap:i.getColorMap()}},getTheme:s,getLanguage:function(e){c();const t=i.getGrammar("string"==typeof e?e:e.name);if(!t)throw new NU(`Language \`${e}\` not found, you may need to load it first`);return t},getLoadedThemes:function(){return c(),i.getLoadedThemes()},getLoadedLanguages:function(){return c(),i.getLoadedLanguages()},loadLanguage:async function(...e){return u(await TU(e))},loadLanguageSync:u,loadTheme:async function(...e){return c(),l(await PU(e))},loadThemeSync:l,dispose:d,[Symbol.dispose]:d}}({...e,themes:t,langs:n,engine:r})}async function LU(e){const t=await RU(e);return{getLastGrammarState:(...e)=>function(...e){if(2===e.length)return aU(e[1]);const[t,n,r={}]=e,{lang:o="text",theme:i=t.getLoadedThemes()[0]}=r;if(Z$(o)||X$(i))throw new dz("Plain language does not have grammar state");if("ansi"===o)throw new dz("ANSI language does not have grammar state");const{theme:a,colorMap:s}=t.setTheme(i),u=t.getLanguage(o);return new sU(DU(n,u,a,s,r).stateStack,u.name,a.name)}(t,...e),codeToTokensBase:(e,n)=>bU(t,e,n),codeToTokensWithThemes:(e,n)=>xU(t,e,n),codeToTokens:(e,n)=>AU(t,e,n),codeToHast:(e,n)=>SU(t,e,n),codeToHtml:(e,n)=>function(e,t,n){const r={meta:{},options:n,codeToHast:(t,n)=>SU(e,t,n),codeToTokens:(t,n)=>AU(e,t,n)};let o=MU(SU(e,t,n,r));for(const e of dU(n))o=e.postprocess?.call(r,o,n)||o;return o}(t,e,n),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...t,getInternalContext:()=>t}}function HU(e){const t=e.langs,n=e.themes,r=e.engine;return async function(e){function o(e){if("string"==typeof e){if(J$(e))return[];const n=t[e];if(!n)throw new dz(`Language \`${e}\` is not included in this bundle. You may want to load it from external source.`);return n}return e}function i(e){if(Y$(e))return"none";if("string"==typeof e){const t=n[e];if(!t)throw new dz(`Theme \`${e}\` is not included in this bundle. You may want to load it from external source.`);return t}return e}const a=(e.themes??[]).map((e=>i(e))),s=(e.langs??[]).map((e=>o(e))),u=await LU({engine:e.engine??r(),...e,themes:a,langs:s});return{...u,loadLanguage:(...e)=>u.loadLanguage(...e.map(o)),loadTheme:(...e)=>u.loadTheme(...e.map(i)),getBundledLanguages:()=>t,getBundledThemes:()=>n}}}var VU=a(6527);const zU=4294967295;class $U{constructor(e,t={}){this.patterns=e,this.options=t;const{forgiving:n=!1,cache:r,regexConstructor:o}=t;if(!o)throw new Error("Option `regexConstructor` is not provided");this.regexps=e.map((e=>{if("string"!=typeof e)return e;const t=r?.get(e);if(t){if(t instanceof RegExp)return t;if(n)return null;throw t}try{const t=o(e);return r?.set(e,t),t}catch(t){if(r?.set(e,t),n)return null;throw t}}))}regexps;findNextMatchSync(e,t,n){const r="string"==typeof e?e:e.content,o=[];function i(e,t,n=0){return{index:e,captureIndices:t.indices.map((e=>null==e?{start:zU,end:zU,length:0}:{start:e[0]+n,end:e[1]+n,length:e[1]-e[0]}))}}for(let e=0;e<this.regexps.length;e++){const n=this.regexps[e];if(n)try{n.lastIndex=t;const a=n.exec(r);if(!a)continue;if(a.index===t)return i(e,a,0);o.push([e,a,0])}catch(e){if(this.options.forgiving)continue;throw e}}if(o.length){const e=Math.min(...o.map((e=>e[1].index)));for(const[t,n,r]of o)if(n.index===e)return i(t,n,r)}return null}}var UU=HU({langs:{c:function(){return a.e(1435).then(a.bind(a,1435))},cpp:function(){return Promise.all([a.e(1435),a.e(6368),a.e(957)]).then(a.bind(a,957))},"c++":function(){return Promise.all([a.e(1435),a.e(6368),a.e(957)]).then(a.bind(a,957))},css:function(){return a.e(9713).then(a.bind(a,9713))},glsl:function(){return Promise.all([a.e(1435),a.e(5040)]).then(a.bind(a,5040))},graphql:function(){return Promise.all([a.e(5689),a.e(4705),a.e(6065),a.e(9011),a.e(439)]).then(a.bind(a,439))},gql:function(){return Promise.all([a.e(5689),a.e(4705),a.e(6065),a.e(9011),a.e(439)]).then(a.bind(a,439))},haml:function(){return Promise.all([a.e(5689),a.e(9713),a.e(9190)]).then(a.bind(a,9190))},html:function(){return Promise.all([a.e(5689),a.e(9713),a.e(95)]).then(a.bind(a,95))},java:function(){return a.e(4340).then(a.bind(a,4340))},javascript:function(){return a.e(5689).then(a.bind(a,5689))},js:function(){return a.e(5689).then(a.bind(a,5689))},json:function(){return a.e(7294).then(a.bind(a,7294))},jsonc:function(){return a.e(2477).then(a.bind(a,2477))},jsonl:function(){return a.e(4282).then(a.bind(a,4282))},jsx:function(){return a.e(9011).then(a.bind(a,9011))},julia:function(){return Promise.all([a.e(5689),a.e(1435),a.e(6368),a.e(957),a.e(462),a.e(4482),a.e(1491)]).then(a.bind(a,1491))},jl:function(){return Promise.all([a.e(5689),a.e(1435),a.e(6368),a.e(957),a.e(462),a.e(4482),a.e(1491)]).then(a.bind(a,1491))},less:function(){return a.e(1419).then(a.bind(a,1419))},markdown:function(){return a.e(8375).then(a.bind(a,8375))},md:function(){return a.e(8375).then(a.bind(a,8375))},mdx:function(){return a.e(8337).then(a.bind(a,8337))},php:function(){return Promise.all([a.e(5689),a.e(9713),a.e(95),a.e(6368),a.e(4340),a.e(9240)]).then(a.bind(a,9240))},postcss:function(){return a.e(9019).then(a.bind(a,9019))},pug:function(){return Promise.all([a.e(5689),a.e(9713),a.e(95),a.e(4860)]).then(a.bind(a,4860))},jade:function(){return Promise.all([a.e(5689),a.e(9713),a.e(95),a.e(4860)]).then(a.bind(a,4860))},python:function(){return a.e(462).then(a.bind(a,462))},py:function(){return a.e(462).then(a.bind(a,462))},r:function(){return a.e(4482).then(a.bind(a,4482))},regexp:function(){return a.e(2567).then(a.bind(a,2567))},regex:function(){return a.e(2567).then(a.bind(a,2567))},sass:function(){return a.e(9750).then(a.bind(a,9750))},scss:function(){return Promise.all([a.e(9713),a.e(416)]).then(a.bind(a,416))},shellscript:function(){return a.e(2079).then(a.bind(a,2079))},bash:function(){return a.e(2079).then(a.bind(a,2079))},sh:function(){return a.e(2079).then(a.bind(a,2079))},shell:function(){return a.e(2079).then(a.bind(a,2079))},zsh:function(){return a.e(2079).then(a.bind(a,2079))},sql:function(){return a.e(6368).then(a.bind(a,6368))},svelte:function(){return Promise.all([a.e(5689),a.e(9713),a.e(4705),a.e(5489)]).then(a.bind(a,5489))},typescript:function(){return a.e(4705).then(a.bind(a,4705))},ts:function(){return a.e(4705).then(a.bind(a,4705))},vue:function(){return Promise.all([a.e(5689),a.e(9713),a.e(4705),a.e(95),a.e(5250)]).then(a.bind(a,5250))},"vue-html":function(){return Promise.all([a.e(5689),a.e(9713),a.e(4705),a.e(95),a.e(6578)]).then(a.bind(a,6578))},wasm:function(){return a.e(9132).then(a.bind(a,9132))},wgsl:function(){return a.e(7351).then(a.bind(a,7351))},xml:function(){return Promise.all([a.e(4340),a.e(2063)]).then(a.bind(a,2063))},yaml:function(){return a.e(2545).then(a.bind(a,2545))},yml:function(){return a.e(2545).then(a.bind(a,2545))},tsx:function(){return a.e(6065).then(a.bind(a,8446))},typescriptreact:function(){return a.e(6065).then(a.bind(a,8446))},haskell:function(){return a.e(2012).then(a.bind(a,2012))},hs:function(){return a.e(2012).then(a.bind(a,2012))},"c#":function(){return a.e(4209).then(a.bind(a,4209))},csharp:function(){return a.e(4209).then(a.bind(a,4209))},cs:function(){return a.e(4209).then(a.bind(a,4209))},latex:function(){return Promise.all([a.e(4482),a.e(5532)]).then(a.bind(a,5532))},lua:function(){return Promise.all([a.e(1435),a.e(1038)]).then(a.bind(a,1038))},mermaid:function(){return a.e(9909).then(a.bind(a,9909))},mmd:function(){return a.e(9909).then(a.bind(a,9909))},ruby:function(){return Promise.all([a.e(5689),a.e(9713),a.e(4705),a.e(1435),a.e(95),a.e(6368),a.e(2079),a.e(957),a.e(6065),a.e(9011),a.e(4340),a.e(4460)]).then(a.bind(a,4460))},rb:function(){return Promise.all([a.e(5689),a.e(9713),a.e(4705),a.e(1435),a.e(95),a.e(6368),a.e(2079),a.e(957),a.e(6065),a.e(9011),a.e(4340),a.e(4460)]).then(a.bind(a,4460))},rust:function(){return a.e(3514).then(a.bind(a,3514))},rs:function(){return a.e(3514).then(a.bind(a,3514))},scala:function(){return a.e(2966).then(a.bind(a,2966))},swift:function(){return a.e(5793).then(a.bind(a,5793))},kotlin:function(){return a.e(1523).then(a.bind(a,1523))},kt:function(){return a.e(1523).then(a.bind(a,1523))},kts:function(){return a.e(1523).then(a.bind(a,1523))},"objective-c":function(){return a.e(3449).then(a.bind(a,3449))},objc:function(){return a.e(3449).then(a.bind(a,3449))}},themes:{"github-dark":function(){return a.e(9738).then(a.bind(a,9738))},"github-light":function(){return a.e(7938).then(a.bind(a,7938))}},engine:function(){return function(e={}){const t=Object.assign({target:"auto",cache:new Map},e);return t.regexConstructor||=e=>function(e,t){return(0,VU.vr)(e,{global:!0,hasIndices:!0,lazyCompileLength:3e3,rules:{allowOrphanBackrefs:!0,asciiWordBoundaries:!0,captureGroup:!0,recursionLimit:5,singleline:!0},...t})}(e,{target:t.target}),{createScanner:e=>new $U(e,t),createString:e=>({content:e})}}()}}),GU={defaultLanguage:"javascript",supportedLanguages:{text:{name:"Plain Text",aliases:["text","txt","plain"]},c:{name:"C",aliases:["c"]},cpp:{name:"C++",aliases:["cpp","c++"]},css:{name:"CSS",aliases:["css"]},glsl:{name:"GLSL",aliases:["glsl"]},graphql:{name:"GraphQL",aliases:["graphql","gql"]},haml:{name:"Ruby Haml",aliases:["haml"]},html:{name:"HTML",aliases:["html"]},java:{name:"Java",aliases:["java"]},javascript:{name:"JavaScript",aliases:["javascript","js"]},json:{name:"JSON",aliases:["json"]},jsonc:{name:"JSON with Comments",aliases:["jsonc"]},jsonl:{name:"JSON Lines",aliases:["jsonl"]},jsx:{name:"JSX",aliases:["jsx"]},julia:{name:"Julia",aliases:["julia","jl"]},less:{name:"Less",aliases:["less"]},markdown:{name:"Markdown",aliases:["markdown","md"]},mdx:{name:"MDX",aliases:["mdx"]},php:{name:"PHP",aliases:["php"]},postcss:{name:"PostCSS",aliases:["postcss"]},pug:{name:"Pug",aliases:["pug","jade"]},python:{name:"Python",aliases:["python","py"]},r:{name:"R",aliases:["r"]},regexp:{name:"RegExp",aliases:["regexp","regex"]},sass:{name:"Sass",aliases:["sass"]},scss:{name:"SCSS",aliases:["scss"]},shellscript:{name:"Shell",aliases:["shellscript","bash","sh","shell","zsh"]},sql:{name:"SQL",aliases:["sql"]},svelte:{name:"Svelte",aliases:["svelte"]},typescript:{name:"TypeScript",aliases:["typescript","ts"]},vue:{name:"Vue",aliases:["vue"]},"vue-html":{name:"Vue HTML",aliases:["vue-html"]},wasm:{name:"WebAssembly",aliases:["wasm"]},wgsl:{name:"WGSL",aliases:["wgsl"]},xml:{name:"XML",aliases:["xml"]},yaml:{name:"YAML",aliases:["yaml","yml"]},tsx:{name:"TSX",aliases:["tsx","typescriptreact"]},haskell:{name:"Haskell",aliases:["haskell","hs"]},csharp:{name:"C#",aliases:["c#","csharp","cs"]},latex:{name:"LaTeX",aliases:["latex"]},lua:{name:"Lua",aliases:["lua"]},mermaid:{name:"Mermaid",aliases:["mermaid","mmd"]},ruby:{name:"Ruby",aliases:["ruby","rb"]},rust:{name:"Rust",aliases:["rust","rs"]},scala:{name:"Scala",aliases:["scala"]},swift:{name:"Swift",aliases:["swift"]},kotlin:{name:"Kotlin",aliases:["kotlin","kt","kts"]},"objective-c":{name:"Objective C",aliases:["objective-c","objc"]}},createHighlighter:function(){return UU({themes:["github-dark","github-light"],langs:[]})}},WU={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},qU=d.createContext&&d.createContext(WU),KU=["attr","size","title"];function ZU(){return ZU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZU.apply(this,arguments)}function JU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function XU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JU(Object(n),!0).forEach((function(t){YU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function YU(e,t,n){return t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QU(e){return e&&e.map(((e,t)=>d.createElement(e.tag,XU({key:t},e.attr),QU(e.child))))}function eG(e){return t=>d.createElement(tG,ZU({attr:XU({},e.attr)},t),QU(e.child))}function tG(e){var t=t=>{var n,{attr:r,size:o,title:i}=e,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,KU),s=o||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),d.createElement("svg",ZU({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,a,{className:n,style:XU(XU({color:e.color||t.color},t.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),i&&d.createElement("title",null,i),e.children)};return void 0!==qU?d.createElement(qU.Consumer,null,(e=>t(e))):t(WU)}function nG(e){return eG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z"},child:[]}]})(e)}function rG(e){return eG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{fillRule:"evenodd"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 3v8h8V3H3zm6 6H5V5h4v4zm-6 4v8h8v-8H3zm6 6H5v-4h4v4zm4-16v8h8V3h-8zm6 6h-4V5h4v4zm-6 4v8h8v-8h-8zm6 6h-4v-4h4v4z"},child:[]}]}]})(e)}function oG(e){return eG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 5v14h18V5H3zm5.33 12H5V7h3.33v10zm5.34 0h-3.33V7h3.33v10zM19 17h-3.33V7H19v10z"},child:[]}]})(e)}function iG(e){return eG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 5v14h18V5H3zm4 2v2H5V7h2zm-2 6v-2h2v2H5zm0 2h2v2H5v-2zm14 2H9v-2h10v2zm0-4H9v-2h10v2zm0-4H9V7h10v2z"},child:[]}]})(e)}function aG(e){return eG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 5v14h18V5H3zm5.33 12H5V7h3.33v10zm5.34 0h-3.33v-4h3.33v4zM19 17h-3.33v-4H19v4zm0-6h-8.67V7H19v4z"},child:[]}]})(e)}function sG(e){return eG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2 4v16h20V4H2zm4.5 14H4v-2.5h2.5V18zm0-4.75H4v-2.5h2.5v2.5zm0-4.75H4V6h2.5v2.5zM11 18H8.5v-2.5H11V18zm0-4.75H8.5v-2.5H11v2.5zm0-4.75H8.5V6H11v2.5zm4.5 9.5H13v-2.5h2.5V18zm0-4.75H13v-2.5h2.5v2.5zm0-4.75H13V6h2.5v2.5zM20 18h-2.5v-2.5H20V18zm0-4.75h-2.5v-2.5H20v2.5zm0-4.75h-2.5V6H20v2.5z"},child:[]}]})(e)}var uG=a(3444),lG={};lG.styleTagTransform=F(),lG.setAttributes=k(),lG.insert=w().bind(null,"head"),lG.domAPI=b(),lG.insertStyleElement=x(),g()(uG.A,lG),uG.A&&uG.A.locals&&uG.A.locals;var cG=function(e){var t=e.target,n=e.groups,r=e.position,o=void 0===r?"bottom-start":r;return React.createElement(vL,{withinPortal:!1,position:o},React.createElement(vL.Target,null,t),React.createElement(vL.Dropdown,null,n&&n.map((function(e){var t=e.title,n=e.values,r=void 0===n?[]:n,o=e.onValueSelected,i=void 0===o?function(e){}:o,a=e.crtValue;return React.createElement(d.Fragment,null,React.createElement(vL.Label,null,t),r&&r.map((function(e){var t=e.icon;return React.createElement(vL.Item,{key:e.value,value:e.value,leftSection:React.createElement(t,{"data-alert-icon-type":e.value}),onClick:function(){return i(e.value)}},React.createElement("span",{style:{fontWeight:e.value===a?"bold":"normal"}},e.title))})))}))))};function dG(e){return dG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dG(e)}function fG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fG(Object(n),!0).forEach((function(t){hG(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fG(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hG(e,t,n){return(t=function(e){var t=function(e){if("object"!=dG(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=dG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==dG(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mG(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var vG=c().requireLib("workspaces"),gG=vG.FilePreview,yG=vG.useRichMetaLine,bG=vG.useRichMetaActions,DG=c().requireLib("hoc").useColumnsFromRegistry,wG=c().requireLib("components").useSorting,CG=c().requireLib("components").ModernSimpleList,kG=(0,d.createContext)({dataModel:c().getInstance().getContextHolder(),entryProps:{handleClicks:function(){}}}),EG=function(e){e.entryProps;var t=e.editor,n=e.block,r=c().getInstance(),o=(0,d.useContext)(kG).dataModel,i=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return mG(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mG(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,d.useState)(o&&o.getContextNode()),2),a=i[0],s=i[1];(0,d.useEffect)((function(){var e=function(){return s(o.getContextNode())};return o.observe("context_changed",e),function(){o.stopObserving("context_changed",e)}}),[o]);var u=DG({pydio:r}).columns;u&&u.ajxp_label&&(u.ajxp_label.width="30%");var l=["modern-list","bn-children-list"],f={},h=n.props.display;switch(h){case"compact":l.push("compact-mode");break;case"list":l.push("list-expanded-mode");break;case"grid":l.push("material-list-grid");break;case"detail":l.push("table-mode"),f["data-content-type"]="table";break;case"masonry-160":l.push("masonry-grid","masonry-size-160")}var m=wG({dataModel:o,node:a,defaultSortingInfo:{sortType:"file-natural",attribute:"",direction:"asc"}}),v=m.currentSortingInfo,g=m.handleSortChange,y=[{value:"compact",title:"Compact",icon:sG},{value:"list",title:"Details",icon:iG},{value:"detail",title:"Table",icon:oG},{value:"grid",title:"Grid",icon:rG},{value:"masonry-160",title:"Waterfall",icon:aG}],b=Object.keys(u).filter((function(e){return u[e].sortType})).map((function(e){var t=u[e];return{value:pG(pG({},t),{},{attribute:e}),title:t.label,icon:nG}})),D=(0,d.useCallback)((function(e){var t="grid"===h||"masonry"===h,n=!!e.getMetadata().get("thumbnails")||!!e.getMetadata().get("ImagePreview"),r=!!e.getMetadata().get("Processing"),o="loading"===e.getMetadata().get("local:UploadStatus"),i=e.getMetadata().get("local:UploadProgress");return p().createElement(gG,{loadThumbnail:n&&!r,node:e,processing:r,lightBackground:t,displayLarge:t,mimeFontOverlay:"list"===h,uploading:o,uploadprogress:i})}),[h]),w=bG({pydio:r,dataModel:o,displayMode:h}),C=yG({pydio:r,columns:u});return p().createElement("div",{style:{lineHeight:"1.3em",width:"100%"}},p().createElement("div",{style:{display:"flex"}},p().createElement("h3",{style:{flex:1,fontSize:"1.3em",fontWeight:700,marginBottom:10}},p().createElement("span",{style:{marginRight:6}},"🗂️"),p().createElement("span",{style:{marginRight:6,flex:1}},"Folder Contents")),p().createElement("span",{style:{fontSize:"1rem"}},p().createElement(cG,{groups:[{title:"Display",crtValue:h,values:y,onValueSelected:function(e){e!==n.props.display&&t.updateBlock(n,{type:"childrenList",props:{display:e}})}},{title:"Sort By...",crtValue:v,values:b,onValueSelected:function(e){g(e)}}],target:p().createElement("span",{style:{cursor:"pointer"},className:"mdi mdi-dots-vertical-circle-outline"}),position:"bottom-end"}))),p().createElement(CG,{pydio:r,node:a,dataModel:o,observeNodeReload:!0,className:l.join(" "),displayMode:h,usePlaceHolder:!1,skipParentNavigation:!0,tableKeys:u,sortingInfo:v,handleSortChange:g,additionalAttrs:f,entryRenderIcon:D,entryRenderParentIcon:D,entryRenderFirstLine:function(e){return e.getLabel()},entryRenderSecondLine:"list"===h?C:null,entryRenderActions:"detail"!==h?w:null,tableEntryRenderCell:function(e){return p().createElement("span",null,D(e),e.getLabel())}}))},xG=_P({type:"childrenList",propSchema:{display:{default:"list",values:["list","grid","detail","masonry-160"]}},content:"none"},{render:function(e){return p().createElement(EG,{editor:e.editor,block:e.block})}});const AG=require("pydio/http/api");var FG=a.n(AG),SG=KP({type:"mention",propSchema:{user:{default:"Unknown"}},content:"none"},{render:function(e){return React.createElement("span",{style:{backgroundColor:"#8400ff33",padding:"2px 5px",fontSize:15,borderRadius:5}},"@",e.inlineContent.props.user)}}),MG=function(e){var t=e.editor;return React.createElement(rP,{triggerCharacter:"@",getItems:function(e){return function(e,t){return FG().getRestClient().getIdmApi().listUsers("/",t,!0,0,10).then((function(t){var n=t.Users;return(void 0===n?[]:n).map((function(t){var n=t.Attributes&&t.Attributes.displayName?t.Attributes.displayName:t.Login;return{title:n,onItemClick:function(){e.insertInlineContent([{type:"mention",props:{user:n}}," "])}}}))}))}(t,e)}})};const BG=require("pydio/http/search-api");var OG=a.n(BG);const TG=require("pydio/model/node");var PG=a.n(TG),NG=new(OG())(c().getInstance()),_G=KP({type:"nodeRef",propSchema:{path:{default:""},label:{default:""},repositoryId:{default:""}},content:"none"},{render:function(e){var t=e.inlineContent.props,n=t.path,r=t.repositoryId,o=new(PG())(n);return o.getMetadata().set("repository_id",r),React.createElement("span",{style:{backgroundColor:"#005bff33",padding:"2px 5px",fontSize:15,borderRadius:5,cursor:"pointer"},onClick:function(){return c().getInstance().goTo(o)}},n)}}),jG=function(e){var t=e.editor;return React.createElement(rP,{triggerCharacter:"%",getItems:function(e){return function(e,t){return NG.search({basename:t},"all",10,!0,"mtime",!0).then((function(t){return t.Results.map((function(t){var n=t.getLabel();return{title:React.createElement("span",null,t.getMetadata().get("repository_display")," - ",t.getPath()),onItemClick:function(){e.insertInlineContent([{type:"nodeRef",props:{label:n,path:t.getPath(),repositoryId:t.getMetadata().get("repository_id")}}," "])}}}))}))}(t,e)},minQueryLength:0})};function IG(e){return eG({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12.8659 3.00017L22.3922 19.5002C22.6684 19.9785 22.5045 20.5901 22.0262 20.8662C21.8742 20.954 21.7017 21.0002 21.5262 21.0002H2.47363C1.92135 21.0002 1.47363 20.5525 1.47363 20.0002C1.47363 19.8246 1.51984 19.6522 1.60761 19.5002L11.1339 3.00017C11.41 2.52187 12.0216 2.358 12.4999 2.63414C12.6519 2.72191 12.7782 2.84815 12.8659 3.00017ZM10.9999 16.0002V18.0002H12.9999V16.0002H10.9999ZM10.9999 9.00017V14.0002H12.9999V9.00017H10.9999Z"},child:[]}]})(e)}var RG=a(8077),LG={};LG.styleTagTransform=F(),LG.setAttributes=k(),LG.insert=w().bind(null,"head"),LG.domAPI=b(),LG.insertStyleElement=x(),g()(RG.A,LG),RG.A&&RG.A.locals&&RG.A.locals;var HG=[{title:"Warning",value:"warning",icon:function(e){return eG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"},child:[]}]})(e)},color:"#e69819",backgroundColor:{light:"#fff6e6",dark:"#805d20"}},{title:"Error",value:"error",icon:function(e){return eG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"},child:[]}]})(e)},color:"#d80d0d",backgroundColor:{light:"#ffe6e6",dark:"#802020"}},{title:"Info",value:"info",icon:function(e){return eG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},child:[]}]})(e)},color:"#507aff",backgroundColor:{light:"#e6ebff",dark:"#203380"}},{title:"Success",value:"success",icon:function(e){return eG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},child:[]}]})(e)},color:"#0bc10b",backgroundColor:{light:"#e6ffe6",dark:"#208020"}}],VG=_P({type:"alert",propSchema:{textAlignment:Vw.textAlignment,textColor:Vw.textColor,type:{default:"warning",values:["warning","error","info","success"]}},content:"inline"},{render:function(e){var t=HG.find((function(t){return t.value===e.block.props.type})).icon,n=React.createElement("div",{className:"alert-icon-wrapper",contentEditable:!1},React.createElement(t,{className:"alert-icon","data-alert-icon-type":e.block.props.type,size:32}));return React.createElement("div",{className:"alert","data-alert-type":e.block.props.type},React.createElement(cG,{groups:[{title:"Alert Type",values:HG,onValueSelected:function(t){e.editor.updateBlock(e.block,{type:"alert",props:{type:t}})}}],target:n}),React.createElement("div",{className:"inline-content",ref:e.contentRef}))}}),zG=function(e){return{title:"Insert Warning Block",onItemClick:function(){return mE(e,{type:"alert",props:{type:"warning"},content:[{type:"text",text:"",styles:{}}]})},aliases:["alert","al"],group:"Others",icon:React.createElement(IG,{size:18}),subtext:"Capture reader's attention with a warning"}};function $G(){return $G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$G.apply(null,arguments)}var UG=c().requireLib("boot").moment,GG=c().requireLib("components").ButtonMenu,WG=a(7919),qG=_P({type:"title",propSchema:{textAlignment:Vw.textAlignment,textColor:Vw.textColor},content:"inline"},{render:function(e){var t,n=(0,d.useContext)(kG).dataModel.getContextNode(),r=UG(new Date(1e3*parseInt(n.getMetadata().get("ajxp_modiftime")))).fromNow(),o=c().getInstance().user.getActiveRepositoryObject();n.getMetadata().has("ws_root")&&(t=o.getDescription()||"");var i=c().getInstance(),a=[];""!==n.getPath().replace("/","")&&a.push(React.createElement("span",{className:"segment first",style:{cursor:"pointer"},onClick:function(){return i.goTo("/")}},o.getLabel()));var s="",u=WG.trimLeft(n.getPath(),"/").split("/");return u.pop(),u.forEach((function(e,t){if(e){var n=t===u.length-1,r=s+="/"+e;a.push(React.createElement("span",{key:"bread_sep_"+t,className:"separator"}," / ")),a.push(React.createElement("span",{key:"bread_"+t,style:{cursor:"pointer"},className:"segment"+(n?" last":""),onClick:function(e){e.stopPropagation(),console.log(r),i.goTo(r)}},e))}})),React.createElement("div",{style:{paddingBottom:20}},a&&React.createElement("div",{style:{fontSize:"0.8em"}},a),React.createElement("h1",{style:{fontSize:"2em",fontWeight:700,display:"flex"}},React.createElement("div",{className:"inline-content",style:{flexGrow:"initial",width:"auto"},ref:e.contentRef}),React.createElement(GG,$G({pydio:i},{buttonStyle:{height:30,lineHeight:"26px",marginLeft:6},buttonLabelStyle:{fontSize:20,paddingLeft:6,paddingRight:6}},{id:"create-button-menu-inline",toolbars:["upload","create"],buttonTitle:"+",controller:i.Controller}))),React.createElement("div",{style:{color:"gray"}},t?t+" - ":null,"Created ",r))}});function KG(e){return KG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KG(e)}function ZG(){ZG=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),s=new B(r||[]);return o(a,"_invoke",{value:A(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function g(){}function y(){}function b(){}var D={};l(D,a,(function(){return this}));var w=Object.getPrototypeOf,C=w&&w(w(O([])));C&&C!==n&&r.call(C,a)&&(D=C);var k=b.prototype=g.prototype=Object.create(D);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,s){var u=d(e[o],e,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==KG(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(c).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,n,r){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=F(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function F(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,F(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(KG(t)+" is not iterable")}return y.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},E(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(k),l(k,u,"Generator"),l(k,a,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,B.prototype={constructor:B,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;M(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function JG(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function XG(e,t){if(e){if("string"==typeof e)return YG(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?YG(e,t):void 0}}function YG(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function QG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QG(Object(n),!0).forEach((function(t){tW(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QG(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tW(e,t,n){return(t=function(e){var t=function(e){if("object"!=KG(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=KG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==KG(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nW=bE.create({blockSpecs:eW(eW({},rE),{},{childrenList:xG,alert:VG,title:qG}),inlineContentSpecs:eW(eW({},aE),{},{mention:SG,nodeRef:_G})}),rW=function(e){return[].concat(function(e){return function(e){if(Array.isArray(e))return YG(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||XG(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(nP(e)),[zG(e)])};const oW=function(e){var t,n=e.initialContent,r=void 0===n?[]:n,o=e.onChange,i=e.darkMode,a=e.readOnly,s=e.style,u=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||XG(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,d.useState)(""),2),l=(u[0],u[1],RB({schema:nW,initialContent:r.length?r:null,dictionary:eW(eW({},ZD),{},{placeholders:eW(eW({},ZD.placeholders),{},{default:"Type text or '/' for commands, '%' for mentioning a file, '@' for mentioning a user"})}),codeBlock:GU}));return t=p().createElement(cz,{editable:!a,onChange:function(){return o(l.document)},editor:l,theme:i?"dark":"light"},p().createElement(rP,{triggerCharacter:"/",getItems:function(){var e,t=(e=ZG().mark((function e(t){return ZG().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vE(rW(l),t));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){JG(i,r,o,a,s,"next",e)}function s(e){JG(i,r,o,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()}),p().createElement(MG,{editor:l}),p().createElement(jG,{editor:l})),p().createElement("div",{style:eW({flex:1,width:"100%",backgroundColor:"var(--md-sys-color-surface)",paddingTop:20,userSelect:"inherit"},s),onClick:function(e){return e.stopPropagation()},onKeyUp:function(e){return e.stopPropagation()}},t,p().createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:'\n        .bn-container *{\n            white-space: pre-wrap;\n            user-select: text;\n            -webkit-user-select: text;\n        }\n        .bn-editor {\n            background-color:transparent;\n        }\n        .bn-container.bn-readonly table {\n            margin-bottom: 20px;\n        }\n        .bn-container.bn-readonly p.bn-inline-content {\n            min-height: 20px;\n        }\n        .react-mui-context .bn-container h1,\n        .react-mui-context .bn-container h2,\n        .react-mui-context .bn-container h3,\n        .react-mui-context .bn-container h4,\n        .react-mui-context .bn-container h5,\n        .react-mui-context .bn-container h6{\n            font-weight: inherit;\n        }\n        .react-mui-context .bn-container div[role="menu"] {\n            background: var(--bn-colors-menu-background);\n        }\n        .react-mui-context .bn-container div[role="menu"] button {\n            font-size: var(--mantine-font-size-sm);\n        }\n        .ProseMirror-selectednode>.bn-block-content[data-content-type="childrenList"]>*{\n            outline: none;\n        }\n        .tree-icon.mdi.mdi-folder:before {\n            content: \'\\F0DC9\';\n        }\n    '}}))};var iW,aW;function sW(e){return sW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sW(e)}function uW(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hW(r.key),r)}}function lW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lW=function(){return!!e})()}function cW(e){return cW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cW(e)}function dW(e,t){return dW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dW(e,t)}function fW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pW(e,t,n){return(t=hW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hW(e){var t=function(e){if("object"!=sW(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=sW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==sW(t)?t:t+""}var mW=c().requireLib("hoc").EditorActions,vW=(iW=(0,h.connect)((function(e,t){var n=e.tabs.filter((function(e){var n=e.editorData,r=e.node;return(!n||n.id===t.editorData.id)&&r.getPath()===t.node.getPath()}))[0]||{};return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fW(Object(n),!0).forEach((function(t){pW(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fW(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:n.id,tab:n},t)})),iW(aW=(0,h.connect)(null,mW)(aW=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){return t=cW(t),function(e,t){if(t&&("object"==sW(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,lW()?Reflect.construct(t,n||[],cW(e).constructor):t.apply(e,n))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dW(e,t)}(t,e),function(e,t){return t&&uW(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidMount",value:function(){this.loadNode(this.props);var e=this.props.editorModify;this.props.isActive&&e({fixedToolbar:!0})}},{key:"compomentWillReceiveProps",value:function(e){var t=this.props.editorModify;e.isActive&&t({fixedToolbar:!0}),this.props.node!==e.node&&this.loadNode(e)}},{key:"loadNode",value:function(e){var t=this.props,n=t.pydio,r=t.node,o=t.tab,i=t.dispatch,a=o.id;n.ApiClient.getPlainContent(r,(function(e){i(mW.tabModify({id:a,content:e,node:r,loaded:!0}))}))}},{key:"render",value:function(){var e=this.props,t=e.tab,n=e.dispatch,r=e.muiTheme,o=t.id,i=t.content,a=t.loaded,s=t.node,u=[];try{u=(u=JSON.parse(i)).filter((function(e){return"childrenList"!==e.type}))}catch(e){}var l=s.hasMetadataInBranch("node_readonly","true")||s.getMetadata().get("content_lock")&&s.getMetadata().get("content_lock")!==c().getInstance().user.id;return a?p().createElement(oW,{readOnly:l,darkMode:r.darkMode,initialContent:u,onChange:function(e){return n(mW.tabModify({id:o,content:JSON.stringify(e)}))}}):null}}])}(d.Component))||aW)||aW);const gW=vW=(0,m.muiThemeable)()(vW);var yW=c().requireLib("hoc").EditorActions,bW=function(e){var t=e.tab,n=e.dispatch;return function(){return c().getInstance().ApiClient.postPlainTextContent(t.node,t.content,(function(e){n(e?yW.tabModify({id:t.id,message:c().getMessages()[115]}):yW.tabModify({id:t.id,message:c().getMessages()[210]}))}))}};const DW=require("lodash"),wW=require("cells-sdk");function CW(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return kW(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kW(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kW(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var EW=function(e,t){var n=CW((0,d.useState)(!1),2),r=n[0],o=n[1],i=CW((0,d.useState)(0),2),a=i[0],s=i[1],u=CW((0,d.useState)(""),2),l=u[0],c=u[1],f=CW((0,d.useState)(!1),2),p=f[0],h=f[1],m=e.isLoaded(),v=e.getMetadata().get("uuid"),g=(0,d.useMemo)((function(){return(0,DW.debounce)((function(e){return function(e,t,n,r){var o=new wW.UserMetaServiceApi(FG().getRestClient()),i=new wW.IdmUpdateUserMetaRequest;i.MetaDatas=[],i.Operation="PUT";var a=new wW.IdmUserMeta;a.NodeUuid=n,a.Namespace=t,a.JsonValue=JSON.stringify(e),a.Policies=[wW.ServiceResourcePolicy.constructFromObject({Action:"READ",Subject:"*",Effect:"allow"}),wW.ServiceResourcePolicy.constructFromObject({Action:"WRITE",Subject:"*",Effect:"allow"})],i.MetaDatas.push(a),o.updateUserMeta(i).then((function(){console.log("Saved to Metadata"),r(!1)})).catch((function(e){console.error("Cannot save metadata",e)}))}(e,t,v,h)}),1500)}),[v]);return(0,d.useEffect)((function(){o(!1),c([]),s(a+1)}),[e,m,v]),(0,d.useEffect)((function(){r||(e&&e.getMetadata().has(t)?(c(e.getMetadata().get(t)),o(!0)):o(!0))}),[r,a]),{loaded:r,content:l,save:g,dirty:p,setDirty:h}},xW=["node","muiTheme"];function AW(){return AW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AW.apply(null,arguments)}var FW=c().requireLib("boot").PydioContextConsumer,SW=c().requireLib("workspaces").InfoPanelCard,MW=function(e){var t,n=e.node,r=e.muiTheme,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,xW),i=EW(n),a=i.content,s=i.loaded,u=i.save;return s?(a&&(t=p().createElement(oW,{readOnly:!1,darkMode:r.darkMode,initialContent:a,onChange:function(e){return u(e)},node:n})),p().createElement(SW,AW({},o,{identifier:"folder-pad",icon:"mdi mdi-history",title:c().getMessages()["bnote.ext"]}),t)):null};const BW=MW=(0,m.muiThemeable)()(FW(MW));function OW(e){return OW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OW(e)}function TW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TW(Object(n),!0).forEach((function(t){NW(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TW(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function NW(e,t,n){return(t=function(e){var t=function(e){if("object"!=OW(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=OW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==OW(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var jW=c().requireLib("boot").PydioContextConsumer,IW=c().requireLib("components").useDataModelContextNodeAsItems,RW=function(e){var t,n,r=e.dataModel,o=e.entryProps,i=e.muiTheme,a=e.style,s=e.contentMeta,u=IW(r,(function(e){return[]})).node,l=EW(u,s),d=l.content,f=void 0===d?[]:d,h=l.loaded,m=l.save,v=l.dirty,g=l.setDirty;if(u&&u.isLoaded()&&h){var y=u.getMetadata().get("uuid"),b=f||[],D=u.getLabel();u.getMetadata().has("ws_root")&&(D=c().getInstance().user.getActiveRepositoryObject().getLabel()||D);var w=b.find((function(e){return"title"===e.type&&e.content&&e.content.length}));w?w.content[0].text=D:b=[{type:"title",content:[{type:"text",text:D,styles:{}}]}].concat(function(e){return function(e){if(Array.isArray(e))return _W(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return _W(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_W(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(b)),b.find((function(e){return"childrenList"===e.type}))||b.push({type:"childrenList"});var C=y+"#"+(h?"loaded":"loading"),k="true"===u.getMetadata().get("node_readonly");t=p().createElement(oW,{readOnly:k,darkMode:i.darkMode,initialContent:b,onChange:function(e){k||(g(!0),m(e))},key:C}),v&&(n=p().createElement("div",{style:{position:"absolute",top:35,right:50,opacity:.5,fontStyle:"italic",fontSize:14}},"Changes not saved..."))}return p().createElement(kG.Provider,{value:{dataModel:r,entryProps:o}},p().createElement("div",{onDragOver:function(e){e.stopPropagation(),e.preventDefault()},onDragEnter:function(e){e.stopPropagation(),e.preventDefault()},onDragLeave:function(e){e.stopPropagation(),e.preventDefault()},onDrop:function(e){e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length||(e.stopPropagation(),e.preventDefault())},style:PW(PW({},a),{},{position:"relative"})},t,n))};const LW=RW=(0,m.muiThemeable)()(jW(RW));window.BlockNote=s})();