/*! For license information please see BlockNote.min.js.LICENSE.txt */
(()=>{"use strict";var e,t,n,r,o={6738:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},249:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},2729:e=>{e.exports=function(e){return e[1]}},7384:(e,t,n)=>{var r=n(2326);t.H=r.createRoot,r.hydrateRoot},9062:(e,t,n)=>{var r=n(2015),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:u,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},1894:(e,t,n)=>{e.exports=n(9062)},8077:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(2729),o=n.n(r),i=n(6738),a=n.n(i)()(o());a.push([e.id,':root {\n  --alert-warning-bg: #fff6e6;\n  --alert-error-bg: #ffe6e6;\n  --alert-info-bg: #e6ebff;\n  --alert-success-bg: #e6ffe6;\n}\n[data-color-scheme="dark"] {\n  --alert-warning-bg: #805d20;\n  --alert-error-bg: #802020;\n  --alert-info-bg: #203380;\n  --alert-success-bg: #208020;\n}\n.alert {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-grow: 1;\n  border-radius: 4px;\n  min-height: 48px;\n  padding: 4px;\n}\n.alert[data-alert-type="warning"] {\n  background-color: var(--alert-warning-bg);\n}\n.alert[data-alert-type="error"] {\n  background-color: var(--alert-error-bg);\n}\n.alert[data-alert-type="info"] {\n  background-color: var(--alert-info-bg);\n}\n.alert[data-alert-type="success"] {\n  background-color: var(--alert-success-bg);\n}\n.alert .inline-content {\n  flex-grow: 1;\n}\n.alert .alert-icon-wrapper {\n  border-radius: 16px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-left: 12px;\n  margin-right: 12px;\n  height: 18px;\n  width: 18px;\n  user-select: none;\n  cursor: pointer;\n}\n.alert .alert-icon[data-alert-icon-type="warning"] {\n  color: #e69819;\n}\n.alert .alert-icon[data-alert-icon-type="error"] {\n  color: #d80d0d;\n}\n.alert .alert-icon[data-alert-icon-type="info"] {\n  color: #507aff;\n}\n.alert .alert-icon[data-alert-icon-type="success"] {\n  color: #0bc10b;\n}\n',""]);const s=a},3444:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(2729),o=n.n(r),i=n(6738),a=n.n(i)()(o());a.push([e.id,".react-mui-context .modern-list.bn-children-list.table-mode {\n  font-size: 12px;\n}\n.react-mui-context .modern-list.bn-children-list.table-mode tr {\n  height: auto;\n}\n.react-mui-context .modern-list.bn-children-list.table-mode tr .cell {\n  word-break: normal;\n  padding-top: 8px;\n  padding-bottom: 8px;\n}\n.react-mui-context .modern-list.bn-children-list.table-mode tr .cell.cell-ajxp_label {\n  font-size: 13px;\n  font-weight: 600;\n  min-width: 280px !important;\n}\n.react-mui-context .modern-list.bn-children-list.table-mode tr .cell.cell-ajxp_label > span {\n  white-space: nowrap;\n}\n.react-mui-context .modern-list.bn-children-list.table-mode tr .cell.cell-ajxp_label > span div.mimefont-container.with-editor-badge {\n  width: 18px;\n  height: 18px;\n  border-radius: 4px;\n  overflow: hidden;\n  border: 1px solid var(--md-sys-color-outline-variant-50);\n}\n.react-mui-context .modern-list.bn-children-list.table-mode tr .cell.cell-ajxp_label.header_cell {\n  font-weight: 600;\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .list-area {\n  display: grid;\n  gap: 8px;\n  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry {\n  border: 1px solid var(--md-sys-color-mimefont-background);\n  border-radius: 4px;\n  overflow: hidden;\n  align-items: center;\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry:last-child {\n  border: 1px solid var(--md-sys-color-mimefont-background);\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry .material-list-icon {\n  width: auto;\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry .material-list-icon .mimefont-container {\n  border-radius: 0;\n  margin: 0 10px 0 0;\n  width: 30px;\n  height: 30px;\n  line-height: 30px;\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry .material-list-icon .mimefont-container .mimefont {\n  font-size: 16px;\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry .material-list-text {\n  cursor: default;\n  padding: 0;\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry .material-list-text .material-list-line-2 {\n  display: none;\n}\n.react-mui-context .modern-list.bn-children-list.compact-mode .modern-list-entry .material-list-actions {\n  display: none;\n}\n.react-mui-context .modern-list.bn-children-list.list-expanded-mode .modern-list-entry {\n  border: 1px solid var(--md-sys-color-mimefont-background);\n  margin-bottom: 8px;\n  border-radius: 8px;\n  overflow: hidden;\n  align-items: center;\n  padding: 6px 8px;\n}\n.react-mui-context .modern-list.bn-children-list.list-expanded-mode .modern-list-entry:last-child {\n  border: 1px solid var(--md-sys-color-mimefont-background);\n}\n.react-mui-context .modern-list.bn-children-list.list-expanded-mode .modern-list-entry .material-list-icon {\n  width: auto;\n}\n.react-mui-context .modern-list.bn-children-list.list-expanded-mode .modern-list-entry .material-list-icon .mimefont-container {\n  background-color: transparent !important;\n  margin: 0 8px 0 0;\n  width: 36px;\n  height: 36px;\n  line-height: 36px;\n}\n.react-mui-context .modern-list.bn-children-list.list-expanded-mode .modern-list-entry .material-list-icon .mimefont-container .mimefont {\n  font-size: 24px;\n}\n.react-mui-context .modern-list.bn-children-list.list-expanded-mode .modern-list-entry .material-list-text {\n  padding: 0;\n}\n.react-mui-context .modern-list.bn-children-list.list-expanded-mode .modern-list-entry .material-list-text .material-list-line-1 {\n  font-weight: 600;\n}\n.react-mui-context .modern-list.bn-children-list.material-list-grid .modern-list-entry {\n  border: 1px solid var(--md-sys-color-mimefont-background);\n}\n.react-mui-context .modern-list.bn-children-list.masonry-grid {\n  font-size: 13px;\n  margin: 0;\n}\n.react-mui-context .modern-list.bn-children-list.masonry-grid .masonry-card .mimefont-container .mimefont {\n  font-size: 24px;\n}\n",""]);const s=a},1031:(e,t,n)=>{n.d(t,{A:()=>W});var r=n(2729),o=n.n(r),i=n(6738),a=n.n(i),s=n(249),l=n.n(s),c=new URL(n(4433),n.b),u=new URL(n(8577),n.b),d=new URL(n(486),n.b),f=new URL(n(2396),n.b),p=new URL(n(3655),n.b),h=new URL(n(5543),n.b),m=new URL(n(5856),n.b),v=new URL(n(4166),n.b),g=new URL(n(3229),n.b),y=new URL(n(9381),n.b),b=new URL(n(322),n.b),k=new URL(n(6128),n.b),w=new URL(n(6499),n.b),x=new URL(n(3819),n.b),C=new URL(n(88),n.b),S=new URL(n(8334),n.b),_=new URL(n(5209),n.b),E=new URL(n(5081),n.b),D=a()(o()),M=l()(c),A=l()(u),O=l()(d),T=l()(f),j=l()(p),N=l()(h),P=l()(m),L=l()(v),R=l()(g),I=l()(y),B=l()(b),F=l()(k),H=l()(w),z=l()(x),V=l()(C),$=l()(S),U=l()(_),G=l()(E);D.push([e.id,`/* Generated using https://google-webfonts-helper.herokuapp.com/fonts/inter?subsets=latin */\n/* inter-100 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 100;\n  src: local(""), url(${M}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${A}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-200 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 200;\n  src: local(""), url(${O}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${T}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-300 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 300;\n  src: local(""), url(${j}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${N}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-regular - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 400;\n  src: local(""), url(${P}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${L}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-500 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 500;\n  src: local(""), url(${R}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${I}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-600 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 600;\n  src: local(""), url(${B}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${F}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-700 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 700;\n  src: local(""), url(${H}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${z}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-800 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 800;\n  src: local(""), url(${V}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${$}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n/* inter-900 - latin */\n@font-face {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: 900;\n  src: local(""), url(${U}) format("woff2"), /* Chrome 26+, Opera 23+, Firefox 39+ */ url(${G}) format("woff");\n  /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n`,""]);const W=D},134:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},a=[],s=0;s<e.length;s++){var l=e[s],c=r.base?l[0]+r.base:l[0],u=i[c]||0,d="".concat(c," ").concat(u);i[c]=u+1;var f=n(d),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==f)t[f].references++,t[f].updater(p);else{var h=o(p,r);r.byIndex=s,t.splice(s,0,{identifier:d,updater:h,references:1})}a.push(d)}return a}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=n(i[a]);t[s].references--}for(var l=r(e,o),c=0;c<i.length;c++){var u=n(i[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=l}}},4709:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},1202:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},9958:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},2783:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},3911:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},8577:(e,t,n)=>{e.exports=n.p+"b0c3cec995c079348d2e.woff"},4433:(e,t,n)=>{e.exports=n.p+"9094111633a8ff639a30.woff2"},2396:(e,t,n)=>{e.exports=n.p+"5ebc8670af89597cf4f0.woff"},486:(e,t,n)=>{e.exports=n.p+"7b1cdef5c4317d8dfe5a.woff2"},5543:(e,t,n)=>{e.exports=n.p+"72b6ab1c5164d2f7a60a.woff"},3655:(e,t,n)=>{e.exports=n.p+"1d901654d5968b3d2af1.woff2"},9381:(e,t,n)=>{e.exports=n.p+"2e89c7eec639d70f9770.woff"},3229:(e,t,n)=>{e.exports=n.p+"c72c72b70c82b1f4bacf.woff2"},6128:(e,t,n)=>{e.exports=n.p+"a8909bb7bbff51df8622.woff"},322:(e,t,n)=>{e.exports=n.p+"8f1e0300e8d26fa8919d.woff2"},3819:(e,t,n)=>{e.exports=n.p+"7ad0df5561cc0933cead.woff"},6499:(e,t,n)=>{e.exports=n.p+"54321e26b8bf4739a16d.woff2"},8334:(e,t,n)=>{e.exports=n.p+"f8e8bd61bdf890048dd1.woff"},88:(e,t,n)=>{e.exports=n.p+"7e1a31f93354d23987f4.woff2"},5081:(e,t,n)=>{e.exports=n.p+"c5ccfaf539e28bfddffe.woff"},5209:(e,t,n)=>{e.exports=n.p+"6453f04550c5da4cc6b8.woff2"},4166:(e,t,n)=>{e.exports=n.p+"817c4274293e221c5076.woff"},5856:(e,t,n)=>{e.exports=n.p+"be7cb18dc7caf47cf7e9.woff2"},7919:e=>{e.exports=require("pydio/util/lang")},2015:e=>{e.exports=require("react")},2326:e=>{e.exports=require("react-dom")},9349:e=>{e.exports=require("remark-gfm")},9205:(e,t,n)=>{function r(e,t){var n=String(e);if("string"!=typeof t)throw new TypeError("Expected character");for(var r=0,o=n.indexOf(t);-1!==o;)r++,o=n.indexOf(t,o+t.length);return r}n.d(t,{D:()=>r})},4059:(e,t,n)=>{function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(e){for(var t=[],n=String(e||""),r=n.indexOf(","),o=0,i=!1;!i;){-1===r&&(r=n.length,i=!0);var a=n.slice(o,r).trim();!a&&i||t.push(a),o=r+1,r=n.indexOf(",",o)}return t}function i(e,t){var n=t||{};return(""===e[e.length-1]?[].concat(function(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e),[""]):e).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}n.d(t,{A:()=>i,q:()=>o})},7553:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{m:()=>i});var o=/[ \t\n\f\r]/g;function i(e){return"object"===r(e)?"text"===e.type&&a(e.value):a(e)}function a(e){return""===e.replace(o,"")}},4444:(e,t,n)=>{function r(e){var t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function o(e){return e.join(" ").trim()}n.d(t,{A:()=>o,q:()=>r})},9517:(e,t,n)=>{n.d(t,{l:()=>y});var r=/["&'<>`]/g,o=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,i=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,a=/[|\\{}()[\]^$+*?.]/g,s=new WeakMap;var l,c=/[\dA-Fa-f]/,u=/\d/,d=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],f={nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",fnof:"ƒ",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",bull:"•",hellip:"…",prime:"′",Prime:"″",oline:"‾",frasl:"⁄",weierp:"℘",image:"ℑ",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦",quot:'"',amp:"&",lt:"<",gt:">",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",permil:"‰",lsaquo:"‹",rsaquo:"›",euro:"€"},p=["cent","copy","divide","gt","lt","not","para","times"],h={}.hasOwnProperty,m={};for(l in f)h.call(f,l)&&(m[f[l]]=l);var v=/[^\dA-Za-z]/;function g(e,t,n){var r,o=function(e,t,n){var r="&#x"+e.toString(16).toUpperCase();return n&&t&&!c.test(String.fromCharCode(t))?r:r+";"}(e,t,n.omitOptionalSemicolons);if((n.useNamedReferences||n.useShortestReferences)&&(r=function(e,t,n,r){var o=String.fromCharCode(e);if(h.call(m,o)){var i=m[o],a="&"+i;return n&&d.includes(i)&&!p.includes(i)&&(!r||t&&61!==t&&v.test(String.fromCharCode(t)))?a:a+";"}return""}(e,t,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!r)&&n.useShortestReferences){var i=function(e,t,n){var r="&#"+String(e);return n&&t&&!u.test(String.fromCharCode(t))?r:r+";"}(e,t,n.omitOptionalSemicolons);i.length<o.length&&(o=i)}return r&&(!n.useShortestReferences||r.length<o.length)?r:o}function y(e,t){return function(e,t){return e=e.replace(t.subset?(n=t.subset,(l=s.get(n))||(l=function(e){for(var t=[],n=-1;++n<e.length;)t.push(e[n].replace(a,"\\$&"));return new RegExp("(?:"+t.join("|")+")","g")}(n),s.set(n,l)),l):r,c),t.subset||t.escapeOnly?e:e.replace(o,(function(e,n,r){return t.format(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536,r.charCodeAt(n+2),t)})).replace(i,c);var n,l;function c(e,n,r){return t.format(e.charCodeAt(0),r.charCodeAt(n+1),t)}}(e,Object.assign({format:g},t))}},9194:(e,t,n)=>{n.d(t,{A:()=>o});var r={}.hasOwnProperty;function o(e,t){var n=t||{};function o(t){var n=o.invalid,i=o.handlers;if(t&&r.call(t,e)){var a=String(t[e]);n=r.call(i,a)?i[a]:o.unknown}if(n){for(var s,l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];return(s=n).call.apply(s,[this,t].concat(c))}}return o.handlers=n.handlers||{},o.invalid=n.invalid,o.unknown=n.unknown,o}}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={id:e,exports:{}};return o[e](n,n.exports,a),n.exports}a.m=o,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var o=Object.create(null);a.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>n[e]));return i.default=()=>n,a.d(o,i),o},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>e+".min.js",a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="editor.text:",a.l=(e,t,o,i)=>{if(n[e])n[e].push(t);else{var s,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==r+o){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",r+o),s.src=e),n[e]=[t];var f=(t,r)=>{s.onerror=s.onload=null,clearTimeout(p);var o=n[e];if(delete n[e],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(r))),t)return t(r)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),l&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="plug/editor.bnote/res/dist/",(()=>{a.b=document.baseURI||self.location.href;var e={4522:0};a.f.j=(t,n)=>{var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise(((n,o)=>r=e[t]=[n,o]));n.push(r[2]=o);var i=a.p+a.u(t),s=new Error;a.l(i,(n=>{if(a.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,r[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,o,[i,s,l]=n,c=0;if(i.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);l&&l(a)}for(t&&t(n);c<i.length;c++)o=i[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=self.webpackChunkeditor_text=self.webpackChunkeditor_text||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a.nc=void 0;var s={};a.r(s),a.d(s,{Actions:()=>c,Editor:()=>rq,InfoPanel:()=>vq,MainPanel:()=>_q});var l={};a.r(l),a.d(l,{boolean:()=>_d,booleanish:()=>Ed,commaOrSpaceSeparated:()=>Td,commaSeparated:()=>Od,number:()=>Md,overloadedBoolean:()=>Dd,spaceSeparated:()=>Ad});var c={};a.r(c),a.d(c,{onSave:()=>iq});const u=require("pydio");var d=a.n(u),f=a(2015),p=a.t(f,2),h=a.n(f);const m=require("react-redux"),v=require("material-ui/styles");var g=a(134),y=a.n(g),b=a(2783),k=a.n(b),w=a(4709),x=a.n(w),C=a(9958),S=a.n(C),_=a(1202),E=a.n(_),D=a(3911),M=a.n(D),A=a(1031),O={};O.styleTagTransform=M(),O.setAttributes=S(),O.insert=x().bind(null,"head"),O.domAPI=k(),O.insertStyleElement=E(),y()(A.A,O),A.A&&A.A.locals&&A.A.locals;var T=a(1894);function j(e){this.content=e}j.prototype={constructor:j,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,o=r.find(e),i=r.content.slice();return-1==o?i.push(n||e,t):(i[o+1]=t,n&&(i[o]=n)),new j(i)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new j(n)},addToStart:function(e,t){return new j([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new j(n)},addBefore:function(e,t,n){var r=this.remove(t),o=r.content.slice(),i=r.find(e);return o.splice(-1==i?o.length:i,0,t,n),new j(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=j.from(e)).size?new j(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=j.from(e)).size?new j(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=j.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach((function(t,n){e[t]=n})),e},get size(){return this.content.length>>1}},j.from=function(e){if(e instanceof j)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new j(t)};const N=j;function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function L(){return L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=z(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},L.apply(null,arguments)}function R(e,t,n){return t=z(t),function(e,t){if(t&&("object"==V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,F()?Reflect.construct(t,n||[],z(e).constructor):t.apply(e,n))}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H(e,t)}function B(e){var t="function"==typeof Map?new Map:void 0;return B=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(F())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&H(o,n.prototype),o}(e,arguments,z(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),H(n,e)},B(e)}function F(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(F=function(){return!!e})()}function H(e,t){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},H(e,t)}function z(e){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},z(e)}function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,W(r.key),r)}}function G(e,t,n){return t&&U(e.prototype,t),n&&U(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function W(e){var t=function(e){if("object"!=V(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==V(t)?t:t+""}function q(e,t,n){for(var r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;var o=e.child(r),i=t.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var a=0;o.text[a]==i.text[a];a++)n++;return n}if(o.content.size||i.content.size){var s=q(o.content,i.content,n+1);if(null!=s)return s}n+=o.nodeSize}else n+=o.nodeSize}}function K(e,t,n,r){for(var o=e.childCount,i=t.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var a=e.child(--o),s=t.child(--i),l=a.nodeSize;if(a!=s){if(!a.sameMarkup(s))return{a:n,b:r};if(a.isText&&a.text!=s.text){for(var c=0,u=Math.min(a.text.length,s.text.length);c<u&&a.text[a.text.length-c-1]==s.text[s.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(a.content.size||s.content.size){var d=K(a.content,s.content,n-1,r-1);if(d)return d}n-=l,r-=l}else n-=l,r-=l}}var Z=function(){function e(t,n){if($(this,e),this.content=t,this.size=n||0,null==n)for(var r=0;r<t.length;r++)this.size+=t[r].nodeSize}return G(e,[{key:"nodesBetween",value:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0,i=0,a=0;a<t;i++){var s=this.content[i],l=a+s.nodeSize;if(l>e&&!1!==n(s,r+a,o||null,i)&&s.content.size){var c=a+1;s.nodesBetween(Math.max(0,e-c),Math.min(s.content.size,t-c),n,r+c)}a=l}}},{key:"descendants",value:function(e){this.nodesBetween(0,this.size,e)}},{key:"textBetween",value:function(e,t,n,r){var o="",i=!0;return this.nodesBetween(e,t,(function(a,s){var l=a.isText?a.text.slice(Math.max(e,s)-s,t-s):a.isLeaf?r?"function"==typeof r?r(a):r:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&l||a.isTextblock)&&n&&(i?i=!1:o+=n),o+=l}),0),o}},{key:"append",value:function(t){if(!t.size)return this;if(!this.size)return t;var n=this.lastChild,r=t.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<t.content.length;i++)o.push(t.content[i]);return new e(o,this.size+t.size)}},{key:"cut",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size;if(0==t&&n==this.size)return this;var r=[],o=0;if(n>t)for(var i=0,a=0;a<n;i++){var s=this.content[i],l=a+s.nodeSize;l>t&&((a<t||l>n)&&(s=s.isText?s.cut(Math.max(0,t-a),Math.min(s.text.length,n-a)):s.cut(Math.max(0,t-a-1),Math.min(s.content.size,n-a-1))),r.push(s),o+=s.nodeSize),a=l}return new e(r,o)}},{key:"cutByIndex",value:function(t,n){return t==n?e.empty:0==t&&n==this.content.length?this:new e(this.content.slice(t,n))}},{key:"replaceChild",value:function(t,n){var r=this.content[t];if(r==n)return this;var o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[t]=n,new e(o,i)}},{key:"addToStart",value:function(t){return new e([t].concat(this.content),this.size+t.nodeSize)}},{key:"addToEnd",value:function(t){return new e(this.content.concat(t),this.size+t.nodeSize)}},{key:"eq",value:function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}},{key:"firstChild",get:function(){return this.content.length?this.content[0]:null}},{key:"lastChild",get:function(){return this.content.length?this.content[this.content.length-1]:null}},{key:"childCount",get:function(){return this.content.length}},{key:"child",value:function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}},{key:"maybeChild",value:function(e){return this.content[e]||null}},{key:"forEach",value:function(e){for(var t=0,n=0;t<this.content.length;t++){var r=this.content[t];e(r,n,t),n+=r.nodeSize}}},{key:"findDiffStart",value:function(e){return q(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}},{key:"findDiffEnd",value:function(e){return K(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size)}},{key:"findIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0==e)return X(0,e);if(e==this.size)return X(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position ".concat(e," outside of fragment (").concat(this,")"));for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(o>=e)return o==e||t>0?X(n+1,o):X(n,r);r=o}}},{key:"toString",value:function(){return"<"+this.toStringInner()+">"}},{key:"toStringInner",value:function(){return this.content.join(", ")}},{key:"toJSON",value:function(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null}}],[{key:"fromJSON",value:function(t,n){if(!n)return e.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new e(n.map(t.nodeFromJSON))}},{key:"fromArray",value:function(t){if(!t.length)return e.empty;for(var n,r=0,o=0;o<t.length;o++){var i=t[o];r+=i.nodeSize,o&&i.isText&&t[o-1].sameMarkup(i)?(n||(n=t.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new e(n||t,r)}},{key:"from",value:function(t){if(!t)return e.empty;if(t instanceof e)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new e([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}])}();Z.empty=new Z([],0);var J={index:0,offset:0};function X(e,t){return J.index=e,J.offset=t,J}function Y(e,t){if(e===t)return!0;if(!e||"object"!=V(e)||!t||"object"!=V(t))return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!Y(e[r],t[r]))return!1}else{for(var o in e)if(!(o in t)||!Y(e[o],t[o]))return!1;for(var i in t)if(!(i in e))return!1}return!0}var Q=function(){function e(t,n){$(this,e),this.type=t,this.attrs=n}return G(e,[{key:"addToSet",value:function(e){for(var t,n=!1,r=0;r<e.length;r++){var o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(o)}}return t||(t=e.slice()),n||t.push(this),t}},{key:"removeFromSet",value:function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}},{key:"isInSet",value:function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}},{key:"eq",value:function(e){return this==e||this.type==e.type&&Y(this.attrs,e.attrs)}},{key:"toJSON",value:function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e}}],[{key:"fromJSON",value:function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type ".concat(t.type," in this schema"));var r=n.create(t.attrs);return n.checkAttrs(r.attrs),r}},{key:"sameSet",value:function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}},{key:"setFrom",value:function(t){if(!t||Array.isArray(t)&&0==t.length)return e.none;if(t instanceof e)return[t];var n=t.slice();return n.sort((function(e,t){return e.type.rank-t.type.rank})),n}}])}();Q.none=[];var ee=function(e){function t(){return $(this,t),R(this,t,arguments)}return I(t,e),G(t)}(B(Error)),te=function(){function e(t,n,r){$(this,e),this.content=t,this.openStart=n,this.openEnd=r}return G(e,[{key:"size",get:function(){return this.content.size-this.openStart-this.openEnd}},{key:"insertAt",value:function(t,n){var r=re(this.content,t+this.openStart,n);return r&&new e(r,this.openStart,this.openEnd)}},{key:"removeBetween",value:function(t,n){return new e(ne(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}},{key:"eq",value:function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}},{key:"toString",value:function(){return this.content+"("+this.openStart+","+this.openEnd+")"}},{key:"toJSON",value:function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}}],[{key:"fromJSON",value:function(t,n){if(!n)return e.empty;var r=n.openStart||0,o=n.openEnd||0;if("number"!=typeof r||"number"!=typeof o)throw new RangeError("Invalid input for Slice.fromJSON");return new e(Z.fromJSON(t,n.content),r,o)}},{key:"maxOpen",value:function(t){for(var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=0,o=0,i=t.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(var a=t.lastChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.lastChild)o++;return new e(t,r,o)}}])}();function ne(e,t,n){var r=e.findIndex(t),o=r.index,i=r.offset,a=e.maybeChild(o),s=e.findIndex(n),l=s.index,c=s.offset;if(i==t||a.isText){if(c!=n&&!e.child(l).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(o!=l)throw new RangeError("Removing non-flat range");return e.replaceChild(o,a.copy(ne(a.content,t-i-1,n-i-1)))}function re(e,t,n,r){var o=e.findIndex(t),i=o.index,a=o.offset,s=e.maybeChild(i);if(a==t||s.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));var l=re(s.content,t-a-1,n);return l&&e.replaceChild(i,s.copy(l))}function oe(e,t,n){if(n.openStart>e.depth)throw new ee("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new ee("Inconsistent open depths");return ie(e,t,n,0)}function ie(e,t,n,r){var o=e.index(r),i=e.node(r);if(o==t.index(r)&&r<e.depth-n.openStart){var a=ie(e,t,n,r+1);return i.copy(i.content.replaceChild(o,a))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){var s=function(e,t){for(var n=t.depth-e.openStart,r=t.node(n).copy(e.content),o=n-1;o>=0;o--)r=t.node(o).copy(Z.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(n,e);return ue(i,de(e,s.start,s.end,t,r))}var l=e.parent,c=l.content;return ue(l,c.cut(0,e.parentOffset).append(n.content).append(c.cut(t.parentOffset)))}return ue(i,fe(e,t,r))}function ae(e,t){if(!t.type.compatibleContent(e.type))throw new ee("Cannot join "+t.type.name+" onto "+e.type.name)}function se(e,t,n){var r=e.node(n);return ae(r,t.node(n)),r}function le(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function ce(e,t,n,r){var o=(t||e).node(n),i=0,a=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(le(e.nodeAfter,r),i++));for(var s=i;s<a;s++)le(o.child(s),r);t&&t.depth==n&&t.textOffset&&le(t.nodeBefore,r)}function ue(e,t){return e.type.checkContent(t),e.copy(t)}function de(e,t,n,r,o){var i=e.depth>o&&se(e,t,o+1),a=r.depth>o&&se(n,r,o+1),s=[];return ce(null,e,o,s),i&&a&&t.index(o)==n.index(o)?(ae(i,a),le(ue(i,de(e,t,n,r,o+1)),s)):(i&&le(ue(i,fe(e,t,o+1)),s),ce(t,n,o,s),a&&le(ue(a,fe(n,r,o+1)),s)),ce(r,null,o,s),new Z(s)}function fe(e,t,n){var r=[];return ce(null,e,n,r),e.depth>n&&le(ue(se(e,t,n+1),fe(e,t,n+1)),r),ce(t,null,n,r),new Z(r)}te.empty=new te(Z.empty,0,0);var pe=function(){function e(t,n,r){$(this,e),this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}return G(e,[{key:"resolveDepth",value:function(e){return null==e?this.depth:e<0?this.depth+e:e}},{key:"parent",get:function(){return this.node(this.depth)}},{key:"doc",get:function(){return this.node(0)}},{key:"node",value:function(e){return this.path[3*this.resolveDepth(e)]}},{key:"index",value:function(e){return this.path[3*this.resolveDepth(e)+1]}},{key:"indexAfter",value:function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}},{key:"start",value:function(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}},{key:"end",value:function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}},{key:"before",value:function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}},{key:"after",value:function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}},{key:"textOffset",get:function(){return this.pos-this.path[this.path.length-1]}},{key:"nodeAfter",get:function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}},{key:"nodeBefore",get:function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}},{key:"posAtIndex",value:function(e,t){t=this.resolveDepth(t);for(var n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1,o=0;o<e;o++)r+=n.child(o).nodeSize;return r}},{key:"marks",value:function(){var e=this.parent,t=this.index();if(0==e.content.size)return Q.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){var o=n;n=r,r=o}for(var i=n.marks,a=0;a<i.length;a++)!1!==i[a].type.spec.inclusive||r&&i[a].isInSet(r.marks)||(i=i[a--].removeFromSet(i));return i}},{key:"marksAcross",value:function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,r=e.parent.maybeChild(e.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n}},{key:"sharedDepth",value:function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}},{key:"blockRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=arguments.length>1?arguments[1]:void 0;if(e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new ge(this,e,n);return null}},{key:"sameParent",value:function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}},{key:"max",value:function(e){return e.pos>this.pos?e:this}},{key:"min",value:function(e){return e.pos<this.pos?e:this}},{key:"toString",value:function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}}],[{key:"resolve",value:function(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");for(var r=[],o=0,i=n,a=t;;){var s=a.content.findIndex(i),l=s.index,c=s.offset,u=i-c;if(r.push(a,l,o+c),!u)break;if((a=a.child(l)).isText)break;i=u-1,o+=c+1}return new e(n,r,i)}},{key:"resolveCached",value:function(t,n){var r=ve.get(t);if(r)for(var o=0;o<r.elts.length;o++){var i=r.elts[o];if(i.pos==n)return i}else ve.set(t,r=new he);var a=r.elts[r.i]=e.resolve(t,n);return r.i=(r.i+1)%me,a}}])}(),he=G((function e(){$(this,e),this.elts=[],this.i=0})),me=12,ve=new WeakMap,ge=function(){return G((function e(t,n,r){$(this,e),this.$from=t,this.$to=n,this.depth=r}),[{key:"start",get:function(){return this.$from.before(this.depth+1)}},{key:"end",get:function(){return this.$to.after(this.depth+1)}},{key:"parent",get:function(){return this.$from.node(this.depth)}},{key:"startIndex",get:function(){return this.$from.index(this.depth)}},{key:"endIndex",get:function(){return this.$to.indexAfter(this.depth)}}])}(),ye=Object.create(null),be=function(){function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Q.none;$(this,e),this.type=t,this.attrs=n,this.marks=o,this.content=r||Z.empty}return G(e,[{key:"children",get:function(){return this.content.content}},{key:"nodeSize",get:function(){return this.isLeaf?1:2+this.content.size}},{key:"childCount",get:function(){return this.content.childCount}},{key:"child",value:function(e){return this.content.child(e)}},{key:"maybeChild",value:function(e){return this.content.maybeChild(e)}},{key:"forEach",value:function(e){this.content.forEach(e)}},{key:"nodesBetween",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.content.nodesBetween(e,t,n,r,this)}},{key:"descendants",value:function(e){this.nodesBetween(0,this.content.size,e)}},{key:"textContent",get:function(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}},{key:"textBetween",value:function(e,t,n,r){return this.content.textBetween(e,t,n,r)}},{key:"firstChild",get:function(){return this.content.firstChild}},{key:"lastChild",get:function(){return this.content.lastChild}},{key:"eq",value:function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}},{key:"sameMarkup",value:function(e){return this.hasMarkup(e.type,e.attrs,e.marks)}},{key:"hasMarkup",value:function(e,t,n){return this.type==e&&Y(this.attrs,t||e.defaultAttrs||ye)&&Q.sameSet(this.marks,n||Q.none)}},{key:"copy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t==this.content?this:new e(this.type,this.attrs,t,this.marks)}},{key:"mark",value:function(t){return t==this.marks?this:new e(this.type,this.attrs,this.content,t)}},{key:"cut",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size;return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}},{key:"slice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e==t)return te.empty;var r=this.resolve(e),o=this.resolve(t),i=n?0:r.sharedDepth(t),a=r.start(i),s=r.node(i).content.cut(r.pos-a,o.pos-a);return new te(s,r.depth-i,o.depth-i)}},{key:"replace",value:function(e,t,n){return oe(this.resolve(e),this.resolve(t),n)}},{key:"nodeAt",value:function(e){for(var t=this;;){var n=t.content.findIndex(e),r=n.index,o=n.offset;if(!(t=t.maybeChild(r)))return null;if(o==e||t.isText)return t;e-=o+1}}},{key:"childAfter",value:function(e){var t=this.content.findIndex(e),n=t.index,r=t.offset;return{node:this.content.maybeChild(n),index:n,offset:r}}},{key:"childBefore",value:function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,r=t.offset;if(r<e)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}},{key:"resolve",value:function(e){return pe.resolveCached(this,e)}},{key:"resolveNoCache",value:function(e){return pe.resolve(this,e)}},{key:"rangeHasMark",value:function(e,t,n){var r=!1;return t>e&&this.nodesBetween(e,t,(function(e){return n.isInSet(e.marks)&&(r=!0),!r})),r}},{key:"isBlock",get:function(){return this.type.isBlock}},{key:"isTextblock",get:function(){return this.type.isTextblock}},{key:"inlineContent",get:function(){return this.type.inlineContent}},{key:"isInline",get:function(){return this.type.isInline}},{key:"isText",get:function(){return this.type.isText}},{key:"isLeaf",get:function(){return this.type.isLeaf}},{key:"isAtom",get:function(){return this.type.isAtom}},{key:"toString",value:function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),we(this.marks,e)}},{key:"contentMatchAt",value:function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}},{key:"canReplace",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Z.empty,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.childCount,i=this.contentMatchAt(e).matchFragment(n,r,o),a=i&&i.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(var s=r;s<o;s++)if(!this.type.allowsMarks(n.child(s).marks))return!1;return!0}},{key:"canReplaceWith",value:function(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(e).matchType(n),i=o&&o.matchFragment(this.content,t);return!!i&&i.validEnd}},{key:"canAppend",value:function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}},{key:"check",value:function(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);for(var e=Q.none,t=0;t<this.marks.length;t++){var n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!Q.sameSet(e,this.marks))throw new RangeError("Invalid collection of marks for node ".concat(this.type.name,": ").concat(this.marks.map((function(e){return e.type.name}))));this.content.forEach((function(e){return e.check()}))}},{key:"toJSON",value:function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e}}],[{key:"fromJSON",value:function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=void 0;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var r=Z.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,r,n);return o.type.checkAttrs(o.attrs),o}}])}();be.prototype.text=void 0;var ke=function(e){function t(e,n,r,o){var i;if($(this,t),i=R(this,t,[e,n,null,o]),!r)throw new RangeError("Empty text nodes are not allowed");return i.text=r,i}return I(t,e),G(t,[{key:"toString",value:function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):we(this.marks,JSON.stringify(this.text))}},{key:"textContent",get:function(){return this.text}},{key:"textBetween",value:function(e,t){return this.text.slice(e,t)}},{key:"nodeSize",get:function(){return this.text.length}},{key:"mark",value:function(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)}},{key:"withText",value:function(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)}},{key:"cut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.text.length;return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}},{key:"eq",value:function(e){return this.sameMarkup(e)&&this.text==e.text}},{key:"toJSON",value:function(){var e,n,r=(e=this,"function"==typeof(n=L(z(t.prototype),"toJSON",e))?function(t){return n.apply(e,t)}:n)([]);return r.text=this.text,r}}])}(be);function we(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var xe=function(){function e(t){$(this,e),this.validEnd=t,this.next=[],this.wrapCache=[]}return G(e,[{key:"matchType",value:function(e){for(var t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}},{key:"matchFragment",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.childCount,r=this,o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r}},{key:"inlineContent",get:function(){return 0!=this.next.length&&this.next[0].type.isInline}},{key:"defaultType",get:function(){for(var e=0;e<this.next.length;e++){var t=this.next[e].type;if(!t.isText&&!t.hasRequiredAttrs())return t}return null}},{key:"compatible",value:function(e){for(var t=0;t<this.next.length;t++)for(var n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}},{key:"fillBefore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[this];return function o(i,a){var s=i.matchFragment(e,n);if(s&&(!t||s.validEnd))return Z.from(a.map((function(e){return e.createAndFill()})));for(var l=0;l<i.next.length;l++){var c=i.next[l],u=c.type,d=c.next;if(!u.isText&&!u.hasRequiredAttrs()&&-1==r.indexOf(d)){r.push(d);var f=o(d,a.concat(u));if(f)return f}}return null}(this,[])}},{key:"findWrapping",value:function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}},{key:"computeWrapping",value:function(e){for(var t=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(e)){for(var i=[],a=r;a.type;a=a.via)i.push(a.type);return i.reverse()}for(var s=0;s<o.next.length;s++){var l=o.next[s],c=l.type,u=l.next;c.isLeaf||c.hasRequiredAttrs()||c.name in t||r.type&&!u.validEnd||(n.push({match:c.contentMatch,type:c,via:r}),t[c.name]=!0)}}return null}},{key:"edgeCount",get:function(){return this.next.length}},{key:"edge",value:function(e){if(e>=this.next.length)throw new RangeError("There's no ".concat(e,"th edge in this content match"));return this.next[e]}},{key:"toString",value:function(){var e=[];return function t(n){e.push(n);for(var r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map((function(t,n){for(var r=n+(t.validEnd?"*":" ")+" ",o=0;o<t.next.length;o++)r+=(o?", ":"")+t.next[o].type.name+"->"+e.indexOf(t.next[o].next);return r})).join("\n")}}],[{key:"parse",value:function(t,n){var r=new Ce(t,n);if(null==r.next)return e.empty;var o=Se(r);r.next&&r.err("Unexpected trailing text");var i=Te(function(e){var t=[[]];return o(function e(t,i){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(e(n,i))}),[]);if("seq"!=t.type){if("star"==t.type){var a=n();return r(i,a),o(e(t.expr,a),a),[r(a)]}if("plus"==t.type){var s=n();return o(e(t.expr,i),s),o(e(t.expr,s),s),[r(s)]}if("opt"==t.type)return[r(i)].concat(e(t.expr,i));if("range"==t.type){for(var l=i,c=0;c<t.min;c++){var u=n();o(e(t.expr,l),u),l=u}if(-1==t.max)o(e(t.expr,l),l);else for(var d=t.min;d<t.max;d++){var f=n();r(l,f),o(e(t.expr,l),f),l=f}return[r(l)]}if("name"==t.type)return[r(i,void 0,t.value)];throw new Error("Unknown expr type")}for(var p=0;;p++){var h=e(t.exprs[p],i);if(p==t.exprs.length-1)return h;o(h,i=n())}}(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){var o={term:r,to:n};return t[e].push(o),o}function o(e,t){e.forEach((function(e){return e.to=t}))}}(o));return function(e,t){for(var n=0,r=[e];n<r.length;n++){for(var o=r[n],i=!o.validEnd,a=[],s=0;s<o.next.length;s++){var l=o.next[s],c=l.type,u=l.next;a.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(u)&&r.push(u)}i&&t.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(i,r),i}}])}();xe.empty=new xe(!0);var Ce=function(){return G((function e(t,n){$(this,e),this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}),[{key:"next",get:function(){return this.tokens[this.pos]}},{key:"eat",value:function(e){return this.next==e&&(this.pos++||!0)}},{key:"err",value:function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}])}();function Se(e){var t=[];do{t.push(_e(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function _e(e){var t=[];do{t.push(Ee(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function Ee(e){for(var t=function(e){if(e.eat("(")){var t=Se(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var n=function(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var o=[];for(var i in n){var a=n[i];a.isInGroup(t)&&o.push(a)}return 0==o.length&&e.err("No node type or group '"+t+"' found"),o}(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=Me(e,t)}return t}function De(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function Me(e,t){var n=De(e),r=n;return e.eat(",")&&(r="}"!=e.next?De(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function Ae(e,t){return t-e}function Oe(e,t){var n=[];return function t(r){var o=e[r];if(1==o.length&&!o[0].term)return t(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var a=o[i],s=a.term,l=a.to;s||-1!=n.indexOf(l)||t(l)}}(t),n.sort(Ae)}function Te(e){var t=Object.create(null);return function n(r){var o=[];r.forEach((function(t){e[t].forEach((function(t){var n=t.term,r=t.to;if(n){for(var i,a=0;a<o.length;a++)o[a][0]==n&&(i=o[a][1]);Oe(e,r).forEach((function(e){i||o.push([n,i=[]]),-1==i.indexOf(e)&&i.push(e)}))}}))}));for(var i=t[r.join(",")]=new xe(r.indexOf(e.length-1)>-1),a=0;a<o.length;a++){var s=o[a][1].sort(Ae);i.next.push({type:o[a][0],next:t[s.join(",")]||n(s)})}return i}(Oe(e,0))}function je(e){var t=Object.create(null);for(var n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function Ne(e,t){var n=Object.create(null);for(var r in e){var o=t&&t[r];if(void 0===o){var i=e[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function Pe(e,t,n,r){for(var o in t)if(!(o in e))throw new RangeError("Unsupported attribute ".concat(o," for ").concat(n," of type ").concat(o));for(var i in e){var a=e[i];a.validate&&a.validate(t[i])}}function Le(e,t){var n=Object.create(null);if(t)for(var r in t)n[r]=new Ie(e,r,t[r]);return n}var Re=function(){function e(t,n,r){$(this,e),this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Le(t,r.attrs),this.defaultAttrs=je(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||"text"==t),this.isText="text"==t}return G(e,[{key:"isInline",get:function(){return!this.isBlock}},{key:"isTextblock",get:function(){return this.isBlock&&this.inlineContent}},{key:"isLeaf",get:function(){return this.contentMatch==xe.empty}},{key:"isAtom",get:function(){return this.isLeaf||!!this.spec.atom}},{key:"isInGroup",value:function(e){return this.groups.indexOf(e)>-1}},{key:"whitespace",get:function(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}},{key:"hasRequiredAttrs",value:function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}},{key:"compatibleContent",value:function(e){return this==e||this.contentMatch.compatible(e.contentMatch)}},{key:"computeAttrs",value:function(e){return!e&&this.defaultAttrs?this.defaultAttrs:Ne(this.attrs,e)}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new be(this,this.computeAttrs(e),Z.from(t),Q.setFrom(n))}},{key:"createChecked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return t=Z.from(t),this.checkContent(t),new be(this,this.computeAttrs(e),t,Q.setFrom(n))}},{key:"createAndFill",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(e=this.computeAttrs(e),(t=Z.from(t)).size){var r=this.contentMatch.fillBefore(t);if(!r)return null;t=r.append(t)}var o=this.contentMatch.matchFragment(t),i=o&&o.fillBefore(Z.empty,!0);return i?new be(this,e,t.append(i),Q.setFrom(n)):null}},{key:"validContent",value:function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}},{key:"checkContent",value:function(e){if(!this.validContent(e))throw new RangeError("Invalid content for node ".concat(this.name,": ").concat(e.toString().slice(0,50)))}},{key:"checkAttrs",value:function(e){Pe(this.attrs,e,"node",this.name)}},{key:"allowsMarkType",value:function(e){return null==this.markSet||this.markSet.indexOf(e)>-1}},{key:"allowsMarks",value:function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}},{key:"allowedMarks",value:function(e){if(null==this.markSet)return e;for(var t,n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:Q.none:e}}],[{key:"compile",value:function(t,n){var r=Object.create(null);t.forEach((function(t,o){return r[t]=new e(t,n,o)}));var o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(var i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}])}(),Ie=function(){return G((function e(t,n,r){$(this,e),this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate="string"==typeof r.validate?function(e,t,n){var r=n.split("|");return function(n){var o=null===n?"null":V(n);if(r.indexOf(o)<0)throw new RangeError("Expected value of type ".concat(r," for attribute ").concat(t," on type ").concat(e,", got ").concat(o))}}(t,n,r.validate):r.validate}),[{key:"isRequired",get:function(){return!this.hasDefault}}])}(),Be=function(){function e(t,n,r,o){$(this,e),this.name=t,this.rank=n,this.schema=r,this.spec=o,this.attrs=Le(t,o.attrs),this.excluded=null;var i=je(this.attrs);this.instance=i?new Q(this,i):null}return G(e,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!e&&this.instance?this.instance:new Q(this,Ne(this.attrs,e))}},{key:"removeFromSet",value:function(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}},{key:"isInSet",value:function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]}},{key:"checkAttrs",value:function(e){Pe(this.attrs,e,"mark",this.name)}},{key:"excludes",value:function(e){return this.excluded.indexOf(e)>-1}}],[{key:"compile",value:function(t,n){var r=Object.create(null),o=0;return t.forEach((function(t,i){return r[t]=new e(t,o++,n,i)})),r}}])}(),Fe=function(){return G((function e(t){$(this,e),this.linebreakReplacement=null,this.cached=Object.create(null);var n=this.spec={};for(var r in t)n[r]=t[r];n.nodes=N.from(t.nodes),n.marks=N.from(t.marks||{}),this.nodes=Re.compile(this.spec.nodes,this),this.marks=Be.compile(this.spec.marks,this);var o=Object.create(null);for(var i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");var a=this.nodes[i],s=a.spec.content||"",l=a.spec.marks;if(a.contentMatch=o[s]||(o[s]=xe.parse(s,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet="_"==l?null:l?He(this,l.split(" ")):""!=l&&a.inlineContent?null:[]}for(var c in this.marks){var u=this.marks[c],d=u.spec.excludes;u.excluded=null==d?[u]:""==d?[]:He(this,d.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}),[{key:"node",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof Re))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)}},{key:"text",value:function(e,t){var n=this.nodes.text;return new ke(n,n.defaultAttrs,e,Q.setFrom(t))}},{key:"mark",value:function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}},{key:"nodeFromJSON",value:function(e){return be.fromJSON(this,e)}},{key:"markFromJSON",value:function(e){return Q.fromJSON(this,e)}},{key:"nodeType",value:function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}])}();function He(e,t){for(var n=[],r=0;r<t.length;r++){var o=t[r],i=e.marks[o],a=i;if(i)n.push(i);else for(var s in e.marks){var l=e.marks[s];("_"==o||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(a=l)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}var ze=function(){function e(t,n){var r=this;$(this,e),this.schema=t,this.rules=n,this.tags=[],this.styles=[];var o=this.matchedStyles=[];n.forEach((function(e){if(function(e){return null!=e.tag}(e))r.tags.push(e);else if(function(e){return null!=e.style}(e)){var t=/[^=]*/.exec(e.style)[0];o.indexOf(t)<0&&o.push(t),r.styles.push(e)}})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))}return G(e,[{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new qe(this,t,!1);return n.addAll(e,Q.none,t.from,t.to),n.finish()}},{key:"parseSlice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new qe(this,t,!0);return n.addAll(e,Q.none,t.from,t.to),te.maxOpen(n.finish())}},{key:"matchTag",value:function(e,t,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var o=this.tags[r];if(Ke(e,o.tag)&&(void 0===o.namespace||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(e);if(!1===i)continue;o.attrs=i||void 0}return o}}}},{key:"matchStyle",value:function(e,t,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var i=this.styles[o],a=i.style;if(!(0!=a.indexOf(e)||i.context&&!n.matchesContext(i.context)||a.length>e.length&&(61!=a.charCodeAt(e.length)||a.slice(e.length+1)!=t))){if(i.getAttrs){var s=i.getAttrs(t);if(!1===s)continue;i.attrs=s||void 0}return i}}}}],[{key:"schemaRules",value:function(e){var t=[];function n(e){for(var n=null==e.priority?50:e.priority,r=0;r<t.length;r++){var o=t[r];if((null==o.priority?50:o.priority)<n)break}t.splice(r,0,e)}var r=function(t){var r=e.marks[t].spec.parseDOM;r&&r.forEach((function(e){n(e=Ze(e)),e.mark||e.ignore||e.clearMark||(e.mark=t)}))};for(var o in e.marks)r(o);var i=function(t){var r=e.nodes[t].spec.parseDOM;r&&r.forEach((function(e){n(e=Ze(e)),e.node||e.ignore||e.mark||(e.node=t)}))};for(var a in e.nodes)i(a);return t}},{key:"fromSchema",value:function(t){return t.cached.domParser||(t.cached.domParser=new e(t,e.schemaRules(t)))}}])}(),Ve={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},$e={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Ue={ol:!0,ul:!0};function Ge(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}var We=function(){return G((function e(t,n,r,o,i,a){$(this,e),this.type=t,this.attrs=n,this.marks=r,this.solid=o,this.options=a,this.content=[],this.activeMarks=Q.none,this.match=i||(4&a?null:t.contentMatch)}),[{key:"findWrapping",value:function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(Z.from(e));if(!t){var n,r=this.type.contentMatch;return(n=r.findWrapping(e.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}},{key:"finish",value:function(e){if(!(1&this.options)){var t,n=this.content[this.content.length-1];if(n&&n.isText&&(t=/[ \t\r\n\u000c]+$/.exec(n.text))){var r=n;n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=r.withText(r.text.slice(0,r.text.length-t[0].length))}}var o=Z.from(this.content);return!e&&this.match&&(o=o.append(this.match.fillBefore(Z.empty,!0))),this.type?this.type.create(this.attrs,o,this.marks):o}},{key:"inlineContext",value:function(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Ve.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}])}(),qe=function(){return G((function e(t,n,r){$(this,e),this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;var o,i=n.topNode,a=Ge(null,n.preserveWhitespace,0)|(r?4:0);o=i?new We(i.type,i.attrs,Q.none,!0,n.topMatch||i.type.contentMatch,a):new We(r?null:t.schema.topNodeType,null,Q.none,!0,null,a),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}),[{key:"top",get:function(){return this.nodes[this.open]}},{key:"addDOM",value:function(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}},{key:"addTextNode",value:function(e,t){var n=e.nodeValue,r=this.top,o=2&r.options?"full":this.localPreserveWS||(1&r.options)>0;if("full"===o||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(o)n="full"!==o?n.replace(/\r?\n|\r/g," "):n.replace(/\r\n?/g,"\n");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){var i=r.content[r.content.length-1],a=e.previousSibling;(!i||a&&"BR"==a.nodeName||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t),this.findInText(e)}else this.findInside(e)}},{key:"addElement",value:function(e,t,n){var r=this.localPreserveWS,o=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);var i,a=e.nodeName.toLowerCase();Ue.hasOwnProperty(a)&&this.parser.normalizeLists&&function(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=1==t.nodeType?t.nodeName.toLowerCase():null;r&&Ue.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):"li"==r?n=t:r&&(n=null)}}(e);var s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));e:if(s?s.ignore:$e.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,t);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);var l,c=this.needsBlock;if(Ve.hasOwnProperty(a))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),l=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}var u=s&&s.skip?t:this.readStyles(e,t);u&&this.addAll(e,u),l&&this.sync(o),this.needsBlock=c}else{var d=this.readStyles(e,t);d&&this.addElementByRule(e,s,d,!1===s.consuming?i:void 0)}this.localPreserveWS=r}},{key:"leafFallback",value:function(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}},{key:"ignoreFallback",value:function(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t)}},{key:"readStyles",value:function(e,t){var n=this,r=e.style;if(r&&r.length)for(var o=0;o<this.parser.matchedStyles.length;o++){var i=this.parser.matchedStyles[o],a=r.getPropertyValue(i);if(a)for(var s,l=function(e){var r=n.parser.matchStyle(i,a,n,e);return r?r.ignore?{v:null}:(t=r.clearMark?t.filter((function(e){return!r.clearMark(e)})):t.concat(n.parser.schema.marks[r.mark].create(r.attrs)),!1!==r.consuming?(c=e,0):void(c=e=r)):(c=e,0)},c=void 0;0!==(s=l(c));)if(s)return s.v}return t}},{key:"addElementByRule",value:function(e,t,n,r){var o,i,a=this;if(t.node)if((i=this.parser.schema.nodes[t.node]).isLeaf)this.insertNode(i.create(t.attrs),n)||this.leafFallback(e,n);else{var s=this.enter(i,t.attrs||null,n,t.preserveWhitespace);s&&(o=!0,n=s)}else{var l=this.parser.schema.marks[t.mark];n=n.concat(l.create(t.attrs))}var c=this.top;if(i&&i.isLeaf)this.findInside(e);else if(r)this.addElement(e,n,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return a.insertNode(e,n)}));else{var u=e;"string"==typeof t.contentElement?u=e.querySelector(t.contentElement):"function"==typeof t.contentElement?u=t.contentElement(e):t.contentElement&&(u=t.contentElement),this.findAround(e,u,!0),this.addAll(u,n),this.findAround(e,u,!1)}o&&this.sync(c)&&this.open--}},{key:"addAll",value:function(e,t,n,r){for(var o=n||0,i=n?e.childNodes[n]:e.firstChild,a=null==r?null:e.childNodes[r];i!=a;i=i.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(i,t);this.findAtPoint(e,o)}},{key:"findPlace",value:function(e,t){for(var n,r,o=this.open;o>=0;o--){var i=this.nodes[o],a=i.findWrapping(e);if(a&&(!n||n.length>a.length)&&(n=a,r=i,!a.length))break;if(i.solid)break}if(!n)return null;this.sync(r);for(var s=0;s<n.length;s++)t=this.enterInner(n[s],null,t,!1);return t}},{key:"insertNode",value:function(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){var n=this.textblockFromContext();n&&(t=this.enterInner(n,null,t))}var r=this.findPlace(e,t);if(r){this.closeExtra();var o=this.top;o.match&&(o.match=o.match.matchType(e.type));var i,a=Q.none,s=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return P(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(r.concat(e.marks));try{for(s.s();!(i=s.n()).done;){var l=i.value;(o.type?o.type.allowsMarkType(l.type):Je(l.type,e.type))&&(a=l.addToSet(a))}}catch(e){s.e(e)}finally{s.f()}return o.content.push(e.mark(a)),!0}return!1}},{key:"enter",value:function(e,t,n,r){var o=this.findPlace(e.create(t),n);return o&&(o=this.enterInner(e,t,n,!0,r)),o}},{key:"enterInner",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;this.closeExtra();var i=this.top;i.match=i.match&&i.match.matchType(e);var a=Ge(e,o,i.options);4&i.options&&0==i.content.length&&(a|=4);var s=Q.none;return n=n.filter((function(t){return!(i.type?i.type.allowsMarkType(t.type):Je(t.type,e))||(s=t.addToSet(s),!1)})),this.nodes.push(new We(e,t,s,r,null,a)),this.open++,n}},{key:"closeExtra",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}},{key:"finish",value:function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!(!this.isOpen&&!this.options.topOpen))}},{key:"sync",value:function(e){for(var t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=1)}return!1}},{key:"currentPos",get:function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e}},{key:"findAtPoint",value:function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}},{key:"findInside",value:function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}},{key:"findAround",value:function(e,t,n){if(e!=t&&this.find)for(var r=0;r<this.find.length;r++)null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},{key:"findInText",value:function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}},{key:"matchesContext",value:function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),r=this.options.context,o=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),a=function(e,s){for(;e>=0;e--){var l=n[e];if(""==l){if(e==n.length-1||0==e)continue;for(;s>=i;s--)if(a(e-1,s))return!0;return!1}var c=s>0||0==s&&o?t.nodes[s].type:r&&s>=i?r.node(s-i).type:null;if(!c||c.name!=l&&!c.isInGroup(l))return!1;s--}return!0};return a(n.length-1,this.open)}},{key:"textblockFromContext",value:function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}}}])}();function Ke(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function Ze(e){var t={};for(var n in e)t[n]=e[n];return t}function Je(e,t){var n,r=t.schema.nodes,o=function(){var n=r[i];if(!n.allowsMarkType(e))return 0;var o=[],a=function(e){o.push(e);for(var n=0;n<e.edgeCount;n++){var r=e.edge(n),i=r.type,s=r.next;if(i==t)return!0;if(o.indexOf(s)<0&&a(s))return!0}};return a(n.contentMatch)?{v:!0}:void 0};for(var i in r)if(0!==(n=o())&&n)return n.v}var Xe=function(){function e(t,n){$(this,e),this.nodes=t,this.marks=n}return G(e,[{key:"serializeFragment",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;r||(r=Qe(n).createDocumentFragment());var o=r,i=[];return e.forEach((function(e){if(i.length||e.marks.length){for(var r=0,a=0;r<i.length&&a<e.marks.length;){var s=e.marks[a];if(t.marks[s.type.name]){if(!s.eq(i[r][0])||!1===s.type.spec.spanning)break;r++,a++}else a++}for(;r<i.length;)o=i.pop()[1];for(;a<e.marks.length;){var l=e.marks[a++],c=t.serializeMark(l,e.isInline,n);c&&(i.push([l,o]),o.appendChild(c.dom),o=c.contentDOM||c.dom)}}o.appendChild(t.serializeNodeInner(e,n))})),r}},{key:"serializeNodeInner",value:function(e,t){var n=tt(Qe(t),this.nodes[e.type.name](e),null,e.attrs),r=n.dom,o=n.contentDOM;if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,o)}return r}},{key:"serializeNode",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serializeNodeInner(e,t),r=e.marks.length-1;r>=0;r--){var o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n}},{key:"serializeMark",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.marks[e.type.name];return r&&tt(Qe(n),r(e,t),null,e.attrs)}}],[{key:"renderSpec",value:function(e,t){return tt(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0)}},{key:"fromSchema",value:function(t){return t.cached.domSerializer||(t.cached.domSerializer=new e(this.nodesFromSchema(t),this.marksFromSchema(t)))}},{key:"nodesFromSchema",value:function(e){var t=Ye(e.nodes);return t.text||(t.text=function(e){return e.text}),t}},{key:"marksFromSchema",value:function(e){return Ye(e.marks)}}])}();function Ye(e){var t={};for(var n in e){var r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function Qe(e){return e.document||window.document}var et=new WeakMap;function tt(e,t,n,r){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;var o,i=t[0];if("string"!=typeof i)throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=function(e){var t=et.get(e);return void 0===t&&et.set(e,t=function(e){var t=null;return function e(n){if(n&&"object"==V(n))if(Array.isArray(n))if("string"==typeof n[0])t||(t=[]),t.push(n);else for(var r=0;r<n.length;r++)e(n[r]);else for(var o in n)e(n[o])}(e),t}(e)),t}(r))&&o.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");var a,s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));var l=n?e.createElementNS(n,i):e.createElement(i),c=t[1],u=1;if(c&&"object"==V(c)&&null==c.nodeType&&!Array.isArray(c))for(var d in u=2,c)if(null!=c[d]){var f=d.indexOf(" ");f>0?l.setAttributeNS(d.slice(0,f),d.slice(f+1),c[d]):l.setAttribute(d,c[d])}for(var p=u;p<t.length;p++){var h=t[p];if(0===h){if(p<t.length-1||p>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}var m=tt(e,h,n,r),v=m.dom,g=m.contentDOM;if(l.appendChild(v),g){if(a)throw new RangeError("Multiple content holes");a=g}}return{dom:l,contentDOM:a}}function nt(e,t,n){return t=ot(t),function(e,t){if(t&&("object"==st(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,rt()?Reflect.construct(t,n||[],ot(e).constructor):t.apply(e,n))}function rt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rt=function(){return!!e})()}function ot(e){return ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ot(e)}function it(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&at(e,t)}function at(e,t){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},at(e,t)}function st(e){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st(e)}function lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dt(r.key),r)}}function ut(e,t,n){return t&&ct(e.prototype,t),n&&ct(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function dt(e){var t=function(e){if("object"!=st(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=st(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==st(t)?t:t+""}var ft=Math.pow(2,16);function pt(e,t){return e+t*ft}function ht(e){return 65535&e}var mt=function(){return ut((function e(t,n,r){lt(this,e),this.pos=t,this.delInfo=n,this.recover=r}),[{key:"deleted",get:function(){return(8&this.delInfo)>0}},{key:"deletedBefore",get:function(){return(5&this.delInfo)>0}},{key:"deletedAfter",get:function(){return(6&this.delInfo)>0}},{key:"deletedAcross",get:function(){return(4&this.delInfo)>0}}])}(),vt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(lt(this,e),this.ranges=t,this.inverted=n,!t.length&&e.empty)return e.empty}return ut(e,[{key:"recover",value:function(e){var t=0,n=ht(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/ft}(e)}},{key:"mapResult",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}},{key:"map",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!0)}},{key:"_map",value:function(e,t,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?r:0);if(s>e)break;var l=this.ranges[a+o],c=this.ranges[a+i],u=s+l;if(e<=u){var d=s+r+((l?e==s?-1:e==u?1:t:t)<0?0:c);if(n)return d;var f=e==(t<0?s:u)?null:pt(a/3,e-s),p=e==s?2:e==u?1:4;return(t<0?e!=s:e!=u)&&(p|=8),new mt(d,p,f)}r+=c-l}return n?e+r:new mt(e+r,0,null)}},{key:"touches",value:function(e,t){for(var n=0,r=ht(t),o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?n:0);if(s>e)break;var l=this.ranges[a+o];if(e<=s+l&&a==3*r)return!0;n+=this.ranges[a+i]-l}return!1}},{key:"forEach",value:function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],a=i-(this.inverted?o:0),s=i+(this.inverted?0:o),l=this.ranges[r+t],c=this.ranges[r+n];e(a,a+l,s,s+c),o+=c-l}}},{key:"invert",value:function(){return new e(this.ranges,!this.inverted)}},{key:"toString",value:function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}}],[{key:"offset",value:function(t){return 0==t?e.empty:new e(t<0?[0,-t,0]:[0,0,t])}}])}();vt.empty=new vt([]);var gt=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t?t.length:0;lt(this,e),this.mirror=n,this.from=r,this.to=o,this._maps=t||[],this.ownData=!(t||n)}return ut(e,[{key:"maps",get:function(){return this._maps}},{key:"slice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maps.length;return new e(this._maps,this.mirror,t,n)}},{key:"appendMap",value:function(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),null!=t&&this.setMirror(this._maps.length-1,t)}},{key:"appendMapping",value:function(e){for(var t=0,n=this._maps.length;t<e._maps.length;t++){var r=e.getMirror(t);this.appendMap(e._maps[t],null!=r&&r<t?n+r:void 0)}}},{key:"getMirror",value:function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}},{key:"setMirror",value:function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}},{key:"appendMappingInverted",value:function(e){for(var t=e.maps.length-1,n=this._maps.length+e._maps.length;t>=0;t--){var r=e.getMirror(t);this.appendMap(e._maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}},{key:"invert",value:function(){var t=new e;return t.appendMappingInverted(this),t}},{key:"map",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this._maps[n].map(e,t);return e}},{key:"mapResult",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}},{key:"_map",value:function(e,t,n){for(var r=0,o=this.from;o<this.to;o++){var i=this._maps[o].mapResult(e,t);if(null!=i.recover){var a=this.getMirror(o);if(null!=a&&a>o&&a<this.to){o=a,e=this._maps[a].recover(i.recover);continue}}r|=i.delInfo,e=i.pos}return n?e:new mt(e,r,null)}}])}(),yt=Object.create(null),bt=function(){return ut((function e(){lt(this,e)}),[{key:"getMap",value:function(){return vt.empty}},{key:"merge",value:function(e){return null}}],[{key:"fromJSON",value:function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=yt[t.stepType];if(!n)throw new RangeError("No step type ".concat(t.stepType," defined"));return n.fromJSON(e,t)}},{key:"jsonID",value:function(e,t){if(e in yt)throw new RangeError("Duplicate use of step JSON ID "+e);return yt[e]=t,t.prototype.jsonID=e,t}}])}(),kt=function(){function e(t,n){lt(this,e),this.doc=t,this.failed=n}return ut(e,null,[{key:"ok",value:function(t){return new e(t,null)}},{key:"fail",value:function(t){return new e(null,t)}},{key:"fromReplace",value:function(t,n,r,o){try{return e.ok(t.replace(n,r,o))}catch(t){if(t instanceof ee)return e.fail(t.message);throw t}}}])}();function wt(e,t,n){for(var r=[],o=0;o<e.childCount;o++){var i=e.child(o);i.content.size&&(i=i.copy(wt(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return Z.fromArray(r)}var xt=function(e){function t(e,n,r){var o;return lt(this,t),(o=nt(this,t)).from=e,o.to=n,o.mark=r,o}return it(t,e),ut(t,[{key:"apply",value:function(e){var t=this,n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new te(wt(n.content,(function(e,n){return e.isAtom&&n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),o),n.openStart,n.openEnd);return kt.fromReplace(e,this.from,this.to,i)}},{key:"invert",value:function(){return new Ct(this.from,this.to,this.mark)}},{key:"map",value:function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)}},{key:"merge",value:function(e){return e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))}}])}(bt);bt.jsonID("addMark",xt);var Ct=function(e){function t(e,n,r){var o;return lt(this,t),(o=nt(this,t)).from=e,o.to=n,o.mark=r,o}return it(t,e),ut(t,[{key:"apply",value:function(e){var t=this,n=e.slice(this.from,this.to),r=new te(wt(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))}),e),n.openStart,n.openEnd);return kt.fromReplace(e,this.from,this.to,r)}},{key:"invert",value:function(){return new xt(this.from,this.to,this.mark)}},{key:"map",value:function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)}},{key:"merge",value:function(e){return e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))}}])}(bt);bt.jsonID("removeMark",Ct);var St=function(e){function t(e,n){var r;return lt(this,t),(r=nt(this,t)).pos=e,r.mark=n,r}return it(t,e),ut(t,[{key:"apply",value:function(e){var t=e.nodeAt(this.pos);if(!t)return kt.fail("No node at mark step's position");var n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return kt.fromReplace(e,this.pos,this.pos+1,new te(Z.from(n),0,t.isLeaf?0:1))}},{key:"invert",value:function(e){var n=e.nodeAt(this.pos);if(n){var r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(var o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new t(this.pos,n.marks[o]);return new t(this.pos,this.mark)}}return new _t(this.pos,this.mark)}},{key:"map",value:function(e){var n=e.mapResult(this.pos,1);return n.deletedAfter?null:new t(n.pos,this.mark)}},{key:"toJSON",value:function(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new t(n.pos,e.markFromJSON(n.mark))}}])}(bt);bt.jsonID("addNodeMark",St);var _t=function(e){function t(e,n){var r;return lt(this,t),(r=nt(this,t)).pos=e,r.mark=n,r}return it(t,e),ut(t,[{key:"apply",value:function(e){var t=e.nodeAt(this.pos);if(!t)return kt.fail("No node at mark step's position");var n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return kt.fromReplace(e,this.pos,this.pos+1,new te(Z.from(n),0,t.isLeaf?0:1))}},{key:"invert",value:function(e){var t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new St(this.pos,this.mark):this}},{key:"map",value:function(e){var n=e.mapResult(this.pos,1);return n.deletedAfter?null:new t(n.pos,this.mark)}},{key:"toJSON",value:function(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new t(n.pos,e.markFromJSON(n.mark))}}])}(bt);bt.jsonID("removeNodeMark",_t);var Et=function(e){function t(e,n,r){var o,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return lt(this,t),(o=nt(this,t)).from=e,o.to=n,o.slice=r,o.structure=i,o}return it(t,e),ut(t,[{key:"apply",value:function(e){return this.structure&&Mt(e,this.from,this.to)?kt.fail("Structure replace would overwrite content"):kt.fromReplace(e,this.from,this.to,this.slice)}},{key:"getMap",value:function(){return new vt([this.from,this.to-this.from,this.slice.size])}},{key:"invert",value:function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}},{key:"map",value:function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new t(n.pos,Math.max(n.pos,r.pos),this.slice)}},{key:"merge",value:function(e){if(!(e instanceof t)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?te.empty:new te(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}var r=this.slice.size+e.slice.size==0?te.empty:new te(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),r,this.structure)}},{key:"toJSON",value:function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,te.fromJSON(e,n.slice),!!n.structure)}}])}(bt);bt.jsonID("replace",Et);var Dt=function(e){function t(e,n,r,o,i,a){var s,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return lt(this,t),(s=nt(this,t)).from=e,s.to=n,s.gapFrom=r,s.gapTo=o,s.slice=i,s.insert=a,s.structure=l,s}return it(t,e),ut(t,[{key:"apply",value:function(e){if(this.structure&&(Mt(e,this.from,this.gapFrom)||Mt(e,this.gapTo,this.to)))return kt.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return kt.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?kt.fromReplace(e,this.from,this.to,n):kt.fail("Content does not fit in gap")}},{key:"getMap",value:function(){return new vt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}},{key:"invert",value:function(e){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}},{key:"map",value:function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||i>r.pos?null:new t(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)}},{key:"toJSON",value:function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,te.fromJSON(e,n.slice),n.insert,!!n.structure)}}])}(bt);function Mt(e,t,n){for(var r=e.resolve(t),o=n-t,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var a=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}return!1}function At(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.contentMatch,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=e.doc.nodeAt(t),a=[],s=t+1,l=0;l<i.childCount;l++){var c=i.child(l),u=s+c.nodeSize,d=r.matchType(c.type);if(d){r=d;for(var f=0;f<c.marks.length;f++)n.allowsMarkType(c.marks[f].type)||e.step(new Ct(s,u,c.marks[f]));if(o&&c.isText&&"pre"!=n.whitespace)for(var p=void 0,h=/\r?\n|\r/g,m=void 0;p=h.exec(c.text);)m||(m=new te(Z.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),a.push(new Et(s+p.index,s+p.index+p[0].length,m))}else a.push(new Et(s,u,te.empty));s=u}if(!r.validEnd){var v=r.fillBefore(Z.empty,!0);e.replace(s,s,new te(v,0,0))}for(var g=a.length-1;g>=0;g--)e.step(a[g])}function Ot(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Tt(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),n=e.depth;;--n){var r=e.$from.node(n),o=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(o,i,t))return n;if(0==n||r.type.spec.isolating||!Ot(r,o,i))break}return null}function jt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,o=function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;var a=i.length?i[0]:t;return n.canReplaceWith(r,o,a)?i:null}(e,t),i=o&&function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.child(r),a=t.contentMatch.findWrapping(i.type);if(!a)return null;for(var s=(a.length?a[a.length-1]:t).contentMatch,l=r;s&&l<o;l++)s=s.matchType(n.child(l).type);return s&&s.validEnd?a:null}(r,t);return i?o.map(Nt).concat({type:t,attrs:n}).concat(i.map(Nt)):null}function Nt(e){return{type:e,attrs:null}}function Pt(e,t,n,r){t.forEach((function(o,i){if(o.isText)for(var a,s=/\r?\n|\r/g;a=s.exec(o.text);){var l=e.mapping.slice(r).map(n+1+i+a.index);e.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}}))}function Lt(e,t,n,r){t.forEach((function(o,i){if(o.type==o.type.schema.linebreakReplacement){var a=e.mapping.slice(r).map(n+1+i);e.replaceWith(a,a+1,t.type.schema.text("\n"))}}))}function Rt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=e.resolve(t),i=o.depth-n,a=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!a.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var s=o.depth-1,l=n-2;s>i;s--,l--){var c=o.node(s),u=o.index(s);if(c.type.spec.isolating)return!1;var d=c.content.cutByIndex(u,c.childCount),f=r&&r[l+1];f&&(d=d.replaceChild(0,f.type.create(f.attrs)));var p=r&&r[l]||c;if(!c.canReplace(u+1,c.childCount)||!p.type.validContent(d))return!1}var h=o.indexAfter(i),m=r&&r[0];return o.node(i).canReplaceWith(h,h,m?m.type:o.node(i+1).type)}function It(e,t){var n=e.resolve(t),r=n.index();return Bt(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Bt(e,t){return!(!e||!t||e.isLeaf||!function(e,t){t.content.size||e.type.compatibleContent(t.type);for(var n=e.contentMatchAt(e.childCount),r=e.type.schema.linebreakReplacement,o=0;o<t.childCount;o++){var i=t.child(o),a=i.type==r?e.type.schema.nodes.text:i.type;if(!(n=n.matchType(a)))return!1;if(!e.type.allowsMarks(i.marks))return!1}return n.validEnd}(e,t))}function Ft(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=e.resolve(t),o=r.depth;;o--){var i=void 0,a=void 0,s=r.index(o);if(o==r.depth?(i=r.nodeBefore,a=r.nodeAfter):n>0?(i=r.node(o+1),s++,a=r.node(o).maybeChild(s)):(i=r.node(o).maybeChild(s-1),a=r.node(o+1)),i&&!i.isTextblock&&Bt(i,a)&&r.node(o).canReplace(s,s+1))return t;if(0==o)break;t=n<0?r.before(o):r.after(o)}}function Ht(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var a=1;a<=(0==n.openStart&&n.size?2:1);a++)for(var s=r.depth;s>=0;s--){var l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,c=r.index(s)+(l>0?1:0),u=r.node(s),d=!1;if(1==a)d=u.canReplace(c,c,o);else{var f=u.contentMatchAt(c).findWrapping(o.firstChild.type);d=f&&u.canReplaceWith(c,c,f[0])}if(d)return 0==l?r.pos:l<0?r.before(s+1):r.after(s+1)}return null}function zt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:te.empty;if(t==n&&!r.size)return null;var o=e.resolve(t),i=e.resolve(n);return Vt(o,i,r)?new Et(t,n,r):new $t(o,i,r).fit()}function Vt(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}bt.jsonID("replaceAround",Dt);var $t=function(){return ut((function e(t,n,r){lt(this,e),this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Z.empty;for(var o=0;o<=t.depth;o++){var i=t.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(o))})}for(var a=t.depth;a>0;a--)this.placed=Z.from(t.node(a).copy(this.placed))}),[{key:"depth",get:function(){return this.frontier.length-1}},{key:"fit",value:function(){for(;this.unplaced.size;){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(t<0?this.$to:r.doc.resolve(t));if(!o)return null;for(var i=this.placed,a=r.depth,s=o.depth;a&&s&&1==i.childCount;)i=i.firstChild.content,a--,s--;var l=new te(i,a,s);return t>-1?new Dt(r.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Et(r.pos,o.pos,l):null}},{key:"findFittable",value:function(){for(var e=this.unplaced.openStart,t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){var o=t.firstChild;if(t.childCount>1&&(r=0),o.type.spec.isolating&&r<=n){e=n;break}t=o.content}for(var i=1;i<=2;i++)for(var a=1==i?e:this.unplaced.openStart;a>=0;a--)for(var s=null,l=(a?(s=Wt(this.unplaced.content,a-1).firstChild).content:this.unplaced.content).firstChild,c=this.depth;c>=0;c--){var u=this.frontier[c],d=u.type,f=u.match,p=void 0,h=null;if(1==i&&(l?f.matchType(l.type)||(h=f.fillBefore(Z.from(l),!1)):s&&d.compatibleContent(s.type)))return{sliceDepth:a,frontierDepth:c,parent:s,inject:h};if(2==i&&l&&(p=f.findWrapping(l.type)))return{sliceDepth:a,frontierDepth:c,parent:s,wrap:p};if(s&&f.matchType(s.type))break}}},{key:"openMore",value:function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,o=Wt(t,n);return!(!o.childCount||o.firstChild.isLeaf||(this.unplaced=new te(t,n+1,Math.max(r,o.size+n>=t.size-r?n+1:0)),0))}},{key:"dropNode",value:function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,o=Wt(t,n);if(o.childCount<=1&&n>0){var i=t.size-n<=n+o.size;this.unplaced=new te(Ut(t,n-1,1),n-1,i?n-1:r)}else this.unplaced=new te(Ut(t,n,1),n,r)}},{key:"placeNodes",value:function(e){for(var t=e.sliceDepth,n=e.frontierDepth,r=e.parent,o=e.inject,i=e.wrap;this.depth>n;)this.closeFrontierNode();if(i)for(var a=0;a<i.length;a++)this.openFrontierNode(i[a]);var s=this.unplaced,l=r?r.content:s.content,c=s.openStart-t,u=0,d=[],f=this.frontier[n],p=f.match,h=f.type;if(o){for(var m=0;m<o.childCount;m++)d.push(o.child(m));p=p.matchFragment(o)}for(var v=l.size+t-(s.content.size-s.openEnd);u<l.childCount;){var g=l.child(u),y=p.matchType(g.type);if(!y)break;(++u>1||0==c||g.content.size)&&(p=y,d.push(qt(g.mark(h.allowedMarks(g.marks)),1==u?c:0,u==l.childCount?v:-1)))}var b=u==l.childCount;b||(v=-1),this.placed=Gt(this.placed,n,Z.from(d)),this.frontier[n].match=p,b&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var k=0,w=l;k<v;k++){var x=w.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),w=x.content}this.unplaced=b?0==t?te.empty:new te(Ut(s.content,t-1,1),t-1,v<0?s.openEnd:t-1):new te(Ut(s.content,t,u),s.openStart,s.openEnd)}},{key:"mustMoveInline",value:function(){if(!this.$to.parent.isTextblock)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!Kt(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r}},{key:"findCloseLevel",value:function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var n=this.frontier[t],r=n.match,o=n.type,i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=Kt(e,t,o,r,i);if(a){for(var s=t-1;s>=0;s--){var l=this.frontier[s],c=l.match,u=Kt(e,s,l.type,c,!0);if(!u||u.childCount)continue e}return{depth:t,fit:a,move:i?e.doc.resolve(e.after(t+1)):e}}}}},{key:"close",value:function(e){var t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Gt(this.placed,t.depth,t.fit)),e=t.move;for(var n=t.depth+1;n<=e.depth;n++){var r=e.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,o)}return e}},{key:"openFrontierNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=Gt(this.placed,this.depth,Z.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}},{key:"closeFrontierNode",value:function(){var e=this.frontier.pop().match.fillBefore(Z.empty,!0);e.childCount&&(this.placed=Gt(this.placed,this.frontier.length,e))}}])}();function Ut(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(Ut(e.firstChild.content,t-1,n)))}function Gt(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Gt(e.lastChild.content,t-1,n)))}function Wt(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function qt(e,t,n){if(t<=0)return e;var r=e.content;return t>1&&(r=r.replaceChild(0,qt(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(Z.empty,!0)))),e.copy(r)}function Kt(e,t,n,r,o){var i=e.node(t),a=o?e.indexAfter(t):e.index(t);if(a==i.childCount&&!n.compatibleContent(i.type))return null;var s=r.fillBefore(i.content,!0,a);return s&&!function(e,t,n){for(var r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,i.content,a)?s:null}function Zt(e,t,n,r,o){if(t<n){var i=e.firstChild;e=e.replaceChild(0,i.copy(Zt(i.content,t+1,n,r,i)))}if(t>r){var a=o.contentMatchAt(0),s=a.fillBefore(e).append(e);e=s.append(a.matchFragment(s).fillBefore(Z.empty,!0))}return e}function Jt(e,t){for(var n=[],r=Math.min(e.depth,t.depth);r>=0;r--){var o=e.start(r);if(o<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(o==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==o-1)&&n.push(r)}return n}var Xt=function(e){function t(e,n,r){var o;return lt(this,t),(o=nt(this,t)).pos=e,o.attr=n,o.value=r,o}return it(t,e),ut(t,[{key:"apply",value:function(e){var t=e.nodeAt(this.pos);if(!t)return kt.fail("No node at attribute step's position");var n=Object.create(null);for(var r in t.attrs)n[r]=t.attrs[r];n[this.attr]=this.value;var o=t.type.create(n,null,t.marks);return kt.fromReplace(e,this.pos,this.pos+1,new te(Z.from(o),0,t.isLeaf?0:1))}},{key:"getMap",value:function(){return vt.empty}},{key:"invert",value:function(e){return new t(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}},{key:"map",value:function(e){var n=e.mapResult(this.pos,1);return n.deletedAfter?null:new t(n.pos,this.attr,this.value)}},{key:"toJSON",value:function(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.pos||"string"!=typeof n.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new t(n.pos,n.attr,n.value)}}])}(bt);bt.jsonID("attr",Xt);var Yt=function(e){function t(e,n){var r;return lt(this,t),(r=nt(this,t)).attr=e,r.value=n,r}return it(t,e),ut(t,[{key:"apply",value:function(e){var t=Object.create(null);for(var n in e.attrs)t[n]=e.attrs[n];t[this.attr]=this.value;var r=e.type.create(t,e.content,e.marks);return kt.ok(r)}},{key:"getMap",value:function(){return vt.empty}},{key:"invert",value:function(e){return new t(this.attr,e.attrs[this.attr])}},{key:"map",value:function(e){return this}},{key:"toJSON",value:function(){return{stepType:"docAttr",attr:this.attr,value:this.value}}}],[{key:"fromJSON",value:function(e,n){if("string"!=typeof n.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new t(n.attr,n.value)}}])}(bt);bt.jsonID("docAttr",Yt);var Qt=Error;((Qt=function e(t){var n=Error.call(this,t);return n.__proto__=e.prototype,n}).prototype=Object.create(Error.prototype)).constructor=Qt,Qt.prototype.name="TransformError";var en=function(){return ut((function e(t){lt(this,e),this.doc=t,this.steps=[],this.docs=[],this.mapping=new gt}),[{key:"before",get:function(){return this.docs.length?this.docs[0]:this.doc}},{key:"step",value:function(e){var t=this.maybeStep(e);if(t.failed)throw new Qt(t.failed);return this}},{key:"maybeStep",value:function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}},{key:"docChanged",get:function(){return this.steps.length>0}},{key:"addStep",value:function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}},{key:"replace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:te.empty,r=zt(this.doc,e,t,n);return r&&this.step(r),this}},{key:"replaceWith",value:function(e,t,n){return this.replace(e,t,new te(Z.from(n),0,0))}},{key:"delete",value:function(e,t){return this.replace(e,t,te.empty)}},{key:"insert",value:function(e,t){return this.replaceWith(e,e,t)}},{key:"replaceRange",value:function(e,t,n){return function(e,t,n,r){if(!r.size)return e.deleteRange(t,n);var o=e.doc.resolve(t),i=e.doc.resolve(n);if(Vt(o,i,r))return e.step(new Et(t,n,r));var a=Jt(o,e.doc.resolve(n));0==a[a.length-1]&&a.pop();var s=-(o.depth+1);a.unshift(s);for(var l=o.depth,c=o.pos-1;l>0;l--,c--){var u=o.node(l).type.spec;if(u.defining||u.definingAsContext||u.isolating)break;a.indexOf(l)>-1?s=l:o.before(l)==c&&a.splice(1,0,-l)}for(var d,f=a.indexOf(s),p=[],h=r.openStart,m=r.content,v=0;;v++){var g=m.firstChild;if(p.push(g),v==r.openStart)break;m=g.content}for(var y=h-1;y>=0;y--){var b=p[y],k=(d=b.type).spec.defining||d.spec.definingForContent;if(k&&!b.sameMarkup(o.node(Math.abs(s)-1)))h=y;else if(k||!b.type.isTextblock)break}for(var w=r.openStart;w>=0;w--){var x=(w+h+1)%(r.openStart+1),C=p[x];if(C)for(var S=0;S<a.length;S++){var _=a[(S+f)%a.length],E=!0;_<0&&(E=!1,_=-_);var D=o.node(_-1),M=o.index(_-1);if(D.canReplaceWith(M,M,C.type,C.marks))return e.replace(o.before(_),E?i.after(_):n,new te(Zt(r.content,0,r.openStart,x),x,r.openEnd))}}for(var A=e.steps.length,O=a.length-1;O>=0&&(e.replace(t,n,r),!(e.steps.length>A));O--){var T=a[O];T<0||(t=o.before(T),n=i.after(T))}}(this,e,t,n),this}},{key:"replaceRangeWith",value:function(e,t,n){return function(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){var o=function(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var a=r.depth-1;a>=0;a--){var s=r.indexAfter(a);if(r.node(a).canReplaceWith(s,s,n))return r.after(a+1);if(s<r.node(a).childCount)return null}return null}(e.doc,t,r.type);null!=o&&(t=n=o)}e.replaceRange(t,n,new te(Z.from(r),0,0))}(this,e,t,n),this}},{key:"deleteRange",value:function(e,t){return function(e,t,n){for(var r=e.doc.resolve(t),o=e.doc.resolve(n),i=Jt(r,o),a=0;a<i.length;a++){var s=i[a],l=a==i.length-1;if(l&&0==s||r.node(s).type.contentMatch.validEnd)return e.delete(r.start(s),o.end(s));if(s>0&&(l||r.node(s-1).canReplace(r.index(s-1),o.indexAfter(s-1))))return e.delete(r.before(s),o.after(s))}for(var c=1;c<=r.depth&&c<=o.depth;c++)if(t-r.start(c)==r.depth-c&&n>r.end(c)&&o.end(c)-n!=o.depth-c&&r.start(c-1)==o.start(c-1)&&r.node(c-1).canReplace(r.index(c-1),o.index(c-1)))return e.delete(r.before(c),n);e.delete(t,n)}(this,e,t),this}},{key:"lift",value:function(e,t){return function(e,t,n){for(var r=t.$from,o=t.$to,i=t.depth,a=r.before(i+1),s=o.after(i+1),l=a,c=s,u=Z.empty,d=0,f=i,p=!1;f>n;f--)p||r.index(f)>0?(p=!0,u=Z.from(r.node(f).copy(u)),d++):l--;for(var h=Z.empty,m=0,v=i,g=!1;v>n;v--)g||o.after(v+1)<o.end(v)?(g=!0,h=Z.from(o.node(v).copy(h)),m++):c++;e.step(new Dt(l,c,a,s,new te(u.append(h),d,m),u.size-d,!0))}(this,e,t),this}},{key:"join",value:function(e){return function(e,t,n){var r=null,o=e.doc.type.schema.linebreakReplacement,i=e.doc.resolve(t-n),a=i.node().type;if(o&&a.inlineContent){var s="pre"==a.whitespace,l=!!a.contentMatch.matchType(o);s&&!l?r=!1:!s&&l&&(r=!0)}var c=e.steps.length;if(!1===r){var u=e.doc.resolve(t+n);Lt(e,u.node(),u.before(),c)}a.inlineContent&&At(e,t+n-1,a,i.node().contentMatchAt(i.index()),null==r);var d=e.mapping.slice(c),f=d.map(t-n);if(e.step(new Et(f,d.map(t+n,-1),te.empty,!0)),!0===r){var p=e.doc.resolve(f);Pt(e,p.node(),p.before(),e.steps.length)}}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this}},{key:"wrap",value:function(e,t){return function(e,t,n){for(var r=Z.empty,o=n.length-1;o>=0;o--){if(r.size){var i=n[o].type.contentMatch.matchFragment(r);if(!i||!i.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Z.from(n[o].type.create(n[o].attrs,r))}var a=t.start,s=t.end;e.step(new Dt(a,s,a,s,new te(r,0,0),n.length,!0))}(this,e,t),this}},{key:"setBlockType",value:function(e){return function(e,t,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=e.steps.length;e.doc.nodesBetween(t,n,(function(t,n){var a="function"==typeof o?o(t):o;if(t.isTextblock&&!t.hasMarkup(r,a)&&function(e,t,n){var r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(e.doc,e.mapping.slice(i).map(n),r)){var s=null;if(r.schema.linebreakReplacement){var l="pre"==r.whitespace,c=!!r.contentMatch.matchType(r.schema.linebreakReplacement);l&&!c?s=!1:!l&&c&&(s=!0)}!1===s&&Lt(e,t,n,i),At(e,e.mapping.slice(i).map(n,1),r,void 0,null===s);var u=e.mapping.slice(i),d=u.map(n,1),f=u.map(n+t.nodeSize,1);return e.step(new Dt(d,f,d+1,f-1,new te(Z.from(r.create(a,null,t.marks)),0,0),1,!0)),!0===s&&Pt(e,t,n,i),!1}}))}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,arguments.length>2?arguments[2]:void 0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null),this}},{key:"setNodeMarkup",value:function(e,t){return function(e,t,n,r,o){var i=e.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");n||(n=i.type);var a=n.create(r,null,o||i.marks);if(i.isLeaf)return e.replaceWith(t,t+i.nodeSize,a);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new Dt(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new te(Z.from(a),0,0),1,!0))}(this,e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0),this}},{key:"setNodeAttribute",value:function(e,t,n){return this.step(new Xt(e,t,n)),this}},{key:"setDocAttribute",value:function(e,t){return this.step(new Yt(e,t)),this}},{key:"addNodeMark",value:function(e,t){return this.step(new St(e,t)),this}},{key:"removeNodeMark",value:function(e,t){if(!(t instanceof Q)){var n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(!(t=t.isInSet(n.marks)))return this}return this.step(new _t(e,t)),this}},{key:"split",value:function(e){return function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=e.doc.resolve(t),i=Z.empty,a=Z.empty,s=o.depth,l=o.depth-n,c=n-1;s>l;s--,c--){i=Z.from(o.node(s).copy(i));var u=r&&r[c];a=Z.from(u?u.type.create(u.attrs,a):o.node(s).copy(a))}e.step(new Et(t,t,new te(i.append(a),n,n),!0))}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2?arguments[2]:void 0),this}},{key:"addMark",value:function(e,t,n){return function(e,t,n,r){var o,i,a=[],s=[];e.doc.nodesBetween(t,n,(function(e,l,c){if(e.isInline){var u=e.marks;if(!r.isInSet(u)&&c.type.allowsMarkType(r.type)){for(var d=Math.max(l,t),f=Math.min(l+e.nodeSize,n),p=r.addToSet(u),h=0;h<u.length;h++)u[h].isInSet(p)||(o&&o.to==d&&o.mark.eq(u[h])?o.to=f:a.push(o=new Ct(d,f,u[h])));i&&i.to==d?i.to=f:s.push(i=new xt(d,f,r))}}})),a.forEach((function(t){return e.step(t)})),s.forEach((function(t){return e.step(t)}))}(this,e,t,n),this}},{key:"removeMark",value:function(e,t,n){return function(e,t,n,r){var o=[],i=0;e.doc.nodesBetween(t,n,(function(e,a){if(e.isInline){i++;var s=null;if(r instanceof Be)for(var l,c=e.marks;l=r.isInSet(c);)(s||(s=[])).push(l),c=l.removeFromSet(c);else r?r.isInSet(e.marks)&&(s=[r]):s=e.marks;if(s&&s.length)for(var u=Math.min(a+e.nodeSize,n),d=0;d<s.length;d++){for(var f=s[d],p=void 0,h=0;h<o.length;h++){var m=o[h];m.step==i-1&&f.eq(o[h].style)&&(p=m)}p?(p.to=u,p.step=i):o.push({style:f,from:Math.max(a,t),to:u,step:i})}}})),o.forEach((function(t){return e.step(new Ct(t.from,t.to,t.style))}))}(this,e,t,n),this}},{key:"clearIncompatible",value:function(e,t,n){return At(this,e,t,n),this}}])}();function tn(e,t,n){return t=an(t),function(e,t){if(t&&("object"==cn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,nn()?Reflect.construct(t,n||[],an(e).constructor):t.apply(e,n))}function nn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nn=function(){return!!e})()}function rn(e,t,n,r){var o=on(an(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function on(){return on="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=an(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},on.apply(null,arguments)}function an(e){return an=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},an(e)}function sn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ln(e,t)}function ln(e,t){return ln=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ln(e,t)}function cn(e){return cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cn(e)}function un(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pn(r.key),r)}}function fn(e,t,n){return t&&dn(e.prototype,t),n&&dn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function pn(e){var t=function(e){if("object"!=cn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=cn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==cn(t)?t:t+""}var hn=Object.create(null),mn=function(){return fn((function e(t,n,r){un(this,e),this.$anchor=t,this.$head=n,this.ranges=r||[new vn(t.min(n),t.max(n))]}),[{key:"anchor",get:function(){return this.$anchor.pos}},{key:"head",get:function(){return this.$head.pos}},{key:"from",get:function(){return this.$from.pos}},{key:"to",get:function(){return this.$to.pos}},{key:"$from",get:function(){return this.ranges[0].$from}},{key:"$to",get:function(){return this.ranges[0].$to}},{key:"empty",get:function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}},{key:"content",value:function(){return this.$from.doc.slice(this.from,this.to,!0)}},{key:"replace",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.empty,n=t.content.lastChild,r=null,o=0;o<t.openEnd;o++)r=n,n=n.lastChild;for(var i=e.steps.length,a=this.ranges,s=0;s<a.length;s++){var l=a[s],c=l.$from,u=l.$to,d=e.mapping.slice(i);e.replaceRange(d.map(c.pos),d.map(u.pos),s?te.empty:t),0==s&&En(e,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}}},{key:"replaceWith",value:function(e,t){for(var n=e.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],a=i.$from,s=i.$to,l=e.mapping.slice(n),c=l.map(a.pos),u=l.map(s.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,t),En(e,n,t.isInline?-1:1))}}},{key:"getBookmark",value:function(){return bn.between(this.$anchor,this.$head).getBookmark()}}],[{key:"findFrom",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.parent.inlineContent?new bn(e):_n(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(var o=e.depth-1;o>=0;o--){var i=t<0?_n(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):_n(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(i)return i}return null}},{key:"near",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.findFrom(e,t)||this.findFrom(e,-t)||new Cn(e.node(0))}},{key:"atStart",value:function(e){return _n(e,e,0,0,1)||new Cn(e)}},{key:"atEnd",value:function(e){return _n(e,e,e.content.size,e.childCount,-1)||new Cn(e)}},{key:"fromJSON",value:function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=hn[t.type];if(!n)throw new RangeError("No selection type ".concat(t.type," defined"));return n.fromJSON(e,t)}},{key:"jsonID",value:function(e,t){if(e in hn)throw new RangeError("Duplicate use of selection JSON ID "+e);return hn[e]=t,t.prototype.jsonID=e,t}}])}();mn.prototype.visible=!0;var vn=fn((function e(t,n){un(this,e),this.$from=t,this.$to=n})),gn=!1;function yn(e){gn||e.parent.inlineContent||(gn=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}var bn=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return un(this,t),yn(e),yn(n),tn(this,t,[e,n])}return sn(t,e),fn(t,[{key:"$cursor",get:function(){return this.$anchor.pos==this.$head.pos?this.$head:null}},{key:"map",value:function(e,n){var r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return mn.near(r);var o=e.resolve(n.map(this.anchor));return new t(o.parent.inlineContent?o:r,r)}},{key:"replace",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.empty;if(rn(t,"replace",this,3)([e,n]),n==te.empty){var r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}},{key:"eq",value:function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head}},{key:"getBookmark",value:function(){return new kn(this.anchor,this.head)}},{key:"toJSON",value:function(){return{type:"text",anchor:this.anchor,head:this.head}}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))}},{key:"create",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}},{key:"between",value:function(e,n,r){var o=e.pos-n.pos;if(r&&!o||(r=o>=0?1:-1),!n.parent.inlineContent){var i=mn.findFrom(n,r,!0)||mn.findFrom(n,-r,!0);if(!i)return mn.near(n,r);n=i.$head}return e.parent.inlineContent||(0==o||(e=(mn.findFrom(e,-r,!0)||mn.findFrom(e,r,!0)).$anchor).pos<n.pos!=o<0)&&(e=n),new t(e,n)}}])}(mn);mn.jsonID("text",bn);var kn=function(){function e(t,n){un(this,e),this.anchor=t,this.head=n}return fn(e,[{key:"map",value:function(t){return new e(t.map(this.anchor),t.map(this.head))}},{key:"resolve",value:function(e){return bn.between(e.resolve(this.anchor),e.resolve(this.head))}}])}(),wn=function(e){function t(e){var n;un(this,t);var r=e.nodeAfter,o=e.node(0).resolve(e.pos+r.nodeSize);return(n=tn(this,t,[e,o])).node=r,n}return sn(t,e),fn(t,[{key:"map",value:function(e,n){var r=n.mapResult(this.anchor),o=r.deleted,i=r.pos,a=e.resolve(i);return o?mn.near(a):new t(a)}},{key:"content",value:function(){return new te(Z.from(this.node),0,0)}},{key:"eq",value:function(e){return e instanceof t&&e.anchor==this.anchor}},{key:"toJSON",value:function(){return{type:"node",anchor:this.anchor}}},{key:"getBookmark",value:function(){return new xn(this.anchor)}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))}},{key:"create",value:function(e,n){return new t(e.resolve(n))}},{key:"isSelectable",value:function(e){return!e.isText&&!1!==e.type.spec.selectable}}])}(mn);wn.prototype.visible=!1,mn.jsonID("node",wn);var xn=function(){function e(t){un(this,e),this.anchor=t}return fn(e,[{key:"map",value:function(t){var n=t.mapResult(this.anchor),r=n.deleted,o=n.pos;return r?new kn(o,o):new e(o)}},{key:"resolve",value:function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&wn.isSelectable(n)?new wn(t):mn.near(t)}}])}(),Cn=function(e){function t(e){return un(this,t),tn(this,t,[e.resolve(0),e.resolve(e.content.size)])}return sn(t,e),fn(t,[{key:"replace",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.empty;if(n==te.empty){e.delete(0,e.doc.content.size);var r=mn.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else rn(t,"replace",this,3)([e,n])}},{key:"toJSON",value:function(){return{type:"all"}}},{key:"map",value:function(e){return new t(e)}},{key:"eq",value:function(e){return e instanceof t}},{key:"getBookmark",value:function(){return Sn}}],[{key:"fromJSON",value:function(e){return new t(e)}}])}(mn);mn.jsonID("all",Cn);var Sn={map:function(){return this},resolve:function(e){return new Cn(e)}};function _n(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(t.inlineContent)return bn.create(e,n);for(var a=r-(o>0?0:1);o>0?a<t.childCount:a>=0;a+=o){var s=t.child(a);if(s.isAtom){if(!i&&wn.isSelectable(s))return wn.create(e,n-(o<0?s.nodeSize:0))}else{var l=_n(e,s,n+o,o<0?s.childCount:0,o,i);if(l)return l}n+=s.nodeSize*o}return null}function En(e,t,n){var r=e.steps.length-1;if(!(r<t)){var o,i=e.steps[r];(i instanceof Et||i instanceof Dt)&&(e.mapping.maps[r].forEach((function(e,t,n,r){null==o&&(o=r)})),e.setSelection(mn.near(e.doc.resolve(o),n)))}}var Dn=function(e){function t(e){var n;return un(this,t),(n=tn(this,t,[e.doc])).curSelectionFor=0,n.updated=0,n.meta=Object.create(null),n.time=Date.now(),n.curSelection=e.selection,n.storedMarks=e.storedMarks,n}return sn(t,e),fn(t,[{key:"selection",get:function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}},{key:"setSelection",value:function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&this.updated|1,this.storedMarks=null,this}},{key:"selectionSet",get:function(){return(1&this.updated)>0}},{key:"setStoredMarks",value:function(e){return this.storedMarks=e,this.updated|=2,this}},{key:"ensureMarks",value:function(e){return Q.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}},{key:"addStoredMark",value:function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}},{key:"removeStoredMark",value:function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}},{key:"storedMarksSet",get:function(){return(2&this.updated)>0}},{key:"addStep",value:function(e,n){rn(t,"addStep",this,3)([e,n]),this.updated=-3&this.updated,this.storedMarks=null}},{key:"setTime",value:function(e){return this.time=e,this}},{key:"replaceSelection",value:function(e){return this.selection.replace(this,e),this}},{key:"replaceSelectionWith",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Q.none))),n.replaceWith(this,e),this}},{key:"deleteSelection",value:function(){return this.selection.replace(this),this}},{key:"insertText",value:function(e,t,n){var r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(t);o=n==t?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,o)),this.selection.empty||this.setSelection(mn.near(this.selection.$to)),this}},{key:"setMeta",value:function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}},{key:"getMeta",value:function(e){return this.meta["string"==typeof e?e:e.key]}},{key:"isGeneric",get:function(){for(var e in this.meta)return!1;return!0}},{key:"scrollIntoView",value:function(){return this.updated|=4,this}},{key:"scrolledIntoView",get:function(){return(4&this.updated)>0}}])}(en);function Mn(e,t){return t&&e?e.bind(t):e}var An=fn((function e(t,n,r){un(this,e),this.name=t,this.init=Mn(n.init,r),this.apply=Mn(n.apply,r)})),On=[new An("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new An("selection",{init:function(e,t){return e.selection||mn.atStart(t.doc)},apply:function(e){return e.selection}}),new An("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new An("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],Tn=fn((function e(t,n){var r=this;un(this,e),this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=On.slice(),n&&n.forEach((function(e){if(r.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");r.plugins.push(e),r.pluginsByKey[e.key]=e,e.spec.state&&r.fields.push(new An(e.key,e.spec.state,e))}))})),jn=function(){function e(t){un(this,e),this.config=t}return fn(e,[{key:"schema",get:function(){return this.config.schema}},{key:"plugins",get:function(){return this.config.plugins}},{key:"apply",value:function(e){return this.applyTransaction(e).state}},{key:"filterTransaction",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=0;n<this.config.plugins.length;n++)if(n!=t){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0}},{key:"applyTransaction",value:function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var a=this.config.plugins[i];if(a.spec.appendTransaction){var s=r?r[i].n:0,l=r?r[i].state:this,c=s<t.length&&a.spec.appendTransaction.call(a,s?t.slice(s):t,l,n);if(c&&n.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<i?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),o=!0}r&&(r[i]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}}},{key:"applyInner",value:function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var n=new e(this.config),r=this.config.fields,o=0;o<r.length;o++){var i=r[o];n[i.name]=i.apply(t,this[i.name],this,n)}return n}},{key:"tr",get:function(){return new Dn(this)}},{key:"reconfigure",value:function(t){for(var n=new Tn(this.schema,t.plugins),r=n.fields,o=new e(n),i=0;i<r.length;i++){var a=r[i].name;o[a]=this.hasOwnProperty(a)?this[a]:r[i].init(t,o)}return o}},{key:"toJSON",value:function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==cn(e))for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=e[n],o=r.spec.state;o&&o.toJSON&&(t[n]=o.toJSON.call(r,this[r.key]))}return t}}],[{key:"create",value:function(t){for(var n=new Tn(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new e(n),o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(t,r);return r}},{key:"fromJSON",value:function(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var o=new Tn(t.schema,t.plugins),i=new e(o);return o.fields.forEach((function(e){if("doc"==e.name)i.doc=be.fromJSON(t.schema,n.doc);else if("selection"==e.name)i.selection=mn.fromJSON(i.doc,n.selection);else if("storedMarks"==e.name)n.storedMarks&&(i.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(var o in r){var a=r[o],s=a.spec.state;if(a.key==e.name&&s&&s.fromJSON&&Object.prototype.hasOwnProperty.call(n,o))return void(i[e.name]=s.fromJSON.call(a,t,n[o],i))}i[e.name]=e.init(t,i)}})),i}}])}();function Nn(e,t,n){for(var r in e){var o=e[r];o instanceof Function?o=o.bind(t):"handleDOMEvents"==r&&(o=Nn(o,t,{})),n[r]=o}return n}var Pn=function(){return fn((function e(t){un(this,e),this.spec=t,this.props={},t.props&&Nn(t.props,this,this.props),this.key=t.key?t.key.key:Rn("plugin")}),[{key:"getState",value:function(e){return e[this.key]}}])}(),Ln=Object.create(null);function Rn(e){return e in Ln?e+"$"+ ++Ln[e]:(Ln[e]=0,e+"$")}var In=function(){return fn((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"key";un(this,e),this.key=Rn(t)}),[{key:"get",value:function(e){return e.config.pluginsByKey[this.key]}},{key:"getState",value:function(e){return e[this.key]}}])}();function Bn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||Hn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Hn(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Hn(e,t){if(e){if("string"==typeof e)return zn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zn(e,t):void 0}}function zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Vn(e,t,n){return t=Wn(t),function(e,t){if(t&&("object"==Zn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,$n()?Reflect.construct(t,n||[],Wn(e).constructor):t.apply(e,n))}function $n(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($n=function(){return!!e})()}function Un(e,t,n,r){var o=Gn(Wn(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function Gn(){return Gn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Wn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Gn.apply(null,arguments)}function Wn(e){return Wn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wn(e)}function qn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kn(e,t)}function Kn(e,t){return Kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kn(e,t)}function Zn(e){return Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zn(e)}function Jn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qn(r.key),r)}}function Yn(e,t,n){return t&&Xn(e.prototype,t),n&&Xn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qn(e){var t=function(e){if("object"!=Zn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Zn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Zn(t)?t:t+""}var er=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},tr=function(e){var t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},nr=null,rr=function(e,t,n){var r=nr||(nr=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},or=function(e,t,n,r){return n&&(ar(e,t,n,r,-1)||ar(e,t,n,r,1))},ir=/^(img|br|input|textarea|hr)$/i;function ar(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:sr(e))){var i=e.parentNode;if(!i||1!=i.nodeType||lr(e)||ir.test(e.nodeName)||"false"==e.contentEditable)return!1;t=er(e)+(o<0?0:1),e=i}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(o<0?-1:0)]).contentEditable)return!1;t=o<0?sr(e):0}}}function sr(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function lr(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var cr=function(e){return e.focusNode&&or(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function ur(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}var dr="undefined"!=typeof navigator?navigator:null,fr="undefined"!=typeof document?document:null,pr=dr&&dr.userAgent||"",hr=/Edge\/(\d+)/.exec(pr),mr=/MSIE \d/.exec(pr),vr=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(pr),gr=!!(mr||vr||hr),yr=mr?document.documentMode:vr?+vr[1]:hr?+hr[1]:0,br=!gr&&/gecko\/(\d+)/i.test(pr);br&&(/Firefox\/(\d+)/.exec(pr)||[0,0])[1];var kr=!gr&&/Chrome\/(\d+)/.exec(pr),wr=!!kr,xr=kr?+kr[1]:0,Cr=!gr&&!!dr&&/Apple Computer/.test(dr.vendor),Sr=Cr&&(/Mobile\/\w+/.test(pr)||!!dr&&dr.maxTouchPoints>2),_r=Sr||!!dr&&/Mac/.test(dr.platform),Er=!!dr&&/Win/.test(dr.platform),Dr=/Android \d/.test(pr),Mr=!!fr&&"webkitFontSmoothing"in fr.documentElement.style,Ar=Mr?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Or(e){var t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Tr(e,t){return"number"==typeof e?e:e[t]}function jr(e){var t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function Nr(e,t,n){for(var r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument,a=n||e.dom;a;)if(1==a.nodeType){var s=a,l=s==i.body,c=l?Or(i):jr(s),u=0,d=0;if(t.top<c.top+Tr(r,"top")?d=-(c.top-t.top+Tr(o,"top")):t.bottom>c.bottom-Tr(r,"bottom")&&(d=t.bottom-t.top>c.bottom-c.top?t.top+Tr(o,"top")-c.top:t.bottom-c.bottom+Tr(o,"bottom")),t.left<c.left+Tr(r,"left")?u=-(c.left-t.left+Tr(o,"left")):t.right>c.right-Tr(r,"right")&&(u=t.right-c.right+Tr(o,"right")),u||d)if(l)i.defaultView.scrollBy(u,d);else{var f=s.scrollLeft,p=s.scrollTop;d&&(s.scrollTop+=d),u&&(s.scrollLeft+=u);var h=s.scrollLeft-f,m=s.scrollTop-p;t={left:t.left-h,top:t.top-m,right:t.right-h,bottom:t.bottom-m}}var v=l?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(v))break;a="absolute"==v?a.offsetParent:tr(a)}else a=tr(a)}function Pr(e){for(var t=[],n=e.ownerDocument,r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=tr(r));return t}function Lr(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=r.dom,i=r.top,a=r.left;o.scrollTop!=i+t&&(o.scrollTop=i+t),o.scrollLeft!=a&&(o.scrollLeft=a)}}var Rr=null;function Ir(e,t){for(var n,r,o,i,a=2e8,s=0,l=t.top,c=t.top,u=e.firstChild,d=0;u;u=u.nextSibling,d++){var f=void 0;if(1==u.nodeType)f=u.getClientRects();else{if(3!=u.nodeType)continue;f=rr(u).getClientRects()}for(var p=0;p<f.length;p++){var h=f[p];if(h.top<=l&&h.bottom>=c){l=Math.max(h.bottom,l),c=Math.min(h.top,c);var m=h.left>t.left?h.left-t.left:h.right<t.left?t.left-h.right:0;if(m<a){n=u,a=m,r=m&&3==n.nodeType?{left:h.right<t.left?h.right:h.left,top:t.top}:t,1==u.nodeType&&m&&(s=d+(t.left>=(h.left+h.right)/2?1:0));continue}}else h.top>t.top&&!o&&h.left<=t.left&&h.right>=t.left&&(o=u,i={left:Math.max(h.left,Math.min(h.right,t.left)),top:h.top});!n&&(t.left>=h.right&&t.top>=h.top||t.left>=h.left&&t.top>=h.bottom)&&(s=d+1)}}return!n&&o&&(n=o,r=i,a=0),n&&3==n.nodeType?function(e,t){for(var n=e.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);var i=Vr(r,1);if(i.top!=i.bottom&&Br(t,i))return{node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||a&&1==n.nodeType?{node:e,offset:s}:Ir(n,r)}function Br(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function Fr(e,t,n){var r=e.childNodes.length;if(r&&n.top<n.bottom)for(var o=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),i=o;;){var a=e.childNodes[i];if(1==a.nodeType)for(var s=a.getClientRects(),l=0;l<s.length;l++){var c=s[l];if(Br(t,c))return Fr(a,t,c)}if((i=(i+1)%r)==o)break}return e}function Hr(e,t){var n,r=e.dom.ownerDocument,o=0,i=function(e,t,n){if(e.caretPositionFromPoint)try{var r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(sr(r.offsetNode),r.offset)}}catch(e){}if(e.caretRangeFromPoint){var o=e.caretRangeFromPoint(t,n);if(o)return{node:o.startContainer,offset:Math.min(sr(o.startContainer),o.startOffset)}}}(r,t.left,t.top);i&&(n=i.node,o=i.offset);var a,s=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top);if(!s||!e.dom.contains(1!=s.nodeType?s.parentNode:s)){var l=e.dom.getBoundingClientRect();if(!Br(t,l))return null;if(!(s=Fr(e.dom,t,l)))return null}if(Cr)for(var c=s;n&&c;c=tr(c))c.draggable&&(n=void 0);if(s=function(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(s,t),n){if(br&&1==n.nodeType&&(o=Math.min(o,n.childNodes.length))<n.childNodes.length){var u,d=n.childNodes[o];"IMG"==d.nodeName&&(u=d.getBoundingClientRect()).right<=t.left&&u.bottom>t.top&&o++}var f;Mr&&o&&1==n.nodeType&&1==(f=n.childNodes[o-1]).nodeType&&"false"==f.contentEditable&&f.getBoundingClientRect().top>=t.top&&o--,n==e.dom&&o==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:0!=o&&1==n.nodeType&&"BR"==n.childNodes[o-1].nodeName||(a=function(e,t,n,r){for(var o=-1,i=t,a=!1;i!=e.dom;){var s=e.docView.nearestDesc(i,!0),l=void 0;if(!s)return null;if(1==s.dom.nodeType&&(s.node.isBlock&&s.parent||!s.contentDOM)&&((l=s.dom.getBoundingClientRect()).width||l.height)&&(s.node.isBlock&&s.parent&&(!a&&l.left>r.left||l.top>r.top?o=s.posBefore:(!a&&l.right<r.left||l.bottom<r.top)&&(o=s.posAfter),a=!0),!s.contentDOM&&o<0&&!s.node.isText))return(s.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?s.posBefore:s.posAfter;i=s.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n,-1)}(e,n,o,t))}null==a&&(a=function(e,t,n){var r=Ir(t,n),o=r.node,i=r.offset,a=-1;if(1==o.nodeType&&!o.firstChild){var s=o.getBoundingClientRect();a=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(o,i,a)}(e,s,t));var p=e.docView.nearestDesc(s,!0);return{pos:a,inside:p?p.posAtStart-p.border:-1}}function zr(e){return e.top<e.bottom||e.left<e.right}function Vr(e,t){var n=e.getClientRects();if(n.length){var r=n[t<0?0:n.length-1];if(zr(r))return r}return Array.prototype.find.call(n,zr)||e.getBoundingClientRect()}var $r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Ur(e,t,n){var r=e.docView.domFromPos(t,n<0?-1:1),o=r.node,i=r.offset,a=r.atom,s=Mr||br;if(3==o.nodeType){if(!s||!$r.test(o.nodeValue)&&(n<0?i:i!=o.nodeValue.length)){var l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==o.nodeValue.length?(l--,u=1):n<0?l--:c++,Gr(Vr(rr(o,l,c),u),u<0)}var d=Vr(rr(o,i,i),n);if(br&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){var f=Vr(rr(o,i-1,i-1),-1);if(f.top==d.top){var p=Vr(rr(o,i,i+1),-1);if(p.top!=d.top)return Gr(p,p.left<f.left)}}return d}if(!e.state.doc.resolve(t-(a||0)).parent.inlineContent){if(null==a&&i&&(n<0||i==sr(o))){var h=o.childNodes[i-1];if(1==h.nodeType)return Wr(h.getBoundingClientRect(),!1)}if(null==a&&i<sr(o)){var m=o.childNodes[i];if(1==m.nodeType)return Wr(m.getBoundingClientRect(),!0)}return Wr(o.getBoundingClientRect(),n>=0)}if(null==a&&i&&(n<0||i==sr(o))){var v=o.childNodes[i-1],g=3==v.nodeType?rr(v,sr(v)-(s?0:1)):1!=v.nodeType||"BR"==v.nodeName&&v.nextSibling?null:v;if(g)return Gr(Vr(g,1),!1)}if(null==a&&i<sr(o)){for(var y=o.childNodes[i];y.pmViewDesc&&y.pmViewDesc.ignoreForCoords;)y=y.nextSibling;var b=y?3==y.nodeType?rr(y,0,s?0:1):1==y.nodeType?y:null:null;if(b)return Gr(Vr(b,-1),!0)}return Gr(Vr(3==o.nodeType?rr(o):o,-n),n>=0)}function Gr(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function Wr(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function qr(e,t,n){var r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}var Kr=/[\u0590-\u08ac]/,Zr=null,Jr=null,Xr=!1;var Yr=function(){return Yn((function e(t,n,r,o){Jn(this,e),this.parent=t,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=0,r.pmViewDesc=this}),[{key:"matchesWidget",value:function(e){return!1}},{key:"matchesMark",value:function(e){return!1}},{key:"matchesNode",value:function(e,t,n){return!1}},{key:"matchesHack",value:function(e){return!1}},{key:"parseRule",value:function(){return null}},{key:"stopEvent",value:function(e){return!1}},{key:"size",get:function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e}},{key:"border",get:function(){return 0}},{key:"destroy",value:function(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(var e=0;e<this.children.length;e++)this.children[e].destroy()}},{key:"posBeforeChild",value:function(e){for(var t=0,n=this.posAtStart;;t++){var r=this.children[t];if(r==e)return n;n+=r.size}}},{key:"posBefore",get:function(){return this.parent.posBeforeChild(this)}},{key:"posAtStart",get:function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}},{key:"posAfter",get:function(){return this.posBefore+this.size}},{key:"posAtEnd",get:function(){return this.posAtStart+this.size-2*this.border}},{key:"localPosFromDOM",value:function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var r,o;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&(!(o=r.pmViewDesc)||o.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,a;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&(!(a=i.pmViewDesc)||a.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(a):this.posAtEnd}var s;if(e==this.dom&&this.contentDOM)s=t>er(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var l=e;;l=l.parentNode){if(l==this.dom){s=!1;break}if(l.previousSibling)break}if(null==s&&t==e.childNodes.length)for(var c=e;;c=c.parentNode){if(c==this.dom){s=!0;break}if(c.nextSibling)break}}return(null==s?n>0:s)?this.posAtEnd:this.posAtStart}},{key:"nearestDesc",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!0,r=e;r;r=r.parentNode){var o=this.getDesc(r),i=void 0;if(o&&(!t||o.node)){if(!n||!(i=o.nodeDOM)||(1==i.nodeType?i.contains(1==e.nodeType?e:e.parentNode):i==e))return o;n=!1}}}},{key:"getDesc",value:function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t}},{key:"posFromDOM",value:function(e,t,n){for(var r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}return-1}},{key:"descAt",value:function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],o=n+r.size;if(n==e&&o!=n){for(;!r.border&&r.children.length;)for(var i=0;i<r.children.length;i++){var a=r.children[i];if(a.size){r=a;break}}return r}if(e<o)return r.descAt(e-n-r.border);n=o}}},{key:"domFromPos",value:function(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};for(var n,r=0,o=0,i=0;r<this.children.length;r++){var a=this.children[r],s=i+a.size;if(s>e||a instanceof io){o=e-i;break}i=s}if(o)return this.children[r].domFromPos(o-this.children[r].border,t);for(;r&&!(n=this.children[r-1]).size&&n instanceof Qr&&n.side>=0;r--);if(t<=0){for(var l,c=!0;(l=r?this.children[r-1]:null)&&l.dom.parentNode!=this.contentDOM;r--,c=!1);return l&&t&&c&&!l.border&&!l.domAtom?l.domFromPos(l.size,t):{node:this.contentDOM,offset:l?er(l.dom)+1:0}}for(var u,d=!0;(u=r<this.children.length?this.children[r]:null)&&u.dom.parentNode!=this.contentDOM;r++,d=!1);return u&&d&&!u.border&&!u.domAtom?u.domFromPos(0,t):{node:this.contentDOM,offset:u?er(u.dom):this.contentDOM.childNodes.length}}},{key:"parseRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,a=0;;a++){var s=this.children[a],l=i+s.size;if(-1==r&&e<=l){var c=i+s.border;if(e>=c&&t<=l-s.border&&s.node&&s.contentDOM&&this.contentDOM.contains(s.contentDOM))return s.parseRange(e,t,c);e=i;for(var u=a;u>0;u--){var d=this.children[u-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){r=er(d.dom)+1;break}e-=d.size}-1==r&&(r=0)}if(r>-1&&(l>t||a==this.children.length-1)){t=l;for(var f=a+1;f<this.children.length;f++){var p=this.children[f];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){o=er(p.dom);break}t+=p.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=l}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}}},{key:"emptyChildAt",value:function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}},{key:"domAfterPos",value:function(e){var t=this.domFromPos(e,0),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}},{key:"setSelection",value:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=Math.min(e,t),i=Math.max(e,t),a=0,s=0;a<this.children.length;a++){var l=this.children[a],c=s+l.size;if(o>s&&i<c)return l.setSelection(e-s-l.border,t-s-l.border,n,r);s=c}var u=this.domFromPos(e,e?-1:1),d=t==e?u:this.domFromPos(t,t?-1:1),f=n.root.getSelection(),p=n.domSelectionRange(),h=!1;if((br||Cr)&&e==t){var m=u,v=m.node,g=m.offset;if(3==v.nodeType){if((h=!(!g||"\n"!=v.nodeValue[g-1]))&&g==v.nodeValue.length)for(var y,b=v;b;b=b.parentNode){if(y=b.nextSibling){"BR"==y.nodeName&&(u=d={node:y.parentNode,offset:er(y)+1});break}var k=b.pmViewDesc;if(k&&k.node&&k.node.isBlock)break}}else{var w=v.childNodes[g-1];h=w&&("BR"==w.nodeName||"false"==w.contentEditable)}}if(br&&p.focusNode&&p.focusNode!=d.node&&1==p.focusNode.nodeType){var x=p.focusNode.childNodes[p.focusOffset];x&&"false"==x.contentEditable&&(r=!0)}if(r||h&&Cr||!or(u.node,u.offset,p.anchorNode,p.anchorOffset)||!or(d.node,d.offset,p.focusNode,p.focusOffset)){var C=!1;if((f.extend||e==t)&&!h){f.collapse(u.node,u.offset);try{e!=t&&f.extend(d.node,d.offset),C=!0}catch(e){}}if(!C){if(e>t){var S=u;u=d,d=S}var _=document.createRange();_.setEnd(d.node,d.offset),_.setStart(u.node,u.offset),f.removeAllRanges(),f.addRange(_)}}}},{key:"ignoreMutation",value:function(e){return!this.contentDOM&&"selection"!=e.type}},{key:"contentLost",get:function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}},{key:"markDirty",value:function(e,t){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?e<=i&&t>=n:e<i&&t>n){var a=n+o.border,s=i-o.border;if(e>=a&&t<=s)return this.dirty=e==n||t==i?2:1,void(e!=a||t!=s||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(e-a,t-a):o.dirty=3);o.dirty=o.dom!=o.contentDOM||o.dom.parentNode!=this.contentDOM||o.children.length?3:2}n=i}this.dirty=2}},{key:"markParentsDirty",value:function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}},{key:"domAtom",get:function(){return!1}},{key:"ignoreForCoords",get:function(){return!1}},{key:"isText",value:function(e){return!1}}])}(),Qr=function(e){function t(e,n,r,o){var i;Jn(this,t);var a,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return a?a.parent?a.parent.posBeforeChild(a):void 0:o}))),!n.type.spec.raw){if(1!=s.nodeType){var l=document.createElement("span");l.appendChild(s),s=l}s.contentEditable="false",s.classList.add("ProseMirror-widget")}return(i=Vn(this,t,[e,[],s,null])).widget=n,i.widget=n,a=i,i}return qn(t,e),Yn(t,[{key:"matchesWidget",value:function(e){return 0==this.dirty&&e.type.eq(this.widget.type)}},{key:"parseRule",value:function(){return{ignore:!0}}},{key:"stopEvent",value:function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)}},{key:"ignoreMutation",value:function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}},{key:"destroy",value:function(){this.widget.type.destroy(this.dom),Un(t,"destroy",this,3)([])}},{key:"domAtom",get:function(){return!0}},{key:"side",get:function(){return this.widget.type.side}}])}(Yr),eo=function(e){function t(e,n,r,o){var i;return Jn(this,t),(i=Vn(this,t,[e,[],n,null])).textDOM=r,i.text=o,i}return qn(t,e),Yn(t,[{key:"size",get:function(){return this.text.length}},{key:"localPosFromDOM",value:function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}},{key:"domFromPos",value:function(e){return{node:this.textDOM,offset:e}}},{key:"ignoreMutation",value:function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}])}(Yr),to=function(e){function t(e,n,r,o,i){var a;return Jn(this,t),(a=Vn(this,t,[e,[],r,o])).mark=n,a.spec=i,a}return qn(t,e),Yn(t,[{key:"parseRule",value:function(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}},{key:"matchesMark",value:function(e){return 3!=this.dirty&&this.mark.eq(e)}},{key:"markDirty",value:function(e,n){if(Un(t,"markDirty",this,3)([e,n]),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}}},{key:"slice",value:function(e,n,r){var o=t.create(this.parent,this.mark,!0,r),i=this.children,a=this.size;n<a&&(i=bo(i,n,a,r)),e>0&&(i=bo(i,0,e,r));for(var s=0;s<i.length;s++)i[s].parent=o;return o.children=i,o}},{key:"ignoreMutation",value:function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):Un(t,"ignoreMutation",this,3)([e])}},{key:"destroy",value:function(){this.spec.destroy&&this.spec.destroy(),Un(t,"destroy",this,3)([])}}],[{key:"create",value:function(e,n,r,o){var i=o.nodeViews[n.type.name],a=i&&i(n,o,r);return a&&a.dom||(a=Xe.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new t(e,n,a.dom,a.contentDOM||a.dom,a)}}])}(Yr),no=function(e){function t(e,n,r,o,i,a,s,l,c){var u;return Jn(this,t),(u=Vn(this,t,[e,[],i,a])).node=n,u.outerDeco=r,u.innerDeco=o,u.nodeDOM=s,u}return qn(t,e),Yn(t,[{key:"parseRule",value:function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(t.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(var n=this.children.length-1;n>=0;n--){var r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=function(){return Z.empty})}else t.contentElement=this.contentDOM;else t.getContent=function(){return e.node.content};return t}},{key:"matchesNode",value:function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&mo(t,this.outerDeco)&&n.eq(this.innerDeco)}},{key:"size",get:function(){return this.node.nodeSize}},{key:"border",get:function(){return this.node.isLeaf?0:1}},{key:"updateChildren",value:function(e,t){var n=this,r=this.node.inlineContent,o=t,i=e.composing?this.localCompositionInfo(e,t):null,a=i&&i.pos>-1?i:null,s=i&&i.pos<0,l=new go(this,a&&a.node,e);!function(e,t,n,r){var o=t.locals(e),i=0;if(0!=o.length)for(var a=0,s=[],l=null,c=0;;){for(var u=void 0,d=void 0;a<o.length&&o[a].to==i;){var f=o[a++];f.widget&&(u?(d||(d=[u])).push(f):u=f)}if(u)if(d){d.sort(yo);for(var p=0;p<d.length;p++)n(d[p],c,!!l)}else n(u,c,!!l);var h=void 0,m=void 0;if(l)m=-1,h=l,l=null;else{if(!(c<e.childCount))break;m=c,h=e.child(c++)}for(var v=0;v<s.length;v++)s[v].to<=i&&s.splice(v--,1);for(;a<o.length&&o[a].from<=i&&o[a].to>i;)s.push(o[a++]);var g=i+h.nodeSize;if(h.isText){var y=g;a<o.length&&o[a].from<y&&(y=o[a].from);for(var b=0;b<s.length;b++)s[b].to<y&&(y=s[b].to);y<g&&(l=h.cut(y-i),h=h.cut(0,y-i),g=y,m=-1)}else for(;a<o.length&&o[a].to<g;)a++;r(h,h.isInline&&!h.isLeaf?s.filter((function(e){return!e.inline})):s.slice(),t.forChild(i,h),m),i=g}else for(var k=0;k<e.childCount;k++){var w=e.child(k);r(w,o,t.forChild(i,w),k),i+=w.nodeSize}}(this.node,this.innerDeco,(function(t,i,a){t.spec.marks?l.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!a&&l.syncToMarks(i==n.node.childCount?Q.none:n.node.child(i).marks,r,e),l.placeWidget(t,e,o)}),(function(t,n,a,c){var u;l.syncToMarks(t.marks,r,e),l.findNodeMatch(t,n,a,c)||s&&e.state.selection.from>o&&e.state.selection.to<o+t.nodeSize&&(u=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(t,n,a,u,e)||l.updateNextNode(t,n,a,e,c,o)||l.addNode(t,n,a,e,o),o+=t.nodeSize})),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||2==this.dirty)&&(a&&this.protectLocalComposition(e,a),so(this.contentDOM,this.children,e),Sr&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}},{key:"localCompositionInfo",value:function(e,t){var n=e.state.selection,r=n.from,o=n.to;if(!(e.state.selection instanceof bn)||r<t||o>t+this.node.content.size)return null;var i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){var a=i.nodeValue,s=function(e,t,n,r){for(var o=0,i=0;o<e.childCount&&i<=r;){var a=e.child(o++),s=i;if(i+=a.nodeSize,a.isText){for(var l=a.text;o<e.childCount;){var c=e.child(o++);if(i+=c.nodeSize,!c.isText)break;l+=c.text}if(i>=n){if(i>=r&&l.slice(r-t.length-s,r-s)==t)return r-t.length;var u=s<r?l.lastIndexOf(t,r-s-1):-1;if(u>=0&&u+t.length+s>=n)return s+u;if(n==r&&l.length>=r+t.length-s&&l.slice(r-s,r-s+t.length)==t)return r}}}return-1}(this.node.content,a,r-t,o-t);return s<0?null:{node:i,pos:s,text:a}}return{node:i,pos:-1,text:""}}},{key:"protectLocalComposition",value:function(e,t){var n=t.node,r=t.pos,o=t.text;if(!this.getDesc(n)){for(var i=n;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}var a=new eo(this,i,n,o);e.input.compositionNodes.push(a),this.children=bo(this.children,r,r+o.length,e,a)}}},{key:"update",value:function(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node)||(this.updateInner(e,t,n,r),0))}},{key:"updateInner",value:function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}},{key:"updateOuterDeco",value:function(e){if(!mo(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=fo(this.dom,this.nodeDOM,uo(this.outerDeco,this.node,t),uo(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}}},{key:"selectNode",value:function(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}},{key:"deselectNode",value:function(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable"))}},{key:"domAtom",get:function(){return this.node.isAtom}}],[{key:"create",value:function(e,n,r,o,i,a){var s,l=i.nodeViews[n.type.name],c=l&&l(n,i,(function(){return s?s.parent?s.parent.posBeforeChild(s):void 0:a}),r,o),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText)if(u){if(3!=u.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else u=document.createTextNode(n.text);else if(!u){var f=Xe.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs);u=f.dom,d=f.contentDOM}d||n.isText||"BR"==u.nodeName||(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));var p=u;return u=ho(u,r,n),c?s=new ao(e,n,r,o,u,d||null,p,c,i,a+1):n.isText?new oo(e,n,r,o,u,p,i):new t(e,n,r,o,u,d||null,p,i,a+1)}}])}(Yr);function ro(e,t,n,r,o){ho(r,t,e);var i=new no(void 0,e,t,n,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}var oo=function(e){function t(e,n,r,o,i,a,s){return Jn(this,t),Vn(this,t,[e,n,r,o,i,null,a,s,0])}return qn(t,e),Yn(t,[{key:"parseRule",value:function(){for(var e=this.nodeDOM.parentNode;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}},{key:"update",value:function(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node)||(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,0))}},{key:"inParent",value:function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}},{key:"domFromPos",value:function(e){return{node:this.nodeDOM,offset:e}}},{key:"localPosFromDOM",value:function(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):Un(t,"localPosFromDOM",this,3)([e,n,r])}},{key:"ignoreMutation",value:function(e){return"characterData"!=e.type&&"selection"!=e.type}},{key:"slice",value:function(e,n,r){var o=this.node.cut(e,n),i=document.createTextNode(o.text);return new t(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)}},{key:"markDirty",value:function(e,n){Un(t,"markDirty",this,3)([e,n]),this.dom==this.nodeDOM||0!=e&&n!=this.nodeDOM.nodeValue.length||(this.dirty=3)}},{key:"domAtom",get:function(){return!1}},{key:"isText",value:function(e){return this.node.text==e}}])}(no),io=function(e){function t(){return Jn(this,t),Vn(this,t,arguments)}return qn(t,e),Yn(t,[{key:"parseRule",value:function(){return{ignore:!0}}},{key:"matchesHack",value:function(e){return 0==this.dirty&&this.dom.nodeName==e}},{key:"domAtom",get:function(){return!0}},{key:"ignoreForCoords",get:function(){return"IMG"==this.dom.nodeName}}])}(Yr),ao=function(e){function t(e,n,r,o,i,a,s,l,c,u){var d;return Jn(this,t),(d=Vn(this,t,[e,n,r,o,i,a,s,c,u])).spec=l,d}return qn(t,e),Yn(t,[{key:"update",value:function(e,n,r,o){if(3==this.dirty)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){var i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,o),i}return!(!this.contentDOM&&!e.isLeaf)&&Un(t,"update",this,3)([e,n,r,o])}},{key:"selectNode",value:function(){this.spec.selectNode?this.spec.selectNode():Un(t,"selectNode",this,3)([])}},{key:"deselectNode",value:function(){this.spec.deselectNode?this.spec.deselectNode():Un(t,"deselectNode",this,3)([])}},{key:"setSelection",value:function(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r.root):Un(t,"setSelection",this,3)([e,n,r,o])}},{key:"destroy",value:function(){this.spec.destroy&&this.spec.destroy(),Un(t,"destroy",this,3)([])}},{key:"stopEvent",value:function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}},{key:"ignoreMutation",value:function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):Un(t,"ignoreMutation",this,3)([e])}}])}(no);function so(e,t,n){for(var r=e.firstChild,o=!1,i=0;i<t.length;i++){var a=t[i],s=a.dom;if(s.parentNode==e){for(;s!=r;)r=vo(r),o=!0;r=r.nextSibling}else o=!0,e.insertBefore(s,r);if(a instanceof to){var l=r?r.previousSibling:e.lastChild;so(a.contentDOM,a.children,n),r=l?l.nextSibling:e.firstChild}}for(;r;)r=vo(r),o=!0;o&&n.trackWrites==e&&(n.trackWrites=null)}var lo=function(e){e&&(this.nodeName=e)};lo.prototype=Object.create(null);var co=[new lo];function uo(e,t,n){if(0==e.length)return co;for(var r=n?co[0]:new lo,o=[r],i=0;i<e.length;i++){var a=e[i].type.attrs;if(a)for(var s in a.nodeName&&o.push(r=new lo(a.nodeName)),a){var l=a[s];null!=l&&(n&&1==o.length&&o.push(r=new lo(t.isInline?"span":"div")),"class"==s?r.class=(r.class?r.class+" ":"")+l:"style"==s?r.style=(r.style?r.style+";":"")+l:"nodeName"!=s&&(r[s]=l))}}return o}function fo(e,t,n,r){if(n==co&&r==co)return t;for(var o=t,i=0;i<r.length;i++){var a=r[i],s=n[i];if(i){var l=void 0;s&&s.nodeName==a.nodeName&&o!=e&&(l=o.parentNode)&&l.nodeName.toLowerCase()==a.nodeName||((l=document.createElement(a.nodeName)).pmIsDeco=!0,l.appendChild(o),s=co[0]),o=l}po(o,s||co[0],a)}return o}function po(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t.class!=n.class){for(var i=t.class?t.class.split(" ").filter(Boolean):[],a=n.class?n.class.split(" ").filter(Boolean):[],s=0;s<i.length;s++)-1==a.indexOf(i[s])&&e.classList.remove(i[s]);for(var l=0;l<a.length;l++)-1==i.indexOf(a[l])&&e.classList.add(a[l]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style)for(var c,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;c=u.exec(t.style);)e.style.removeProperty(c[1]);n.style&&(e.style.cssText+=n.style)}}function ho(e,t,n){return fo(e,e,co,uo(t,n,1!=e.nodeType))}function mo(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function vo(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var go=function(){return Yn((function e(t,n,r){Jn(this,e),this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=function(e,t){var n=t,r=n.children.length,o=e.childCount,i=new Map,a=[];e:for(;o>0;){for(var s=void 0;;)if(r){var l=n.children[r-1];if(!(l instanceof to)){s=l,r--;break}n=l,r=l.children.length}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}var c=s.node;if(c){if(c!=e.child(o-1))break;--o,i.set(s,o),a.push(s)}}return{index:o,matched:i,matches:a.reverse()}}(t.node.content,t)}),[{key:"destroyBetween",value:function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}},{key:"destroyRest",value:function(){this.destroyBetween(this.index,this.top.children.length)}},{key:"syncToMarks",value:function(e,t,n){for(var r=0,o=this.stack.length>>1,i=Math.min(o,e.length);r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);for(var a=-1,s=this.index;s<Math.min(this.index+3,this.top.children.length);s++){var l=this.top.children[s];if(l.matchesMark(e[o])&&!this.isLocked(l.dom)){a=s;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{var c=to.create(this.top,e[o],t,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}}},{key:"findNodeMatch",value:function(e,t,n,r){var o,i=-1;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,n))i=this.top.children.indexOf(o,this.index);else for(var a=this.index,s=Math.min(this.top.children.length,a+5);a<s;a++){var l=this.top.children[a];if(l.matchesNode(e,t,n)&&!this.preMatch.matched.has(l)){i=a;break}}return!(i<0||(this.destroyBetween(this.index,i),this.index++,0))}},{key:"updateNodeAt",value:function(e,t,n,r,o){var i=this.top.children[r];return 3==i.dirty&&i.dom==i.contentDOM&&(i.dirty=2),!!i.update(e,t,n,o)&&(this.destroyBetween(this.index,r),this.index++,!0)}},{key:"findIndexWithChild",value:function(e){for(;;){var t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){var n=e.pmViewDesc;if(n)for(var r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==n)return r;return-1}e=t}}},{key:"updateNextNode",value:function(e,t,n,r,o,i){for(var a=this.index;a<this.top.children.length;a++){var s=this.top.children[a];if(s instanceof no){var l=this.preMatch.matched.get(s);if(null!=l&&l!=o)return!1;var c=s.dom,u=void 0,d=this.isLocked(c)&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&3!=s.dirty&&mo(t,s.outerDeco));if(!d&&s.update(e,t,n,r))return this.destroyBetween(this.index,a),s.dom!=c&&(this.changed=!0),this.index++,!0;if(!d&&(u=this.recreateWrapper(s,e,t,n,r,i)))return this.destroyBetween(this.index,a),this.top.children[this.index]=u,u.contentDOM&&(u.dirty=2,u.updateChildren(r,i+1),u.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}},{key:"recreateWrapper",value:function(e,t,n,r,o,i){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!mo(n,e.outerDeco)||!r.eq(e.innerDeco))return null;var a=no.create(this.top,t,n,r,o,i);if(a.contentDOM){a.children=e.children,e.children=[];var s,l=Fn(a.children);try{for(l.s();!(s=l.n()).done;)s.value.parent=a}catch(e){l.e(e)}finally{l.f()}}return e.destroy(),a}},{key:"addNode",value:function(e,t,n,r,o){var i=no.create(this.top,e,t,n,r,o);i.contentDOM&&i.updateChildren(r,o+1),this.top.children.splice(this.index++,0,i),this.changed=!0}},{key:"placeWidget",value:function(e,t,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){var o=new Qr(this.top,e,t,n);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++}},{key:"addTextblockHacks",value:function(){for(var e=this.top.children[this.index-1],t=this.top;e instanceof to;)e=(t=e).children[t.children.length-1];(!e||!(e instanceof oo)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Cr||wr)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}},{key:"addHackNode",value:function(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{var n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");var r=new io(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}},{key:"isLocked",value:function(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}])}();function yo(e,t){return e.type.side-t.type.side}function bo(e,t,n,r,o){for(var i=[],a=0,s=0;a<e.length;a++){var l=e[a],c=s,u=s+=l.size;c>=n||u<=t?i.push(l):(c<t&&i.push(l.slice(0,t-c,r)),o&&(i.push(o),o=void 0),u>n&&i.push(l.slice(n-c,l.size,r)))}return i}function ko(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;var o=e.docView.nearestDesc(n.focusNode),i=o&&0==o.size,a=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;var s,l,c=r.resolve(a);if(cr(n)){for(s=a;o&&!o.node;)o=o.parent;var u=o.node;if(o&&u.isAtom&&wn.isSelectable(u)&&o.parent&&(!u.isInline||!function(e,t,n){for(var r=0==t,o=t==sr(e);r||o;){if(e==n)return!0;var i=er(e);if(!(e=e.parentNode))return!1;r=r&&0==i,o=o&&i==sr(e)}}(n.focusNode,n.focusOffset,o.dom))){var d=o.posBefore;l=new wn(a==d?c:r.resolve(d))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){for(var f=a,p=a,h=0;h<n.rangeCount;h++){var m=n.getRangeAt(h);f=Math.min(f,e.docView.posFromDOM(m.startContainer,m.startOffset,1)),p=Math.max(p,e.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(f<0)return null;var v=Bn(p==e.state.selection.anchor?[p,f]:[f,p],2);s=v[0],a=v[1],c=r.resolve(a)}else s=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(s<0)return null}var g=r.resolve(s);return l||(l=Ao(e,g,c,"pointer"==t||e.state.selection.head<c.pos&&!i?1:-1)),l}function wo(e){return e.editable?e.hasFocus():To(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function xo(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.state.selection;if(Do(e,n),wo(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&wr){var r=e.domSelectionRange(),o=e.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&or(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.domSelection(),n=document.createRange();if(t){var r=e.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setStart(r.parentNode,er(r)+1):n.setStart(r,0),n.collapse(!0),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&gr&&yr<=11&&(r.disabled=!0,r.disabled=!1)}}(e);else{var i,a,s=n.anchor,l=n.head;!Co||n instanceof bn||(n.$from.parent.inlineContent||(i=So(e,n.from)),n.empty||n.$from.parent.inlineContent||(a=So(e,n.to))),e.docView.setSelection(s,l,e,t),Co&&(i&&Eo(i),a&&Eo(a)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);var n=e.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout((function(){wo(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}var Co=Cr||wr&&xr<63;function So(e,t){var n=e.docView.domFromPos(t,0),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,a=o?r.childNodes[o-1]:null;if(Cr&&i&&"false"==i.contentEditable)return _o(i);if(!(i&&"false"!=i.contentEditable||a&&"false"!=a.contentEditable)){if(i)return _o(i);if(a)return _o(a)}}function _o(e){return e.contentEditable="true",Cr&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Eo(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Do(e,t){if(t instanceof wn){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(Mo(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else Mo(e)}function Mo(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function Ao(e,t,n,r){return e.someProp("createSelectionBetween",(function(r){return r(e,t,n)}))||bn.between(t,n,r)}function Oo(e){return!(e.editable&&!e.hasFocus())&&To(e)}function To(e){var t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function jo(e,t){var n=e.selection,r=n.$anchor,o=n.$head,i=t>0?r.max(o):r.min(o),a=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return a&&mn.findFrom(a,t)}function No(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Po(e,t,n){var r=e.state.selection;if(!(r instanceof bn)){if(r instanceof wn&&r.node.isInline)return No(e,new bn(t>0?r.$to:r.$from));var o=jo(e.state,t);return!!o&&No(e,o)}if(n.indexOf("s")>-1){var i=r.$head,a=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;var s=e.state.doc.resolve(i.pos+a.nodeSize*(t<0?-1:1));return No(e,new bn(r.$anchor,s))}if(!r.empty)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){var l=jo(e.state,t);return!!(l&&l instanceof wn)&&No(e,l)}if(!(_r&&n.indexOf("m")>-1)){var c,u=r.$head,d=u.textOffset?null:t<0?u.nodeBefore:u.nodeAfter;if(!d||d.isText)return!1;var f=t<0?u.pos-d.nodeSize:u.pos;return!!(d.isAtom||(c=e.docView.descAt(f))&&!c.contentDOM)&&(wn.isSelectable(d)?No(e,new wn(t<0?e.state.doc.resolve(u.pos-d.nodeSize):u)):!!Mr&&No(e,new bn(e.state.doc.resolve(t<0?f:f+d.nodeSize))))}}function Lo(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Ro(e,t){var n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function Io(e,t){return t<0?function(e){var t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(n){var o,i,a=!1;for(br&&1==n.nodeType&&r<Lo(n)&&Ro(n.childNodes[r],-1)&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;var s=n.childNodes[r-1];if(Ro(s,-1))o=n,i=--r;else{if(3!=s.nodeType)break;r=(n=s).nodeValue.length}}else{if(Bo(n))break;for(var l=n.previousSibling;l&&Ro(l,-1);)o=n.parentNode,i=er(l),l=l.previousSibling;if(l)r=Lo(n=l);else{if((n=n.parentNode)==e.dom)break;r=0}}a?Fo(e,n,r):o&&Fo(e,o,i)}}(e):function(e){var t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(n){for(var o,i,a=Lo(n);;)if(r<a){if(1!=n.nodeType)break;if(!Ro(n.childNodes[r],1))break;o=n,i=++r}else{if(Bo(n))break;for(var s=n.nextSibling;s&&Ro(s,1);)o=s.parentNode,i=er(s)+1,s=s.nextSibling;if(s)r=0,a=Lo(n=s);else{if((n=n.parentNode)==e.dom)break;r=a=0}}o&&Fo(e,o,i)}}(e)}function Bo(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Fo(e,t,n){var r,o;3!=t.nodeType&&((o=function(e,t){for(;e&&t==e.childNodes.length&&!lr(e);)t=er(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){var n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}(t,n))?(t=o,n=0):(r=function(e,t){for(;e&&!t&&!lr(e);)t=er(e),e=e.parentNode;for(;e&&t;){var n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=(e=n).childNodes.length}}(t,n))&&(t=r,n=r.nodeValue.length));var i=e.domSelection();if(i){if(cr(i)){var a=document.createRange();a.setEnd(t,n),a.setStart(t,n),i.removeAllRanges(),i.addRange(a)}else i.extend&&i.extend(t,n);e.domObserver.setCurSelection();var s=e.state;setTimeout((function(){e.state==s&&xo(e)}),50)}}function Ho(e,t){var n=e.state.doc.resolve(t);if(!wr&&!Er&&n.parent.inlineContent){var r=e.coordsAtPos(t);if(t>n.start()){var o=e.coordsAtPos(t-1),i=(o.top+o.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(o.left-r.left)>1)return o.left<r.left?"ltr":"rtl"}if(t<n.end()){var a=e.coordsAtPos(t+1),s=(a.top+a.bottom)/2;if(s>r.top&&s<r.bottom&&Math.abs(a.left-r.left)>1)return a.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function zo(e,t,n){var r=e.state.selection;if(r instanceof bn&&!r.empty||n.indexOf("s")>-1)return!1;if(_r&&n.indexOf("m")>-1)return!1;var o=r.$from,i=r.$to;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var a=jo(e.state,t);if(a&&a instanceof wn)return No(e,a)}if(!o.parent.inlineContent){var s=t<0?o:i,l=r instanceof Cn?mn.near(s,t):mn.findFrom(s,t);return!!l&&No(e,l)}return!1}function Vo(e,t){if(!(e.state.selection instanceof bn))return!0;var n=e.state.selection,r=n.$head,o=n.$anchor,i=n.empty;if(!r.sameParent(o))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var a=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){var s=e.state.tr;return t<0?s.delete(r.pos-a.nodeSize,r.pos):s.delete(r.pos,r.pos+a.nodeSize),e.dispatch(s),!0}return!1}function $o(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Uo(e,t){e.someProp("transformCopied",(function(n){t=n(t,e)}));for(var n=[],r=t,o=r.content,i=r.openStart,a=r.openEnd;i>1&&a>1&&1==o.childCount&&1==o.firstChild.childCount;){i--,a--;var s=o.firstChild;n.push(s.type.name,s.attrs!=s.type.defaultAttrs?s.attrs:null),o=s.content}var l=e.someProp("clipboardSerializer")||Xe.fromSchema(e.state.schema),c=ei(),u=c.createElement("div");u.appendChild(l.serializeFragment(o,{document:c}));for(var d,f=u.firstChild,p=0;f&&1==f.nodeType&&(d=Yo[f.nodeName.toLowerCase()]);){for(var h=d.length-1;h>=0;h--){for(var m=c.createElement(d[h]);u.firstChild;)m.appendChild(u.firstChild);u.appendChild(m),p++}f=u.firstChild}return f&&1==f.nodeType&&f.setAttribute("data-pm-slice","".concat(i," ").concat(a).concat(p?" -".concat(p):""," ").concat(JSON.stringify(n))),{dom:u,text:e.someProp("clipboardTextSerializer",(function(n){return n(t,e)}))||t.content.textBetween(0,t.content.size,"\n\n"),slice:t}}function Go(e,t,n,r,o){var i,a,s=o.parent.type.spec.code;if(!n&&!t)return null;var l=t&&(r||s||!n);if(l){if(e.someProp("transformPastedText",(function(n){t=n(t,s||r,e)})),s)return t?new te(Z.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):te.empty;var c=e.someProp("clipboardTextParser",(function(n){return n(t,o,r,e)}));if(c)a=c;else{var u=o.marks(),d=e.state.schema,f=Xe.fromSchema(d);i=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach((function(e){var t=i.appendChild(document.createElement("p"));e&&t.appendChild(f.serializeNode(d.text(e,u)))}))}}else e.someProp("transformPastedHTML",(function(t){n=t(n,e)})),i=function(e){var t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=ei().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(e);if((n=o&&Yo[o[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join("")),r.innerHTML=function(e){var t=window.trustedTypes;return t?(ti||(ti=t.createPolicy("ProseMirrorClipboard",{createHTML:function(e){return e}})),ti.createHTML(e)):e}(e),n)for(var i=0;i<n.length;i++)r=r.querySelector(n[i])||r;return r}(n),Mr&&function(e){for(var t=e.querySelectorAll(wr?"span:not([class]):not([style])":"span.Apple-converted-space"),n=0;n<t.length;n++){var r=t[n];1==r.childNodes.length&&" "==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(i);var p=i&&i.querySelector("[data-pm-slice]"),h=p&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(p.getAttribute("data-pm-slice")||"");if(h&&h[3])for(var m=+h[3];m>0;m--){for(var v=i.firstChild;v&&1!=v.nodeType;)v=v.nextSibling;if(!v)break;i=v}if(!a){var g=e.someProp("clipboardParser")||e.someProp("domParser")||ze.fromSchema(e.state.schema);a=g.parseSlice(i,{preserveWhitespace:!(!l&&!h),context:o,ruleFromNode:function(e){return"BR"!=e.nodeName||e.nextSibling||!e.parentNode||Wo.test(e.parentNode.nodeName)?null:{ignore:!0}}})}if(h)a=function(e,t){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}for(var o=e.content,i=e.openStart,a=e.openEnd,s=n.length-2;s>=0;s-=2){var l=r.nodes[n[s]];if(!l||l.hasRequiredAttrs())break;o=Z.from(l.create(n[s+1],o)),i++,a++}return new te(o,i,a)}(Xo(a,+h[1],+h[2]),h[4]);else if(a=te.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n,r=function(){var n,r=t.node(o).contentMatchAt(t.index(o)),i=[];if(e.forEach((function(e){if(i){var t,o=r.findWrapping(e.type);if(!o)return i=null;if(t=i.length&&n.length&&Ko(o,n,e,i[i.length-1],0))i[i.length-1]=t;else{i.length&&(i[i.length-1]=Zo(i[i.length-1],n.length));var a=qo(e,o);i.push(a),r=r.matchType(a.type),n=o}}})),i)return{v:Z.from(i)}},o=t.depth;o>=0;o--)if(n=r())return n.v;return e}(a.content,o),!0),a.openStart||a.openEnd){for(var y=0,b=0,k=a.content.firstChild;y<a.openStart&&!k.type.spec.isolating;y++,k=k.firstChild);for(var w=a.content.lastChild;b<a.openEnd&&!w.type.spec.isolating;b++,w=w.lastChild);a=Xo(a,y,b)}return e.someProp("transformPasted",(function(t){a=t(a,e)})),a}var Wo=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function qo(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.length-1;r>=n;r--)e=t[r].create(null,Z.from(e));return e}function Ko(e,t,n,r,o){if(o<e.length&&o<t.length&&e[o]==t[o]){var i=Ko(e,t,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==e.length-1?n.type:e[o+1]))return r.copy(r.content.append(Z.from(qo(n,e,o+1))))}}function Zo(e,t){if(0==t)return e;var n=e.content.replaceChild(e.childCount-1,Zo(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(Z.empty,!0);return e.copy(n.append(r))}function Jo(e,t,n,r,o,i){var a=t<0?e.firstChild:e.lastChild,s=a.content;return e.childCount>1&&(i=0),o<r-1&&(s=Jo(s,t,n,r,o+1,i)),o>=n&&(s=t<0?a.contentMatchAt(0).fillBefore(s,i<=o).append(s):s.append(a.contentMatchAt(a.childCount).fillBefore(Z.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(s))}function Xo(e,t,n){return t<e.openStart&&(e=new te(Jo(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new te(Jo(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}var Yo={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Qo=null;function ei(){return Qo||(Qo=document.implementation.createHTMLDocument("title"))}var ti=null,ni={},ri={},oi={touchstart:!0,touchmove:!0},ii=Yn((function e(){Jn(this,e),this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}));function ai(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function si(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=function(t){return li(e,t)})}))}function li(e,t){return e.someProp("handleDOMEvents",(function(n){var r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function ci(e){return{left:e.clientX,top:e.clientY}}function ui(e,t,n,r,o){if(-1==r)return!1;for(var i,a=e.state.doc.resolve(r),s=function(r){if(e.someProp(t,(function(t){return r>a.depth?t(e,n,a.nodeAfter,a.before(r),o,!0):t(e,n,a.node(r),a.before(r),o,!1)})))return{v:!0}},l=a.depth+1;l>0;l--)if(i=s(l))return i.v;return!1}function di(e,t,n){if(e.focused||e.focus(),!e.state.selection.eq(t)){var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}}function fi(e,t,n,r){return ui(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(function(n){return n(e,t,r)}))}function pi(e,t,n,r){return ui(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(function(n){return n(e,t,r)}))||function(e,t,n){if(0!=n.button)return!1;var r=e.state.doc;if(-1==t)return!!r.inlineContent&&(di(e,bn.create(r,0,r.content.size),"pointer"),!0);for(var o=r.resolve(t),i=o.depth+1;i>0;i--){var a=i>o.depth?o.nodeAfter:o.node(i),s=o.before(i);if(a.inlineContent)di(e,bn.create(r,s+1,s+1+a.content.size),"pointer");else{if(!wn.isSelectable(a))continue;di(e,wn.create(r,s),"pointer")}return!0}}(e,n,r)}function hi(e){return wi(e)}ri.keydown=function(e,t){var n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!gi(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!Dr||!wr||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!Sr||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",(function(t){return t(e,n)}))||function(e,t){var n=t.keyCode,r=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);if(8==n||_r&&72==n&&"c"==r)return Vo(e,-1)||Io(e,-1);if(46==n&&!t.shiftKey||_r&&68==n&&"c"==r)return Vo(e,1)||Io(e,1);if(13==n||27==n)return!0;if(37==n||_r&&66==n&&"c"==r){var o=37==n?"ltr"==Ho(e,e.state.selection.from)?-1:1:-1;return Po(e,o,r)||Io(e,o)}if(39==n||_r&&70==n&&"c"==r){var i=39==n?"ltr"==Ho(e,e.state.selection.from)?1:-1:1;return Po(e,i,r)||Io(e,i)}return 38==n||_r&&80==n&&"c"==r?zo(e,-1,r)||Io(e,-1):40==n||_r&&78==n&&"c"==r?function(e){if(!Cr||e.state.selection.$head.parentOffset>0)return!1;var t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;$o(e,o,"true"),setTimeout((function(){return $o(e,o,"false")}),20)}return!1}(e)||zo(e,1,r)||Io(e,1):r==(_r?"m":"c")&&(66==n||73==n||89==n||90==n)}(e,n)?n.preventDefault():ai(e,"key");else{var r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout((function(){e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",(function(t){return t(e,ur(13,"Enter"))})),e.input.lastIOSEnter=0)}),200)}},ri.keyup=function(e,t){16==t.keyCode&&(e.input.shiftKey=!1)},ri.keypress=function(e,t){var n=t;if(!(gi(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||_r&&n.metaKey))if(e.someProp("handleKeyPress",(function(t){return t(e,n)})))n.preventDefault();else{var r=e.state.selection;if(!(r instanceof bn&&r.$from.sameParent(r.$to))){var o=String.fromCharCode(n.charCode);/[\r\n]/.test(o)||e.someProp("handleTextInput",(function(t){return t(e,r.$from.pos,r.$to.pos,o)}))||e.dispatch(e.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}}};var mi=_r?"metaKey":"ctrlKey";ni.mousedown=function(e,t){var n=t;e.input.shiftKey=n.shiftKey;var r=hi(e),o=Date.now(),i="singleClick";o-e.input.lastClick.time<500&&function(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(n,e.input.lastClick)&&!n[mi]&&("singleClick"==e.input.lastClick.type?i="doubleClick":"doubleClick"==e.input.lastClick.type&&(i="tripleClick")),e.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i};var a=e.posAtCoords(ci(n));a&&("singleClick"==i?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new vi(e,a,n,!!r)):("doubleClick"==i?fi:pi)(e,a.pos,a.inside,n)?n.preventDefault():ai(e,"pointer"))};var vi=function(){return Yn((function e(t,n,r,o){var i,a,s=this;if(Jn(this,e),this.view=t,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[mi],this.allowDefault=r.shiftKey,n.inside>-1)i=t.state.doc.nodeAt(n.inside),a=n.inside;else{var l=t.state.doc.resolve(n.pos);i=l.parent,a=l.depth?l.before():0}var c=o?null:r.target,u=c?t.docView.nearestDesc(c,!0):null;this.target=u&&1==u.dom.nodeType?u.dom:null;var d=t.state.selection;(0==r.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||d instanceof wn&&d.from<=a&&d.to>a)&&(this.mightDrag={node:i,pos:a,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!br||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){s.view.input.mouseDown==s&&s.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),ai(t,"pointer")}),[{key:"done",value:function(){var e=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((function(){return xo(e.view)})),this.view.input.mouseDown=null}},{key:"up",value:function(e){if(this.done(),this.view.dom.contains(e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(ci(e))),this.updateAllowDefault(e),this.allowDefault||!t?ai(this.view,"pointer"):function(e,t,n,r,o){return ui(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(function(n){return n(e,t,r)}))||(o?function(e,t){if(-1==t)return!1;var n,r,o=e.state.selection;o instanceof wn&&(n=o.node);for(var i=e.state.doc.resolve(t),a=i.depth+1;a>0;a--){var s=a>i.depth?i.nodeAfter:i.node(a);if(wn.isSelectable(s)){r=n&&o.$from.depth>0&&a>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(a);break}}return null!=r&&(di(e,wn.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&wn.isSelectable(r))&&(di(e,new wn(n),"pointer"),!0)}(e,n))}(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||Cr&&this.mightDrag&&!this.mightDrag.node.isAtom||wr&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(di(this.view,mn.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):ai(this.view,"pointer")}}},{key:"move",value:function(e){this.updateAllowDefault(e),ai(this.view,"pointer"),0==e.buttons&&this.done()}},{key:"updateAllowDefault",value:function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}])}();function gi(e,t){return!!e.composing||!!(Cr&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}ni.touchstart=function(e){e.input.lastTouch=Date.now(),hi(e),ai(e,"pointer")},ni.touchmove=function(e){e.input.lastTouch=Date.now(),ai(e,"pointer")},ni.contextmenu=function(e){return hi(e)};var yi=Dr?5e3:-1;function bi(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout((function(){return wi(e)}),t))}function ki(e){var t;for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=((t=document.createEvent("Event")).initEvent("event",!0,!0),t.timeStamp));e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function wi(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(Dr&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),ki(e),t||e.docView&&e.docView.dirty){var n=ko(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):!e.markCursor&&!t||e.state.selection.empty?e.updateState(e.state):e.dispatch(e.state.tr.deleteSelection()),!0}return!1}}ri.compositionstart=ri.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$to;if(t.selection instanceof bn&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),wi(e,!0),e.markCursor=null;else if(wi(e,!t.selection.empty),br&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.domSelectionRange(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var a=i<0?o.lastChild:o.childNodes[i-1];if(!a)break;if(3==a.nodeType){var s=e.domSelection();s&&s.collapse(a,a.nodeValue.length);break}o=a,i=-1}e.input.composing=!0}bi(e,yi)},ri.compositionend=function(e,t){e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then((function(){return e.domObserver.flush()})),e.input.compositionID++,bi(e,20))};var xi=gr&&yr<15||Sr&&Ar<604;function Ci(e,t,n,r,o){var i=Go(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",(function(t){return t(e,o,i||te.empty)})))return!0;if(!i)return!1;var a=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(i),s=a?e.state.tr.replaceSelectionWith(a,r):e.state.tr.replaceSelection(i);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Si(e){var t=e.getData("text/plain")||e.getData("Text");if(t)return t;var n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}ni.copy=ri.cut=function(e,t){var n=t,r=e.state.selection,o="cut"==n.type;if(!r.empty){var i=xi?null:n.clipboardData,a=Uo(e,r.content()),s=a.dom,l=a.text;i?(n.preventDefault(),i.clearData(),i.setData("text/html",s.innerHTML),i.setData("text/plain",l)):function(e,t){if(e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}}(e,s),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},ri.paste=function(e,t){var n=t;if(!e.composing||Dr){var r=xi?null:n.clipboardData,o=e.input.shiftKey&&45!=e.input.lastKeyCode;r&&Ci(e,Si(r),r.getData("text/html"),o,n)?n.preventDefault():function(e,t){if(e.dom.parentNode){var n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();var o=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout((function(){e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Ci(e,r.value,null,o,t):Ci(e,r.textContent,r.innerHTML,o,t)}),50)}}(e,n)}};var _i=Yn((function e(t,n,r){Jn(this,e),this.slice=t,this.move=n,this.node=r})),Ei=_r?"altKey":"ctrlKey";for(var Di in ni.dragstart=function(e,t){var n=t,r=e.input.mouseDown;if(r&&r.done(),n.dataTransfer){var o,i=e.state.selection,a=i.empty?null:e.posAtCoords(ci(n));if(a&&a.pos>=i.from&&a.pos<=(i instanceof wn?i.to-1:i.to));else if(r&&r.mightDrag)o=wn.create(e.state.doc,r.mightDrag.pos);else if(n.target&&1==n.target.nodeType){var s=e.docView.nearestDesc(n.target,!0);s&&s.node.type.spec.draggable&&s!=e.docView&&(o=wn.create(e.state.doc,s.posBefore))}var l=Uo(e,(o||e.state.selection).content()),c=l.dom,u=l.text,d=l.slice;(!n.dataTransfer.files.length||!wr||xr>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(xi?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",xi||n.dataTransfer.setData("text/plain",u),e.dragging=new _i(d,!n[Ei],o)}},ni.dragend=function(e){var t=e.dragging;window.setTimeout((function(){e.dragging==t&&(e.dragging=null)}),50)},ri.dragover=ri.dragenter=function(e,t){return t.preventDefault()},ri.drop=function(e,t){var n=t,r=e.dragging;if(e.dragging=null,n.dataTransfer){var o=e.posAtCoords(ci(n));if(o){var i=e.state.doc.resolve(o.pos),a=r&&r.slice;a?e.someProp("transformPasted",(function(t){a=t(a,e)})):a=Go(e,Si(n.dataTransfer),xi?null:n.dataTransfer.getData("text/html"),!1,i);var s=!(!r||n[Ei]);if(e.someProp("handleDrop",(function(t){return t(e,n,a||te.empty,s)})))n.preventDefault();else if(a){n.preventDefault();var l=a?Ht(e.state.doc,i.pos,a):i.pos;null==l&&(l=i.pos);var c=e.state.tr;if(s){var u=r.node;u?u.replace(c):c.deleteSelection()}var d=c.mapping.map(l),f=0==a.openStart&&0==a.openEnd&&1==a.content.childCount,p=c.doc;if(f?c.replaceRangeWith(d,d,a.content.firstChild):c.replaceRange(d,d,a),!c.doc.eq(p)){var h=c.doc.resolve(d);if(f&&wn.isSelectable(a.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(a.content.firstChild))c.setSelection(new wn(h));else{var m=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((function(e,t,n,r){return m=r})),c.setSelection(Ao(e,h,c.doc.resolve(m)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))}}}}},ni.focus=function(e){e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&xo(e)}),20))},ni.blur=function(e,t){var n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},ni.beforeinput=function(e,t){if(wr&&Dr&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();var n=e.input.domChangeCount;setTimeout((function(){if(e.input.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,ur(8,"Backspace"))})))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}}),50)}},ri)ni[Di]=ri[Di];function Mi(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var Ai=function(){function e(t,n){Jn(this,e),this.toDOM=t,this.spec=n||Pi,this.side=this.spec.side||0}return Yn(e,[{key:"map",value:function(e,t,n,r){var o=e.mapResult(t.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new ji(i-n,i-n,this)}},{key:"valid",value:function(){return!0}},{key:"eq",value:function(t){return this==t||t instanceof e&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Mi(this.spec,t.spec))}},{key:"destroy",value:function(e){this.spec.destroy&&this.spec.destroy(e)}}])}(),Oi=function(){function e(t,n){Jn(this,e),this.attrs=t,this.spec=n||Pi}return Yn(e,[{key:"map",value:function(e,t,n,r){var o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new ji(o,i,this)}},{key:"valid",value:function(e,t){return t.from<t.to}},{key:"eq",value:function(t){return this==t||t instanceof e&&Mi(this.attrs,t.attrs)&&Mi(this.spec,t.spec)}},{key:"destroy",value:function(){}}],[{key:"is",value:function(t){return t.type instanceof e}}])}(),Ti=function(){function e(t,n){Jn(this,e),this.attrs=t,this.spec=n||Pi}return Yn(e,[{key:"map",value:function(e,t,n,r){var o=e.mapResult(t.from+r,1);if(o.deleted)return null;var i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new ji(o.pos-n,i.pos-n,this)}},{key:"valid",value:function(e,t){var n,r=e.content.findIndex(t.from),o=r.index,i=r.offset;return i==t.from&&!(n=e.child(o)).isText&&i+n.nodeSize==t.to}},{key:"eq",value:function(t){return this==t||t instanceof e&&Mi(this.attrs,t.attrs)&&Mi(this.spec,t.spec)}},{key:"destroy",value:function(){}}])}(),ji=function(){function e(t,n,r){Jn(this,e),this.from=t,this.to=n,this.type=r}return Yn(e,[{key:"copy",value:function(t,n){return new e(t,n,this.type)}},{key:"eq",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}},{key:"map",value:function(e,t,n){return this.type.map(e,this,t,n)}},{key:"spec",get:function(){return this.type.spec}},{key:"inline",get:function(){return this.type instanceof Oi}},{key:"widget",get:function(){return this.type instanceof Ai}}],[{key:"widget",value:function(t,n,r){return new e(t,t,new Ai(n,r))}},{key:"inline",value:function(t,n,r,o){return new e(t,n,new Oi(r,o))}},{key:"node",value:function(t,n,r,o){return new e(t,n,new Ti(r,o))}}])}(),Ni=[],Pi={},Li=function(){function e(t,n){Jn(this,e),this.local=t.length?t:Ni,this.children=n.length?n:Ni}return Yn(e,[{key:"find",value:function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}},{key:"findInner",value:function(e,t,n,r,o){for(var i=0;i<this.local.length;i++){var a=this.local[i];a.from<=t&&a.to>=e&&(!o||o(a.spec))&&n.push(a.copy(a.from+r,a.to+r))}for(var s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){var l=this.children[s]+1;this.children[s+2].findInner(e-l,t-l,n,r+l,o)}}},{key:"map",value:function(e,t,n){return this==Ri||0==e.maps.length?this:this.mapInner(e,t,0,0,n||Pi)}},{key:"mapInner",value:function(t,n,r,o,i){for(var a,s=0;s<this.local.length;s++){var l=this.local[s].map(t,r,o);l&&l.type.valid(n,l)?(a||(a=[])).push(l):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?Bi(this.children,a||[],t,n,r,o,i):a?new e(a.sort($i),Ni):Ri}},{key:"add",value:function(t,n){return n.length?this==Ri?e.create(t,n):this.addInner(t,n,0):this}},{key:"addInner",value:function(t,n,r){var o,i=this,a=0;t.forEach((function(e,t){var s,l=t+r;if(s=Hi(n,e,l)){for(o||(o=i.children.slice());a<o.length&&o[a]<t;)a+=3;o[a]==t?o[a+2]=o[a+2].addInner(e,s,l+1):o.splice(a,0,t,t+e.nodeSize,Vi(s,e,l+1,Pi)),a+=3}}));for(var s=Fi(a?zi(n):n,-r),l=0;l<s.length;l++)s[l].type.valid(t,s[l])||s.splice(l--,1);return new e(s.length?this.local.concat(s).sort($i):this.local,o||this.children)}},{key:"remove",value:function(e){return 0==e.length||this==Ri?this:this.removeInner(e,0)}},{key:"removeInner",value:function(t,n){for(var r=this.children,o=this.local,i=0;i<r.length;i+=3){for(var a,s=void 0,l=r[i]+n,c=r[i+1]+n,u=0;u<t.length;u++)(a=t[u])&&a.from>l&&a.to<c&&(t[u]=null,(s||(s=[])).push(a));if(s){r==this.children&&(r=this.children.slice());var d=r[i+2].removeInner(s,l+1);d!=Ri?r[i+2]=d:(r.splice(i,3),i-=3)}}if(o.length)for(var f,p=0;p<t.length;p++)if(f=t[p])for(var h=0;h<o.length;h++)o[h].eq(f,n)&&(o==this.local&&(o=this.local.slice()),o.splice(h--,1));return r==this.children&&o==this.local?this:o.length||r.length?new e(o,r):Ri}},{key:"forChild",value:function(t,n){if(this==Ri)return this;if(n.isLeaf)return e.empty;for(var r,o,i=0;i<this.children.length;i+=3)if(this.children[i]>=t){this.children[i]==t&&(r=this.children[i+2]);break}for(var a=t+1,s=a+n.content.size,l=0;l<this.local.length;l++){var c=this.local[l];if(c.from<s&&c.to>a&&c.type instanceof Oi){var u=Math.max(a,c.from)-a,d=Math.min(s,c.to)-a;u<d&&(o||(o=[])).push(c.copy(u,d))}}if(o){var f=new e(o.sort($i),Ni);return r?new Ii([f,r]):f}return r||Ri}},{key:"eq",value:function(t){if(this==t)return!0;if(!(t instanceof e)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(var r=0;r<this.children.length;r+=3)if(this.children[r]!=t.children[r]||this.children[r+1]!=t.children[r+1]||!this.children[r+2].eq(t.children[r+2]))return!1;return!0}},{key:"locals",value:function(e){return Ui(this.localsInner(e))}},{key:"localsInner",value:function(e){if(this==Ri)return Ni;if(e.inlineContent||!this.local.some(Oi.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Oi||t.push(this.local[n]);return t}},{key:"forEachSet",value:function(e){e(this)}}],[{key:"create",value:function(e,t){return t.length?Vi(t,e,0,Pi):Ri}}])}();Li.empty=new Li([],[]),Li.removeOverlap=Ui;var Ri=Li.empty,Ii=function(){function e(t){Jn(this,e),this.members=t}return Yn(e,[{key:"map",value:function(t,n){var r=this.members.map((function(e){return e.map(t,n,Pi)}));return e.from(r)}},{key:"forChild",value:function(t,n){if(n.isLeaf)return Li.empty;for(var r=[],o=0;o<this.members.length;o++){var i=this.members[o].forChild(t,n);i!=Ri&&(i instanceof e?r=r.concat(i.members):r.push(i))}return e.from(r)}},{key:"eq",value:function(t){if(!(t instanceof e)||t.members.length!=this.members.length)return!1;for(var n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}},{key:"locals",value:function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(var i=0;i<o.length;i++)t.push(o[i])}else t=o}return t?Ui(n?t:t.sort($i)):Ni}},{key:"forEachSet",value:function(e){for(var t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}],[{key:"from",value:function(t){switch(t.length){case 0:return Ri;case 1:return t[0];default:return new e(t.every((function(e){return e instanceof Li}))?t:t.reduce((function(e,t){return e.concat(t instanceof Li?t:t.members)}),[]))}}}])}();function Bi(e,t,n,r,o,i,a){for(var s=e.slice(),l=function(e){var t=0;n.maps[c].forEach((function(n,r,o,i){for(var a=i-o-(r-n),l=0;l<s.length;l+=3){var c=s[l+1];if(!(c<0||n>c+e-t)){var u=s[l]+e-t;r>=u?s[l+1]=n<=u?-2:-1:n>=e&&a&&(s[l]+=a,s[l+1]+=a)}}t+=a})),e=n.maps[c].map(e,-1),u=e},c=0,u=i;c<n.maps.length;c++)l(u);for(var d=!1,f=0;f<s.length;f+=3)if(s[f+1]<0){if(-2==s[f+1]){d=!0,s[f+1]=-1;continue}var p=n.map(e[f]+i),h=p-o;if(h<0||h>=r.content.size){d=!0;continue}var m=n.map(e[f+1]+i,-1)-o,v=r.content.findIndex(h),g=v.index,y=v.offset,b=r.maybeChild(g);if(b&&y==h&&y+b.nodeSize==m){var k=s[f+2].mapInner(n,b,p+1,e[f]+i+1,a);k!=Ri?(s[f]=h,s[f+1]=m,s[f+2]=k):(s[f+1]=-2,d=!0)}else d=!0}if(d){var w=function(e,t,n,r,o,i,a){function s(e,t){for(var i=0;i<e.local.length;i++){var l=e.local[i].map(r,o,t);l?n.push(l):a.onRemove&&a.onRemove(e.local[i].spec)}for(var c=0;c<e.children.length;c+=3)s(e.children[c+2],e.children[c]+t+1)}for(var l=0;l<e.length;l+=3)-1==e[l+1]&&s(e[l+2],t[l]+i+1);return n}(s,e,t,n,o,i,a),x=Vi(w,r,0,a);t=x.local;for(var C=0;C<s.length;C+=3)s[C+1]<0&&(s.splice(C,3),C-=3);for(var S=0,_=0;S<x.children.length;S+=3){for(var E=x.children[S];_<s.length&&s[_]<E;)_+=3;s.splice(_,0,x.children[S],x.children[S+1],x.children[S+2])}}return new Li(t.sort($i),s)}function Fi(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(new ji(o.from+t,o.to+t,o.type))}return n}function Hi(e,t,n){if(t.isLeaf)return null;for(var r,o=n+t.nodeSize,i=null,a=0;a<e.length;a++)(r=e[a])&&r.from>n&&r.to<o&&((i||(i=[])).push(r),e[a]=null);return i}function zi(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Vi(e,t,n,r){var o=[],i=!1;t.forEach((function(t,a){var s=Hi(e,t,a+n);if(s){i=!0;var l=Vi(s,t,n+a+1,r);l!=Ri&&o.push(a,a+t.nodeSize,l)}}));for(var a=Fi(i?zi(e):e,-n).sort($i),s=0;s<a.length;s++)a[s].type.valid(t,a[s])||(r.onRemove&&r.onRemove(a[s].spec),a.splice(s--,1));return a.length||o.length?new Li(a,o):Ri}function $i(e,t){return e.from-t.from||e.to-t.to}function Ui(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var o=n+1;o<t.length;o++){var i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),Gi(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),Gi(t,o+1,i.copy(r.to,i.to)))}}return t}function Gi(e,t,n){for(;t<e.length&&$i(n,e[t])>0;)t++;e.splice(t,0,n)}function Wi(e){var t=[];return e.someProp("decorations",(function(n){var r=n(e.state);r&&r!=Ri&&t.push(r)})),e.cursorWrapper&&t.push(Li.create(e.state.doc,[e.cursorWrapper.deco])),Ii.from(t)}var qi={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Ki=gr&&yr<=11,Zi=function(){return Yn((function e(){Jn(this,e),this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}),[{key:"set",value:function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}},{key:"clear",value:function(){this.anchorNode=this.focusNode=null}},{key:"eq",value:function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}])}(),Ji=function(){return Yn((function e(t,n){var r=this;Jn(this,e),this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Zi,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)r.queue.push(e[t]);gr&&yr<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?r.flushSoon():r.flush()})),Ki&&(this.onCharData=function(e){r.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),r.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}),[{key:"flushSoon",value:function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){e.flushingSoon=-1,e.flush()}),20))}},{key:"forceFlush",value:function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}},{key:"start",value:function(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,qi)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}},{key:"stop",value:function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}},{key:"connectSelection",value:function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}},{key:"disconnectSelection",value:function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}},{key:"suppressSelectionUpdates",value:function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)}},{key:"onSelectionChange",value:function(){if(Oo(this.view)){if(this.suppressingSelectionUpdates)return xo(this.view);if(gr&&yr<=11&&!this.view.state.selection.empty){var e=this.view.domSelectionRange();if(e.focusNode&&or(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}},{key:"setCurSelection",value:function(){this.currentSelection.set(this.view.domSelectionRange())}},{key:"ignoreSelectionChange",value:function(e){if(!e.focusNode)return!0;for(var t,n=new Set,r=e.focusNode;r;r=tr(r))n.add(r);for(var o=e.anchorNode;o;o=tr(o))if(n.has(o)){t=o;break}var i=t&&this.view.docView.nearestDesc(t);return i&&i.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}},{key:"pendingRecords",value:function(){if(this.observer){var e,t=Fn(this.observer.takeRecords());try{for(t.s();!(e=t.n()).done;){var n=e.value;this.queue.push(n)}}catch(e){t.e(e)}finally{t.f()}}return this.queue}},{key:"flush",value:function(){var e=this.view;if(e.docView&&!(this.flushingSoon>-1)){var t=this.pendingRecords();t.length&&(this.queue=[]);var n=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&Oo(e)&&!this.ignoreSelectionChange(n),o=-1,i=-1,a=!1,s=[];if(e.editable)for(var l=0;l<t.length;l++){var c=this.registerMutation(t[l],s);c&&(o=o<0?c.from:Math.min(c.from,o),i=i<0?c.to:Math.max(c.to,i),c.typeOver&&(a=!0))}if(br&&s.length){var u=s.filter((function(e){return"BR"==e.nodeName}));if(2==u.length){var d=Bn(u,2),f=d[0],p=d[1];f.parentNode&&f.parentNode.parentNode==p.parentNode?p.remove():f.remove()}else{var h,m=this.currentSelection.focusNode,v=Fn(u);try{for(v.s();!(h=v.n()).done;){var g=h.value,y=g.parentNode;!y||"LI"!=y.nodeName||m&&ea(e,m)==y||g.remove()}}catch(e){v.e(e)}finally{v.f()}}}var b=null;o<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&cr(n)&&(b=ko(e))&&b.eq(mn.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,xo(e),this.currentSelection.set(n),e.scrollToSelection()):(o>-1||r)&&(o>-1&&(e.docView.markDirty(o,i),function(e){if(!Xi.has(e)&&(Xi.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace))){if(e.requiresGeckoHackNode=br,Yi)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Yi=!0}}(e)),this.handleDOMChange(o,i,a,s),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||xo(e),this.currentSelection.set(n))}}},{key:"registerMutation",value:function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(var r=0;r<e.addedNodes.length;r++){var o=e.addedNodes[r];t.push(o),3==o.nodeType&&(this.lastChangedTextNode=o)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};var i=e.previousSibling,a=e.nextSibling;if(gr&&yr<=11&&e.addedNodes.length)for(var s=0;s<e.addedNodes.length;s++){var l=e.addedNodes[s],c=l.previousSibling,u=l.nextSibling;(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(i=c),(!u||Array.prototype.indexOf.call(e.addedNodes,u)<0)&&(a=u)}var d=i&&i.parentNode==e.target?er(i)+1:0,f=n.localPosFromDOM(e.target,d,-1),p=a&&a.parentNode==e.target?er(a):e.target.childNodes.length;return{from:f,to:n.localPosFromDOM(e.target,p,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}])}(),Xi=new WeakMap,Yi=!1;function Qi(e,t){var n=t.startContainer,r=t.startOffset,o=t.endContainer,i=t.endOffset,a=e.domAtPos(e.state.selection.anchor);if(or(a.node,a.offset,o,i)){var s=[o,i,n,r];n=s[0],r=s[1],o=s[2],i=s[3]}return{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:i}}function ea(e,t){for(var n=t.parentNode;n&&n!=e.dom;n=n.parentNode){var r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function ta(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(Cr&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||Cr&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}var na=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function ra(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:Ao(e,t.resolve(n.anchor),t.resolve(n.head))}function oa(e,t,n){for(var r=e.depth,o=t?e.end():e.pos;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n)for(var i=e.node(r).maybeChild(e.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function ia(e){if(2!=e.length)return!1;var t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}var aa=function(){return Yn((function e(t,n){var r=this;Jn(this,e),this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new ii,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(da),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):"function"==typeof t?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=ca(this),la(this),this.nodeViews=ua(this),this.docView=ro(this.state.doc,sa(this),Wi(this),this.dom,this),this.domObserver=new Ji(this,(function(e,t,n,o){return function(e,t,n,r,o){var i=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){var a=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,s=ko(e,a);if(s&&!e.state.selection.eq(s)){if(wr&&Dr&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",(function(t){return t(e,ur(13,"Enter"))})))return;var l=e.state.tr.setSelection(s);"pointer"==a?l.setMeta("pointer",!0):"key"==a&&l.scrollIntoView(),i&&l.setMeta("composition",i),e.dispatch(l)}}else{var c=e.state.doc.resolve(t),u=c.sharedDepth(n);t=c.before(u+1),n=e.state.doc.resolve(n).after(u+1);var d,f,p=e.state.selection,h=function(e,t,n){var r,o=e.docView.parseRange(t,n),i=o.node,a=o.fromOffset,s=o.toOffset,l=o.from,c=o.to,u=e.domSelectionRange(),d=u.anchorNode;if(d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(r=[{node:d,offset:u.anchorOffset}],cr(u)||r.push({node:u.focusNode,offset:u.focusOffset})),wr&&8===e.input.lastKeyCode)for(var f=s;f>a;f--){var p=i.childNodes[f-1],h=p.pmViewDesc;if("BR"==p.nodeName&&!h){s=f;break}if(!h||h.size)break}var m=e.state.doc,v=e.someProp("domParser")||ze.fromSchema(e.state.schema),g=m.resolve(l),y=null,b=v.parse(i,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:a,to:s,preserveWhitespace:"pre"!=g.parent.type.whitespace||"full",findPositions:r,ruleFromNode:ta,context:g});if(r&&null!=r[0].pos){var k=r[0].pos,w=r[1]&&r[1].pos;null==w&&(w=k),y={anchor:k+l,head:w+l}}return{doc:b,sel:y,from:l,to:c}}(e,t,n),m=e.state.doc,v=m.slice(h.from,h.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(d=e.state.selection.to,f="end"):(d=e.state.selection.from,f="start"),e.input.lastKeyCode=null;var g=function(e,t,n,r,o){var i=e.findDiffStart(t,n);if(null==i)return null;var a=e.findDiffEnd(t,n+e.size,n+t.size),s=a.a,l=a.b;if("end"==o&&(r-=s+Math.max(0,i-Math.min(s,l))-i),s<i&&e.size<t.size){var c=r<=i&&r>=s?i-r:0;(i-=c)&&i<t.size&&ia(t.textBetween(i-1,i+1))&&(i+=c?1:-1),l=i+(l-s),s=i}else if(l<i){var u=r<=i&&r>=l?i-r:0;(i-=u)&&i<e.size&&ia(e.textBetween(i-1,i+1))&&(i+=u?1:-1),s=i+(s-l),l=i}return{start:i,endA:s,endB:l}}(v.content,h.doc.content,h.from,d,f);if(g&&e.input.domChangeCount++,(Sr&&e.input.lastIOSEnter>Date.now()-225||Dr)&&o.some((function(e){return 1==e.nodeType&&!na.test(e.nodeName)}))&&(!g||g.endA>=g.endB)&&e.someProp("handleKeyDown",(function(t){return t(e,ur(13,"Enter"))})))e.input.lastIOSEnter=0;else{if(!g){if(!(r&&p instanceof bn&&!p.empty&&p.$head.sameParent(p.$anchor))||e.composing||h.sel&&h.sel.anchor!=h.sel.head){if(h.sel){var y=ra(e,e.state.doc,h.sel);if(y&&!y.eq(e.state.selection)){var b=e.state.tr.setSelection(y);i&&b.setMeta("composition",i),e.dispatch(b)}}return}g={start:p.from,endA:p.to,endB:p.to}}e.state.selection.from<e.state.selection.to&&g.start==g.endB&&e.state.selection instanceof bn&&(g.start>e.state.selection.from&&g.start<=e.state.selection.from+2&&e.state.selection.from>=h.from?g.start=e.state.selection.from:g.endA<e.state.selection.to&&g.endA>=e.state.selection.to-2&&e.state.selection.to<=h.to&&(g.endB+=e.state.selection.to-g.endA,g.endA=e.state.selection.to)),gr&&yr<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>h.from&&"  "==h.doc.textBetween(g.start-h.from-1,g.start-h.from+1)&&(g.start--,g.endA--,g.endB--);var k,w=h.doc.resolveNoCache(g.start-h.from),x=h.doc.resolveNoCache(g.endB-h.from),C=m.resolve(g.start),S=w.sameParent(x)&&w.parent.inlineContent&&C.end()>=g.endA;if((Sr&&e.input.lastIOSEnter>Date.now()-225&&(!S||o.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName})))||!S&&w.pos<h.doc.content.size&&!w.sameParent(x)&&(k=mn.findFrom(h.doc.resolve(w.pos+1),1,!0))&&k.head==x.pos)&&e.someProp("handleKeyDown",(function(t){return t(e,ur(13,"Enter"))})))e.input.lastIOSEnter=0;else if(e.state.selection.anchor>g.start&&function(e,t,n,r,o){if(n-t<=o.pos-r.pos||oa(r,!0,!1)<o.pos)return!1;var i=e.resolve(t);if(!r.parent.isTextblock){var a=i.nodeAfter;return null!=a&&n==t+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=e.resolve(oa(i,!0,!0));return!(!s.parent.isTextblock||s.pos>n||oa(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(m,g.start,g.endA,w,x)&&e.someProp("handleKeyDown",(function(t){return t(e,ur(8,"Backspace"))})))Dr&&wr&&e.domObserver.suppressSelectionUpdates();else{wr&&g.endB==g.start&&(e.input.lastChromeDelete=Date.now()),Dr&&!S&&w.start()!=x.start()&&0==x.parentOffset&&w.depth==x.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==g.endA&&(g.endB-=2,x=h.doc.resolveNoCache(g.endB-h.from),setTimeout((function(){e.someProp("handleKeyDown",(function(t){return t(e,ur(13,"Enter"))}))}),20));var _,E,D,M=g.start,A=g.endA;if(S)if(w.pos==x.pos)gr&&yr<=11&&0==w.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return xo(e)}),20)),_=e.state.tr.delete(M,A),E=m.resolve(g.start).marksAcross(m.resolve(g.endA));else if(g.endA==g.endB&&(D=function(e,t){for(var n,r,o,i=e.firstChild.marks,a=t.firstChild.marks,s=i,l=a,c=0;c<a.length;c++)s=a[c].removeFromSet(s);for(var u=0;u<i.length;u++)l=i[u].removeFromSet(l);if(1==s.length&&0==l.length)r=s[0],n="add",o=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=s.length||1!=l.length)return null;r=l[0],n="remove",o=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var d=[],f=0;f<t.childCount;f++)d.push(o(t.child(f)));if(Z.from(d).eq(e))return{mark:r,type:n}}(w.parent.content.cut(w.parentOffset,x.parentOffset),C.parent.content.cut(C.parentOffset,g.endA-C.start()))))_=e.state.tr,"add"==D.type?_.addMark(M,A,D.mark):_.removeMark(M,A,D.mark);else if(w.parent.child(w.index()).isText&&w.index()==x.index()-(x.textOffset?0:1)){var O=w.parent.textBetween(w.parentOffset,x.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,M,A,O)})))return;_=e.state.tr.insertText(O,M,A)}if(_||(_=e.state.tr.replace(M,A,h.doc.slice(g.start-h.from,g.endB-h.from))),h.sel){var T=ra(e,_.doc,h.sel);T&&!(wr&&e.composing&&T.empty&&(g.start!=g.endB||e.input.lastChromeDelete<Date.now()-100)&&(T.head==M||T.head==_.mapping.map(A)-1)||gr&&T.empty&&T.head==M)&&_.setSelection(T)}E&&_.ensureMarks(E),i&&_.setMeta("composition",i),e.dispatch(_.scrollIntoView())}}}}(r,e,t,n,o)})),this.domObserver.start(),function(e){var t=function(){var t=ni[n];e.dom.addEventListener(n,e.input.eventHandlers[n]=function(n){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,n)||li(e,n)||!e.editable&&n.type in ri||t(e,n)},oi[n]?{passive:!0}:void 0)};for(var n in ni)t();Cr&&e.dom.addEventListener("input",(function(){return null})),si(e)}(this),this.updatePluginViews()}),[{key:"composing",get:function(){return this.input.composing}},{key:"props",get:function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props}},{key:"update",value:function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&si(this);var t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(da),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}},{key:"setProps",value:function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)}},{key:"updateState",value:function(e){this.updateStateInner(e,this._props)}},{key:"updateStateInner",value:function(e,t){var n,r=this.state,o=!1,i=!1;e.storedMarks&&this.composing&&(ki(this),i=!0),this.state=e;var a=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){var s=ua(this);(function(e,t){var n=0,r=0;for(var o in e){if(e[o]!=t[o])return!0;n++}for(var i in t)r++;return n!=r})(s,this.nodeViews)&&(this.nodeViews=s,o=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&si(this),this.editable=ca(this),la(this);var l=Wi(this),c=sa(this),u=r.plugins==e.plugins||r.doc.eq(e.doc)?e.scrollToSelection>r.scrollToSelection?"to selection":"preserve":"reset",d=o||!this.docView.matchesNode(e.doc,c,l);!d&&e.selection.eq(r.selection)||(i=!0);var f,p,h,m,v,g,y,b,k,w,x="preserve"==u&&i&&null==this.dom.style.overflowAnchor&&function(e){for(var t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,a=o+1;a<Math.min(innerHeight,r.bottom);a+=5){var s=e.root.elementFromPoint(i,a);if(s&&s!=e.dom&&e.dom.contains(s)){var l=s.getBoundingClientRect();if(l.top>=o-20){t=s,n=l.top;break}}}return{refDOM:t,refTop:n,stack:Pr(e.dom)}}(this);if(i){this.domObserver.stop();var C=d&&(gr||wr)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&(m=r.selection,v=e.selection,g=Math.min(m.$anchor.sharedDepth(m.head),v.$anchor.sharedDepth(v.head)),m.$anchor.start(g)!=v.$anchor.start(g));if(d){var S=wr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=function(e){var t=e.domSelectionRange();if(!t.focusNode)return null;var n=function(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=sr(e=e.childNodes[t-1])}else{if(!e.parentNode||lr(e))return null;t=er(e),e=e.parentNode}}}(t.focusNode,t.focusOffset),r=function(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||lr(e))return null;t=er(e)+1,e=e.parentNode}}}(t.focusNode,t.focusOffset);if(n&&r&&n!=r){var o=r.pmViewDesc,i=e.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!o||!o.isText(r.nodeValue))return r;if(e.input.compositionNode==r){var a=n.pmViewDesc;if(a&&a.isText(n.nodeValue))return r}}return n||r}(this)),!o&&this.docView.update(e.doc,c,l,this)||(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=ro(e.doc,c,l,this.dom,this)),S&&!this.trackWrites&&(C=!0)}C||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&(f=this,p=f.docView.domFromPos(f.state.selection.anchor,0),h=f.domSelectionRange(),or(p.node,p.offset,h.anchorNode,h.anchorOffset)))?xo(this,C):(Do(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),(null===(n=this.dragging)||void 0===n?void 0:n.node)&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),"reset"==u?this.dom.scrollTop=0:"to selection"==u?this.scrollToSelection():x&&(b=(y=x).refDOM,k=y.refTop,Lr(y.stack,0==(w=b?b.getBoundingClientRect().top:0)?0:w-k))}},{key:"scrollToSelection",value:function(){var e=this,t=this.domSelectionRange().focusNode;if(t&&this.dom.contains(1==t.nodeType?t:t.parentNode))if(this.someProp("handleScrollToSelection",(function(t){return t(e)})));else if(this.state.selection instanceof wn){var n=this.docView.domAfterPos(this.state.selection.from);1==n.nodeType&&Nr(this,n.getBoundingClientRect(),t)}else Nr(this,this.coordsAtPos(this.state.selection.head,1),t)}},{key:"destroyPluginViews",value:function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()}},{key:"updatePluginViews",value:function(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var r=0;r<this.directPlugins.length;r++){var o=this.directPlugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}for(var i=0;i<this.state.plugins.length;i++){var a=this.state.plugins[i];a.spec.view&&this.pluginViews.push(a.spec.view(this))}}}},{key:"updateDraggedNode",value:function(e,t){var n=e.node,r=-1;if(this.state.doc.nodeAt(n.from)==n.node)r=n.from;else{var o=n.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==n.node&&(r=o)}this.dragging=new _i(e.slice,e.move,r<0?void 0:wn.create(this.state.doc,r))}},{key:"someProp",value:function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(var o=0;o<this.directPlugins.length;o++){var i=this.directPlugins[o].props[e];if(null!=i&&(n=t?t(i):i))return n}var a=this.state.plugins;if(a)for(var s=0;s<a.length;s++){var l=a[s].props[e];if(null!=l&&(n=t?t(l):l))return n}}},{key:"hasFocus",value:function(){if(gr){var e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}},{key:"focus",value:function(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(Rr)return e.focus(Rr);var t=Pr(e);e.focus(null==Rr?{get preventScroll(){return Rr={preventScroll:!0},!0}}:void 0),Rr||(Rr=!1,Lr(t,0))}(this.dom),xo(this),this.domObserver.start()}},{key:"root",get:function(){var e=this,t=this._root;if(null==t)for(var n,r=function(t){if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return t.ownerDocument.getSelection()}),{v:e._root=t}},o=this.dom.parentNode;o;o=o.parentNode)if(n=r(o))return n.v;return t||document}},{key:"updateRoot",value:function(){this._root=null}},{key:"posAtCoords",value:function(e){return Hr(this,e)}},{key:"coordsAtPos",value:function(e){return Ur(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}},{key:"domAtPos",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.domFromPos(e,t)}},{key:"nodeDOM",value:function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null}},{key:"posAtDOM",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}},{key:"endOfTextblock",value:function(e,t){return function(e,t,n){return Zr==t&&Jr==n?Xr:(Zr=t,Jr=n,Xr="up"==n||"down"==n?function(e,t,n){var r=t.selection,o="up"==n?r.$from:r.$to;return qr(e,t,(function(){for(var t=e.docView.domFromPos(o.pos,"up"==n?-1:1).node;;){var r=e.docView.nearestDesc(t,!0);if(!r)break;if(r.node.isBlock){t=r.contentDOM||r.dom;break}t=r.dom.parentNode}for(var i=Ur(e,o.pos,1),a=t.firstChild;a;a=a.nextSibling){var s=void 0;if(1==a.nodeType)s=a.getClientRects();else{if(3!=a.nodeType)continue;s=rr(a,0,a.nodeValue.length).getClientRects()}for(var l=0;l<s.length;l++){var c=s[l];if(c.bottom>c.top+1&&("up"==n?i.top-c.top>2*(c.bottom-i.top):c.bottom-i.bottom>2*(i.bottom-c.top)))return!1}}return!0}))}(e,t,n):function(e,t,n){var r=t.selection.$head;if(!r.parent.isTextblock)return!1;var o=r.parentOffset,i=!o,a=o==r.parent.content.size,s=e.domSelection();return s?Kr.test(r.parent.textContent)&&s.modify?qr(e,t,(function(){var t=e.domSelectionRange(),o=t.focusNode,i=t.focusOffset,a=t.anchorNode,l=t.anchorOffset,c=s.caretBidiLevel;s.modify("move",n,"character");var u=r.depth?e.docView.domAfterPos(r.before()):e.dom,d=e.domSelectionRange(),f=d.focusNode,p=d.focusOffset,h=f&&!u.contains(1==f.nodeType?f:f.parentNode)||o==f&&i==p;try{s.collapse(a,l),o&&(o!=a||i!=l)&&s.extend&&s.extend(o,i)}catch(e){}return null!=c&&(s.caretBidiLevel=c),h})):"left"==n||"backward"==n?i:a:r.pos==r.start()||r.pos==r.end()}(e,t,n))}(this,t||this.state,e)}},{key:"pasteHTML",value:function(e,t){return Ci(this,"",e,!1,t||new ClipboardEvent("paste"))}},{key:"pasteText",value:function(e,t){return Ci(this,e,null,!0,t||new ClipboardEvent("paste"))}},{key:"serializeForClipboard",value:function(e){return Uo(this,e)}},{key:"destroy",value:function(){this.docView&&(function(e){for(var t in e.domObserver.stop(),e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Wi(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,nr=null)}},{key:"isDestroyed",get:function(){return null==this.docView}},{key:"dispatchEvent",value:function(e){return function(e,t){li(e,t)||!ni[t.type]||!e.editable&&t.type in ri||ni[t.type](e,t)}(this,e)}},{key:"dispatch",value:function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}},{key:"domSelectionRange",value:function(){var e=this.domSelection();return e?Cr&&11===this.root.nodeType&&function(e){for(var t=e.activeElement;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){if(t.getComposedRanges){var n=t.getComposedRanges(e.root)[0];if(n)return Qi(e,n)}var r;function o(e){e.preventDefault(),e.stopImmediatePropagation(),r=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",o,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",o,!0),r?Qi(e,r):null}(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}},{key:"domSelection",value:function(){return this.root.getSelection()}}])}();function sa(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var r in n)"class"==r?t.class+=" "+n[r]:"style"==r?t.style=(t.style?t.style+";":"")+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))})),t.translate||(t.translate="no"),[ji.node(0,e.state.doc.content.size,t)]}function la(e){if(e.markCursor){var t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:ji.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function ca(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function ua(e){var t=Object.create(null);function n(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function da(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}for(var fa={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},pa={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ha="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),ma="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),va=0;va<10;va++)fa[48+va]=fa[96+va]=String(va);for(va=1;va<=24;va++)fa[va+111]="F"+va;for(va=65;va<=90;va++)fa[va]=String.fromCharCode(va+32),pa[va]=String.fromCharCode(va);for(var ga in fa)pa.hasOwnProperty(ga)||(pa[ga]=fa[ga]);var ya="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function ba(e){var t,n,r,o,i=e.split(/-(?!$)/),a=i[i.length-1];"Space"==a&&(a=" ");for(var s=0;s<i.length-1;s++){var l=i[s];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else if(/^s(hift)?$/i.test(l))r=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);ya?o=!0:n=!0}}return t&&(a="Alt-"+a),n&&(a="Ctrl-"+a),o&&(a="Meta-"+a),r&&(a="Shift-"+a),a}function ka(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function wa(e){var t=function(e){var t=Object.create(null);for(var n in e)t[ba(n)]=e[n];return t}(e);return function(e,n){var r,o=function(e){var t=!(ha&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||ma&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?pa:fa)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),i=t[ka(o,n)];if(i&&i(e.state,e.dispatch,e))return!0;if(1==o.length&&" "!=o){if(n.shiftKey){var a=t[ka(o,n,!1)];if(a&&a(e.state,e.dispatch,e))return!0}if((n.shiftKey||n.altKey||n.metaKey||o.charCodeAt(0)>127)&&(r=fa[n.keyCode])&&r!=o){var s=t[ka(r,n)];if(s&&s(e.state,e.dispatch,e))return!0}}return!1}}var xa=function(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)};function Ca(e,t){var n=e.selection.$cursor;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}var Sa=function(e,t,n){var r=Ca(e,n);if(!r)return!1;var o=Ma(r);if(!o){var i=r.blockRange(),a=i&&Tt(i);return null!=a&&(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)}var s=o.nodeBefore;if(Ba(e,o,t,-1))return!0;if(0==r.parent.content.size&&(Ea(s,"end")||wn.isSelectable(s)))for(var l=r.depth;;l--){var c=zt(e.doc,r.before(l),r.after(l),te.empty);if(c&&c.slice.size<c.to-c.from){if(t){var u=e.tr.step(c);u.setSelection(Ea(s,"end")?mn.findFrom(u.doc.resolve(u.mapping.map(o.pos,-1)),-1):wn.create(u.doc,o.pos-s.nodeSize)),t(u.scrollIntoView())}return!0}if(1==l||r.node(l-1).childCount>1)break}return!(!s.isAtom||o.depth!=r.depth-1||(t&&t(e.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),0))};function _a(e,t,n){for(var r=t.nodeBefore,o=t.pos-1;!r.isTextblock;o--){if(r.type.spec.isolating)return!1;var i=r.lastChild;if(!i)return!1;r=i}for(var a=t.nodeAfter,s=t.pos+1;!a.isTextblock;s++){if(a.type.spec.isolating)return!1;var l=a.firstChild;if(!l)return!1;a=l}var c=zt(e.doc,o,s,te.empty);if(!c||c.from!=o||c instanceof Et&&c.slice.size>=s-o)return!1;if(n){var u=e.tr.step(c);u.setSelection(bn.create(u.doc,o)),n(u.scrollIntoView())}return!0}function Ea(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}var Da=function(e,t,n){var r=e.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):o.parentOffset>0)return!1;i=Ma(o)}var a=i&&i.nodeBefore;return!(!a||!wn.isSelectable(a)||(t&&t(e.tr.setSelection(wn.create(e.doc,i.pos-a.nodeSize)).scrollIntoView()),0))};function Ma(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function Aa(e,t){var n=e.selection.$cursor;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}var Oa=function(e,t,n){var r=Aa(e,n);if(!r)return!1;var o=ja(r);if(!o)return!1;var i=o.nodeAfter;if(Ba(e,o,t,1))return!0;if(0==r.parent.content.size&&(Ea(i,"start")||wn.isSelectable(i))){var a=zt(e.doc,r.before(),r.after(),te.empty);if(a&&a.slice.size<a.to-a.from){if(t){var s=e.tr.step(a);s.setSelection(Ea(i,"start")?mn.findFrom(s.doc.resolve(s.mapping.map(o.pos)),1):wn.create(s.doc,s.mapping.map(o.pos))),t(s.scrollIntoView())}return!0}}return!(!i.isAtom||o.depth!=r.depth-1||(t&&t(e.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),0))},Ta=function(e,t,n){var r=e.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size)return!1;i=ja(o)}var a=i&&i.nodeAfter;return!(!a||!wn.isSelectable(a)||(t&&t(e.tr.setSelection(wn.create(e.doc,i.pos)).scrollIntoView()),0))};function ja(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}var Na=function(e,t){var n=e.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o)||(t&&t(e.tr.insertText("\n").scrollIntoView()),0))};function Pa(e){for(var t=0;t<e.edgeCount;t++){var n=e.edge(t).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}var La=function(e,t){var n=e.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var i=r.node(-1),a=r.indexAfter(-1),s=Pa(i.contentMatchAt(a));if(!s||!i.canReplaceWith(a,a,s))return!1;if(t){var l=r.after(),c=e.tr.replaceWith(l,l,s.createAndFill());c.setSelection(mn.near(c.doc.resolve(l),1)),t(c.scrollIntoView())}return!0},Ra=function(e,t){var n=e.selection,r=n.$from,o=n.$to;if(n instanceof Cn||r.parent.inlineContent||o.parent.inlineContent)return!1;var i=Pa(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){var a=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,s=e.tr.insert(a,i.createAndFill());s.setSelection(bn.create(s.doc,a+1)),t(s.scrollIntoView())}return!0},Ia=function(e,t){var n=e.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var r=n.before();if(Rt(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}var o=n.blockRange(),i=o&&Tt(o);return null!=i&&(t&&t(e.tr.lift(o,i).scrollIntoView()),!0)};function Ba(e,t,n,r){var o,i,a=t.nodeBefore,s=t.nodeAfter,l=a.type.spec.isolating||s.type.spec.isolating;if(!l&&function(e,t,n){var r=t.nodeBefore,o=t.nodeAfter,i=t.index();return!(!(r&&o&&r.type.compatibleContent(o.type))||(!r.content.size&&t.parent.canReplace(i-1,i)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(i,i+1)||!o.isTextblock&&!It(e.doc,t.pos)||(n&&n(e.tr.join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;var c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(o=(i=a.contentMatchAt(a.childCount)).findWrapping(s.type))&&i.matchType(o[0]||s.type).validEnd){if(n){for(var u=t.pos+s.nodeSize,d=Z.empty,f=o.length-1;f>=0;f--)d=Z.from(o[f].create(null,d));d=Z.from(a.copy(d));var p=e.tr.step(new Dt(t.pos-1,u,t.pos,u,new te(d,1,0),o.length,!0)),h=p.doc.resolve(u+2*o.length);h.nodeAfter&&h.nodeAfter.type==a.type&&It(p.doc,h.pos)&&p.join(h.pos),n(p.scrollIntoView())}return!0}var m=s.type.spec.isolating||r>0&&l?null:mn.findFrom(t,1),v=m&&m.$from.blockRange(m.$to),g=v&&Tt(v);if(null!=g&&g>=t.depth)return n&&n(e.tr.lift(v,g).scrollIntoView()),!0;if(c&&Ea(s,"start",!0)&&Ea(a,"end")){for(var y=a,b=[];b.push(y),!y.isTextblock;)y=y.lastChild;for(var k=s,w=1;!k.isTextblock;k=k.firstChild)w++;if(y.canReplace(y.childCount,y.childCount,k.content)){if(n){for(var x=Z.empty,C=b.length-1;C>=0;C--)x=Z.from(b[C].copy(x));n(e.tr.step(new Dt(t.pos-b.length,t.pos+s.nodeSize,t.pos+w,t.pos+s.nodeSize-w,new te(x,b.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function Fa(e){return function(t,n){for(var r=t.selection,o=e<0?r.$from:r.$to,i=o.depth;o.node(i).isInline;){if(!i)return!1;i--}return!!o.node(i).isTextblock&&(n&&n(t.tr.setSelection(bn.create(t.doc,e<0?o.start(i):o.end(i)))),!0)}}var Ha=Fa(-1),za=Fa(1);function Va(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){for(var o=!1,i=0;i<n.selection.ranges.length&&!o;i++){var a=n.selection.ranges[i],s=a.$from.pos,l=a.$to.pos;n.doc.nodesBetween(s,l,(function(r,i){if(o)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)o=!0;else{var a=n.doc.resolve(i),s=a.index();o=a.parent.canReplaceWith(s,s+1,e)}}))}if(!o)return!1;if(r){for(var c=n.tr,u=0;u<n.selection.ranges.length;u++){var d=n.selection.ranges[u],f=d.$from.pos,p=d.$to.pos;c.setBlockType(f,p,e,t)}r(c.scrollIntoView())}return!0}}function $a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,r){for(var o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}var Ua=$a(xa,Sa,Da),Ga=$a(xa,Oa,Ta),Wa={Enter:$a(Na,Ra,Ia,(function(e,t){var n=e.selection,r=n.$from;n.$to;if(e.selection instanceof wn&&e.selection.node.isBlock)return!(!r.parentOffset||!Rt(e.doc,r.pos)||(t&&t(e.tr.split(r.pos).scrollIntoView()),0));if(!r.depth)return!1;for(var o,i,a=[],s=!1,l=!1,c=r.depth;;c--){if(r.node(c).isBlock){s=r.end(c)==r.pos+(r.depth-c),l=r.start(c)==r.pos-(r.depth-c),i=Pa(r.node(c-1).contentMatchAt(r.indexAfter(c-1)));a.unshift(s&&i?{type:i}:null),o=c;break}if(1==c)return!1;a.unshift(null)}var u=e.tr;(e.selection instanceof bn||e.selection instanceof Cn)&&u.deleteSelection();var d=u.mapping.map(r.pos),f=Rt(u.doc,d,a.length,a);if(f||(a[0]=i?{type:i}:null,f=Rt(u.doc,d,a.length,a)),u.split(d,a.length,a),!s&&l&&r.node(o).type!=i){var p=u.mapping.map(r.before(o)),h=u.doc.resolve(p);i&&r.node(o-1).canReplaceWith(h.index(),h.index()+1,i)&&u.setNodeMarkup(u.mapping.map(r.before(o)),i)}return t&&t(u.scrollIntoView()),!0})),"Mod-Enter":La,Backspace:Ua,"Mod-Backspace":Ua,"Shift-Backspace":Ua,Delete:Ga,"Mod-Delete":Ga,"Mod-a":function(e,t){return t&&t(e.tr.setSelection(new Cn(e.doc))),!0}},qa={"Ctrl-h":Wa.Backspace,"Alt-Backspace":Wa["Mod-Backspace"],"Ctrl-d":Wa.Delete,"Ctrl-Alt-Backspace":Wa["Mod-Delete"],"Alt-Delete":Wa["Mod-Delete"],"Alt-d":Wa["Mod-Delete"],"Ctrl-a":Ha,"Ctrl-e":za};for(var Ka in Wa)qa[Ka]=Wa[Ka];function Za(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Za=function(){return!!e})()}function Ja(e){return Ja=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ja(e)}function Xa(e,t){return Xa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xa(e,t)}function Ya(e){return Ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ya(e)}function Qa(e){return function(e){if(Array.isArray(e))return ns(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ts(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function es(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||ts(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ts(e,t){if(e){if("string"==typeof e)return ns(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ns(e,t):void 0}}function ns(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function rs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function is(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,us(r.key),r)}}function as(e,t,n){return t&&is(e.prototype,t),n&&is(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ss(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ls(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ss(Object(n),!0).forEach((function(t){cs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ss(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cs(e,t,n){return(t=us(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function us(e){var t=function(e){if("object"!=Ya(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ya(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ya(t)?t:t+""}function ds(e){var t=e.state,n=e.transaction,r=n.selection,o=n.doc,i=n.storedMarks;return ls(ls({},t),{},{apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}})}"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();var fs=function(){return as((function e(t){rs(this,e),this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}),[{key:"hasCustomState",get:function(){return!!this.customState}},{key:"state",get:function(){return this.customState||this.editor.state}},{key:"commands",get:function(){var e=this,t=this.rawCommands,n=this.editor,r=this.state,o=n.view,i=r.tr,a=this.buildProps(i);return Object.fromEntries(Object.entries(t).map((function(t){var n=es(t,2),r=n[0],s=n[1];return[r,function(){var t=s.apply(void 0,arguments)(a);return i.getMeta("preventDispatch")||e.hasCustomState||o.dispatch(i),t}]})))}},{key:"chain",get:function(){var e=this;return function(){return e.createChain()}}},{key:"can",get:function(){var e=this;return function(){return e.createCan()}}},{key:"createChain",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.rawCommands,o=this.editor,i=this.state,a=o.view,s=[],l=!!e,c=e||i.tr,u=ls(ls({},Object.fromEntries(Object.entries(r).map((function(e){var r=es(e,2),o=r[0],i=r[1];return[o,function(){var e=t.buildProps(c,n),r=i.apply(void 0,arguments)(e);return s.push(r),u}]})))),{},{run:function(){return l||!n||c.getMeta("preventDispatch")||t.hasCustomState||a.dispatch(c),s.every((function(e){return!0===e}))}});return u}},{key:"createCan",value:function(e){var t=this,n=this.rawCommands,r=this.state,o=!1,i=e||r.tr,a=this.buildProps(i,o),s=Object.fromEntries(Object.entries(n).map((function(e){var t=es(e,2),n=t[0],r=t[1];return[n,function(){return r.apply(void 0,arguments)(ls(ls({},a),{},{dispatch:void 0}))}]})));return ls(ls({},s),{},{chain:function(){return t.createChain(i,o)}})}},{key:"buildProps",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.rawCommands,o=this.editor,i=this.state,a=o.view,s={tr:e,editor:o,view:a,state:ds({state:i,transaction:e}),dispatch:n?function(){}:void 0,chain:function(){return t.createChain(e,n)},can:function(){return t.createCan(e)},get commands(){return Object.fromEntries(Object.entries(r).map((function(e){var t=es(e,2),n=t[0],r=t[1];return[n,function(){return r.apply(void 0,arguments)(s)}]})))}};return s}}])}(),ps=function(){return as((function e(){rs(this,e),this.callbacks={}}),[{key:"on",value:function(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=this.callbacks[e];return i&&i.forEach((function(e){return e.apply(t,r)})),this}},{key:"off",value:function(e,t){var n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter((function(e){return e!==t})):delete this.callbacks[e]),this}},{key:"once",value:function(e,t){var n=this,r=function(){n.off(e,r);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];t.apply(n,i)};return this.on(e,r)}},{key:"removeAllListeners",value:function(){this.callbacks={}}}])}();function hs(e,t,n){return void 0===e.config[t]&&e.parent?hs(e.parent,t,n):"function"==typeof e.config[t]?e.config[t].bind(ls(ls({},n),{},{parent:e.parent?hs(e.parent,t,n):null})):e.config[t]}function ms(e){return{baseExtensions:e.filter((function(e){return"extension"===e.type})),nodeExtensions:e.filter((function(e){return"node"===e.type})),markExtensions:e.filter((function(e){return"mark"===e.type}))}}function vs(e){var t=[],n=ms(e),r=n.nodeExtensions,o=n.markExtensions,i=[].concat(Qa(r),Qa(o)),a={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach((function(e){var n=hs(e,"addGlobalAttributes",{name:e.name,options:e.options,storage:e.storage,extensions:i});n&&n().forEach((function(e){e.types.forEach((function(n){Object.entries(e.attributes).forEach((function(e){var r=es(e,2),o=r[0],i=r[1];t.push({type:n,name:o,attribute:ls(ls({},a),i)})}))}))}))})),i.forEach((function(e){var n={name:e.name,options:e.options,storage:e.storage},r=hs(e,"addAttributes",n);if(r){var o=r();Object.entries(o).forEach((function(n){var r=es(n,2),o=r[0],i=r[1],s=ls(ls({},a),i);"function"==typeof(null==s?void 0:s.default)&&(s.default=s.default()),(null==s?void 0:s.isRequired)&&void 0===(null==s?void 0:s.default)&&delete s.default,t.push({type:e.name,name:o,attribute:s})}))}})),t}function gs(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error("There is no node type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.nodes[e]}return e}function ys(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return!!e})).reduce((function(e,t){var n=ls({},e);return Object.entries(t).forEach((function(e){var t=es(e,2),r=t[0],o=t[1];if(n[r])if("class"===r){var i=o?String(o).split(" "):[],a=n[r]?n[r].split(" "):[],s=i.filter((function(e){return!a.includes(e)}));n[r]=[].concat(Qa(a),Qa(s)).join(" ")}else if("style"===r){var l=o?o.split(";").map((function(e){return e.trim()})).filter(Boolean):[],c=n[r]?n[r].split(";").map((function(e){return e.trim()})).filter(Boolean):[],u=new Map;c.forEach((function(e){var t=es(e.split(":").map((function(e){return e.trim()})),2),n=t[0],r=t[1];u.set(n,r)})),l.forEach((function(e){var t=es(e.split(":").map((function(e){return e.trim()})),2),n=t[0],r=t[1];u.set(n,r)})),n[r]=Array.from(u.entries()).map((function(e){var t=es(e,2),n=t[0],r=t[1];return"".concat(n,": ").concat(r)})).join("; ")}else n[r]=o;else n[r]=o})),n}),{})}function bs(e,t){return t.filter((function(t){return t.type===e.type.name})).filter((function(e){return e.attribute.rendered})).map((function(t){return t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:cs({},t.name,e.attrs[t.name])})).reduce((function(e,t){return ys(e,t)}),{})}function ks(e){return"function"==typeof e}function ws(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(ks(e)){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return t?e.bind(t).apply(void 0,r):e.apply(void 0,r)}return e}function xs(e,t){return"style"in e?e:ls(ls({},e),{},{getAttrs:function(n){var r=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===r)return!1;var o=t.reduce((function(e,t){var r=t.attribute.parseHTML?t.attribute.parseHTML(n):function(e){return"string"!=typeof e?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):"true"===e||"false"!==e&&e}(n.getAttribute(t.name));return null==r?e:ls(ls({},e),{},cs({},t.name,r))}),{});return ls(ls({},r),o)}})}function Cs(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=es(e,2),n=t[0],r=t[1];return("attrs"!==n||!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===Object.keys(e).length&&e.constructor===Object}(r))&&null!=r})))}function Ss(e,t){var n,r=vs(e),o=ms(e),i=o.nodeExtensions,a=o.markExtensions,s=null===(n=i.find((function(e){return hs(e,"topNode")})))||void 0===n?void 0:n.name,l=Object.fromEntries(i.map((function(n){var o=r.filter((function(e){return e.type===n.name})),i={name:n.name,options:n.options,storage:n.storage,editor:t},a=e.reduce((function(e,t){var r=hs(t,"extendNodeSchema",i);return ls(ls({},e),r?r(n):{})}),{}),s=Cs(ls(ls({},a),{},{content:ws(hs(n,"content",i)),marks:ws(hs(n,"marks",i)),group:ws(hs(n,"group",i)),inline:ws(hs(n,"inline",i)),atom:ws(hs(n,"atom",i)),selectable:ws(hs(n,"selectable",i)),draggable:ws(hs(n,"draggable",i)),code:ws(hs(n,"code",i)),whitespace:ws(hs(n,"whitespace",i)),linebreakReplacement:ws(hs(n,"linebreakReplacement",i)),defining:ws(hs(n,"defining",i)),isolating:ws(hs(n,"isolating",i)),attrs:Object.fromEntries(o.map((function(e){var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]})))})),l=ws(hs(n,"parseHTML",i));l&&(s.parseDOM=l.map((function(e){return xs(e,o)})));var c=hs(n,"renderHTML",i);c&&(s.toDOM=function(e){return c({node:e,HTMLAttributes:bs(e,o)})});var u=hs(n,"renderText",i);return u&&(s.toText=u),[n.name,s]}))),c=Object.fromEntries(a.map((function(n){var o=r.filter((function(e){return e.type===n.name})),i={name:n.name,options:n.options,storage:n.storage,editor:t},a=e.reduce((function(e,t){var r=hs(t,"extendMarkSchema",i);return ls(ls({},e),r?r(n):{})}),{}),s=Cs(ls(ls({},a),{},{inclusive:ws(hs(n,"inclusive",i)),excludes:ws(hs(n,"excludes",i)),group:ws(hs(n,"group",i)),spanning:ws(hs(n,"spanning",i)),code:ws(hs(n,"code",i)),attrs:Object.fromEntries(o.map((function(e){var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]})))})),l=ws(hs(n,"parseHTML",i));l&&(s.parseDOM=l.map((function(e){return xs(e,o)})));var c=hs(n,"renderHTML",i);return c&&(s.toDOM=function(e){return c({mark:e,HTMLAttributes:bs(e,o)})}),[n.name,s]})));return new Fe({topNode:s,nodes:l,marks:c})}function _s(e,t){return t.nodes[e]||t.marks[e]||null}function Es(e,t){return Array.isArray(t)?t.some((function(t){return("string"==typeof t?t:t.name)===e.name})):t}function Ds(e,t){var n=Xe.fromSchema(t).serializeFragment(e),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}function Ms(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var As=as((function e(t){rs(this,e),this.find=t.find,this.handler=t.handler}));function Os(e){var t,n=e.editor,r=e.from,o=e.to,i=e.text,a=e.rules,s=e.plugin,l=n.view;if(l.composing)return!1;var c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(null===(t=c.nodeBefore||c.nodeAfter)||void 0===t?void 0:t.marks.find((function(e){return e.type.spec.code}))))return!1;var u=!1,d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n="",r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(function(e,t,o,i){var a,s,l=(null===(s=(a=e.type.spec).toText)||void 0===s?void 0:s.call(a,{node:e,pos:t,parent:o,index:i}))||e.textContent||"%leaf%";n+=e.isAtom&&!e.isText?l:l.slice(0,Math.max(0,r-t))})),n}(c)+i;return a.forEach((function(e){if(!u){var t=function(e,t){if(Ms(t))return t.exec(e);var n=t(e);if(!n)return null;var r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r}(d,e.find);if(t){var a=l.state.tr,c=ds({state:l.state,transaction:a}),f={from:r-(t[0].length-i.length),to:o},p=new fs({editor:n,state:c}),h=p.commands,m=p.chain,v=p.can;null!==e.handler({state:c,range:f,match:t,commands:h,chain:m,can:v})&&a.steps.length&&(a.setMeta(s,{transform:a,from:r,to:o,text:i}),l.dispatch(a),u=!0)}}})),u}function Ts(e){var t=e.editor,n=e.rules,r=new Pn({state:{init:function(){return null},apply:function(e,o,i){var a=e.getMeta(r);if(a)return a;var s=e.getMeta("applyInputRules");return!!s&&setTimeout((function(){var e=s.text;"string"==typeof e||(e=Ds(Z.from(e),i.schema));var o=s.from,a=o+e.length;Os({editor:t,from:o,to:a,text:e,rules:n,plugin:r})})),e.selectionSet||e.docChanged?null:o}},props:{handleTextInput:function(e,o,i,a){return Os({editor:t,from:o,to:i,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:function(e){return setTimeout((function(){var o=e.state.selection.$cursor;o&&Os({editor:t,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})})),!1}},handleKeyDown:function(e,o){if("Enter"!==o.key)return!1;var i=e.state.selection.$cursor;return!!i&&Os({editor:t,from:i.pos,to:i.pos,text:"\n",rules:n,plugin:r})}},isInputRules:!0});return r}function js(e){return"Object"===function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function Ns(e,t){var n=ls({},e);return js(e)&&js(t)&&Object.keys(t).forEach((function(r){js(t[r])&&js(e[r])?n[r]=Ns(e[r],t[r]):n[r]=t[r]})),n}var Ps=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};rs(this,e),this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=ls(ls({},this.config),t),this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ws(hs(this,"addOptions",{name:this.name}))),this.storage=ws(hs(this,"addStorage",{name:this.name,options:this.options}))||{}}return as(e,[{key:"configure",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.extend(ls(ls({},this.config),{},{addOptions:function(){return Ns(e.options,t)}}));return n.name=this.name,n.parent=this.parent,n}},{key:"extend",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new e(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(n.name,'".')),n.options=ws(hs(n,"addOptions",{name:n.name})),n.storage=ws(hs(n,"addStorage",{name:n.name,options:n.options})),n}}],[{key:"create",value:function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}},{key:"handleExit",value:function(e){var t=e.editor,n=e.mark,r=t.state.tr,o=t.state.selection.$from;if(o.pos===o.end()){var i=o.marks();if(!i.find((function(e){return(null==e?void 0:e.type.name)===n.name})))return!1;var a=i.find((function(e){return(null==e?void 0:e.type.name)===n.name}));return a&&r.removeStoredMark(a),r.insertText(" ",o.pos),t.view.dispatch(r),!0}return!1}}])}(),Ls=as((function e(t){rs(this,e),this.find=t.find,this.handler=t.handler}));var Rs=null;function Is(e){var t,n=e.editor,r=e.rules,o=null,i=!1,a=!1,s="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null;try{t="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch(e){t=null}var l=function(e){var r=e.state,o=e.from,i=e.to,a=e.rule,l=e.pasteEvt,c=r.tr,u=ds({state:r,transaction:c});if(function(e){var t=e.editor,n=e.state,r=e.from,o=e.to,i=e.rule,a=e.pasteEvent,s=e.dropEvent,l=new fs({editor:t,state:n}),c=l.commands,u=l.chain,d=l.can,f=[];return n.doc.nodesBetween(r,o,(function(e,t){if(e.isTextblock&&!e.type.spec.code){var l=Math.max(r,t),p=Math.min(o,t+e.content.size);(function(e,t,n){if(Ms(t))return Qa(e.matchAll(t));var r=t(e,n);return r?r.map((function(t){var n=[t.text];return n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(t.replaceWith)),n})):[]})(e.textBetween(l-t,p-t,void 0,"￼"),i.find,a).forEach((function(e){if(void 0!==e.index){var t=l+e.index+1,r=t+e[0].length,o={from:n.tr.mapping.map(t),to:n.tr.mapping.map(r)},p=i.handler({state:n,range:o,match:e,commands:c,chain:u,can:d,pasteEvent:a,dropEvent:s});f.push(p)}}))}})),f.every((function(e){return null!==e}))}({editor:n,state:u,from:Math.max(o-1,0),to:i.b-1,rule:a,pasteEvent:l,dropEvent:t})&&c.steps.length){try{t="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch(e){t=null}return s="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null,c}},c=r.map((function(e){return new Pn({view:function(e){var t=function(t){var r;(o=(null===(r=e.dom.parentElement)||void 0===r?void 0:r.contains(t.target))?e.dom.parentElement:null)&&(Rs=n)},r=function(){Rs&&(Rs=null)};return window.addEventListener("dragstart",t),window.addEventListener("dragend",r),{destroy:function(){window.removeEventListener("dragstart",t),window.removeEventListener("dragend",r)}}},props:{handleDOMEvents:{drop:function(e,n){if(a=o===e.dom.parentElement,t=n,!a){var r=Rs;r&&setTimeout((function(){var e=r.state.selection;e&&r.commands.deleteRange({from:e.from,to:e.to})}),10)}return!1},paste:function(e,t){var n,r=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/html");return s=t,i=!!(null==r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:function(t,n,r){var o=t[0],c="paste"===o.getMeta("uiEvent")&&!i,u="drop"===o.getMeta("uiEvent")&&!a,d=o.getMeta("applyPasteRules"),f=!!d;if(c||u||f){if(f){var p=d.text;"string"==typeof p||(p=Ds(Z.from(p),r.schema));var h=d.from,m=h+p.length,v=function(e){var t,n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return null===(t=n.clipboardData)||void 0===t||t.setData("text/html",e),n}(p);return l({rule:e,state:r,from:h,to:{b:m},pasteEvt:v})}var g=n.doc.content.findDiffStart(r.doc.content),y=n.doc.content.findDiffEnd(r.doc.content);if("number"==typeof g&&y&&g!==y.b)return l({rule:e,state:r,from:g,to:y,pasteEvt:s})}}})}));return c}var Bs=function(){function e(t,n){rs(this,e),this.splittableMarks=[],this.editor=n,this.extensions=e.resolve(t),this.schema=Ss(this.extensions,n),this.setupExtensions()}return as(e,[{key:"commands",get:function(){var e=this;return this.extensions.reduce((function(t,n){var r=hs(n,"addCommands",{name:n.name,options:n.options,storage:n.storage,editor:e.editor,type:_s(n.name,e.schema)});return r?ls(ls({},t),r()):t}),{})}},{key:"plugins",get:function(){var t=this,n=this.editor,r=e.sort(Qa(this.extensions).reverse()),o=[],i=[],a=r.map((function(e){var r={name:e.name,options:e.options,storage:e.storage,editor:n,type:_s(e.name,t.schema)},a=[],s=hs(e,"addKeyboardShortcuts",r),l={};if("mark"===e.type&&hs(e,"exitable",r)&&(l.ArrowRight=function(){return Ps.handleExit({editor:n,mark:e})}),s){var c=Object.fromEntries(Object.entries(s()).map((function(e){var t=es(e,2),r=t[0],o=t[1];return[r,function(){return o({editor:n})}]})));l=ls(ls({},l),c)}var u=function(e){return new Pn({props:{handleKeyDown:wa(e)}})}(l);a.push(u);var d=hs(e,"addInputRules",r);Es(e,n.options.enableInputRules)&&d&&o.push.apply(o,Qa(d()));var f=hs(e,"addPasteRules",r);Es(e,n.options.enablePasteRules)&&f&&i.push.apply(i,Qa(f()));var p=hs(e,"addProseMirrorPlugins",r);if(p){var h=p();a.push.apply(a,Qa(h))}return a})).flat();return[Ts({editor:n,rules:o})].concat(Qa(Is({editor:n,rules:i})),Qa(a))}},{key:"attributes",get:function(){return vs(this.extensions)}},{key:"nodeViews",get:function(){var e=this,t=this.editor,n=ms(this.extensions).nodeExtensions;return Object.fromEntries(n.filter((function(e){return!!hs(e,"addNodeView")})).map((function(n){var r=e.attributes.filter((function(e){return e.type===n.name})),o={name:n.name,options:n.options,storage:n.storage,editor:t,type:gs(n.name,e.schema)},i=hs(n,"addNodeView",o);return i?[n.name,function(e,o,a,s,l){var c=bs(e,r);return i()({node:e,view:o,getPos:a,decorations:s,innerDecorations:l,editor:t,extension:n,HTMLAttributes:c})}]:[]})))}},{key:"setupExtensions",value:function(){var e=this;this.extensions.forEach((function(t){var n;e.editor.extensionStorage[t.name]=t.storage;var r={name:t.name,options:t.options,storage:t.storage,editor:e.editor,type:_s(t.name,e.schema)};"mark"===t.type&&(null===(n=ws(hs(t,"keepOnSplit",r)))||void 0===n||n)&&e.splittableMarks.push(t.name);var o=hs(t,"onBeforeCreate",r),i=hs(t,"onCreate",r),a=hs(t,"onUpdate",r),s=hs(t,"onSelectionUpdate",r),l=hs(t,"onTransaction",r),c=hs(t,"onFocus",r),u=hs(t,"onBlur",r),d=hs(t,"onDestroy",r);o&&e.editor.on("beforeCreate",o),i&&e.editor.on("create",i),a&&e.editor.on("update",a),s&&e.editor.on("selectionUpdate",s),l&&e.editor.on("transaction",l),c&&e.editor.on("focus",c),u&&e.editor.on("blur",u),d&&e.editor.on("destroy",d)}))}}],[{key:"resolve",value:function(t){var n,r,o=e.sort(e.flatten(t)),i=(r=(n=o.map((function(e){return e.name}))).filter((function(e,t){return n.indexOf(e)!==t})),Array.from(new Set(r)));return i.length&&console.warn("[tiptap warn]: Duplicate extension names found: [".concat(i.map((function(e){return"'".concat(e,"'")})).join(", "),"]. This can lead to issues.")),o}},{key:"flatten",value:function(e){var t=this;return e.map((function(e){var n=hs(e,"addExtensions",{name:e.name,options:e.options,storage:e.storage});return n?[e].concat(Qa(t.flatten(n()))):e})).flat(10)}},{key:"sort",value:function(e){return e.sort((function(e,t){var n=hs(e,"priority")||100,r=hs(t,"priority")||100;return n>r?-1:n<r?1:0}))}}])}(),Fs=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};rs(this,e),this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=ls(ls({},this.config),t),this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ws(hs(this,"addOptions",{name:this.name}))),this.storage=ws(hs(this,"addStorage",{name:this.name,options:this.options}))||{}}return as(e,[{key:"configure",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.extend(ls(ls({},this.config),{},{addOptions:function(){return Ns(e.options,t)}}));return n.name=this.name,n.parent=this.parent,n}},{key:"extend",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new e(ls(ls({},this.config),t));return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(n.name,'".')),n.options=ws(hs(n,"addOptions",{name:n.name})),n.storage=ws(hs(n,"addStorage",{name:n.name,options:n.options})),n}}],[{key:"create",value:function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}}])}();function Hs(e,t,n){var r=t.from,o=t.to,i=n||{},a=i.blockSeparator,s=void 0===a?"\n\n":a,l=i.textSerializers,c=void 0===l?{}:l,u="";return e.nodesBetween(r,o,(function(e,n,i,a){var l;e.isBlock&&n>r&&(u+=s);var d=null==c?void 0:c[e.type.name];if(d)return i&&(u+=d({node:e,pos:n,parent:i,index:a,range:t})),!1;e.isText&&(u+=null===(l=null==e?void 0:e.text)||void 0===l?void 0:l.slice(Math.max(r,n)-n,o-n))})),u}function zs(e){return Object.fromEntries(Object.entries(e.nodes).filter((function(e){return es(e,2)[1].spec.toText})).map((function(e){var t=es(e,2);return[t[0],t[1].spec.toText]})))}var Vs=Fs.create({name:"clipboardTextSerializer",addOptions:function(){return{blockSeparator:void 0}},addProseMirrorPlugins:function(){var e=this;return[new Pn({key:new In("clipboardTextSerializer"),props:{clipboardTextSerializer:function(){var t=e.editor,n=t.state,r=t.schema,o=n.doc,i=n.selection.ranges,a=Math.min.apply(Math,Qa(i.map((function(e){return e.$from.pos})))),s=Math.max.apply(Math,Qa(i.map((function(e){return e.$to.pos})))),l=zs(r);return Hs(o,{from:a,to:s},ls(ls({},void 0!==e.options.blockSeparator?{blockSeparator:e.options.blockSeparator}:{}),{},{textSerializers:l}))}}})]}});function $s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{strict:!0},r=Object.keys(t);return!r.length||r.every((function(r){return n.strict?t[r]===e[r]:Ms(t[r])?t[r].test(e[r]):t[r]===e[r]}))}function Us(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.find((function(e){return e.type===t&&$s(Object.fromEntries(Object.keys(n).map((function(t){return[t,e.attrs[t]]}))),n)}))}function Gs(e,t){return!!Us(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function Ws(e,t,n){var r;if(e&&t){var o=e.parent.childAfter(e.parentOffset);if(o.node&&o.node.marks.some((function(e){return e.type===t}))||(o=e.parent.childBefore(e.parentOffset)),o.node&&o.node.marks.some((function(e){return e.type===t}))&&(n=n||(null===(r=o.node.marks[0])||void 0===r?void 0:r.attrs),Us(Qa(o.node.marks),t,n))){for(var i=o.index,a=e.start()+o.offset,s=i+1,l=a+o.node.nodeSize;i>0&&Gs(Qa(e.parent.child(i-1).marks),t,n);)i-=1,a-=e.parent.child(i).nodeSize;for(;s<e.parent.childCount&&Gs(Qa(e.parent.child(s).marks),t,n);)l+=e.parent.child(s).nodeSize,s+=1;return{from:a,to:l}}}}function qs(e,t){if("string"==typeof e){if(!t.marks[e])throw Error("There is no mark type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.marks[e]}return e}function Ks(e){return e instanceof bn}function Zs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(Math.max(e,t),n)}function Js(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return null;var n=mn.atStart(e),r=mn.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return r;var o=n.from,i=r.to;return"all"===t?bn.create(e,Zs(0,o,i),Zs(e.content.size,o,i)):bn.create(e,Zs(t,o,i),Zs(t,o,i))}function Xs(){return"Android"===navigator.platform||/android/i.test(navigator.userAgent)}function Ys(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var Qs=function(e){for(var t=e.childNodes,n=t.length-1;n>=0;n-=1){var r=t[n];3===r.nodeType&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):1===r.nodeType&&Qs(r)}return e};function el(e){var t="<body>".concat(e,"</body>"),n=(new window.DOMParser).parseFromString(t,"text/html").body;return Qs(n)}function tl(e,t,n){if(e instanceof be||e instanceof Z)return e;n=ls({slice:!0,parseOptions:{}},n);var r="string"==typeof e;if("object"===Ya(e)&&null!==e)try{if(Array.isArray(e)&&e.length>0)return Z.fromArray(e.map((function(e){return t.nodeFromJSON(e)})));var o=t.nodeFromJSON(e);return n.errorOnInvalidContent&&o.check(),o}catch(r){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:r});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),tl("",t,n)}if(r){if(n.errorOnInvalidContent){var i=!1,a="",s=new Fe({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:function(e){return i=!0,a="string"==typeof e?e:e.outerHTML,null}}]}})});if(n.slice?ze.fromSchema(s).parseSlice(el(e),n.parseOptions):ze.fromSchema(s).parse(el(e),n.parseOptions),n.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error("Invalid element found: ".concat(a))})}var l=ze.fromSchema(t);return n.slice?l.parseSlice(el(e),n.parseOptions).content:l.parse(el(e),n.parseOptions)}return tl("",t,n)}function nl(e,t,n){var r=e.steps.length-1;if(!(r<t)){var o=e.steps[r];if(o instanceof Et||o instanceof Dt){var i=e.mapping.maps[r],a=0;i.forEach((function(e,t,n,r){0===a&&(a=r)})),e.setSelection(mn.near(e.doc.resolve(a),n))}}}function rl(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function ol(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.selection,o=r.from,i=r.to,a=r.empty,s=t?gs(t,e.schema):null,l=[];e.doc.nodesBetween(o,i,(function(e,t){if(!e.isText){var n=Math.max(o,t),r=Math.min(i,t+e.nodeSize);l.push({node:e,from:n,to:r})}}));var c=i-o,u=l.filter((function(e){return!s||s.name===e.node.type.name})).filter((function(e){return $s(e.node.attrs,n,{strict:!1})}));return a?!!u.length:u.reduce((function(e,t){return e+t.to-t.from}),0)>=c}function il(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function al(e,t){var n="string"==typeof t?[t]:t;return Object.keys(e).reduce((function(t,r){return n.includes(r)||(t[r]=e[r]),t}),{})}function sl(e,t){return tl(e,t,{slice:!1,parseOptions:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},errorOnInvalidContent:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).errorOnInvalidContent})}function ll(e,t){var n=qs(t,e.schema),r=e.selection,o=r.from,i=r.to,a=r.empty,s=[];a?(e.storedMarks&&s.push.apply(s,Qa(e.storedMarks)),s.push.apply(s,Qa(e.selection.$head.marks()))):e.doc.nodesBetween(o,i,(function(e){s.push.apply(s,Qa(e.marks))}));var l=s.find((function(e){return e.type.name===n.name}));return l?ls({},l.attrs):{}}function cl(e,t){var n=new en(e);return t.forEach((function(e){e.steps.forEach((function(e){n.step(e)}))})),n}function ul(e,t){var n=[];return e.descendants((function(e,r){t(e)&&n.push({node:e,pos:r})})),n}function dl(e,t,n){var r=[];return e.nodesBetween(t.from,t.to,(function(e,t){n(e)&&r.push({node:e,pos:t})})),r}function fl(e){return function(t){return function(e,t){for(var n=e.depth;n>0;n-=1){var r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}(t.$from,e)}}function pl(e,t){var n=il("string"==typeof t?t:t.name,e.schema);return"node"===n?function(e,t){var n=gs(t,e.schema),r=e.selection,o=r.from,i=r.to,a=[];e.doc.nodesBetween(o,i,(function(e){a.push(e)}));var s=a.reverse().find((function(e){return e.type.name===n.name}));return s?ls({},s.attrs):{}}(e,t):"mark"===n?ll(e,t):{}}function hl(e){var t=e.mapping,n=e.steps,r=[];return t.maps.forEach((function(e,o){var i=[];if(e.ranges.length)e.forEach((function(e,t){i.push({from:e,to:t})}));else{var a=n[o],s=a.from,l=a.to;if(void 0===s||void 0===l)return;i.push({from:s,to:l})}i.forEach((function(e){var n=e.from,i=e.to,a=t.slice(o).map(n,-1),s=t.slice(o).map(i),l=t.invert().map(a,-1),c=t.invert().map(s);r.push({oldRange:{from:l,to:c},newRange:{from:a,to:s}})}))})),function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify,n={};return e.filter((function(e){var r=t(e);return!Object.prototype.hasOwnProperty.call(n,r)&&(n[r]=!0)}))}(e);return 1===t.length?t:t.filter((function(e,n){return!t.filter((function(e,t){return t!==n})).some((function(t){return e.oldRange.from>=t.oldRange.from&&e.oldRange.to<=t.oldRange.to&&e.newRange.from>=t.newRange.from&&e.newRange.to<=t.newRange.to}))}))}(r)}function ml(e,t,n){var r=[];return e===t?n.resolve(e).marks().forEach((function(t){var o=Ws(n.resolve(e),t.type);o&&r.push(ls({mark:t},o))})):n.nodesBetween(e,t,(function(e,t){e&&void 0!==(null==e?void 0:e.nodeSize)&&r.push.apply(r,Qa(e.marks.map((function(n){return{from:t,to:t+e.nodeSize,mark:n}}))))})),r}function vl(e,t,n){return Object.fromEntries(Object.entries(n).filter((function(n){var r=es(n,1)[0],o=e.find((function(e){return e.type===t&&e.name===r}));return!!o&&o.attribute.keepOnSplit})))}function gl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.selection,o=r.empty,i=r.ranges,a=t?qs(t,e.schema):null;if(o)return!!(e.storedMarks||e.selection.$from.marks()).filter((function(e){return!a||a.name===e.type.name})).find((function(e){return $s(e.attrs,n,{strict:!1})}));var s=0,l=[];if(i.forEach((function(t){var n=t.$from,r=t.$to,o=n.pos,i=r.pos;e.doc.nodesBetween(o,i,(function(e,t){if(e.isText||e.marks.length){var n=Math.max(o,t),r=Math.min(i,t+e.nodeSize);s+=r-n,l.push.apply(l,Qa(e.marks.map((function(e){return{mark:e,from:n,to:r}}))))}}))})),0===s)return!1;var c=l.filter((function(e){return!a||a.name===e.mark.type.name})).filter((function(e){return $s(e.mark.attrs,n,{strict:!1})})).reduce((function(e,t){return e+t.to-t.from}),0),u=l.filter((function(e){return!a||e.mark.type!==a&&e.mark.type.excludes(a)})).reduce((function(e,t){return e+t.to-t.from}),0);return(c>0?c+u:c)>=s}function yl(e,t){var n=ms(t).nodeExtensions.find((function(t){return t.name===e}));if(!n)return!1;var r=ws(hs(n,"group",{name:n.name,options:n.options,storage:n.storage}));return"string"==typeof r&&r.split(" ").includes("list")}function bl(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.checkChildren,o=void 0===r||r,i=n.ignoreWhitespace,a=void 0!==i&&i;if(a){if("hardBreak"===e.type.name)return!0;if(e.isText)return/^\s*$/m.test(null!==(t=e.text)&&void 0!==t?t:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(0===e.content.childCount)return!0;if(o){var s=!0;return e.content.forEach((function(e){!1!==s&&(bl(e,{ignoreWhitespace:a,checkChildren:o})||(s=!1))})),s}return!1}function kl(e){return e instanceof wn}function wl(e,t,n){var r=e.state.doc.content.size,o=Zs(t,0,r),i=Zs(n,0,r),a=e.coordsAtPos(o),s=e.coordsAtPos(i,-1),l=Math.min(a.top,s.top),c=Math.max(a.bottom,s.bottom),u=Math.min(a.left,s.left),d=Math.max(a.right,s.right),f={top:l,bottom:c,left:u,right:d,width:d-u,height:c-l,x:u,y:l};return ls(ls({},f),{},{toJSON:function(){return f}})}function xl(e,t){var n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){var r=n.filter((function(e){return null==t?void 0:t.includes(e.type.name)}));e.tr.ensureMarks(r)}}var Cl=function(e,t){var n=fl((function(e){return e.type===t}))(e.selection);if(!n)return!0;var r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;var o=e.doc.nodeAt(r);return n.node.type!==(null==o?void 0:o.type)||!It(e.doc,n.pos)||(e.join(n.pos),!0)},Sl=function(e,t){var n=fl((function(e){return e.type===t}))(e.selection);if(!n)return!0;var r=e.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;var o=e.doc.nodeAt(r);return n.node.type!==(null==o?void 0:o.type)||!It(e.doc,r)||(e.join(r),!0)},_l=Object.freeze({__proto__:null,blur:function(){return function(e){var t=e.editor,n=e.view;return requestAnimationFrame((function(){var e;t.isDestroyed||(n.dom.blur(),null===(e=null===window||void 0===window?void 0:window.getSelection())||void 0===e||e.removeAllRanges())})),!0}},clearContent:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t){return t.commands.setContent("",e)}},clearNodes:function(){return function(e){var t=e.state,n=e.tr,r=e.dispatch,o=n.selection.ranges;return!r||(o.forEach((function(e){var r=e.$from,o=e.$to;t.doc.nodesBetween(r.pos,o.pos,(function(e,t){if(!e.type.isText){var r=n.doc,o=n.mapping,i=r.resolve(o.map(t)),a=r.resolve(o.map(t+e.nodeSize)),s=i.blockRange(a);if(s){var l=Tt(s);if(e.type.isTextblock){var c=i.parent.contentMatchAt(i.index()).defaultType;n.setNodeMarkup(s.start,c)}(l||0===l)&&n.lift(s,l)}}}))})),!0)}},command:function(e){return function(t){return e(t)}},createParagraphNear:function(){return function(e){var t=e.state,n=e.dispatch;return Ra(t,n)}},cut:function(e,t){return function(n){var r=n.editor,o=n.tr,i=r.state.doc.slice(e.from,e.to);o.deleteRange(e.from,e.to);var a=o.mapping.map(t);return o.insert(a,i.content),o.setSelection(new bn(o.doc.resolve(a-1))),!0}},deleteCurrentNode:function(){return function(e){var t=e.tr,n=e.dispatch,r=t.selection.$anchor.node();if(r.content.size>0)return!1;for(var o=t.selection.$anchor,i=o.depth;i>0;i-=1)if(o.node(i).type===r.type){if(n){var a=o.before(i),s=o.after(i);t.delete(a,s).scrollIntoView()}return!0}return!1}},deleteNode:function(e){return function(t){for(var n=t.tr,r=t.state,o=t.dispatch,i=gs(e,r.schema),a=n.selection.$anchor,s=a.depth;s>0;s-=1)if(a.node(s).type===i){if(o){var l=a.before(s),c=a.after(s);n.delete(l,c).scrollIntoView()}return!0}return!1}},deleteRange:function(e){return function(t){var n=t.tr,r=t.dispatch,o=e.from,i=e.to;return r&&n.delete(o,i),!0}},deleteSelection:function(){return function(e){var t=e.state,n=e.dispatch;return xa(t,n)}},enter:function(){return function(e){return e.commands.keyboardShortcut("Enter")}},exitCode:function(){return function(e){var t=e.state,n=e.dispatch;return La(t,n)}},extendMarkRange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=qs(e,o.schema),s=r.doc,l=r.selection,c=l.$from,u=l.from,d=l.to;if(i){var f=Ws(c,a,t);if(f&&f.from<=u&&f.to>=d){var p=bn.create(s,f.from,f.to);r.setSelection(p)}}return!0}},first:function(e){return function(t){for(var n="function"==typeof e?e(t):e,r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1}},focus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.editor,o=n.view,i=n.tr,a=n.dispatch;t=ls({scrollIntoView:!0},t);var s=function(){(Ys()||Xs())&&o.dom.focus(),requestAnimationFrame((function(){r.isDestroyed||(o.focus(),(null==t?void 0:t.scrollIntoView)&&r.commands.scrollIntoView())}))};if(o.hasFocus()&&null===e||!1===e)return!0;if(a&&null===e&&!Ks(r.state.selection))return s(),!0;var l=Js(i.doc,e)||r.state.selection,c=r.state.selection.eq(l);return a&&(c||i.setSelection(l),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0}},forEach:function(e,t){return function(n){return e.every((function(e,r){return t(e,ls(ls({},n),{},{index:r}))}))}},insertContent:function(e,t){return function(n){var r=n.tr;return n.commands.insertContentAt({from:r.selection.from,to:r.selection.to},e,t)}},insertContentAt:function(e,t,n){return function(r){var o,i=r.tr,a=r.dispatch,s=r.editor;if(a){var l;n=ls({parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1},n);try{l=tl(t,s.schema,{parseOptions:ls({preserveWhitespace:"full"},n.parseOptions),errorOnInvalidContent:null!==(o=n.errorOnInvalidContent)&&void 0!==o?o:s.options.enableContentCheck})}catch(e){return s.emit("contentError",{editor:s,error:e,disableCollaboration:function(){s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}var c,u="number"==typeof e?{from:e,to:e}:{from:e.from,to:e.to},d=u.from,f=u.to,p=!0,h=!0;if(("type"in l?[l]:l).forEach((function(e){e.check(),p=!!p&&e.isText&&0===e.marks.length,h=!!h&&e.isBlock})),d===f&&h){var m=i.doc.resolve(d).parent;m.isTextblock&&!m.type.spec.code&&!m.childCount&&(d-=1,f+=1)}if(p){if(Array.isArray(t))c=t.map((function(e){return e.text||""})).join("");else if(t instanceof Z){var v="";t.forEach((function(e){e.text&&(v+=e.text)})),c=v}else c="object"===Ya(t)&&t&&t.text?t.text:t;i.insertText(c,d,f)}else c=l,i.replaceWith(d,f,c);n.updateSelection&&nl(i,i.steps.length-1,-1),n.applyInputRules&&i.setMeta("applyInputRules",{from:d,text:c}),n.applyPasteRules&&i.setMeta("applyPasteRules",{from:d,text:c})}return!0}},joinBackward:function(){return function(e){var t=e.state,n=e.dispatch;return Sa(t,n)}},joinDown:function(){return function(e){return function(e,t){var n,r=e.selection;if(r instanceof wn){if(r.node.isTextblock||!It(e.doc,r.to))return!1;n=r.to}else if(null==(n=Ft(e.doc,r.to,1)))return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0}(e.state,e.dispatch)}},joinForward:function(){return function(e){var t=e.state,n=e.dispatch;return Oa(t,n)}},joinItemBackward:function(){return function(e){var t=e.state,n=e.dispatch,r=e.tr;try{var o=Ft(t.doc,t.selection.$from.pos,-1);return null!=o&&(r.join(o,2),n&&n(r),!0)}catch(e){return!1}}},joinItemForward:function(){return function(e){var t=e.state,n=e.dispatch,r=e.tr;try{var o=Ft(t.doc,t.selection.$from.pos,1);return null!=o&&(r.join(o,2),n&&n(r),!0)}catch(e){return!1}}},joinTextblockBackward:function(){return function(e){return function(e,t){var n=Ca(e,void 0);if(!n)return!1;var r=Ma(n);return!!r&&_a(e,r,t)}(e.state,e.dispatch)}},joinTextblockForward:function(){return function(e){return function(e,t){var n=Aa(e,void 0);if(!n)return!1;var r=ja(n);return!!r&&_a(e,r,t)}(e.state,e.dispatch)}},joinUp:function(){return function(e){return function(e,t){var n,r=e.selection,o=r instanceof wn;if(o){if(r.node.isTextblock||!It(e.doc,r.from))return!1;n=r.from}else if(null==(n=Ft(e.doc,r.from,-1)))return!1;if(t){var i=e.tr.join(n);o&&i.setSelection(wn.create(i.doc,n-e.doc.resolve(n).nodeBefore.nodeSize)),t(i.scrollIntoView())}return!0}(e.state,e.dispatch)}},keyboardShortcut:function(e){return function(t){var n=t.editor,r=t.view,o=t.tr,i=t.dispatch,a=function(e){var t,n,r,o,i=e.split(/-(?!$)/),a=i[i.length-1];"Space"===a&&(a=" ");for(var s=0;s<i.length-1;s+=1){var l=i[s];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else if(/^s(hift)?$/i.test(l))r=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: ".concat(l));Ys()||rl()?o=!0:n=!0}}return t&&(a="Alt-".concat(a)),n&&(a="Ctrl-".concat(a)),o&&(a="Meta-".concat(a)),r&&(a="Shift-".concat(a)),a}(e).split(/-(?!$)/),s=a.find((function(e){return!["Alt","Ctrl","Meta","Shift"].includes(e)})),l=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),c=n.captureTransaction((function(){r.someProp("handleKeyDown",(function(e){return e(r,l)}))}));return null==c||c.steps.forEach((function(e){var t=e.map(o.mapping);t&&i&&o.maybeStep(t)})),!0}},lift:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.dispatch;return!!ol(r,gs(e,r.schema),t)&&function(e,t){var n=e.selection,r=n.$from,o=n.$to,i=r.blockRange(o),a=i&&Tt(i);return null!=a&&(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)}(r,o)}},liftEmptyBlock:function(){return function(e){var t=e.state,n=e.dispatch;return Ia(t,n)}},liftListItem:function(e){return function(t){var n,r=t.state,o=t.dispatch;return(n=gs(e,r.schema),function(e,t){var r=e.selection,o=r.$from,i=r.$to,a=o.blockRange(i,(function(e){return e.childCount>0&&e.firstChild.type==n}));return!!a&&(!t||(o.node(a.depth-1).type==n?function(e,t,n,r){var o=e.tr,i=r.end,a=r.$to.end(r.depth);i<a&&(o.step(new Dt(i-1,a,i,a,new te(Z.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new ge(o.doc.resolve(r.$from.pos),o.doc.resolve(a),r.depth));var s=Tt(r);if(null==s)return!1;o.lift(r,s);var l=o.doc.resolve(o.mapping.map(i,-1)-1);return It(o.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&o.join(l.pos),t(o.scrollIntoView()),!0}(e,t,n,a):function(e,t,n){for(var r=e.tr,o=n.parent,i=n.end,a=n.endIndex-1,s=n.startIndex;a>s;a--)i-=o.child(a).nodeSize,r.delete(i-1,i+1);var l=r.doc.resolve(n.start),c=l.nodeAfter;if(r.mapping.map(n.end)!=n.start+l.nodeAfter.nodeSize)return!1;var u=0==n.startIndex,d=n.endIndex==o.childCount,f=l.node(-1),p=l.index(-1);if(!f.canReplace(p+(u?0:1),p+1,c.content.append(d?Z.empty:Z.from(o))))return!1;var h=l.pos,m=h+c.nodeSize;return r.step(new Dt(h-(u?1:0),m+(d?1:0),h+1,m-1,new te((u?Z.empty:Z.from(o.copy(Z.empty))).append(d?Z.empty:Z.from(o.copy(Z.empty))),u?0:1,d?0:1),u?0:1)),t(r.scrollIntoView()),!0}(e,t,a)))})(r,o)}},newlineInCode:function(){return function(e){var t=e.state,n=e.dispatch;return Na(t,n)}},resetAttributes:function(e,t){return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=null,s=null,l=il("string"==typeof e?e:e.name,o.schema);return!!l&&("node"===l&&(a=gs(e,o.schema)),"mark"===l&&(s=qs(e,o.schema)),i&&r.selection.ranges.forEach((function(e){o.doc.nodesBetween(e.$from.pos,e.$to.pos,(function(e,n){a&&a===e.type&&r.setNodeMarkup(n,void 0,al(e.attrs,t)),s&&e.marks.length&&e.marks.forEach((function(o){s===o.type&&r.addMark(n,n+e.nodeSize,s.create(al(o.attrs,t)))}))}))})),!0)}},scrollIntoView:function(){return function(e){var t=e.tr;return e.dispatch&&t.scrollIntoView(),!0}},selectAll:function(){return function(e){var t=e.tr;if(e.dispatch){var n=new Cn(t.doc);t.setSelection(n)}return!0}},selectNodeBackward:function(){return function(e){var t=e.state,n=e.dispatch;return Da(t,n)}},selectNodeForward:function(){return function(e){var t=e.state,n=e.dispatch;return Ta(t,n)}},selectParentNode:function(){return function(e){return function(e,t){var n,r=e.selection,o=r.$from,i=r.to,a=o.sharedDepth(i);return 0!=a&&(n=o.before(a),t&&t(e.tr.setSelection(wn.create(e.doc,n))),!0)}(e.state,e.dispatch)}},selectTextblockEnd:function(){return function(e){var t=e.state,n=e.dispatch;return za(t,n)}},selectTextblockStart:function(){return function(e){var t=e.state,n=e.dispatch;return Ha(t,n)}},setContent:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(o){var i,a,s=o.editor,l=o.tr,c=o.dispatch,u=o.commands,d=l.doc;if("full"!==n.preserveWhitespace){var f=sl(e,s.schema,n,{errorOnInvalidContent:null!==(i=r.errorOnInvalidContent)&&void 0!==i?i:s.options.enableContentCheck});return c&&l.replaceWith(0,d.content.size,f).setMeta("preventUpdate",!t),!0}return c&&l.setMeta("preventUpdate",!t),u.insertContentAt({from:0,to:d.content.size},e,{parseOptions:n,errorOnInvalidContent:null!==(a=r.errorOnInvalidContent)&&void 0!==a?a:s.options.enableContentCheck})}},setMark:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=r.selection,s=a.empty,l=a.ranges,c=qs(e,o.schema);if(i)if(s){var u=ll(o,c);r.addStoredMark(c.create(ls(ls({},u),t)))}else l.forEach((function(e){var n=e.$from.pos,i=e.$to.pos;o.doc.nodesBetween(n,i,(function(e,o){var a=Math.max(o,n),s=Math.min(o+e.nodeSize,i),l=e.marks.find((function(e){return e.type===c}));l?e.marks.forEach((function(e){c===e.type&&r.addMark(a,s,c.create(ls(ls({},e.attrs),t)))})):r.addMark(a,s,c.create(t))}))}));return function(e,t,n){var r,o=t.selection,i=null;if(Ks(o)&&(i=o.$cursor),i){var a=null!==(r=e.storedMarks)&&void 0!==r?r:i.marks();return!!n.isInSet(a)||!a.some((function(e){return e.type.excludes(n)}))}return o.ranges.some((function(t){var r=t.$from,o=t.$to,i=0===r.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(r.pos,o.pos,(function(e,t,r){if(i)return!1;if(e.isInline){var o=!r||r.type.allowsMarkType(n),a=!!n.isInSet(e.marks)||!e.marks.some((function(e){return e.type.excludes(n)}));i=o&&a}return!i})),i}))}(o,r,c)}},setMeta:function(e,t){return function(n){return n.tr.setMeta(e,t),!0}},setNode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r,o=n.state,i=n.dispatch,a=n.chain,s=gs(e,o.schema);return o.selection.$anchor.sameParent(o.selection.$head)&&(r=o.selection.$anchor.parent.attrs),s.isTextblock?a().command((function(e){var n=e.commands;return!!Va(s,ls(ls({},r),t))(o)||n.clearNodes()})).command((function(e){var n=e.state;return Va(s,ls(ls({},r),t))(n,i)})).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)}},setNodeSelection:function(e){return function(t){var n=t.tr;if(t.dispatch){var r=n.doc,o=Zs(e,0,r.content.size),i=wn.create(r,o);n.setSelection(i)}return!0}},setTextSelection:function(e){return function(t){var n=t.tr;if(t.dispatch){var r=n.doc,o="number"==typeof e?{from:e,to:e}:e,i=o.from,a=o.to,s=bn.atStart(r).from,l=bn.atEnd(r).to,c=Zs(i,s,l),u=Zs(a,s,l),d=bn.create(r,c,u);n.setSelection(d)}return!0}},sinkListItem:function(e){return function(t){var n,r=t.state,o=t.dispatch,i=gs(e,r.schema);return(n=i,function(e,t){var r=e.selection,o=r.$from,i=r.$to,a=o.blockRange(i,(function(e){return e.childCount>0&&e.firstChild.type==n}));if(!a)return!1;var s=a.startIndex;if(0==s)return!1;var l=a.parent,c=l.child(s-1);if(c.type!=n)return!1;if(t){var u=c.lastChild&&c.lastChild.type==l.type,d=Z.from(u?n.create():null),f=new te(Z.from(n.create(null,Z.from(l.type.create(null,d)))),u?3:1,0),p=a.start,h=a.end;t(e.tr.step(new Dt(p-(u?3:1),h,p,h,f,1,!0)).scrollIntoView())}return!0})(r,o)}},splitBlock:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).keepMarks,t=void 0===e||e;return function(e){var n=e.tr,r=e.state,o=e.dispatch,i=e.editor,a=n.selection,s=n.doc,l=a.$from,c=a.$to,u=vl(i.extensionManager.attributes,l.node().type.name,l.node().attrs);if(a instanceof wn&&a.node.isBlock)return!(!l.parentOffset||!Rt(s,l.pos)||(o&&(t&&xl(r,i.extensionManager.splittableMarks),n.split(l.pos).scrollIntoView()),0));if(!l.parent.isBlock)return!1;var d=c.parentOffset===c.parent.content.size,f=0===l.depth?void 0:function(e){for(var t=0;t<e.edgeCount;t+=1){var n=e.edge(t).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(l.node(-1).contentMatchAt(l.indexAfter(-1))),p=d&&f?[{type:f,attrs:u}]:void 0,h=Rt(n.doc,n.mapping.map(l.pos),1,p);if(p||h||!Rt(n.doc,n.mapping.map(l.pos),1,f?[{type:f}]:void 0)||(h=!0,p=f?[{type:f,attrs:u}]:void 0),o){if(h&&(a instanceof bn&&n.deleteSelection(),n.split(n.mapping.map(l.pos),1,p),f&&!d&&!l.parentOffset&&l.parent.type!==f)){var m=n.mapping.map(l.before()),v=n.doc.resolve(m);l.node(-1).canReplaceWith(v.index(),v.index()+1,f)&&n.setNodeMarkup(n.mapping.map(l.before()),f)}t&&xl(r,i.extensionManager.splittableMarks),n.scrollIntoView()}return h}},splitListItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r,o=n.tr,i=n.state,a=n.dispatch,s=n.editor,l=gs(e,i.schema),c=i.selection,u=c.$from,d=c.$to,f=i.selection.node;if(f&&f.isBlock||u.depth<2||!u.sameParent(d))return!1;var p=u.node(-1);if(p.type!==l)return!1;var h=s.extensionManager.attributes;if(0===u.parent.content.size&&u.node(-1).childCount===u.indexAfter(-1)){if(2===u.depth||u.node(-3).type!==l||u.index(-2)!==u.node(-2).childCount-1)return!1;if(a){for(var m=Z.empty,v=u.index(-1)?1:u.index(-2)?2:3,g=u.depth-v;g>=u.depth-3;g-=1)m=Z.from(u.node(g).copy(m));var y=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,b=ls(ls({},vl(h,u.node().type.name,u.node().attrs)),t),k=(null===(r=l.contentMatch.defaultType)||void 0===r?void 0:r.createAndFill(b))||void 0;m=m.append(Z.from(l.createAndFill(null,k)||void 0));var w=u.before(u.depth-(v-1));o.replace(w,u.after(-y),new te(m,4-v,0));var x=-1;o.doc.nodesBetween(w,o.doc.content.size,(function(e,t){if(x>-1)return!1;e.isTextblock&&0===e.content.size&&(x=t+1)})),x>-1&&o.setSelection(bn.near(o.doc.resolve(x))),o.scrollIntoView()}return!0}var C=d.pos===u.end()?p.contentMatchAt(0).defaultType:null,S=ls(ls({},vl(h,p.type.name,p.attrs)),t),_=ls(ls({},vl(h,u.node().type.name,u.node().attrs)),t);o.delete(u.pos,d.pos);var E=C?[{type:l,attrs:S},{type:C,attrs:_}]:[{type:l,attrs:S}];if(!Rt(o.doc,u.pos,2))return!1;if(a){var D=i.selection,M=i.storedMarks,A=s.extensionManager.splittableMarks,O=M||D.$to.parentOffset&&D.$from.marks();if(o.split(u.pos,2,E).scrollIntoView(),!O||!a)return!0;var T=O.filter((function(e){return A.includes(e.type.name)}));o.ensureMarks(T)}return!0}},toggleList:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(o){var i=o.editor,a=o.tr,s=o.state,l=o.dispatch,c=o.chain,u=o.commands,d=o.can,f=i.extensionManager,p=f.extensions,h=f.splittableMarks,m=gs(e,s.schema),v=gs(t,s.schema),g=s.selection,y=s.storedMarks,b=g.$from,k=g.$to,w=b.blockRange(k),x=y||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;var C=fl((function(e){return yl(e.type.name,p)}))(g);if(w.depth>=1&&C&&w.depth-C.depth<=1){if(C.node.type===m)return u.liftListItem(v);if(yl(C.node.type.name,p)&&m.validContent(C.node.content)&&l)return c().command((function(){return a.setNodeMarkup(C.pos,m),!0})).command((function(){return Cl(a,m)})).command((function(){return Sl(a,m)})).run()}return n&&x&&l?c().command((function(){var e=d().wrapInList(m,r),t=x.filter((function(e){return h.includes(e.type.name)}));return a.ensureMarks(t),!!e||u.clearNodes()})).wrapInList(m,r).command((function(){return Cl(a,m)})).command((function(){return Sl(a,m)})).run():c().command((function(){return!!d().wrapInList(m,r)||u.clearNodes()})).wrapInList(m,r).command((function(){return Cl(a,m)})).command((function(){return Sl(a,m)})).run()}},toggleMark:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var o=r.state,i=r.commands,a=n.extendEmptyMarkRange,s=void 0!==a&&a,l=qs(e,o.schema);return gl(o,l,t)?i.unsetMark(l,{extendEmptyMarkRange:s}):i.setMark(l,t)}},toggleNode:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var o,i=r.state,a=r.commands,s=gs(e,i.schema),l=gs(t,i.schema),c=ol(i,s,n);return i.selection.$anchor.sameParent(i.selection.$head)&&(o=i.selection.$anchor.parent.attrs),c?a.setNode(l,o):a.setNode(s,ls(ls({},o),n))}},toggleWrap:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.commands,i=gs(e,r.schema);return ol(r,i,t)?o.lift(i):o.wrapIn(i,t)}},undoInputRule:function(){return function(e){for(var t=e.state,n=e.dispatch,r=t.plugins,o=0;o<r.length;o+=1){var i=r[o],a=void 0;if(i.spec.isInputRules&&(a=i.getState(t))){if(n){for(var s=t.tr,l=a.transform,c=l.steps.length-1;c>=0;c-=1)s.step(l.steps[c].invert(l.docs[c]));if(a.text){var u=s.doc.resolve(a.from).marks();s.replaceWith(a.from,a.to,t.schema.text(a.text,u))}else s.delete(a.from,a.to)}return!0}}return!1}},unsetAllMarks:function(){return function(e){var t=e.tr,n=e.dispatch,r=t.selection,o=r.empty,i=r.ranges;return o||n&&i.forEach((function(e){t.removeMark(e.$from.pos,e.$to.pos)})),!0}},unsetMark:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r,o=n.tr,i=n.state,a=n.dispatch,s=t.extendEmptyMarkRange,l=void 0!==s&&s,c=o.selection,u=qs(e,i.schema),d=c.$from,f=c.empty,p=c.ranges;if(!a)return!0;if(f&&l){var h=c.from,m=c.to,v=null===(r=d.marks().find((function(e){return e.type===u})))||void 0===r?void 0:r.attrs,g=Ws(d,u,v);g&&(h=g.from,m=g.to),o.removeMark(h,m,u)}else p.forEach((function(e){o.removeMark(e.$from.pos,e.$to.pos,u)}));return o.removeStoredMark(u),!0}},updateAttributes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=null,s=null,l=il("string"==typeof e?e:e.name,o.schema);return!!l&&("node"===l&&(a=gs(e,o.schema)),"mark"===l&&(s=qs(e,o.schema)),i&&r.selection.ranges.forEach((function(e){var n,i,l,c,u=e.$from.pos,d=e.$to.pos;r.selection.empty?o.doc.nodesBetween(u,d,(function(e,t){a&&a===e.type&&(l=Math.max(t,u),c=Math.min(t+e.nodeSize,d),n=t,i=e)})):o.doc.nodesBetween(u,d,(function(e,o){o<u&&a&&a===e.type&&(l=Math.max(o,u),c=Math.min(o+e.nodeSize,d),n=o,i=e),o>=u&&o<=d&&(a&&a===e.type&&r.setNodeMarkup(o,void 0,ls(ls({},e.attrs),t)),s&&e.marks.length&&e.marks.forEach((function(n){if(s===n.type){var i=Math.max(o,u),a=Math.min(o+e.nodeSize,d);r.addMark(i,a,s.create(ls(ls({},n.attrs),t)))}})))})),i&&(void 0!==n&&r.setNodeMarkup(n,void 0,ls(ls({},i.attrs),t)),s&&i.marks.length&&i.marks.forEach((function(e){s===e.type&&r.addMark(l,c,s.create(ls(ls({},e.attrs),t)))})))})),!0)}},wrapIn:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.dispatch;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){var o=n.selection,i=o.$from,a=o.$to,s=i.blockRange(a),l=s&&jt(s,e,t);return!!l&&(r&&r(n.tr.wrap(s,l).scrollIntoView()),!0)}}(gs(e,r.schema),t)(r,o)}},wrapInList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.dispatch;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){var o=n.selection,i=o.$from,a=o.$to,s=i.blockRange(a);if(!s)return!1;var l=r?n.tr:null;return!!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=!1,i=t,a=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&0==t.startIndex){if(0==t.$from.index(t.depth-1))return!1;var s=a.resolve(t.start-2);i=new ge(s,s,t.depth),t.endIndex<t.parent.childCount&&(t=new ge(t.$from,a.resolve(t.$to.end(t.depth)),t.depth)),o=!0}var l=jt(i,n,r,t);return!!l&&(e&&function(e,t,n,r,o){for(var i=Z.empty,a=n.length-1;a>=0;a--)i=Z.from(n[a].type.create(n[a].attrs,i));e.step(new Dt(t.start-(r?2:0),t.end,t.start,t.end,new te(i,0,0),n.length,!0));for(var s=0,l=0;l<n.length;l++)n[l].type==o&&(s=l+1);for(var c=n.length-s,u=t.start+n.length-(r?2:0),d=t.parent,f=t.startIndex,p=t.endIndex,h=!0;f<p;f++,h=!1)!h&&Rt(e.doc,u,c)&&(e.split(u,c),u+=2*c),u+=d.child(f).nodeSize}(e,t,l,o,n),!0)}(l,s,e,t)&&(r&&r(l.scrollIntoView()),!0)}}(gs(e,r.schema),t)(r,o)}}}),El=Fs.create({name:"commands",addCommands:function(){return ls({},_l)}}),Dl=Fs.create({name:"drop",addProseMirrorPlugins:function(){var e=this;return[new Pn({key:new In("tiptapDrop"),props:{handleDrop:function(t,n,r,o){e.editor.emit("drop",{editor:e.editor,event:n,slice:r,moved:o})}}})]}}),Ml=Fs.create({name:"editable",addProseMirrorPlugins:function(){var e=this;return[new Pn({key:new In("editable"),props:{editable:function(){return e.editor.options.editable}}})]}}),Al=Fs.create({name:"focusEvents",addProseMirrorPlugins:function(){var e=this.editor;return[new Pn({key:new In("focusEvents"),props:{handleDOMEvents:{focus:function(t,n){e.isFocused=!0;var r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:function(t,n){e.isFocused=!1;var r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),Ol=Fs.create({name:"keymap",addKeyboardShortcuts:function(){var e=this,t=function(){return e.editor.commands.first((function(e){var t=e.commands;return[function(){return t.undoInputRule()},function(){return t.command((function(e){var n=e.tr,r=n.selection,o=n.doc,i=r.empty,a=r.$anchor,s=a.pos,l=a.parent,c=a.parent.isTextblock&&s>0?n.doc.resolve(s-1):a,u=c.parent.type.spec.isolating,d=a.pos-a.parentOffset,f=u&&1===c.parent.childCount?d===a.pos:mn.atStart(o).from===s;return!(!i||!l.type.isTextblock||l.textContent.length||!f||f&&"paragraph"===a.parent.type.name)&&t.clearNodes()}))},function(){return t.deleteSelection()},function(){return t.joinBackward()},function(){return t.selectNodeBackward()}]}))},n=function(){return e.editor.commands.first((function(e){var t=e.commands;return[function(){return t.deleteSelection()},function(){return t.deleteCurrentNode()},function(){return t.joinForward()},function(){return t.selectNodeForward()}]}))},r={Enter:function(){return e.editor.commands.first((function(e){var t=e.commands;return[function(){return t.newlineInCode()},function(){return t.createParagraphNear()},function(){return t.liftEmptyBlock()},function(){return t.splitBlock()}]}))},"Mod-Enter":function(){return e.editor.commands.exitCode()},Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:n,"Mod-Delete":n,"Mod-a":function(){return e.editor.commands.selectAll()}},o=ls({},r),i=ls(ls({},r),{},{"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":n,"Ctrl-Alt-Backspace":n,"Alt-Delete":n,"Alt-d":n,"Ctrl-a":function(){return e.editor.commands.selectTextblockStart()},"Ctrl-e":function(){return e.editor.commands.selectTextblockEnd()}});return Ys()||rl()?i:o},addProseMirrorPlugins:function(){var e=this;return[new Pn({key:new In("clearDocument"),appendTransaction:function(t,n,r){if(!t.some((function(e){return e.getMeta("composition")}))){var o=t.some((function(e){return e.docChanged}))&&!n.doc.eq(r.doc),i=t.some((function(e){return e.getMeta("preventClearDocument")}));if(o&&!i){var a=n.selection,s=a.empty,l=a.from,c=a.to,u=mn.atStart(n.doc).from,d=mn.atEnd(n.doc).to;if(!s&&l===u&&c===d&&bl(r.doc)){var f=r.tr,p=ds({state:r,transaction:f});if(new fs({editor:e.editor,state:p}).commands.clearNodes(),f.steps.length)return f}}}}})]}}),Tl=Fs.create({name:"paste",addProseMirrorPlugins:function(){var e=this;return[new Pn({key:new In("tiptapPaste"),props:{handlePaste:function(t,n,r){e.editor.emit("paste",{editor:e.editor,event:n,slice:r})}}})]}}),jl=Fs.create({name:"tabindex",addProseMirrorPlugins:function(){var e=this;return[new Pn({key:new In("tabindex"),props:{attributes:function(){return e.editor.isEditable?{tabindex:"0"}:{}}}})]}}),Nl=Object.freeze({__proto__:null,ClipboardTextSerializer:Vs,Commands:El,Drop:Dl,Editable:Ml,FocusEvents:Al,Keymap:Ol,Paste:Tl,Tabindex:jl}),Pl=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;rs(this,e),this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=o}return as(e,[{key:"name",get:function(){return this.node.type.name}},{key:"node",get:function(){return this.currentNode||this.resolvedPos.node()}},{key:"element",get:function(){return this.editor.view.domAtPos(this.pos).node}},{key:"depth",get:function(){var e;return null!==(e=this.actualDepth)&&void 0!==e?e:this.resolvedPos.depth}},{key:"pos",get:function(){return this.resolvedPos.pos}},{key:"content",get:function(){return this.node.content},set:function(e){var t=this.from,n=this.to;if(this.isBlock){if(0===this.content.size)return void console.error("You can’t set content on a block node. Tried to set content on ".concat(this.name," at ").concat(this.pos));t=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:t,to:n},e)}},{key:"attributes",get:function(){return this.node.attrs}},{key:"textContent",get:function(){return this.node.textContent}},{key:"size",get:function(){return this.node.nodeSize}},{key:"from",get:function(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}},{key:"range",get:function(){return{from:this.from,to:this.to}}},{key:"to",get:function(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}},{key:"parent",get:function(){if(0===this.depth)return null;var t=this.resolvedPos.start(this.resolvedPos.depth-1);return new e(this.resolvedPos.doc.resolve(t),this.editor)}},{key:"before",get:function(){var t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new e(t,this.editor)}},{key:"after",get:function(){var t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new e(t,this.editor)}},{key:"children",get:function(){var t=this,n=[];return this.node.content.forEach((function(r,o){var i=r.isBlock&&!r.isTextblock,a=r.isAtom&&!r.isText,s=t.pos+o+(a?0:1),l=t.resolvedPos.doc.resolve(s);if(i||!(l.depth<=t.depth)){var c=new e(l,t.editor,i,i?r:null);i&&(c.actualDepth=t.depth+1),n.push(new e(l,t.editor,i,i?r:null))}})),n}},{key:"firstChild",get:function(){return this.children[0]||null}},{key:"lastChild",get:function(){var e=this.children;return e[e.length-1]||null}},{key:"closest",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=this.parent;r&&!n;){if(r.node.type.name===e)if(Object.keys(t).length>0)for(var o=r.node.attrs,i=Object.keys(t),a=0;a<i.length;a+=1){var s=i[a];if(o[s]!==t[s])break}else n=r;r=r.parent}return n}},{key:"querySelector",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.querySelectorAll(e,t,!0)[0]||null}},{key:"querySelectorAll",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];if(!this.children||0===this.children.length)return r;var o=Object.keys(t);return this.children.forEach((function(i){if(!(n&&r.length>0)){if(i.node.type.name===e){var a=o.every((function(e){return t[e]===i.node.attrs[e]}));a&&r.push(i)}n&&r.length>0||(r=r.concat(i.querySelectorAll(e,t,n)))}})),r}},{key:"setAttribute",value:function(e){var t=this.editor.state.tr;t.setNodeMarkup(this.from,void 0,ls(ls({},this.node.attrs),e)),this.editor.view.dispatch(t)}}])}(),Ll=function(e){function t(){var e,n,r,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return rs(this,t),(n=this,r=t,r=Ja(r),e=function(e,t){if(t&&("object"==Ya(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(n,Za()?Reflect.construct(r,o||[],Ja(n).constructor):r.apply(n,o))).isFocused=!1,e.isInitialized=!1,e.extensionStorage={},e.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:function(){return null},onCreate:function(){return null},onUpdate:function(){return null},onSelectionUpdate:function(){return null},onTransaction:function(){return null},onFocus:function(){return null},onBlur:function(){return null},onDestroy:function(){return null},onContentError:function(e){throw e.error},onPaste:function(){return null},onDrop:function(){return null}},e.isCapturingTransaction=!1,e.capturedTransaction=null,e.setOptions(i),e.createExtensionManager(),e.createCommandManager(),e.createSchema(),e.on("beforeCreate",e.options.onBeforeCreate),e.emit("beforeCreate",{editor:e}),e.on("contentError",e.options.onContentError),e.createView(),e.injectCSS(),e.on("create",e.options.onCreate),e.on("update",e.options.onUpdate),e.on("selectionUpdate",e.options.onSelectionUpdate),e.on("transaction",e.options.onTransaction),e.on("focus",e.options.onFocus),e.on("blur",e.options.onBlur),e.on("destroy",e.options.onDestroy),e.on("drop",(function(t){var n=t.event,r=t.slice,o=t.moved;return e.options.onDrop(n,r,o)})),e.on("paste",(function(t){var n=t.event,r=t.slice;return e.options.onPaste(n,r)})),window.setTimeout((function(){e.isDestroyed||(e.commands.focus(e.options.autofocus),e.emit("create",{editor:e}),e.isInitialized=!0)}),0),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xa(e,t)}(t,e),as(t,[{key:"storage",get:function(){return this.extensionStorage}},{key:"commands",get:function(){return this.commandManager.commands}},{key:"chain",value:function(){return this.commandManager.chain()}},{key:"can",value:function(){return this.commandManager.can()}},{key:"injectCSS",value:function(){this.options.injectCSS&&document&&(this.css=function(e,t){var n=document.querySelector("style[data-tiptap-style".concat("","]"));if(null!==n)return n;var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.setAttribute("data-tiptap-style".concat(""),""),r.innerHTML='.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 0 !important;\n  height: 0 !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',document.getElementsByTagName("head")[0].appendChild(r),r}(0,this.options.injectNonce))}},{key:"setOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=ls(ls({},this.options),e),this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}},{key:"setEditable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}},{key:"isEditable",get:function(){return this.options.editable&&this.view&&this.view.editable}},{key:"state",get:function(){return this.view.state}},{key:"registerPlugin",value:function(e,t){var n=ks(t)?t(e,Qa(this.state.plugins)):[].concat(Qa(this.state.plugins),[e]),r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}},{key:"unregisterPlugin",value:function(e){if(!this.isDestroyed){var t=this.state.plugins,n=t;if([].concat(e).forEach((function(e){var r="string"==typeof e?"".concat(e,"$"):e.key;n=t.filter((function(e){return!e.key.startsWith(r)}))})),t.length!==n.length){var r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}}}},{key:"createExtensionManager",value:function(){var e,t,n=this,r=this.options.enableCoreExtensions?[Ml,Vs.configure({blockSeparator:null===(t=null===(e=this.options.coreExtensionOptions)||void 0===e?void 0:e.clipboardTextSerializer)||void 0===t?void 0:t.blockSeparator}),El,Al,Ol,jl,Dl,Tl].filter((function(e){return"object"!==Ya(n.options.enableCoreExtensions)||!1!==n.options.enableCoreExtensions[e.name]})):[],o=[].concat(Qa(r),Qa(this.options.extensions)).filter((function(e){return["extension","node","mark"].includes(null==e?void 0:e.type)}));this.extensionManager=new Bs(o,this)}},{key:"createCommandManager",value:function(){this.commandManager=new fs({editor:this})}},{key:"createSchema",value:function(){this.schema=this.extensionManager.schema}},{key:"createView",value:function(){var e,t,n=this;try{t=sl(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error&&["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message)))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:function(){n.storage.collaboration&&(n.storage.collaboration.isDisabled=!0),n.options.extensions=n.options.extensions.filter((function(e){return"collaboration"!==e.name})),n.createExtensionManager()}}),t=sl(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}var r=Js(t,this.options.autofocus);this.view=new aa(this.options.element,ls(ls({},this.options.editorProps),{},{attributes:ls({role:"textbox"},null===(e=this.options.editorProps)||void 0===e?void 0:e.attributes),dispatchTransaction:this.dispatchTransaction.bind(this),state:jn.create({doc:t,selection:r||void 0})}));var o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass(),this.view.dom.editor=this}},{key:"createNodeViews",value:function(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}},{key:"prependClass",value:function(){this.view.dom.className="tiptap ".concat(this.view.dom.className)}},{key:"captureTransaction",value:function(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;var t=this.capturedTransaction;return this.capturedTransaction=null,t}},{key:"dispatchTransaction",value:function(e){var t=this;if(!this.view.isDestroyed){if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach((function(e){var n;return null===(n=t.capturedTransaction)||void 0===n?void 0:n.step(e)})):void(this.capturedTransaction=e);var n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});var o=e.getMeta("focus"),i=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:e})}}},{key:"getAttributes",value:function(e){return pl(this.state,e)}},{key:"isActive",value:function(e,t){var n="string"==typeof e?e:null,r="string"==typeof e?t:e;return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return ol(e,null,n)||gl(e,null,n);var r=il(t,e.schema);return"node"===r?ol(e,t,n):"mark"===r&&gl(e,t,n)}(this.state,n,r)}},{key:"getJSON",value:function(){return this.state.doc.toJSON()}},{key:"getHTML",value:function(){return Ds(this.state.doc.content,this.schema)}},{key:"getText",value:function(e){var t=e||{},n=t.blockSeparator,r=void 0===n?"\n\n":n,o=t.textSerializers,i=void 0===o?{}:o;return function(e,t){return Hs(e,{from:0,to:e.content.size},t)}(this.state.doc,{blockSeparator:r,textSerializers:ls(ls({},zs(this.schema)),i)})}},{key:"isEmpty",get:function(){return bl(this.state.doc)}},{key:"getCharacterCount",value:function(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}},{key:"destroy",value:function(){if(this.emit("destroy"),this.view){var e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}},{key:"isDestroyed",get:function(){var e;return!(null===(e=this.view)||void 0===e?void 0:e.docView)}},{key:"$node",value:function(e,t){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelector(e,t))||null}},{key:"$nodes",value:function(e,t){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelectorAll(e,t))||null}},{key:"$pos",value:function(e){var t=this.state.doc.resolve(e);return new Pl(t,this)}},{key:"$doc",get:function(){return this.$pos(0)}}])}(ps);function Rl(e){return new As({find:e.find,handler:function(t){var n=t.state,r=t.range,o=t.match,i=ws(e.getAttributes,void 0,o);if(!1===i||null===i)return null;var a=n.tr,s=o[o.length-1],l=o[0];if(s){var c=l.search(/\S/),u=r.from+l.indexOf(s),d=u+s.length;if(ml(r.from,r.to,n.doc).filter((function(t){return t.mark.type.excluded.find((function(n){return n===e.type&&n!==t.mark.type}))})).filter((function(e){return e.to>u})).length)return null;d<r.to&&a.delete(d,r.to),u>r.from&&a.delete(r.from+c,u);var f=r.from+c+s.length;a.addMark(r.from+c,f,e.type.create(i||{})),a.removeStoredMark(e.type)}}})}var Il=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};rs(this,e),this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=ls(ls({},this.config),t),this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ws(hs(this,"addOptions",{name:this.name}))),this.storage=ws(hs(this,"addStorage",{name:this.name,options:this.options}))||{}}return as(e,[{key:"configure",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.extend(ls(ls({},this.config),{},{addOptions:function(){return Ns(e.options,t)}}));return n.name=this.name,n.parent=this.parent,n}},{key:"extend",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new e(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(n.name,'".')),n.options=ws(hs(n,"addOptions",{name:n.name})),n.storage=ws(hs(n,"addStorage",{name:n.name,options:n.options})),n}}],[{key:"create",value:function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}}])}(),Bl=function(){return as((function e(t,n,r){rs(this,e),this.isDragging=!1,this.component=t,this.editor=n.editor,this.options=ls({stopEvent:null,ignoreMutation:null},r),this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.innerDecorations=n.innerDecorations,this.view=n.view,this.HTMLAttributes=n.HTMLAttributes,this.getPos=n.getPos,this.mount()}),[{key:"mount",value:function(){}},{key:"dom",get:function(){return this.editor.view.dom}},{key:"contentDOM",get:function(){return null}},{key:"onDragStart",value:function(e){var t,n,r,o,i,a,s,l=this.editor.view,c=e.target,u=3===c.nodeType?null===(t=c.parentElement)||void 0===t?void 0:t.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(this.dom&&!(null===(n=this.contentDOM)||void 0===n?void 0:n.contains(c))&&u){var d=0,f=0;if(this.dom!==u){var p=this.dom.getBoundingClientRect(),h=u.getBoundingClientRect(),m=null!==(r=e.offsetX)&&void 0!==r?r:null===(o=e.nativeEvent)||void 0===o?void 0:o.offsetX,v=null!==(i=e.offsetY)&&void 0!==i?i:null===(a=e.nativeEvent)||void 0===a?void 0:a.offsetY;d=h.x-p.x+m,f=h.y-p.y+v}null===(s=e.dataTransfer)||void 0===s||s.setDragImage(this.dom,d,f);var g=this.getPos();if("number"==typeof g){var y=wn.create(l.state.doc,g),b=l.state.tr.setSelection(y);l.dispatch(b)}}}},{key:"stopEvent",value:function(e){var t,n=this;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:e});var r=e.target;if(!this.dom.contains(r)||(null===(t=this.contentDOM)||void 0===t?void 0:t.contains(r)))return!1;var o=e.type.startsWith("drag"),i="drop"===e.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!i&&!o)return!0;var a=this.editor.isEditable,s=this.isDragging,l=!!this.node.type.spec.draggable,c=wn.isSelectable(this.node),u="copy"===e.type,d="paste"===e.type,f="cut"===e.type,p="mousedown"===e.type;if(!l&&c&&o&&e.target===this.dom&&e.preventDefault(),l&&o&&!s&&e.target===this.dom)return e.preventDefault(),!1;if(l&&a&&!s&&p){var h=r.closest("[data-drag-handle]");h&&(this.dom===h||this.dom.contains(h))&&(this.isDragging=!0,document.addEventListener("dragend",(function(){n.isDragging=!1}),{once:!0}),document.addEventListener("drop",(function(){n.isDragging=!1}),{once:!0}),document.addEventListener("mouseup",(function(){n.isDragging=!1}),{once:!0}))}return!(s||i||u||d||f||p&&c)}},{key:"ignoreMutation",value:function(e){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:e}):!(!this.node.isLeaf&&!this.node.isAtom)||"selection"!==e.type&&(!(this.dom.contains(e.target)&&"childList"===e.type&&(Ys()||Xs())&&this.editor.isFocused&&[].concat(Qa(Array.from(e.addedNodes)),Qa(Array.from(e.removedNodes))).every((function(e){return e.isContentEditable})))&&(this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target))))}},{key:"updateAttributes",value:function(e){var t=this;this.editor.commands.command((function(n){var r=n.tr,o=t.getPos();return"number"==typeof o&&(r.setNodeMarkup(o,void 0,ls(ls({},t.node.attrs),e)),!0)}))}},{key:"deleteNode",value:function(){var e=this.getPos();if("number"==typeof e){var t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}}}])}();function Fl(e){return new Ls({find:e.find,handler:function(t){var n=t.state,r=t.range,o=t.match,i=t.pasteEvent,a=ws(e.getAttributes,void 0,o,i);if(!1===a||null===a)return null;var s=n.tr,l=o[o.length-1],c=o[0],u=r.to;if(l){var d=c.search(/\S/),f=r.from+c.indexOf(l),p=f+l.length;if(ml(r.from,r.to,n.doc).filter((function(t){return t.mark.type.excluded.find((function(n){return n===e.type&&n!==t.mark.type}))})).filter((function(e){return e.to>f})).length)return null;p<r.to&&s.delete(p,r.to),f>r.from&&s.delete(r.from+d,f),u=r.from+d+l.length,s.addMark(r.from+d,u,e.type.create(a||{})),s.removeStoredMark(e.type)}}})}var Hl,zl=new Uint8Array(16);function Vl(){if(!Hl&&!(Hl="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Hl(zl)}const $l=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var Ul=[],Gl=0;Gl<256;++Gl)Ul.push((Gl+256).toString(16).substr(1));const Wl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Ul[e[t+0]]+Ul[e[t+1]]+Ul[e[t+2]]+Ul[e[t+3]]+"-"+Ul[e[t+4]]+Ul[e[t+5]]+"-"+Ul[e[t+6]]+Ul[e[t+7]]+"-"+Ul[e[t+8]]+Ul[e[t+9]]+"-"+Ul[e[t+10]]+Ul[e[t+11]]+Ul[e[t+12]]+Ul[e[t+13]]+Ul[e[t+14]]+Ul[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&$l.test(e)}(n))throw TypeError("Stringified UUID is invalid");return n},ql=function(e,t,n){var r=(e=e||{}).random||(e.rng||Vl)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return Wl(r)};function Kl(e){return Kl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kl(e)}function Zl(e){return function(e){if(Array.isArray(e))return Yl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Xl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||Xl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xl(e,t){if(e){if("string"==typeof e)return Yl(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yl(e,t):void 0}}function Yl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ql(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ec(r.key),r)}}function ec(e){var t=function(e){if("object"!=Kl(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Kl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Kl(t)?t:t+""}var tc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache=new Map(t)}return function(e,t){return t&&Ql(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(e,[{key:"get",value:function(e){return this.cache.get(e)}},{key:"set",value:function(e,t,n){e<0||this.cache.set(e,[t,n])}},{key:"replace",value:function(e,t,n,r){this.remove(e),this.set(t,n,r)}},{key:"remove",value:function(e){this.cache.delete(e)}},{key:"invalidate",value:function(t){var n=new e(this.cache),r=t.mapping;return this.cache.forEach((function(e,o){var i=Jl(e,2),a=i[0],s=i[1];if(!(o<0)){var l=r.mapResult(o),c=t.doc.nodeAt(l.pos);if(l.deleted||!(null==c?void 0:c.eq(a)))n.remove(o);else if(o!==l.pos){var u=s.map((function(e){return e.map(r,0,0)})).filter((function(e){return null!=e}));n.replace(o,l.pos,c,u)}}})),n}}])}();function nc(e){var t=e.parser,n=e.nodeTypes,r=void 0===n?["code_block"]:n,o=e.languageExtractor,i=void 0===o?function(e){return e.attrs.language}:o,a=new In;return new Pn({key:a,state:{init:function(e,n){var o=new tc,a=Jl(rc(n.doc,t,r,i,o),2);return{cache:o,decorations:a[0],promises:a[1]}},apply:function(e,n){var o=n.cache.invalidate(e),a=!!e.getMeta("prosemirror-highlight-refresh");if(!e.docChanged&&!a)return{cache:o,decorations:n.decorations.map(e.mapping,e.doc),promises:n.promises};var s=Jl(rc(e.doc,t,r,i,o),2);return{cache:o,decorations:s[0],promises:s[1]}}},view:function(e){var t=new Set,n=function(){var n,r,o=a.getState(e.state),i=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Xl(e))){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==t.return||t.return()}finally{if(a)throw o}}}}(null!=(n=null==o?void 0:o.promises)?n:[]);try{var s=function(){var n=r.value;t.add(n),n.then((function(){t.delete(n),function(){if(!(t.size>0)){var n=e.state.tr.setMeta("prosemirror-highlight-refresh",!0);e.dispatch(n)}}()})).catch((function(){t.delete(n)}))};for(i.s();!(r=i.n()).done;)s()}catch(e){i.e(e)}finally{i.f()}};return n(),{update:function(){n()}}},props:{decorations:function(e){var t;return null==(t=this.getState(e))?void 0:t.decorations}}})}function rc(e,t,n,r,o){var i=[],a=[];return e.descendants((function(e,s){if(!e.type.isTextblock)return!0;if(n.includes(e.type.name)){var l=r(e),c=o.get(s);if(c){var u=Jl(c,2),d=(u[0],u[1]);i.push.apply(i,Zl(d))}else{var f=t({content:e.textContent,language:l||void 0,pos:s});f&&Array.isArray(f)?(o.set(s,e,f),i.push.apply(i,Zl(f))):f instanceof Promise&&(o.remove(s),a.push(f))}}return!1})),[Li.create(e,i),a]}function oc(e){return oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oc(e)}function ic(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ac(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ac(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function ac(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function sc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lc(e,t,n){return(t=function(e){var t=function(e){if("object"!=oc(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=oc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==oc(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const cc=[{id:"abap",name:"ABAP",import:()=>a.e(7976).then(a.bind(a,7976))},{id:"actionscript-3",name:"ActionScript",import:()=>a.e(9401).then(a.bind(a,9401))},{id:"ada",name:"Ada",import:()=>a.e(9082).then(a.bind(a,9082))},{id:"angular-html",name:"Angular HTML",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(2922)]).then(a.bind(a,2922))},{id:"angular-ts",name:"Angular TypeScript",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(5450),a.e(2922),a.e(3321)]).then(a.bind(a,3321))},{id:"apache",name:"Apache Conf",import:()=>a.e(5408).then(a.bind(a,5408))},{id:"apex",name:"Apex",import:()=>a.e(9970).then(a.bind(a,9970))},{id:"apl",name:"APL",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(2758),a.e(6931)]).then(a.bind(a,6931))},{id:"applescript",name:"AppleScript",import:()=>a.e(7919).then(a.bind(a,300))},{id:"ara",name:"Ara",import:()=>a.e(52).then(a.bind(a,52))},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:()=>a.e(5539).then(a.bind(a,5539))},{id:"asm",name:"Assembly",import:()=>a.e(4891).then(a.bind(a,4891))},{id:"astro",name:"Astro",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(4759),a.e(1811)]).then(a.bind(a,1811))},{id:"awk",name:"AWK",import:()=>a.e(9225).then(a.bind(a,9225))},{id:"ballerina",name:"Ballerina",import:()=>a.e(4558).then(a.bind(a,4558))},{id:"bat",name:"Batch File",aliases:["batch"],import:()=>a.e(1151).then(a.bind(a,1151))},{id:"beancount",name:"Beancount",import:()=>a.e(229).then(a.bind(a,229))},{id:"berry",name:"Berry",aliases:["be"],import:()=>a.e(9542).then(a.bind(a,9542))},{id:"bibtex",name:"BibTeX",import:()=>a.e(8932).then(a.bind(a,8932))},{id:"bicep",name:"Bicep",import:()=>a.e(4011).then(a.bind(a,4011))},{id:"blade",name:"Blade",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(2758),a.e(8314),a.e(384)]).then(a.bind(a,384))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:()=>a.e(789).then(a.bind(a,789))},{id:"c",name:"C",import:()=>a.e(4709).then(a.bind(a,7090))},{id:"cadence",name:"Cadence",aliases:["cdc"],import:()=>a.e(871).then(a.bind(a,871))},{id:"cairo",name:"Cairo",import:()=>Promise.all([a.e(6e3),a.e(7650)]).then(a.bind(a,7650))},{id:"clarity",name:"Clarity",import:()=>a.e(2546).then(a.bind(a,165))},{id:"clojure",name:"Clojure",aliases:["clj"],import:()=>a.e(6482).then(a.bind(a,6482))},{id:"cmake",name:"CMake",import:()=>a.e(1935).then(a.bind(a,1935))},{id:"cobol",name:"COBOL",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(2758),a.e(5039)]).then(a.bind(a,5039))},{id:"codeowners",name:"CODEOWNERS",import:()=>a.e(5913).then(a.bind(a,5913))},{id:"codeql",name:"CodeQL",aliases:["ql"],import:()=>a.e(4838).then(a.bind(a,4838))},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:()=>Promise.all([a.e(3935),a.e(3994)]).then(a.bind(a,3994))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:()=>a.e(2446).then(a.bind(a,2446))},{id:"coq",name:"Coq",import:()=>a.e(9157).then(a.bind(a,9157))},{id:"cpp",name:"C++",aliases:["c++"],import:()=>Promise.all([a.e(8314),a.e(4709),a.e(635)]).then(a.bind(a,635))},{id:"crystal",name:"Crystal",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(8314),a.e(4709),a.e(3493),a.e(9784)]).then(a.bind(a,9784))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:()=>a.e(4943).then(a.bind(a,4943))},{id:"css",name:"CSS",import:()=>a.e(4571).then(a.bind(a,4571))},{id:"csv",name:"CSV",import:()=>a.e(1582).then(a.bind(a,1582))},{id:"cue",name:"CUE",import:()=>a.e(2719).then(a.bind(a,2719))},{id:"cypher",name:"Cypher",aliases:["cql"],import:()=>a.e(755).then(a.bind(a,755))},{id:"d",name:"D",import:()=>a.e(1898).then(a.bind(a,1898))},{id:"dart",name:"Dart",import:()=>a.e(2957).then(a.bind(a,2957))},{id:"dax",name:"DAX",import:()=>a.e(6401).then(a.bind(a,6401))},{id:"desktop",name:"Desktop",import:()=>a.e(622).then(a.bind(a,622))},{id:"diff",name:"Diff",import:()=>a.e(7899).then(a.bind(a,7899))},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:()=>a.e(3490).then(a.bind(a,3490))},{id:"dotenv",name:"dotEnv",import:()=>a.e(6672).then(a.bind(a,6672))},{id:"dream-maker",name:"Dream Maker",import:()=>a.e(8284).then(a.bind(a,8284))},{id:"edge",name:"Edge",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(4759),a.e(3225)]).then(a.bind(a,3225))},{id:"elixir",name:"Elixir",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(8959)]).then(a.bind(a,8959))},{id:"elm",name:"Elm",import:()=>Promise.all([a.e(4709),a.e(9114)]).then(a.bind(a,9114))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:()=>a.e(5832).then(a.bind(a,5832))},{id:"erb",name:"ERB",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(4759),a.e(2758),a.e(8314),a.e(4709),a.e(3493),a.e(3873),a.e(2803),a.e(635),a.e(9701),a.e(558),a.e(1955)]).then(a.bind(a,1955))},{id:"erlang",name:"Erlang",aliases:["erl"],import:()=>a.e(5947).then(a.bind(a,5947))},{id:"fennel",name:"Fennel",import:()=>a.e(426).then(a.bind(a,426))},{id:"fish",name:"Fish",import:()=>a.e(3856).then(a.bind(a,3856))},{id:"fluent",name:"Fluent",aliases:["ftl"],import:()=>a.e(6040).then(a.bind(a,6040))},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:()=>Promise.all([a.e(4538),a.e(2376)]).then(a.bind(a,2376))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:()=>a.e(4538).then(a.bind(a,4538))},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:()=>Promise.all([a.e(5722),a.e(5080)]).then(a.bind(a,5080))},{id:"gdresource",name:"GDResource",import:()=>a.e(7683).then(a.bind(a,7683))},{id:"gdscript",name:"GDScript",import:()=>a.e(4146).then(a.bind(a,4146))},{id:"gdshader",name:"GDShader",import:()=>a.e(3708).then(a.bind(a,3708))},{id:"genie",name:"Genie",import:()=>a.e(3954).then(a.bind(a,3954))},{id:"gherkin",name:"Gherkin",import:()=>a.e(7932).then(a.bind(a,7932))},{id:"git-commit",name:"Git Commit Message",import:()=>a.e(3980).then(a.bind(a,3980))},{id:"git-rebase",name:"Git Rebase Message",import:()=>Promise.all([a.e(3493),a.e(8255)]).then(a.bind(a,8255))},{id:"gleam",name:"Gleam",import:()=>a.e(1266).then(a.bind(a,1266))},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(4759),a.e(5765)]).then(a.bind(a,5765))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(4759),a.e(2295)]).then(a.bind(a,2295))},{id:"glsl",name:"GLSL",import:()=>Promise.all([a.e(4709),a.e(4490)]).then(a.bind(a,4490))},{id:"gnuplot",name:"Gnuplot",import:()=>a.e(5583).then(a.bind(a,5583))},{id:"go",name:"Go",import:()=>a.e(652).then(a.bind(a,652))},{id:"graphql",name:"GraphQL",aliases:["gql"],import:()=>Promise.all([a.e(3935),a.e(4759),a.e(3873),a.e(2803),a.e(9701)]).then(a.bind(a,9701))},{id:"groovy",name:"Groovy",import:()=>a.e(2664).then(a.bind(a,2664))},{id:"hack",name:"Hack",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(8314),a.e(2517)]).then(a.bind(a,2517))},{id:"haml",name:"Ruby Haml",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(6800)]).then(a.bind(a,6800))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(2642)]).then(a.bind(a,2642))},{id:"haskell",name:"Haskell",aliases:["hs"],import:()=>a.e(3082).then(a.bind(a,3082))},{id:"haxe",name:"Haxe",import:()=>a.e(2114).then(a.bind(a,2114))},{id:"hcl",name:"HashiCorp HCL",import:()=>a.e(1371).then(a.bind(a,1371))},{id:"hjson",name:"Hjson",import:()=>a.e(1200).then(a.bind(a,1200))},{id:"hlsl",name:"HLSL",import:()=>a.e(9407).then(a.bind(a,9407))},{id:"html",name:"HTML",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769)]).then(a.bind(a,9769))},{id:"html-derivative",name:"HTML (Derivative)",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(3341)]).then(a.bind(a,3341))},{id:"http",name:"HTTP",import:()=>Promise.all([a.e(3935),a.e(4759),a.e(2758),a.e(3493),a.e(3873),a.e(2803),a.e(9701),a.e(3974)]).then(a.bind(a,3974))},{id:"hxml",name:"HXML",import:()=>a.e(3789).then(a.bind(a,3789))},{id:"hy",name:"Hy",import:()=>a.e(7455).then(a.bind(a,7455))},{id:"imba",name:"Imba",import:()=>Promise.all([a.e(4759),a.e(463)]).then(a.bind(a,463))},{id:"ini",name:"INI",aliases:["properties"],import:()=>a.e(6152).then(a.bind(a,6152))},{id:"java",name:"Java",import:()=>a.e(2758).then(a.bind(a,2758))},{id:"javascript",name:"JavaScript",aliases:["js"],import:()=>a.e(3935).then(a.bind(a,3935))},{id:"jinja",name:"Jinja",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(9988)]).then(a.bind(a,9988))},{id:"jison",name:"Jison",import:()=>Promise.all([a.e(3935),a.e(6455)]).then(a.bind(a,6455))},{id:"json",name:"JSON",import:()=>a.e(3656).then(a.bind(a,3656))},{id:"json5",name:"JSON5",import:()=>a.e(9449).then(a.bind(a,9449))},{id:"jsonc",name:"JSON with Comments",import:()=>a.e(6735).then(a.bind(a,6735))},{id:"jsonl",name:"JSON Lines",import:()=>a.e(1376).then(a.bind(a,1376))},{id:"jsonnet",name:"Jsonnet",import:()=>a.e(2137).then(a.bind(a,2137))},{id:"jssm",name:"JSSM",aliases:["fsl"],import:()=>a.e(6239).then(a.bind(a,6239))},{id:"jsx",name:"JSX",import:()=>a.e(3873).then(a.bind(a,3873))},{id:"julia",name:"Julia",aliases:["jl"],import:()=>Promise.all([a.e(3935),a.e(8314),a.e(4709),a.e(635),a.e(6e3),a.e(6308),a.e(1293)]).then(a.bind(a,1293))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:()=>a.e(8113).then(a.bind(a,8113))},{id:"kusto",name:"Kusto",aliases:["kql"],import:()=>a.e(8058).then(a.bind(a,8058))},{id:"latex",name:"LaTeX",import:()=>Promise.all([a.e(6308),a.e(7402)]).then(a.bind(a,7402))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:()=>a.e(8302).then(a.bind(a,8302))},{id:"less",name:"Less",import:()=>a.e(9493).then(a.bind(a,9493))},{id:"liquid",name:"Liquid",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(1926)]).then(a.bind(a,1926))},{id:"log",name:"Log file",import:()=>a.e(9304).then(a.bind(a,9304))},{id:"logo",name:"Logo",import:()=>a.e(2155).then(a.bind(a,2155))},{id:"lua",name:"Lua",import:()=>Promise.all([a.e(4709),a.e(5012)]).then(a.bind(a,5012))},{id:"luau",name:"Luau",import:()=>a.e(6037).then(a.bind(a,6037))},{id:"make",name:"Makefile",aliases:["makefile"],import:()=>a.e(4752).then(a.bind(a,4752))},{id:"markdown",name:"Markdown",aliases:["md"],import:()=>a.e(5722).then(a.bind(a,5722))},{id:"marko",name:"Marko",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(5450),a.e(9493),a.e(512)]).then(a.bind(a,512))},{id:"matlab",name:"MATLAB",import:()=>a.e(2181).then(a.bind(a,2181))},{id:"mdc",name:"MDC",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(5722),a.e(1740)]).then(a.bind(a,1740))},{id:"mdx",name:"MDX",import:()=>a.e(7183).then(a.bind(a,7183))},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:()=>a.e(6599).then(a.bind(a,6599))},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:()=>a.e(5152).then(a.bind(a,5152))},{id:"mojo",name:"Mojo",import:()=>a.e(6119).then(a.bind(a,6119))},{id:"move",name:"Move",import:()=>a.e(4881).then(a.bind(a,4881))},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:()=>a.e(7722).then(a.bind(a,7722))},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:()=>a.e(2749).then(a.bind(a,2749))},{id:"nginx",name:"Nginx",import:()=>Promise.all([a.e(4709),a.e(1002)]).then(a.bind(a,1002))},{id:"nim",name:"Nim",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(2758),a.e(4709),a.e(5722),a.e(8621)]).then(a.bind(a,8621))},{id:"nix",name:"Nix",import:()=>a.e(8767).then(a.bind(a,8767))},{id:"nushell",name:"nushell",aliases:["nu"],import:()=>a.e(2725).then(a.bind(a,2725))},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:()=>a.e(4279).then(a.bind(a,4279))},{id:"objective-cpp",name:"Objective-C++",import:()=>a.e(3567).then(a.bind(a,3567))},{id:"ocaml",name:"OCaml",import:()=>a.e(2334).then(a.bind(a,2334))},{id:"pascal",name:"Pascal",import:()=>a.e(7498).then(a.bind(a,7498))},{id:"perl",name:"Perl",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(2758),a.e(8314),a.e(8477)]).then(a.bind(a,8477))},{id:"php",name:"PHP",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(2758),a.e(8314),a.e(8782),a.e(3813)]).then(a.bind(a,8782))},{id:"plsql",name:"PL/SQL",import:()=>a.e(3382).then(a.bind(a,3382))},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:()=>a.e(8817).then(a.bind(a,8817))},{id:"polar",name:"Polar",import:()=>a.e(2938).then(a.bind(a,2938))},{id:"postcss",name:"PostCSS",import:()=>a.e(3389).then(a.bind(a,3389))},{id:"powerquery",name:"PowerQuery",import:()=>a.e(2771).then(a.bind(a,2771))},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:()=>a.e(5961).then(a.bind(a,5961))},{id:"prisma",name:"Prisma",import:()=>a.e(9226).then(a.bind(a,9226))},{id:"prolog",name:"Prolog",import:()=>a.e(4199).then(a.bind(a,4199))},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:()=>a.e(4292).then(a.bind(a,4292))},{id:"pug",name:"Pug",aliases:["jade"],import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(3950)]).then(a.bind(a,3950))},{id:"puppet",name:"Puppet",import:()=>a.e(852).then(a.bind(a,852))},{id:"purescript",name:"PureScript",import:()=>a.e(3881).then(a.bind(a,3881))},{id:"python",name:"Python",aliases:["py"],import:()=>a.e(6e3).then(a.bind(a,6e3))},{id:"qml",name:"QML",import:()=>Promise.all([a.e(3935),a.e(6872)]).then(a.bind(a,6872))},{id:"qmldir",name:"QML Directory",import:()=>a.e(8773).then(a.bind(a,8773))},{id:"qss",name:"Qt Style Sheets",import:()=>a.e(5525).then(a.bind(a,5525))},{id:"r",name:"R",import:()=>a.e(6308).then(a.bind(a,6308))},{id:"racket",name:"Racket",import:()=>a.e(1360).then(a.bind(a,1360))},{id:"raku",name:"Raku",aliases:["perl6"],import:()=>a.e(1041).then(a.bind(a,1041))},{id:"razor",name:"ASP.NET Razor",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(4943),a.e(570)]).then(a.bind(a,570))},{id:"reg",name:"Windows Registry Script",import:()=>a.e(2416).then(a.bind(a,2416))},{id:"regexp",name:"RegExp",aliases:["regex"],import:()=>a.e(4017).then(a.bind(a,4017))},{id:"rel",name:"Rel",import:()=>a.e(5347).then(a.bind(a,5347))},{id:"riscv",name:"RISC-V",import:()=>a.e(1355).then(a.bind(a,1355))},{id:"rst",name:"reStructuredText",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(4759),a.e(2758),a.e(8314),a.e(4709),a.e(3493),a.e(3873),a.e(2803),a.e(635),a.e(9701),a.e(6e3),a.e(558),a.e(3325)]).then(a.bind(a,3325))},{id:"ruby",name:"Ruby",aliases:["rb"],import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(4759),a.e(2758),a.e(8314),a.e(4709),a.e(3493),a.e(3873),a.e(2803),a.e(635),a.e(9701),a.e(558)]).then(a.bind(a,558))},{id:"rust",name:"Rust",aliases:["rs"],import:()=>a.e(1612).then(a.bind(a,1612))},{id:"sas",name:"SAS",import:()=>Promise.all([a.e(8314),a.e(685)]).then(a.bind(a,685))},{id:"sass",name:"Sass",import:()=>a.e(9620).then(a.bind(a,9620))},{id:"scala",name:"Scala",import:()=>a.e(2948).then(a.bind(a,2948))},{id:"scheme",name:"Scheme",import:()=>a.e(4267).then(a.bind(a,4267))},{id:"scss",name:"SCSS",import:()=>Promise.all([a.e(4571),a.e(5450)]).then(a.bind(a,5450))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:()=>a.e(4389).then(a.bind(a,4389))},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:()=>a.e(1942).then(a.bind(a,1942))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:()=>a.e(3493).then(a.bind(a,3493))},{id:"shellsession",name:"Shell Session",aliases:["console"],import:()=>Promise.all([a.e(3493),a.e(2548)]).then(a.bind(a,2548))},{id:"smalltalk",name:"Smalltalk",import:()=>a.e(7737).then(a.bind(a,7737))},{id:"solidity",name:"Solidity",import:()=>a.e(9525).then(a.bind(a,9525))},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(1357)]).then(a.bind(a,1357))},{id:"sparql",name:"SPARQL",import:()=>a.e(4069).then(a.bind(a,4069))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:()=>a.e(8607).then(a.bind(a,8607))},{id:"sql",name:"SQL",import:()=>a.e(8314).then(a.bind(a,8314))},{id:"ssh-config",name:"SSH Config",import:()=>a.e(4707).then(a.bind(a,4707))},{id:"stata",name:"Stata",import:()=>Promise.all([a.e(8314),a.e(7301)]).then(a.bind(a,7301))},{id:"stylus",name:"Stylus",aliases:["styl"],import:()=>a.e(8632).then(a.bind(a,8632))},{id:"svelte",name:"Svelte",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(4759),a.e(715)]).then(a.bind(a,715))},{id:"swift",name:"Swift",import:()=>a.e(119).then(a.bind(a,119))},{id:"system-verilog",name:"SystemVerilog",import:()=>a.e(3200).then(a.bind(a,3200))},{id:"systemd",name:"Systemd Units",import:()=>a.e(4739).then(a.bind(a,4739))},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:()=>a.e(3227).then(a.bind(a,3227))},{id:"tasl",name:"Tasl",import:()=>a.e(86).then(a.bind(a,86))},{id:"tcl",name:"Tcl",import:()=>a.e(7007).then(a.bind(a,7007))},{id:"templ",name:"Templ",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(652),a.e(9692)]).then(a.bind(a,9692))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:()=>a.e(4654).then(a.bind(a,4654))},{id:"tex",name:"TeX",import:()=>Promise.all([a.e(6308),a.e(3829)]).then(a.bind(a,3829))},{id:"toml",name:"TOML",import:()=>a.e(6550).then(a.bind(a,6550))},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(4759),a.e(2758),a.e(8314),a.e(4709),a.e(6941)]).then(a.bind(a,6941))},{id:"tsv",name:"TSV",import:()=>a.e(7133).then(a.bind(a,7133))},{id:"tsx",name:"TSX",import:()=>a.e(2803).then(a.bind(a,2803))},{id:"turtle",name:"Turtle",import:()=>a.e(1448).then(a.bind(a,1448))},{id:"twig",name:"Twig",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(4759),a.e(2758),a.e(8314),a.e(4709),a.e(3493),a.e(3873),a.e(2803),a.e(635),a.e(9701),a.e(6e3),a.e(558),a.e(5450),a.e(8782),a.e(5569)]).then(a.bind(a,5569))},{id:"typescript",name:"TypeScript",aliases:["ts"],import:()=>a.e(4759).then(a.bind(a,4759))},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:()=>a.e(3599).then(a.bind(a,3599))},{id:"typst",name:"Typst",aliases:["typ"],import:()=>a.e(4576).then(a.bind(a,2195))},{id:"v",name:"V",import:()=>a.e(440).then(a.bind(a,440))},{id:"vala",name:"Vala",import:()=>a.e(2512).then(a.bind(a,2512))},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:()=>a.e(4310).then(a.bind(a,4310))},{id:"verilog",name:"Verilog",import:()=>a.e(2580).then(a.bind(a,2580))},{id:"vhdl",name:"VHDL",import:()=>a.e(4052).then(a.bind(a,4052))},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:()=>a.e(6750).then(a.bind(a,6750))},{id:"vue",name:"Vue",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(4759),a.e(405)]).then(a.bind(a,405))},{id:"vue-html",name:"Vue HTML",import:()=>Promise.all([a.e(3935),a.e(4571),a.e(9769),a.e(4759),a.e(992)]).then(a.bind(a,992))},{id:"vyper",name:"Vyper",aliases:["vy"],import:()=>a.e(4870).then(a.bind(a,4870))},{id:"wasm",name:"WebAssembly",import:()=>a.e(3638).then(a.bind(a,3638))},{id:"wenyan",name:"Wenyan",aliases:["文言"],import:()=>a.e(7448).then(a.bind(a,7448))},{id:"wgsl",name:"WGSL",import:()=>a.e(4405).then(a.bind(a,4405))},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:()=>a.e(247).then(a.bind(a,247))},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:()=>a.e(2862).then(a.bind(a,2862))},{id:"xml",name:"XML",import:()=>Promise.all([a.e(2758),a.e(3813)]).then(a.bind(a,3813))},{id:"xsl",name:"XSL",import:()=>Promise.all([a.e(2758),a.e(8491)]).then(a.bind(a,8491))},{id:"yaml",name:"YAML",aliases:["yml"],import:()=>a.e(3427).then(a.bind(a,3427))},{id:"zenscript",name:"ZenScript",import:()=>a.e(3224).then(a.bind(a,3224))},{id:"zig",name:"Zig",import:()=>a.e(8180).then(a.bind(a,8180))}],uc={...Object.fromEntries(cc.map((e=>[e.id,e.import]))),...Object.fromEntries(cc.flatMap((e=>e.aliases?.map((t=>[t,e.import]))||[])))},dc=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:()=>a.e(2892).then(a.bind(a,2892))},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:()=>a.e(8219).then(a.bind(a,8219))},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:()=>a.e(3840).then(a.bind(a,3840))},{id:"catppuccin-frappe",displayName:"Catppuccin Frappé",type:"dark",import:()=>a.e(3625).then(a.bind(a,3625))},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:()=>a.e(919).then(a.bind(a,919))},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:()=>a.e(4480).then(a.bind(a,4480))},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:()=>a.e(7795).then(a.bind(a,7795))},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:()=>a.e(7906).then(a.bind(a,7906))},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:()=>a.e(4046).then(a.bind(a,4046))},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:()=>a.e(9967).then(a.bind(a,9967))},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:()=>a.e(2956).then(a.bind(a,2956))},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:()=>a.e(3572).then(a.bind(a,3572))},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:()=>a.e(7622).then(a.bind(a,7622))},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:()=>a.e(6422).then(a.bind(a,6422))},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:()=>a.e(3395).then(a.bind(a,3395))},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:()=>a.e(5062).then(a.bind(a,5062))},{id:"github-light",displayName:"GitHub Light",type:"light",import:()=>a.e(966).then(a.bind(a,966))},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:()=>a.e(4966).then(a.bind(a,4966))},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:()=>a.e(5926).then(a.bind(a,5926))},{id:"houston",displayName:"Houston",type:"dark",import:()=>a.e(918).then(a.bind(a,918))},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:()=>a.e(4817).then(a.bind(a,4817))},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:()=>a.e(7065).then(a.bind(a,7065))},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:()=>a.e(3351).then(a.bind(a,3351))},{id:"laserwave",displayName:"LaserWave",type:"dark",import:()=>a.e(846).then(a.bind(a,846))},{id:"light-plus",displayName:"Light Plus",type:"light",import:()=>a.e(9565).then(a.bind(a,9565))},{id:"material-theme",displayName:"Material Theme",type:"dark",import:()=>a.e(3643).then(a.bind(a,3643))},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:()=>a.e(5417).then(a.bind(a,5417))},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:()=>a.e(1113).then(a.bind(a,1113))},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:()=>a.e(810).then(a.bind(a,810))},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:()=>a.e(5070).then(a.bind(a,5070))},{id:"min-dark",displayName:"Min Dark",type:"dark",import:()=>a.e(2085).then(a.bind(a,2085))},{id:"min-light",displayName:"Min Light",type:"light",import:()=>a.e(6711).then(a.bind(a,6711))},{id:"monokai",displayName:"Monokai",type:"dark",import:()=>a.e(9662).then(a.bind(a,9662))},{id:"night-owl",displayName:"Night Owl",type:"dark",import:()=>a.e(6171).then(a.bind(a,6171))},{id:"nord",displayName:"Nord",type:"dark",import:()=>a.e(7515).then(a.bind(a,7515))},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:()=>a.e(7903).then(a.bind(a,7903))},{id:"one-light",displayName:"One Light",type:"light",import:()=>a.e(7203).then(a.bind(a,7203))},{id:"plastic",displayName:"Plastic",type:"dark",import:()=>a.e(108).then(a.bind(a,108))},{id:"poimandres",displayName:"Poimandres",type:"dark",import:()=>a.e(4890).then(a.bind(a,4890))},{id:"red",displayName:"Red",type:"dark",import:()=>a.e(4717).then(a.bind(a,4717))},{id:"rose-pine",displayName:"Rosé Pine",type:"dark",import:()=>a.e(4236).then(a.bind(a,4236))},{id:"rose-pine-dawn",displayName:"Rosé Pine Dawn",type:"light",import:()=>a.e(9423).then(a.bind(a,9423))},{id:"rose-pine-moon",displayName:"Rosé Pine Moon",type:"dark",import:()=>a.e(9410).then(a.bind(a,9410))},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:()=>a.e(3385).then(a.bind(a,3385))},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:()=>a.e(6292).then(a.bind(a,6292))},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:()=>a.e(1954).then(a.bind(a,1954))},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:()=>a.e(7602).then(a.bind(a,7602))},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:()=>a.e(2218).then(a.bind(a,2218))},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:()=>a.e(2298).then(a.bind(a,2298))},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:()=>a.e(9787).then(a.bind(a,9787))},{id:"vesper",displayName:"Vesper",type:"dark",import:()=>a.e(2211).then(a.bind(a,2211))},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:()=>a.e(8143).then(a.bind(a,8143))},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:()=>a.e(7386).then(a.bind(a,7386))},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:()=>a.e(7234).then(a.bind(a,7234))}],fc=Object.fromEntries(dc.map((e=>[e.id,e.import])));class pc extends Error{constructor(e){super(e),this.name="ShikiError"}}class hc extends Error{constructor(e){super(e),this.name="ShikiError"}}function mc(){return"undefined"!=typeof performance?performance.now():Date.now()}var vc=Object.defineProperty,gc=(e,t,n)=>(((e,t,n)=>{t in e?vc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);let yc=null;class bc{constructor(e){gc(this,"utf16Length"),gc(this,"utf8Length"),gc(this,"utf16Value"),gc(this,"utf8Value"),gc(this,"utf16OffsetToUtf8"),gc(this,"utf8OffsetToUtf16");const t=e.length,n=bc._utf8ByteLength(e),r=n!==t,o=r?new Uint32Array(t+1):null;r&&(o[t]=n);const i=r?new Uint32Array(n+1):null;r&&(i[n]=t);const a=new Uint8Array(n);let s=0;for(let n=0;n<t;n++){const l=e.charCodeAt(n);let c=l,u=!1;if(l>=55296&&l<=56319&&n+1<t){const t=e.charCodeAt(n+1);t>=56320&&t<=57343&&(c=65536+(l-55296<<10)|t-56320,u=!0)}r&&(o[n]=s,u&&(o[n+1]=s),c<=127?i[s+0]=n:c<=2047?(i[s+0]=n,i[s+1]=n):c<=65535?(i[s+0]=n,i[s+1]=n,i[s+2]=n):(i[s+0]=n,i[s+1]=n,i[s+2]=n,i[s+3]=n)),c<=127?a[s++]=c:c<=2047?(a[s++]=192|(1984&c)>>>6,a[s++]=128|(63&c)>>>0):c<=65535?(a[s++]=224|(61440&c)>>>12,a[s++]=128|(4032&c)>>>6,a[s++]=128|(63&c)>>>0):(a[s++]=240|(1835008&c)>>>18,a[s++]=128|(258048&c)>>>12,a[s++]=128|(4032&c)>>>6,a[s++]=128|(63&c)>>>0),u&&n++}this.utf16Length=t,this.utf8Length=n,this.utf16Value=e,this.utf8Value=a,this.utf16OffsetToUtf8=o,this.utf8OffsetToUtf16=i}static _utf8ByteLength(e){let t=0;for(let n=0,r=e.length;n<r;n++){const o=e.charCodeAt(n);let i=o,a=!1;if(o>=55296&&o<=56319&&n+1<r){const t=e.charCodeAt(n+1);t>=56320&&t<=57343&&(i=65536+(o-55296<<10)|t-56320,a=!0)}t+=i<=127?1:i<=2047?2:i<=65535?3:4,a&&n++}return t}createString(e){const t=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,t),t}}const kc=class{constructor(e){if(gc(this,"id",++kc.LAST_ID),gc(this,"_onigBinding"),gc(this,"content"),gc(this,"utf16Length"),gc(this,"utf8Length"),gc(this,"utf16OffsetToUtf8"),gc(this,"utf8OffsetToUtf16"),gc(this,"ptr"),!yc)throw new hc("Must invoke loadWasm first.");this._onigBinding=yc,this.content=e;const t=new bc(e);this.utf16Length=t.utf16Length,this.utf8Length=t.utf8Length,this.utf16OffsetToUtf8=t.utf16OffsetToUtf8,this.utf8OffsetToUtf16=t.utf8OffsetToUtf16,this.utf8Length<1e4&&!kc._sharedPtrInUse?(kc._sharedPtr||(kc._sharedPtr=yc.omalloc(1e4)),kc._sharedPtrInUse=!0,yc.HEAPU8.set(t.utf8Value,kc._sharedPtr),this.ptr=kc._sharedPtr):this.ptr=t.createString(yc)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===kc._sharedPtr?kc._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};let wc,xc=kc;gc(xc,"LAST_ID",0),gc(xc,"_sharedPtr",0),gc(xc,"_sharedPtrInUse",!1);class Cc{constructor(e){if(gc(this,"_onigBinding"),gc(this,"_ptr"),!yc)throw new hc("Must invoke loadWasm first.");const t=[],n=[];for(let r=0,o=e.length;r<o;r++){const o=new bc(e[r]);t[r]=o.createString(yc),n[r]=o.utf8Length}const r=yc.omalloc(4*e.length);yc.HEAPU32.set(t,r/4);const o=yc.omalloc(4*e.length);yc.HEAPU32.set(n,o/4);const i=yc.createOnigScanner(r,o,e.length);for(let n=0,r=e.length;n<r;n++)yc.ofree(t[n]);yc.ofree(o),yc.ofree(r),0===i&&function(e){throw new hc(e.UTF8ToString(e.getLastOnigError()))}(yc),this._onigBinding=yc,this._ptr=i}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,t,n){let r=0;if("number"==typeof n&&(r=n),"string"==typeof e){e=new xc(e);const n=this._findNextMatchSync(e,t,!1,r);return e.dispose(),n}return this._findNextMatchSync(e,t,!1,r)}_findNextMatchSync(e,t,n,r){const o=this._onigBinding,i=o.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(t),r);if(0===i)return null;const a=o.HEAPU32;let s=i/4;const l=a[s++],c=a[s++],u=[];for(let t=0;t<c;t++){const n=e.convertUtf8OffsetToUtf16(a[s++]),r=e.convertUtf8OffsetToUtf16(a[s++]);u[t]={start:n,end:r,length:r-n}}return{index:l,captureIndices:u}}}function Sc(e){return wc||(wc=async function(){yc=await async function(e){let t,n;const r={};function o(e){n=e,r.HEAPU8=new Uint8Array(e),r.HEAPU32=new Uint32Array(e)}function i(e){try{return t.grow(e-n.byteLength+65535>>>16),o(t.buffer),1}catch{}}const a="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function s(e,t){return e?function(e,t,n=1024){const r=t+n;let o=t;for(;e[o]&&!(o>=r);)++o;if(o-t>16&&e.buffer&&a)return a.decode(e.subarray(t,o));let i="";for(;t<o;){let n=e[t++];if(!(128&n)){i+=String.fromCharCode(n);continue}const r=63&e[t++];if(192==(224&n)){i+=String.fromCharCode((31&n)<<6|r);continue}const o=63&e[t++];if(n=224==(240&n)?(15&n)<<12|r<<6|o:(7&n)<<18|r<<12|o<<6|63&e[t++],n<65536)i+=String.fromCharCode(n);else{const e=n-65536;i+=String.fromCharCode(55296|e>>10,56320|1023&e)}}return i}(r.HEAPU8,e,t):""}const l={emscripten_get_now:mc,emscripten_memcpy_big:function(e,t,n){r.HEAPU8.copyWithin(e,t,t+n)},emscripten_resize_heap:function(e){const t=r.HEAPU8.length,n=2147483648;if((e>>>=0)>n)return!1;for(let r=1;r<=4;r*=2){let s=t*(1+.2/r);if(s=Math.min(s,e+100663296),i(Math.min(n,(o=Math.max(e,s))+((a=65536)-o%a)%a)))return!0}var o,a;return!1},fd_write:()=>0};return await async function(){const n={env:l,wasi_snapshot_preview1:l},i=await e(n);t=i.memory,o(t.buffer),Object.assign(r,i),r.UTF8ToString=s}(),r}((async t=>{let n=e;var r;return n=await n,"function"==typeof n&&(n=await n(t)),"function"==typeof n&&(n=await n(t)),"function"==typeof n.instantiator?n=await n.instantiator(t):"function"!=typeof n.default?(function(e){return void 0!==e.data}(n)&&(n=n.data),function(e){return"undefined"!=typeof Response&&e instanceof Response}(n)?n="function"==typeof WebAssembly.instantiateStreaming?await(r=n,e=>WebAssembly.instantiateStreaming(r,e))(t):await function(e){return async t=>{const n=await e.arrayBuffer();return WebAssembly.instantiate(n,t)}}(n)(t):function(e){return"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||ArrayBuffer.isView(e))||"undefined"!=typeof Buffer&&Buffer.isBuffer?.(e)||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer||"undefined"!=typeof Uint32Array&&e instanceof Uint32Array}(n)||n instanceof WebAssembly.Module?n=await _c(n)(t):"default"in n&&n.default instanceof WebAssembly.Module&&(n=await _c(n.default)(t))):n=await n.default(t),"instance"in n&&(n=n.instance),"exports"in n&&(n=n.exports),n}))}(),wc)}function _c(e){return t=>WebAssembly.instantiate(e,t)}async function Ec(e){return e&&await Sc(e),{createScanner:e=>new Cc(e.map((e=>"string"==typeof e?e:e.source))),createString:e=>new xc(e)}}let Dc=!1;function Mc(e,t=3){Dc}var Ac,Oc;function Tc(e,t,n){return t=Nc(t),function(e,t){if(t&&("object"==Wc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,jc()?Reflect.construct(t,n||[],Nc(e).constructor):t.apply(e,n))}function jc(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jc=function(){return!!e})()}function Nc(e){return Nc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nc(e)}function Pc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lc(e,t)}function Lc(e,t){return Lc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lc(e,t)}function Rc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ic(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rc(Object(n),!0).forEach((function(t){zc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bc(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Fc(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Fc(e,t){if(e){if("string"==typeof e)return Hc(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hc(e,t):void 0}}function Hc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function zc(e,t,n){return(t=Gc(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gc(r.key),r)}}function Uc(e,t,n){return t&&$c(e.prototype,t),n&&$c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gc(e){var t=function(e){if("object"!=Wc(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Wc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Wc(t)?t:t+""}function Wc(e){return Wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(e)}function qc(e){return Array.isArray(e)?function(e){for(var t=[],n=0,r=e.length;n<r;n++)t[n]=qc(e[n]);return t}(e):e instanceof RegExp?e:"object"===Wc(e)?function(e){var t={};for(var n in e)t[n]=qc(e[n]);return t}(e):e}function Kc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach((function(t){for(var n in t)e[n]=t[n]})),e}function Zc(e){var t=~e.lastIndexOf("/")||~e.lastIndexOf("\\");return 0===t?e:~t==e.length-1?Zc(e.substring(0,e.length-1)):e.substr(1+~t)}var Jc=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,Xc=function(){return Uc((function e(){Vc(this,e)}),null,[{key:"hasCaptures",value:function(e){return null!==e&&(Jc.lastIndex=0,Jc.test(e))}},{key:"replaceCaptures",value:function(e,t,n){return e.replace(Jc,(function(e,r,o,i){var a=n[parseInt(r||o,10)];if(!a)return e;for(var s=t.substring(a.start,a.end);"."===s[0];)s=s.substring(1);switch(i){case"downcase":return s.toLowerCase();case"upcase":return s.toUpperCase();default:return s}}))}}])}();function Yc(e,t){return e<t?-1:e>t?1:0}function Qc(e,t){if(null===e&&null===t)return 0;if(!e)return-1;if(!t)return 1;var n=e.length,r=t.length;if(n===r){for(var o=0;o<n;o++){var i=Yc(e[o],t[o]);if(0!==i)return i}return 0}return n-r}function eu(e){return!!(/^#[0-9a-f]{6}$/i.test(e)||/^#[0-9a-f]{8}$/i.test(e)||/^#[0-9a-f]{3}$/i.test(e)||/^#[0-9a-f]{4}$/i.test(e))}function tu(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var nu=function(){return Uc((function e(t){Vc(this,e),zc(this,"cache",new Map),this.fn=t}),[{key:"get",value:function(e){if(this.cache.has(e))return this.cache.get(e);var t=this.fn(e);return this.cache.set(e,t),t}}])}(),ru=function(){return Uc((function e(t,n,r){var o=this;Vc(this,e),zc(this,"_cachedMatchRoot",new nu((function(e){return o._root.match(e)}))),this._colorMap=t,this._defaults=n,this._root=r}),[{key:"getColorMap",value:function(){return this._colorMap.getColorMap()}},{key:"getDefaults",value:function(){return this._defaults}},{key:"match",value:function(e){if(null===e)return this._defaults;var t=e.scopeName,n=this._cachedMatchRoot.get(t).find((function(t){return function(e,t){if(0===t.length)return!0;for(var n=0;n<t.length;n++){var r=t[n],o=!1;if(">"===r){if(n===t.length-1)return!1;r=t[++n],o=!0}for(;e&&!iu(e.scopeName,r);){if(o)return!1;e=e.parent}if(!e)return!1;e=e.parent}return!0}(e.parent,t.parentScopes)}));return n?new au(n.fontStyle,n.foreground,n.background):null}}],[{key:"createFromRawTheme",value:function(e,t){return this.createFromParsedTheme(function(e){if(!e)return[];if(!e.settings||!Array.isArray(e.settings))return[];for(var t=e.settings,n=[],r=0,o=0,i=t.length;o<i;o++){var a=t[o];if(a.settings){var s=void 0;if("string"==typeof a.scope){var l=a.scope;s=(l=(l=l.replace(/^[,]+/,"")).replace(/[,]+$/,"")).split(",")}else s=Array.isArray(a.scope)?a.scope:[""];var c=-1;if("string"==typeof a.settings.fontStyle){c=0;for(var u=a.settings.fontStyle.split(" "),d=0,f=u.length;d<f;d++)switch(u[d]){case"italic":c|=1;break;case"bold":c|=2;break;case"underline":c|=4;break;case"strikethrough":c|=8}}var p=null;"string"==typeof a.settings.foreground&&eu(a.settings.foreground)&&(p=a.settings.foreground);var h=null;"string"==typeof a.settings.background&&eu(a.settings.background)&&(h=a.settings.background);for(var m=0,v=s.length;m<v;m++){var g=s[m].trim().split(" "),y=g[g.length-1],b=null;g.length>1&&(b=g.slice(0,g.length-1)).reverse(),n[r++]=new su(y,b,o,c,p,h)}}}return n}(e),t)}},{key:"createFromParsedTheme",value:function(e,t){return function(e,t){e.sort((function(e,t){var n=Yc(e.scope,t.scope);return 0!==n||0!==(n=Qc(e.parentScopes,t.parentScopes))?n:e.index-t.index}));for(var n=0,r="#000000",o="#ffffff";e.length>=1&&""===e[0].scope;){var i=e.shift();-1!==i.fontStyle&&(n=i.fontStyle),null!==i.foreground&&(r=i.foreground),null!==i.background&&(o=i.background)}for(var a=new cu(t),s=new au(n,a.getId(r),a.getId(o)),l=new fu(new du(0,null,-1,0,0),[]),c=0,u=e.length;c<u;c++){var d=e[c];l.insert(0,d.scope,d.parentScopes,d.fontStyle,a.getId(d.foreground),a.getId(d.background))}return new ru(a,s,l)}(e,t)}}])}(),ou=function(){function e(t,n){Vc(this,e),this.parent=t,this.scopeName=n}return Uc(e,[{key:"push",value:function(t){return new e(this,t)}},{key:"getSegments",value:function(){for(var e=this,t=[];e;)t.push(e.scopeName),e=e.parent;return t.reverse(),t}},{key:"toString",value:function(){return this.getSegments().join(" ")}},{key:"extends",value:function(e){return this===e||null!==this.parent&&this.parent.extends(e)}},{key:"getExtensionIfDefined",value:function(e){for(var t=[],n=this;n&&n!==e;)t.push(n.scopeName),n=n.parent;return n===e?t.reverse():void 0}}],[{key:"push",value:function(t,n){var r,o=Bc(n);try{for(o.s();!(r=o.n()).done;)t=new e(t,r.value)}catch(e){o.e(e)}finally{o.f()}return t}},{key:"from",value:function(){for(var t=null,n=0;n<arguments.length;n++)t=new e(t,n<0||arguments.length<=n?void 0:arguments[n]);return t}}])}();function iu(e,t){return t===e||e.startsWith(t)&&"."===e[t.length]}var au=Uc((function e(t,n,r){Vc(this,e),this.fontStyle=t,this.foregroundId=n,this.backgroundId=r})),su=Uc((function e(t,n,r,o,i,a){Vc(this,e),this.scope=t,this.parentScopes=n,this.index=r,this.fontStyle=o,this.foreground=i,this.background=a})),lu=function(e){return e[e.NotSet=-1]="NotSet",e[e.None=0]="None",e[e.Italic=1]="Italic",e[e.Bold=2]="Bold",e[e.Underline=4]="Underline",e[e.Strikethrough=8]="Strikethrough",e}(lu||{});var cu=function(){return Uc((function e(t){if(Vc(this,e),zc(this,"_isFrozen",void 0),zc(this,"_lastColorId",void 0),zc(this,"_id2color",void 0),zc(this,"_color2id",void 0),this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(var n=0,r=t.length;n<r;n++)this._color2id[t[n]]=n,this._id2color[n]=t[n]}else this._isFrozen=!1}),[{key:"getId",value:function(e){if(null===e)return 0;e=e.toUpperCase();var t=this._color2id[e];if(t)return t;if(this._isFrozen)throw new Error("Missing color in color map - ".concat(e));return t=++this._lastColorId,this._color2id[e]=t,this._id2color[t]=e,t}},{key:"getColorMap",value:function(){return this._id2color.slice(0)}}])}(),uu=Object.freeze([]),du=function(){function e(t,n,r,o,i){Vc(this,e),zc(this,"scopeDepth",void 0),zc(this,"parentScopes",void 0),zc(this,"fontStyle",void 0),zc(this,"foreground",void 0),zc(this,"background",void 0),this.scopeDepth=t,this.parentScopes=n||uu,this.fontStyle=r,this.foreground=o,this.background=i}return Uc(e,[{key:"clone",value:function(){return new e(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}},{key:"acceptOverwrite",value:function(e,t,n,r){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,-1!==t&&(this.fontStyle=t),0!==n&&(this.foreground=n),0!==r&&(this.background=r)}}],[{key:"cloneArr",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++)t[n]=e[n].clone();return t}}])}(),fu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Vc(this,e),zc(this,"_rulesWithParentScopes",void 0),this._mainRule=t,this._children=r,this._rulesWithParentScopes=n}return Uc(e,[{key:"match",value:function(t){if(""!==t){var n,r,o=t.indexOf(".");if(-1===o?(n=t,r=""):(n=t.substring(0,o),r=t.substring(o+1)),this._children.hasOwnProperty(n))return this._children[n].match(r)}var i=this._rulesWithParentScopes.concat(this._mainRule);return i.sort(e._cmpBySpecificity),i}},{key:"insert",value:function(t,n,r,o,i,a){if(""!==n){var s,l,c,u=n.indexOf(".");-1===u?(s=n,l=""):(s=n.substring(0,u),l=n.substring(u+1)),this._children.hasOwnProperty(s)?c=this._children[s]:(c=new e(this._mainRule.clone(),du.cloneArr(this._rulesWithParentScopes)),this._children[s]=c),c.insert(t+1,l,r,o,i,a)}else this._doInsertHere(t,r,o,i,a)}},{key:"_doInsertHere",value:function(e,t,n,r,o){if(null!==t){for(var i=0,a=this._rulesWithParentScopes.length;i<a;i++){var s=this._rulesWithParentScopes[i];if(0===Qc(s.parentScopes,t))return void s.acceptOverwrite(e,n,r,o)}-1===n&&(n=this._mainRule.fontStyle),0===r&&(r=this._mainRule.foreground),0===o&&(o=this._mainRule.background),this._rulesWithParentScopes.push(new du(e,t,n,r,o))}else this._mainRule.acceptOverwrite(e,n,r,o)}}],[{key:"_cmpBySpecificity",value:function(e,t){if(e.scopeDepth!==t.scopeDepth)return t.scopeDepth-e.scopeDepth;for(var n=0,r=0;">"===e.parentScopes[n]&&n++,">"===t.parentScopes[r]&&r++,!(n>=e.parentScopes.length||r>=t.parentScopes.length);){var o=t.parentScopes[r].length-e.parentScopes[n].length;if(0!==o)return o;n++,r++}return t.parentScopes.length-e.parentScopes.length}}])}(),pu=function(){function e(){Vc(this,e)}return Uc(e,null,[{key:"toBinaryStr",value:function(e){return e.toString(2).padStart(32,"0")}},{key:"print",value:function(t){var n=e.getLanguageId(t),r=e.getTokenType(t),o=e.getFontStyle(t),i=e.getForeground(t),a=e.getBackground(t);console.log({languageId:n,tokenType:r,fontStyle:o,foreground:i,background:a})}},{key:"getLanguageId",value:function(e){return(255&e)>>>0}},{key:"getTokenType",value:function(e){return(768&e)>>>8}},{key:"containsBalancedBrackets",value:function(e){return!!(1024&e)}},{key:"getFontStyle",value:function(e){return(30720&e)>>>11}},{key:"getForeground",value:function(e){return(16744448&e)>>>15}},{key:"getBackground",value:function(e){return(4278190080&e)>>>24}},{key:"set",value:function(t,n,r,o,i,a,s){var l=e.getLanguageId(t),c=e.getTokenType(t),u=e.containsBalancedBrackets(t)?1:0,d=e.getFontStyle(t),f=e.getForeground(t),p=e.getBackground(t);return 0!==n&&(l=n),8!==r&&(c=r),null!==o&&(u=o?1:0),-1!==i&&(d=i),0!==a&&(f=a),0!==s&&(p=s),(l|c<<8|u<<10|d<<11|f<<15|p<<24)>>>0}}])}();function hu(e,t){for(var n=[],r=function(e){var t=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=t.exec(e);return{next:function(){if(!n)return null;var r=n[0];return n=t.exec(e),r}}}(e),o=r.next();null!==o;){var i=0;if(2===o.length&&":"===o.charAt(1)){switch(o.charAt(0)){case"R":i=1;break;case"L":i=-1;break;default:console.log("Unknown priority ".concat(o," in scope selector"))}o=r.next()}var a=l();if(n.push({matcher:a,priority:i}),","!==o)break;o=r.next()}return n;function s(){if("-"===o){o=r.next();var e=s();return function(t){return!!e&&!e(t)}}if("("===o){o=r.next();var n=function(){for(var e=[],t=l();t&&(e.push(t),"|"===o||","===o);){do{o=r.next()}while("|"===o||","===o);t=l()}return function(t){return e.some((function(e){return e(t)}))}}();return")"===o&&(o=r.next()),n}if(mu(o)){var i=[];do{i.push(o),o=r.next()}while(mu(o));return function(e){return t(i,e)}}return null}function l(){for(var e=[],t=s();t;)e.push(t),t=s();return function(t){return e.every((function(e){return e(t)}))}}}function mu(e){return!!e&&!!e.match(/[\w\.:]+/)}function vu(e){"function"==typeof e.dispose&&e.dispose()}var gu=function(){return Uc((function e(t){Vc(this,e),this.scopeName=t}),[{key:"toKey",value:function(){return this.scopeName}}])}(),yu=function(){return Uc((function e(t,n){Vc(this,e),this.scopeName=t,this.ruleName=n}),[{key:"toKey",value:function(){return"".concat(this.scopeName,"#").concat(this.ruleName)}}])}(),bu=function(){return Uc((function e(){Vc(this,e),zc(this,"_references",[]),zc(this,"_seenReferenceKeys",new Set),zc(this,"visitedRule",new Set)}),[{key:"references",get:function(){return this._references}},{key:"add",value:function(e){var t=e.toKey();this._seenReferenceKeys.has(t)||(this._seenReferenceKeys.add(t),this._references.push(e))}}])}(),ku=function(){return Uc((function e(t,n){Vc(this,e),zc(this,"seenFullScopeRequests",new Set),zc(this,"seenPartialScopeRequests",new Set),zc(this,"Q",void 0),this.repo=t,this.initialScopeName=n,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new gu(this.initialScopeName)]}),[{key:"processQueue",value:function(){var e=this.Q;this.Q=[];var t,n=new bu,r=Bc(e);try{for(r.s();!(t=r.n()).done;)wu(t.value,this.initialScopeName,this.repo,n)}catch(e){r.e(e)}finally{r.f()}var o,i=Bc(n.references);try{for(i.s();!(o=i.n()).done;){var a=o.value;if(a instanceof gu){if(this.seenFullScopeRequests.has(a.scopeName))continue;this.seenFullScopeRequests.add(a.scopeName),this.Q.push(a)}else{if(this.seenFullScopeRequests.has(a.scopeName))continue;if(this.seenPartialScopeRequests.has(a.toKey()))continue;this.seenPartialScopeRequests.add(a.toKey()),this.Q.push(a)}}}catch(e){i.e(e)}finally{i.f()}}}])}();function wu(e,t,n,r){var o=n.lookup(e.scopeName);if(o){var i=n.lookup(t);e instanceof gu?Cu({baseGrammar:i,selfGrammar:o},r):xu(e.ruleName,{baseGrammar:i,selfGrammar:o,repository:o.repository},r);var a=n.injections(e.scopeName);if(a){var s,l=Bc(a);try{for(l.s();!(s=l.n()).done;){var c=s.value;r.add(new gu(c))}}catch(e){l.e(e)}finally{l.f()}}}else if(e.scopeName===t)throw new Error("No grammar provided for <".concat(t,">"))}function xu(e,t,n){t.repository&&t.repository[e]&&Su([t.repository[e]],t,n)}function Cu(e,t){e.selfGrammar.patterns&&Array.isArray(e.selfGrammar.patterns)&&Su(e.selfGrammar.patterns,Ic(Ic({},e),{},{repository:e.selfGrammar.repository}),t),e.selfGrammar.injections&&Su(Object.values(e.selfGrammar.injections),Ic(Ic({},e),{},{repository:e.selfGrammar.repository}),t)}function Su(e,t,n){var r,o=Bc(e);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(!n.visitedRule.has(i)){n.visitedRule.add(i);var a=i.repository?Kc({},t.repository,i.repository):t.repository;Array.isArray(i.patterns)&&Su(i.patterns,Ic(Ic({},t),{},{repository:a}),n);var s=i.include;if(s){var l=Ou(s);switch(l.kind){case 0:Cu(Ic(Ic({},t),{},{selfGrammar:t.baseGrammar}),n);break;case 1:Cu(t,n);break;case 2:xu(l.ruleName,Ic(Ic({},t),{},{repository:a}),n);break;case 3:case 4:var c=l.scopeName===t.selfGrammar.scopeName?t.selfGrammar:l.scopeName===t.baseGrammar.scopeName?t.baseGrammar:void 0;if(c){var u={baseGrammar:t.baseGrammar,selfGrammar:c,repository:a};4===l.kind?xu(l.ruleName,u,n):Cu(u,n)}else 4===l.kind?n.add(new yu(l.scopeName,l.ruleName)):n.add(new gu(l.scopeName))}}}}}catch(e){o.e(e)}finally{o.f()}}var _u=Uc((function e(){Vc(this,e),zc(this,"kind",0)})),Eu=Uc((function e(){Vc(this,e),zc(this,"kind",1)})),Du=Uc((function e(t){Vc(this,e),zc(this,"kind",2),this.ruleName=t})),Mu=Uc((function e(t){Vc(this,e),zc(this,"kind",3),this.scopeName=t})),Au=Uc((function e(t,n){Vc(this,e),zc(this,"kind",4),this.scopeName=t,this.ruleName=n}));function Ou(e){if("$base"===e)return new _u;if("$self"===e)return new Eu;var t=e.indexOf("#");if(-1===t)return new Mu(e);if(0===t)return new Du(e.substring(1));var n=e.substring(0,t),r=e.substring(t+1);return new Au(n,r)}var Tu=/\\(\d+)/,ju=/\\(\d+)/g;Symbol("RuleId");var Nu=function(){return Uc((function e(t,n,r,o){Vc(this,e),zc(this,"$location",void 0),zc(this,"id",void 0),zc(this,"_nameIsCapturing",void 0),zc(this,"_name",void 0),zc(this,"_contentNameIsCapturing",void 0),zc(this,"_contentName",void 0),this.$location=t,this.id=n,this._name=r||null,this._nameIsCapturing=Xc.hasCaptures(this._name),this._contentName=o||null,this._contentNameIsCapturing=Xc.hasCaptures(this._contentName)}),[{key:"debugName",get:function(){var e=this.$location?"".concat(Zc(this.$location.filename),":").concat(this.$location.line):"unknown";return"".concat(this.constructor.name,"#").concat(this.id," @ ").concat(e)}},{key:"getName",value:function(e,t){return this._nameIsCapturing&&null!==this._name&&null!==e&&null!==t?Xc.replaceCaptures(this._name,e,t):this._name}},{key:"getContentName",value:function(e,t){return this._contentNameIsCapturing&&null!==this._contentName?Xc.replaceCaptures(this._contentName,e,t):this._contentName}}])}(),Pu=function(e){function t(e,n,r,o,i){var a;return Vc(this,t),zc(a=Tc(this,t,[e,n,r,o]),"retokenizeCapturedWithRuleId",void 0),a.retokenizeCapturedWithRuleId=i,a}return Pc(t,e),Uc(t,[{key:"dispose",value:function(){}},{key:"collectPatterns",value:function(e,t){throw new Error("Not supported!")}},{key:"compile",value:function(e,t){throw new Error("Not supported!")}},{key:"compileAG",value:function(e,t,n,r){throw new Error("Not supported!")}}])}(Nu),Lu=function(e){function t(e,n,r,o,i){var a;return Vc(this,t),zc(a=Tc(this,t,[e,n,r,null]),"_match",void 0),zc(a,"captures",void 0),zc(a,"_cachedCompiledPatterns",void 0),a._match=new Hu(o,a.id),a.captures=i,a._cachedCompiledPatterns=null,a}return Pc(t,e),Uc(t,[{key:"dispose",value:function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}},{key:"debugMatchRegExp",get:function(){return"".concat(this._match.source)}},{key:"collectPatterns",value:function(e,t){t.push(this._match)}},{key:"compile",value:function(e,t){return this._getCachedCompiledPatterns(e).compile(e)}},{key:"compileAG",value:function(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}},{key:"_getCachedCompiledPatterns",value:function(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new zu,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}])}(Nu),Ru=function(e){function t(e,n,r,o,i){var a;return Vc(this,t),zc(a=Tc(this,t,[e,n,r,o]),"hasMissingPatterns",void 0),zc(a,"patterns",void 0),zc(a,"_cachedCompiledPatterns",void 0),a.patterns=i.patterns,a.hasMissingPatterns=i.hasMissingPatterns,a._cachedCompiledPatterns=null,a}return Pc(t,e),Uc(t,[{key:"dispose",value:function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}},{key:"collectPatterns",value:function(e,t){var n,r=Bc(this.patterns);try{for(r.s();!(n=r.n()).done;){var o=n.value;e.getRule(o).collectPatterns(e,t)}}catch(e){r.e(e)}finally{r.f()}}},{key:"compile",value:function(e,t){return this._getCachedCompiledPatterns(e).compile(e)}},{key:"compileAG",value:function(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}},{key:"_getCachedCompiledPatterns",value:function(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new zu,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}])}(Nu),Iu=function(e){function t(e,n,r,o,i,a,s,l,c,u){var d;return Vc(this,t),zc(d=Tc(this,t,[e,n,r,o]),"_begin",void 0),zc(d,"beginCaptures",void 0),zc(d,"_end",void 0),zc(d,"endHasBackReferences",void 0),zc(d,"endCaptures",void 0),zc(d,"applyEndPatternLast",void 0),zc(d,"hasMissingPatterns",void 0),zc(d,"patterns",void 0),zc(d,"_cachedCompiledPatterns",void 0),d._begin=new Hu(i,d.id),d.beginCaptures=a,d._end=new Hu(s||"￿",-1),d.endHasBackReferences=d._end.hasBackReferences,d.endCaptures=l,d.applyEndPatternLast=c||!1,d.patterns=u.patterns,d.hasMissingPatterns=u.hasMissingPatterns,d._cachedCompiledPatterns=null,d}return Pc(t,e),Uc(t,[{key:"dispose",value:function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}},{key:"debugBeginRegExp",get:function(){return"".concat(this._begin.source)}},{key:"debugEndRegExp",get:function(){return"".concat(this._end.source)}},{key:"getEndWithResolvedBackReferences",value:function(e,t){return this._end.resolveBackReferences(e,t)}},{key:"collectPatterns",value:function(e,t){t.push(this._begin)}},{key:"compile",value:function(e,t){return this._getCachedCompiledPatterns(e,t).compile(e)}},{key:"compileAG",value:function(e,t,n,r){return this._getCachedCompiledPatterns(e,t).compileAG(e,n,r)}},{key:"_getCachedCompiledPatterns",value:function(e,t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new zu;var n,r=Bc(this.patterns);try{for(r.s();!(n=r.n()).done;){var o=n.value;e.getRule(o).collectPatterns(e,this._cachedCompiledPatterns)}}catch(e){r.e(e)}finally{r.f()}this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,t):this._cachedCompiledPatterns.setSource(0,t)),this._cachedCompiledPatterns}}])}(Nu),Bu=function(e){function t(e,n,r,o,i,a,s,l,c){var u;return Vc(this,t),zc(u=Tc(this,t,[e,n,r,o]),"_begin",void 0),zc(u,"beginCaptures",void 0),zc(u,"whileCaptures",void 0),zc(u,"_while",void 0),zc(u,"whileHasBackReferences",void 0),zc(u,"hasMissingPatterns",void 0),zc(u,"patterns",void 0),zc(u,"_cachedCompiledPatterns",void 0),zc(u,"_cachedCompiledWhilePatterns",void 0),u._begin=new Hu(i,u.id),u.beginCaptures=a,u.whileCaptures=l,u._while=new Hu(s,-2),u.whileHasBackReferences=u._while.hasBackReferences,u.patterns=c.patterns,u.hasMissingPatterns=c.hasMissingPatterns,u._cachedCompiledPatterns=null,u._cachedCompiledWhilePatterns=null,u}return Pc(t,e),Uc(t,[{key:"dispose",value:function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}},{key:"debugBeginRegExp",get:function(){return"".concat(this._begin.source)}},{key:"debugWhileRegExp",get:function(){return"".concat(this._while.source)}},{key:"getWhileWithResolvedBackReferences",value:function(e,t){return this._while.resolveBackReferences(e,t)}},{key:"collectPatterns",value:function(e,t){t.push(this._begin)}},{key:"compile",value:function(e,t){return this._getCachedCompiledPatterns(e).compile(e)}},{key:"compileAG",value:function(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}},{key:"_getCachedCompiledPatterns",value:function(e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new zu;var t,n=Bc(this.patterns);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.getRule(r).collectPatterns(e,this._cachedCompiledPatterns)}}catch(e){n.e(e)}finally{n.f()}}return this._cachedCompiledPatterns}},{key:"compileWhile",value:function(e,t){return this._getCachedCompiledWhilePatterns(e,t).compile(e)}},{key:"compileWhileAG",value:function(e,t,n,r){return this._getCachedCompiledWhilePatterns(e,t).compileAG(e,n,r)}},{key:"_getCachedCompiledWhilePatterns",value:function(e,t){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new zu,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,t||"￿"),this._cachedCompiledWhilePatterns}}])}(Nu),Fu=function(){function e(){Vc(this,e)}return Uc(e,null,[{key:"createCaptureRule",value:function(e,t,n,r,o){return e.registerRule((function(e){return new Pu(t,e,n,r,o)}))}},{key:"getCompiledRuleId",value:function(t,n,r){return t.id||n.registerRule((function(o){if(t.id=o,t.match)return new Lu(t.$vscodeTextmateLocation,t.id,t.name,t.match,e._compileCaptures(t.captures,n,r));if(void 0===t.begin){t.repository&&(r=Kc({},r,t.repository));var i=t.patterns;return void 0===i&&t.include&&(i=[{include:t.include}]),new Ru(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,e._compilePatterns(i,n,r))}return t.while?new Bu(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,e._compileCaptures(t.beginCaptures||t.captures,n,r),t.while,e._compileCaptures(t.whileCaptures||t.captures,n,r),e._compilePatterns(t.patterns,n,r)):new Iu(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,e._compileCaptures(t.beginCaptures||t.captures,n,r),t.end,e._compileCaptures(t.endCaptures||t.captures,n,r),t.applyEndPatternLast,e._compilePatterns(t.patterns,n,r))})),t.id}},{key:"_compileCaptures",value:function(t,n,r){var o=[];if(t){var i=0;for(var a in t)if("$vscodeTextmateLocation"!==a){var s=parseInt(a,10);s>i&&(i=s)}for(var l=0;l<=i;l++)o[l]=null;for(var c in t)if("$vscodeTextmateLocation"!==c){var u=parseInt(c,10),d=0;t[c].patterns&&(d=e.getCompiledRuleId(t[c],n,r)),o[u]=e.createCaptureRule(n,t[c].$vscodeTextmateLocation,t[c].name,t[c].contentName,d)}}return o}},{key:"_compilePatterns",value:function(t,n,r){var o=[];if(t)for(var i=0,a=t.length;i<a;i++){var s=t[i],l=-1;if(s.include){var c=Ou(s.include);switch(c.kind){case 0:case 1:l=e.getCompiledRuleId(r[s.include],n,r);break;case 2:var u=r[c.ruleName];u&&(l=e.getCompiledRuleId(u,n,r));break;case 3:case 4:var d=c.scopeName,f=4===c.kind?c.ruleName:null,p=n.getExternalGrammar(d,r);if(p)if(f){var h=p.repository[f];h&&(l=e.getCompiledRuleId(h,n,p.repository))}else l=e.getCompiledRuleId(p.repository.$self,n,p.repository)}}else l=e.getCompiledRuleId(s,n,r);if(-1!==l){var m=n.getRule(l),v=!1;if((m instanceof Ru||m instanceof Iu||m instanceof Bu)&&m.hasMissingPatterns&&0===m.patterns.length&&(v=!0),v)continue;o.push(l)}}return{patterns:o,hasMissingPatterns:(t?t.length:0)!==o.length}}}])}(),Hu=function(){function e(t,n){if(Vc(this,e),zc(this,"source",void 0),zc(this,"ruleId",void 0),zc(this,"hasAnchor",void 0),zc(this,"hasBackReferences",void 0),zc(this,"_anchorCache",void 0),t&&"string"==typeof t){for(var r=t.length,o=0,i=[],a=!1,s=0;s<r;s++)if("\\"===t.charAt(s)&&s+1<r){var l=t.charAt(s+1);"z"===l?(i.push(t.substring(o,s)),i.push("$(?!\\n)(?<!\\n)"),o=s+2):"A"!==l&&"G"!==l||(a=!0),s++}this.hasAnchor=a,0===o?this.source=t:(i.push(t.substring(o,r)),this.source=i.join(""))}else this.hasAnchor=!1,this.source=t;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,"string"==typeof this.source?this.hasBackReferences=Tu.test(this.source):this.hasBackReferences=!1}return Uc(e,[{key:"clone",value:function(){return new e(this.source,this.ruleId)}},{key:"setSource",value:function(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}},{key:"resolveBackReferences",value:function(e,t){if("string"!=typeof this.source)throw new Error("This method should only be called if the source is a string");var n=t.map((function(t){return e.substring(t.start,t.end)}));return ju.lastIndex=0,this.source.replace(ju,(function(e,t){return tu(n[parseInt(t,10)]||"")}))}},{key:"_buildAnchorCache",value:function(){if("string"!=typeof this.source)throw new Error("This method should only be called if the source is a string");var e,t,n,r,o=[],i=[],a=[],s=[];for(e=0,t=this.source.length;e<t;e++)n=this.source.charAt(e),o[e]=n,i[e]=n,a[e]=n,s[e]=n,"\\"===n&&e+1<t&&("A"===(r=this.source.charAt(e+1))?(o[e+1]="￿",i[e+1]="￿",a[e+1]="A",s[e+1]="A"):"G"===r?(o[e+1]="￿",i[e+1]="G",a[e+1]="￿",s[e+1]="G"):(o[e+1]=r,i[e+1]=r,a[e+1]=r,s[e+1]=r),e++);return{A0_G0:o.join(""),A0_G1:i.join(""),A1_G0:a.join(""),A1_G1:s.join("")}}},{key:"resolveAnchors",value:function(e,t){return this.hasAnchor&&this._anchorCache&&"string"==typeof this.source?e?t?this._anchorCache.A1_G1:this._anchorCache.A1_G0:t?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source}}])}(),zu=function(){return Uc((function e(){Vc(this,e),zc(this,"_items",void 0),zc(this,"_hasAnchors",void 0),zc(this,"_cached",void 0),zc(this,"_anchorCache",void 0),this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}),[{key:"dispose",value:function(){this._disposeCaches()}},{key:"_disposeCaches",value:function(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}},{key:"push",value:function(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}},{key:"unshift",value:function(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}},{key:"length",value:function(){return this._items.length}},{key:"setSource",value:function(e,t){this._items[e].source!==t&&(this._disposeCaches(),this._items[e].setSource(t))}},{key:"compile",value:function(e){if(!this._cached){var t=this._items.map((function(e){return e.source}));this._cached=new Vu(e,t,this._items.map((function(e){return e.ruleId})))}return this._cached}},{key:"compileAG",value:function(e,t,n){return this._hasAnchors?t?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G0):this.compile(e)}},{key:"_resolveAnchors",value:function(e,t,n){var r=this._items.map((function(e){return e.resolveAnchors(t,n)}));return new Vu(e,r,this._items.map((function(e){return e.ruleId})))}}])}(),Vu=function(){return Uc((function e(t,n,r){Vc(this,e),zc(this,"scanner",void 0),this.regExps=n,this.rules=r,this.scanner=t.createOnigScanner(n)}),[{key:"dispose",value:function(){"function"==typeof this.scanner.dispose&&this.scanner.dispose()}},{key:"toString",value:function(){for(var e=[],t=0,n=this.rules.length;t<n;t++)e.push("   - "+this.rules[t]+": "+this.regExps[t]);return e.join("\n")}},{key:"findNextMatchSync",value:function(e,t,n){var r=this.scanner.findNextMatchSync(e,t,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}}])}(),$u=Uc((function e(t,n){Vc(this,e),this.languageId=t,this.tokenType=n})),Uu=(Ac=function(){function e(t,n){var r=this;Vc(this,e),zc(this,"_defaultAttributes",void 0),zc(this,"_embeddedLanguagesMatcher",void 0),zc(this,"_getBasicScopeAttributes",new nu((function(e){var t=r._scopeToLanguage(e),n=r._toStandardTokenType(e);return new $u(t,n)}))),this._defaultAttributes=new $u(t,8),this._embeddedLanguagesMatcher=new Gu(Object.entries(n||{}))}return Uc(e,[{key:"getDefaultAttributes",value:function(){return this._defaultAttributes}},{key:"getBasicScopeAttributes",value:function(t){return null===t?e._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(t)}},{key:"_scopeToLanguage",value:function(e){return this._embeddedLanguagesMatcher.match(e)||0}},{key:"_toStandardTokenType",value:function(t){var n=t.match(e.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}}])}(),zc(Ac,"_NULL_SCOPE_METADATA",new $u(0,0)),zc(Ac,"STANDARD_TOKEN_TYPE_REGEXP",/\b(comment|string|regex|meta\.embedded)\b/),Ac),Gu=function(){return Uc((function e(t){if(Vc(this,e),zc(this,"values",void 0),zc(this,"scopesRegExp",void 0),0===t.length)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);var n=t.map((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||Fc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),n=t[0];return t[1],tu(n)}));n.sort(),n.reverse(),this.scopesRegExp=new RegExp("^((".concat(n.join(")|("),"))($|\\.)"),"")}}),[{key:"match",value:function(e){if(this.scopesRegExp){var t=e.match(this.scopesRegExp);if(t)return this.values.get(t[1])}}}])}(),Wu=("undefined"!=typeof process&&process.env.VSCODE_TEXTMATE_DEBUG,Uc((function e(t,n){Vc(this,e),this.stack=t,this.stoppedEarly=n})));function qu(e,t,n,r,o,i,a,s){var l=t.content.length,c=!1,u=-1;if(a){var d=function(e,t,n,r,o,i){for(var a=o.beginRuleCapturedEOL?0:-1,s=[],l=o;l;l=l.pop()){var c=l.getRule(e);c instanceof Bu&&s.push({rule:c,stack:l})}for(var u=s.pop();u;u=s.pop()){var d=Zu(u.rule,e,u.stack.endRule,n,r===a),f=d.ruleScanner,p=d.findOptions,h=f.findNextMatchSync(t,r,p);if(!h){o=u.stack.pop();break}if(-2!==h.ruleId){o=u.stack.pop();break}h.captureIndices&&h.captureIndices.length&&(i.produce(u.stack,h.captureIndices[0].start),Ju(e,t,n,u.stack,i,u.rule.whileCaptures,h.captureIndices),i.produce(u.stack,h.captureIndices[0].end),a=h.captureIndices[0].end,h.captureIndices[0].end>r&&(r=h.captureIndices[0].end,n=!1))}return{stack:o,linePos:r,anchorPosition:a,isFirstLine:n}}(e,t,n,r,o,i);o=d.stack,r=d.linePos,n=d.isFirstLine,u=d.anchorPosition}for(var f=Date.now();!c;){if(0!==s&&Date.now()-f>s)return new Wu(o,!0);p()}return new Wu(o,!1);function p(){var a=function(e,t,n,r,o,i){var a=function(e,t,n,r,o,i){var a=Ku(o.getRule(e),e,o.endRule,n,r===i),s=a.ruleScanner,l=a.findOptions,c=s.findNextMatchSync(t,r,l);return c?{captureIndices:c.captureIndices,matchedRuleId:c.ruleId}:null}(e,t,n,r,o,i),s=e.getInjections();if(0===s.length)return a;var l=function(e,t,n,r,o,i,a){for(var s,l=Number.MAX_VALUE,c=null,u=0,d=i.contentNameScopesList.getScopeNames(),f=0,p=e.length;f<p;f++){var h=e[f];if(h.matcher(d)){var m=Ku(t.getRule(h.ruleId),t,null,r,o===a),v=m.ruleScanner,g=m.findOptions,y=v.findNextMatchSync(n,o,g);if(y){var b=y.captureIndices[0].start;if(!(b>=l)&&(l=b,c=y.captureIndices,s=y.ruleId,u=h.priority,l===o))break}}}return c?{priorityMatch:-1===u,captureIndices:c,matchedRuleId:s}:null}(s,e,t,n,r,o,i);if(!l)return a;if(!a)return l;var c=a.captureIndices[0].start,u=l.captureIndices[0].start;return u<c||l.priorityMatch&&u===c?l:a}(e,t,n,r,o,u);if(!a)return i.produce(o,l),void(c=!0);var s=a.captureIndices,d=a.matchedRuleId,f=!!(s&&s.length>0)&&s[0].end>r;if(-1===d){var p=o.getRule(e);i.produce(o,s[0].start),o=o.withContentNameScopesList(o.nameScopesList),Ju(e,t,n,o,i,p.endCaptures,s),i.produce(o,s[0].end);var h=o;if(o=o.parent,u=h.getAnchorPos(),!f&&h.getEnterPos()===r)return o=h,i.produce(o,l),void(c=!0)}else{var m=e.getRule(d);i.produce(o,s[0].start);var v=o,g=m.getName(t.content,s),y=o.contentNameScopesList.pushAttributed(g,e);if(o=o.push(d,r,u,s[0].end===l,null,y,y),m instanceof Iu){var b=m;Ju(e,t,n,o,i,b.beginCaptures,s),i.produce(o,s[0].end),u=s[0].end;var k=b.getContentName(t.content,s),w=y.pushAttributed(k,e);if(o=o.withContentNameScopesList(w),b.endHasBackReferences&&(o=o.withEndRule(b.getEndWithResolvedBackReferences(t.content,s))),!f&&v.hasSameRuleAs(o))return o=o.pop(),i.produce(o,l),void(c=!0)}else if(m instanceof Bu){var x=m;Ju(e,t,n,o,i,x.beginCaptures,s),i.produce(o,s[0].end),u=s[0].end;var C=x.getContentName(t.content,s),S=y.pushAttributed(C,e);if(o=o.withContentNameScopesList(S),x.whileHasBackReferences&&(o=o.withEndRule(x.getWhileWithResolvedBackReferences(t.content,s))),!f&&v.hasSameRuleAs(o))return o=o.pop(),i.produce(o,l),void(c=!0)}else if(Ju(e,t,n,o,i,m.captures,s),i.produce(o,s[0].end),o=o.pop(),!f)return o=o.safePop(),i.produce(o,l),void(c=!0)}s[0].end>r&&(r=s[0].end,n=!1)}}function Ku(e,t,n,r,o){return{ruleScanner:e.compileAG(t,n,r,o),findOptions:0}}function Zu(e,t,n,r,o){return{ruleScanner:e.compileWhileAG(t,n,r,o),findOptions:0}}function Ju(e,t,n,r,o,i,a){if(0!==i.length){for(var s=t.content,l=Math.min(i.length,a.length),c=[],u=a[0].end,d=0;d<l;d++){var f=i[d];if(null!==f){var p=a[d];if(0!==p.length){if(p.start>u)break;for(;c.length>0&&c[c.length-1].endPos<=p.start;)o.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?o.produceFromScopes(c[c.length-1].scopes,p.start):o.produce(r,p.start),f.retokenizeCapturedWithRuleId){var h=f.getName(s,a),m=r.contentNameScopesList.pushAttributed(h,e),v=f.getContentName(s,a),g=m.pushAttributed(v,e),y=r.push(f.retokenizeCapturedWithRuleId,p.start,-1,!1,null,m,g),b=e.createOnigString(s.substring(0,p.end));qu(e,b,n&&0===p.start,p.start,y,o,!1,0),vu(b)}else{var k=f.getName(s,a);if(null!==k){var w=(c.length>0?c[c.length-1].scopes:r.contentNameScopesList).pushAttributed(k,e);c.push(new Xu(w,p.end))}}}}}for(;c.length>0;)o.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}}var Xu=Uc((function e(t,n){Vc(this,e),zc(this,"scopes",void 0),zc(this,"endPos",void 0),this.scopes=t,this.endPos=n}));function Yu(e,t,n,r,o){var i,a=hu(t,Qu),s=Fu.getCompiledRuleId(n,r,o.repository),l=Bc(a);try{for(l.s();!(i=l.n()).done;){var c=i.value;e.push({debugSelector:t,matcher:c.matcher,ruleId:s,grammar:o,priority:c.priority})}}catch(e){l.e(e)}finally{l.f()}}function Qu(e,t){if(t.length<e.length)return!1;var n=0;return e.every((function(e){for(var r=n;r<t.length;r++)if(ed(t[r],e))return n=r+1,!0;return!1}))}function ed(e,t){if(!e)return!1;if(e===t)return!0;var n=t.length;return e.length>n&&e.substr(0,n)===t&&"."===e[n]}var td=function(){return Uc((function e(t,n,r,o,i,a,s,l){if(Vc(this,e),zc(this,"_rootId",void 0),zc(this,"_lastRuleId",void 0),zc(this,"_ruleId2desc",void 0),zc(this,"_includedGrammars",void 0),zc(this,"_grammarRepository",void 0),zc(this,"_grammar",void 0),zc(this,"_injections",void 0),zc(this,"_basicScopeAttributesProvider",void 0),zc(this,"_tokenTypeMatchers",void 0),this._rootScopeName=t,this.balancedBracketSelectors=a,this._onigLib=l,this._basicScopeAttributesProvider=new Uu(r,o),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=s,this._grammar=nd(n,null),this._injections=null,this._tokenTypeMatchers=[],i)for(var c=0,u=Object.keys(i);c<u.length;c++){var d,f=u[c],p=Bc(hu(f,Qu));try{for(p.s();!(d=p.n()).done;){var h=d.value;this._tokenTypeMatchers.push({matcher:h.matcher,type:i[f]})}}catch(e){p.e(e)}finally{p.f()}}}),[{key:"themeProvider",get:function(){return this._grammarRepository}},{key:"dispose",value:function(){var e,t=Bc(this._ruleId2desc);try{for(t.s();!(e=t.n()).done;){var n=e.value;n&&n.dispose()}}catch(e){t.e(e)}finally{t.f()}}},{key:"createOnigScanner",value:function(e){return this._onigLib.createOnigScanner(e)}},{key:"createOnigString",value:function(e){return this._onigLib.createOnigString(e)}},{key:"getMetadataForScope",value:function(e){return this._basicScopeAttributesProvider.getBasicScopeAttributes(e)}},{key:"_collectInjections",value:function(){var e,t=this,n=[],r=this._rootScopeName,o=(e=r)===t._rootScopeName?t._grammar:t.getExternalGrammar(e);if(o){var i=o.injections;if(i)for(var a in i)Yu(n,a,i[a],this,o);var s=this._grammarRepository.injections(r);s&&s.forEach((function(e){var r=t.getExternalGrammar(e);if(r){var o=r.injectionSelector;o&&Yu(n,o,r,t,r)}}))}return n.sort((function(e,t){return e.priority-t.priority})),n}},{key:"getInjections",value:function(){return null===this._injections&&(this._injections=this._collectInjections()),this._injections}},{key:"registerRule",value:function(e){var t=++this._lastRuleId,n=e(t);return this._ruleId2desc[t]=n,n}},{key:"getRule",value:function(e){return this._ruleId2desc[e]}},{key:"getExternalGrammar",value:function(e,t){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){var n=this._grammarRepository.lookup(e);if(n)return this._includedGrammars[e]=nd(n,t&&t.$base),this._includedGrammars[e]}}},{key:"tokenizeLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this._tokenize(e,t,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}},{key:"tokenizeLine2",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this._tokenize(e,t,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}},{key:"_tokenize",value:function(e,t,n,r){var o;if(-1===this._rootId&&(this._rootId=Fu.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections()),t&&t!==od.NULL)o=!1,t.reset();else{o=!0;var i,a=this._basicScopeAttributesProvider.getDefaultAttributes(),s=this.themeProvider.getDefaults(),l=pu.set(0,a.languageId,a.tokenType,null,s.fontStyle,s.foregroundId,s.backgroundId),c=this.getRule(this._rootId).getName(null,null);i=c?rd.createRootAndLookUpScopeName(c,l,this):rd.createRoot("unknown",l),t=new od(null,this._rootId,-1,-1,!1,null,i,i)}e+="\n";var u=this.createOnigString(e),d=u.content.length,f=new ad(n,e,this._tokenTypeMatchers,this.balancedBracketSelectors),p=qu(this,u,o,0,t,f,!0,r);return vu(u),{lineLength:d,lineTokens:f,ruleStack:p.stack,stoppedEarly:p.stoppedEarly}}}])}();function nd(e,t){return(e=qc(e)).repository=e.repository||{},e.repository.$self={$vscodeTextmateLocation:e.$vscodeTextmateLocation,patterns:e.patterns,name:e.scopeName},e.repository.$base=t||e.repository.$self,e}var rd=function(){function e(t,n,r){Vc(this,e),this.parent=t,this.scopePath=n,this.tokenAttributes=r}return Uc(e,[{key:"scopeName",get:function(){return this.scopePath.scopeName}},{key:"toString",value:function(){return this.getScopeNames().join(" ")}},{key:"equals",value:function(t){return e.equals(this,t)}},{key:"pushAttributed",value:function(t,n){if(null===t)return this;if(-1===t.indexOf(" "))return e._pushAttributed(this,t,n);var r,o=this,i=Bc(t.split(/ /g));try{for(i.s();!(r=i.n()).done;){var a=r.value;o=e._pushAttributed(o,a,n)}}catch(e){i.e(e)}finally{i.f()}return o}},{key:"getScopeNames",value:function(){return this.scopePath.getSegments()}},{key:"getExtensionIfDefined",value:function(e){for(var t=[],n=this;n&&n!==e;){var r,o;t.push({encodedTokenAttributes:n.tokenAttributes,scopeNames:n.scopePath.getExtensionIfDefined(null!==(r=null===(o=n.parent)||void 0===o?void 0:o.scopePath)&&void 0!==r?r:null)}),n=n.parent}return n===e?t.reverse():void 0}}],[{key:"fromExtension",value:function(t,n){var r,o,i=t,a=null!==(r=null==t?void 0:t.scopePath)&&void 0!==r?r:null,s=Bc(n);try{for(s.s();!(o=s.n()).done;){var l=o.value;i=new e(i,a=ou.push(a,l.scopeNames),l.encodedTokenAttributes)}}catch(e){s.e(e)}finally{s.f()}return i}},{key:"createRoot",value:function(t,n){return new e(null,new ou(null,t),n)}},{key:"createRootAndLookUpScopeName",value:function(t,n,r){var o=r.getMetadataForScope(t),i=new ou(null,t),a=r.themeProvider.themeMatch(i),s=e.mergeAttributes(n,o,a);return new e(null,i,s)}},{key:"equals",value:function(e,t){for(;;){if(e===t)return!0;if(!e&&!t)return!0;if(!e||!t)return!1;if(e.scopeName!==t.scopeName||e.tokenAttributes!==t.tokenAttributes)return!1;e=e.parent,t=t.parent}}},{key:"mergeAttributes",value:function(e,t,n){var r=-1,o=0,i=0;return null!==n&&(r=n.fontStyle,o=n.foregroundId,i=n.backgroundId),pu.set(e,t.languageId,t.tokenType,null,r,o,i)}},{key:"_pushAttributed",value:function(t,n,r){var o=r.getMetadataForScope(n),i=t.scopePath.push(n),a=r.themeProvider.themeMatch(i),s=e.mergeAttributes(t.tokenAttributes,o,a);return new e(t,i,s)}}])}(),od=(Oc=function(){function e(t,n,r,o,i,a,s,l){Vc(this,e),zc(this,"_stackElementBrand",void 0),zc(this,"_enterPos",void 0),zc(this,"_anchorPos",void 0),zc(this,"depth",void 0),this.parent=t,this.ruleId=n,this.beginRuleCapturedEOL=i,this.endRule=a,this.nameScopesList=s,this.contentNameScopesList=l,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=o}return Uc(e,[{key:"equals",value:function(t){return null!==t&&e._equals(this,t)}},{key:"clone",value:function(){return this}},{key:"reset",value:function(){e._reset(this)}},{key:"pop",value:function(){return this.parent}},{key:"safePop",value:function(){return this.parent?this.parent:this}},{key:"push",value:function(t,n,r,o,i,a,s){return new e(this,t,n,r,o,i,a,s)}},{key:"getEnterPos",value:function(){return this._enterPos}},{key:"getAnchorPos",value:function(){return this._anchorPos}},{key:"getRule",value:function(e){return e.getRule(this.ruleId)}},{key:"toString",value:function(){var e=[];return this._writeString(e,0),"["+e.join(",")+"]"}},{key:"_writeString",value:function(e,t){var n,r;return this.parent&&(t=this.parent._writeString(e,t)),e[t++]="(".concat(this.ruleId,", ").concat(null===(n=this.nameScopesList)||void 0===n?void 0:n.toString(),", ").concat(null===(r=this.contentNameScopesList)||void 0===r?void 0:r.toString(),")"),t}},{key:"withContentNameScopesList",value:function(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}},{key:"withEndRule",value:function(t){return this.endRule===t?this:new e(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,t,this.nameScopesList,this.contentNameScopesList)}},{key:"hasSameRuleAs",value:function(e){for(var t=this;t&&t._enterPos===e._enterPos;){if(t.ruleId===e.ruleId)return!0;t=t.parent}return!1}},{key:"toStateStackFrame",value:function(){var e,t,n,r,o,i;return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:null!==(e=null===(t=this.nameScopesList)||void 0===t?void 0:t.getExtensionIfDefined(null!==(n=null===(r=this.parent)||void 0===r?void 0:r.nameScopesList)&&void 0!==n?n:null))&&void 0!==e?e:[],contentNameScopesList:null!==(o=null===(i=this.contentNameScopesList)||void 0===i?void 0:i.getExtensionIfDefined(this.nameScopesList))&&void 0!==o?o:[]}}}],[{key:"_equals",value:function(e,t){return e===t||!!this._structuralEquals(e,t)&&rd.equals(e.contentNameScopesList,t.contentNameScopesList)}},{key:"_structuralEquals",value:function(e,t){for(;;){if(e===t)return!0;if(!e&&!t)return!0;if(!e||!t)return!1;if(e.depth!==t.depth||e.ruleId!==t.ruleId||e.endRule!==t.endRule)return!1;e=e.parent,t=t.parent}}},{key:"_reset",value:function(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}},{key:"pushFrame",value:function(t,n){var r,o,i,a=rd.fromExtension(null!==(r=null==t?void 0:t.nameScopesList)&&void 0!==r?r:null,n.nameScopesList);return new e(t,n.ruleId,null!==(o=n.enterPos)&&void 0!==o?o:-1,null!==(i=n.anchorPos)&&void 0!==i?i:-1,n.beginRuleCapturedEOL,n.endRule,a,rd.fromExtension(a,n.contentNameScopesList))}}])}(),zc(Oc,"NULL",new Oc(null,0,0,0,!1,null,null,null)),Oc),id=function(){return Uc((function e(t,n){var r=this;Vc(this,e),zc(this,"balancedBracketScopes",void 0),zc(this,"unbalancedBracketScopes",void 0),zc(this,"allowAny",!1),this.balancedBracketScopes=t.flatMap((function(e){return"*"===e?(r.allowAny=!0,[]):hu(e,Qu).map((function(e){return e.matcher}))})),this.unbalancedBracketScopes=n.flatMap((function(e){return hu(e,Qu).map((function(e){return e.matcher}))}))}),[{key:"matchesAlways",get:function(){return this.allowAny&&0===this.unbalancedBracketScopes.length}},{key:"matchesNever",get:function(){return 0===this.balancedBracketScopes.length&&!this.allowAny}},{key:"match",value:function(e){var t,n=Bc(this.unbalancedBracketScopes);try{for(n.s();!(t=n.n()).done;)if((0,t.value)(e))return!1}catch(e){n.e(e)}finally{n.f()}var r,o=Bc(this.balancedBracketScopes);try{for(o.s();!(r=o.n()).done;)if((0,r.value)(e))return!0}catch(e){o.e(e)}finally{o.f()}return this.allowAny}}])}(),ad=function(){return Uc((function e(t,n,r,o){Vc(this,e),zc(this,"_emitBinaryTokens",void 0),zc(this,"_lineText",void 0),zc(this,"_tokens",void 0),zc(this,"_binaryTokens",void 0),zc(this,"_lastTokenEndIndex",void 0),zc(this,"_tokenTypeOverrides",void 0),this.balancedBracketSelectors=o,this._emitBinaryTokens=t,this._tokenTypeOverrides=r,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}),[{key:"produce",value:function(e,t){this.produceFromScopes(e.contentNameScopesList,t)}},{key:"produceFromScopes",value:function(e,t){var n;if(!(this._lastTokenEndIndex>=t)){if(this._emitBinaryTokens){var r,o,i=null!==(r=null==e?void 0:e.tokenAttributes)&&void 0!==r?r:0,a=!1;if(null!==(o=this.balancedBracketSelectors)&&void 0!==o&&o.matchesAlways&&(a=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){var s,l,c=null!==(s=null==e?void 0:e.getScopeNames())&&void 0!==s?s:[],u=Bc(this._tokenTypeOverrides);try{for(u.s();!(l=u.n()).done;){var d=l.value;d.matcher(c)&&(i=pu.set(i,0,d.type,null,-1,0,0))}}catch(e){u.e(e)}finally{u.f()}this.balancedBracketSelectors&&(a=this.balancedBracketSelectors.match(c))}return a&&(i=pu.set(i,0,8,a,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===i||(this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(i)),void(this._lastTokenEndIndex=t)}var f=null!==(n=null==e?void 0:e.getScopeNames())&&void 0!==n?n:[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:t,scopes:f}),this._lastTokenEndIndex=t}}},{key:"getResult",value:function(e,t){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===t-1&&this._tokens.pop(),0===this._tokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}},{key:"getBinaryResult",value:function(e,t){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===t-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),0===this._binaryTokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._binaryTokens[this._binaryTokens.length-2]=0);for(var n=new Uint32Array(this._binaryTokens.length),r=0,o=this._binaryTokens.length;r<o;r++)n[r]=this._binaryTokens[r];return n}}])}(),sd=function(){return Uc((function e(t,n){Vc(this,e),zc(this,"_grammars",new Map),zc(this,"_rawGrammars",new Map),zc(this,"_injectionGrammars",new Map),zc(this,"_theme",void 0),this._onigLib=n,this._theme=t}),[{key:"dispose",value:function(){var e,t=Bc(this._grammars.values());try{for(t.s();!(e=t.n()).done;)e.value.dispose()}catch(e){t.e(e)}finally{t.f()}}},{key:"setTheme",value:function(e){this._theme=e}},{key:"getColorMap",value:function(){return this._theme.getColorMap()}},{key:"addGrammar",value:function(e,t){this._rawGrammars.set(e.scopeName,e),t&&this._injectionGrammars.set(e.scopeName,t)}},{key:"lookup",value:function(e){return this._rawGrammars.get(e)}},{key:"injections",value:function(e){return this._injectionGrammars.get(e)}},{key:"getDefaults",value:function(){return this._theme.getDefaults()}},{key:"themeMatch",value:function(e){return this._theme.match(e)}},{key:"grammarForScopeName",value:function(e,t,n,r,o){if(!this._grammars.has(e)){var i=this._rawGrammars.get(e);if(!i)return null;this._grammars.set(e,function(e,t,n,r,o,i,a,s){return new td(e,t,n,r,o,i,a,s)}(e,i,t,n,r,o,this,this._onigLib))}return this._grammars.get(e)}}])}(),ld=function(){return Uc((function e(t){Vc(this,e),zc(this,"_options",void 0),zc(this,"_syncRegistry",void 0),zc(this,"_ensureGrammarCache",void 0),this._options=t,this._syncRegistry=new sd(ru.createFromRawTheme(t.theme,t.colorMap),t.onigLib),this._ensureGrammarCache=new Map}),[{key:"dispose",value:function(){this._syncRegistry.dispose()}},{key:"setTheme",value:function(e,t){this._syncRegistry.setTheme(ru.createFromRawTheme(e,t))}},{key:"getColorMap",value:function(){return this._syncRegistry.getColorMap()}},{key:"loadGrammarWithEmbeddedLanguages",value:function(e,t,n){return this.loadGrammarWithConfiguration(e,t,{embeddedLanguages:n})}},{key:"loadGrammarWithConfiguration",value:function(e,t,n){return this._loadGrammar(e,t,n.embeddedLanguages,n.tokenTypes,new id(n.balancedBracketSelectors||[],n.unbalancedBracketSelectors||[]))}},{key:"loadGrammar",value:function(e){return this._loadGrammar(e,0,null,null,null)}},{key:"_loadGrammar",value:function(e,t,n,r,o){for(var i=this,a=new ku(this._syncRegistry,e);a.Q.length>0;)a.Q.map((function(e){return i._loadSingleGrammar(e.scopeName)})),a.processQueue();return this._grammarForScopeName(e,t,n,r,o)}},{key:"_loadSingleGrammar",value:function(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}},{key:"_doLoadSingleGrammar",value:function(e){var t=this._options.loadGrammar(e);if(t){var n="function"==typeof this._options.getInjections?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(t,n)}}},{key:"addGrammar",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this._syncRegistry.addGrammar(e,t),this._grammarForScopeName(e.scopeName,n,r)}},{key:"_grammarForScopeName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return this._syncRegistry.grammarForScopeName(e,t,n,r,o)}}])}(),cd=od.NULL,ud=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];function dd(e){return dd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dd(e)}function fd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hd(r.key),r)}}function pd(e,t,n){return t&&fd(e.prototype,t),n&&fd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function hd(e){var t=function(e){if("object"!=dd(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=dd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==dd(t)?t:t+""}var md=pd((function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.normal=n,this.property=t,r&&(this.space=r)}));function vd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function gd(e,t){var n,r={},o={},i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return vd(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vd(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;Object.assign(r,a.property),Object.assign(o,a.normal)}}catch(e){i.e(e)}finally{i.f()}return new md(r,o,t)}function yd(e){return e.toLowerCase()}function bd(e){return bd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bd(e)}function kd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xd(r.key),r)}}function wd(e,t,n){return t&&kd(e.prototype,t),n&&kd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xd(e){var t=function(e){if("object"!=bd(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=bd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==bd(t)?t:t+""}md.prototype.normal={},md.prototype.property={},md.prototype.space=void 0;var Cd=wd((function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.attribute=n,this.property=t}));Cd.prototype.attribute="",Cd.prototype.booleanish=!1,Cd.prototype.boolean=!1,Cd.prototype.commaOrSpaceSeparated=!1,Cd.prototype.commaSeparated=!1,Cd.prototype.defined=!1,Cd.prototype.mustUseProperty=!1,Cd.prototype.number=!1,Cd.prototype.overloadedBoolean=!1,Cd.prototype.property="",Cd.prototype.spaceSeparated=!1,Cd.prototype.space=void 0;var Sd=0,_d=jd(),Ed=jd(),Dd=jd(),Md=jd(),Ad=jd(),Od=jd(),Td=jd();function jd(){return Math.pow(2,++Sd)}function Nd(e){return Nd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nd(e)}function Pd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pd=function(){return!!e})()}function Ld(e){return Ld=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ld(e)}function Rd(e,t){return Rd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rd(e,t)}var Id=Object.keys(l),Bd=function(e){function t(e,n,r,o){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a,s,c,u=-1;if(Fd((a=this,c=[e,n],s=Ld(s=t),i=function(e,t){if(t&&("object"==Nd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(a,Pd()?Reflect.construct(s,c||[],Ld(a).constructor):s.apply(a,c))),"space",o),"number"==typeof r)for(;++u<Id.length;){var d=Id[u];Fd(i,Id[u],(r&l[d])===l[d])}return i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rd(e,t)}(t,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n;var n}(Cd);function Fd(e,t,n){n&&(e[t]=n)}function Hd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return zd(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zd(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Vd(e){for(var t={},n={},r=0,o=Object.entries(e.properties);r<o.length;r++){var i=Hd(o[r],2),a=i[0],s=i[1],l=new Bd(a,e.transform(e.attributes||{},a),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(a)&&(l.mustUseProperty=!0),t[a]=l,n[yd(a)]=a,n[yd(l.attribute)]=a}return new md(t,n,e.space)}Bd.prototype.defined=!0;var $d=Vd({properties:{ariaActiveDescendant:null,ariaAtomic:Ed,ariaAutoComplete:null,ariaBusy:Ed,ariaChecked:Ed,ariaColCount:Md,ariaColIndex:Md,ariaColSpan:Md,ariaControls:Ad,ariaCurrent:null,ariaDescribedBy:Ad,ariaDetails:null,ariaDisabled:Ed,ariaDropEffect:Ad,ariaErrorMessage:null,ariaExpanded:Ed,ariaFlowTo:Ad,ariaGrabbed:Ed,ariaHasPopup:null,ariaHidden:Ed,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ad,ariaLevel:Md,ariaLive:null,ariaModal:Ed,ariaMultiLine:Ed,ariaMultiSelectable:Ed,ariaOrientation:null,ariaOwns:Ad,ariaPlaceholder:null,ariaPosInSet:Md,ariaPressed:Ed,ariaReadOnly:Ed,ariaRelevant:null,ariaRequired:Ed,ariaRoleDescription:Ad,ariaRowCount:Md,ariaRowIndex:Md,ariaRowSpan:Md,ariaSelected:Ed,ariaSetSize:Md,ariaSort:null,ariaValueMax:Md,ariaValueMin:Md,ariaValueNow:Md,ariaValueText:null,role:null},transform:function(e,t){return"role"===t?t:"aria-"+t.slice(4).toLowerCase()}});function Ud(e,t){return t in e?e[t]:t}function Gd(e,t){return Ud(e,t.toLowerCase())}var Wd=Vd({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Od,acceptCharset:Ad,accessKey:Ad,action:null,allow:null,allowFullScreen:_d,allowPaymentRequest:_d,allowUserMedia:_d,alt:null,as:null,async:_d,autoCapitalize:null,autoComplete:Ad,autoFocus:_d,autoPlay:_d,blocking:Ad,capture:null,charSet:null,checked:_d,cite:null,className:Ad,cols:Md,colSpan:null,content:null,contentEditable:Ed,controls:_d,controlsList:Ad,coords:Md|Od,crossOrigin:null,data:null,dateTime:null,decoding:null,default:_d,defer:_d,dir:null,dirName:null,disabled:_d,download:Dd,draggable:Ed,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:_d,formTarget:null,headers:Ad,height:Md,hidden:_d,high:Md,href:null,hrefLang:null,htmlFor:Ad,httpEquiv:Ad,id:null,imageSizes:null,imageSrcSet:null,inert:_d,inputMode:null,integrity:null,is:null,isMap:_d,itemId:null,itemProp:Ad,itemRef:Ad,itemScope:_d,itemType:Ad,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:_d,low:Md,manifest:null,max:null,maxLength:Md,media:null,method:null,min:null,minLength:Md,multiple:_d,muted:_d,name:null,nonce:null,noModule:_d,noValidate:_d,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:_d,optimum:Md,pattern:null,ping:Ad,placeholder:null,playsInline:_d,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:_d,referrerPolicy:null,rel:Ad,required:_d,reversed:_d,rows:Md,rowSpan:Md,sandbox:Ad,scope:null,scoped:_d,seamless:_d,selected:_d,shadowRootClonable:_d,shadowRootDelegatesFocus:_d,shadowRootMode:null,shape:null,size:Md,sizes:null,slot:null,span:Md,spellCheck:Ed,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Md,step:null,style:null,tabIndex:Md,target:null,title:null,translate:null,type:null,typeMustMatch:_d,useMap:null,value:Ed,width:Md,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ad,axis:null,background:null,bgColor:null,border:Md,borderColor:null,bottomMargin:Md,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:_d,declare:_d,event:null,face:null,frame:null,frameBorder:null,hSpace:Md,leftMargin:Md,link:null,longDesc:null,lowSrc:null,marginHeight:Md,marginWidth:Md,noResize:_d,noHref:_d,noShade:_d,noWrap:_d,object:null,profile:null,prompt:null,rev:null,rightMargin:Md,rules:null,scheme:null,scrolling:Ed,standby:null,summary:null,text:null,topMargin:Md,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Md,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:_d,disableRemotePlayback:_d,prefix:null,property:null,results:Md,security:null,unselectable:null},space:"html",transform:Gd}),qd=Vd({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Td,accentHeight:Md,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Md,amplitude:Md,arabicForm:null,ascent:Md,attributeName:null,attributeType:null,azimuth:Md,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Md,by:null,calcMode:null,capHeight:Md,className:Ad,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Md,diffuseConstant:Md,direction:null,display:null,dur:null,divisor:Md,dominantBaseline:null,download:_d,dx:null,dy:null,edgeMode:null,editable:null,elevation:Md,enableBackground:null,end:null,event:null,exponent:Md,externalResourcesRequired:null,fill:null,fillOpacity:Md,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Od,g2:Od,glyphName:Od,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Md,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Md,horizOriginX:Md,horizOriginY:Md,id:null,ideographic:Md,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Md,k:Md,k1:Md,k2:Md,k3:Md,k4:Md,kernelMatrix:Td,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Md,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Md,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Md,overlineThickness:Md,paintOrder:null,panose1:null,path:null,pathLength:Md,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ad,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Md,pointsAtY:Md,pointsAtZ:Md,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Td,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Td,rev:Td,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Td,requiredFeatures:Td,requiredFonts:Td,requiredFormats:Td,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Md,specularExponent:Md,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Md,strikethroughThickness:Md,string:null,stroke:null,strokeDashArray:Td,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Md,strokeOpacity:Md,strokeWidth:null,style:null,surfaceScale:Md,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Td,tabIndex:Md,tableValues:null,target:null,targetX:Md,targetY:Md,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Td,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Md,underlineThickness:Md,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Md,values:null,vAlphabetic:Md,vMathematical:Md,vectorEffect:null,vHanging:Md,vIdeographic:Md,version:null,vertAdvY:Md,vertOriginX:Md,vertOriginY:Md,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Md,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Ud}),Kd=Vd({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:function(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Zd=Vd({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Gd}),Jd=Vd({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:function(e,t){return"xml:"+t.slice(3).toLowerCase()}}),Xd=gd([$d,Wd,Kd,Zd,Jd],"html"),Yd=gd([$d,qd,Kd,Zd,Jd],"svg"),Qd=a(9194),ef=a(9517),tf=/^>|^->|<!--|-->|--!>|<!-$/g,nf=[">"],rf=["<",">"],of=a(9205),af=a(4059),sf=/[A-Z]/g,lf=/-[a-z]/g,cf=/^data[-\w.:]+$/i;function uf(e){return"-"+e.toLowerCase()}function df(e){return e.charAt(1).toUpperCase()}var ff=a(4444),pf=a(7553),hf=gf(1),mf=gf(-1),vf=[];function gf(e){return function(t,n,r){var o=t?t.children:vf,i=(n||0)+e,a=o[i];if(!r)for(;a&&(0,pf.m)(a);)a=o[i+=e];return a}}var yf={}.hasOwnProperty;function bf(e){return function(t,n,r){return yf.call(e,t.tagName)&&e[t.tagName](t,n,r)}}var kf=bf({body:function(e,t,n){var r=hf(n,t);return!r||"comment"!==r.type},caption:wf,colgroup:wf,dd:function(e,t,n){var r=hf(n,t);return!r||"element"===r.type&&("dt"===r.tagName||"dd"===r.tagName)},dt:function(e,t,n){var r=hf(n,t);return Boolean(r&&"element"===r.type&&("dt"===r.tagName||"dd"===r.tagName))},head:wf,html:function(e,t,n){var r=hf(n,t);return!r||"comment"!==r.type},li:function(e,t,n){var r=hf(n,t);return!r||"element"===r.type&&"li"===r.tagName},optgroup:function(e,t,n){var r=hf(n,t);return!r||"element"===r.type&&"optgroup"===r.tagName},option:function(e,t,n){var r=hf(n,t);return!r||"element"===r.type&&("option"===r.tagName||"optgroup"===r.tagName)},p:function(e,t,n){var r=hf(n,t);return r?"element"===r.type&&("address"===r.tagName||"article"===r.tagName||"aside"===r.tagName||"blockquote"===r.tagName||"details"===r.tagName||"div"===r.tagName||"dl"===r.tagName||"fieldset"===r.tagName||"figcaption"===r.tagName||"figure"===r.tagName||"footer"===r.tagName||"form"===r.tagName||"h1"===r.tagName||"h2"===r.tagName||"h3"===r.tagName||"h4"===r.tagName||"h5"===r.tagName||"h6"===r.tagName||"header"===r.tagName||"hgroup"===r.tagName||"hr"===r.tagName||"main"===r.tagName||"menu"===r.tagName||"nav"===r.tagName||"ol"===r.tagName||"p"===r.tagName||"pre"===r.tagName||"section"===r.tagName||"table"===r.tagName||"ul"===r.tagName):!n||!("element"===n.type&&("a"===n.tagName||"audio"===n.tagName||"del"===n.tagName||"ins"===n.tagName||"map"===n.tagName||"noscript"===n.tagName||"video"===n.tagName))},rp:xf,rt:xf,tbody:function(e,t,n){var r=hf(n,t);return!r||"element"===r.type&&("tbody"===r.tagName||"tfoot"===r.tagName)},td:Cf,tfoot:function(e,t,n){return!hf(n,t)},th:Cf,thead:function(e,t,n){var r=hf(n,t);return Boolean(r&&"element"===r.type&&("tbody"===r.tagName||"tfoot"===r.tagName))},tr:function(e,t,n){var r=hf(n,t);return!r||"element"===r.type&&"tr"===r.tagName}});function wf(e,t,n){var r=hf(n,t,!0);return!r||"comment"!==r.type&&!("text"===r.type&&(0,pf.m)(r.value.charAt(0)))}function xf(e,t,n){var r=hf(n,t);return!r||"element"===r.type&&("rp"===r.tagName||"rt"===r.tagName)}function Cf(e,t,n){var r=hf(n,t);return!r||"element"===r.type&&("td"===r.tagName||"th"===r.tagName)}function Sf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var _f=bf({body:function(e){var t=hf(e,-1,!0);return!(t&&("comment"===t.type||"text"===t.type&&(0,pf.m)(t.value.charAt(0))||"element"===t.type&&("meta"===t.tagName||"link"===t.tagName||"script"===t.tagName||"style"===t.tagName||"template"===t.tagName)))},colgroup:function(e,t,n){var r=mf(n,t),o=hf(e,-1,!0);return!(n&&r&&"element"===r.type&&"colgroup"===r.tagName&&kf(r,n.children.indexOf(r),n))&&Boolean(o&&"element"===o.type&&"col"===o.tagName)},head:function(e){var t,n=new Set,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Sf(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sf(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(e.children);try{for(r.s();!(t=r.n()).done;){var o=t.value;if("element"===o.type&&("base"===o.tagName||"title"===o.tagName)){if(n.has(o.tagName))return!1;n.add(o.tagName)}}}catch(e){r.e(e)}finally{r.f()}var i=e.children[0];return!i||"element"===i.type},html:function(e){var t=hf(e,-1);return!t||"comment"!==t.type},tbody:function(e,t,n){var r=mf(n,t),o=hf(e,-1);return(!n||!r||"element"!==r.type||"thead"!==r.tagName&&"tbody"!==r.tagName||!kf(r,n.children.indexOf(r),n))&&Boolean(o&&"element"===o.type&&"tr"===o.tagName)}}),Ef={name:[["\t\n\f\r &/=>".split(""),"\t\n\f\r \"&'/=>`".split("")],["\0\t\n\f\r \"&'/<=>".split(""),"\0\t\n\f\r \"&'/<=>`".split("")]],unquoted:[["\t\n\f\r &>".split(""),"\0\t\n\f\r \"&'<=>`".split("")],["\0\t\n\f\r \"&'<=>`".split(""),"\0\t\n\f\r \"&'<=>`".split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function Df(e,t,n){var r,o=function(e,t){var n=yd(t),r=t,o=Cd;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&cf.test(t)){if("-"===t.charAt(4)){var i=t.slice(5).replace(lf,df);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{var a=t.slice(4);if(!lf.test(a)){var s=a.replace(sf,uf);"-"!==s.charAt(0)&&(s="-"+s),t="data"+s}}o=Bd}return new o(r,t)}(e.schema,t),i=e.settings.allowParseErrors&&"html"===e.schema.space?0:1,a=e.settings.allowDangerousCharacters?0:1,s=e.quote;if(!o.overloadedBoolean||n!==o.attribute&&""!==n?!o.boolean&&!o.overloadedBoolean||"string"==typeof n&&n!==o.attribute&&""!==n||(n=Boolean(n)):n=!0,null==n||!1===n||"number"==typeof n&&Number.isNaN(n))return"";var l=(0,ef.l)(o.attribute,Object.assign({},e.settings.characterReferences,{subset:Ef.name[i][a]}));return!0===n?l:(n=Array.isArray(n)?(o.commaSeparated?af.A:ff.A)(n,{padLeft:!e.settings.tightCommaSeparatedLists}):String(n),e.settings.collapseEmptyAttributes&&!n?l:(e.settings.preferUnquoted&&(r=(0,ef.l)(n,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:Ef.unquoted[i][a]}))),r!==n&&(e.settings.quoteSmart&&(0,of.D)(n,s)>(0,of.D)(n,e.alternative)&&(s=e.alternative),r=s+(0,ef.l)(n,Object.assign({},e.settings.characterReferences,{subset:("'"===s?Ef.single:Ef.double)[i][a],attribute:!0}))+s),l+(r?"="+r:r)))}var Mf=["<","&"];function Af(e,t,n,r){return!n||"element"!==n.type||"script"!==n.tagName&&"style"!==n.tagName?(0,ef.l)(e.value,Object.assign({},r.settings.characterReferences,{subset:Mf})):e.value}var Of=(0,Qd.A)("type",{invalid:function(e){throw new Error("Expected node, not `"+e+"`")},unknown:function(e){throw new Error("Cannot compile unknown node `"+e.type+"`")},handlers:{comment:function(e,t,n,r){return r.settings.bogusComments?"<?"+(0,ef.l)(e.value,Object.assign({},r.settings.characterReferences,{subset:nf}))+">":"\x3c!--"+e.value.replace(tf,(function(e){return(0,ef.l)(e,Object.assign({},r.settings.characterReferences,{subset:rf}))}))+"--\x3e"},doctype:function(e,t,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"},element:function(e,t,n,r){var o,i=r.schema,a="svg"!==i.space&&r.settings.omitOptionalTags,s="svg"===i.space?r.settings.closeEmptyElements:r.settings.voids.includes(e.tagName.toLowerCase()),l=[];"html"===i.space&&"svg"===e.tagName&&(r.schema=Yd);var c=function(e,t){var n,r=[],o=-1;if(t)for(n in t)if(null!==t[n]&&void 0!==t[n]){var i=Df(e,n,t[n]);i&&r.push(i)}for(;++o<r.length;){var a=e.settings.tightAttributes?r[o].charAt(r[o].length-1):void 0;o!==r.length-1&&'"'!==a&&"'"!==a&&(r[o]+=" ")}return r.join("")}(r,e.properties),u=r.all("html"===i.space&&"template"===e.tagName?e.content:e);return r.schema=i,u&&(s=!1),!c&&a&&_f(e,t,n)||(l.push("<",e.tagName,c?" "+c:""),s&&("svg"===i.space||r.settings.closeSelfClosing)&&(o=c.charAt(c.length-1),(!r.settings.tightSelfClosing||"/"===o||o&&'"'!==o&&"'"!==o)&&l.push(" "),l.push("/")),l.push(">")),l.push(u),s||a&&kf(e,t,n)||l.push("</"+e.tagName+">"),l.join("")},raw:function(e,t,n,r){return r.settings.allowDangerousHtml?e.value:Af(e,0,n,r)},root:function(e,t,n,r){return r.all(e)},text:Af}}),Tf={},jf={},Nf=[];function Pf(e,t,n){return Of(e,t,n,this)}function Lf(e){for(var t=[],n=e&&e.children||Nf,r=-1;++r<n.length;)t[r]=this.one(n[r],r,e);return t.join("")}function Rf(e,t=!1){const n=e.split(/(\r?\n)/g);let r=0;const o=[];for(let e=0;e<n.length;e+=2){const i=t?n[e]+(n[e+1]||""):n[e];o.push([i,r]),r+=n[e].length,r+=n[e+1]?.length||0}return o}function If(e){return!e||["plaintext","txt","text","plain"].includes(e)}function Bf(e){return"ansi"===e||If(e)}function Ff(e){return"none"===e}function Hf(e){return Ff(e)}function zf(e,t){if(!t)return e;e.properties||={},e.properties.class||=[],"string"==typeof e.properties.class&&(e.properties.class=e.properties.class.split(/\s+/g)),Array.isArray(e.properties.class)||(e.properties.class=[]);const n=Array.isArray(t)?t:t.split(/\s+/g);for(const t of n)t&&!e.properties.class.includes(t)&&e.properties.class.push(t);return e}async function Vf(e){return Promise.resolve("function"==typeof e?e():e).then((e=>e.default||e))}function $f(e,t){const n="string"==typeof e?{}:{...e.colorReplacements},r="string"==typeof e?e:e.name;for(const[e,o]of Object.entries(t?.colorReplacements||{}))"string"==typeof o?n[e]=o:e===r&&Object.assign(n,o);return n}function Uf(e,t){return e&&t?.[e?.toLowerCase()]||e}function Gf(e){const t={};return e.color&&(t.color=e.color),e.bgColor&&(t["background-color"]=e.bgColor),e.fontStyle&&(e.fontStyle&lu.Italic&&(t["font-style"]="italic"),e.fontStyle&lu.Bold&&(t["font-weight"]="bold"),e.fontStyle&lu.Underline&&(t["text-decoration"]="underline")),t}function Wf(e){return"string"==typeof e?e:Object.entries(e).map((([e,t])=>`${e}:${t}`)).join(";")}class qf extends Error{constructor(e){super(e),this.name="ShikiError"}}const Kf=new WeakMap;function Zf(e,t){Kf.set(e,t)}function Jf(e){return Kf.get(e)}class Xf{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,t){return new Xf(Object.fromEntries((n=t,Array.isArray(n)?n:[n]).map((e=>[e,cd]))),e);var n}constructor(...e){if(2===e.length){const[t,n]=e;this.lang=n,this._stacks=t}else{const[t,n,r]=e;this.lang=n,this._stacks={[r]:t}}}getInternalStack(e=this.theme){return this._stacks[e]}get scopes(){return Mc(),Yf(this._stacks[this.theme])}getScopes(e=this.theme){return Yf(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.scopes}}}function Yf(e){const t=[],n=new Set;return function e(r){if(n.has(r))return;n.add(r);const o=r?.nameScopesList?.scopeName;o&&t.push(o),r.parent&&e(r.parent)}(e),t}function Qf(){const e=new WeakMap;function t(t){if(!e.has(t.meta)){let n=function(e){if("number"==typeof e){if(e<0||e>t.source.length)throw new qf(`Invalid decoration offset: ${e}. Code length: ${t.source.length}`);return{...r.indexToPos(e),offset:e}}{const t=r.lines[e.line];if(void 0===t)throw new qf(`Invalid decoration position ${JSON.stringify(e)}. Lines length: ${r.lines.length}`);if(e.character<0||e.character>t.length)throw new qf(`Invalid decoration position ${JSON.stringify(e)}. Line ${e.line} length: ${t.length}`);return{...e,offset:r.posToIndex(e.line,e.character)}}};const r=function(e){const t=Rf(e,!0).map((([e])=>e));return{lines:t,indexToPos:function(n){if(n===e.length)return{line:t.length-1,character:t[t.length-1].length};let r=n,o=0;for(const e of t){if(r<e.length)break;r-=e.length,o++}return{line:o,character:r}},posToIndex:function(e,n){let r=0;for(let n=0;n<e;n++)r+=t[n].length;return r+=n,r}}}(t.source),o=(t.options.decorations||[]).map((e=>({...e,start:n(e.start),end:n(e.end)})));!function(e){for(let t=0;t<e.length;t++){const n=e[t];if(n.start.offset>n.end.offset)throw new qf(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=t+1;r<e.length;r++){const t=e[r],o=n.start.offset<t.start.offset&&t.start.offset<n.end.offset,i=n.start.offset<t.end.offset&&t.end.offset<n.end.offset,a=t.start.offset<n.start.offset&&n.start.offset<t.end.offset,s=t.start.offset<n.end.offset&&n.end.offset<t.end.offset;if(o||i||a||s){if(i&&i)continue;if(a&&s)continue;throw new qf(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(t.start)} intersect.`)}}}}(o),e.set(t.meta,{decorations:o,converter:r,source:t.source})}return e.get(t.meta)}return{name:"shiki:decorations",tokens(e){if(!this.options.decorations?.length)return;const n=function(e,t){const n=Array.from(t instanceof Set?t:new Set(t)).sort(((e,t)=>e-t));return n.length?e.map((e=>e.flatMap((e=>{const t=n.filter((t=>e.offset<t&&t<e.offset+e.content.length)).map((t=>t-e.offset)).sort(((e,t)=>e-t));return t.length?function(e,t){let n=0;const r=[];for(const o of t)o>n&&r.push({...e,content:e.content.slice(n,o),offset:e.offset+n}),n=o;return n<e.content.length&&r.push({...e,content:e.content.slice(n),offset:e.offset+n}),r}(e,t):e})))):e}(e,t(this).decorations.flatMap((e=>[e.start.offset,e.end.offset])));return n},code(e){if(!this.options.decorations?.length)return;const n=t(this),r=Array.from(e.children).filter((e=>"element"===e.type&&"span"===e.tagName));if(r.length!==n.converter.lines.length)throw new qf(`Number of lines in code element (${r.length}) does not match the number of lines in the source (${n.converter.lines.length}). Failed to apply decorations.`);function o(e,t,n,o){const i=r[e];let s="",l=-1,c=-1;if(0===t&&(l=0),0===n&&(c=0),n===Number.POSITIVE_INFINITY&&(c=i.children.length),-1===l||-1===c)for(let e=0;e<i.children.length;e++)s+=ep(i.children[e]),-1===l&&s.length===t&&(l=e+1),-1===c&&s.length===n&&(c=e+1);if(-1===l)throw new qf(`Failed to find start index for decoration ${JSON.stringify(o.start)}`);if(-1===c)throw new qf(`Failed to find end index for decoration ${JSON.stringify(o.end)}`);const u=i.children.slice(l,c);if(o.alwaysWrap||u.length!==i.children.length)if(o.alwaysWrap||1!==u.length||"element"!==u[0].type){const e={type:"element",tagName:"span",properties:{},children:u};a(e,o,"wrapper"),i.children.splice(l,u.length,e)}else a(u[0],o,"token");else a(i,o,"line")}function i(e,t){r[e]=a(r[e],t,"line")}function a(e,t,n){const r=t.properties||{},o=t.transform||(e=>e);return e.tagName=t.tagName||"span",e.properties={...e.properties,...r,class:e.properties.class},t.properties?.class&&zf(e,t.properties.class),o(e,n)||e}const s=[],l=n.decorations.sort(((e,t)=>t.start.offset-e.start.offset));for(const e of l){const{start:t,end:n}=e;if(t.line===n.line)o(t.line,t.character,n.character,e);else if(t.line<n.line){o(t.line,t.character,Number.POSITIVE_INFINITY,e);for(let r=t.line+1;r<n.line;r++)s.unshift((()=>i(r,e)));o(n.line,0,n.character,e)}}s.forEach((e=>e()))}}}function ep(e){return"text"===e.type?e.value:"element"===e.type?e.children.map(ep).join(""):""}const tp=[Qf()];function np(e){return[...e.transformers||[],...tp]}var rp=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],op={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",9:"strikethrough"};function ip(e,t){const n=e.indexOf("[",t);if(-1!==n){const t=e.indexOf("m",n);return{sequence:e.substring(n+2,t).split(";"),startPosition:n,position:t+1}}return{position:e.length}}function ap(e,t){let n=1;const r=e[t+n++];let o;if("2"===r){const r=[e[t+n++],e[t+n++],e[t+n]].map((e=>Number.parseInt(e)));3!==r.length||r.some((e=>Number.isNaN(e)))||(o={type:"rgb",rgb:r})}else if("5"===r){const r=Number.parseInt(e[t+n]);Number.isNaN(r)||(o={type:"table",index:Number(r)})}return[n,o]}function sp(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n],o=Number.parseInt(r);if(!Number.isNaN(o))if(0===o)t.push({type:"resetAll"});else if(o<=9)op[o]&&t.push({type:"setDecoration",value:op[o]});else if(o<=29){const e=op[o-20];e&&t.push({type:"resetDecoration",value:e})}else if(o<=37)t.push({type:"setForegroundColor",value:{type:"named",name:rp[o-30]}});else if(38===o){const[r,o]=ap(e,n);o&&t.push({type:"setForegroundColor",value:o}),n+=r}else if(39===o)t.push({type:"resetForegroundColor"});else if(o<=47)t.push({type:"setBackgroundColor",value:{type:"named",name:rp[o-40]}});else if(48===o){const[r,o]=ap(e,n);o&&t.push({type:"setBackgroundColor",value:o}),n+=r}else 49===o?t.push({type:"resetBackgroundColor"}):o>=90&&o<=97?t.push({type:"setForegroundColor",value:{type:"named",name:rp[o-90+8]}}):o>=100&&o<=107&&t.push({type:"setBackgroundColor",value:{type:"named",name:rp[o-100+8]}})}return t}var lp={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function cp(e=lp){function t(t){return e[t]}function n(e){return`#${e.map((e=>Math.max(0,Math.min(e,255)).toString(16).padStart(2,"0"))).join("")}`}let r;return{value:function(e){switch(e.type){case"named":return t(e.name);case"rgb":return n(e.rgb);case"table":return function(e){return function(){if(r)return r;r=[];for(let e=0;e<rp.length;e++)r.push(t(rp[e]));let e=[0,95,135,175,215,255];for(let t=0;t<6;t++)for(let o=0;o<6;o++)for(let i=0;i<6;i++)r.push(n([e[t],e[o],e[i]]));let o=8;for(let e=0;e<24;e++,o+=10)r.push(n([o,o,o]));return r}()[e]}(e.index)}}}}function up(e,t,n={}){const{lang:r="text",theme:o=e.getLoadedThemes()[0]}=n;if(If(r)||Ff(o))return Rf(t).map((e=>[{content:e[0],offset:e[1]}]));const{theme:i,colorMap:a}=e.setTheme(o);if("ansi"===r)return function(e,t,n){const r=$f(e,n),o=Rf(t),i=cp(Object.fromEntries(rp.map((t=>[t,e.colors?.[`terminal.ansi${t[0].toUpperCase()}${t.substring(1)}`]])))),a=function(){let e=null,t=null,n=new Set;return{parse(r){const o=[];let i=0;do{const a=ip(r,i),s=a.sequence?r.substring(i,a.startPosition):r.substring(i);if(s.length>0&&o.push({value:s,foreground:e,background:t,decorations:new Set(n)}),a.sequence){const r=sp(a.sequence);for(const o of r)"resetAll"===o.type?(e=null,t=null,n.clear()):"resetForegroundColor"===o.type?e=null:"resetBackgroundColor"===o.type?t=null:"resetDecoration"===o.type&&n.delete(o.value);for(const o of r)"setForegroundColor"===o.type?e=o.value:"setBackgroundColor"===o.type?t=o.value:"setDecoration"===o.type&&n.add(o.value)}i=a.position}while(i<r.length);return o}}}();return o.map((t=>a.parse(t[0]).map((n=>{let o,a;n.decorations.has("reverse")?(o=n.background?i.value(n.background):e.bg,a=n.foreground?i.value(n.foreground):e.fg):(o=n.foreground?i.value(n.foreground):e.fg,a=n.background?i.value(n.background):void 0),o=Uf(o,r),a=Uf(a,r),n.decorations.has("dim")&&(o=function(e){const t=e.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(t){if(t[3]){const e=Math.round(Number.parseInt(t[3],16)/2).toString(16).padStart(2,"0");return`#${t[1]}${t[2]}${e}`}return t[2]?`#${t[1]}${t[2]}80`:`#${Array.from(t[1]).map((e=>`${e}${e}`)).join("")}80`}const n=e.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:e}(o));let s=lu.None;return n.decorations.has("bold")&&(s|=lu.Bold),n.decorations.has("italic")&&(s|=lu.Italic),n.decorations.has("underline")&&(s|=lu.Underline),{content:n.value,offset:t[1],color:o,bgColor:a,fontStyle:s}}))))}(i,t,n);const s=e.getLanguage(r);if(n.grammarState){if(n.grammarState.lang!==s.name)throw new pc(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${s.name}"`);if(!n.grammarState.themes.includes(i.name))throw new pc(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${i.name}"`)}return function(e,t,n,r,o){const i=dp(e,t,n,r,o),a=new Xf(dp(e,t,n,r,o).stateStack,t.name,n.name);return Zf(i.tokens,a),i.tokens}(t,s,i,a,n)}function dp(e,t,n,r,o){const i=$f(n,o),{tokenizeMaxLineLength:a=0,tokenizeTimeLimit:s=500}=o,l=Rf(e);let c=o.grammarState?function(e,t){if(!(e instanceof Xf))throw new qf("Invalid grammar state");return e.getInternalStack(t)}(o.grammarState,n.name)??cd:null!=o.grammarContextCode?dp(o.grammarContextCode,t,n,r,{...o,grammarState:void 0,grammarContextCode:void 0}).stateStack:cd,u=[];const d=[];for(let e=0,p=l.length;e<p;e++){const[p,h]=l[e];if(""===p){u=[],d.push([]);continue}if(a>0&&p.length>=a){u=[],d.push([{content:p,offset:h,color:"",fontStyle:0}]);continue}let m,v,g;o.includeExplanation&&(m=t.tokenizeLine(p,c),v=m.tokens,g=0);const y=t.tokenizeLine2(p,c,s),b=y.tokens.length/2;for(let e=0;e<b;e++){const t=y.tokens[2*e],a=e+1<b?y.tokens[2*e+2]:p.length;if(t===a)continue;const s=y.tokens[2*e+1],l=Uf(r[pu.getForeground(s)],i),c=pu.getFontStyle(s),d={content:p.substring(t,a),offset:h+t,color:l,fontStyle:c};if(o.includeExplanation){const e=[];if("scopeName"!==o.includeExplanation)for(const t of n.settings){let n;switch(typeof t.scope){case"string":n=t.scope.split(/,/).map((e=>e.trim()));break;case"object":n=t.scope;break;default:continue}e.push({settings:t,selectors:n.map((e=>e.split(/ /)))})}d.explanation=[];let r=0;for(;t+r<a;){const t=v[g],n=p.substring(t.startIndex,t.endIndex);r+=n.length,d.explanation.push({content:n,scopes:"scopeName"===o.includeExplanation?(f=t.scopes,f.map((e=>({scopeName:e})))):fp(e,t.scopes)}),g+=1}}u.push(d)}d.push(u),u=[],c=y.ruleStack}var f;return{tokens:d,stateStack:c}}function fp(e,t){const n=[];for(let r=0,o=t.length;r<o;r++){const o=t[r];n[r]={scopeName:o,themeMatches:mp(e,o,t.slice(0,r))}}return n}function pp(e,t){return e===t||t.substring(0,e.length)===e&&"."===t[e.length]}function hp(e,t,n){if(!pp(e[e.length-1],t))return!1;let r=e.length-2,o=n.length-1;for(;r>=0&&o>=0;)pp(e[r],n[o])&&(r-=1),o-=1;return-1===r}function mp(e,t,n){const r=[];for(const{selectors:o,settings:i}of e)for(const e of o)if(hp(e,t,n)){r.push(i);break}return r}function vp(e,t,n){const r=Object.entries(n.themes).filter((e=>e[1])).map((e=>({color:e[0],theme:e[1]}))),o=r.map((r=>{const o=up(e,t,{...n,theme:r.theme});return{tokens:o,state:Jf(o),theme:"string"==typeof r.theme?r.theme:r.theme.name}})),i=function(...e){const t=e.map((()=>[])),n=e.length;for(let r=0;r<e[0].length;r++){const o=e.map((e=>e[r])),i=t.map((()=>[]));t.forEach(((e,t)=>e.push(i[t])));const a=o.map((()=>0)),s=o.map((e=>e[0]));for(;s.every((e=>e));){const e=Math.min(...s.map((e=>e.content.length)));for(let t=0;t<n;t++){const n=s[t];n.content.length===e?(i[t].push(n),a[t]+=1,s[t]=o[t][a[t]]):(i[t].push({...n,content:n.content.slice(0,e)}),s[t]={...n,content:n.content.slice(e),offset:n.offset+e})}}}return t}(...o.map((e=>e.tokens))),a=i[0].map(((e,t)=>e.map(((e,o)=>{const a={content:e.content,variants:{},offset:e.offset};return"includeExplanation"in n&&n.includeExplanation&&(a.explanation=e.explanation),i.forEach(((e,n)=>{const{content:i,explanation:s,offset:l,...c}=e[t][o];a.variants[r[n].color]=c})),a})))),s=o[0].state?new Xf(Object.fromEntries(o.map((e=>[e.theme,e.state?.getInternalStack(e.theme)]))),o[0].state.lang):void 0;return s&&Zf(a,s),a}function gp(e,t,n){let r,o,i,a,s,l;if("themes"in n){const{defaultColor:c="light",cssVariablePrefix:u="--shiki-"}=n,d=Object.entries(n.themes).filter((e=>e[1])).map((e=>({color:e[0],theme:e[1]}))).sort(((e,t)=>e.color===c?-1:t.color===c?1:0));if(0===d.length)throw new pc("`themes` option must not be empty");const f=vp(e,t,n);if(l=Jf(f),c&&!d.find((e=>e.color===c)))throw new pc(`\`themes\` option must contain the defaultColor key \`${c}\``);const p=d.map((t=>e.getTheme(t.theme))),h=d.map((e=>e.color));i=f.map((e=>e.map((e=>function(e,t,n,r){const o={content:e.content,explanation:e.explanation,offset:e.offset},i=t.map((t=>Gf(e.variants[t]))),a=new Set(i.flatMap((e=>Object.keys(e)))),s={};return i.forEach(((e,o)=>{for(const i of a){const a=e[i]||"inherit";if(0===o&&r)s[i]=a;else{const e="color"===i?"":"background-color"===i?"-bg":`-${i}`,r=n+t[o]+("color"===i?"":e);s[r]=a}}})),o.htmlStyle=s,o}(e,h,u,c))))),l&&Zf(i,l);const m=d.map((e=>$f(e.theme,n)));o=d.map(((e,t)=>(0===t&&c?"":`${u+e.color}:`)+(Uf(p[t].fg,m[t])||"inherit"))).join(";"),r=d.map(((e,t)=>(0===t&&c?"":`${u+e.color}-bg:`)+(Uf(p[t].bg,m[t])||"inherit"))).join(";"),a=`shiki-themes ${p.map((e=>e.name)).join(" ")}`,s=c?void 0:[o,r].join(";")}else{if(!("theme"in n))throw new pc("Invalid options, either `theme` or `themes` must be provided");{const s=$f(n.theme,n);i=up(e,t,n);const c=e.getTheme(n.theme);r=Uf(c.bg,s),o=Uf(c.fg,s),a=c.name,l=Jf(i)}}return{tokens:i,fg:o,bg:r,themeName:a,rootStyle:s,grammarState:l}}function yp(e,t,n,r={meta:{},options:n,codeToHast:(t,n)=>yp(e,t,n),codeToTokens:(t,n)=>gp(e,t,n)}){let o=t;for(const e of np(n))o=e.preprocess?.call(r,o,n)||o;let{tokens:i,fg:a,bg:s,themeName:l,rootStyle:c,grammarState:u}=gp(e,o,n);const{mergeWhitespaces:d=!0}=n;!0===d?i=function(e){return e.map((e=>{const t=[];let n="",r=0;return e.forEach(((o,i)=>{const a=!(o.fontStyle&&o.fontStyle&lu.Underline);a&&o.content.match(/^\s+$/)&&e[i+1]?(r||(r=o.offset),n+=o.content):n?(a?t.push({...o,offset:r,content:n+o.content}):t.push({content:n,offset:r},o),r=0,n=""):t.push(o)})),t}))}(i):"never"===d&&(i=function(e){return e.map((e=>e.flatMap((e=>{if(e.content.match(/^\s+$/))return e;const t=e.content.match(/^(\s*)(.*?)(\s*)$/);if(!t)return e;const[,n,r,o]=t;if(!n&&!o)return e;const i=[{...e,offset:e.offset+n.length,content:r}];return n&&i.unshift({content:n,offset:e.offset}),o&&i.push({content:o,offset:e.offset+n.length+r.length}),i}))))}(i));const f={...r,get source(){return o}};for(const e of np(n))i=e.tokens?.call(f,i)||i;return function(e,t,n,r=Jf(e)){const o=np(t),i=[],a={type:"root",children:[]},{structure:s="classic",tabindex:l="0"}=t;let c={type:"element",tagName:"pre",properties:{class:`shiki ${t.themeName||""}`,style:t.rootStyle||`background-color:${t.bg};color:${t.fg}`,...!1!==l&&null!=l?{tabindex:l.toString()}:{},...Object.fromEntries(Array.from(Object.entries(t.meta||{})).filter((([e])=>!e.startsWith("_"))))},children:[]},u={type:"element",tagName:"code",properties:{},children:i};const d=[],f={...n,structure:s,addClassToHast:zf,get source(){return n.source},get tokens(){return e},get options(){return t},get root(){return a},get pre(){return c},get code(){return u},get lines(){return d}};if(e.forEach(((e,t)=>{t&&("inline"===s?a.children.push({type:"element",tagName:"br",properties:{},children:[]}):"classic"===s&&i.push({type:"text",value:"\n"}));let n={type:"element",tagName:"span",properties:{class:"line"},children:[]},r=0;for(const i of e){let e={type:"element",tagName:"span",properties:{...i.htmlAttrs},children:[{type:"text",value:i.content}]};"string"==typeof i.htmlStyle&&Mc();const l=Wf(i.htmlStyle||Gf(i));l&&(e.properties.style=l);for(const a of o)e=a?.span?.call(f,e,t+1,r,n,i)||e;"inline"===s?a.children.push(e):"classic"===s&&n.children.push(e),r+=i.content.length}if("classic"===s){for(const e of o)n=e?.line?.call(f,n,t+1)||n;d.push(n),i.push(n)}})),"classic"===s){for(const e of o)u=e?.code?.call(f,u)||u;c.children.push(u);for(const e of o)c=e?.pre?.call(f,c)||c;a.children.push(c)}let p=a;for(const e of o)p=e?.root?.call(f,p)||p;return r&&Zf(p,r),p}(i,{...n,fg:a,bg:s,themeName:l,rootStyle:c},f,u)}const bp="__shiki_resolved";function kp(e){if(e?.[bp])return e;const t={...e};t.tokenColors&&!t.settings&&(t.settings=t.tokenColors,delete t.tokenColors),t.type||="dark",t.colorReplacements={...t.colorReplacements},t.settings||=[];let{bg:n,fg:r}=t;if(!n||!r){const e=t.settings?t.settings.find((e=>!e.name&&!e.scope)):void 0;e?.settings?.foreground&&(r=e.settings.foreground),e?.settings?.background&&(n=e.settings.background),!r&&t?.colors?.["editor.foreground"]&&(r=t.colors["editor.foreground"]),!n&&t?.colors?.["editor.background"]&&(n=t.colors["editor.background"]),r||(r="light"===t.type?"#333333":"#bbbbbb"),n||(n="light"===t.type?"#fffffe":"#1e1e1e"),t.fg=r,t.bg=n}t.settings[0]&&t.settings[0].settings&&!t.settings[0].scope||t.settings.unshift({settings:{foreground:t.fg,background:t.bg}});let o=0;const i=new Map;function a(e){if(i.has(e))return i.get(e);o+=1;const n=`#${o.toString(16).padStart(8,"0").toLowerCase()}`;return t.colorReplacements?.[`#${n}`]?a(e):(i.set(e,n),n)}t.settings=t.settings.map((e=>{const n=e.settings?.foreground&&!e.settings.foreground.startsWith("#"),r=e.settings?.background&&!e.settings.background.startsWith("#");if(!n&&!r)return e;const o={...e,settings:{...e.settings}};if(n){const n=a(e.settings.foreground);t.colorReplacements[n]=e.settings.foreground,o.settings.foreground=n}if(r){const n=a(e.settings.background);t.colorReplacements[n]=e.settings.background,o.settings.background=n}return o}));for(const e of Object.keys(t.colors||{}))if(("editor.foreground"===e||"editor.background"===e||e.startsWith("terminal.ansi"))&&!t.colors[e]?.startsWith("#")){const n=a(t.colors[e]);t.colorReplacements[n]=t.colors[e],t.colors[e]=n}return Object.defineProperty(t,bp,{enumerable:!1,writable:!1,value:!0}),t}async function wp(e){return Array.from(new Set((await Promise.all(e.filter((e=>!Bf(e))).map((async e=>await Vf(e).then((e=>Array.isArray(e)?e:[e])))))).flat()))}async function xp(e){return(await Promise.all(e.map((async e=>Hf(e)?null:kp(await Vf(e)))))).filter((e=>!!e))}class Cp extends ld{constructor(e,t,n,r={}){super(e),this._resolver=e,this._themes=t,this._langs=n,this._alias=r,this._themes.map((e=>this.loadTheme(e))),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return"string"==typeof e?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const t=kp(e);return t.name&&(this._resolvedThemes.set(t.name,t),this._loadedThemesCache=null),t}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let t=this._textmateThemeCache.get(e);t||(t=ru.createFromRawTheme(e),this._textmateThemeCache.set(e,t)),this._syncRegistry.setTheme(t)}getGrammar(e){if(this._alias[e]){const t=new Set([e]);for(;this._alias[e];){if(e=this._alias[e],t.has(e))throw new qf(`Circular alias \`${Array.from(t).join(" -> ")} -> ${e}\``);t.add(e)}}return this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const t=new Set([...this._langMap.values()].filter((t=>t.embeddedLangsLazy?.includes(e.name))));this._resolver.addLanguage(e);const n={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const r=this.loadGrammarWithConfiguration(e.scopeName,1,n);if(r.name=e.name,this._resolvedGrammars.set(e.name,r),e.aliases&&e.aliases.forEach((t=>{this._alias[t]=e.name})),this._loadedLanguagesCache=null,t.size)for(const e of t)this._resolvedGrammars.delete(e.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(e.scopeName),this._syncRegistry?._grammars?.delete(e.scopeName),this.loadLanguage(this._langMap.get(e.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const t of e)this.resolveEmbeddedLanguages(t);const t=Array.from(this._langGraph.entries()),n=t.filter((([e,t])=>!t));if(n.length){const e=t.filter((([e,t])=>t&&t.embeddedLangs?.some((e=>n.map((([e])=>e)).includes(e))))).filter((e=>!n.includes(e)));throw new qf(`Missing languages ${n.map((([e])=>`\`${e}\``)).join(", ")}, required by ${e.map((([e])=>`\`${e}\``)).join(", ")}`)}for(const[e,n]of t)this._resolver.addLanguage(n);for(const[e,n]of t)this.loadLanguage(n)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){if(this._langMap.set(e.name,e),this._langGraph.set(e.name,e),e.embeddedLangs)for(const t of e.embeddedLangs)this._langGraph.set(t,this._langMap.get(t))}}class Sp{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,t){this._onigLib={createOnigScanner:t=>e.createScanner(t),createOnigString:t=>e.createString(t)},t.forEach((e=>this.addLanguage(e)))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach((t=>{this._langs.set(t,e)})),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach((t=>{this._injections.get(t)||this._injections.set(t,[]),this._injections.get(t).push(e.scopeName)}))}getInjections(e){const t=e.split(".");let n=[];for(let e=1;e<=t.length;e++){const r=t.slice(0,e).join(".");n=[...n,...this._injections.get(r)||[]]}return n}}let _p=0;async function Ep(e={}){e.loadWasm&&Mc();const[t,n,r]=await Promise.all([xp(e.themes||[]),wp(e.langs||[]),e.engine||Ec(e.loadWasm||undefined)]);return function(e){_p+=1,!1!==e.warnings&&_p>=10&&_p%10==0&&console.warn(`[Shiki] ${_p} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let t=!1;if(!e.engine)throw new qf("`engine` option is required for synchronous mode");const n=(e.langs||[]).flat(1),r=(e.themes||[]).flat(1).map(kp),o=new Sp(e.engine,n),i=new Cp(o,r,n,e.langAlias);let a;function s(e){if("none"===e)return{bg:"",fg:"",name:"none",settings:[],type:"dark"};u();const t=i.getTheme(e);if(!t)throw new qf(`Theme \`${e}\` not found, you may need to load it first`);return t}function l(...e){u(),i.loadLanguages(e.flat(1))}function c(...e){u();for(const t of e.flat(1))i.loadTheme(t)}function u(){if(t)throw new qf("Shiki instance has been disposed")}function d(){t||(t=!0,i.dispose(),_p-=1)}return{setTheme:function(e){u();const t=s(e);return a!==e&&(i.setTheme(t),a=e),{theme:t,colorMap:i.getColorMap()}},getTheme:s,getLanguage:function(e){u();const t=i.getGrammar("string"==typeof e?e:e.name);if(!t)throw new qf(`Language \`${e}\` not found, you may need to load it first`);return t},getLoadedThemes:function(){return u(),i.getLoadedThemes()},getLoadedLanguages:function(){return u(),i.getLoadedLanguages()},loadLanguage:async function(...e){return l(await wp(e))},loadLanguageSync:l,loadTheme:async function(...e){return u(),c(await xp(e))},loadThemeSync:c,dispose:d,[Symbol.dispose]:d}}({...e,loadWasm:void 0,themes:t,langs:n,engine:r})}async function Dp(e={}){const t=await Ep(e);return{getLastGrammarState:(...e)=>function(...e){if(2===e.length)return Jf(e[1]);const[t,n,r={}]=e,{lang:o="text",theme:i=t.getLoadedThemes()[0]}=r;if(If(o)||Ff(i))throw new pc("Plain language does not have grammar state");if("ansi"===o)throw new pc("ANSI language does not have grammar state");const{theme:a,colorMap:s}=t.setTheme(i),l=t.getLanguage(o);return new Xf(dp(n,l,a,s,r).stateStack,l.name,a.name)}(t,...e),codeToTokensBase:(e,n)=>up(t,e,n),codeToTokensWithThemes:(e,n)=>vp(t,e,n),codeToTokens:(e,n)=>gp(t,e,n),codeToHast:(e,n)=>yp(t,e,n),codeToHtml:(e,n)=>function(e,t,n){const r={meta:{},options:n,codeToHast:(t,n)=>yp(e,t,n),codeToTokens:(t,n)=>gp(e,t,n)};let o=function(e){var t=Tf,n=t.quote||'"',r='"'===n?"'":'"';if('"'!==n&&"'"!==n)throw new Error("Invalid quote `"+n+"`, expected `'` or `\"`");return{one:Pf,all:Lf,settings:{omitOptionalTags:t.omitOptionalTags||!1,allowParseErrors:t.allowParseErrors||!1,allowDangerousCharacters:t.allowDangerousCharacters||!1,quoteSmart:t.quoteSmart||!1,preferUnquoted:t.preferUnquoted||!1,tightAttributes:t.tightAttributes||!1,upperDoctype:t.upperDoctype||!1,tightDoctype:t.tightDoctype||!1,bogusComments:t.bogusComments||!1,tightCommaSeparatedLists:t.tightCommaSeparatedLists||!1,tightSelfClosing:t.tightSelfClosing||!1,collapseEmptyAttributes:t.collapseEmptyAttributes||!1,allowDangerousHtml:t.allowDangerousHtml||!1,voids:t.voids||ud,characterReferences:t.characterReferences||jf,closeSelfClosing:t.closeSelfClosing||!1,closeEmptyElements:t.closeEmptyElements||!1},schema:"svg"===t.space?Yd:Xd,quote:n,alternative:r}.one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}(yp(e,t,n,r));for(const e of np(n))o=e.postprocess?.call(r,o,n)||o;return o}(t,e,n),...t,getInternalContext:()=>t}}function Mp(e,t,n){let r,o,i;if(t)Mc(),r=e,o=t,i=()=>function(e){return Mc(),Ec(e)}(n);else{const t=e;r=t.langs,o=t.themes,i=t.engine}return async function(e){function t(e){if("string"==typeof e){if(Bf(e))return[];const t=r[e];if(!t)throw new pc(`Language \`${e}\` is not included in this bundle. You may want to load it from external source.`);return t}return e}function n(e){if(Hf(e))return"none";if("string"==typeof e){const t=o[e];if(!t)throw new pc(`Theme \`${e}\` is not included in this bundle. You may want to load it from external source.`);return t}return e}const a=(e.themes??[]).map((e=>n(e))),s=(e.langs??[]).map((e=>t(e))),l=await Dp({engine:e.engine??i(),...e,themes:a,langs:s});return{...l,loadLanguage:(...e)=>l.loadLanguage(...e.map(t)),loadTheme:(...e)=>l.loadTheme(...e.map(n))}}}function Ap(e){const t=function(e){let t;return async function(n={}){if(t){const e=await t;return await Promise.all([e.loadTheme(...n.themes||[]),e.loadLanguage(...n.langs||[])]),e}return t=e({...n,themes:n.themes||[],langs:n.langs||[]}),t}}(e);return{getSingletonHighlighter:e=>t(e),codeToHtml:async(e,n)=>(await t({langs:[n.lang],themes:"theme"in n?[n.theme]:Object.values(n.themes)})).codeToHtml(e,n),codeToHast:async(e,n)=>(await t({langs:[n.lang],themes:"theme"in n?[n.theme]:Object.values(n.themes)})).codeToHast(e,n),codeToTokens:async(e,n)=>(await t({langs:[n.lang],themes:"theme"in n?[n.theme]:Object.values(n.themes)})).codeToTokens(e,n),codeToTokensBase:async(e,n)=>(await t({langs:[n.lang],themes:[n.theme]})).codeToTokensBase(e,n),codeToTokensWithThemes:async(e,n)=>(await t({langs:[n.lang],themes:Object.values(n.themes).filter(Boolean)})).codeToTokensWithThemes(e,n),getLastGrammarState:async(e,n)=>(await t({langs:[n.lang],themes:[n.theme]})).getLastGrammarState(e,n)}}const Op=Mp({langs:uc,themes:fc,engine:()=>Ec(a.e(8995).then(a.bind(a,8995)))}),{codeToHtml:Tp,codeToHast:jp,codeToTokens:Np,codeToTokensBase:Pp,codeToTokensWithThemes:Lp,getSingletonHighlighter:Rp,getLastGrammarState:Ip}=Ap(Op);function Bp(e){return Bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bp(e)}function Fp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fp=function(){return!!e})()}function Hp(e){return Hp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hp(e)}function zp(e,t){return zp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zp(e,t)}function Vp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vp(Object(n),!0).forEach((function(t){Up(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Up(e,t,n){return(t=Kp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Kp(r.key),r)}}function qp(e,t,n){return t&&Wp(e.prototype,t),n&&Wp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kp(e){var t=function(e){if("object"!=Bp(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Bp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Bp(t)?t:t+""}var Zp,Jp;if("undefined"!=typeof WeakMap){var Xp=new WeakMap;Zp=function(e){return Xp.get(e)},Jp=function(e,t){return Xp.set(e,t),t}}else{var Yp=[],Qp=0;Zp=function(e){for(var t=0;t<Yp.length;t+=2)if(Yp[t]==e)return Yp[t+1]},Jp=function(e,t){return 10==Qp&&(Qp=0),Yp[Qp++]=e,Yp[Qp++]=t}}var eh=function(){return qp((function e(t,n,r,o){Gp(this,e),this.width=t,this.height=n,this.map=r,this.problems=o}),[{key:"findCell",value:function(e){for(var t=0;t<this.map.length;t++){var n=this.map[t];if(n==e){for(var r=t%this.width,o=t/this.width|0,i=r+1,a=o+1,s=1;i<this.width&&this.map[t+s]==n;s++)i++;for(var l=1;a<this.height&&this.map[t+this.width*l]==n;l++)a++;return{left:r,top:o,right:i,bottom:a}}}throw new RangeError("No cell with offset ".concat(e," found"))}},{key:"colCount",value:function(e){for(var t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError("No cell with offset ".concat(e," found"))}},{key:"nextCell",value:function(e,t,n){var r=this.findCell(e),o=r.left,i=r.right,a=r.top,s=r.bottom;return"horiz"==t?(n<0?0==o:i==this.width)?null:this.map[a*this.width+(n<0?o-1:i)]:(n<0?0==a:s==this.height)?null:this.map[o+this.width*(n<0?a-1:s)]}},{key:"rectBetween",value:function(e,t){var n=this.findCell(e),r=n.left,o=n.right,i=n.top,a=n.bottom,s=this.findCell(t),l=s.left,c=s.right,u=s.top,d=s.bottom;return{left:Math.min(r,l),top:Math.min(i,u),right:Math.max(o,c),bottom:Math.max(a,d)}}},{key:"cellsInRect",value:function(e){for(var t=[],n={},r=e.top;r<e.bottom;r++)for(var o=e.left;o<e.right;o++){var i=r*this.width+o,a=this.map[i];n[a]||(n[a]=!0,o==e.left&&o&&this.map[i-1]==a||r==e.top&&r&&this.map[i-this.width]==a||t.push(a))}return t}},{key:"positionAt",value:function(e,t,n){for(var r=0,o=0;;r++){var i=o+n.child(r).nodeSize;if(r==e){for(var a=t+e*this.width,s=(e+1)*this.width;a<s&&this.map[a]<o;)a++;return a==s?i-1:this.map[a]}o=i}}}],[{key:"get",value:function(e){return Zp(e)||Jp(e,function(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);for(var t=function(e){for(var t=-1,n=!1,r=0;r<e.childCount;r++){var o=e.child(r),i=0;if(n)for(var a=0;a<r;a++)for(var s=e.child(a),l=0;l<s.childCount;l++){var c=s.child(l);a+c.attrs.rowspan>r&&(i+=c.attrs.colspan)}for(var u=0;u<o.childCount;u++){var d=o.child(u);i+=d.attrs.colspan,d.attrs.rowspan>1&&(n=!0)}-1==t?t=i:t!=i&&(t=Math.max(t,i))}return t}(e),n=e.childCount,r=[],o=0,i=null,a=[],s=0,l=t*n;s<l;s++)r[s]=0;for(var c=0,u=0;c<n;c++){var d=e.child(c);u++;for(var f=0;;f++){for(;o<r.length&&0!=r[o];)o++;if(f==d.childCount)break;for(var p=d.child(f),h=p.attrs,m=h.colspan,v=h.rowspan,g=h.colwidth,y=0;y<v;y++){if(y+c>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:u,n:v-y});break}for(var b=o+y*t,k=0;k<m;k++){0==r[b+k]?r[b+k]=u:(i||(i=[])).push({type:"collision",row:c,pos:u,n:m-k});var w=g&&g[k];if(w){var x=(b+k)%t*2,C=a[x];null==C||C!=w&&1==a[x+1]?(a[x]=w,a[x+1]=1):C==w&&a[x+1]++}}}o+=m,u+=p.nodeSize}for(var S=(c+1)*t,_=0;o<S;)0==r[o++]&&_++;_&&(i||(i=[])).push({type:"missing",row:c,n:_}),u++}0!==t&&0!==n||(i||(i=[])).push({type:"zero_sized"});for(var E=new eh(t,n,r,i),D=!1,M=0;!D&&M<a.length;M+=2)null!=a[M]&&a[M+1]<n&&(D=!0);return D&&function(e,t,n){e.problems||(e.problems=[]);for(var r={},o=0;o<e.map.length;o++){var i=e.map[o];if(!r[i]){r[i]=!0;var a=n.nodeAt(i);if(!a)throw new RangeError("No cell with offset ".concat(i," found"));for(var s=null,l=a.attrs,c=0;c<l.colspan;c++){var u=t[(o+c)%e.width*2];null==u||l.colwidth&&l.colwidth[c]==u||((s||(s=th(l)))[c]=u)}s&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:s})}}}(E,a,e),E}(e))}}])}();function th(e){if(e.colwidth)return e.colwidth.slice();for(var t=[],n=0;n<e.colspan;n++)t.push(0);return t}function nh(e){var t=e.cached.tableNodeTypes;if(!t)for(var n in t=e.cached.tableNodeTypes={},e.nodes){var r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}return t}var rh=new In("selectingCells");function oh(e){for(var t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function ih(e){for(var t=e.selection.$head,n=t.depth;n>0;n--)if("row"==t.node(n).type.spec.tableRole)return!0;return!1}function ah(e){var t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&"cell"==t.node.type.spec.tableRole)return t.$anchor;var n=oh(t.$head)||function(e){for(var t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){var r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n)}for(var o=e.nodeBefore,i=e.pos;o;o=o.lastChild,i--){var a=o.type.spec.tableRole;if("cell"==a||"header_cell"==a)return e.doc.resolve(i-o.nodeSize)}}(t.$head);if(n)return n;throw new RangeError("No cell found around position ".concat(t.head))}function sh(e){return"row"==e.parent.type.spec.tableRole&&!!e.nodeAfter}function lh(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function ch(e,t,n){var r=e.node(-1),o=eh.get(r),i=e.start(-1),a=o.nextCell(e.pos-i,t,n);return null==a?null:e.node(0).resolve(i+a)}function uh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=$p($p({},e),{},{colspan:e.colspan-n});return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some((function(e){return e>0}))||(r.colwidth=null)),r}function dh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=$p($p({},e),{},{colspan:e.colspan+n});if(r.colwidth){r.colwidth=r.colwidth.slice();for(var o=0;o<n;o++)r.colwidth.splice(t,0,0)}return r}var fh=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;Gp(this,t);var o=e.node(-1),i=eh.get(o),a=e.start(-1),s=i.rectBetween(e.pos-a,r.pos-a),l=e.node(0),c=i.cellsInRect(s).filter((function(e){return e!=r.pos-a}));c.unshift(r.pos-a);var u,d,f,p=c.map((function(e){var t=o.nodeAt(e);if(!t)throw RangeError("No cell with offset ".concat(e," found"));var n=a+e+1;return new vn(l.resolve(n),l.resolve(n+t.content.size))}));return(u=this,d=t,f=[p[0].$from,p[0].$to,p],d=Hp(d),n=function(e,t){if(t&&("object"==Bp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(u,Fp()?Reflect.construct(d,f||[],Hp(u).constructor):d.apply(u,f))).$anchorCell=e,n.$headCell=r,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zp(e,t)}(t,e),qp(t,[{key:"map",value:function(e,n){var r=e.resolve(n.map(this.$anchorCell.pos)),o=e.resolve(n.map(this.$headCell.pos));if(sh(r)&&sh(o)&&lh(r,o)){var i=this.$anchorCell.node(-1)!=r.node(-1);return i&&this.isRowSelection()?t.rowSelection(r,o):i&&this.isColSelection()?t.colSelection(r,o):new t(r,o)}return bn.between(r,o)}},{key:"content",value:function(){for(var e=this.$anchorCell.node(-1),t=eh.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},i=[],a=r.top;a<r.bottom;a++){for(var s=[],l=a*t.width+r.left,c=r.left;c<r.right;c++,l++){var u=t.map[l];if(!o[u]){o[u]=!0;var d=t.findCell(u),f=e.nodeAt(u);if(!f)throw RangeError("No cell with offset ".concat(u," found"));var p=r.left-d.left,h=d.right-r.right;if(p>0||h>0){var m=f.attrs;if(p>0&&(m=uh(m,0,p)),h>0&&(m=uh(m,m.colspan-h,h)),d.left<r.left){if(!(f=f.type.createAndFill(m)))throw RangeError("Could not create cell with attrs ".concat(JSON.stringify(m)))}else f=f.type.create(m,f.content)}if(d.top<r.top||d.bottom>r.bottom){var v=$p($p({},f.attrs),{},{rowspan:Math.min(d.bottom,r.bottom)-Math.max(d.top,r.top)});f=d.top<r.top?f.type.createAndFill(v):f.type.create(v,f.content)}s.push(f)}}i.push(e.child(a).copy(Z.from(s)))}var g=this.isColSelection()&&this.isRowSelection()?e:i;return new te(Z.from(g),1,1)}},{key:"replace",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.empty,n=e.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],a=i.$from,s=i.$to,l=e.mapping.slice(n);e.replace(l.map(a.pos),l.map(s.pos),o?te.empty:t)}var c=mn.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);c&&e.setSelection(c)}},{key:"replaceWith",value:function(e,t){this.replace(e,new te(Z.from(t),0,0))}},{key:"forEachCell",value:function(e){for(var t=this.$anchorCell.node(-1),n=eh.get(t),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r)),i=0;i<o.length;i++)e(t.nodeAt(o[i]),r+o[i])}},{key:"isColSelection",value:function(){var e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;var n=e+this.$anchorCell.nodeAfter.attrs.rowspan,r=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount}},{key:"isRowSelection",value:function(){var e=this.$anchorCell.node(-1),t=eh.get(e),n=this.$anchorCell.start(-1),r=t.colCount(this.$anchorCell.pos-n),o=t.colCount(this.$headCell.pos-n);if(Math.min(r,o)>0)return!1;var i=r+this.$anchorCell.nodeAfter.attrs.colspan,a=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,a)==t.width}},{key:"eq",value:function(e){return e instanceof t&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}},{key:"toJSON",value:function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}},{key:"getBookmark",value:function(){return new ph(this.$anchorCell.pos,this.$headCell.pos)}}],[{key:"colSelection",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=e.node(-1),o=eh.get(r),i=e.start(-1),a=o.findCell(e.pos-i),s=o.findCell(n.pos-i),l=e.node(0);return a.top<=s.top?(a.top>0&&(e=l.resolve(i+o.map[a.left])),s.bottom<o.height&&(n=l.resolve(i+o.map[o.width*(o.height-1)+s.right-1]))):(s.top>0&&(n=l.resolve(i+o.map[s.left])),a.bottom<o.height&&(e=l.resolve(i+o.map[o.width*(o.height-1)+a.right-1]))),new t(e,n)}},{key:"rowSelection",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=e.node(-1),o=eh.get(r),i=e.start(-1),a=o.findCell(e.pos-i),s=o.findCell(n.pos-i),l=e.node(0);return a.left<=s.left?(a.left>0&&(e=l.resolve(i+o.map[a.top*o.width])),s.right<o.width&&(n=l.resolve(i+o.map[o.width*(s.top+1)-1]))):(s.left>0&&(n=l.resolve(i+o.map[s.top*o.width])),a.right<o.width&&(e=l.resolve(i+o.map[o.width*(a.top+1)-1]))),new t(e,n)}},{key:"fromJSON",value:function(e,n){return new t(e.resolve(n.anchor),e.resolve(n.head))}},{key:"create",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;return new t(e.resolve(n),e.resolve(r))}}])}(mn);fh.prototype.visible=!1,mn.jsonID("cell",fh);var ph=function(){function e(t,n){Gp(this,e),this.anchor=t,this.head=n}return qp(e,[{key:"map",value:function(t){return new e(t.map(this.anchor),t.map(this.head))}},{key:"resolve",value:function(e){var t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&lh(t,n)?new fh(t,n):mn.near(n,1)}}])}();function hh(e){if(!(e.selection instanceof fh))return null;var t=[];return e.selection.forEachCell((function(e,n){t.push(ji.node(n,n+e.nodeSize,{class:"selectedCell"}))})),Li.create(e.doc,t)}var mh=new In("fix-tables");function vh(e,t,n,r){var o=e.childCount,i=t.childCount;e:for(var a=0,s=0;a<i;a++){for(var l=t.child(a),c=s,u=Math.min(o,a+3);c<u;c++)if(e.child(c)==l){s=c+1,n+=l.nodeSize;continue e}r(l,n),s<o&&e.child(s).sameMarkup(l)?vh(e.child(s),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function gh(e,t){var n,r=function(t,r){"table"==t.type.spec.tableRole&&(n=function(e,t,n,r){var o=eh.get(t);if(!o.problems)return r;r||(r=e.tr);for(var i,a,s=[],l=0;l<o.height;l++)s.push(0);for(var c=0;c<o.problems.length;c++){var u=o.problems[c];if("collision"==u.type){var d=t.nodeAt(u.pos);if(!d)continue;for(var f=d.attrs,p=0;p<f.rowspan;p++)s[u.row+p]+=u.n;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,uh(f,f.colspan-u.n,u.n))}else if("missing"==u.type)s[u.row]+=u.n;else if("overlong_rowspan"==u.type){var h=t.nodeAt(u.pos);if(!h)continue;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,$p($p({},h.attrs),{},{rowspan:h.attrs.rowspan-u.n}))}else if("colwidth mismatch"==u.type){var m=t.nodeAt(u.pos);if(!m)continue;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,$p($p({},m.attrs),{},{colwidth:u.colwidth}))}else if("zero_sized"==u.type){var v=r.mapping.map(n);r.delete(v,v+t.nodeSize)}}for(var g=0;g<s.length;g++)s[g]&&(null==i&&(i=g),a=g);for(var y=0,b=n+1;y<o.height;y++){var k=t.child(y),w=b+k.nodeSize,x=s[y];if(x>0){var C="cell";k.firstChild&&(C=k.firstChild.type.spec.tableRole);for(var S=[],_=0;_<x;_++){var E=nh(e.schema)[C].createAndFill();E&&S.push(E)}var D=0!=y&&i!=y-1||a!=y?w-1:b+1;r.insert(r.mapping.map(D),S)}b=w}return r.setMeta(mh,{fixTables:!0})}(e,t,r,n))};return t?t.doc!=e.doc&&vh(t.doc,e.doc,0,r):e.doc.descendants(r),n}function yh(e){var t=e.selection,n=ah(e),r=n.node(-1),o=n.start(-1),i=eh.get(r);return $p($p({},t instanceof fh?i.rectBetween(t.$anchorCell.pos-o,t.$headCell.pos-o):i.findCell(n.pos-o)),{},{tableStart:o,map:i,table:r})}function bh(e,t,n){var r=t.map,o=t.tableStart,i=t.table,a=n>0?-1:0;(function(e,t,n){for(var r=nh(t.type.schema).header_cell,o=0;o<e.height;o++)if(t.nodeAt(e.map[n+o*e.width]).type!=r)return!1;return!0})(r,i,n+a)&&(a=0==n||n==r.width?null:0);for(var s=0;s<r.height;s++){var l=s*r.width+n;if(n>0&&n<r.width&&r.map[l-1]==r.map[l]){var c=r.map[l],u=i.nodeAt(c);e.setNodeMarkup(e.mapping.map(o+c),null,dh(u.attrs,n-r.colCount(c))),s+=u.attrs.rowspan-1}else{var d=null==a?nh(i.type.schema).cell:i.nodeAt(r.map[l+a]).type,f=r.positionAt(s,n,i);e.insert(e.mapping.map(o+f),d.createAndFill())}}return e}function kh(e,t,n){for(var r=t.map,o=t.table,i=t.tableStart,a=e.mapping.maps.length,s=0;s<r.height;){var l=s*r.width+n,c=r.map[l],u=o.nodeAt(c),d=u.attrs;if(n>0&&r.map[l-1]==c||n<r.width-1&&r.map[l+1]==c)e.setNodeMarkup(e.mapping.slice(a).map(i+c),null,uh(d,n-r.colCount(c)));else{var f=e.mapping.slice(a).map(i+c);e.delete(f,f+u.nodeSize)}s+=d.rowspan}}function wh(e,t,n){for(var r,o=t.map,i=t.tableStart,a=t.table,s=i,l=0;l<n;l++)s+=a.child(l).nodeSize;var c=[],u=n>0?-1:0;(function(e,t,n){for(var r,o=nh(t.type.schema).header_cell,i=0;i<e.width;i++)if((null==(r=t.nodeAt(e.map[i+n*e.width]))?void 0:r.type)!=o)return!1;return!0})(o,a,n+u)&&(u=0==n||n==o.height?null:0);for(var d=0,f=o.width*n;d<o.width;d++,f++)if(n>0&&n<o.height&&o.map[f]==o.map[f-o.width]){var p=o.map[f],h=a.nodeAt(p).attrs;e.setNodeMarkup(i+p,null,$p($p({},h),{},{rowspan:h.rowspan+1})),d+=h.colspan-1}else{var m=null==u?nh(a.type.schema).cell:null==(r=a.nodeAt(o.map[f+u*o.width]))?void 0:r.type,v=null==m?void 0:m.createAndFill();v&&c.push(v)}return e.insert(s,nh(a.type.schema).row.create(null,c)),e}function xh(e,t,n){for(var r=t.map,o=t.table,i=t.tableStart,a=0,s=0;s<n;s++)a+=o.child(s).nodeSize;var l=a+o.child(n).nodeSize,c=e.mapping.maps.length;e.delete(a+i,l+i);for(var u=new Set,d=0,f=n*r.width;d<r.width;d++,f++){var p=r.map[f];if(!u.has(p))if(u.add(p),n>0&&p==r.map[f-r.width]){var h=o.nodeAt(p).attrs;e.setNodeMarkup(e.mapping.slice(c).map(p+i),null,$p($p({},h),{},{rowspan:h.rowspan-1})),d+=h.colspan-1}else if(n<r.height&&p==r.map[f+r.width]){var m=o.nodeAt(p),v=m.attrs,g=m.type.create($p($p({},v),{},{rowspan:m.attrs.rowspan-1}),m.content),y=r.positionAt(n+1,d,o);e.insert(e.mapping.slice(c).map(i+y),g),d+=v.colspan-1}}}function Ch(e){var t=e.content;return 1==t.childCount&&t.child(0).isTextblock&&0==t.child(0).childCount}function Sh(e,t,n){for(var r=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1}),o=0;o<r.length;o++){var i=t.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function _h(e,t){return(t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(e){return function(t,n){if(!ih(t))return!1;if(n){for(var r=nh(t.schema),o=yh(t),i=t.tr,a=o.map.cellsInRect("column"==e?{left:o.left,top:0,right:o.right,bottom:o.map.height}:"row"==e?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),s=a.map((function(e){return o.table.nodeAt(e)})),l=0;l<a.length;l++)s[l].type==r.header_cell&&i.setNodeMarkup(o.tableStart+a[l],r.cell,s[l].attrs);if(0==i.steps.length)for(var c=0;c<a.length;c++)i.setNodeMarkup(o.tableStart+a[c],r.header_cell,s[c].attrs);n(i)}return!0}}(e):function(t,n){if(!ih(t))return!1;if(n){var r=nh(t.schema),o=yh(t),i=t.tr,a=Sh("row",o,r),s=Sh("column",o,r),l=("column"===e?a:"row"===e&&s)?1:0,c="column"==e?{left:0,top:l,right:1,bottom:o.map.height}:"row"==e?{left:l,top:0,right:o.map.width,bottom:1}:o,u="column"==e?s?r.cell:r.header_cell:"row"==e?a?r.cell:r.header_cell:r.cell;o.map.cellsInRect(c).forEach((function(e){var t=e+o.tableStart,n=i.doc.nodeAt(t);n&&i.setNodeMarkup(t,u,n.attrs)})),n(i)}return!0}}function Eh(e){return function(t,n){if(!ih(t))return!1;var r,o=function(e,t){if(t<0){var n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(var r=e.index(-1)-1,o=e.before();r>=0;r--){var i=e.node(-1).child(r),a=i.lastChild;if(a)return o-1-a.nodeSize;o-=i.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;for(var s=e.node(-1),l=e.indexAfter(-1),c=e.after();l<s.childCount;l++){var u=s.child(l);if(u.childCount)return c+1;c+=u.nodeSize}}return null}(ah(t),e);if(null==o)return!1;if(n){var i=t.doc.resolve(o);n(t.tr.setSelection(bn.between(i,(r=i,r.node(0).resolve(r.pos+r.nodeAfter.nodeSize)))).scrollIntoView())}return!0}}function Dh(e,t){var n=e.selection;if(!(n instanceof fh))return!1;if(t){var r=e.tr,o=nh(e.schema).cell.createAndFill().content;n.forEachCell((function(e,t){e.content.eq(o)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new te(o,0,0))})),r.docChanged&&t(r)}return!0}function Mh(e,t){var n=e.createAndFill();return new en(n).replace(0,n.content.size,t).doc}function Ah(e,t,n,r,o,i,a,s){if(0==a||a==t.height)return!1;for(var l=!1,c=o;c<i;c++){var u=a*t.width+c,d=t.map[u];if(t.map[u-t.width]==d){l=!0;var f=n.nodeAt(d),p=t.findCell(d),h=p.top,m=p.left;e.setNodeMarkup(e.mapping.slice(s).map(d+r),null,$p($p({},f.attrs),{},{rowspan:a-h})),e.insert(e.mapping.slice(s).map(t.positionAt(a,m,n)),f.type.createAndFill($p($p({},f.attrs),{},{rowspan:h+f.attrs.rowspan-a}))),c+=f.attrs.colspan-1}}return l}function Oh(e,t,n,r,o,i,a,s){if(0==a||a==t.width)return!1;for(var l=!1,c=o;c<i;c++){var u=c*t.width+a,d=t.map[u];if(t.map[u-1]==d){l=!0;var f=n.nodeAt(d),p=t.colCount(d),h=e.mapping.slice(s).map(d+r);e.setNodeMarkup(h,null,uh(f.attrs,a-p,f.attrs.colspan-(a-p))),e.insert(h+f.nodeSize,f.type.createAndFill(uh(f.attrs,0,a-p))),c+=f.attrs.rowspan-1}}return l}function Th(e,t,n,r,o){var i=n?e.doc.nodeAt(n-1):e.doc;if(!i)throw new Error("No table found");var a=eh.get(i),s=r.top,l=r.left,c=l+o.width,u=s+o.height,d=e.tr,f=0;function p(){if(!(i=n?d.doc.nodeAt(n-1):d.doc))throw new Error("No table found");a=eh.get(i),f=d.mapping.maps.length}(function(e,t,n,r,o,i,a){var s,l,c=nh(e.doc.type.schema);if(o>t.width)for(var u=0,d=0;u<t.height;u++){var f=n.child(u);d+=f.nodeSize;var p,h=[];p=null==f.lastChild||f.lastChild.type==c.cell?s||(s=c.cell.createAndFill()):l||(l=c.header_cell.createAndFill());for(var m=t.width;m<o;m++)h.push(p);e.insert(e.mapping.slice(a).map(d-1+r),h)}if(i>t.height){for(var v=[],g=0,y=(t.height-1)*t.width;g<Math.max(t.width,o);g++){var b=!(g>=t.width)&&n.nodeAt(t.map[y+g]).type==c.header_cell;v.push(b?l||(l=c.header_cell.createAndFill()):s||(s=c.cell.createAndFill()))}for(var k=c.row.create(null,Z.from(v)),w=[],x=t.height;x<i;x++)w.push(k);e.insert(e.mapping.slice(a).map(r+n.nodeSize-2),w)}return!(!s&&!l)})(d,a,i,n,c,u,f)&&p(),Ah(d,a,i,n,l,c,s,f)&&p(),Ah(d,a,i,n,l,c,u,f)&&p(),Oh(d,a,i,n,s,u,l,f)&&p(),Oh(d,a,i,n,s,u,c,f)&&p();for(var h=s;h<u;h++){var m=a.positionAt(h,l,i),v=a.positionAt(h,c,i);d.replace(d.mapping.slice(f).map(m+n),d.mapping.slice(f).map(v+n),new te(o.rows[h-s],0,0))}p(),d.setSelection(new fh(d.doc.resolve(n+a.positionAt(s,l,i)),d.doc.resolve(n+a.positionAt(u-1,c-1,i)))),t(d)}_h("row",{useDeprecatedLogic:!0}),_h("column",{useDeprecatedLogic:!0}),_h("cell",{useDeprecatedLogic:!0});var jh=wa({ArrowLeft:Ph("horiz",-1),ArrowRight:Ph("horiz",1),ArrowUp:Ph("vert",-1),ArrowDown:Ph("vert",1),"Shift-ArrowLeft":Lh("horiz",-1),"Shift-ArrowRight":Lh("horiz",1),"Shift-ArrowUp":Lh("vert",-1),"Shift-ArrowDown":Lh("vert",1),Backspace:Dh,"Mod-Backspace":Dh,Delete:Dh,"Mod-Delete":Dh});function Nh(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function Ph(e,t){return function(n,r,o){if(!o)return!1;var i=n.selection;if(i instanceof fh)return Nh(n,r,mn.near(i.$headCell,t));if("horiz"!=e&&!i.empty)return!1;var a=Fh(o,e,t);if(null==a)return!1;if("horiz"==e)return Nh(n,r,mn.near(n.doc.resolve(i.head+t),t));var s,l=n.doc.resolve(a),c=ch(l,e,t);return s=c?mn.near(c,1):t<0?mn.near(n.doc.resolve(l.before(-1)),-1):mn.near(n.doc.resolve(l.after(-1)),1),Nh(n,r,s)}}function Lh(e,t){return function(n,r,o){if(!o)return!1;var i,a=n.selection;if(a instanceof fh)i=a;else{var s=Fh(o,e,t);if(null==s)return!1;i=new fh(n.doc.resolve(s))}var l=ch(i.$headCell,e,t);return!!l&&Nh(n,r,new fh(i.$anchorCell,l))}}function Rh(e,t){var n=oh(e.state.doc.resolve(t));return!!n&&(e.dispatch(e.state.tr.setSelection(new fh(n))),!0)}function Ih(e,t,n){if(!ih(e.state))return!1;var r=function(e){if(!e.size)return null;for(var t=e.content,n=e.openStart,r=e.openEnd;1==t.childCount&&(n>0&&r>0||"table"==t.child(0).type.spec.tableRole);)n--,r--,t=t.child(0).content;var o=t.child(0),i=o.type.spec.tableRole,a=o.type.schema,s=[];if("row"==i)for(var l=0;l<t.childCount;l++){var c=t.child(l).content,u=l?0:Math.max(0,n-1),d=l<t.childCount-1?0:Math.max(0,r-1);(u||d)&&(c=Mh(nh(a).row,new te(c,u,d)).content),s.push(c)}else{if("cell"!=i&&"header_cell"!=i)return null;s.push(n||r?Mh(nh(a).row,new te(t,n,r)).content:t)}return function(e,t){for(var n=[],r=0;r<t.length;r++)for(var o=t[r],i=o.childCount-1;i>=0;i--)for(var a=o.child(i).attrs,s=a.rowspan,l=a.colspan,c=r;c<r+s;c++)n[c]=(n[c]||0)+l;for(var u=0,d=0;d<n.length;d++)u=Math.max(u,n[d]);for(var f=0;f<n.length;f++)if(f>=t.length&&t.push(Z.empty),n[f]<u){for(var p=nh(e).cell.createAndFill(),h=[],m=n[f];m<u;m++)h.push(p);t[f]=t[f].append(Z.from(h))}return{height:t.length,width:u,rows:t}}(a,s)}(n),o=e.state.selection;if(o instanceof fh){r||(r={width:1,height:1,rows:[Z.from(Mh(nh(e.state.schema).cell,n))]});var i=o.$anchorCell.node(-1),a=o.$anchorCell.start(-1),s=eh.get(i).rectBetween(o.$anchorCell.pos-a,o.$headCell.pos-a);return r=function(e,t,n){var r=e.width,o=e.height,i=e.rows;if(r!=t){for(var a=[],s=[],l=0;l<i.length;l++){for(var c=i[l],u=[],d=a[l]||0,f=0;d<t;f++){var p=c.child(f%c.childCount);d+p.attrs.colspan>t&&(p=p.type.createChecked(uh(p.attrs,p.attrs.colspan,d+p.attrs.colspan-t),p.content)),u.push(p),d+=p.attrs.colspan;for(var h=1;h<p.attrs.rowspan;h++)a[l+h]=(a[l+h]||0)+p.attrs.colspan}s.push(Z.from(u))}i=s,r=t}if(o!=n){for(var m=[],v=0,g=0;v<n;v++,g++){for(var y=[],b=i[g%o],k=0;k<b.childCount;k++){var w=b.child(k);v+w.attrs.rowspan>n&&(w=w.type.create($p($p({},w.attrs),{},{rowspan:Math.max(1,n-w.attrs.rowspan)}),w.content)),y.push(w)}m.push(Z.from(y))}i=m,o=n}return{width:r,height:o,rows:i}}(r,s.right-s.left,s.bottom-s.top),Th(e.state,e.dispatch,a,s,r),!0}if(r){var l=ah(e.state),c=l.start(-1);return Th(e.state,e.dispatch,c,eh.get(l.node(-1)).findCell(l.pos-c),r),!0}return!1}function Bh(e,t){var n;if(!t.ctrlKey&&!t.metaKey){var r,o=Hh(e,t.target);if(t.shiftKey&&e.state.selection instanceof fh)i(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&o&&null!=(r=oh(e.state.selection.$anchor))&&(null==(n=zh(e,t))?void 0:n.pos)!=r.pos)i(r,t),t.preventDefault();else if(!o)return;e.root.addEventListener("mouseup",a),e.root.addEventListener("dragstart",a),e.root.addEventListener("mousemove",s)}function i(t,n){var r=zh(e,n),o=null==rh.getState(e.state);if(!r||!lh(t,r)){if(!o)return;r=t}var i=new fh(t,r);if(o||!e.state.selection.eq(i)){var a=e.state.tr.setSelection(i);o&&a.setMeta(rh,t.pos),e.dispatch(a)}}function a(){e.root.removeEventListener("mouseup",a),e.root.removeEventListener("dragstart",a),e.root.removeEventListener("mousemove",s),null!=rh.getState(e.state)&&e.dispatch(e.state.tr.setMeta(rh,-1))}function s(n){var r,s=n,l=rh.getState(e.state);if(null!=l)r=e.state.doc.resolve(l);else if(Hh(e,s.target)!=o&&!(r=zh(e,t)))return a();r&&i(r,s)}}function Fh(e,t,n){if(!(e.state.selection instanceof bn))return null;for(var r=e.state.selection.$head,o=r.depth-1;o>=0;o--){var i=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:i.childCount))return null;if("cell"==i.type.spec.tableRole||"header_cell"==i.type.spec.tableRole){var a=r.before(o),s="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(s)?a:null}}return null}function Hh(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t;return null}function zh(e,t){var n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?oh(e.state.doc.resolve(n.pos)):null}var Vh=function(){return qp((function e(t,n){Gp(this,e),this.node=t,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width","".concat(n,"px")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),$h(t,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}),[{key:"update",value:function(e){return e.type==this.node.type&&(this.node=e,$h(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}},{key:"ignoreMutation",value:function(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))}}])}();function $h(e,t,n,r,o,i){var a,s=0,l=!0,c=t.firstChild,u=e.firstChild;if(u){for(var d=0,f=0;d<u.childCount;d++)for(var p=u.child(d).attrs,h=p.colspan,m=p.colwidth,v=0;v<h;v++,f++){var g=o==f?i:m&&m[v],y=g?g+"px":"";if(s+=g||r,g||(l=!1),c)c.style.width!=y&&(c.style.width=y),c=c.nextSibling;else{var b=document.createElement("col");b.style.width=y,t.appendChild(b)}}for(;c;){var k=c.nextSibling;null==(a=c.parentNode)||a.removeChild(c),c=k}l?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}}var Uh=new In("tableColumnResizing");function Gh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.handleWidth,n=void 0===t?5:t,r=e.cellMinWidth,o=void 0===r?25:r,i=e.defaultCellMinWidth,a=void 0===i?100:i,s=e.View,l=void 0===s?Vh:s,c=e.lastColumnResizable,u=void 0===c||c,d=new Pn({key:Uh,state:{init:function(e,t){var n,r,o=null==(r=null==(n=d.spec)?void 0:n.props)?void 0:r.nodeViews,i=nh(t.schema).table.name;return l&&o&&(o[i]=function(e,t){return new l(e,a,t)}),new Wh(-1,!1)},apply:function(e,t){return t.apply(e)}},props:{attributes:function(e){var t=Uh.getState(e);return t&&t.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:function(e,t){!function(e,t,n,r){if(e.editable){var o=Uh.getState(e.state);if(o&&!o.dragging){var i=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target),a=-1;if(i){var s=i.getBoundingClientRect(),l=s.left,c=s.right;t.clientX-l<=n?a=qh(e,t,"left",n):c-t.clientX<=n&&(a=qh(e,t,"right",n))}if(a!=o.activeHandle){if(!r&&-1!==a){var u=e.state.doc.resolve(a),d=u.node(-1),f=eh.get(d),p=u.start(-1);if(f.colCount(u.pos-p)+u.nodeAfter.attrs.colspan-1==f.width-1)return}Zh(e,a)}}}}(e,t,n,u)},mouseleave:function(e){!function(e){if(e.editable){var t=Uh.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&Zh(e,-1)}}(e)},mousedown:function(e,t){!function(e,t,n,r){var o;if(!e.editable)return!1;var i=null!=(o=e.dom.ownerDocument.defaultView)?o:window,a=Uh.getState(e.state);if(!a||-1==a.activeHandle||a.dragging)return!1;var s=e.state.doc.nodeAt(a.activeHandle),l=function(e,t,n){var r=n.colspan,o=n.colwidth,i=o&&o[o.length-1];if(i)return i;var a=e.domAtPos(t),s=a.node.childNodes[a.offset].offsetWidth,l=r;if(o)for(var c=0;c<r;c++)o[c]&&(s-=o[c],l--);return s/l}(e,a.activeHandle,s.attrs);function c(t){i.removeEventListener("mouseup",c),i.removeEventListener("mousemove",u);var r=Uh.getState(e.state);(null==r?void 0:r.dragging)&&(function(e,t,n){for(var r=e.state.doc.resolve(t),o=r.node(-1),i=eh.get(o),a=r.start(-1),s=i.colCount(r.pos-a)+r.nodeAfter.attrs.colspan-1,l=e.state.tr,c=0;c<i.height;c++){var u=c*i.width+s;if(!c||i.map[u]!=i.map[u-i.width]){var d=i.map[u],f=o.nodeAt(d).attrs,p=1==f.colspan?0:s-i.colCount(d);if(!f.colwidth||f.colwidth[p]!=n){var h=f.colwidth?f.colwidth.slice():(m=f.colspan,Array(m).fill(0));h[p]=n,l.setNodeMarkup(a+d,null,$p($p({},f),{},{colwidth:h}))}}}var m;l.docChanged&&e.dispatch(l)}(e,r.activeHandle,Kh(r.dragging,t,n)),e.dispatch(e.state.tr.setMeta(Uh,{setDragging:null})))}function u(t){if(!t.which)return c(t);var o=Uh.getState(e.state);if(o&&o.dragging){var i=Kh(o.dragging,t,n);Jh(e,o.activeHandle,i,r)}}e.dispatch(e.state.tr.setMeta(Uh,{setDragging:{startX:t.clientX,startWidth:l}})),Jh(e,a.activeHandle,l,r),i.addEventListener("mouseup",c),i.addEventListener("mousemove",u),t.preventDefault()}(e,t,o,a)}},decorations:function(e){var t=Uh.getState(e);if(t&&t.activeHandle>-1)return function(e,t){var n,r=[],o=e.doc.resolve(t),i=o.node(-1);if(!i)return Li.empty;for(var a=eh.get(i),s=o.start(-1),l=a.colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1,c=0;c<a.height;c++){var u=l+c*a.width;if(!(l!=a.width-1&&a.map[u]==a.map[u+1]||0!=c&&a.map[u]==a.map[u-a.width])){var d=a.map[u],f=s+d+i.nodeAt(d).nodeSize-1,p=document.createElement("div");p.className="column-resize-handle",(null==(n=Uh.getState(e))?void 0:n.dragging)&&r.push(ji.node(s+d,s+d+i.nodeAt(d).nodeSize,{class:"column-resize-dragging"})),r.push(ji.widget(f,p))}}return Li.create(e.doc,r)}(e,t.activeHandle)},nodeViews:{}}});return d}var Wh=function(){function e(t,n){Gp(this,e),this.activeHandle=t,this.dragging=n}return qp(e,[{key:"apply",value:function(t){var n=this,r=t.getMeta(Uh);if(r&&null!=r.setHandle)return new e(r.setHandle,!1);if(r&&void 0!==r.setDragging)return new e(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&t.docChanged){var o=t.mapping.map(n.activeHandle,-1);return sh(t.doc.resolve(o))||(o=-1),new e(o,n.dragging)}return n}}])}();function qh(e,t,n,r){var o="right"==n?-r:r,i=e.posAtCoords({left:t.clientX+o,top:t.clientY});if(!i)return-1;var a=i.pos,s=oh(e.state.doc.resolve(a));if(!s)return-1;if("right"==n)return s.pos;var l=eh.get(s.node(-1)),c=s.start(-1),u=l.map.indexOf(s.pos-c);return u%l.width==0?-1:c+l.map[u-1]}function Kh(e,t,n){var r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function Zh(e,t){e.dispatch(e.state.tr.setMeta(Uh,{setHandle:t}))}function Jh(e,t,n,r){for(var o=e.state.doc.resolve(t),i=o.node(-1),a=o.start(-1),s=eh.get(i).colCount(o.pos-a)+o.nodeAfter.attrs.colspan-1,l=e.domAtPos(o.start(-1)).node;l&&"TABLE"!=l.nodeName;)l=l.parentNode;l&&$h(i,l.firstChild,l,r,s,n)}function Xh(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).allowTableNodeSelection,t=void 0!==e&&e;return new Pn({key:rh,state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(rh);if(null!=n)return-1==n?null:n;if(null==t||!e.docChanged)return t;var r=e.mapping.mapResult(t),o=r.deleted,i=r.pos;return o?null:i}},props:{decorations:hh,handleDOMEvents:{mousedown:Bh},createSelectionBetween:function(e){return null!=rh.getState(e.state)?e.state.selection:null},handleTripleClick:Rh,handleKeyDown:jh,handlePaste:Ih},appendTransaction:function(e,n,r){return function(e,t,n){var r,o,i=(t||e).selection,a=(t||e).doc;if(i instanceof wn&&(o=i.node.type.spec.tableRole)){if("cell"==o||"header_cell"==o)r=fh.create(a,i.from);else if("row"==o){var s=a.resolve(i.from+1);r=fh.rowSelection(s,s)}else if(!n){var l=eh.get(i.node),c=i.from+1,u=c+l.map[l.width*l.height-1];r=fh.create(a,c+1,u)}}else i instanceof bn&&function(e){var t=e.$from,n=e.$to;if(t.pos==n.pos||t.pos<n.pos-6)return!1;for(var r=t.pos,o=n.pos,i=t.depth;i>=0&&!(t.after(i+1)<t.end(i));i--,r++);for(var a=n.depth;a>=0&&!(n.before(a+1)>n.start(a));a--,o--);return r==o&&/row|table/.test(t.node(i).type.spec.tableRole)}(i)?r=bn.create(a,i.from):i instanceof bn&&function(e){for(var t,n,r=e.$from,o=e.$to,i=r.depth;i>0;i--){var a=r.node(i);if("cell"===a.type.spec.tableRole||"header_cell"===a.type.spec.tableRole){t=a;break}}for(var s=o.depth;s>0;s--){var l=o.node(s);if("cell"===l.type.spec.tableRole||"header_cell"===l.type.spec.tableRole){n=l;break}}return t!==n&&0===o.parentOffset}(i)&&(r=bn.create(a,i.$from.start(),i.$from.end()));return r&&(t||(t=e.tr)).setSelection(r),t}(r,gh(r,n),t)}})}var Yh=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Qh=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,em=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,tm=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,nm=Ps.create({name:"bold",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){var e=this;return[{tag:"strong"},{tag:"b",getAttrs:function(e){return"normal"!==e.style.fontWeight&&null}},{style:"font-weight=400",clearMark:function(t){return t.type.name===e.name}},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}]},renderHTML:function(e){var t=e.HTMLAttributes;return["strong",ys(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{setBold:function(){return function(t){return t.commands.setMark(e.name)}},toggleBold:function(){return function(t){return t.commands.toggleMark(e.name)}},unsetBold:function(){return function(t){return t.commands.unsetMark(e.name)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-b":function(){return e.editor.commands.toggleBold()},"Mod-B":function(){return e.editor.commands.toggleBold()}}},addInputRules:function(){return[Rl({find:Yh,type:this.type}),Rl({find:em,type:this.type})]},addPasteRules:function(){return[Fl({find:Qh,type:this.type}),Fl({find:tm,type:this.type})]}}),rm=/(^|[^`])`([^`]+)`(?!`)/,om=/(^|[^`])`([^`]+)`(?!`)/g,im=Ps.create({name:"code",addOptions:function(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML:function(){return[{tag:"code"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["code",ys(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{setCode:function(){return function(t){return t.commands.setMark(e.name)}},toggleCode:function(){return function(t){return t.commands.toggleMark(e.name)}},unsetCode:function(){return function(t){return t.commands.unsetMark(e.name)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-e":function(){return e.editor.commands.toggleCode()}}},addInputRules:function(){return[Rl({find:rm,type:this.type})]},addPasteRules:function(){return[Fl({find:om,type:this.type})]}}),am=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,sm=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,lm=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,cm=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,um=Ps.create({name:"italic",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){var e=this;return[{tag:"em"},{tag:"i",getAttrs:function(e){return"normal"!==e.style.fontStyle&&null}},{style:"font-style=normal",clearMark:function(t){return t.type.name===e.name}},{style:"font-style=italic"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["em",ys(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{setItalic:function(){return function(t){return t.commands.setMark(e.name)}},toggleItalic:function(){return function(t){return t.commands.toggleMark(e.name)}},unsetItalic:function(){return function(t){return t.commands.unsetMark(e.name)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-i":function(){return e.editor.commands.toggleItalic()},"Mod-I":function(){return e.editor.commands.toggleItalic()}}},addInputRules:function(){return[Rl({find:am,type:this.type}),Rl({find:lm,type:this.type})]},addPasteRules:function(){return[Fl({find:sm,type:this.type}),Fl({find:cm,type:this.type})]}}),dm=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,fm=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,pm=Ps.create({name:"strike",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:function(e){return!!e.includes("line-through")&&{}}}]},renderHTML:function(e){var t=e.HTMLAttributes;return["s",ys(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{setStrike:function(){return function(t){return t.commands.setMark(e.name)}},toggleStrike:function(){return function(t){return t.commands.toggleMark(e.name)}},unsetStrike:function(){return function(t){return t.commands.unsetMark(e.name)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-Shift-s":function(){return e.editor.commands.toggleStrike()}}},addInputRules:function(){return[Rl({find:dm,type:this.type})]},addPasteRules:function(){return[Fl({find:fm,type:this.type})]}}),hm=Ps.create({name:"underline",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:function(e){return!!e.includes("underline")&&{}}}]},renderHTML:function(e){var t=e.HTMLAttributes;return["u",ys(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{setUnderline:function(){return function(t){return t.commands.setMark(e.name)}},toggleUnderline:function(){return function(t){return t.commands.toggleMark(e.name)}},unsetUnderline:function(){return function(t){return t.commands.unsetMark(e.name)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-u":function(){return e.editor.commands.toggleUnderline()},"Mod-U":function(){return e.editor.commands.toggleUnderline()}}}}),mm=Il.create({name:"tableCell",addOptions:function(){return{HTMLAttributes:{}}},content:"block+",addAttributes:function(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:function(e){var t=e.getAttribute("colwidth");return t?t.split(",").map((function(e){return parseInt(e,10)})):null}}}},tableRole:"cell",isolating:!0,parseHTML:function(){return[{tag:"td"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["td",ys(this.options.HTMLAttributes,t),0]}}),vm=Il.create({name:"tableHeader",addOptions:function(){return{HTMLAttributes:{}}},content:"block+",addAttributes:function(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:function(e){var t=e.getAttribute("colwidth");return t?t.split(",").map((function(e){return parseInt(e,10)})):null}}}},tableRole:"header_cell",isolating:!0,parseHTML:function(){return[{tag:"th"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["th",ys(this.options.HTMLAttributes,t),0]}}),gm=Il.create({name:"tableRow",addOptions:function(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML:function(){return[{tag:"tr"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["tr",ys(this.options.HTMLAttributes,t),0]}});function ym(e){return ym="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ym(e)}function bm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function km(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xm(r.key),r)}}function wm(e,t,n){return t&&km(e.prototype,t),n&&km(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xm(e){var t=function(e){if("object"!=ym(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ym(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ym(t)?t:t+""}function Cm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Cm=function(){return!!e})()}function Sm(e){return Sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sm(e)}function _m(e,t){return _m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_m(e,t)}var Em=function(e){function t(e){return bm(this,t),n=this,o=[e,e],r=Sm(r=t),function(e,t){if(t&&("object"==ym(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(n,Cm()?Reflect.construct(r,o||[],Sm(n).constructor):r.apply(n,o));var n,r,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_m(e,t)}(t,e),wm(t,[{key:"map",value:function(e,n){var r=e.resolve(n.map(this.head));return t.valid(r)?new t(r):mn.near(r)}},{key:"content",value:function(){return te.empty}},{key:"eq",value:function(e){return e instanceof t&&e.head==this.head}},{key:"toJSON",value:function(){return{type:"gapcursor",pos:this.head}}},{key:"getBookmark",value:function(){return new Dm(this.anchor)}}],[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(e.resolve(n.pos))}},{key:"valid",value:function(e){var t=e.parent;if(t.isTextblock||!function(e){for(var t=e.depth;t>=0;t--){var n=e.index(t),r=e.node(t);if(0!=n)for(var o=r.child(n-1);;o=o.lastChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e)||!function(e){for(var t=e.depth;t>=0;t--){var n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(var o=r.child(n);;o=o.firstChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e))return!1;var n=t.type.spec.allowGapCursor;if(null!=n)return n;var r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}},{key:"findGapCursorFrom",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e:for(;;){if(!r&&t.valid(e))return e;for(var o=e.pos,i=null,a=e.depth;;a--){var s=e.node(a);if(n>0?e.indexAfter(a)<s.childCount:e.index(a)>0){i=s.child(n>0?e.indexAfter(a):e.index(a)-1);break}if(0==a)return null;o+=n;var l=e.doc.resolve(o);if(t.valid(l))return l}for(;;){var c=n>0?i.firstChild:i.lastChild;if(!c){if(i.isAtom&&!i.isText&&!wn.isSelectable(i)){e=e.doc.resolve(o+i.nodeSize*n),r=!1;continue e}break}i=c,o+=n;var u=e.doc.resolve(o);if(t.valid(u))return u}return null}}}])}(mn);Em.prototype.visible=!1,Em.findFrom=Em.findGapCursorFrom,mn.jsonID("gapcursor",Em);var Dm=function(){function e(t){bm(this,e),this.pos=t}return wm(e,[{key:"map",value:function(t){return new e(t.map(this.pos))}},{key:"resolve",value:function(e){var t=e.resolve(this.pos);return Em.valid(t)?new Em(t):mn.near(t)}}])}(),Mm=wa({ArrowLeft:Am("horiz",-1),ArrowRight:Am("horiz",1),ArrowUp:Am("vert",-1),ArrowDown:Am("vert",1)});function Am(e,t){var n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,o){var i=e.selection,a=t>0?i.$to:i.$from,s=i.empty;if(i instanceof bn){if(!o.endOfTextblock(n)||0==a.depth)return!1;s=!1,a=e.doc.resolve(t>0?a.after():a.before())}var l=Em.findGapCursorFrom(a,t,s);return!!l&&(r&&r(e.tr.setSelection(new Em(l))),!0)}}function Om(e,t,n){if(!e||!e.editable)return!1;var r=e.state.doc.resolve(t);if(!Em.valid(r))return!1;var o=e.posAtCoords({left:n.clientX,top:n.clientY});return!(o&&o.inside>-1&&wn.isSelectable(e.state.doc.nodeAt(o.inside))||(e.dispatch(e.state.tr.setSelection(new Em(r))),0))}function Tm(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof Em))return!1;var n=e.state.selection.$from,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;for(var o=Z.empty,i=r.length-1;i>=0;i--)o=Z.from(r[i].createAndFill(null,o));var a=e.state.tr.replace(n.pos,n.pos,new te(o,0,0));return a.setSelection(bn.near(a.doc.resolve(n.pos+1))),e.dispatch(a),!1}function jm(e){if(!(e.selection instanceof Em))return null;var t=document.createElement("div");return t.className="ProseMirror-gapcursor",Li.create(e.doc,[ji.widget(e.selection.head,t,{key:"gapcursor"})])}var Nm=Fs.create({name:"gapCursor",addProseMirrorPlugins:function(){return[new Pn({props:{decorations:jm,createSelectionBetween:function(e,t,n){return t.pos==n.pos&&Em.valid(n)?new Em(n):null},handleClick:Om,handleKeyDown:Mm,handleDOMEvents:{beforeinput:Tm}}})]},extendNodeSchema:function(e){var t;return{allowGapCursor:null!==(t=ws(hs(e,"allowGapCursor",{name:e.name,options:e.options,storage:e.storage})))&&void 0!==t?t:null}}}),Pm=Il.create({name:"hardBreak",addOptions:function(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML:function(){return[{tag:"br"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["br",ys(this.options.HTMLAttributes,t)]},renderText:function(){return"\n"},addCommands:function(){var e=this;return{setHardBreak:function(){return function(t){var n=t.commands,r=t.chain,o=t.state,i=t.editor;return n.first([function(){return n.exitCode()},function(){return n.command((function(){var t=o.selection,n=o.storedMarks;if(t.$from.parent.type.spec.isolating)return!1;var a=e.options.keepMarks,s=i.extensionManager.splittableMarks,l=n||t.$to.parentOffset&&t.$from.marks();return r().insertContent({type:e.name}).command((function(e){var t=e.tr;if(e.dispatch&&l&&a){var n=l.filter((function(e){return s.includes(e.type.name)}));t.ensureMarks(n)}return!0})).run()}))}])}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-Enter":function(){return e.editor.commands.setHardBreak()},"Shift-Enter":function(){return e.editor.commands.setHardBreak()}}}}),Lm=200,Rm=function(){};Rm.prototype.append=function(e){return e.length?(e=Rm.from(e),!this.length&&e||e.length<Lm&&this.leafAppend(e)||this.length<Lm&&e.leafPrepend(this)||this.appendInner(e)):this},Rm.prototype.prepend=function(e){return e.length?Rm.from(e).append(this):this},Rm.prototype.appendInner=function(e){return new Bm(this,e)},Rm.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?Rm.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},Rm.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},Rm.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},Rm.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},Rm.from=function(e){return e instanceof Rm?e:e&&e.length?new Im(e):Rm.empty};var Im=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var o=t;o<n;o++)if(!1===e(this.values[o],r+o))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var o=t-1;o>=n;o--)if(!1===e(this.values[o],r+o))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=Lm)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=Lm)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(Rm);Rm.empty=new Im([]);var Bm=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var o=this.left.length;return!(t<o&&!1===this.left.forEachInner(e,t,Math.min(n,o),r))&&!(n>o&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,n)-o,r+o))&&void 0},t.prototype.forEachInvertedInner=function(e,t,n,r){var o=this.left.length;return!(t>o&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(n,o)-o,r+o))&&!(n<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),n,r))&&void 0},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(Rm);const Fm=Rm;function Hm(e){return Hm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hm(e)}function zm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Um(r.key),r)}}function $m(e,t,n){return t&&Vm(e.prototype,t),n&&Vm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Um(e){var t=function(e){if("object"!=Hm(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Hm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Hm(t)?t:t+""}var Gm=function(){function e(t,n){zm(this,e),this.items=t,this.eventCount=n}return $m(e,[{key:"popEvent",value:function(t,n){var r=this;if(0==this.eventCount)return null;for(var o,i,a=this.items.length;;a--)if(this.items.get(a-1).selection){--a;break}n&&(o=this.remapping(a,this.items.length),i=o.maps.length);var s,l,c=t.tr,u=[],d=[];return this.items.forEach((function(t,n){if(!t.step)return o||(o=r.remapping(a,n+1),i=o.maps.length),i--,void d.push(t);if(o){d.push(new Wm(t.map));var f,p=t.step.map(o.slice(i));p&&c.maybeStep(p).doc&&(f=c.mapping.maps[c.mapping.maps.length-1],u.push(new Wm(f,void 0,void 0,u.length+d.length))),i--,f&&o.appendMap(f,i)}else c.maybeStep(t.step);return t.selection?(s=o?t.selection.map(o.slice(i)):t.selection,l=new e(r.items.slice(0,a).append(d.reverse().concat(u)),r.eventCount-1),!1):void 0}),this.items.length,0),{remaining:l,transform:c,selection:s}}},{key:"addTransform",value:function(t,n,r,o){for(var i=[],a=this.eventCount,s=this.items,l=!o&&s.length?s.get(s.length-1):null,c=0;c<t.steps.length;c++){var u,d=t.steps[c].invert(t.docs[c]),f=new Wm(t.mapping.maps[c],d,n);(u=l&&l.merge(f))&&(f=u,c?i.pop():s=s.slice(0,s.length-1)),i.push(f),n&&(a++,n=void 0),o||(l=f)}var p,h,m,v=a-r.depth;return v>Km&&(h=v,(p=s).forEach((function(e,t){if(e.selection&&0==h--)return m=t,!1})),s=p.slice(m),a-=v),new e(s.append(i),a)}},{key:"remapping",value:function(e,t){var n=new gt;return this.items.forEach((function(t,r){var o=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,o)}),e,t),n}},{key:"addMaps",value:function(t){return 0==this.eventCount?this:new e(this.items.append(t.map((function(e){return new Wm(e)}))),this.eventCount)}},{key:"rebased",value:function(t,n){if(!this.eventCount)return this;var r=[],o=Math.max(0,this.items.length-n),i=t.mapping,a=t.steps.length,s=this.eventCount;this.items.forEach((function(e){e.selection&&s--}),o);var l=n;this.items.forEach((function(e){var n=i.getMirror(--l);if(null!=n){a=Math.min(a,n);var o=i.maps[n];if(e.step){var c=t.steps[n].invert(t.docs[n]),u=e.selection&&e.selection.map(i.slice(l+1,n));u&&s++,r.push(new Wm(o,c,u))}else r.push(new Wm(o))}}),o);for(var c=[],u=n;u<a;u++)c.push(new Wm(i.maps[u]));var d=new e(this.items.slice(0,o).append(c).append(r),s);return d.emptyItemCount()>500&&(d=d.compress(this.items.length-r.length)),d}},{key:"emptyItemCount",value:function(){var e=0;return this.items.forEach((function(t){t.step||e++})),e}},{key:"compress",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items.length,n=this.remapping(0,t),r=n.maps.length,o=[],i=0;return this.items.forEach((function(e,a){if(a>=t)o.push(e),e.selection&&i++;else if(e.step){var s=e.step.map(n.slice(r)),l=s&&s.getMap();if(r--,l&&n.appendMap(l,r),s){var c=e.selection&&e.selection.map(n.slice(r));c&&i++;var u,d=new Wm(l.invert(),s,c),f=o.length-1;(u=o.length&&o[f].merge(d))?o[f]=u:o.push(d)}}else e.map&&r--}),this.items.length,0),new e(Fm.from(o.reverse()),i)}}])}();Gm.empty=new Gm(Fm.empty,0);var Wm=function(){function e(t,n,r,o){zm(this,e),this.map=t,this.step=n,this.selection=r,this.mirrorOffset=o}return $m(e,[{key:"merge",value:function(t){if(this.step&&t.step&&!t.selection){var n=t.step.merge(this.step);if(n)return new e(n.getMap().invert(),n,this.selection)}}}])}(),qm=$m((function e(t,n,r,o,i){zm(this,e),this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=i})),Km=20;function Zm(e){for(var t=[],n=e.length-1;n>=0&&0==t.length;n--)e[n].forEach((function(e,n,r,o){return t.push(r,o)}));return t}function Jm(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var o=t.map(e[r],1),i=t.map(e[r+1],-1);o<=i&&n.push(o,i)}return n}var Xm=!1,Ym=null;function Qm(e){var t=e.plugins;if(Ym!=t){Xm=!1,Ym=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){Xm=!0;break}}return Xm}var ev=new In("history"),tv=new In("closeHistory");function nv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Pn({key:ev,state:{init:function(){return new qm(Gm.empty,Gm.empty,null,0,-1)},apply:function(t,n,r){return function(e,t,n,r){var o,i=n.getMeta(ev);if(i)return i.historyState;n.getMeta(tv)&&(e=new qm(e.done,e.undone,null,0,-1));var a=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(a&&a.getMeta(ev))return a.getMeta(ev).redo?new qm(e.done.addTransform(n,void 0,r,Qm(t)),e.undone,Zm(n.mapping.maps),e.prevTime,e.prevComposition):new qm(e.done,e.undone.addTransform(n,void 0,r,Qm(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||a&&!1===a.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new qm(e.done.rebased(n,o),e.undone.rebased(n,o),Jm(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new qm(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Jm(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);var s=n.getMeta("composition"),l=0==e.prevTime||!a&&e.prevComposition!=s&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach((function(e,r){for(var o=0;o<t.length;o+=2)e<=t[o+1]&&r>=t[o]&&(n=!0)})),n}(n,e.prevRanges)),c=a?Jm(e.prevRanges,n.mapping):Zm(n.mapping.maps);return new qm(e.done.addTransform(n,l?t.selection.getBookmark():void 0,r,Qm(t)),Gm.empty,c,n.time,null==s?e.prevComposition:s)}(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput:function(e,t){var n=t.inputType,r="historyUndo"==n?ov:"historyRedo"==n?iv:null;return!!r&&(t.preventDefault(),r(e.state,e.dispatch))}}}})}function rv(e,t){return function(n,r){var o=ev.getState(n);if(!o||0==(e?o.undone:o.done).eventCount)return!1;if(r){var i=function(e,t,n){var r=Qm(t),o=ev.get(t).spec.config,i=(n?e.undone:e.done).popEvent(t,r);if(!i)return null;var a=i.selection.resolve(i.transform.doc),s=(n?e.done:e.undone).addTransform(i.transform,t.selection.getBookmark(),o,r),l=new qm(n?s:i.remaining,n?i.remaining:s,null,0,-1);return i.transform.setSelection(a).setMeta(ev,{redo:n,historyState:l})}(o,n,e);i&&r(t?i.scrollIntoView():i)}return!0}}var ov=rv(!1,!0),iv=rv(!0,!0);rv(!1,!1),rv(!0,!1);var av=Fs.create({name:"history",addOptions:function(){return{depth:100,newGroupDelay:500}},addCommands:function(){return{undo:function(){return function(e){var t=e.state,n=e.dispatch;return ov(t,n)}},redo:function(){return function(e){var t=e.state,n=e.dispatch;return iv(t,n)}}}},addProseMirrorPlugins:function(){return[nv(this.options)]},addKeyboardShortcuts:function(){var e=this;return{"Mod-z":function(){return e.editor.commands.undo()},"Shift-Mod-z":function(){return e.editor.commands.redo()},"Mod-y":function(){return e.editor.commands.redo()},"Mod-я":function(){return e.editor.commands.undo()},"Shift-Mod-я":function(){return e.editor.commands.redo()}}}});function sv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return lv(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lv(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function cv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cv=function(){return!!e})()}function uv(e){return uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},uv(e)}function dv(e,t){return dv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dv(e,t)}function fv(e){return fv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fv(e)}function pv(e,t,n){return(t=hv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hv(e){var t=function(e){if("object"!=fv(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=fv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==fv(t)?t:t+""}var mv=function(e,t){for(var n in t)e[n]=t[n];return e},vv="numeric",gv="ascii",yv="alpha",bv="asciinumeric",kv="alphanumeric",wv="domain",xv="emoji",Cv="whitespace";function Sv(e,t){return e in t||(t[e]=[]),t[e]}function _v(e,t,n){for(var r in t[vv]&&(t[bv]=!0,t[kv]=!0),t[gv]&&(t[bv]=!0,t[yv]=!0),t[bv]&&(t[kv]=!0),t[yv]&&(t[kv]=!0),t[kv]&&(t[wv]=!0),t[xv]&&(t[wv]=!0),t){var o=Sv(r,n);o.indexOf(e)<0&&o.push(e)}}function Ev(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.j={},this.jr=[],this.jd=null,this.t=e}Ev.groups={},Ev.prototype={accepts:function(){return!!this.t},go:function(e){var t=this,n=t.j[e];if(n)return n;for(var r=0;r<t.jr.length;r++){var o=t.jr[r][0],i=t.jr[r][1];if(i&&o.test(e))return i}return t.jd},has:function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e in this.j:!!this.go(e)},ta:function(e,t,n,r){for(var o=0;o<e.length;o++)this.tt(e[o],t,n,r)},tr:function(e,t,n,r){var o;return r=r||Ev.groups,t&&t.j?o=t:(o=new Ev(t),n&&r&&_v(t,n,r)),this.jr.push([e,o]),o},ts:function(e,t,n,r){var o=this,i=e.length;if(!i)return o;for(var a=0;a<i-1;a++)o=o.tt(e[a]);return o.tt(e[i-1],t,n,r)},tt:function(e,t,n,r){r=r||Ev.groups;var o=this;if(t&&t.j)return o.j[e]=t,t;var i,a=t,s=o.go(e);if(s?(i=new Ev,mv(i.j,s.j),i.jr.push.apply(i.jr,s.jr),i.jd=s.jd,i.t=s.t):i=new Ev,a){if(r)if(i.t&&"string"==typeof i.t){var l=mv(function(e,t){var n={};for(var r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}(i.t,r),n);_v(a,l,r)}else n&&_v(a,n,r);i.t=a}return o.j[e]=i,i}};var Dv=function(e,t,n,r,o){return e.ta(t,n,r,o)},Mv=function(e,t,n,r,o){return e.tr(t,n,r,o)},Av=function(e,t,n,r,o){return e.ts(t,n,r,o)},Ov=function(e,t,n,r,o){return e.tt(t,n,r,o)},Tv="WORD",jv="UWORD",Nv="ASCIINUMERICAL",Pv="ALPHANUMERICAL",Lv="LOCALHOST",Rv="TLD",Iv="UTLD",Bv="SCHEME",Fv="SLASH_SCHEME",Hv="NUM",zv="WS",Vv="NL",$v="OPENBRACE",Uv="CLOSEBRACE",Gv="OPENBRACKET",Wv="CLOSEBRACKET",qv="OPENPAREN",Kv="CLOSEPAREN",Zv="OPENANGLEBRACKET",Jv="CLOSEANGLEBRACKET",Xv="FULLWIDTHLEFTPAREN",Yv="FULLWIDTHRIGHTPAREN",Qv="LEFTCORNERBRACKET",eg="RIGHTCORNERBRACKET",tg="LEFTWHITECORNERBRACKET",ng="RIGHTWHITECORNERBRACKET",rg="FULLWIDTHLESSTHAN",og="FULLWIDTHGREATERTHAN",ig="AMPERSAND",ag="APOSTROPHE",sg="ASTERISK",lg="AT",cg="BACKSLASH",ug="BACKTICK",dg="CARET",fg="COLON",pg="COMMA",hg="DOLLAR",mg="DOT",vg="EQUALS",gg="EXCLAMATION",yg="HYPHEN",bg="PERCENT",kg="PIPE",wg="PLUS",xg="POUND",Cg="QUERY",Sg="QUOTE",_g="FULLWIDTHMIDDLEDOT",Eg="SEMI",Dg="SLASH",Mg="TILDE",Ag="UNDERSCORE",Og="EMOJI",Tg="SYM",jg=Object.freeze({__proto__:null,WORD:Tv,UWORD:jv,ASCIINUMERICAL:Nv,ALPHANUMERICAL:Pv,LOCALHOST:Lv,TLD:Rv,UTLD:Iv,SCHEME:Bv,SLASH_SCHEME:Fv,NUM:Hv,WS:zv,NL:Vv,OPENBRACE:$v,CLOSEBRACE:Uv,OPENBRACKET:Gv,CLOSEBRACKET:Wv,OPENPAREN:qv,CLOSEPAREN:Kv,OPENANGLEBRACKET:Zv,CLOSEANGLEBRACKET:Jv,FULLWIDTHLEFTPAREN:Xv,FULLWIDTHRIGHTPAREN:Yv,LEFTCORNERBRACKET:Qv,RIGHTCORNERBRACKET:eg,LEFTWHITECORNERBRACKET:tg,RIGHTWHITECORNERBRACKET:ng,FULLWIDTHLESSTHAN:rg,FULLWIDTHGREATERTHAN:og,AMPERSAND:ig,APOSTROPHE:ag,ASTERISK:sg,AT:lg,BACKSLASH:cg,BACKTICK:ug,CARET:dg,COLON:fg,COMMA:pg,DOLLAR:hg,DOT:mg,EQUALS:vg,EXCLAMATION:gg,HYPHEN:yg,PERCENT:bg,PIPE:kg,PLUS:wg,POUND:xg,QUERY:Cg,QUOTE:Sg,FULLWIDTHMIDDLEDOT:_g,SEMI:Eg,SLASH:Dg,TILDE:Mg,UNDERSCORE:Ag,EMOJI:Og,SYM:Tg}),Ng=/[a-z]/,Pg=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])/,Lg=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDC-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9\uDEF0-\uDEF8])/,Rg=/\d/,Ig=/\s/,Bg=null,Fg=null;function Hg(e,t){for(var n=function(e){for(var t=[],n=e.length,r=0;r<n;){var o=e.charCodeAt(r),i=void 0,a=o<55296||o>56319||r+1===n||(i=e.charCodeAt(r+1))<56320||i>57343?e[r]:e.slice(r,r+2);t.push(a),r+=a.length}return t}(t.replace(/[A-Z]/g,(function(e){return e.toLowerCase()}))),r=n.length,o=[],i=0,a=0;a<r;){for(var s=e,l=null,c=0,u=null,d=-1,f=-1;a<r&&(l=s.go(n[a]));)(s=l).accepts()?(d=0,f=0,u=s):d>=0&&(d+=n[a].length,f++),c+=n[a].length,i+=n[a].length,a++;i-=d,a-=f,c-=d,o.push({t:u.t,v:t.slice(i-c,i),s:i-c,e:i})}return o}function zg(e,t,n,r,o){for(var i,a=t.length,s=0;s<a-1;s++){var l=t[s];e.j[l]?i=e.j[l]:((i=new Ev(r)).jr=o.slice(),e.j[l]=i),e=i}return(i=new Ev(n)).jr=o.slice(),e.j[t[a-1]]=i,i}function Vg(e){for(var t=[],n=[],r=0;r<e.length;){for(var o=0;"0123456789".indexOf(e[r+o])>=0;)o++;if(o>0){t.push(n.join(""));for(var i=parseInt(e.substring(r,r+o),10);i>0;i--)n.pop();r+=o}else n.push(e[r]),r++}return t}var $g={defaultProtocol:"http",events:null,format:Gg,formatHref:Gg,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Ug(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=mv({},$g);e&&(n=mv(n,e instanceof Ug?e.o:e));for(var r=n.ignoreTags,o=[],i=0;i<r.length;i++)o.push(r[i].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=o}function Gg(e){return e}function Wg(e,t){this.t="token",this.v=e,this.tk=t}function qg(e,t){var n=function(t){function n(t,r){var o,i,a,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=this,a=n,s=[t,r],a=uv(a),o=function(e,t){if(t&&("object"==fv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(i,cv()?Reflect.construct(a,s||[],uv(i).constructor):a.apply(i,s))).t=e,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dv(e,t)}(n,t),r=n,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(Wg);for(var r in t)n.prototype[r]=t[r];return n.t=e,n}Ug.prototype={o:$g,ignoreTags:[],defaultRender:function(e){return e},check:function(e){return this.get("validate",e.toString(),e)},get:function(e,t,n){var r=null!=t,o=this.o[e];return o?("object"===fv(o)?"function"==typeof(o=n.t in o?o[n.t]:$g[e])&&r&&(o=o(t,n)):"function"==typeof o&&r&&(o=o(t,n.t,n)),o):o},getObj:function(e,t,n){var r=this.o[e];return"function"==typeof r&&null!=t&&(r=r(t,n.t,n)),r},render:function(e){var t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}},Wg.prototype={isLink:!1,toString:function(){return this.v},toHref:function(e){return this.toString()},toFormattedString:function(e){var t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"…":r},toFormattedHref:function(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex:function(){return this.tk[0].s},endIndex:function(){return this.tk[this.tk.length-1].e},toObject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$g.defaultProtocol;return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject:function(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate:function(e){return e.get("validate",this.toString(),this)},render:function(e){var t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),o=e.get("tagName",n,t),i=this.toFormattedString(e),a={},s=e.get("className",n,t),l=e.get("target",n,t),c=e.get("rel",n,t),u=e.getObj("attributes",n,t),d=e.getObj("events",n,t);return a.href=r,s&&(a.class=s),l&&(a.target=l),c&&(a.rel=c),u&&mv(a,u),{tagName:o,attributes:a,content:i,eventListeners:d}}};var Kg=qg("email",{isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),Zg=qg("text"),Jg=qg("nl"),Xg=qg("url",{isLink:!0,toHref:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$g.defaultProtocol;return this.hasProtocol()?this.v:"".concat(e,"://").concat(this.v)},hasProtocol:function(){var e=this.tk;return e.length>=2&&e[0].t!==Lv&&e[1].t===fg}}),Yg=function(e){return new Ev(e)};function Qg(e,t,n){var r=n[0].s,o=n[n.length-1].e;return new e(t.slice(r,o),n)}var ey="undefined"!=typeof console&&console&&console.warn||function(){},ty={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function ny(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(ty.initialized&&ey('linkifyjs: already initialized - will not register custom scheme "'.concat(e,'" ').concat("until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.")),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error('linkifyjs: incorrect scheme format.\n1. Must only contain digits, lowercase ASCII letters or "-"\n2. Cannot start or end with "-"\n3. "-" cannot repeat');ty.customSchemes.push([e,t])}function ry(e){return ty.initialized||function(){ty.scanner=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};Ev.groups=t;var n=new Ev;null==Bg&&(Bg=Vg("aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2")),null==Fg&&(Fg=Vg("ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2")),Ov(n,"'",ag),Ov(n,"{",$v),Ov(n,"}",Uv),Ov(n,"[",Gv),Ov(n,"]",Wv),Ov(n,"(",qv),Ov(n,")",Kv),Ov(n,"<",Zv),Ov(n,">",Jv),Ov(n,"（",Xv),Ov(n,"）",Yv),Ov(n,"「",Qv),Ov(n,"」",eg),Ov(n,"『",tg),Ov(n,"』",ng),Ov(n,"＜",rg),Ov(n,"＞",og),Ov(n,"&",ig),Ov(n,"*",sg),Ov(n,"@",lg),Ov(n,"`",ug),Ov(n,"^",dg),Ov(n,":",fg),Ov(n,",",pg),Ov(n,"$",hg),Ov(n,".",mg),Ov(n,"=",vg),Ov(n,"!",gg),Ov(n,"-",yg),Ov(n,"%",bg),Ov(n,"|",kg),Ov(n,"+",wg),Ov(n,"#",xg),Ov(n,"?",Cg),Ov(n,'"',Sg),Ov(n,"/",Dg),Ov(n,";",Eg),Ov(n,"~",Mg),Ov(n,"_",Ag),Ov(n,"\\",cg),Ov(n,"・",_g);var r=Mv(n,Rg,Hv,pv({},vv,!0));Mv(r,Rg,r);var o=Mv(r,Ng,Nv,pv({},bv,!0)),i=Mv(r,Pg,Pv,pv({},kv,!0)),a=Mv(n,Ng,Tv,pv({},gv,!0));Mv(a,Rg,o),Mv(a,Ng,a),Mv(o,Rg,o),Mv(o,Ng,o);var s=Mv(n,Pg,jv,pv({},yv,!0));Mv(s,Ng),Mv(s,Rg,i),Mv(s,Pg,s),Mv(i,Rg,i),Mv(i,Ng),Mv(i,Pg,i);var l=Ov(n,"\n",Vv,pv({},Cv,!0)),c=Ov(n,"\r",zv,pv({},Cv,!0)),u=Mv(n,Ig,zv,pv({},Cv,!0));Ov(n,"￼",u),Ov(c,"\n",l),Ov(c,"￼",u),Mv(c,Ig,u),Ov(u,"\r"),Ov(u,"\n"),Mv(u,Ig,u),Ov(u,"￼",u);var d=Mv(n,Lg,Og,pv({},xv,!0));Ov(d,"#"),Mv(d,Lg,d),Ov(d,"️",d);var f=Ov(d,"‍");Ov(f,"#"),Mv(f,Lg,d);for(var p=[[Ng,a],[Rg,o]],h=[[Ng,null],[Pg,s],[Rg,i]],m=0;m<Bg.length;m++)zg(n,Bg[m],Rv,Tv,p);for(var v=0;v<Fg.length;v++)zg(n,Fg[v],Iv,jv,h);_v(Rv,{tld:!0,ascii:!0},t),_v(Iv,{utld:!0,alpha:!0},t),zg(n,"file",Bv,Tv,p),zg(n,"mailto",Bv,Tv,p),zg(n,"http",Fv,Tv,p),zg(n,"https",Fv,Tv,p),zg(n,"ftp",Fv,Tv,p),zg(n,"ftps",Fv,Tv,p),_v(Bv,{scheme:!0,ascii:!0},t),_v(Fv,{slashscheme:!0,ascii:!0},t),e=e.sort((function(e,t){return e[0]>t[0]?1:-1}));for(var g=0;g<e.length;g++){var y=e[g][0],b=pv({},e[g][1]?"scheme":"slashscheme",!0);y.indexOf("-")>=0?b[wv]=!0:Ng.test(y)?Rg.test(y)?b[bv]=!0:b[gv]=!0:b[vv]=!0,Av(n,y,y,b)}return Av(n,"localhost",Lv,{ascii:!0}),n.jd=new Ev(Tg),{start:n,tokens:mv({groups:t},jg)}}(ty.customSchemes);for(var e=0;e<ty.tokenQueue.length;e++)ty.tokenQueue[e][1]({scanner:ty.scanner});ty.parser=function(e){var t=e.groups,n=t.domain.concat([ig,sg,lg,cg,ug,dg,hg,vg,yg,Hv,bg,kg,wg,xg,Dg,Tg,Mg,Ag]),r=[fg,pg,mg,gg,bg,Cg,Sg,Eg,Zv,Jv,$v,Uv,Wv,Gv,qv,Kv,Xv,Yv,Qv,eg,tg,ng,rg,og],o=[ig,ag,sg,cg,ug,dg,hg,vg,yg,$v,Uv,bg,kg,wg,xg,Cg,Dg,Tg,Mg,Ag],i=Yg(),a=Ov(i,Mg);Dv(a,o,a),Dv(a,t.domain,a);var s=Yg(),l=Yg(),c=Yg();Dv(i,t.domain,s),Dv(i,t.scheme,l),Dv(i,t.slashscheme,c),Dv(s,o,a),Dv(s,t.domain,s);var u=Ov(s,lg);Ov(a,lg,u),Ov(l,lg,u),Ov(c,lg,u);var d=Ov(a,mg);Dv(d,o,a),Dv(d,t.domain,a);var f=Yg();Dv(u,t.domain,f),Dv(f,t.domain,f);var p=Ov(f,mg);Dv(p,t.domain,f);var h=Yg(Kg);Dv(p,t.tld,h),Dv(p,t.utld,h),Ov(u,Lv,h);var m=Ov(f,yg);Ov(m,yg,m),Dv(m,t.domain,f),Dv(h,t.domain,f),Ov(h,mg,p),Ov(h,yg,m);var v=Ov(h,fg);Dv(v,t.numeric,Kg);var g=Ov(s,yg),y=Ov(s,mg);Ov(g,yg,g),Dv(g,t.domain,s),Dv(y,o,a),Dv(y,t.domain,s);var b=Yg(Xg);Dv(y,t.tld,b),Dv(y,t.utld,b),Dv(b,t.domain,s),Dv(b,o,a),Ov(b,mg,y),Ov(b,yg,g),Ov(b,lg,u);var k=Ov(b,fg),w=Yg(Xg);Dv(k,t.numeric,w);var x=Yg(Xg),C=Yg();Dv(x,n,x),Dv(x,r,C),Dv(C,n,x),Dv(C,r,C),Ov(b,Dg,x),Ov(w,Dg,x);var S=Ov(l,fg),_=Ov(c,fg),E=Ov(_,Dg),D=Ov(E,Dg);Dv(l,t.domain,s),Ov(l,mg,y),Ov(l,yg,g),Dv(c,t.domain,s),Ov(c,mg,y),Ov(c,yg,g),Dv(S,t.domain,x),Ov(S,Dg,x),Ov(S,Cg,x),Dv(D,t.domain,x),Dv(D,n,x),Ov(D,Dg,x);for(var M=[[$v,Uv],[Gv,Wv],[qv,Kv],[Zv,Jv],[Xv,Yv],[Qv,eg],[tg,ng],[rg,og]],A=0;A<M.length;A++){var O=sv(M[A],2),T=O[0],j=O[1],N=Ov(x,T);Ov(C,T,N),Ov(N,j,x);var P=Yg(Xg);Dv(N,n,P);var L=Yg();Dv(N,r),Dv(P,n,P),Dv(P,r,L),Dv(L,n,P),Dv(L,r,L),Ov(P,j,x),Ov(L,j,x)}return Ov(i,Lv,b),Ov(i,Vv,Jg),{start:i,tokens:jg}}(ty.scanner.tokens);for(var t=0;t<ty.pluginQueue.length;t++)ty.pluginQueue[t][1]({scanner:ty.scanner,parser:ty.parser});ty.initialized=!0}(),function(e,t,n){for(var r=n.length,o=0,i=[],a=[];o<r;){for(var s=e,l=null,c=null,u=0,d=null,f=-1;o<r&&!(l=s.go(n[o].t));)a.push(n[o++]);for(;o<r&&(c=l||s.go(n[o].t));)l=null,(s=c).accepts()?(f=0,d=s):f>=0&&f++,o++,u++;if(f<0)(o-=u)<r&&(a.push(n[o]),o++);else{a.length>0&&(i.push(Qg(Zg,t,a)),a=[]),o-=f,u-=f;var p=d.t,h=n.slice(o-u,o);i.push(Qg(p,t,h))}}return a.length>0&&i.push(Qg(Zg,t,a)),i}(ty.parser.start,e,Hg(ty.scanner.start,e))}function oy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t&&"object"===fv(t)){if(n)throw Error("linkifyjs: Invalid link type ".concat(t,"; must be a string"));n=t,t=null}for(var r=new Ug(n),o=ry(e),i=[],a=0;a<o.length;a++){var s=o[a];!s.isLink||t&&s.t!==t||!r.check(s)||i.push(s.toFormattedObject(r))}return i}function iy(e){return iy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iy(e)}function ay(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ay(Object(n),!0).forEach((function(t){ly(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ay(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ly(e,t,n){return(t=function(e){var t=function(e){if("object"!=iy(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=iy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==iy(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}ry.scan=Hg;var uy=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function dy(e,t){var n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach((function(e){var t="string"==typeof e?e:e.scheme;t&&n.push(t)})),!e||e.replace(uy,"").match(new RegExp("^(?:(?:".concat(n.join("|"),"):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))"),"i"))}var fy=Ps.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate:function(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach((function(e){"string"!=typeof e?ny(e.scheme,e.optionalSlashes):ny(e)}))},onDestroy:function(){Ev.groups={},ty.scanner=null,ty.parser=null,ty.tokenQueue=[],ty.pluginQueue=[],ty.customSchemes=[],ty.initialized=!1},inclusive:function(){return this.options.autolink},addOptions:function(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:function(e,t){return!!dy(e,t.protocols)},validate:function(e){return!!e},shouldAutoLink:function(e){return!!e}}},addAttributes:function(){return{href:{default:null,parseHTML:function(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML:function(){var e=this;return[{tag:"a[href]",getAttrs:function(t){var n=t.getAttribute("href");return!(!n||!e.options.isAllowedUri(n,{defaultValidate:function(t){return!!dy(t,e.options.protocols)},protocols:e.options.protocols,defaultProtocol:e.options.defaultProtocol}))&&null}}]},renderHTML:function(e){var t=this,n=e.HTMLAttributes;return this.options.isAllowedUri(n.href,{defaultValidate:function(e){return!!dy(e,t.options.protocols)},protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",ys(this.options.HTMLAttributes,n),0]:["a",ys(this.options.HTMLAttributes,sy(sy({},n),{},{href:""})),0]},addCommands:function(){var e=this;return{setLink:function(t){return function(n){var r=n.chain,o=t.href;return!!e.options.isAllowedUri(o,{defaultValidate:function(t){return!!dy(t,e.options.protocols)},protocols:e.options.protocols,defaultProtocol:e.options.defaultProtocol})&&r().setMark(e.name,t).setMeta("preventAutolink",!0).run()}},toggleLink:function(t){return function(n){var r=n.chain,o=t.href;return!!e.options.isAllowedUri(o,{defaultValidate:function(t){return!!dy(t,e.options.protocols)},protocols:e.options.protocols,defaultProtocol:e.options.defaultProtocol})&&r().toggleMark(e.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},unsetLink:function(){return function(t){return(0,t.chain)().unsetMark(e.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}}}},addPasteRules:function(){var e=this;return[Fl({find:function(t){var n=[];if(t){var r=e.options,o=r.protocols,i=r.defaultProtocol,a=oy(t).filter((function(t){return t.isLink&&e.options.isAllowedUri(t.value,{defaultValidate:function(e){return!!dy(e,o)},protocols:o,defaultProtocol:i})}));a.length&&a.forEach((function(e){return n.push({text:e.value,data:{href:e.href},index:e.start})}))}return n},type:this.type,getAttributes:function(e){var t;return{href:null===(t=e.data)||void 0===t?void 0:t.href}}})]},addProseMirrorPlugins:function(){var e=this,t=[],n=this.options,r=n.protocols,o=n.defaultProtocol;return this.options.autolink&&t.push(function(e){return new Pn({key:new In("autolink"),appendTransaction:function(t,n,r){var o=t.some((function(e){return e.docChanged}))&&!n.doc.eq(r.doc),i=t.some((function(e){return e.getMeta("preventAutolink")}));if(o&&!i){var a=r.tr;if(hl(cl(n.doc,function(e){return function(e){if(Array.isArray(e))return cy(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return cy(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cy(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t))).forEach((function(t){var n,o,i,s=t.newRange,l=dl(r.doc,s,(function(e){return e.isTextblock}));if(l.length>1?(n=l[0],o=r.doc.textBetween(n.pos,n.pos+n.node.nodeSize,void 0," ")):l.length&&r.doc.textBetween(s.from,s.to," "," ").endsWith(" ")&&(n=l[0],o=r.doc.textBetween(n.pos,s.to,void 0," ")),n&&o){var c=o.split(" ").filter((function(e){return""!==e}));if(c.length<=0)return!1;var u=c[c.length-1],d=n.pos+o.lastIndexOf(u);if(!u)return!1;var f=ry(u).map((function(t){return t.toObject(e.defaultProtocol)}));if(!(1===(i=f).length?i[0].isLink:3===i.length&&i[1].isLink&&["()","[]"].includes(i[0].value+i[2].value)))return!1;f.filter((function(e){return e.isLink})).map((function(e){return sy(sy({},e),{},{from:d+e.start+1,to:d+e.end+1})})).filter((function(e){return!r.schema.marks.code||!r.doc.rangeHasMark(e.from,e.to,r.schema.marks.code)})).filter((function(t){return e.validate(t.value)})).filter((function(t){return e.shouldAutoLink(t.value)})).forEach((function(t){ml(t.from,t.to,r.doc).some((function(t){return t.mark.type===e.type}))||a.addMark(t.from,t.to,e.type.create({href:t.href}))}))}})),a.steps.length)return a}}})}({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:function(t){return e.options.isAllowedUri(t,{defaultValidate:function(e){return!!dy(e,r)},protocols:r,defaultProtocol:o})},shouldAutoLink:this.options.shouldAutoLink})),!0===this.options.openOnClick&&t.push(function(e){return new Pn({key:new In("handleClickLink"),props:{handleClick:function(t,n,r){var o,i;if(0!==r.button)return!1;if(!t.editable)return!1;for(var a=r.target,s=[];"DIV"!==a.nodeName;)s.push(a),a=a.parentNode;if(!s.find((function(e){return"A"===e.nodeName})))return!1;var l=pl(t.state,e.type.name),c=r.target,u=null!==(o=null==c?void 0:c.href)&&void 0!==o?o:l.href,d=null!==(i=null==c?void 0:c.target)&&void 0!==i?i:l.target;return!(!c||!u||(window.open(u,d),0))}}})}({type:this.type})),this.options.linkOnPaste&&t.push(function(e){return new Pn({key:new In("handlePasteLink"),props:{handlePaste:function(t,n,r){if(t.state.selection.empty)return!1;var o="";r.content.forEach((function(e){o+=e.textContent}));var i=oy(o,{defaultProtocol:e.defaultProtocol}).find((function(e){return e.isLink&&e.value===o}));return!(!o||!i)&&e.editor.commands.setMark(e.type,{href:i.href})}}})}({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),py=Il.create({name:"text",group:"inline"}),hy=new In("y-sync"),my=new In("y-undo"),vy=new In("yjs-cursor"),gy=Math.floor,yy=(Math.ceil,Math.abs),by=(Math.imul,Math.round,Math.log10,Math.log2,Math.log,Math.sqrt,function(e,t){return e<t?e:t}),ky=function(e,t){return e>t?e:t},wy=(Number.isNaN,Math.pow,Math.sign,function(e){return 0!==e?e<0:1/e<0});function xy(e){return xy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xy(e)}var Cy=Object.assign,Sy=Object.keys,_y=function(e){return Sy(e).length},Ey=Object.freeze,Dy=function(e){for(var t in e){var n=e[t];"object"!==xy(n)&&"function"!=typeof n||Dy(e[t])}return Ey(e)},My=function(){return new Set},Ay=/[\uD800-\uDBFF]/,Oy=/[\uDC00-\uDFFF]/,Ty=function(e){return new Error(e)},jy=function(){throw Ty("Method unimplemented")},Ny=function(){throw Ty("Unexpected case")};function Py(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||Ry(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ly(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ry(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Ry(e,t){if(e){if("string"==typeof e)return Iy(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Iy(e,t):void 0}}function Iy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var By=function(){return new Map},Fy=function(e){var t=By();return e.forEach((function(e,n){t.set(n,e)})),t},Hy=function(e,t,n){var r=e.get(t);return void 0===r&&e.set(t,r=n()),r},zy=function(e){return e[e.length-1]},Vy=function(e,t){for(var n=0;n<t.length;n++)e.push(t[n])},$y=Array.from,Uy=Array.isArray;function Gy(e){return Gy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gy(e)}function Wy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function qy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ky(r.key),r)}}function Ky(e){var t=function(e){if("object"!=Gy(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Gy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Gy(t)?t:t+""}var Zy=function(){return function(e,t,n){return t&&qy(e.prototype,t),n&&qy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._observers=By()}),[{key:"on",value:function(e,t){return Hy(this._observers,e,My).add(t),t}},{key:"once",value:function(e,t){var n=this,r=function(){n.off(e,r),t.apply(void 0,arguments)};this.on(e,r)}},{key:"off",value:function(e,t){var n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}},{key:"emit",value:function(e,t){return $y((this._observers.get(e)||By()).values()).forEach((function(e){return e.apply(void 0,function(e){return function(e){if(Array.isArray(e))return Wy(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Wy(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wy(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t))}))}},{key:"destroy",value:function(){this._observers=By()}}])}(),Jy=64,Xy=128,Yy=127,Qy=Number.MAX_SAFE_INTEGER,eb=(Number.MIN_SAFE_INTEGER,Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&gy(e)===e}),tb=(Number.isNaN,Number.parseInt,String.fromCharCode),nb=(String.fromCodePoint,tb(65535),/^\s*/g),rb=/([A-Z])/g,ob=function(e,t){return function(e){return e.replace(nb,"")}(e.replace(rb,(function(e){return"".concat(t).concat(function(e){return e.toLowerCase()}(e))})))},ib="undefined"!=typeof TextEncoder?new TextEncoder:null,ab=ib?function(e){return ib.encode(e)}:function(e){for(var t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=t.codePointAt(o);return r},sb="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});function lb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lb=function(){return!!e})()}function cb(e){return cb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cb(e)}function ub(e,t){return ub=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ub(e,t)}function db(e){return db="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},db(e)}function fb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hb(r.key),r)}}function pb(e,t,n){return t&&fb(e.prototype,t),n&&fb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function hb(e){var t=function(e){if("object"!=db(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=db(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==db(t)?t:t+""}function mb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}sb&&1===sb.decode(new Uint8Array).length&&(sb=null);var vb=pb((function e(){mb(this,e),this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]})),gb=function(){return new vb},yb=function(e){for(var t=new Uint8Array(function(e){for(var t=e.cpos,n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t}(e)),n=0,r=0;r<e.bufs.length;r++){var o=e.bufs[r];t.set(o,n),n+=o.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},bb=function(e,t){var n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},kb=bb,wb=function(e,t){for(;t>Yy;)bb(e,Xy|Yy&t),t=gy(t/128);bb(e,Yy&t)},xb=function(e,t){var n=wy(t);for(n&&(t=-t),bb(e,(t>63?Xy:0)|(n?Jy:0)|63&t),t=gy(t/64);t>0;)bb(e,(t>Yy?Xy:0)|Yy&t),t=gy(t/128)},Cb=new Uint8Array(3e4),Sb=Cb.length/3,_b=ib&&ib.encodeInto?function(e,t){if(t.length<Sb){var n=ib.encodeInto(t,Cb).written||0;wb(e,n);for(var r=0;r<n;r++)bb(e,Cb[r])}else Db(e,ab(t))}:function(e,t){var n=unescape(encodeURIComponent(t)),r=n.length;wb(e,r);for(var o=0;o<r;o++)bb(e,n.codePointAt(o))},Eb=function(e,t){var n=e.cbuf.length,r=e.cpos,o=by(n-r,t.length),i=t.length-o;e.cbuf.set(t.subarray(0,o),r),e.cpos+=o,i>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(ky(2*n,i)),e.cbuf.set(t.subarray(o)),e.cpos=i)},Db=function(e,t){wb(e,t.byteLength),Eb(e,t)},Mb=function(e,t){!function(e,t){var n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*ky(n,t)),e.cpos=0)}(e,t);var n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},Ab=new DataView(new ArrayBuffer(4)),Ob=function(e,t){switch(db(t)){case"string":bb(e,119),_b(e,t);break;case"number":eb(t)&&yy(t)<=2147483647?(bb(e,125),xb(e,t)):(a=t,Ab.setFloat32(0,a),Ab.getFloat32(0)===a?(bb(e,124),function(e,t){Mb(e,4).setFloat32(0,t,!1)}(e,t)):(bb(e,123),function(e,t){Mb(e,8).setFloat64(0,t,!1)}(e,t)));break;case"bigint":bb(e,122),function(e,t){Mb(e,8).setBigInt64(0,t,!1)}(e,t);break;case"object":if(null===t)bb(e,126);else if(Uy(t)){bb(e,117),wb(e,t.length);for(var n=0;n<t.length;n++)Ob(e,t[n])}else if(t instanceof Uint8Array)bb(e,116),Db(e,t);else{bb(e,118);var r=Object.keys(t);wb(e,r.length);for(var o=0;o<r.length;o++){var i=r[o];_b(e,i),Ob(e,t[i])}}break;case"boolean":bb(e,t?120:121);break;default:bb(e,127)}var a},Tb=function(e){function t(e){var n,r,o,i;return mb(this,t),(r=this,o=t,o=cb(o),n=function(e,t){if(t&&("object"==db(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(r,lb()?Reflect.construct(o,i||[],cb(r).constructor):o.apply(r,i))).w=e,n.s=null,n.count=0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ub(e,t)}(t,e),pb(t,[{key:"write",value:function(e){this.s===e?this.count++:(this.count>0&&wb(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}])}(vb),jb=function(e){e.count>0&&(xb(e.encoder,1===e.count?e.s:-e.s),e.count>1&&wb(e.encoder,e.count-2))},Nb=function(){return pb((function e(){mb(this,e),this.encoder=new vb,this.s=0,this.count=0}),[{key:"write",value:function(e){this.s===e?this.count++:(jb(this),this.count=1,this.s=e)}},{key:"toUint8Array",value:function(){return jb(this),yb(this.encoder)}}])}(),Pb=function(e){if(e.count>0){var t=2*e.diff+(1===e.count?0:1);xb(e.encoder,t),e.count>1&&wb(e.encoder,e.count-2)}},Lb=function(){return pb((function e(){mb(this,e),this.encoder=new vb,this.s=0,this.count=0,this.diff=0}),[{key:"write",value:function(e){this.diff===e-this.s?(this.s=e,this.count++):(Pb(this),this.count=1,this.diff=e-this.s,this.s=e)}},{key:"toUint8Array",value:function(){return Pb(this),yb(this.encoder)}}])}(),Rb=function(){return pb((function e(){mb(this,e),this.sarr=[],this.s="",this.lensE=new Nb}),[{key:"write",value:function(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}},{key:"toUint8Array",value:function(){var e=new vb;return this.sarr.push(this.s),this.s="",_b(e,this.sarr.join("")),Eb(e,this.lensE.toUint8Array()),yb(e)}}])}();function Ib(e){return Ib="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ib(e)}function Bb(e,t,n){return t=Hb(t),function(e,t){if(t&&("object"==Ib(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Fb()?Reflect.construct(t,n||[],Hb(e).constructor):t.apply(e,n))}function Fb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fb=function(){return!!e})()}function Hb(e){return Hb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hb(e)}function zb(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vb(e,t)}function Vb(e,t){return Vb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vb(e,t)}function $b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gb(r.key),r)}}function Ub(e,t,n){return t&&$b(e.prototype,t),n&&$b(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gb(e){var t=function(e){if("object"!=Ib(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ib(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ib(t)?t:t+""}function Wb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var qb=Ty("Unexpected end of array"),Kb=Ty("Integer out of Range"),Zb=Ub((function e(t){Wb(this,e),this.arr=t,this.pos=0})),Jb=function(e){return new Zb(e)},Xb=function(e){return function(e,t){var n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n}(e,Qb(e))},Yb=function(e){return e.arr[e.pos++]},Qb=function(e){for(var t=0,n=1,r=e.arr.length;e.pos<r;){var o=e.arr[e.pos++];if(t+=(o&Yy)*n,n*=128,o<Xy)return t;if(t>Qy)throw Kb}throw qb},ek=function(e){var t=e.arr[e.pos++],n=63&t,r=64,o=(t&Jy)>0?-1:1;if(!(t&Xy))return o*n;for(var i=e.arr.length;e.pos<i;){if(n+=((t=e.arr[e.pos++])&Yy)*r,r*=128,t<Xy)return o*n;if(n>Qy)throw Kb}throw qb},tk=sb?function(e){return sb.decode(Xb(e))}:function(e){var t=Qb(e);if(0===t)return"";var n=String.fromCodePoint(Yb(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(Yb(e));else for(;t>0;){var r=t<1e4?t:1e4,o=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,o),t-=r}return decodeURIComponent(escape(n))},nk=function(e,t){var n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},rk=[function(e){},function(e){return null},ek,function(e){return nk(e,4).getFloat32(0,!1)},function(e){return nk(e,8).getFloat64(0,!1)},function(e){return nk(e,8).getBigInt64(0,!1)},function(e){return!1},function(e){return!0},tk,function(e){for(var t=Qb(e),n={},r=0;r<t;r++)n[tk(e)]=ok(e);return n},function(e){for(var t=Qb(e),n=[],r=0;r<t;r++)n.push(ok(e));return n},Xb],ok=function(e){return rk[127-Yb(e)](e)},ik=function(e){function t(e,n){var r;return Wb(this,t),(r=Bb(this,t,[e])).reader=n,r.s=null,r.count=0,r}return zb(t,e),Ub(t,[{key:"read",value:function(){return 0===this.count&&(this.s=this.reader(this),(e=this).pos!==e.arr.length?this.count=Qb(this)+1:this.count=-1),this.count--,this.s;var e}}])}(Zb),ak=function(e){function t(e){var n;return Wb(this,t),(n=Bb(this,t,[e])).s=0,n.count=0,n}return zb(t,e),Ub(t,[{key:"read",value:function(){if(0===this.count){this.s=ek(this);var e=wy(this.s);this.count=1,e&&(this.s=-this.s,this.count=Qb(this)+2)}return this.count--,this.s}}])}(Zb),sk=function(e){function t(e){var n;return Wb(this,t),(n=Bb(this,t,[e])).s=0,n.count=0,n.diff=0,n}return zb(t,e),Ub(t,[{key:"read",value:function(){if(0===this.count){var e=ek(this),t=1&e;this.diff=gy(e/2),this.count=1,t&&(this.count=Qb(this)+2)}return this.s+=this.diff,this.count--,this.s}}])}(Zb),lk=function(){return Ub((function e(t){Wb(this,e),this.decoder=new ak(t),this.str=tk(this.decoder),this.spos=0}),[{key:"read",value:function(){var e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}])}(),ck=(crypto.subtle,crypto.getRandomValues.bind(crypto)),uk=Math.random,dk=function(){return ck(new Uint32Array(1))[0]},fk=[1e7]+-1e3+-4e3+-8e3+-1e11,pk=function(){return fk.replace(/[018]/g,(function(e){return(e^dk()&15>>e/4).toString(16)}))},hk=function(e){return new Promise(e)};function mk(e){return function(e){if(Array.isArray(e))return vk(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return vk(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vk(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Promise.all.bind(Promise);var gk=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{for(;n<e.length;n++)e[n].apply(e,mk(t))}finally{n<e.length&&gk(e,t,n+1)}};function yk(e){return yk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yk(e)}function bk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kk(r.key),r)}}function kk(e){var t=function(e){if("object"!=yk(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=yk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==yk(t)?t:t+""}var wk=function(){return function(e,t){return t&&bk(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=new Map}),[{key:"setItem",value:function(e,t){this.map.set(e,t)}},{key:"getItem",value:function(e){return this.map.get(e)}}])}(),xk=new wk;try{"undefined"!=typeof localStorage&&localStorage&&(xk=localStorage)}catch(e){}var Ck=xk;function Sk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _k(e){return _k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_k(e)}var Ek,Dk,Mk="undefined"!=typeof process&&process.release&&/node|io\.js/.test(process.release.name)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0),Ak="undefined"!=typeof window&&"undefined"!=typeof document&&!Mk,Ok=("undefined"!=typeof navigator&&/Mac/.test(navigator.platform),[]),Tk=function(){if(void 0===Ek)if(Mk){Ek=By();for(var e=process.argv,t=null,n=0;n<e.length;n++){var r=e[n];"-"===r[0]?(null!==t&&Ek.set(t,""),t=r):null!==t?(Ek.set(t,r),t=null):Ok.push(r)}null!==t&&Ek.set(t,"")}else"object"===("undefined"==typeof location?"undefined":_k(location))?(Ek=By(),(location.search||"?").slice(1).split("&").forEach((function(e){if(0!==e.length){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Sk(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sk(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.split("="),2),n=t[0],r=t[1];Ek.set("--".concat(ob(n,"-")),r),Ek.set("-".concat(ob(n,"-")),r)}}))):Ek=By();return Ek},jk=function(e){return Tk().has(e)},Nk=function(e){return function(e){return void 0===e?null:e}(Mk?process.env[e.toUpperCase().replaceAll("-","_")]:Ck.getItem(e))},Pk=function(e){return jk("--"+e)||null!==Nk(e)},Lk=(Pk("production"),Mk&&(Dk=process.env.FORCE_COLOR,["true","1","2"].includes(Dk)))||!jk("--no-colors")&&!Pk("no-color")&&(!Mk||process.stdout.isTTY)&&(!Mk||jk("--color")||null!==Nk("COLORTERM")||(Nk("TERM")||"").includes("color"));function Rk(e){return Rk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rk(e)}function Ik(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fk(r.key),r)}}function Bk(e,t,n){return t&&Ik(e.prototype,t),n&&Ik(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fk(e){var t=function(e){if("object"!=Rk(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Rk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Rk(t)?t:t+""}var Hk=Bk((function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.left=t,this.right=n})),zk=function(e,t){return new Hk(e,t)},Vk="undefined"!=typeof document?document:{},$k=("undefined"!=typeof DOMParser&&new DOMParser,function(e){return function(e,t){var n,r=[],o=Ly(e);try{for(o.s();!(n=o.n()).done;){var i=Py(n.value,2),a=i[0],s=i[1];r.push(t(s,a))}}catch(e){o.e(e)}finally{o.f()}return r}(e,(function(e,t){return"".concat(t,":").concat(e,";")})).join("")});Vk.ELEMENT_NODE,Vk.TEXT_NODE,Vk.CDATA_SECTION_NODE,Vk.COMMENT_NODE,Vk.DOCUMENT_NODE,Vk.DOCUMENT_TYPE_NODE,Vk.DOCUMENT_FRAGMENT_NODE;var Uk=Symbol,Gk=Date.now,Wk=Uk(),qk=Uk(),Kk=Uk(),Zk=Uk(),Jk=Uk(),Xk=Uk(),Yk=Uk(),Qk=Uk(),ew=Uk();function tw(e){return tw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tw(e)}function nw(e){return function(e){if(Array.isArray(e))return rw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return rw(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rw(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ow(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=tw(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tw(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Gk();var iw=ow(ow(ow(ow(ow(ow(ow(ow(ow({},Wk,zk("font-weight","bold")),qk,zk("font-weight","normal")),Kk,zk("color","blue")),Jk,zk("color","green")),Zk,zk("color","grey")),Xk,zk("color","red")),Yk,zk("color","purple")),Qk,zk("color","orange")),ew,zk("color","black")),aw=Lk?function(e){var t;1===e.length&&(null===(t=e[0])||void 0===t?void 0:t.constructor)===Function&&(e=e[0]());for(var n=[],r=[],o=By(),i=[],a=0;a<e.length;a++){var s=e[a],l=iw[s];if(void 0!==l)o.set(l.left,l.right);else{if(void 0===s)break;if(s.constructor!==String&&s.constructor!==Number)break;var c=$k(o);a>0||c.length>0?(n.push("%c"+s),r.push(c)):n.push(s)}}for(a>0&&(i=r).unshift(n.join(""));a<e.length;a++){var u=e[a];u instanceof Symbol||i.push(u)}return i}:function(e){var t;1===e.length&&(null===(t=e[0])||void 0===t?void 0:t.constructor)===Function&&(e=e[0]());for(var n=[],r=[],o=0;o<e.length;o++){var i=e[o];if(void 0===i)break;if(i.constructor===String||i.constructor===Number)n.push(i);else if(i.constructor===Object)break}for(o>0&&r.push(n.join(""));o<e.length;o++){var a=e[o];a instanceof Symbol||r.push(a)}return r},sw=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).warn.apply(e,nw(aw(n))),n.unshift(Qk),lw.forEach((function(e){return e.print(n)}))},lw=My();function cw(e){return cw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cw(e)}function uw(e,t,n){return(t=function(e){var t=function(e){if("object"!=cw(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=cw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==cw(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dw=function(e){return uw(uw({},Symbol.iterator,(function(){return this})),"next",e)},fw=function(e,t){return dw((function(){var n=e.next(),r=n.done,o=n.value;return{done:r,value:r?void 0:t(o)}}))};class pw{constructor(e,t){this.clock=e,this.len=t}}class hw{constructor(){this.clients=new Map}}const mw=(e,t,n)=>t.clients.forEach(((t,r)=>{const o=e.doc.store.clients.get(r);for(let r=0;r<t.length;r++){const i=t[r];cx(e,o,i.clock,i.len,n)}})),vw=(e,t)=>{const n=e.clients.get(t.client);return void 0!==n&&null!==((e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const o=gy((n+r)/2),i=e[o],a=i.clock;if(a<=t){if(t<a+i.len)return o;n=o+1}else r=o-1}return null})(n,t.clock)},gw=e=>{e.clients.forEach((e=>{let t,n;for(e.sort(((e,t)=>e.clock-t.clock)),t=1,n=1;t<e.length;t++){const r=e[n-1],o=e[t];r.clock+r.len>=o.clock?r.len=ky(r.len,o.clock+o.len-r.clock):(n<t&&(e[n]=o),n++)}e.length=n}))},yw=e=>{const t=new hw;for(let n=0;n<e.length;n++)e[n].clients.forEach(((r,o)=>{if(!t.clients.has(o)){const i=r.slice();for(let t=n+1;t<e.length;t++)Vy(i,e[t].clients.get(o)||[]);t.clients.set(o,i)}}));return gw(t),t},bw=(e,t,n,r)=>{Hy(e.clients,t,(()=>[])).push(new pw(n,r))},kw=()=>new hw,ww=(e,t)=>{wb(e.restEncoder,t.clients.size),$y(t.clients.entries()).sort(((e,t)=>t[0]-e[0])).forEach((([t,n])=>{e.resetDsCurVal(),wb(e.restEncoder,t);const r=n.length;wb(e.restEncoder,r);for(let t=0;t<r;t++){const r=n[t];e.writeDsClock(r.clock),e.writeDsLen(r.len)}}))},xw=(e,t,n)=>{const r=new hw,o=Qb(e.restDecoder);for(let i=0;i<o;i++){e.resetDsCurVal();const o=Qb(e.restDecoder),i=Qb(e.restDecoder),a=n.clients.get(o)||[],s=nx(n,o);for(let n=0;n<i;n++){const n=e.readDsClock(),i=n+e.readDsLen();if(n<s){s<i&&bw(r,o,s,i-s);let e=ox(a,n),l=a[e];for(!l.deleted&&l.id.clock<n&&(a.splice(e+1,0,JC(t,l,n-l.id.clock)),e++);e<a.length&&(l=a[e++],l.id.clock<i);)l.deleted||(i<l.id.clock+l.length&&a.splice(e,0,JC(t,l,i-l.id.clock)),l.delete(t))}else bw(r,o,n,i-n)}}if(r.clients.size>0){const e=new Ow;return wb(e.restEncoder,0),ww(e,r),e.toUint8Array()}return null},Cw=dk;class Sw extends Zy{constructor({guid:e=pk(),collectionid:t=null,gc:n=!0,gcFilter:r=()=>!0,meta:o=null,autoLoad:i=!1,shouldLoad:a=!0}={}){super(),this.gc=n,this.gcFilter=r,this.clientID=Cw(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new ex,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=i,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=hk((e=>{this.on("load",(()=>{this.isLoaded=!0,e(this)}))}));const s=()=>hk((e=>{const t=n=>{void 0!==n&&!0!==n||(this.off("sync",t),e())};this.on("sync",t)}));this.on("sync",(e=>{!1===e&&this.isSynced&&(this.whenSynced=s()),this.isSynced=void 0===e||!0===e,this.isSynced&&!this.isLoaded&&this.emit("load",[this])})),this.whenSynced=s()}load(){const e=this._item;null===e||this.shouldLoad||mx(e.parent.doc,(e=>{e.subdocsLoaded.add(this)}),null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set($y(this.subdocs).map((e=>e.guid)))}transact(e,t=null){return mx(this,e,t)}get(e,t=Ix){const n=Hy(this.share,e,(()=>{const e=new t;return e._integrate(this,null),e})),r=n.constructor;if(t!==Ix&&r!==t){if(r===Ix){const r=new t;r._map=n._map,n._map.forEach((e=>{for(;null!==e;e=e.left)e.parent=r})),r._start=n._start;for(let e=r._start;null!==e;e=e.right)e.parent=r;return r._length=n._length,this.share.set(e,r),r._integrate(this,null),r}throw new Error(`Type with the name ${e} has already been defined with a different constructor`)}return n}getArray(e=""){return this.get(e,nC)}getText(e=""){return this.get(e,kC)}getMap(e=""){return this.get(e,oC)}getXmlElement(e=""){return this.get(e,CC)}getXmlFragment(e=""){return this.get(e,xC)}toJSON(){const e={};return this.share.forEach(((t,n)=>{e[n]=t.toJSON()})),e}destroy(){this.isDestroyed=!0,$y(this.subdocs).forEach((e=>e.destroy()));const e=this._item;if(null!==e){this._item=null;const t=e.content;t.doc=new Sw({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,mx(e.parent.doc,(n=>{const r=t.doc;e.deleted||n.subdocsAdded.add(r),n.subdocsRemoved.add(this)}),null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class _w{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Qb(this.restDecoder),this.dsCurrVal}readDsLen(){const e=Qb(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class Ew extends _w{constructor(e){super(e),this.keys=[],Qb(e),this.keyClockDecoder=new sk(Xb(e)),this.clientDecoder=new ak(Xb(e)),this.leftClockDecoder=new sk(Xb(e)),this.rightClockDecoder=new sk(Xb(e)),this.infoDecoder=new ik(Xb(e),Yb),this.stringDecoder=new lk(Xb(e)),this.parentInfoDecoder=new ik(Xb(e),Yb),this.typeRefDecoder=new ak(Xb(e)),this.lenDecoder=new ak(Xb(e))}readLeftID(){return new Bw(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Bw(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return ok(this.restDecoder)}readBuf(){return Xb(this.restDecoder)}readJSON(){return ok(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const e=this.stringDecoder.read();return this.keys.push(e),e}}}class Dw{constructor(){this.restEncoder=gb()}toUint8Array(){return yb(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){wb(this.restEncoder,e)}writeDsLen(e){wb(this.restEncoder,e)}}class Mw extends Dw{writeLeftID(e){wb(this.restEncoder,e.client),wb(this.restEncoder,e.clock)}writeRightID(e){wb(this.restEncoder,e.client),wb(this.restEncoder,e.clock)}writeClient(e){wb(this.restEncoder,e)}writeInfo(e){kb(this.restEncoder,e)}writeString(e){_b(this.restEncoder,e)}writeParentInfo(e){wb(this.restEncoder,e?1:0)}writeTypeRef(e){wb(this.restEncoder,e)}writeLen(e){wb(this.restEncoder,e)}writeAny(e){Ob(this.restEncoder,e)}writeBuf(e){Db(this.restEncoder,e)}writeJSON(e){_b(this.restEncoder,JSON.stringify(e))}writeKey(e){_b(this.restEncoder,e)}}class Aw{constructor(){this.restEncoder=gb(),this.dsCurrVal=0}toUint8Array(){return yb(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,wb(this.restEncoder,t)}writeDsLen(e){0===e&&Ny(),wb(this.restEncoder,e-1),this.dsCurrVal+=e}}class Ow extends Aw{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Lb,this.clientEncoder=new Nb,this.leftClockEncoder=new Lb,this.rightClockEncoder=new Lb,this.infoEncoder=new Tb(kb),this.stringEncoder=new Rb,this.parentInfoEncoder=new Tb(kb),this.typeRefEncoder=new Nb,this.lenEncoder=new Nb}toUint8Array(){const e=gb();return wb(e,0),Db(e,this.keyClockEncoder.toUint8Array()),Db(e,this.clientEncoder.toUint8Array()),Db(e,this.leftClockEncoder.toUint8Array()),Db(e,this.rightClockEncoder.toUint8Array()),Db(e,yb(this.infoEncoder)),Db(e,this.stringEncoder.toUint8Array()),Db(e,yb(this.parentInfoEncoder)),Db(e,this.typeRefEncoder.toUint8Array()),Db(e,this.lenEncoder.toUint8Array()),Eb(e,yb(this.restEncoder)),yb(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Ob(this.restEncoder,e)}writeBuf(e){Db(this.restEncoder,e)}writeJSON(e){Ob(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}const Tw=(e,t,n)=>{const r=new Map;n.forEach(((e,n)=>{nx(t,n)>e&&r.set(n,e)})),tx(t).forEach(((e,t)=>{n.has(t)||r.set(t,0)})),wb(e.restEncoder,r.size),$y(r.entries()).sort(((e,t)=>t[0]-e[0])).forEach((([n,r])=>{((e,t,n,r)=>{r=ky(r,t[0].id.clock);const o=ox(t,r);wb(e.restEncoder,t.length-o),e.writeClient(n),wb(e.restEncoder,r);const i=t[o];i.write(e,r-i.id.clock);for(let n=o+1;n<t.length;n++)t[n].write(e,0)})(e,t.clients.get(n),n,r)}))},jw=(e,t,n,r=Ew)=>{const o=Jb(t);((e,t,n,r=new Ew(e))=>{mx(t,(e=>{e.local=!1;let t=!1;const n=e.doc,o=n.store,i=((e,t)=>{const n=By(),r=Qb(e.restDecoder);for(let o=0;o<r;o++){const r=Qb(e.restDecoder),o=new Array(r),i=e.readClient();let a=Qb(e.restDecoder);n.set(i,{i:0,refs:o});for(let n=0;n<r;n++){const r=e.readInfo();switch(31&r){case 0:{const t=e.readLen();o[n]=new MC(Hw(i,a),t),a+=t;break}case 10:{const t=Qb(e.restDecoder);o[n]=new nS(Hw(i,a),t),a+=t;break}default:{const s=!(192&r),l=new QC(Hw(i,a),null,(r&Xy)===Xy?e.readLeftID():null,null,(r&Jy)===Jy?e.readRightID():null,s?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,!s||32&~r?null:e.readString(),eS(e,r));o[n]=l,a+=l.length}}}}return n})(r,n),a=((e,t,n)=>{const r=[];let o=$y(n.keys()).sort(((e,t)=>e-t));if(0===o.length)return null;const i=()=>{if(0===o.length)return null;let e=n.get(o[o.length-1]);for(;e.refs.length===e.i;){if(o.pop(),!(o.length>0))return null;e=n.get(o[o.length-1])}return e};let a=i();if(null===a)return null;const s=new ex,l=new Map,c=(e,t)=>{const n=l.get(e);(null==n||n>t)&&l.set(e,t)};let u=a.refs[a.i++];const d=new Map,f=()=>{for(const e of r){const t=e.id.client,r=n.get(t);r?(r.i--,s.clients.set(t,r.refs.slice(r.i)),n.delete(t),r.i=0,r.refs=[]):s.clients.set(t,[e]),o=o.filter((e=>e!==t))}r.length=0};for(;;){if(u.constructor!==nS){const o=Hy(d,u.id.client,(()=>nx(t,u.id.client)))-u.id.clock;if(o<0)r.push(u),c(u.id.client,u.id.clock-1),f();else{const i=u.getMissing(e,t);if(null!==i){r.push(u);const e=n.get(i)||{refs:[],i:0};if(e.refs.length!==e.i){u=e.refs[e.i++];continue}c(i,nx(t,i)),f()}else(0===o||o<u.length)&&(u.integrate(e,o),d.set(u.id.client,u.id.clock+u.length))}}if(r.length>0)u=r.pop();else if(null!==a&&a.i<a.refs.length)u=a.refs[a.i++];else{if(a=i(),null===a)break;u=a.refs[a.i++]}}if(s.clients.size>0){const e=new Ow;return Tw(e,s,new Map),wb(e.restEncoder,0),{missing:l,update:e.toUint8Array()}}return null})(e,o,i),s=o.pendingStructs;if(s){for(const[e,n]of s.missing)if(n<nx(o,e)){t=!0;break}if(a){for(const[e,t]of a.missing){const n=s.missing.get(e);(null==n||n>t)&&s.missing.set(e,t)}s.update=Cx([s.update,a.update])}}else o.pendingStructs=a;const l=xw(r,e,o);if(o.pendingDs){const t=new Ew(Jb(o.pendingDs));Qb(t.restDecoder);const n=xw(t,e,o);o.pendingDs=l&&n?Cx([l,n]):l||n}else o.pendingDs=l;if(t){const t=o.pendingStructs.update;o.pendingStructs=null,jw(e.doc,t)}}),n,!1)})(o,e,n,new r(o))};class Nw{constructor(){this.l=[]}}const Pw=()=>new Nw,Lw=(e,t)=>e.l.push(t),Rw=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter((e=>t!==e)),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Iw=(e,t,n)=>gk(e.l,[t,n]);class Bw{constructor(e,t){this.client=e,this.clock=t}}const Fw=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,Hw=(e,t)=>new Bw(e,t),zw=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw Ny()},Vw=(e,t)=>{for(;null!==t;){if(t.parent===e)return!0;t=t.parent._item}return!1};class $w{constructor(e,t,n,r=0){this.type=e,this.tname=t,this.item=n,this.assoc=r}}const Uw=e=>new $w(null==e.type?null:Hw(e.type.client,e.type.clock),e.tname??null,null==e.item?null:Hw(e.item.client,e.item.clock),null==e.assoc?0:e.assoc);class Gw{constructor(e,t,n=0){this.type=e,this.index=t,this.assoc=n}}const Ww=(e,t,n)=>{let r=null,o=null;return null===e._item?o=zw(e):r=Hw(e._item.id.client,e._item.id.clock),new $w(r,o,t,n)},qw=(e,t,n=0)=>{let r=e._start;if(n<0){if(0===t)return Ww(e,null,n);t--}for(;null!==r;){if(!r.deleted&&r.countable){if(r.length>t)return Ww(e,Hw(r.id.client,r.id.clock+t),n);t-=r.length}if(null===r.right&&n<0)return Ww(e,r.lastId,n);r=r.right}return Ww(e,null,n)},Kw=(e,t)=>e===t||null!==e&&null!==t&&e.tname===t.tname&&Fw(e.item,t.item)&&Fw(e.type,t.type)&&e.assoc===t.assoc;class Zw{constructor(e,t){this.ds=e,this.sv=t}}const Jw=(e,t)=>new Zw(e,t),Xw=(Jw(kw(),new Map),e=>Jw((e=>{const t=kw();return e.clients.forEach(((e,n)=>{const r=[];for(let t=0;t<e.length;t++){const n=e[t];if(n.deleted){const o=n.id.clock;let i=n.length;if(t+1<e.length)for(let n=e[t+1];t+1<e.length&&n.deleted;n=e[1+ ++t])i+=n.length;r.push(new pw(o,i))}}r.length>0&&t.clients.set(n,r)})),t})(e.store),tx(e.store))),Yw=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!vw(t.ds,e.id),Qw=(e,t)=>{const n=Hy(e.meta,Qw,My),r=e.doc.store;n.has(t)||(t.sv.forEach(((t,n)=>{t<nx(r,n)&&sx(e,Hw(n,t))})),mw(e,t.ds,(e=>{})),n.add(t))};class ex{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const tx=e=>{const t=new Map;return e.clients.forEach(((e,n)=>{const r=e[e.length-1];t.set(n,r.id.clock+r.length)})),t},nx=(e,t)=>{const n=e.clients.get(t);if(void 0===n)return 0;const r=n[n.length-1];return r.id.clock+r.length},rx=(e,t)=>{let n=e.clients.get(t.id.client);if(void 0===n)n=[],e.clients.set(t.id.client,n);else{const e=n[n.length-1];if(e.id.clock+e.length!==t.id.clock)throw Ny()}n.push(t)},ox=(e,t)=>{let n=0,r=e.length-1,o=e[r],i=o.id.clock;if(i===t)return r;let a=gy(t/(i+o.length-1)*r);for(;n<=r;){if(o=e[a],i=o.id.clock,i<=t){if(t<i+o.length)return a;n=a+1}else r=a-1;a=gy((n+r)/2)}throw Ny()},ix=(e,t)=>{const n=e.clients.get(t.client);return n[ox(n,t.clock)]},ax=(e,t,n)=>{const r=ox(t,n),o=t[r];return o.id.clock<n&&o instanceof QC?(t.splice(r+1,0,JC(e,o,n-o.id.clock)),r+1):r},sx=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[ax(e,n,t.clock)]},lx=(e,t,n)=>{const r=t.clients.get(n.client),o=ox(r,n.clock),i=r[o];return n.clock!==i.id.clock+i.length-1&&i.constructor!==MC&&r.splice(o+1,0,JC(e,i,n.clock-i.id.clock+1)),i},cx=(e,t,n,r,o)=>{if(0===r)return;const i=n+r;let a,s=ax(e,t,n);do{a=t[s++],i<a.id.clock+a.length&&ax(e,t,i),o(a)}while(s<t.length&&t[s].id.clock<i)};class ux{constructor(e,t,n){this.doc=e,this.deleteSet=new hw,this.beforeState=tx(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const dx=(e,t)=>!(0===t.deleteSet.clients.size&&!function(e,t){var n,r=Ly(e);try{for(r.s();!(n=r.n()).done;){var o=Py(n.value,2),i=o[0];if(t(o[1],i))return!0}}catch(e){r.e(e)}finally{r.f()}return!1}(t.afterState,((e,n)=>t.beforeState.get(n)!==e))||(gw(t.deleteSet),((e,t)=>{Tw(e,t.doc.store,t.beforeState)})(e,t),ww(e,t.deleteSet),0)),fx=(e,t,n)=>{const r=t._item;(null===r||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&Hy(e.changed,t,My).add(n)},px=(e,t)=>{let n=e[t],r=e[t-1],o=t;for(;o>0&&r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n);n=r,r=e[--o-1])n instanceof QC&&null!==n.parentSub&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);const i=t-o;return i&&e.splice(t+1-i,i),i},hx=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,o=r.store,i=n.deleteSet,a=n._mergeStructs;try{gw(i),n.afterState=tx(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const e=[];n.changed.forEach(((t,r)=>e.push((()=>{null!==r._item&&r._item.deleted||r._callObserver(n,t)})))),e.push((()=>{n.changedParentTypes.forEach(((e,t)=>{t._dEH.l.length>0&&(null===t._item||!t._item.deleted)&&((e=e.filter((e=>null===e.target._item||!e.target._item.deleted))).forEach((e=>{e.currentTarget=t,e._path=null})),e.sort(((e,t)=>e.path.length-t.path.length)),Iw(t._dEH,e,n))}))})),e.push((()=>r.emit("afterTransaction",[n,r]))),gk(e,[]),n._needFormattingCleanup&&gC(n)}finally{r.gc&&((e,t,n)=>{for(const[r,o]of e.clients.entries()){const e=t.clients.get(r);for(let r=o.length-1;r>=0;r--){const i=o[r],a=i.clock+i.len;for(let r=ox(e,i.clock),o=e[r];r<e.length&&o.id.clock<a;o=e[++r]){const o=e[r];if(i.clock+i.len<=o.id.clock)break;o instanceof QC&&o.deleted&&!o.keep&&n(o)&&o.gc(t,!1)}}}})(i,o,r.gcFilter),((e,t)=>{e.clients.forEach(((e,n)=>{const r=t.clients.get(n);for(let t=e.length-1;t>=0;t--){const n=e[t];for(let e=by(r.length-1,1+ox(r,n.clock+n.len-1)),t=r[e];e>0&&t.id.clock>=n.clock;t=r[e])e-=1+px(r,e)}}))})(i,o),n.afterState.forEach(((e,t)=>{const r=n.beforeState.get(t)||0;if(r!==e){const e=o.clients.get(t),n=ky(ox(e,r),1);for(let t=e.length-1;t>=n;)t-=1+px(e,t)}}));for(let e=a.length-1;e>=0;e--){const{client:t,clock:n}=a[e].id,r=o.clients.get(t),i=ox(r,n);i+1<r.length&&px(r,i+1)>1||i>0&&px(r,i)}if(n.local||n.afterState.get(r.clientID)===n.beforeState.get(r.clientID)||(function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,nw(aw(n))),lw.forEach((function(e){return e.print(n)}))}(Qk,Wk,"[yjs] ",qk,Xk,"Changed the client-id because another client seems to be using it."),r.clientID=Cw()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const e=new Mw;dx(e,n)&&r.emit("update",[e.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const e=new Ow;dx(e,n)&&r.emit("updateV2",[e.toUint8Array(),n.origin,r,n])}const{subdocsAdded:s,subdocsLoaded:l,subdocsRemoved:c}=n;(s.size>0||c.size>0||l.size>0)&&(s.forEach((e=>{e.clientID=r.clientID,null==e.collectionid&&(e.collectionid=r.collectionid),r.subdocs.add(e)})),c.forEach((e=>r.subdocs.delete(e))),r.emit("subdocs",[{loaded:l,added:s,removed:c},r,n]),c.forEach((e=>e.destroy()))),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):hx(e,t+1)}}},mx=(e,t,n=null,r=!0)=>{const o=e._transactionCleanups;let i=!1,a=null;null===e._transaction&&(i=!0,e._transaction=new ux(e,n,r),o.push(e._transaction),1===o.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{a=t(e._transaction)}finally{if(i){const t=e._transaction===o[0];e._transaction=null,t&&hx(o,0)}}return a};class vx{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}}const gx=(e,t,n)=>{mw(e,n.deletions,(n=>{n instanceof QC&&t.scope.some((t=>t===e.doc||Vw(t,n)))&&ZC(n,!1)}))},yx=(e,t,n)=>{let r=null;const o=e.doc,i=e.scope;mx(o,(n=>{for(;t.length>0&&null===e.currStackItem;){const r=o.store,a=t.pop(),s=new Set,l=[];let c=!1;mw(n,a.insertions,(e=>{if(e instanceof QC){if(null!==e.redone){let{item:t,diff:o}=KC(r,e.id);o>0&&(t=sx(n,Hw(t.id.client,t.id.clock+o))),e=t}!e.deleted&&i.some((t=>t===n.doc||Vw(t,e)))&&l.push(e)}})),mw(n,a.deletions,(e=>{e instanceof QC&&i.some((t=>t===n.doc||Vw(t,e)))&&!vw(a.insertions,e.id)&&s.add(e)})),s.forEach((t=>{c=null!==YC(n,t,s,a.insertions,e.ignoreRemoteMapChanges,e)||c}));for(let t=l.length-1;t>=0;t--){const r=l[t];e.deleteFilter(r)&&(r.delete(n),c=!0)}e.currStackItem=c?a:null}n.changed.forEach(((e,t)=>{e.has(null)&&t._searchMarker&&(t._searchMarker.length=0)})),r=n}),e);const a=e.currStackItem;if(null!=a){const t=r.changedParentTypes;e.emit("stack-item-popped",[{stackItem:a,type:n,changedParentTypes:t,origin:e},e]),e.currStackItem=null}return a};class bx extends Zy{constructor(e,{captureTimeout:t=500,captureTransaction:n=e=>!0,deleteFilter:r=()=>!0,trackedOrigins:o=new Set([null]),ignoreRemoteMapChanges:i=!1,doc:a=(Uy(e)?e[0].doc:e instanceof Sw?e:e.doc)}={}){super(),this.scope=[],this.doc=a,this.addToScope(e),this.deleteFilter=r,o.add(this),this.trackedOrigins=o,this.captureTransaction=n,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=i,this.captureTimeout=t,this.afterTransactionHandler=e=>{if(!(this.captureTransaction(e)&&this.scope.some((t=>e.changedParentTypes.has(t)||t===this.doc))&&(this.trackedOrigins.has(e.origin)||e.origin&&this.trackedOrigins.has(e.origin.constructor))))return;const t=this.undoing,n=this.redoing,r=t?this.redoStack:this.undoStack;t?this.stopCapturing():n||this.clear(!1,!0);const o=new hw;e.afterState.forEach(((t,n)=>{const r=e.beforeState.get(n)||0,i=t-r;i>0&&bw(o,n,r,i)}));const i=Gk();let a=!1;if(this.lastChange>0&&i-this.lastChange<this.captureTimeout&&r.length>0&&!t&&!n){const t=r[r.length-1];t.deletions=yw([t.deletions,e.deleteSet]),t.insertions=yw([t.insertions,o])}else r.push(new vx(e.deleteSet,o)),a=!0;t||n||(this.lastChange=i),mw(e,e.deleteSet,(t=>{t instanceof QC&&this.scope.some((n=>n===e.doc||Vw(n,t)))&&ZC(t,!0)}));const s=[{stackItem:r[r.length-1],origin:e.origin,type:t?"redo":"undo",changedParentTypes:e.changedParentTypes},this];a?this.emit("stack-item-added",s):this.emit("stack-item-updated",s)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",(()=>{this.destroy()}))}addToScope(e){const t=new Set(this.scope);(e=Uy(e)?e:[e]).forEach((e=>{t.has(e)||(t.add(e),(e instanceof Ix?e.doc!==this.doc:e!==this.doc)&&sw("[yjs#509] Not same Y.Doc"),this.scope.push(e))}))}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,t=!0){(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact((n=>{e&&(this.undoStack.forEach((e=>gx(n,this,e))),this.undoStack=[]),t&&(this.redoStack.forEach((e=>gx(n,this,e))),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])}))}stopCapturing(){this.lastChange=0}undo(){let e;this.undoing=!0;try{e=yx(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){let e;this.redoing=!0;try{e=yx(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}class kx{constructor(e,t){this.gen=function*(e){const t=Qb(e.restDecoder);for(let n=0;n<t;n++){const t=Qb(e.restDecoder),n=e.readClient();let r=Qb(e.restDecoder);for(let o=0;o<t;o++){const t=e.readInfo();if(10===t){const t=Qb(e.restDecoder);yield new nS(Hw(n,r),t),r+=t}else if(31&t){const o=!(192&t),i=new QC(Hw(n,r),null,(t&Xy)===Xy?e.readLeftID():null,null,(t&Jy)===Jy?e.readRightID():null,o?e.readParentInfo()?e.readString():e.readLeftID():null,!o||32&~t?null:e.readString(),eS(e,t));yield i,r+=i.length}else{const t=e.readLen();yield new MC(Hw(n,r),t),r+=t}}}}(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}next(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===nS);return this.curr}}class wx{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const xx=(e,t)=>{if(e.constructor===MC){const{client:n,clock:r}=e.id;return new MC(Hw(n,r+t),e.length-t)}if(e.constructor===nS){const{client:n,clock:r}=e.id;return new nS(Hw(n,r+t),e.length-t)}{const n=e,{client:r,clock:o}=n.id;return new QC(Hw(r,o+t),null,Hw(r,o+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},Cx=(e,t=Ew,n=Ow)=>{if(1===e.length)return e[0];const r=e.map((e=>new t(Jb(e))));let o=r.map((e=>new kx(e,!0))),i=null;const a=new n,s=new wx(a);for(;o=o.filter((e=>null!==e.curr)),o.sort(((e,t)=>{if(e.curr.id.client===t.curr.id.client){const n=e.curr.id.clock-t.curr.id.clock;return 0===n?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===nS?1:-1:n}return t.curr.id.client-e.curr.id.client})),0!==o.length;){const e=o[0],t=e.curr.id.client;if(null!==i){let n=e.curr,r=!1;for(;null!==n&&n.id.clock+n.length<=i.struct.id.clock+i.struct.length&&n.id.client>=i.struct.id.client;)n=e.next(),r=!0;if(null===n||n.id.client!==t||r&&n.id.clock>i.struct.id.clock+i.struct.length)continue;if(t!==i.struct.id.client)_x(s,i.struct,i.offset),i={struct:n,offset:0},e.next();else if(i.struct.id.clock+i.struct.length<n.id.clock)if(i.struct.constructor===nS)i.struct.length=n.id.clock+n.length-i.struct.id.clock;else{_x(s,i.struct,i.offset);const e=n.id.clock-i.struct.id.clock-i.struct.length;i={struct:new nS(Hw(t,i.struct.id.clock+i.struct.length),e),offset:0}}else{const t=i.struct.id.clock+i.struct.length-n.id.clock;t>0&&(i.struct.constructor===nS?i.struct.length-=t:n=xx(n,t)),i.struct.mergeWith(n)||(_x(s,i.struct,i.offset),i={struct:n,offset:0},e.next())}}else i={struct:e.curr,offset:0},e.next();for(let n=e.curr;null!==n&&n.id.client===t&&n.id.clock===i.struct.id.clock+i.struct.length&&n.constructor!==nS;n=e.next())_x(s,i.struct,i.offset),i={struct:n,offset:0}}null!==i&&(_x(s,i.struct,i.offset),i=null),Ex(s);const l=r.map((e=>(e=>{const t=new hw,n=Qb(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();const n=Qb(e.restDecoder),r=Qb(e.restDecoder);if(r>0){const o=Hy(t.clients,n,(()=>[]));for(let t=0;t<r;t++)o.push(new pw(e.readDsClock(),e.readDsLen()))}}return t})(e))),c=yw(l);return ww(a,c),a.toUint8Array()},Sx=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:yb(e.encoder.restEncoder)}),e.encoder.restEncoder=gb(),e.written=0)},_x=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&Sx(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),wb(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},Ex=e=>{Sx(e);const t=e.encoder.restEncoder;wb(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const r=e.clientStructs[n];wb(t,r.written),Eb(t,r.restEncoder)}},Dx="You must not compute changes after the event-handler fired.";class Mx{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=Ax(this.currentTarget,this.target))}deletes(e){return vw(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw Ty(Dx);const e=new Map,t=this.target;this.transaction.changed.get(t).forEach((n=>{if(null!==n){const r=t._map.get(n);let o,i;if(this.adds(r)){let e=r.left;for(;null!==e&&this.adds(e);)e=e.left;if(this.deletes(r)){if(null===e||!this.deletes(e))return;o="delete",i=zy(e.content.getContent())}else null!==e&&this.deletes(e)?(o="update",i=zy(e.content.getContent())):(o="add",i=void 0)}else{if(!this.deletes(r))return;o="delete",i=zy(r.content.getContent())}e.set(n,{action:o,oldValue:i})}})),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){if(0===this.transaction.doc._transactionCleanups.length)throw Ty(Dx);const t=this.target,n=My(),r=My(),o=[];if(e={added:n,deleted:r,delta:o,keys:this.keys},this.transaction.changed.get(t).has(null)){let e=null;const i=()=>{e&&o.push(e)};for(let o=t._start;null!==o;o=o.right)o.deleted?this.deletes(o)&&!this.adds(o)&&(null!==e&&void 0!==e.delete||(i(),e={delete:0}),e.delete+=o.length,r.add(o)):this.adds(o)?(null!==e&&void 0!==e.insert||(i(),e={insert:[]}),e.insert=e.insert.concat(o.content.getContent()),n.add(o)):(null!==e&&void 0!==e.retain||(i(),e={retain:0}),e.retain+=o.length);null!==e&&void 0===e.retain&&i()}this._changes=e}return e}}const Ax=(e,t)=>{const n=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)n.unshift(t._item.parentSub);else{let e=0,r=t._item.parent._start;for(;r!==t._item&&null!==r;)!r.deleted&&r.countable&&(e+=r.length),r=r.right;n.unshift(e)}t=t._item.parent}return n},Ox=()=>{sw("Invalid access: Add Yjs type to a document before reading data.")};let Tx=0;class jx{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=Tx++}}const Nx=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=Tx++},Px=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;const n=0===e._searchMarker.length?null:e._searchMarker.reduce(((e,n)=>yy(t-e.index)<yy(t-n.index)?e:n));let r=e._start,o=0;for(null!==n&&(r=n.p,o=n.index,(e=>{e.timestamp=Tx++})(n));null!==r.right&&o<t;){if(!r.deleted&&r.countable){if(t<o+r.length)break;o+=r.length}r=r.right}for(;null!==r.left&&o>t;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);for(;null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);return null!==n&&yy(n.index-o)<r.parent.length/80?(Nx(n,r,o),n):((e,t,n)=>{if(e.length>=80){const r=e.reduce(((e,t)=>e.timestamp<t.timestamp?e:t));return Nx(r,t,n),r}{const r=new jx(t,n);return e.push(r),r}})(e._searchMarker,r,o)},Lx=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const o=e[r];if(n>0){let t=o.p;for(t.marker=!1;t&&(t.deleted||!t.countable);)t=t.left,t&&!t.deleted&&t.countable&&(o.index-=t.length);if(null===t||!0===t.marker){e.splice(r,1);continue}o.p=t,t.marker=!0}(t<o.index||n>0&&t===o.index)&&(o.index=ky(t,o.index+n))}},Rx=(e,t,n)=>{const r=e,o=t.changedParentTypes;for(;Hy(o,e,(()=>[])).push(n),null!==e._item;)e=e._item.parent;Iw(r._eH,n,t)};class Ix{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Pw(),this._dEH=Pw(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw jy()}clone(){throw jy()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){Lw(this._eH,e)}observeDeep(e){Lw(this._dEH,e)}unobserve(e){Rw(this._eH,e)}unobserveDeep(e){Rw(this._dEH,e)}toJSON(){}}const Bx=(e,t,n)=>{e.doc??Ox(),t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const o=[];let i=e._start;for(;null!==i&&r>0;){if(i.countable&&!i.deleted){const e=i.content.getContent();if(e.length<=t)t-=e.length;else{for(let n=t;n<e.length&&r>0;n++)o.push(e[n]),r--;t=0}}i=i.right}return o},Fx=e=>{e.doc??Ox();const t=[];let n=e._start;for(;null!==n;){if(n.countable&&!n.deleted){const e=n.content.getContent();for(let n=0;n<e.length;n++)t.push(e[n])}n=n.right}return t},Hx=(e,t)=>{const n=[];let r=e._start;for(;null!==r;){if(r.countable&&Yw(r,t)){const e=r.content.getContent();for(let t=0;t<e.length;t++)n.push(e[t])}r=r.right}return n},zx=(e,t)=>{let n=0,r=e._start;for(e.doc??Ox();null!==r;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let r=0;r<o.length;r++)t(o[r],n++,e)}r=r.right}},Vx=(e,t)=>{const n=[];return zx(e,((r,o)=>{n.push(t(r,o,e))})),n},$x=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===n){for(;null!==t&&t.deleted;)t=t.right;if(null===t)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const e=n[r++];return n.length<=r&&(n=null),{done:!1,value:e}}}},Ux=(e,t)=>{e.doc??Ox();const n=Px(e,t);let r=e._start;for(null!==n&&(r=n.p,t-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},Gx=(e,t,n,r)=>{let o=n;const i=e.doc,a=i.clientID,s=i.store,l=null===n?t._start:n.right;let c=[];const u=()=>{c.length>0&&(o=new QC(Hw(a,nx(s,a)),o,o&&o.lastId,l,l&&l.id,t,null,new IC(c)),o.integrate(e,0),c=[])};r.forEach((n=>{if(null===n)c.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(n);break;default:switch(u(),n.constructor){case Uint8Array:case ArrayBuffer:o=new QC(Hw(a,nx(s,a)),o,o&&o.lastId,l,l&&l.id,t,null,new AC(new Uint8Array(n))),o.integrate(e,0);break;case Sw:o=new QC(Hw(a,nx(s,a)),o,o&&o.lastId,l,l&&l.id,t,null,new jC(n)),o.integrate(e,0);break;default:if(!(n instanceof Ix))throw new Error("Unexpected content type in insert operation");o=new QC(Hw(a,nx(s,a)),o,o&&o.lastId,l,l&&l.id,t,null,new qC(n)),o.integrate(e,0)}}})),u()},Wx=()=>Ty("Length exceeded!"),qx=(e,t,n,r)=>{if(n>t._length)throw Wx();if(0===n)return t._searchMarker&&Lx(t._searchMarker,n,r.length),Gx(e,t,null,r);const o=n,i=Px(t,n);let a=t._start;for(null!==i&&(a=i.p,0==(n-=i.index)&&(a=a.prev,n+=a&&a.countable&&!a.deleted?a.length:0));null!==a;a=a.right)if(!a.deleted&&a.countable){if(n<=a.length){n<a.length&&sx(e,Hw(a.id.client,a.id.clock+n));break}n-=a.length}return t._searchMarker&&Lx(t._searchMarker,o,r.length),Gx(e,t,a,r)},Kx=(e,t,n,r)=>{if(0===r)return;const o=n,i=r,a=Px(t,n);let s=t._start;for(null!==a&&(s=a.p,n-=a.index);null!==s&&n>0;s=s.right)!s.deleted&&s.countable&&(n<s.length&&sx(e,Hw(s.id.client,s.id.clock+n)),n-=s.length);for(;r>0&&null!==s;)s.deleted||(r<s.length&&sx(e,Hw(s.id.client,s.id.clock+r)),s.delete(e),r-=s.length),s=s.right;if(r>0)throw Wx();t._searchMarker&&Lx(t._searchMarker,o,-i+r)},Zx=(e,t,n)=>{const r=t._map.get(n);void 0!==r&&r.delete(e)},Jx=(e,t,n,r)=>{const o=t._map.get(n)||null,i=e.doc,a=i.clientID;let s;if(null==r)s=new IC([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:s=new IC([r]);break;case Uint8Array:s=new AC(r);break;case Sw:s=new jC(r);break;default:if(!(r instanceof Ix))throw new Error("Unexpected content type");s=new qC(r)}new QC(Hw(a,nx(i.store,a)),o,o&&o.lastId,null,null,t,n,s).integrate(e,0)},Xx=(e,t)=>{e.doc??Ox();const n=e._map.get(t);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},Yx=e=>{const t={};return e.doc??Ox(),e._map.forEach(((e,n)=>{e.deleted||(t[n]=e.content.getContent()[e.length-1])})),t},Qx=(e,t)=>{e.doc??Ox();const n=e._map.get(t);return void 0!==n&&!n.deleted},eC=e=>{return e.doc??Ox(),t=e._map.entries(),n=e=>!e[1].deleted,dw((function(){var e;do{e=t.next()}while(!e.done&&!n(e.value));return e}));var t,n};class tC extends Mx{}class nC extends Ix{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new nC;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new nC}clone(){const e=new nC;return e.insert(0,this.toArray().map((e=>e instanceof Ix?e.clone():e))),e}get length(){return this.doc??Ox(),this._length}_callObserver(e,t){super._callObserver(e,t),Rx(this,e,new tC(this,e))}insert(e,t){null!==this.doc?mx(this.doc,(n=>{qx(n,this,e,t)})):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?mx(this.doc,(t=>{((e,t,n)=>{let r=(t._searchMarker||[]).reduce(((e,t)=>t.index>e.index?t:e),{index:0,p:t._start}).p;if(r)for(;r.right;)r=r.right;Gx(e,t,r,n)})(t,this,e)})):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){null!==this.doc?mx(this.doc,(n=>{Kx(n,this,e,t)})):this._prelimContent.splice(e,t)}get(e){return Ux(this,e)}toArray(){return Fx(this)}slice(e=0,t=this.length){return Bx(this,e,t)}toJSON(){return this.map((e=>e instanceof Ix?e.toJSON():e))}map(e){return Vx(this,e)}forEach(e){zx(this,e)}[Symbol.iterator](){return $x(this)}_write(e){e.writeTypeRef(HC)}}class rC extends Mx{constructor(e,t,n){super(e,t),this.keysChanged=n}}class oC extends Ix{constructor(e){super(),this._prelimContent=null,this._prelimContent=void 0===e?new Map:new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach(((e,t)=>{this.set(t,e)})),this._prelimContent=null}_copy(){return new oC}clone(){const e=new oC;return this.forEach(((t,n)=>{e.set(n,t instanceof Ix?t.clone():t)})),e}_callObserver(e,t){Rx(this,e,new rC(this,e,t))}toJSON(){this.doc??Ox();const e={};return this._map.forEach(((t,n)=>{if(!t.deleted){const r=t.content.getContent()[t.length-1];e[n]=r instanceof Ix?r.toJSON():r}})),e}get size(){return[...eC(this)].length}keys(){return fw(eC(this),(e=>e[0]))}values(){return fw(eC(this),(e=>e[1].content.getContent()[e[1].length-1]))}entries(){return fw(eC(this),(e=>[e[0],e[1].content.getContent()[e[1].length-1]]))}forEach(e){this.doc??Ox(),this._map.forEach(((t,n)=>{t.deleted||e(t.content.getContent()[t.length-1],n,this)}))}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?mx(this.doc,(t=>{Zx(t,this,e)})):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?mx(this.doc,(n=>{Jx(n,this,e,t)})):this._prelimContent.set(e,t),t}get(e){return Xx(this,e)}has(e){return Qx(this,e)}clear(){null!==this.doc?mx(this.doc,(e=>{this.forEach((function(t,n,r){Zx(e,r,n)}))})):this._prelimContent.clear()}_write(e){e.writeTypeRef(zC)}}const iC=(e,t)=>e===t||"object"==typeof e&&"object"==typeof t&&e&&t&&function(e,t){return e===t||_y(e)===_y(t)&&function(e,t){for(var n in e)if(!t(e[n],n))return!1;return!0}(e,(function(e,n){return(void 0!==e||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(t,n))&&t[n]===e}))}(e,t);class aC{constructor(e,t,n,r){this.left=e,this.right=t,this.index=n,this.currentAttributes=r}forward(){null===this.right&&Ny(),this.right.content.constructor===PC?this.right.deleted||uC(this.currentAttributes,this.right.content):this.right.deleted||(this.index+=this.right.length),this.left=this.right,this.right=this.right.right}}const sC=(e,t,n)=>{for(;null!==t.right&&n>0;)t.right.content.constructor===PC?t.right.deleted||uC(t.currentAttributes,t.right.content):t.right.deleted||(n<t.right.length&&sx(e,Hw(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length),t.left=t.right,t.right=t.right.right;return t},lC=(e,t,n,r)=>{const o=new Map,i=r?Px(t,n):null;if(i){const t=new aC(i.p.left,i.p,i.index,o);return sC(e,t,n-i.index)}{const r=new aC(null,t._start,0,o);return sC(e,r,n)}},cC=(e,t,n,r)=>{for(;null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===PC&&iC(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const o=e.doc,i=o.clientID;r.forEach(((r,a)=>{const s=n.left,l=n.right,c=new QC(Hw(i,nx(o.store,i)),s,s&&s.lastId,l,l&&l.id,t,null,new PC(a,r));c.integrate(e,0),n.right=c,n.forward()}))},uC=(e,t)=>{const{key:n,value:r}=t;null===r?e.delete(n):e.set(n,r)},dC=(e,t)=>{for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===PC&&iC(t[e.right.content.key]??null,e.right.content.value));)e.forward()},fC=(e,t,n,r)=>{const o=e.doc,i=o.clientID,a=new Map;for(const s in r){const l=r[s],c=n.currentAttributes.get(s)??null;if(!iC(c,l)){a.set(s,c);const{left:r,right:u}=n;n.right=new QC(Hw(i,nx(o.store,i)),r,r&&r.lastId,u,u&&u.id,t,null,new PC(s,l)),n.right.integrate(e,0),n.forward()}}return a},pC=(e,t,n,r,o)=>{n.currentAttributes.forEach(((e,t)=>{void 0===o[t]&&(o[t]=null)}));const i=e.doc,a=i.clientID;dC(n,o);const s=fC(e,t,n,o),l=r.constructor===String?new BC(r):r instanceof Ix?new qC(r):new NC(r);let{left:c,right:u,index:d}=n;t._searchMarker&&Lx(t._searchMarker,n.index,l.getLength()),u=new QC(Hw(a,nx(i.store,a)),c,c&&c.lastId,u,u&&u.id,t,null,l),u.integrate(e,0),n.right=u,n.index=d,n.forward(),cC(e,t,n,s)},hC=(e,t,n,r,o)=>{const i=e.doc,a=i.clientID;dC(n,o);const s=fC(e,t,n,o);e:for(;null!==n.right&&(r>0||s.size>0&&(n.right.deleted||n.right.content.constructor===PC));){if(!n.right.deleted)switch(n.right.content.constructor){case PC:{const{key:t,value:i}=n.right.content,a=o[t];if(void 0!==a){if(iC(a,i))s.delete(t);else{if(0===r)break e;s.set(t,i)}n.right.delete(e)}else n.currentAttributes.set(t,i);break}default:r<n.right.length&&sx(e,Hw(n.right.id.client,n.right.id.clock+r)),r-=n.right.length}n.forward()}if(r>0){let o="";for(;r>0;r--)o+="\n";n.right=new QC(Hw(a,nx(i.store,a)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new BC(o)),n.right.integrate(e,0),n.forward()}cC(e,t,n,s)},mC=(e,t,n,r,o)=>{let i=t;const a=By();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===PC){const e=i.content;a.set(e.key,e)}i=i.right}let s=0,l=!1;for(;t!==i;){if(n===t&&(l=!0),!t.deleted){const n=t.content;switch(n.constructor){case PC:{const{key:i,value:c}=n,u=r.get(i)??null;a.get(i)===n&&u!==c||(t.delete(e),s++,l||(o.get(i)??null)!==c||u===c||(null===u?o.delete(i):o.set(i,u))),l||t.deleted||uC(o,n);break}}}t=t.right}return s},vC=e=>{let t=0;return mx(e.doc,(n=>{let r=e._start,o=e._start,i=By();const a=Fy(i);for(;o;)!1===o.deleted&&(o.content.constructor===PC?uC(a,o.content):(t+=mC(n,r,o,i,a),i=Fy(a),r=o)),o=o.right})),t},gC=e=>{const t=new Set,n=e.doc;for(const[r,o]of e.afterState.entries()){const i=e.beforeState.get(r)||0;o!==i&&cx(e,n.store.clients.get(r),i,o,(e=>{e.deleted||e.content.constructor!==PC||e.constructor===MC||t.add(e.parent)}))}mx(n,(n=>{mw(e,e.deleteSet,(e=>{if(e instanceof MC||!e.parent._hasFormatting||t.has(e.parent))return;const r=e.parent;e.content.constructor===PC?t.add(r):((e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===PC){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}})(n,e)}));for(const e of t)vC(e)}))},yC=(e,t,n)=>{const r=n,o=Fy(t.currentAttributes),i=t.right;for(;n>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case qC:case NC:case BC:n<t.right.length&&sx(e,Hw(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e)}t.forward()}i&&mC(e,i,t.right,o,t.currentAttributes);const a=(t.left||t.right).parent;return a._searchMarker&&Lx(a._searchMarker,t.index,-r+n),t};class bC extends Mx{constructor(e,t,n){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,n.forEach((e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)}))}get changes(){if(null===this._changes){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){const e=this.target.doc,t=[];mx(e,(e=>{const n=new Map,r=new Map;let o=this.target._start,i=null;const a={};let s="",l=0,c=0;const u=()=>{if(null!==i){let e=null;switch(i){case"delete":c>0&&(e={delete:c}),c=0;break;case"insert":("object"==typeof s||s.length>0)&&(e={insert:s},n.size>0&&(e.attributes={},n.forEach(((t,n)=>{null!==t&&(e.attributes[n]=t)})))),s="";break;case"retain":l>0&&(e={retain:l},function(e){for(var t in e)return!1;return!0}(a)||(e.attributes=Cy({},a))),l=0}e&&t.push(e),i=null}};for(;null!==o;){switch(o.content.constructor){case qC:case NC:this.adds(o)?this.deletes(o)||(u(),i="insert",s=o.content.getContent()[0],u()):this.deletes(o)?("delete"!==i&&(u(),i="delete"),c+=1):o.deleted||("retain"!==i&&(u(),i="retain"),l+=1);break;case BC:this.adds(o)?this.deletes(o)||("insert"!==i&&(u(),i="insert"),s+=o.content.str):this.deletes(o)?("delete"!==i&&(u(),i="delete"),c+=o.length):o.deleted||("retain"!==i&&(u(),i="retain"),l+=o.length);break;case PC:{const{key:t,value:s}=o.content;if(this.adds(o)){if(!this.deletes(o)){const l=n.get(t)??null;iC(l,s)?null!==s&&o.delete(e):("retain"===i&&u(),iC(s,r.get(t)??null)?delete a[t]:a[t]=s)}}else if(this.deletes(o)){r.set(t,s);const e=n.get(t)??null;iC(e,s)||("retain"===i&&u(),a[t]=e)}else if(!o.deleted){r.set(t,s);const n=a[t];void 0!==n&&(iC(n,s)?null!==n&&o.delete(e):("retain"===i&&u(),null===s?delete a[t]:a[t]=s))}o.deleted||("insert"===i&&u(),uC(n,o.content));break}}o=o.right}for(u();t.length>0;){const e=t[t.length-1];if(void 0===e.retain||void 0!==e.attributes)break;t.pop()}})),this._delta=t}return this._delta}}class kC extends Ix{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Ox(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach((e=>e()))}catch(e){console.error(e)}this._pending=null}_copy(){return new kC}clone(){const e=new kC;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const n=new bC(this,e,t);Rx(this,e,n),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??Ox();let e="",t=this._start;for(;null!==t;)!t.deleted&&t.countable&&t.content.constructor===BC&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){null!==this.doc?mx(this.doc,(n=>{const r=new aC(null,this._start,0,new Map);for(let o=0;o<e.length;o++){const i=e[o];if(void 0!==i.insert){const a=t||"string"!=typeof i.insert||o!==e.length-1||null!==r.right||"\n"!==i.insert.slice(-1)?i.insert:i.insert.slice(0,-1);("string"!=typeof a||a.length>0)&&pC(n,this,r,a,i.attributes||{})}else void 0!==i.retain?hC(n,this,r,i.retain,i.attributes||{}):void 0!==i.delete&&yC(n,r,i.delete)}})):this._pending.push((()=>this.applyDelta(e)))}toDelta(e,t,n){this.doc??Ox();const r=[],o=new Map,i=this.doc;let a="",s=this._start;function l(){if(a.length>0){const e={};let t=!1;o.forEach(((n,r)=>{t=!0,e[r]=n}));const n={insert:a};t&&(n.attributes=e),r.push(n),a=""}}const c=()=>{for(;null!==s;){if(Yw(s,e)||void 0!==t&&Yw(s,t))switch(s.content.constructor){case BC:{const r=o.get("ychange");void 0===e||Yw(s,e)?void 0===t||Yw(s,t)?void 0!==r&&(l(),o.delete("ychange")):void 0!==r&&r.user===s.id.client&&"added"===r.type||(l(),o.set("ychange",n?n("added",s.id):{type:"added"})):void 0!==r&&r.user===s.id.client&&"removed"===r.type||(l(),o.set("ychange",n?n("removed",s.id):{type:"removed"})),a+=s.content.str;break}case qC:case NC:{l();const e={insert:s.content.getContent()[0]};if(o.size>0){const t={};e.attributes=t,o.forEach(((e,n)=>{t[n]=e}))}r.push(e);break}case PC:Yw(s,e)&&(l(),uC(o,s.content))}s=s.right}l()};return e||t?mx(i,(n=>{e&&Qw(n,e),t&&Qw(n,t),c()}),"cleanup"):c(),r}insert(e,t,n){if(t.length<=0)return;const r=this.doc;null!==r?mx(r,(r=>{const o=lC(r,this,e,!n);n||(n={},o.currentAttributes.forEach(((e,t)=>{n[t]=e}))),pC(r,this,o,t,n)})):this._pending.push((()=>this.insert(e,t,n)))}insertEmbed(e,t,n){const r=this.doc;null!==r?mx(r,(r=>{const o=lC(r,this,e,!n);pC(r,this,o,t,n||{})})):this._pending.push((()=>this.insertEmbed(e,t,n||{})))}delete(e,t){if(0===t)return;const n=this.doc;null!==n?mx(n,(n=>{yC(n,lC(n,this,e,!0),t)})):this._pending.push((()=>this.delete(e,t)))}format(e,t,n){if(0===t)return;const r=this.doc;null!==r?mx(r,(r=>{const o=lC(r,this,e,!1);null!==o.right&&hC(r,this,o,t,n)})):this._pending.push((()=>this.format(e,t,n)))}removeAttribute(e){null!==this.doc?mx(this.doc,(t=>{Zx(t,this,e)})):this._pending.push((()=>this.removeAttribute(e)))}setAttribute(e,t){null!==this.doc?mx(this.doc,(n=>{Jx(n,this,e,t)})):this._pending.push((()=>this.setAttribute(e,t)))}getAttribute(e){return Xx(this,e)}getAttributes(){return Yx(this)}_write(e){e.writeTypeRef(VC)}}class wC{constructor(e,t=()=>!0){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??Ox()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do{if(t=e.content.type,e.deleted||t.constructor!==CC&&t.constructor!==xC||null===t._start)for(;null!==e;){const t=e.next;if(null!==t){e=t;break}e=e.parent===this._root?null:e.parent._item}else e=t._start}while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class xC extends Ix{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new xC}clone(){const e=new xC;return e.insert(0,this.toArray().map((e=>e instanceof Ix?e.clone():e))),e}get length(){return this.doc??Ox(),null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new wC(this,e)}querySelector(e){e=e.toUpperCase();const t=new wC(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),$y(new wC(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)))}_callObserver(e,t){Rx(this,e,new SC(this,t,e))}toString(){return Vx(this,(e=>e.toString())).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},n){const r=e.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),zx(this,(o=>{r.insertBefore(o.toDOM(e,t,n),null)})),r}insert(e,t){null!==this.doc?mx(this.doc,(n=>{qx(n,this,e,t)})):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)mx(this.doc,(n=>{const r=e&&e instanceof Ix?e._item:e;Gx(n,this,r,t)}));else{const n=this._prelimContent,r=null===e?0:n.findIndex((t=>t===e))+1;if(0===r&&null!==e)throw Ty("Reference item not found");n.splice(r,0,...t)}}delete(e,t=1){null!==this.doc?mx(this.doc,(n=>{Kx(n,this,e,t)})):this._prelimContent.splice(e,t)}toArray(){return Fx(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return Ux(this,e)}slice(e=0,t=this.length){return Bx(this,e,t)}forEach(e){zx(this,e)}_write(e){e.writeTypeRef(UC)}}class CC extends xC{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach(((e,t)=>{this.setAttribute(t,e)})),this._prelimAttrs=null}_copy(){return new CC(this.nodeName)}clone(){const e=new CC(this.nodeName);return function(e,t){for(var n in e)t(e[n],n)}(this.getAttributes(),((t,n)=>{"string"==typeof t&&e.setAttribute(n,t)})),e.insert(0,this.toArray().map((e=>e instanceof Ix?e.clone():e))),e}toString(){const e=this.getAttributes(),t=[],n=[];for(const t in e)n.push(t);n.sort();const r=n.length;for(let o=0;o<r;o++){const r=n[o];t.push(r+'="'+e[r]+'"')}const o=this.nodeName.toLocaleLowerCase();return`<${o}${t.length>0?" "+t.join(" "):""}>${super.toString()}</${o}>`}removeAttribute(e){null!==this.doc?mx(this.doc,(t=>{Zx(t,this,e)})):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?mx(this.doc,(n=>{Jx(n,this,e,t)})):this._prelimAttrs.set(e,t)}getAttribute(e){return Xx(this,e)}hasAttribute(e){return Qx(this,e)}getAttributes(e){return e?((e,t)=>{const n={};return this._map.forEach(((e,r)=>{let o=e;for(;null!==o&&(!t.sv.has(o.id.client)||o.id.clock>=(t.sv.get(o.id.client)||0));)o=o.left;null!==o&&Yw(o,t)&&(n[r]=o.content.getContent()[o.length-1])})),n})(0,e):Yx(this)}toDOM(e=document,t={},n){const r=e.createElement(this.nodeName),o=this.getAttributes();for(const e in o){const t=o[e];"string"==typeof t&&r.setAttribute(e,t)}return zx(this,(o=>{r.appendChild(o.toDOM(e,t,n))})),void 0!==n&&n._createAssociation(r,this),r}_write(e){e.writeTypeRef($C),e.writeKey(this.nodeName)}}class SC extends Mx{constructor(e,t,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach((e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)}))}}class _C extends oC{constructor(e){super(),this.hookName=e}_copy(){return new _C(this.hookName)}clone(){const e=new _C(this.hookName);return this.forEach(((t,n)=>{e.set(n,t)})),e}toDOM(e=document,t={},n){const r=t[this.hookName];let o;return o=void 0!==r?r.createDom(this):document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),void 0!==n&&n._createAssociation(o,this),o}_write(e){e.writeTypeRef(GC),e.writeKey(this.hookName)}}class EC extends kC{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new EC}clone(){const e=new EC;return e.applyDelta(this.toDelta()),e}toDOM(e=document,t,n){const r=e.createTextNode(this.toString());return void 0!==n&&n._createAssociation(r,this),r}toString(){return this.toDelta().map((e=>{const t=[];for(const n in e.attributes){const r=[];for(const t in e.attributes[n])r.push({key:t,value:e.attributes[n][t]});r.sort(((e,t)=>e.key<t.key?-1:1)),t.push({nodeName:n,attrs:r})}t.sort(((e,t)=>e.nodeName<t.nodeName?-1:1));let n="";for(let e=0;e<t.length;e++){const r=t[e];n+=`<${r.nodeName}`;for(let e=0;e<r.attrs.length;e++){const t=r.attrs[e];n+=` ${t.key}="${t.value}"`}n+=">"}n+=e.insert;for(let e=t.length-1;e>=0;e--)n+=`</${t[e].nodeName}>`;return n})).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(WC)}}class DC{constructor(e,t){this.id=e,this.length=t}get deleted(){throw jy()}mergeWith(e){return!1}write(e,t,n){throw jy()}integrate(e,t){throw jy()}}class MC extends DC{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),rx(e.doc.store,this)}write(e,t){e.writeInfo(0),e.writeLen(this.length-t)}getMissing(e,t){return null}}class AC{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new AC(this.content)}splice(e){throw jy()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class OC{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new OC(this.len)}splice(e){const t=new OC(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){bw(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}const TC=(e,t)=>new Sw({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class jC{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new jC(TC(this.doc.guid,this.opts))}splice(e){throw jy()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class NC{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new NC(this.embed)}splice(e){throw jy()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class PC{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new PC(this.key,this.value)}splice(e){throw jy()}mergeWith(e){return!1}integrate(e,t){const n=t.parent;n._searchMarker=null,n._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}class LC{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new LC(this.arr)}splice(e){const t=new LC(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeString(void 0===t?"undefined":JSON.stringify(t))}}getRef(){return 2}}const RC="development"===Nk("node_env");class IC{constructor(e){this.arr=e,RC&&Dy(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new IC(this.arr)}splice(e){const t=new IC(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeAny(t)}}getRef(){return 8}}class BC{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new BC(this.str)}splice(e){const t=new BC(this.str.slice(e));this.str=this.str.slice(0,e);const n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"�",t.str="�"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}const FC=[e=>new nC,e=>new oC,e=>new kC,e=>new CC(e.readKey()),e=>new xC,e=>new _C(e.readKey()),e=>new EC],HC=0,zC=1,VC=2,$C=3,UC=4,GC=5,WC=6;class qC{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new qC(this.type._copy())}splice(e){throw jy()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach((t=>{t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e)})),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach((t=>{for(;null!==t;)t.gc(e,!0),t=t.left})),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const KC=(e,t)=>{let n,r=t,o=0;do{o>0&&(r=Hw(r.client,r.clock+o)),n=ix(e,r),o=r.clock-n.id.clock,r=n.redone}while(null!==r&&n instanceof QC);return{item:n,diff:o}},ZC=(e,t)=>{for(;null!==e&&e.keep!==t;)e.keep=t,e=e.parent._item},JC=(e,t,n)=>{const{client:r,clock:o}=t.id,i=new QC(Hw(r,o+n),t,Hw(r,o+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&i.markDeleted(),t.keep&&(i.keep=!0),null!==t.redone&&(i.redone=Hw(t.redone.client,t.redone.clock+n)),t.right=i,null!==i.right&&(i.right.left=i),e._mergeStructs.push(i),null!==i.parentSub&&null===i.right&&i.parent._map.set(i.parentSub,i),t.length=n,i},XC=(e,t)=>function(e){for(var n=0;n<e.length;n++)if(r=e[n],vw(r.deletions,t))return!0;var r;return!1}(e),YC=(e,t,n,r,o,i)=>{const a=e.doc,s=a.store,l=a.clientID,c=t.redone;if(null!==c)return sx(e,c);let u,d=t.parent._item,f=null;if(null!==d&&!0===d.deleted){if(null===d.redone&&(!n.has(d)||null===YC(e,d,n,r,o,i)))return null;for(;null!==d.redone;)d=sx(e,d.redone)}const p=null===d?t.parent:d.content.type;if(null===t.parentSub){for(f=t.left,u=t;null!==f;){let t=f;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:sx(e,t.redone);if(null!==t&&t.parent._item===d){f=t;break}f=f.left}for(;null!==u;){let t=u;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:sx(e,t.redone);if(null!==t&&t.parent._item===d){u=t;break}u=u.right}}else if(u=null,t.right&&!o){for(f=t;null!==f&&null!==f.right&&(f.right.redone||vw(r,f.right.id)||XC(i.undoStack,f.right.id)||XC(i.redoStack,f.right.id));)for(f=f.right;f.redone;)f=sx(e,f.redone);if(f&&null!==f.right)return null}else f=p._map.get(t.parentSub)||null;const h=nx(s,l),m=Hw(l,h),v=new QC(m,f,f&&f.lastId,u,u&&u.id,p,t.parentSub,t.content.copy());return t.redone=m,ZC(v,!0),v.integrate(e,0),v};class QC extends DC{constructor(e,t,n,r,o,i,a,s){super(e,s.getLength()),this.origin=n,this.left=t,this.right=r,this.rightOrigin=o,this.parent=i,this.parentSub=a,this.redone=null,this.content=s,this.info=this.content.isCountable()?2:0}set marker(e){(8&this.info)>0!==e&&(this.info^=8)}get marker(){return(8&this.info)>0}get keep(){return(1&this.info)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(2&this.info)>0}get deleted(){return(4&this.info)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=nx(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=nx(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Bw&&this.id.client!==this.parent.client&&this.parent.clock>=nx(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=lx(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=sx(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===MC||this.right&&this.right.constructor===MC)this.parent=null;else if(this.parent){if(this.parent.constructor===Bw){const e=ix(t,this.parent);e.constructor===MC?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===QC?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===QC&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=lx(e,e.doc.store,Hw(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,n=this.left;if(null!==n)t=n.right;else if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start;const r=new Set,o=new Set;for(;null!==t&&t!==this.right;){if(o.add(t),r.add(t),Fw(this.origin,t.origin)){if(t.id.client<this.id.client)n=t,r.clear();else if(Fw(this.rightOrigin,t.rightOrigin))break}else{if(null===t.origin||!o.has(ix(e.doc.store,t.origin)))break;r.has(ix(e.doc.store,t.origin))||(n=t,r.clear())}t=t.right}this.left=n}if(null!==this.left){const e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),rx(e.doc.store,this),this.content.integrate(e,this),fx(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new MC(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:Hw(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Fw(e.origin,this.lastId)&&this.right===e&&Fw(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach((t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))})),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),bw(e.deleteSet,this.id.client,this.id.clock,this.length),fx(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw Ny();this.content.gc(e),t?((e,t,n)=>{const r=e.clients.get(t.id.client);r[ox(r,t.id.clock)]=n})(e,this,new MC(this.id,this.length)):this.content=new OC(this.length)}write(e,t){const n=t>0?Hw(this.id.client,this.id.clock+t-1):this.origin,r=this.rightOrigin,o=this.parentSub,i=31&this.content.getRef()|(null===n?0:Xy)|(null===r?0:Jy)|(null===o?0:32);if(e.writeInfo(i),null!==n&&e.writeLeftID(n),null!==r&&e.writeRightID(r),null===n&&null===r){const t=this.parent;if(void 0!==t._item){const n=t._item;if(null===n){const n=zw(t);e.writeParentInfo(!0),e.writeString(n)}else e.writeParentInfo(!1),e.writeLeftID(n.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===Bw?(e.writeParentInfo(!1),e.writeLeftID(t)):Ny();null!==o&&e.writeString(o)}this.content.write(e,t)}}const eS=(e,t)=>tS[31&t](e),tS=[()=>{Ny()},e=>new OC(e.readLen()),e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++){const t=e.readString();"undefined"===t?n.push(void 0):n.push(JSON.parse(t))}return new LC(n)},e=>new AC(e.readBuf()),e=>new BC(e.readString()),e=>new NC(e.readJSON()),e=>new PC(e.readKey(),e.readJSON()),e=>new qC(FC[e.readTypeRef()](e)),e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new IC(n)},e=>new jC(TC(e.readString(),e.readAny())),()=>{Ny()}];class nS extends DC{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){Ny()}write(e,t){e.writeInfo(10),wb(e.restEncoder,this.length-t)}getMissing(e,t){return null}}const rS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},oS="__ $YJS$ __";function iS(e){return iS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iS(e)}function aS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sS(r.key),r)}}function sS(e){var t=function(e){if("object"!=iS(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=iS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==iS(t)?t:t+""}!0===rS[oS]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),rS[oS]=!0;var lS=function(e){return function(){return function(e,t){return t&&aS(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._=t}),[{key:"destroy",value:function(){e(this._)}}])}()},cS=lS(clearTimeout),uS=function(e,t){return new cS(setTimeout(t,e))},dS=(lS(clearInterval),lS((function(e){return"undefined"!=typeof requestAnimationFrame&&cancelAnimationFrame(e)})),lS((function(e){return"undefined"!=typeof cancelIdleCallback&&cancelIdleCallback(e)})),null),fS=function(){var e=dS;dS=null,e.forEach((function(e,t){var n=t.state.tr,r=hy.getState(t.state);r&&r.binding&&!r.binding.isDestroyed&&(e.forEach((function(e,t){n.setMeta(t,e)})),t.dispatch(n))}))},pS=function(e,t,n){if(0===e)return qw(t,0,-1);for(var r=null===t._first?null:t._first.content.type;null!==r&&t!==r;){if(r instanceof EC){if(r._length>=e)return qw(r,e,-1);if(e-=r._length,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{do{r=null===r._item?null:r._item.parent,e--}while(r!==t&&null!==r&&null!==r._item&&null===r._item.next);null!==r&&r!==t&&(r=null===r._item?null:r._item.next.content.type)}}else{var o=(n.get(r)||{nodeSize:0}).nodeSize;if(null!==r._first&&e<o)r=r._first.content.type,e--;else{if(1===e&&0===r._length&&o>1)return new $w(null===r._item?null:r._item.id,null===r._item?zw(r):null,null);if(e-=o,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{if(0===e)return r=null===r._item?r:r._item.parent,new $w(null===r._item?null:r._item.id,null===r._item?zw(r):null,null);do{r=r._item.parent,e--}while(r!==t&&null===r._item.next);r!==t&&(r=r._item.next.content.type)}}}if(null===r)throw Ny();if(0===e&&r.constructor!==EC&&r!==t)return hS(r._item.parent,r._item)}return qw(t,t._length,-1)},hS=function(e,t){var n=null,r=null;return null===e._item?r=zw(e):n=Hw(e._item.id.client,e._item.id.clock),new $w(n,r,t.id)},mS=function(e,t,n,r){var o=((e,t,n=!0)=>{const r=t.store,o=e.item,i=e.type,a=e.tname,s=e.assoc;let l=null,c=0;if(null!==o){if(nx(r,o.client)<=o.clock)return null;const e=n?KC(r,o):((e,t)=>{const n=ix(e,t);return{item:n,diff:t.clock-n.id.clock}})(r,o),t=e.item;if(!(t instanceof QC))return null;if(l=t.parent,null===l._item||!l._item.deleted){c=t.deleted||!t.countable?0:e.diff+(s>=0?0:1);let n=t.left;for(;null!==n;)!n.deleted&&n.countable&&(c+=n.length),n=n.left}}else{if(null!==a)l=t.get(a);else{if(null===i)throw Ny();{if(nx(r,i.client)<=i.clock)return null;const{item:e}=n?KC(r,i):{item:ix(r,i)};if(!(e instanceof QC&&e.content instanceof qC))return null;l=e.content.type}}c=s>=0?l._length:0}return((e,t,n=0)=>new Gw(e,t,n))(l,c,e.assoc)})(n,e);if(null===o||o.type!==t&&!Vw(t,o.type._item))return null;var i=o.type,a=0;if(i.constructor===EC)a=o.index;else if(null===i._item||!i._item.deleted){for(var s=i._first,l=0;l<i._length&&l<o.index&&null!==s;){if(!s.deleted){var c=s.content.type;l++,a+=c instanceof EC?c._length:r.get(c).nodeSize}s=s.right}a+=1}for(;i!==t&&null!==i._item;){var u=i._item.parent;if(null===u._item||!u._item.deleted){a+=1;for(var d=u._first;null!==d;){var f=d.content.type;if(f===i)break;d.deleted||(a+=f instanceof EC?f._length:r.get(f).nodeSize),d=d.right}}i=u}return a-1};function vS(e){return vS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vS(e)}function gS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function yS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bS(r.key),r)}}function bS(e){var t=function(e){if("object"!=vS(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=vS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==vS(t)?t:t+""}var kS=function(e,t){return void 0===t?!e.deleted:t.sv.has(e.id.client)&&t.sv.get(e.id.client)>e.id.clock&&!vw(t.ds,e.id)},wS=[{light:"#ecd44433",dark:"#ecd444"}],xS=function(e,t,n){if(!e.has(n)){if(e.size<t.length){var r=My();e.forEach((function(e){return r.add(e)})),t=t.filter((function(e){return!r.has(e)}))}e.set(n,(o=t)[gy(uk()*o.length)])}var o;return e.get(n)},CS=function(e,t){return{type:t.selection.jsonID,anchor:pS(t.selection.anchor,e.type,e.mapping),head:pS(t.selection.head,e.type,e.mapping)}},SS=function(){return function(e,t){return t&&yS(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var n,r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.prosemirrorView=null,this.mux=(n=!0,function(e,t){if(n){n=!1;try{e()}finally{n=!0}}else void 0!==t&&t()}),this.mapping=o,this._observeFunction=this._typeChanged.bind(this),this.doc=t.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=function(){null===r.beforeTransactionSelection&&null!=r.prosemirrorView&&(r.beforeTransactionSelection=CS(r,r.prosemirrorView.state))},this.afterAllTransactions=function(){r.beforeTransactionSelection=null},this._domSelectionInView=null}),[{key:"_tr",get:function(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}},{key:"_isLocalCursorInView",value:function(){var e=this;return!!this.prosemirrorView.hasFocus()&&(Ak&&null===this._domSelectionInView&&(uS(0,(function(){e._domSelectionInView=null})),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView)}},{key:"_isDomSelectionInView",value:function(){var e=this.prosemirrorView._root.getSelection();if(null==e||null==e.anchorNode)return!1;var t=this.prosemirrorView._root.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset),0===t.getClientRects().length&&t.startContainer&&t.collapsed&&t.selectNodeContents(t.startContainer);var n=t.getBoundingClientRect(),r=Vk.documentElement;return n.bottom>=0&&n.right>=0&&n.left<=(window.innerWidth||r.clientWidth||0)&&n.top<=(window.innerHeight||r.clientHeight||0)}},{key:"renderSnapshot",value:function(e,t){t||(t=Jw(kw(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(hy,{snapshot:e,prevSnapshot:t}))}},{key:"unrenderSnapshot",value:function(){var e=this;this.mapping.clear(),this.mux((function(){var t=e.type.toArray().map((function(t){return ES(t,e.prosemirrorView.state.schema,e.mapping)})).filter((function(e){return null!==e})),n=e._tr.replace(0,e.prosemirrorView.state.doc.content.size,new te(Z.from(t),0,0));n.setMeta(hy,{snapshot:null,prevSnapshot:null}),e.prosemirrorView.dispatch(n)}))}},{key:"_forceRerender",value:function(){var e=this;this.mapping.clear(),this.mux((function(){var t=null!==e.beforeTransactionSelection?null:e.prosemirrorView.state.selection,n=e.type.toArray().map((function(t){return ES(t,e.prosemirrorView.state.schema,e.mapping)})).filter((function(e){return null!==e})),r=e._tr.replace(0,e.prosemirrorView.state.doc.content.size,new te(Z.from(n),0,0));if(t){var o=by(ky(t.anchor,0),r.doc.content.size),i=by(ky(t.head,0),r.doc.content.size);r.setSelection(bn.create(r.doc,o,i))}e.prosemirrorView.dispatch(r.setMeta(hy,{isChangeOrigin:!0,binding:e}))}))}},{key:"_renderSnapshot",value:function(e,t,n){var r=this,o=this.doc;e||(e=Xw(this.doc)),(e instanceof Uint8Array||t instanceof Uint8Array)&&(e instanceof Uint8Array&&t instanceof Uint8Array||Ny(),o=new Sw({gc:!1}),jw(o,t),t=Xw(o),jw(o,e),e=Xw(o)),this.mapping.clear(),this.mux((function(){o.transact((function(o){var i=n.permanentUserData;i&&i.dss.forEach((function(e){mw(o,e,(function(e){}))}));var a=function(e,t){var r="added"===e?i.getUserByClientId(t.client):i.getUserByDeletedId(t);return{user:r,type:e,color:xS(n.colorMapping,n.colors,r)}},s=Hx(r.type,new Zw(t.ds,e.sv)).map((function(n){return!n._item.deleted||kS(n._item,e)||kS(n._item,t)?ES(n,r.prosemirrorView.state.schema,new Map,e,t,a):null})).filter((function(e){return null!==e})),l=r._tr.replace(0,r.prosemirrorView.state.doc.content.size,new te(Z.from(s),0,0));r.prosemirrorView.dispatch(l.setMeta(hy,{isChangeOrigin:!0}))}),hy)}))}},{key:"_typeChanged",value:function(e,t){var n=this;if(null!=this.prosemirrorView){var r=hy.getState(this.prosemirrorView.state);0!==e.length&&null==r.snapshot&&null==r.prevSnapshot?this.mux((function(){var e=function(e,t){return n.mapping.delete(t)};mw(t,t.deleteSet,(function(e){if(e.constructor===QC){var t=e.content.type;t&&n.mapping.delete(t)}})),t.changed.forEach(e),t.changedParentTypes.forEach(e);var r=n.type.toArray().map((function(e){return _S(e,n.prosemirrorView.state.schema,n.mapping)})).filter((function(e){return null!==e})),o=n._tr.replace(0,n.prosemirrorView.state.doc.content.size,new te(Z.from(r),0,0));!function(e,t,n){if(null!==t&&null!==t.anchor&&null!==t.head)if("all"===t.type)e.setSelection(new Cn(e.doc));else{var r=mS(n.doc,n.type,t.anchor,n.mapping),o=mS(n.doc,n.type,t.head,n.mapping);null!==r&&null!==o&&(e=e.setSelection(bn.create(e.doc,r,o)))}}(o,n.beforeTransactionSelection,n),o=o.setMeta(hy,{isChangeOrigin:!0,isUndoRedoOperation:t.origin instanceof bx}),null!==n.beforeTransactionSelection&&n._isLocalCursorInView()&&o.scrollIntoView(),n.prosemirrorView.dispatch(o)})):this.renderSnapshot(r.snapshot,r.prevSnapshot)}}},{key:"_prosemirrorChanged",value:function(e){var t=this;this.doc.transact((function(){BS(t.doc,t.type,e,t.mapping),t.beforeTransactionSelection=CS(t,t.prosemirrorView.state)}),hy)}},{key:"initView",value:function(e){null!=this.prosemirrorView&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}},{key:"destroy",value:function(){null!=this.prosemirrorView&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}])}(),_S=function(e,t,n,r,o,i){var a=n.get(e);if(void 0===a){if(e instanceof CC)return ES(e,t,n,r,o,i);throw jy()}return a},ES=function(e,t,n,r,o,i){var a=[],s=function(e){if(e.constructor===CC){var s=_S(e,t,n,r,o,i);null!==s&&a.push(s)}else{var l,c=null===(l=e._item.right)||void 0===l?void 0:l.content.type;c instanceof kC&&!c._item.deleted&&c._item.id.client===c.doc.clientID&&(e.applyDelta([{retain:e.length}].concat(function(e){return function(e){if(Array.isArray(e))return gS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return gS(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gS(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(c.toDelta()))),c.doc.transact((function(e){c._item.delete(e)})));var u=DS(e,t,n,r,o,i);null!==u&&u.forEach((function(e){null!==e&&a.push(e)}))}};void 0===r||void 0===o?e.toArray().forEach(s):Hx(e,new Zw(o.ds,r.sv)).forEach(s);try{var l=e.getAttributes(r);void 0!==r&&(kS(e._item,r)?kS(e._item,o)||(l.ychange=i?i("added",e._item.id):{type:"added"}):l.ychange=i?i("removed",e._item.id):{type:"removed"});var c=t.node(e.nodeName,l,a);return n.set(e,c),c}catch(t){return e.doc.transact((function(t){e._item.delete(t)}),hy),n.delete(e),null}},DS=function(e,t,n,r,o,i){var a=[],s=e.toDelta(r,o,i);try{for(var l=0;l<s.length;l++){var c=s[l],u=[];for(var d in c.attributes)u.push(t.mark(d,c.attributes[d]));a.push(t.text(c.insert,u))}}catch(t){return e.doc.transact((function(t){e._item.delete(t)}),hy),null}return a},MS=function(e,t){return e instanceof Array?function(e,t){var n=new EC,r=e.map((function(e){return{insert:e.text,attributes:IS(e.marks)}}));return n.applyDelta(r),t.set(n,e),n}(e,t):function(e,t){var n=new CC(e.type.name);for(var r in e.attrs){var o=e.attrs[r];null!==o&&"ychange"!==r&&n.setAttribute(r,o)}return n.insert(0,TS(e).map((function(e){return MS(e,t)}))),t.set(n,e),n}(e,t)},AS=function(e){return"object"===vS(e)&&null!==e},OS=function(e,t){for(var n=Object.keys(e).filter((function(t){return null!==e[t]})),r=n.length===Object.keys(t).filter((function(e){return null!==t[e]})).length,o=0;o<n.length&&r;o++){var i=n[o],a=e[i],s=t[i];r="ychange"===i||a===s||AS(a)&&AS(s)&&OS(a,s)}return r},TS=function(e){for(var t=e.content.content,n=[],r=0;r<t.length;r++){var o=t[r];if(o.isText){for(var i=[],a=t[r];r<t.length&&a.isText;a=t[++r])i.push(a);r--,n.push(i)}else n.push(o)}return n},jS=function(e,t){var n=e.toDelta();return n.length===t.length&&n.every((function(e,n){return e.insert===t[n].text&&Sy(e.attributes||{}).length===t[n].marks.length&&t[n].marks.every((function(t){return OS(e.attributes[t.type.name]||{},t.attrs)}))}))},NS=function(e,t){if(e instanceof CC&&!(t instanceof Array)&&FS(e,t)){var n=TS(t);return e._length===n.length&&OS(e.getAttributes(),t.attrs)&&e.toArray().every((function(e,t){return NS(e,n[t])}))}return e instanceof EC&&t instanceof Array&&jS(e,t)},PS=function(e,t){return e===t||e instanceof Array&&t instanceof Array&&e.length===t.length&&e.every((function(e,n){return t[n]===e}))},LS=function(e,t,n){for(var r=e.toArray(),o=TS(t),i=o.length,a=r.length,s=by(a,i),l=0,c=0,u=!1;l<s;l++){var d=r[l],f=o[l];if(PS(n.get(d),f))u=!0;else if(!NS(d,f))break}for(;l+c<s;c++){var p=r[a-c-1],h=o[i-c-1];if(PS(n.get(p),h))u=!0;else if(!NS(p,h))break}return{equalityFactor:l+c,foundMappedChild:u}},RS=function(e,t,n){n.set(e,t);var r=function(e){for(var t="",n=e._start,r={};null!==n;)n.deleted||(n.countable&&n.content instanceof BC?t+=n.content.str:n.content instanceof PC&&(r[n.content.key]=null)),n=n.right;return{str:t,nAttrs:r}}(e),o=r.nAttrs,i=r.str,a=t.map((function(e){return{insert:e.text,attributes:Object.assign({},o,IS(e.marks))}})),s=function(e,t){for(var n=0,r=0;n<e.length&&n<t.length&&e[n]===t[n];)n++;for(n>0&&Ay.test(e[n-1])&&n--;r+n<e.length&&r+n<t.length&&e[e.length-r-1]===t[t.length-r-1];)r++;return r>0&&Oy.test(e[e.length-r])&&r--,{index:n,remove:e.length-n-r,insert:t.slice(n,t.length-r)}}(i,a.map((function(e){return e.insert})).join("")),l=s.insert,c=s.remove,u=s.index;e.delete(u,c),e.insert(u,l),e.applyDelta(a.map((function(e){return{retain:e.insert.length,attributes:e.attributes}})))},IS=function(e){var t={};return e.forEach((function(e){"ychange"!==e.type.name&&(t[e.type.name]=e.attrs)})),t},BS=function(e,t,n,r){if(t instanceof CC&&t.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.set(t,n),t instanceof CC){var o=t.getAttributes(),i=n.attrs;for(var a in i)null!==i[a]?o[a]!==i[a]&&"ychange"!==a&&t.setAttribute(a,i[a]):t.removeAttribute(a);for(var s in o)void 0===i[s]&&t.removeAttribute(s)}for(var l=TS(n),c=l.length,u=t.toArray(),d=u.length,f=by(c,d),p=0,h=0;p<f;p++){var m=u[p],v=l[p];if(!PS(r.get(m),v)){if(!NS(m,v))break;r.set(m,v)}}for(;h+p+1<f;h++){var g=u[d-h-1],y=l[c-h-1];if(!PS(r.get(g),y)){if(!NS(g,y))break;r.set(g,y)}}e.transact((function(){for(;d-p-h>0&&c-p-h>0;){var n=u[p],o=l[p],i=u[d-h-1],a=l[c-h-1];if(n instanceof EC&&o instanceof Array)jS(n,o)||RS(n,o,r),p+=1;else{var s=n instanceof CC&&FS(n,o),f=i instanceof CC&&FS(i,a);if(s&&f){var m=LS(n,o,r),v=LS(i,a,r);m.foundMappedChild&&!v.foundMappedChild?f=!1:!m.foundMappedChild&&v.foundMappedChild||m.equalityFactor<v.equalityFactor?s=!1:f=!1}s?(BS(e,n,o,r),p+=1):f?(BS(e,i,a,r),h+=1):(r.delete(t.get(p)),t.delete(p,1),t.insert(p,[MS(o,r)]),p+=1)}}var g=d-p-h;if(1===d&&0===c&&u[0]instanceof EC?(r.delete(u[0]),u[0].delete(0,u[0].length)):g>0&&(t.slice(p,p+g).forEach((function(e){return r.delete(e)})),t.delete(p,g)),p+h<c){for(var y=[],b=p;b<c-h;b++)y.push(MS(l[b],r));t.insert(p,y)}}),hy)},FS=function(e,t){return!(t instanceof Array)&&e.nodeName===t.type.name},HS=new Set(["paragraph"]);function zS(e){return zS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zS(e)}function VS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VS(Object(n),!0).forEach((function(t){US(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function US(e,t,n){return(t=function(e){var t=function(e){if("object"!=zS(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=zS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==zS(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var GS=Fs.create({name:"collaboration",priority:1e3,addOptions:function(){return{document:null,field:"default",fragment:null}},addStorage:function(){return{isDisabled:!1}},onCreate:function(){this.editor.extensionManager.extensions.find((function(e){return"history"===e.name}))&&console.warn('[tiptap warn]: "@tiptap/extension-collaboration" comes with its own history support and is not compatible with "@tiptap/extension-history".')},addCommands:function(){return{undo:function(){return function(e){var t=e.tr,n=e.state,r=e.dispatch;return t.setMeta("preventDispatch",!0),0!==my.getState(n).undoManager.undoStack.length&&(!r||function(e){var t=my.getState(e).undoManager;if(null!=t)return t.undo(),!0}(n))}},redo:function(){return function(e){var t=e.tr,n=e.state,r=e.dispatch;return t.setMeta("preventDispatch",!0),0!==my.getState(n).undoManager.redoStack.length&&(!r||function(e){var t=my.getState(e).undoManager;if(null!=t)return t.redo(),!0}(n))}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-z":function(){return e.editor.commands.undo()},"Mod-y":function(){return e.editor.commands.redo()},"Shift-Mod-z":function(){return e.editor.commands.redo()}}},addProseMirrorPlugins:function(){var e,t=this,n=this.options.fragment?this.options.fragment:this.options.document.getXmlFragment(this.options.field),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.protectedNodes,n=void 0===t?HS:t,r=e.trackedOrigins,o=void 0===r?[]:r,i=e.undoManager,a=void 0===i?null:i;return new Pn({key:my,state:{init:function(e,t){var r=hy.getState(t),i=a||new bx(r.type,{trackedOrigins:new Set([hy].concat(o)),deleteFilter:function(e){return function(e,t){return!(e instanceof QC&&e.content instanceof qC&&(e.content.type instanceof kC||e.content.type instanceof CC&&t.has(e.content.type.nodeName))&&0!==e.content.type._length)}(e,n)},captureTransaction:function(e){return!1!==e.meta.get("addToHistory")}});return{undoManager:i,prevSel:null,hasUndoOps:i.undoStack.length>0,hasRedoOps:i.redoStack.length>0}},apply:function(e,t,n,r){var o=hy.getState(r).binding,i=t.undoManager,a=i.undoStack.length>0,s=i.redoStack.length>0;return o?{undoManager:i,prevSel:CS(o,n),hasUndoOps:a,hasRedoOps:s}:a!==t.hasUndoOps||s!==t.hasRedoOps?Object.assign({},t,{hasUndoOps:i.undoStack.length>0,hasRedoOps:i.redoStack.length>0}):t}},view:function(e){var t=hy.getState(e.state),n=my.getState(e.state).undoManager;return n.on("stack-item-added",(function(n){var r=n.stackItem,o=t.binding;o&&r.meta.set(o,my.getState(e.state).prevSel)})),n.on("stack-item-popped",(function(e){var n=e.stackItem,r=t.binding;r&&(r.beforeTransactionSelection=n.meta.get(r)||r.beforeTransactionSelection)})),{destroy:function(){n.destroy()}}}})}(this.options.yUndoOptions),o=r.spec.view;r.spec.view=function(e){var t=my.getState(e.state).undoManager;t.restore&&(t.restore(),t.restore=function(){});var n=o?o(e):void 0;return{destroy:function(){var e=t.trackedOrigins.has(t),r=t._observers;t.restore=function(){e&&t.trackedOrigins.add(t),t.doc.on("afterTransaction",t.afterTransactionHandler),t._observers=r},(null==n?void 0:n.destroy)&&n.destroy()}}};var i=$S($S({},this.options.ySyncOptions),{},{onFirstRender:this.options.onFirstRender}),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.colors,r=void 0===n?wS:n,o=t.colorMapping,i=void 0===o?new Map:o,a=t.permanentUserData,s=void 0===a?null:a,l=t.onFirstRender,c=void 0===l?function(){}:l,u=t.mapping,d=!1,f=new SS(e,u),p=new Pn({props:{editable:function(e){var t=hy.getState(e);return null==t.snapshot&&null==t.prevSnapshot}},key:hy,state:{init:function(t,n){return{type:e,doc:e.doc,binding:f,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:r,colorMapping:i,permanentUserData:s}},apply:function(e,t){var n=e.getMeta(hy);if(void 0!==n)for(var r in t=Object.assign({},t),n)t[r]=n[r];return t.addToHistory=!1!==e.getMeta("addToHistory"),t.isChangeOrigin=void 0!==n&&!!n.isChangeOrigin,t.isUndoRedoOperation=void 0!==n&&!!n.isChangeOrigin&&!!n.isUndoRedoOperation,null!==f.prosemirrorView&&(void 0===n||null==n.snapshot&&null==n.prevSnapshot||uS(0,(function(){null!=f.prosemirrorView&&(null==n.restore?f._renderSnapshot(n.snapshot,n.prevSnapshot,t):(f._renderSnapshot(n.snapshot,n.snapshot,t),delete t.restore,delete t.snapshot,delete t.prevSnapshot,f.mux((function(){f._prosemirrorChanged(f.prosemirrorView.state.doc)}))))}))),t}},view:function(e){return f.initView(e),null==u&&f._forceRerender(),c(),{update:function(){var t=p.getState(e.state);if(null==t.snapshot&&null==t.prevSnapshot&&(d||null!==e.state.doc.content.findDiffStart(e.state.doc.type.createAndFill().content))){if(d=!0,!1===t.addToHistory&&!t.isChangeOrigin){var n=my.getState(e.state),r=n&&n.undoManager;r&&r.stopCapturing()}f.mux((function(){t.doc.transact((function(n){n.meta.set("addToHistory",t.addToHistory),f._prosemirrorChanged(e.state.doc)}),hy)}))}},destroy:function(){f.destroy()}}}});return p}(n,i);return this.editor.options.enableContentCheck&&(null===(e=n.doc)||void 0===e||e.on("beforeTransaction",(function(){try{var e={type:"doc",content:n.toArray().map((function e(t){var n;if(t.nodeName){n={type:t.nodeName};var r=t.getAttributes();Object.keys(r).length&&(n.attrs=r);var o=t.toArray();o.length&&(n.content=o.map(e).flat())}else n=t.toDelta().map((function(e){var t={type:"text",text:e.insert};return e.attributes&&(t.marks=Object.keys(e.attributes).map((function(t){var n=e.attributes[t],r={type:t};return Object.keys(n)&&(r.attrs=n),r}))),t}));return n}))};if(0===e.content.length)return;t.editor.schema.nodeFromJSON(e).check()}catch(e){return t.editor.emit("contentError",{error:e,editor:t.editor,disableCollaboration:function(){var e;null===(e=n.doc)||void 0===e||e.destroy(),t.storage.isDisabled=!0}}),!1}}))),[a,r,this.editor.options.enableContentCheck&&new Pn({key:new In("filterInvalidContent"),filterTransaction:function(){var e;return!t.storage.isDisabled||(null===(e=n.doc)||void 0===e||e.destroy(),!0)}})].filter(Boolean)}}),WS=function(e,t,n){return e!==t},qS=function(e){var t=document.createElement("span");t.classList.add("ProseMirror-yjs-cursor"),t.setAttribute("style","border-color: ".concat(e.color));var n=document.createElement("div");n.setAttribute("style","background-color: ".concat(e.color)),n.insertBefore(document.createTextNode(e.name),null);var r=document.createTextNode("⁠"),o=document.createTextNode("⁠");return t.insertBefore(r,null),t.insertBefore(n,null),t.insertBefore(o,null),t},KS=function(e){return{style:"background-color: ".concat(e.color,"70"),class:"ProseMirror-yjs-selection"}},ZS=/^#[0-9a-fA-F]{6}$/,JS=function(e,t,n,r,o){var i=hy.getState(e),a=i.doc,s=[];return null!=i.snapshot||null!=i.prevSnapshot||0===i.binding.mapping.size?Li.create(e.doc,[]):(t.getStates().forEach((function(t,l){if(n(a.clientID,l,t)&&null!=t.cursor){var c=t.user||{};null==c.color?c.color="#ffa500":ZS.test(c.color)||console.warn("A user uses an unsupported color format",c),null==c.name&&(c.name="User: ".concat(l));var u=mS(a,i.type,Uw(t.cursor.anchor),i.binding.mapping),d=mS(a,i.type,Uw(t.cursor.head),i.binding.mapping);if(null!==u&&null!==d){var f=ky(e.doc.content.size-1,0);u=by(u,f),d=by(d,f),s.push(ji.widget(d,(function(){return r(c,l)}),{key:l+"",side:10}));var p=by(u,d),h=ky(u,d);s.push(ji.inline(p,h,o(c,l),{inclusiveEnd:!0,inclusiveStart:!1}))}}})),Li.create(e.doc,s))},XS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.awarenessStateFilter,r=void 0===n?WS:n,o=t.cursorBuilder,i=void 0===o?qS:o,a=t.selectionBuilder,s=void 0===a?KS:a,l=t.getSelection,c=void 0===l?function(e){return e.selection}:l,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cursor";return new Pn({key:vy,state:{init:function(t,n){return JS(n,e,r,i,s)},apply:function(t,n,o,a){var l=hy.getState(a),c=t.getMeta(vy);return l&&l.isChangeOrigin||c&&c.awarenessUpdated?JS(a,e,r,i,s):n.map(t.mapping,t.doc)}},props:{decorations:function(e){return vy.getState(e)}},view:function(t){var n=function(){t.docView&&function(e,t){dS||(dS=new Map,uS(0,fS)),Hy(dS,e,By).set(t,{awarenessUpdated:!0})}(t,vy)},r=function(){var n=hy.getState(t.state),r=e.getLocalState()||{};if(t.hasFocus()){var o=c(t.state),i=pS(o.anchor,n.type,n.binding.mapping),a=pS(o.head,n.type,n.binding.mapping);null!=r.cursor&&Kw(Uw(r.cursor.anchor),i)&&Kw(Uw(r.cursor.head),a)||e.setLocalStateField(u,{anchor:i,head:a})}else null!=r.cursor&&null!==mS(n.doc,n.type,Uw(r.cursor.anchor),n.binding.mapping)&&e.setLocalStateField(u,null)};return e.on("change",n),t.dom.addEventListener("focusin",r),t.dom.addEventListener("focusout",r),{update:r,destroy:function(){t.dom.removeEventListener("focusin",r),t.dom.removeEventListener("focusout",r),e.off("change",n),e.setLocalStateField(u,null)}}}})};function YS(e){return YS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YS(e)}function QS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function e_(e,t,n){return(t=function(e){var t=function(e){if("object"!=YS(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=YS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==YS(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var n_=function(e){return Array.from(e.entries()).map((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return t_(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QS(Object(n),!0).forEach((function(t){e_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({clientId:t[0]},t[1].user)}))},r_=function(){return null},o_=Fs.create({name:"collaborationCursor",priority:999,addOptions:function(){return{provider:null,user:{name:null,color:null},render:function(e){var t=document.createElement("span");t.classList.add("collaboration-cursor__caret"),t.setAttribute("style","border-color: ".concat(e.color));var n=document.createElement("div");return n.classList.add("collaboration-cursor__label"),n.setAttribute("style","background-color: ".concat(e.color)),n.insertBefore(document.createTextNode(e.name),null),t.insertBefore(n,null),t},selectionRender:KS,onUpdate:r_}},onCreate:function(){if(this.options.onUpdate!==r_&&console.warn('[tiptap warn]: DEPRECATED: The "onUpdate" option is deprecated. Please use `editor.storage.collaborationCursor.users` instead. Read more: https://tiptap.dev/api/extensions/collaboration-cursor'),!this.options.provider)throw new Error('The "provider" option is required for the CollaborationCursor extension')},addStorage:function(){return{users:[]}},addCommands:function(){var e=this;return{updateUser:function(t){return function(){return e.options.user=t,e.options.provider.awareness.setLocalStateField("user",e.options.user),!0}},user:function(e){return function(t){var n=t.editor;return console.warn('[tiptap warn]: DEPRECATED: The "user" command is deprecated. Please use "updateUser" instead. Read more: https://tiptap.dev/api/extensions/collaboration-cursor'),n.commands.updateUser(e)}}}},addProseMirrorPlugins:function(){var e=this;return[XS((e.options.provider.awareness.setLocalStateField("user",e.options.user),e.storage.users=n_(e.options.provider.awareness.states),e.options.provider.awareness.on("update",(function(){e.storage.users=n_(e.options.provider.awareness.states)})),e.options.provider.awareness),{cursorBuilder:this.options.render,selectionBuilder:this.options.selectionRender})]}});function i_(e){return i_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i_(e)}function a_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s_(r.key),r)}}function s_(e){var t=function(e){if("object"!=i_(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=i_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i_(t)?t:t+""}function l_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Pn({view:function(t){return new c_(t,e)}})}var c_=function(){return function(e,t){return t&&a_(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n){var r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(r=n.width)&&void 0!==r?r:1,this.color=!1===n.color?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map((function(e){var n=function(t){o[e](t)};return t.dom.addEventListener(e,n),{name:e,handler:n}}))}),[{key:"destroy",value:function(){var e=this;this.handlers.forEach((function(t){var n=t.name,r=t.handler;return e.editorView.dom.removeEventListener(n,r)}))}},{key:"update",value:function(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}},{key:"setCursor",value:function(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}},{key:"updateOverlay",value:function(){var e,t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent;if(n){var r=t.nodeBefore,o=t.nodeAfter;if(r||o){var i=this.editorView.nodeDOM(this.cursorPos-(r?r.nodeSize:0));if(i){var a=i.getBoundingClientRect(),s=r?a.bottom:a.top;r&&o&&(s=(s+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:a.left,right:a.right,top:s-this.width/2,bottom:s+this.width/2}}}}if(!e){var l=this.editorView.coordsAtPos(this.cursorPos);e={left:l.left-this.width/2,right:l.left+this.width/2,top:l.top,bottom:l.bottom}}var c,u,d=this.editorView.dom.offsetParent;if(this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!d||d==document.body&&"static"==getComputedStyle(d).position)c=-pageXOffset,u=-pageYOffset;else{var f=d.getBoundingClientRect();c=f.left-d.scrollLeft,u=f.top-d.scrollTop}this.element.style.left=e.left-c+"px",this.element.style.top=e.top-u+"px",this.element.style.width=e.right-e.left+"px",this.element.style.height=e.bottom-e.top+"px"}},{key:"scheduleRemoval",value:function(e){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return t.setCursor(null)}),e)}},{key:"dragover",value:function(e){if(this.editorView.editable){var t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=n&&n.type.spec.disableDropCursor,o="function"==typeof r?r(this.editorView,t,e):r;if(t&&!o){var i=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){var a=Ht(this.editorView.state.doc,i,this.editorView.dragging.slice);null!=a&&(i=a)}this.setCursor(i),this.scheduleRemoval(5e3)}}}},{key:"dragend",value:function(){this.scheduleRemoval(20)}},{key:"drop",value:function(){this.scheduleRemoval(20)}},{key:"dragleave",value:function(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}])}(),u_=["data-test"],d_=["start"],f_=["default","emptyDocument"];function p_(){return p_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=L_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},p_.apply(null,arguments)}function h_(){h_=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),s=new O(r||[]);return o(a,"_invoke",{value:E(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function g(){}function y(){}function b(){}var k={};c(k,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(T([])));x&&x!==n&&r.call(x,a)&&(k=x);var C=b.prototype=g.prototype=Object.create(k);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,i,a,s){var l=d(e[o],e,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==R_(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function E(t,n,r){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var l=D(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var c=d(t,n,r);if("normal"===c.type){if(o=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=m,r.method="throw",r.arg=c.arg)}}}function D(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,D(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(R_(t)+" is not iterable")}return y.prototype=b,o(C,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},S(_.prototype),c(_.prototype,s,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(C),c(C,l,"Generator"),c(C,a,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function m_(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function v_(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){m_(i,r,o,a,s,"next",e)}function s(e){m_(i,r,o,a,s,"throw",e)}a(void 0)}))}}function g_(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=k_(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function y_(e){return function(e){if(Array.isArray(e))return w_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||k_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k_(e,t){if(e){if("string"==typeof e)return w_(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w_(e,t):void 0}}function w_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function x_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x_(Object(n),!0).forEach((function(t){S_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S_(e,t,n){return(t=M_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function __(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function E_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,M_(r.key),r)}}function D_(e,t,n){return t&&E_(e.prototype,t),n&&E_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function M_(e){var t=function(e){if("object"!=R_(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=R_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==R_(t)?t:t+""}function A_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O_(e,t,n){return t=L_(t),function(e,t){if(t&&("object"==R_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,N_()?Reflect.construct(t,n||[],L_(e).constructor):t.apply(e,n))}function T_(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P_(e,t)}function j_(e){var t="function"==typeof Map?new Map:void 0;return j_=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(N_())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&P_(o,n.prototype),o}(e,arguments,L_(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),P_(n,e)},j_(e)}function N_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(N_=function(){return!!e})()}function P_(e,t){return P_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P_(e,t)}function L_(e){return L_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L_(e)}function R_(e){return R_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R_(e)}var I_=Object.defineProperty,B_=function(e,t,n){return function(e,t,n){return t in e?I_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=R_(t)?t+"":t,n)},F_={slash_menu:{heading:{title:"Heading 1",subtext:"Top-level heading",aliases:["h","heading1","h1"],group:"Headings"},heading_2:{title:"Heading 2",subtext:"Key section heading",aliases:["h2","heading2","subheading"],group:"Headings"},heading_3:{title:"Heading 3",subtext:"Subsection and group heading",aliases:["h3","heading3","subheading"],group:"Headings"},numbered_list:{title:"Numbered List",subtext:"List with ordered items",aliases:["ol","li","list","numberedlist","numbered list"],group:"Basic blocks"},bullet_list:{title:"Bullet List",subtext:"List with unordered items",aliases:["ul","li","list","bulletlist","bullet list"],group:"Basic blocks"},check_list:{title:"Check List",subtext:"List with checkboxes",aliases:["ul","li","list","checklist","check list","checked list","checkbox"],group:"Basic blocks"},paragraph:{title:"Paragraph",subtext:"The body of your document",aliases:["p","paragraph"],group:"Basic blocks"},code_block:{title:"Code Block",subtext:"Code block with syntax highlighting",aliases:["code","pre"],group:"Basic blocks"},page_break:{title:"Page Break",subtext:"Page separator",aliases:["page","break","separator"],group:"Basic blocks"},table:{title:"Table",subtext:"Table with editable cells",aliases:["table"],group:"Advanced"},image:{title:"Image",subtext:"Resizable image with caption",aliases:["image","imageUpload","upload","img","picture","media","url"],group:"Media"},video:{title:"Video",subtext:"Resizable video with caption",aliases:["video","videoUpload","upload","mp4","film","media","url"],group:"Media"},audio:{title:"Audio",subtext:"Embedded audio with caption",aliases:["audio","audioUpload","upload","mp3","sound","media","url"],group:"Media"},file:{title:"File",subtext:"Embedded file",aliases:["file","upload","embed","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Search for and insert an emoji",aliases:["emoji","emote","emotion","face"],group:"Others"}},placeholders:{default:"Enter text or type '/' for commands",heading:"Heading",bulletListItem:"List",numberedListItem:"List",checkListItem:"List",emptyDocument:void 0,new_comment:"Write a comment...",edit_comment:"Edit comment...",comment_reply:"Add comment..."},file_blocks:{image:{add_button_text:"Add image"},video:{add_button_text:"Add video"},audio:{add_button_text:"Add audio"},file:{add_button_text:"Add file"}},side_menu:{add_block_label:"Add block",drag_handle_label:"Open block menu"},drag_handle:{delete_menuitem:"Delete",colors_menuitem:"Colors",header_row_menuitem:"Header row",header_column_menuitem:"Header column"},table_handle:{delete_column_menuitem:"Delete column",delete_row_menuitem:"Delete row",add_left_menuitem:"Add column left",add_right_menuitem:"Add column right",add_above_menuitem:"Add row above",add_below_menuitem:"Add row below",split_cell_menuitem:"Split cell",merge_cells_menuitem:"Merge cells",background_color_menuitem:"Background color"},suggestion_menu:{no_items_title:"No items found",loading:"Loading…"},color_picker:{text_title:"Text",background_title:"Background",colors:{default:"Default",gray:"Gray",brown:"Brown",red:"Red",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"}},formatting_toolbar:{bold:{tooltip:"Bold",secondary_tooltip:"Mod+B"},italic:{tooltip:"Italic",secondary_tooltip:"Mod+I"},underline:{tooltip:"Underline",secondary_tooltip:"Mod+U"},strike:{tooltip:"Strike",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Colors"},link:{tooltip:"Create link",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Edit caption",input_placeholder:"Edit caption"},file_replace:{tooltip:{image:"Replace image",video:"Replace video",audio:"Replace audio",file:"Replace file"}},file_rename:{tooltip:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"},input_placeholder:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"}},file_download:{tooltip:{image:"Download image",video:"Download video",audio:"Download audio",file:"Download file"}},file_delete:{tooltip:{image:"Delete image",video:"Delete video",audio:"Delete audio",file:"Delete file"}},file_preview_toggle:{tooltip:"Toggle preview"},nest:{tooltip:"Nest block",secondary_tooltip:"Tab"},unnest:{tooltip:"Unnest block",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Align text left"},align_center:{tooltip:"Align text center"},align_right:{tooltip:"Align text right"},align_justify:{tooltip:"Justify text"},table_cell_merge:{tooltip:"Merge cells"},comment:{tooltip:"Add comment"}},file_panel:{upload:{title:"Upload",file_placeholder:{image:"Upload image",video:"Upload video",audio:"Upload audio",file:"Upload file"},upload_error:"Error: Upload failed"},embed:{title:"Embed",embed_button:{image:"Embed image",video:"Embed video",audio:"Embed audio",file:"Embed file"},url_placeholder:"Enter URL"}},link_toolbar:{delete:{tooltip:"Remove link"},edit:{text:"Edit link",tooltip:"Edit"},open:{tooltip:"Open in new tab"},form:{title_placeholder:"Edit title",url_placeholder:"Edit URL"}},comments:{actions:{add_reaction:"Add reaction",resolve:"Resolve",edit_comment:"Edit comment",delete_comment:"Delete comment",more_actions:"More actions"},reactions:{reacted_by:"Reacted by"},sidebar:{marked_as_resolved:"Marked as resolved",more_replies:function(e){return"".concat(e," more replies")}}},generic:{ctrl_shortcut:"Ctrl"}},H_=Object.freeze(Object.defineProperty({__proto__:null,ar:{slash_menu:{heading:{title:"عنوان 1",subtext:"يستخدم لعناوين المستوى الأعلى",aliases:["ع","عنوان1","ع1"],group:"العناوين"},heading_2:{title:"عنوان 2",subtext:"يستخدم للأقسام الرئيسية",aliases:["ع2","عنوان2","عنوان فرعي"],group:"العناوين"},heading_3:{title:"عنوان 3",subtext:"يستخدم للأقسام الفرعية والعناوين المجموعة",aliases:["ع3","عنوان3","عنوان فرعي"],group:"العناوين"},numbered_list:{title:"قائمة مرقمة",subtext:"تستخدم لعرض قائمة مرقمة",aliases:["ق","عناصر قائمة","قائمة","قائمة مرقمة"],group:"الكتل الأساسية"},bullet_list:{title:"قائمة نقطية",subtext:"تستخدم لعرض قائمة غير مرتبة",aliases:["ق","عناصر قائمة","قائمة","قائمة نقطية"],group:"الكتل الأساسية"},check_list:{title:"قائمة تحقق",subtext:"تستخدم لعرض قائمة بمربعات التحقق",aliases:["قوائم غير مرتبة","عناصر قائمة","قائمة","قائمة تحقق","قائمة التحقق","قائمة مشطوبة","مربع التحقق"],group:"الكتل الأساسية"},paragraph:{title:"فقرة",subtext:"تستخدم لنص الوثيقة الأساسي",aliases:["ف","فقرة"],group:"الكتل الأساسية"},code_block:{title:"كود",subtext:"يستخدم لعرض الكود مع تحديد الصيغة",aliases:["كود","مسبق"],group:"الكتل الأساسية"},page_break:{title:"فاصل الصفحة",subtext:"فاصل الصفحة",aliases:["page","break","separator","فاصل","الصفحة"],group:"الكتل الأساسية"},table:{title:"جدول",subtext:"يستخدم للجداول",aliases:["جدول"],group:"متقدم"},image:{title:"صورة",subtext:"إدراج صورة",aliases:["صورة","رفع صورة","تحميل","صورة","صورة","وسائط","رابط"],group:"وسائط"},video:{title:"فيديو",subtext:"إدراج فيديو",aliases:["فيديو","رفع فيديو","تحميل","فيديو","فيلم","وسائط","رابط"],group:"وسائط"},audio:{title:"صوت",subtext:"إدراج صوت",aliases:["صوت","رفع صوت","تحميل","صوت","صوت","وسائط","رابط"],group:"وسائط"},file:{title:"ملف",subtext:"إدراج ملف",aliases:["ملف","تحميل","تضمين","وسائط","رابط"],group:"وسائط"},emoji:{title:"الرموز التعبيرية",subtext:"تُستخدم لإدراج رمز تعبيري",aliases:["رمز تعبيري","إيموجي","إيموت","عاطفة","وجه"],group:"آخرون"}},placeholders:{default:"أدخل نصًا أو اكتب '/' للأوامر",heading:"عنوان",bulletListItem:"قائمة",numberedListItem:"قائمة",checkListItem:"قائمة",new_comment:"اكتب تعليقًا...",edit_comment:"تحرير التعليق...",comment_reply:"أضف تعليقًا..."},file_blocks:{image:{add_button_text:"إضافة صورة"},video:{add_button_text:"إضافة فيديو"},audio:{add_button_text:"إضافة صوت"},file:{add_button_text:"إضافة ملف"}},side_menu:{add_block_label:"إضافة محتوي",drag_handle_label:"فتح قائمة المحتويات"},drag_handle:{delete_menuitem:"حذف",colors_menuitem:"ألوان",header_row_menuitem:"عنوان الصف",header_column_menuitem:"عنوان العمود"},table_handle:{delete_column_menuitem:"حذف عمود",delete_row_menuitem:"حذف صف",add_left_menuitem:"إضافة عمود إلى اليسار",add_right_menuitem:"إضافة عمود إلى اليمين",add_above_menuitem:"إضافة صف أعلى",add_below_menuitem:"إضافة صف أسفل",split_cell_menuitem:"تقسيم الخلية",merge_cells_menuitem:"جمع الخلايا",background_color_menuitem:"لون الخلفية"},suggestion_menu:{no_items_title:"لم يتم العثور على عناصر",loading:"جارٍ التحميل…"},color_picker:{text_title:"نص",background_title:"خلفية",colors:{default:"افتراضي",gray:"رمادي",brown:"بني",red:"أحمر",orange:"برتقالي",yellow:"أصفر",green:"أخضر",blue:"أزرق",purple:"أرجواني",pink:"وردي"}},formatting_toolbar:{bold:{tooltip:"عريض",secondary_tooltip:"Mod+B"},italic:{tooltip:"مائل",secondary_tooltip:"Mod+I"},underline:{tooltip:"تحته خط",secondary_tooltip:"Mod+U"},strike:{tooltip:"مشطوب",secondary_tooltip:"Mod+Shift+X"},code:{tooltip:"كود",secondary_tooltip:""},colors:{tooltip:"ألوان"},link:{tooltip:"إنشاء رابط",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"تحرير التسمية التوضيحية",input_placeholder:"تحرير التسمية التوضيحية"},file_replace:{tooltip:{image:"استبدال الصورة",video:"استبدال الفيديو",audio:"استبدال الصوت",file:"استبدال الملف"}},file_rename:{tooltip:{image:"إعادة تسمية الصورة",video:"إعادة تسمية الفيديو",audio:"إعادة تسمية الصوت",file:"إعادة تسمية الملف"},input_placeholder:{image:"إعادة تسمية الصورة",video:"إعادة تسمية الفيديو",audio:"إعادة تسمية الصوت",file:"إعادة تسمية الملف"}},file_download:{tooltip:{image:"تنزيل الصورة",video:"تنزيل الفيديو",audio:"تنزيل الصوت",file:"تنزيل الملف"}},file_delete:{tooltip:{image:"حذف الصورة",video:"حذف الفيديو",audio:"حذف الصوت",file:"حذف الملف"}},file_preview_toggle:{tooltip:"تبديل المعاينة"},nest:{tooltip:"محتويات متداخلة",secondary_tooltip:"Tab"},unnest:{tooltip:"إلغاء التداخل",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"محاذاة النص إلى اليسار"},align_center:{tooltip:"محاذاة النص في المنتصف"},align_right:{tooltip:"محاذاة النص إلى اليمين"},align_justify:{tooltip:"ضبط النص"},table_cell_merge:{tooltip:"جمع الخلايا"},comment:{tooltip:"إضافة ملاحظة"}},file_panel:{upload:{title:"تحميل",file_placeholder:{image:"تحميل صورة",video:"تحميل فيديو",audio:"تحميل صوت",file:"تحميل ملف"},upload_error:"خطأ: فشل التحميل"},embed:{title:"تضمين",embed_button:{image:"تضمين صورة",video:"تضمين فيديو",audio:"تضمين صوت",file:"تضمين ملف"},url_placeholder:"أدخل الرابط"}},link_toolbar:{delete:{tooltip:"إزالة الرابط"},edit:{text:"تحرير الرابط",tooltip:"تحرير"},open:{tooltip:"فتح في تبويب جديد"},form:{title_placeholder:"تحرير العنوان",url_placeholder:"تحرير الرابط"}},comments:{actions:{add_reaction:"أضف تفاعلًا",resolve:"حل",edit_comment:"تحرير التعليق",delete_comment:"حذف التعليق",more_actions:"المزيد من الإجراءات"},reactions:{reacted_by:"تفاعل بواسطة"},sidebar:{marked_as_resolved:"تم وضع علامة كتم الحل",more_replies:function(e){return"".concat(e," ردود أخرى")}}},generic:{ctrl_shortcut:"Ctrl"}},de:{slash_menu:{heading:{title:"Überschrift 1",subtext:"Hauptebene Überschrift",aliases:["h","überschrift1","h1"],group:"Überschriften"},heading_2:{title:"Überschrift 2",subtext:"Wichtige Abschnittsüberschrift",aliases:["h2","überschrift2","unterüberschrift"],group:"Überschriften"},heading_3:{title:"Überschrift 3",subtext:"Unterabschnitts- und Gruppenüberschrift",aliases:["h3","überschrift3","unterüberschrift"],group:"Überschriften"},numbered_list:{title:"Nummerierte Liste",subtext:"Liste mit nummerierten Elementen",aliases:["ol","li","liste","nummerierteliste","nummerierte liste"],group:"Grundlegende blöcke"},bullet_list:{title:"Aufzählungsliste",subtext:"Liste mit unnummerierten Elementen",aliases:["ul","li","liste","aufzählungsliste","aufzählung liste"],group:"Grundlegende blöcke"},check_list:{title:"Checkliste",subtext:"Liste mit Kontrollkästchen",aliases:["ul","li","liste","checkliste","check liste","geprüfte liste","kontrollkästchen"],group:"Grundlegende blöcke"},paragraph:{title:"Absatz",subtext:"Der Hauptteil Ihres Dokuments",aliases:["p","absatz"],group:"Grundlegende blöcke"},code_block:{title:"Codeblock",subtext:"Codeblock mit Syntaxhervorhebung",aliases:["code","pre"],group:"Grundlegende blöcke"},page_break:{title:"Seitenumbruch",subtext:"Seitentrenner",aliases:["page","break","separator","seitenumbruch","trenner"],group:"Grundlegende Blöcke"},table:{title:"Tabelle",subtext:"Tabelle mit editierbaren Zellen",aliases:["tabelle"],group:"Erweitert"},image:{title:"Bild",subtext:"Größenveränderbares Bild mit Beschriftung",aliases:["bild","bildhochladen","hochladen","img","bild","medien","url"],group:"Medien"},video:{title:"Video",subtext:"Größenveränderbares Video mit Beschriftung",aliases:["video","videoupload","hochladen","mp4","film","medien","url"],group:"Medien"},audio:{title:"Audio",subtext:"Eingebettetes Audio mit Beschriftung",aliases:["audio","audioupload","hochladen","mp3","ton","medien","url"],group:"Medien"},file:{title:"Datei",subtext:"Eingebettete Datei",aliases:["datei","hochladen","einbetten","medien","url"],group:"Medien"},emoji:{title:"Emoji",subtext:"Nach Emoji suchen und einfügen",aliases:["emoji","emote","emotion","gesicht"],group:"Andere"}},placeholders:{default:"Text eingeben oder '/' für Befehle tippen",heading:"Überschrift",bulletListItem:"Liste",numberedListItem:"Liste",checkListItem:"Liste",new_comment:"Einen Kommentar schreiben...",edit_comment:"Kommentar bearbeiten...",comment_reply:"Kommentar hinzufügen..."},file_blocks:{image:{add_button_text:"Bild hinzufügen"},video:{add_button_text:"Video hinzufügen"},audio:{add_button_text:"Audio hinzufügen"},file:{add_button_text:"Datei hinzufügen"}},side_menu:{add_block_label:"Block hinzufügen",drag_handle_label:"Blockmenü öffnen"},drag_handle:{delete_menuitem:"Löschen",colors_menuitem:"Farben",header_row_menuitem:"Kopfzeile",header_column_menuitem:"Kopfspalte"},table_handle:{delete_column_menuitem:"Spalte löschen",delete_row_menuitem:"Zeile löschen",add_left_menuitem:"Spalte links hinzufügen",add_right_menuitem:"Spalte rechts hinzufügen",add_above_menuitem:"Zeile oberhalb hinzufügen",add_below_menuitem:"Zeile unterhalb hinzufügen",split_cell_menuitem:"Zelle teilen",merge_cells_menuitem:"Zellen zusammenführen",background_color_menuitem:"Hintergrundfarbe"},suggestion_menu:{no_items_title:"Keine Elemente gefunden",loading:"Laden…"},color_picker:{text_title:"Text",background_title:"Hintergrund",colors:{default:"Standard",gray:"Grau",brown:"Braun",red:"Rot",orange:"Orange",yellow:"Gelb",green:"Grün",blue:"Blau",purple:"Lila",pink:"Rosa"}},formatting_toolbar:{bold:{tooltip:"Fett",secondary_tooltip:"Mod+B"},italic:{tooltip:"Kursiv",secondary_tooltip:"Mod+I"},underline:{tooltip:"Unterstrichen",secondary_tooltip:"Mod+U"},strike:{tooltip:"Durchgestrichen",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Farben"},link:{tooltip:"Link erstellen",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Beschriftung bearbeiten",input_placeholder:"Beschriftung bearbeiten"},file_replace:{tooltip:{image:"Bild ersetzen",video:"Video ersetzen",audio:"Audio ersetzen",file:"Datei ersetzen"}},file_rename:{tooltip:{image:"Bild umbenennen",video:"Video umbenennen",audio:"Audio umbenennen",file:"Datei umbenennen"},input_placeholder:{image:"Bild umbenennen",video:"Video umbenennen",audio:"Audio umbenennen",file:"Datei umbenennen"}},file_download:{tooltip:{image:"Bild herunterladen",video:"Video herunterladen",audio:"Audio herunterladen",file:"Datei herunterladen"}},file_delete:{tooltip:{image:"Bild löschen",video:"Video löschen",audio:"Audio löschen",file:"Datei löschen"}},file_preview_toggle:{tooltip:"Vorschau umschalten"},nest:{tooltip:"Block verschachteln",secondary_tooltip:"Tab"},unnest:{tooltip:"Block entnesten",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Text linksbündig"},align_center:{tooltip:"Text zentrieren"},align_right:{tooltip:"Text rechtsbündig"},align_justify:{tooltip:"Text Blocksatz"},table_cell_merge:{tooltip:"Zellen zusammenführen"},comment:{tooltip:"Kommentar hinzufügen"}},file_panel:{upload:{title:"Hochladen",file_placeholder:{image:"Bild hochladen",video:"Video hochladen",audio:"Audio hochladen",file:"Datei hochladen"},upload_error:"Fehler: Hochladen fehlgeschlagen"},embed:{title:"Einbetten",embed_button:{image:"Bild einbetten",video:"Video einbetten",audio:"Audio einbetten",file:"Datei einbetten"},url_placeholder:"URL eingeben"}},link_toolbar:{delete:{tooltip:"Link entfernen"},edit:{text:"Link bearbeiten",tooltip:"Bearbeiten"},open:{tooltip:"In neuem Tab öffnen"},form:{title_placeholder:"Titel bearbeiten",url_placeholder:"URL bearbeiten"}},comments:{actions:{add_reaction:"Reaktion hinzufügen",resolve:"Lösen",edit_comment:"Kommentar bearbeiten",delete_comment:"Kommentar löschen",more_actions:"Weitere Aktionen"},reactions:{reacted_by:"Reagiert von"},sidebar:{marked_as_resolved:"Als gelöst markiert",more_replies:function(e){return"".concat(e," weitere Antworten")}}},generic:{ctrl_shortcut:"Strg"}},en:F_,es:{slash_menu:{heading:{title:"Encabezado 1",subtext:"Encabezado de primer nivel",aliases:["h","encabezado1","h1"],group:"Encabezados"},heading_2:{title:"Encabezado 2",subtext:"Encabezado de sección principal",aliases:["h2","encabezado2","subencabezado"],group:"Encabezados"},heading_3:{title:"Encabezado 3",subtext:"Encabezado de subsección y grupo",aliases:["h3","encabezado3","subencabezado"],group:"Encabezados"},numbered_list:{title:"Lista Numerada",subtext:"Lista con elementos ordenados",aliases:["ol","li","lista","lista numerada"],group:"Bloques básicos"},bullet_list:{title:"Lista con Viñetas",subtext:"Lista con elementos no ordenados",aliases:["ul","li","lista","lista con viñetas"],group:"Bloques básicos"},check_list:{title:"Lista de Verificación",subtext:"Lista con casillas de verificación",aliases:["ul","li","lista","lista de verificación","lista de chequeo","checkbox"],group:"Bloques básicos"},paragraph:{title:"Párrafo",subtext:"El cuerpo de tu documento",aliases:["p","párrafo"],group:"Bloques básicos"},code_block:{title:"Bloque de Código",subtext:"Bloque de código con resaltado de sintaxis",aliases:["code","pre"],group:"Bloques básicos"},page_break:{title:"Salto de página",subtext:"Separador de página",aliases:["page","break","separator","salto","separador"],group:"Bloques básicos"},table:{title:"Tabla",subtext:"Tabla con celdas editables",aliases:["tabla"],group:"Avanzado"},image:{title:"Imagen",subtext:"Imagen redimensionable con leyenda",aliases:["imagen","subir imagen","cargar","img","foto","media","url"],group:"Medios"},video:{title:"Vídeo",subtext:"Vídeo redimensionable con leyenda",aliases:["video","subir vídeo","cargar","mp4","película","media","url"],group:"Medios"},audio:{title:"Audio",subtext:"Audio incrustado con leyenda",aliases:["audio","subir audio","cargar","mp3","sonido","media","url"],group:"Medios"},file:{title:"Archivo",subtext:"Archivo incrustado",aliases:["archivo","cargar","incrustar","media","url"],group:"Medios"},emoji:{title:"Emoji",subtext:"Busca e inserta un emoji",aliases:["emoji","emoticono","emoción","cara"],group:"Otros"}},placeholders:{default:"Escribe o teclea '/' para comandos",heading:"Encabezado",bulletListItem:"Lista",numberedListItem:"Lista",checkListItem:"Lista",new_comment:"Escribe un comentario...",edit_comment:"Editar comentario...",comment_reply:"Agregar comentario..."},file_blocks:{image:{add_button_text:"Agregar imagen"},video:{add_button_text:"Agregar vídeo"},audio:{add_button_text:"Agregar audio"},file:{add_button_text:"Agregar archivo"}},side_menu:{add_block_label:"Agregar bloque",drag_handle_label:"Abrir menú de bloque"},drag_handle:{delete_menuitem:"Eliminar",colors_menuitem:"Colores",header_row_menuitem:"Fila de encabezado",header_column_menuitem:"Columna de encabezado"},table_handle:{delete_column_menuitem:"Eliminar columna",delete_row_menuitem:"Eliminar fila",add_left_menuitem:"Agregar columna a la izquierda",add_right_menuitem:"Agregar columna a la derecha",add_above_menuitem:"Agregar fila arriba",add_below_menuitem:"Agregar fila abajo",split_cell_menuitem:"Dividir celda",merge_cells_menuitem:"Combinar celdas",background_color_menuitem:"Color de fondo"},suggestion_menu:{no_items_title:"No se encontraron elementos",loading:"Cargando…"},color_picker:{text_title:"Texto",background_title:"Fondo",colors:{default:"Por defecto",gray:"Gris",brown:"Marrón",red:"Rojo",orange:"Naranja",yellow:"Amarillo",green:"Verde",blue:"Azul",purple:"Morado",pink:"Rosa"}},formatting_toolbar:{bold:{tooltip:"Negrita",secondary_tooltip:"Mod+B"},italic:{tooltip:"Cursiva",secondary_tooltip:"Mod+I"},underline:{tooltip:"Subrayado",secondary_tooltip:"Mod+U"},strike:{tooltip:"Tachado",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Código",secondary_tooltip:""},colors:{tooltip:"Colores"},link:{tooltip:"Crear enlace",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Editar leyenda",input_placeholder:"Editar leyenda"},file_replace:{tooltip:{image:"Reemplazar imagen",video:"Reemplazar vídeo",audio:"Reemplazar audio",file:"Reemplazar archivo"}},file_rename:{tooltip:{image:"Renombrar imagen",video:"Renombrar vídeo",audio:"Renombrar audio",file:"Renombrar archivo"},input_placeholder:{image:"Renombrar imagen",video:"Renombrar vídeo",audio:"Renombrar audio",file:"Renombrar archivo"}},file_download:{tooltip:{image:"Descargar imagen",video:"Descargar vídeo",audio:"Descargar audio",file:"Descargar archivo"}},file_delete:{tooltip:{image:"Eliminar imagen",video:"Eliminar vídeo",audio:"Eliminar audio",file:"Eliminar archivo"}},file_preview_toggle:{tooltip:"Alternar vista previa"},nest:{tooltip:"Anidar bloque",secondary_tooltip:"Tab"},unnest:{tooltip:"Desanidar bloque",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Alinear texto a la izquierda"},align_center:{tooltip:"Alinear texto al centro"},align_right:{tooltip:"Alinear texto a la derecha"},align_justify:{tooltip:"Justificar texto"},table_cell_merge:{tooltip:"Combinar celdas"},comment:{tooltip:"Añadir comentario"}},file_panel:{upload:{title:"Subir",file_placeholder:{image:"Subir imagen",video:"Subir vídeo",audio:"Subir audio",file:"Subir archivo"},upload_error:"Error: Fallo en la subida"},embed:{title:"Incrustar",embed_button:{image:"Incrustar imagen",video:"Incrustar vídeo",audio:"Incrustar audio",file:"Incrustar archivo"},url_placeholder:"Introduce la URL"}},link_toolbar:{delete:{tooltip:"Eliminar enlace"},edit:{text:"Editar enlace",tooltip:"Editar"},open:{tooltip:"Abrir en nueva pestaña"},form:{title_placeholder:"Editar título",url_placeholder:"Editar URL"}},comments:{actions:{add_reaction:"Agregar reacción",resolve:"Resolver",edit_comment:"Editar comentario",delete_comment:"Eliminar comentario",more_actions:"Más acciones"},reactions:{reacted_by:"Reaccionado por"},sidebar:{marked_as_resolved:"Marcado como resuelto",more_replies:function(e){return"".concat(e," respuestas más")}}},generic:{ctrl_shortcut:"Ctrl"}},fr:{slash_menu:{heading:{title:"Titre 1",subtext:"Utilisé pour un titre de premier niveau",aliases:["h","titre1","h1"],group:"Titres"},heading_2:{title:"Titre 2",subtext:"Titre de deuxième niveau Utilisé pour les sections clés",aliases:["h2","titre2","sous-titre"],group:"Titres"},heading_3:{title:"Titre 3",subtext:"Titre de troisième niveau utilisé pour les sous-sections et les titres de groupe",aliases:["h3","titre3","sous-titre"],group:"Titres"},numbered_list:{title:"Liste Numérotée",subtext:"Utilisé pour afficher une liste numérotée",aliases:["ol","li","liste","listenumérotée","liste numérotée"],group:"Blocs de base"},bullet_list:{title:"Liste à puces",subtext:"Utilisé pour afficher une liste à puce non numérotée",aliases:["ul","li","liste","listeàpuces","liste à puces","bullet points","bulletpoints"],group:"Blocs de base"},check_list:{title:"Liste de tâches",subtext:"Utilisé pour afficher une liste avec des cases à cocher",aliases:["ul","li","liste","liste de vérification","liste cochée","case à cocher","checklist","checkbox","check box","to do","todo"],group:"Blocs de base"},paragraph:{title:"Paragraphe",subtext:"Utilisé pour le corps de votre document",aliases:["p","paragraphe","texte"],group:"Blocs de base"},code_block:{title:"Bloc de code",subtext:"Bloc de code avec coloration syntaxique",aliases:["code","pre"],group:"Blocs de base"},page_break:{title:"Saut de page",subtext:"Séparateur de page",aliases:["page","break","separator","saut","séparateur"],group:"Blocs de base"},table:{title:"Tableau",subtext:"Utilisé pour les tableaux",aliases:["tableau","grille"],group:"Avancé"},image:{title:"Image",subtext:"Insérer une image",aliases:["image","uploadImage","télécharger image","téléverser image","uploader image","img","photo","média","url"],group:"Médias"},video:{title:"Vidéo",subtext:"Insérer une vidéo",aliases:["vidéo","télécharger vidéo","téléverser vidéo","mp4","film","média","url"],group:"Média"},audio:{title:"Audio",subtext:"Insérer un audio",aliases:["audio","télécharger audio","téléverser audio","mp3","son","média","url"],group:"Média"},file:{title:"Fichier",subtext:"Insérer un fichier",aliases:["fichier","téléverser fichier","intégrer fichier","insérer fichier","média","url"],group:"Média"},emoji:{title:"Emoji",subtext:"Utilisé pour insérer un emoji",aliases:["emoji","émoticône","émotion","visage","smiley"],group:"Autres"}},placeholders:{default:"Entrez du texte ou tapez '/' pour faire apparaître les options de mise en page",heading:"Titre",bulletListItem:"Liste",numberedListItem:"Liste",checkListItem:"Liste",new_comment:"Écrire un commentaire...",edit_comment:"Modifier le commentaire...",comment_reply:"Ajouter un commentaire..."},file_blocks:{image:{add_button_text:"Ajouter une image"},video:{add_button_text:"Ajouter une vidéo"},audio:{add_button_text:"Ajouter un audio"},file:{add_button_text:"Ajouter un fichier"}},side_menu:{add_block_label:"Ajouter un bloc",drag_handle_label:"Ouvrir le menu du bloc"},drag_handle:{delete_menuitem:"Supprimer",colors_menuitem:"Couleurs",header_row_menuitem:"En-tête de ligne",header_column_menuitem:"En-tête de colonne"},table_handle:{delete_column_menuitem:"Supprimer la colonne",delete_row_menuitem:"Supprimer la ligne",add_left_menuitem:"Ajouter une colonne à gauche",add_right_menuitem:"Ajouter une colonne à droite",add_above_menuitem:"Ajouter une ligne au-dessus",add_below_menuitem:"Ajouter une ligne en dessous",split_cell_menuitem:"Diviser la cellule",merge_cells_menuitem:"Fusionner les cellules",background_color_menuitem:"Couleur de fond"},suggestion_menu:{no_items_title:"Aucun élément trouvé",loading:"Chargement…"},color_picker:{text_title:"Texte",background_title:"Fond",colors:{default:"Défaut",gray:"Gris",brown:"Marron",red:"Rouge",orange:"Orange",yellow:"Jaune",green:"Vert",blue:"Bleu",purple:"Violet",pink:"Rose"}},formatting_toolbar:{bold:{tooltip:"Gras",secondary_tooltip:"Mod+B"},italic:{tooltip:"Italique",secondary_tooltip:"Mod+I"},underline:{tooltip:"Souligner",secondary_tooltip:"Mod+U"},strike:{tooltip:"Barré",secondary_tooltip:"Mod+Shift+X"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Couleurs"},link:{tooltip:"Créer un lien",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Modifier la légende",input_placeholder:"Modifier la légende"},file_replace:{tooltip:{image:"Remplacer l'image",video:"Remplacer la vidéo",audio:"Remplacer l'audio",file:"Remplacer le fichier"}},file_rename:{tooltip:{image:"Renommer l'image",video:"Renommer la vidéo",audio:"Renommer l'audio",file:"Renommer le fichier"},input_placeholder:{image:"Renommer l'image",video:"Renommer la vidéo",audio:"Renommer l'audio",file:"Renommer le fichier"}},file_download:{tooltip:{image:"Télécharger l'image",video:"Télécharger la vidéo",audio:"Télécharger l'audio",file:"Télécharger le fichier"}},file_delete:{tooltip:{image:"Supprimer l'image",video:"Supprimer la vidéo",audio:"Supprimer l'audio",file:"Supprimer le fichier"}},file_preview_toggle:{tooltip:"Basculer l'aperçu"},nest:{tooltip:"Augmenter le retrait du bloc",secondary_tooltip:"Tab"},unnest:{tooltip:"Diminuer le retait du bloc",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Aligner le texte à gauche"},align_center:{tooltip:"Aligner le texte au centre"},align_right:{tooltip:"Aligner le texte à droite"},align_justify:{tooltip:"Justifier le texte"},table_cell_merge:{tooltip:"Fusionner les cellules"},comment:{tooltip:"Ajouter un commentaire"}},file_panel:{upload:{title:"Télécharger",file_placeholder:{image:"Télécharger une image",video:"Télécharger une vidéo",audio:"Télécharger un fichier audio",file:"Télécharger un fichier"},upload_error:"Erreur : échec du téléchargement"},embed:{title:"Intégrer",embed_button:{image:"Intégrer une image",video:"Intégrer une vidéo",audio:"Intégrer un fichier audio",file:"Intégrer un fichier"},url_placeholder:"Entrez l'URL"}},link_toolbar:{delete:{tooltip:"Supprimer le lien"},edit:{text:"Modifier le lien",tooltip:"Modifier"},open:{tooltip:"Ouvrir dans un nouvel onglet"},form:{title_placeholder:"Modifier le titre",url_placeholder:"Modifier l'URL"}},comments:{actions:{add_reaction:"Ajouter une réaction",resolve:"Résoudre",edit_comment:"Modifier le commentaire",delete_comment:"Supprimer le commentaire",more_actions:"Plus d'actions"},reactions:{reacted_by:"Réagi par"},sidebar:{marked_as_resolved:"Marqué comme résolu",more_replies:function(e){return"".concat(e," réponses de plus")}}},generic:{ctrl_shortcut:"Ctrl"}},hr:{slash_menu:{heading:{title:"Naslov 1",subtext:"Glavni naslov",aliases:["h","naslov1","h1"],group:"Naslovi"},heading_2:{title:"Naslov 2",subtext:"Naslov poglavlja",aliases:["h2","naslov2","podnaslov"],group:"Naslovi"},heading_3:{title:"Naslov 3",subtext:"Naslov podpoglavlja",aliases:["h3","naslov3","podnaslov"],group:"Naslovi"},numbered_list:{title:"Numerirani popis",subtext:"Popis s numeriranim stavkama",aliases:["poredaniPopis","stavkaPopisa","popis","numeriraniPopis","numerirani popis"],group:"Osnovni blokovi"},bullet_list:{title:"Popis s oznakama",subtext:"Popis s grafičkim oznakama",aliases:["neporedaniPopis","stavkaPopisa","popis","popisSOznakama","popis s oznakama"],group:"Osnovni blokovi"},check_list:{title:"Check lista",subtext:"Popis s kućicama za označavanje",aliases:["neporedaniPopis","stavkaPopisa","popis","popisZaProvjeru","check lista","označeni popis","kućicaZaOznačavanje"],group:"Osnovni blokovi"},paragraph:{title:"Normalan tekst",subtext:"Tekst paragrafa",aliases:["p","paragraf"],group:"Osnovni blokovi"},table:{title:"Tablica",subtext:"Tablica s podesivim ćelijama",aliases:["tablica"],group:"Napredno"},code_block:{title:"Blok koda",subtext:"Blok koda sa sintaksnim isticanjem",aliases:["code","pre"],group:"Osnovni blokovi"},page_break:{title:"Prijelom stranice",subtext:"Razdjelnik stranice",aliases:["page","break","separator","prijelom","razdjelnik"],group:"Osnovni blokovi"},image:{title:"Slika",subtext:"Slika s podesivom veličinom i natpisom",aliases:["slika","učitavanjeSlike","učitaj","img","fotografija","medij","url"],group:"Mediji"},video:{title:"Video",subtext:"Video s podesivom veličinom i natpisom",aliases:["video","učitavanjeVidea","učitaj","mp4","film","medij","url"],group:"Mediji"},audio:{title:"Audio",subtext:"Audio s natpisom",aliases:["audio","učitavanjeAudija","učitaj","mp3","zvuk","medij","url"],group:"Mediji"},file:{title:"Datoteka",subtext:"Ugrađena datoteka",aliases:["datoteka","učitaj","ugradi","medij","url"],group:"Mediji"},emoji:{title:"Emoji",subtext:"Pretraži i umetni emoji",aliases:["emoji","emotikon","emocija","lice"],group:"Ostalo"}},placeholders:{default:"Unesi tekst ili upiši ‘/’ za naredbe",heading:"Naslov",bulletListItem:"Lista",numberedListItem:"Lista",checkListItem:"Lista",new_comment:"Napišite komentar...",edit_comment:"Uredi komentar...",comment_reply:"Dodaj komentar..."},file_blocks:{image:{add_button_text:"Dodaj sliku"},video:{add_button_text:"Dodaj video"},audio:{add_button_text:"Dodaj audio"},file:{add_button_text:"Dodaj datoteku"}},side_menu:{add_block_label:"Dodaj blok",drag_handle_label:"Meni za dodavanje bloka"},drag_handle:{delete_menuitem:"Ukloni",colors_menuitem:"Boje",header_row_menuitem:"Zaglavni redak",header_column_menuitem:"Zaglavni stupac"},table_handle:{delete_column_menuitem:"Ukloni stupac",delete_row_menuitem:"Ukloni redak",add_left_menuitem:"Dodaj stupac lijevo",add_right_menuitem:"Dodaj stupac desno",add_above_menuitem:"Dodaj redak iznad",add_below_menuitem:"Dodaj redak ispod",split_cell_menuitem:"Podijeli ćeliju",merge_cells_menuitem:"Spoji ćelije",background_color_menuitem:"Boja pozadine"},suggestion_menu:{no_items_title:"Stavke nisu pronađene",loading:"Učitavanje…"},color_picker:{text_title:"Tekst",background_title:"Pozadina",colors:{default:"Zadano",gray:"Siva",brown:"Smeđa",red:"Crvena",orange:"Narančasta",yellow:"Žuta",green:"Zelena",blue:"Plava",purple:"Ljubičasta",pink:"Ružičasta"}},formatting_toolbar:{bold:{tooltip:"Podebljano",secondary_tooltip:"Mod+B"},italic:{tooltip:"Kurziv",secondary_tooltip:"Mod+I"},underline:{tooltip:"Podcrtano",secondary_tooltip:"Mod+U"},strike:{tooltip:"Precrtano",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Kod",secondary_tooltip:""},colors:{tooltip:"Boja"},link:{tooltip:"Kreiraj poveznicu",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Uredi natpis",input_placeholder:"Uredi natpis"},file_replace:{tooltip:{image:"Zamijeni sliku",video:"Zamijeni video",audio:"Zamijeni audio",file:"Zamijeni datoteku"}},file_rename:{tooltip:{image:"Preimenuj sliku",video:"Preimenuj video",audio:"Preimenuj audio",file:"Preimenuj datoteku"},input_placeholder:{image:"Preimenuj sliku",video:"Preimenuj video",audio:"Preimenuj audio",file:"Preimenuj datoteku"}},file_download:{tooltip:{image:"Preuzmi sliku",video:"Preuzmi video",audio:"Preuzmi audio",file:"Preuzmi datoteku"}},file_delete:{tooltip:{image:"Ukloni sliku",video:"Ukloni video",audio:"Ukloni audio",file:"Ukloni datoteku"}},file_preview_toggle:{tooltip:"Prikaži/sakrij pregled"},nest:{tooltip:"Ugnijezdi blok",secondary_tooltip:"Tab"},unnest:{tooltip:"Razgnijezdi blok",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Poravnaj tekst lijevo"},align_center:{tooltip:"Poravnaj tekst po sredini"},align_right:{tooltip:"Poravnaj tekst desno"},align_justify:{tooltip:"Poravnaj tekst obostrano"},table_cell_merge:{tooltip:"Spoji ćelije"},comment:{tooltip:"Dodaj komentar"}},file_panel:{upload:{title:"Učitaj",file_placeholder:{image:"Učitaj sliku",video:"Učitaj video",audio:"Učitaj audio",file:"Učitaj datoteku"},upload_error:"Pogreška: Učitavanje nije uspjelo"},embed:{title:"Ugradi",embed_button:{image:"Ugradi sliku",video:"Ugradi video",audio:"Ugradi audio",file:"Ugradi datoteku"},url_placeholder:"Dodaj URL"}},link_toolbar:{delete:{tooltip:"Ukloni poveznicu"},edit:{text:"Uredi poveznicu",tooltip:"Uredi"},open:{tooltip:"Otvori u novoj kartici"},form:{title_placeholder:"Uredi naslov",url_placeholder:"Uredi URL"}},comments:{actions:{add_reaction:"Dodaj reakciju",resolve:"Riješi",edit_comment:"Uredi komentar",delete_comment:"Obriši komentar",more_actions:"Više radnji"},reactions:{reacted_by:"Reagirao/la"},sidebar:{marked_as_resolved:"Označeno kao riješeno",more_replies:function(e){return"".concat(e," dodatnih odgovora")}}},generic:{ctrl_shortcut:"Ctrl"}},is:{slash_menu:{heading:{title:"Fyrirsögn 1",subtext:"Notað fyrir efstu fyrirsögn",aliases:["h","fyrirsogn1","h1"],group:"Fyrirsagnir"},heading_2:{title:"Fyrirsögn 2",subtext:"Notað fyrir lykilhluta",aliases:["h2","fyrirsogn2","undirfyrirsogn"],group:"Fyrirsagnir"},heading_3:{title:"Fyrirsögn 3",subtext:"Notað fyrir undirhluta og hópfyrirsagnir",aliases:["h3","fyrirsogn3","undirfyrirsogn"],group:"Fyrirsagnir"},numbered_list:{title:"Númeruð listi",subtext:"Notað til að birta númeraðan lista",aliases:["ol","li","listi","numeradurlisti"],group:"Grunnblokkar"},bullet_list:{title:"Punktalisti",subtext:"Notað til að birta óraðaðan lista",aliases:["ul","li","listi","punktalisti"],group:"Grunnblokkar"},check_list:{title:"Athugunarlisti",subtext:"Notað til að sýna lista með gátreitum",aliases:["ul","li","listi","athugunarlisti","merktur listi"],group:"Grunnblokkar"},paragraph:{title:"Málsgrein",subtext:"Notað fyrir meginmál skjalsins",aliases:["p","malsgrein"],group:"Grunnblokkar"},code_block:{title:"Kóðablokk",subtext:"Kóðablokkur með litskiptingu",aliases:["kóði","pre"],group:"Grunnblokkar"},page_break:{title:"Síðubrot",subtext:"Síðuskil",aliases:["page","break","separator","síðubrot","síðuskil"],group:"Grunnblokkir"},table:{title:"Tafla",subtext:"Notað fyrir töflur",aliases:["tafla"],group:"Ítarlegt"},image:{title:"Mynd",subtext:"Settu inn mynd",aliases:["mynd","myndaupphlaed","upphlaed","img","mynd","media","url"],group:"Miðlar"},video:{title:"Myndband",subtext:"Setja inn myndband",aliases:["myndband","videoUpphala","hlaða upp","mp4","kvikmynd","miðill","url"],group:"Miðill"},audio:{title:"Hljóð",subtext:"Setja inn hljóð",aliases:["hljóð","audioUpphala","hlaða upp","mp3","hljóð","miðill","url"],group:"Miðlar"},file:{title:"Skrá",subtext:"Setja inn skrá",aliases:["skrá","hlaða upp","fella inn","miðill","url"],group:"Miðlar"},emoji:{title:"Emoji",subtext:"Notað til að setja inn smámynd",aliases:["emoji","andlitsávísun","tilfinningar","andlit"],group:"Annað"}},placeholders:{default:"Sláðu inn texta eða skrifaðu '/' fyrir skipanir",heading:"Fyrirsögn",bulletListItem:"Listi",numberedListItem:"Listi",checkListItem:"Listi",new_comment:"Skrifaðu athugasemd...",edit_comment:"Breyta athugasemd...",comment_reply:"Bæta við athugasemd..."},file_blocks:{image:{add_button_text:"Bæta við mynd"},video:{add_button_text:"Bæta við myndbandi"},audio:{add_button_text:"Bæta við hljóði"},file:{add_button_text:"Bæta við skrá"}},side_menu:{add_block_label:"Bæta við blokki",drag_handle_label:"Opna blokkarvalmynd"},drag_handle:{delete_menuitem:"Eyða",colors_menuitem:"Litir",header_row_menuitem:"Höfuðröð",header_column_menuitem:"Höfuðdálkur"},table_handle:{delete_column_menuitem:"Eyða dálki",delete_row_menuitem:"Eyða röð",add_left_menuitem:"Bæta dálki við til vinstri",add_right_menuitem:"Bæta dálki við til hægri",add_above_menuitem:"Bæta röð við fyrir ofan",add_below_menuitem:"Bæta röð við fyrir neðan",split_cell_menuitem:"Splita dálk",merge_cells_menuitem:"Sameina dálka",background_color_menuitem:"Breyta bakgrunni"},suggestion_menu:{no_items_title:"Engir hlutir fundust",loading:"Hleður…"},color_picker:{text_title:"Texti",background_title:"Bakgrunnur",colors:{default:"Sjálfgefið",gray:"Grár",brown:"Brúnn",red:"Rauður",orange:"Appelsínugulur",yellow:"Gulur",green:"Grænn",blue:"Blár",purple:"Fjólublár",pink:"Bleikur"}},formatting_toolbar:{bold:{tooltip:"Feitletrað",secondary_tooltip:"Mod+B"},italic:{tooltip:"Skáletrað",secondary_tooltip:"Mod+I"},underline:{tooltip:"Undirstrikað",secondary_tooltip:"Mod+U"},strike:{tooltip:"Yfirstrikað",secondary_tooltip:"Mod+Shift+X"},code:{tooltip:"Kóði",secondary_tooltip:""},colors:{tooltip:"Litir"},link:{tooltip:"Búa til tengil",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Breyta myndatexta",input_placeholder:"Breyta myndatexta"},file_replace:{tooltip:{image:"Skipta um mynd",video:"Skipta um myndband",audio:"Skipta um hljóð",file:"Skipta um skrá"}},file_rename:{tooltip:{image:"Endurnefna mynd",video:"Endurnefna myndband",audio:"Endurnefna hljóð",file:"Endurnefna skrá"},input_placeholder:{image:"Endurnefna mynd",video:"Endurnefna myndband",audio:"Endurnefna hljóð",file:"Endurnefna skrá"}},file_download:{tooltip:{image:"Sækja mynd",video:"Sækja myndband",audio:"Sækja hljóð",file:"Sækja skrá"}},file_delete:{tooltip:{image:"Eyða mynd",video:"Eyða myndbandi",audio:"Eyða hljóði",file:"Eyða skrá"}},file_preview_toggle:{tooltip:"Skipta um forskoðun"},nest:{tooltip:"Fella blokk saman",secondary_tooltip:"Tab"},unnest:{tooltip:"Afþýða blokk",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Vinstrijafna texta"},align_center:{tooltip:"Miðjustilla texta"},align_right:{tooltip:"Hægrijafna texta"},align_justify:{tooltip:"Jafna texta"},table_cell_merge:{tooltip:"Sameina dálka"},comment:{tooltip:"Bæta við athugasemd"}},file_panel:{upload:{title:"Hlaða upp",file_placeholder:{image:"Hlaða upp mynd",video:"Hlaða upp myndband",audio:"Hlaða upp hljóð",file:"Hlaða upp skrá"},upload_error:"Villa: Upphleðsla mistókst"},embed:{title:"Innsetja",embed_button:{image:"Innsetja mynd",video:"Innsetja myndband",audio:"Innsetja hljóð",file:"Innsetja skrá"},url_placeholder:"Sláðu inn URL"}},link_toolbar:{delete:{tooltip:"Fjarlægja tengil"},edit:{text:"Breyta tengli",tooltip:"Breyta"},open:{tooltip:"Opna í nýjum flipa"},form:{title_placeholder:"Breyta titli",url_placeholder:"Breyta URL"}},comments:{actions:{add_reaction:"Bæta við viðbrögðum",resolve:"Leysa",edit_comment:"Breyta athugasemd",delete_comment:"Eyða athugasemd",more_actions:"Fleiri aðgerðir"},reactions:{reacted_by:"Brást við af"},sidebar:{marked_as_resolved:"Merkt sem leyst",more_replies:function(e){return"".concat(e," fleiri svör")}}},generic:{ctrl_shortcut:"Ctrl"}},it:{slash_menu:{heading:{title:"Intestazione 1",subtext:"Intestazione di primo livello",aliases:["h","intestazione1","h1"],group:"Intestazioni"},heading_2:{title:"Intestazione 2",subtext:"Intestazione di sezione chiave",aliases:["h2","intestazione2","sottotitolo"],group:"Intestazioni"},heading_3:{title:"Intestazione 3",subtext:"Intestazione di sottosezione e gruppo",aliases:["h3","intestazione3","sottotitolo"],group:"Intestazioni"},numbered_list:{title:"Elenco Numerato",subtext:"Elenco con elementi ordinati",aliases:["ol","li","elenco","elenconumerato","elenco numerato"],group:"Blocchi Base"},bullet_list:{title:"Elenco Puntato",subtext:"Elenco con elementi non ordinati",aliases:["ul","li","elenco","elencopuntato","elenco puntato"],group:"Blocchi Base"},check_list:{title:"Elenco di Controllo",subtext:"Elenco con caselle di controllo",aliases:["ul","li","elenco","elencocontrollo","elenco controllo","elenco verificato","casella di controllo"],group:"Blocchi Base"},paragraph:{title:"Paragrafo",subtext:"Il corpo del tuo documento",aliases:["p","paragrafo"],group:"Blocchi Base"},code_block:{title:"Blocco di Codice",subtext:"Blocco di codice con evidenziazione della sintassi",aliases:["code","pre"],group:"Blocchi Base"},page_break:{title:"Interruzione di Pagina",subtext:"Separatore di pagina",aliases:["pagina","interruzione","separatore"],group:"Blocchi base"},table:{title:"Tabella",subtext:"Tabella con celle modificabili",aliases:["tabella"],group:"Avanzato"},image:{title:"Immagine",subtext:"Immagine ridimensionabile con didascalia",aliases:["immagine","caricaImmagine","carica","img","foto","media","url"],group:"Media"},video:{title:"Video",subtext:"Video ridimensionabile con didascalia",aliases:["video","caricaVideo","carica","mp4","film","media","url"],group:"Media"},audio:{title:"Audio",subtext:"Audio incorporato con didascalia",aliases:["audio","caricaAudio","carica","mp3","suono","media","url"],group:"Media"},file:{title:"File",subtext:"File incorporato",aliases:["file","carica","embed","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Cerca e inserisci un'emoji",aliases:["emoji","emote","emozione","faccia"],group:"Altri"}},placeholders:{default:"Inserisci testo o digita '/' per i comandi",heading:"Intestazione",bulletListItem:"Elenco",numberedListItem:"Elenco",checkListItem:"Elenco",new_comment:"Scrivi un commento...",edit_comment:"Modifica commento...",comment_reply:"Aggiungi commento..."},file_blocks:{image:{add_button_text:"Aggiungi immagine"},video:{add_button_text:"Aggiungi video"},audio:{add_button_text:"Aggiungi audio"},file:{add_button_text:"Aggiungi file"}},side_menu:{add_block_label:"Aggiungi blocco",drag_handle_label:"Apri menu blocco"},drag_handle:{delete_menuitem:"Elimina",colors_menuitem:"Colori",header_row_menuitem:"Riga intestazione",header_column_menuitem:"Colonna intestazione"},table_handle:{delete_column_menuitem:"Elimina colonna",delete_row_menuitem:"Elimina riga",add_left_menuitem:"Aggiungi colonna a sinistra",add_right_menuitem:"Aggiungi colonna a destra",add_above_menuitem:"Aggiungi riga sopra",add_below_menuitem:"Aggiungi riga sotto",split_cell_menuitem:"Dividi cella",merge_cells_menuitem:"Unisci celle",background_color_menuitem:"Colore di sfondo"},suggestion_menu:{no_items_title:"Nessun elemento trovato",loading:"Caricamento…"},color_picker:{text_title:"Testo",background_title:"Sfondo",colors:{default:"Predefinito",gray:"Grigio",brown:"Marrone",red:"Rosso",orange:"Arancione",yellow:"Giallo",green:"Verde",blue:"Blu",purple:"Viola",pink:"Rosa"}},formatting_toolbar:{bold:{tooltip:"Grassetto",secondary_tooltip:"Cmd+B"},italic:{tooltip:"Corsivo",secondary_tooltip:"Cmd+I"},underline:{tooltip:"Sottolineato",secondary_tooltip:"Cmd+U"},strike:{tooltip:"Barrato",secondary_tooltip:"Cmd+Shift+S"},code:{tooltip:"Codice",secondary_tooltip:""},colors:{tooltip:"Colori"},link:{tooltip:"Crea link",secondary_tooltip:"Cmd+K"},file_caption:{tooltip:"Modifica didascalia",input_placeholder:"Modifica didascalia"},file_replace:{tooltip:{image:"Sostituisci immagine",video:"Sostituisci video",audio:"Sostituisci audio",file:"Sostituisci file"}},file_rename:{tooltip:{image:"Rinomina immagine",video:"Rinomina video",audio:"Rinomina audio",file:"Rinomina file"},input_placeholder:{image:"Rinomina immagine",video:"Rinomina video",audio:"Rinomina audio",file:"Rinomina file"}},file_download:{tooltip:{image:"Scarica immagine",video:"Scarica video",audio:"Scarica audio",file:"Scarica file"}},file_delete:{tooltip:{image:"Elimina immagine",video:"Elimina video",audio:"Elimina audio",file:"Elimina file"}},file_preview_toggle:{tooltip:"Attiva/disattiva anteprima"},nest:{tooltip:"Annida blocco",secondary_tooltip:"Tab"},unnest:{tooltip:"Disannida blocco",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Allinea testo a sinistra"},align_center:{tooltip:"Allinea testo al centro"},align_right:{tooltip:"Allinea testo a destra"},align_justify:{tooltip:"Giustifica testo"},table_cell_merge:{tooltip:"Unisci celle"},comment:{tooltip:"Aggiungi commento"}},file_panel:{upload:{title:"Carica",file_placeholder:{image:"Carica immagine",video:"Carica video",audio:"Carica audio",file:"Carica file"},upload_error:"Errore: Caricamento fallito"},embed:{title:"Incorpora",embed_button:{image:"Incorpora immagine",video:"Incorpora video",audio:"Incorpora audio",file:"Incorpora file"},url_placeholder:"Inserisci URL"}},link_toolbar:{delete:{tooltip:"Rimuovi link"},edit:{text:"Modifica link",tooltip:"Modifica"},open:{tooltip:"Apri in una nuova scheda"},form:{title_placeholder:"Modifica titolo",url_placeholder:"Modifica URL"}},comments:{actions:{add_reaction:"Aggiungi reazione",resolve:"Risolvi",edit_comment:"Modifica commento",delete_comment:"Elimina commento",more_actions:"Altre azioni"},reactions:{reacted_by:"Reagito da"},sidebar:{marked_as_resolved:"Contrassegnato come risolto",more_replies:function(e){return"".concat(e," altre risposte")}}},generic:{ctrl_shortcut:"Ctrl"}},ja:{slash_menu:{heading:{title:"見出し１",subtext:"トップレベルの見出しに使用",aliases:["h","見出し１","h1","大見出し"],group:"見出し"},heading_2:{title:"見出し２",subtext:"重要なセクションに使用",aliases:["h2","見出し2","subheading","中見出し"],group:"見出し"},heading_3:{title:"見出し３",subtext:"セクションやグループの見出しに使用",aliases:["h3","見出し3","subheading","小見出し"],group:"見出し"},numbered_list:{title:"番号付リスト",subtext:"番号付リストを表示するために使用",aliases:["ol","li","numberedlist","numbered list","リスト","番号付リスト","番号 リスト"],group:"基本ブロック"},bullet_list:{title:"箇条書き",subtext:"箇条書きを表示するために使用",aliases:["ul","li","bulletlist","bullet list","リスト","箇条書きリスト"],group:"基本ブロック"},check_list:{title:"チェックリスト",subtext:"チェックボックス付きリストを表示するために使用されます",aliases:["ul","li","list","checklist","checked list","リスト","チェックリスト","チェックされたリスト"],group:"基本ブロック"},paragraph:{title:"標準テキスト",subtext:"本文に使用",aliases:["p","paragraph","標準テキスト"],group:"基本ブロック"},code_block:{title:"コードブロック",subtext:"シンタックスハイライト付きのコードブロック",aliases:["code","pre","コード","コードブロック"],group:"基本ブロック"},page_break:{title:"改ページ",subtext:"ページ区切り",aliases:["page","break","separator","改ページ","区切り"],group:"基本ブロック"},table:{title:"表",subtext:"表に使用",aliases:["table","表","テーブル"],group:"高度なブロック"},image:{title:"画像",subtext:"画像を挿入",aliases:["image","imageUpload","upload","img","picture","media","url","画像"],group:"メディア"},video:{title:"ビデオ",subtext:"ビデオを挿入",aliases:["video","videoUpload","upload","mp4","film","media","url","ビデオ"],group:"メディア"},audio:{title:"オーディオ",subtext:"オーディオを挿入",aliases:["audio","audioUpload","upload","mp3","sound","media","url","オーディオ"],group:"メディア"},file:{title:"ファイル",subtext:"ファイルを挿入",aliases:["file","upload","embed","media","url","ファイル"],group:"メディア"},emoji:{title:"絵文字",subtext:"絵文字を挿入するために使用します",aliases:["絵文字","顔文字","感情表現","顔"],group:"その他"}},placeholders:{default:"テキストを入力するか'/' を入力してコマンド選択",heading:"見出し",bulletListItem:"リストを追加",numberedListItem:"リストを追加",checkListItem:"リストを追加",new_comment:"コメントを書く...",edit_comment:"コメントを編集...",comment_reply:"コメントを追加..."},file_blocks:{image:{add_button_text:"画像を追加"},video:{add_button_text:"ビデオを追加"},audio:{add_button_text:"オーディオを追加"},file:{add_button_text:"ファイルを追加"}},side_menu:{add_block_label:"ブロックを追加",drag_handle_label:"ブロックメニュー"},drag_handle:{delete_menuitem:"削除",colors_menuitem:"色を変更",header_row_menuitem:"行の見出し",header_column_menuitem:"列の見出し"},table_handle:{delete_column_menuitem:"列を削除",delete_row_menuitem:"行を削除",add_left_menuitem:"左に列を追加",add_right_menuitem:"右に列を追加",add_above_menuitem:"上に行を追加",add_below_menuitem:"下に行を追加",split_cell_menuitem:"セルを分割",merge_cells_menuitem:"セルを結合",background_color_menuitem:"背景色を変更"},suggestion_menu:{no_items_title:"アイテムが見つかりません",loading:"読込中…"},color_picker:{text_title:"文字色",background_title:"背景色",colors:{default:"デフォルト",gray:"グレー",brown:"茶色",red:"赤",orange:"オレンジ",yellow:"黄色",green:"緑",blue:"青",purple:"紫",pink:"ピンク"}},formatting_toolbar:{bold:{tooltip:"太字",secondary_tooltip:"Mod+B"},italic:{tooltip:"斜体",secondary_tooltip:"Mod+I"},underline:{tooltip:"下線",secondary_tooltip:"Mod+U"},strike:{tooltip:"打ち消し",secondary_tooltip:"Mod+Shift+X"},code:{tooltip:"コード",secondary_tooltip:""},colors:{tooltip:"色"},link:{tooltip:"リンク",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"キャプションを編集",input_placeholder:"キャプションを編集"},file_replace:{tooltip:{image:"画像を置換",video:"ビデオを置換",audio:"オーディオを置換",file:"ファイルを置換"}},file_rename:{tooltip:{image:"画像の名前を変更",video:"ビデオの名前を変更",audio:"オーディオの名前を変更",file:"ファイルの名前を変更"},input_placeholder:{image:"画像の名前を変更",video:"ビデオの名前を変更",audio:"オーディオの名前を変更",file:"ファイルの名前を変更"}},file_download:{tooltip:{image:"画像をダウンロード",video:"ビデオをダウンロード",audio:"オーディオをダウンロード",file:"ファイルをダウンロード"}},file_delete:{tooltip:{image:"画像を削除",video:"ビデオを削除",audio:"オーディオを削除",file:"ファイルを削除"}},file_preview_toggle:{tooltip:"プレビューの切り替え"},nest:{tooltip:"インデント増",secondary_tooltip:"Tab"},unnest:{tooltip:"インデント減",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"左揃え"},align_center:{tooltip:"中央揃え"},align_right:{tooltip:"右揃え"},align_justify:{tooltip:"両端揃え"},table_cell_merge:{tooltip:"セルを結合"},comment:{tooltip:"コメントを追加"}},file_panel:{upload:{title:"アップロード",file_placeholder:{image:"画像をアップロード",video:"ビデオをアップロード",audio:"オーディオをアップロード",file:"ファイルをアップロード"},upload_error:"エラー: アップロードが失敗しました"},embed:{title:"埋め込み",embed_button:{image:"画像を埋め込む",video:"ビデオを埋め込む",audio:"オーディオを埋め込む",file:"ファイルを埋め込む"},url_placeholder:"URLを入力"}},link_toolbar:{delete:{tooltip:"リンクを解除"},edit:{text:"リンクを編集",tooltip:"編集"},open:{tooltip:"新しいタブでリンクを開く"},form:{title_placeholder:"タイトルを編集",url_placeholder:"URLを編集"}},comments:{actions:{add_reaction:"リアクションを追加",resolve:"解決",edit_comment:"コメントを編集",delete_comment:"コメントを削除",more_actions:"その他の操作"},reactions:{reacted_by:"リアクションした人"},sidebar:{marked_as_resolved:"解決済みとしてマーク",more_replies:function(e){return"".concat(e," 件の追加返信")}}},generic:{ctrl_shortcut:"Ctrl"}},ko:{slash_menu:{heading:{title:"제목1",subtext:"섹션 제목(대)",aliases:["h","제목1","h1","대제목"],group:"제목"},heading_2:{title:"제목2",subtext:"섹션 제목(중)",aliases:["h2","제목2","중제목"],group:"제목"},heading_3:{title:"제목3",subtext:"섹션 제목(소)",aliases:["h3","제목3","subheading"],group:"제목"},numbered_list:{title:"번호 매기기 목록",subtext:"번호가 매겨진 목록을 추가합니다.",aliases:["ol","li","목록","번호 매기기 목록","번호 목록"],group:"기본 블록"},bullet_list:{title:"글머리 기호 목록",subtext:"간단한 글머리 기호를 추가합니다.",aliases:["ul","li","목록","글머리 기호 목록","글머리 목록"],group:"기본 블록"},check_list:{title:"체크리스트",subtext:"체크박스가 있는 목록을 표시하는 데 사용",aliases:["ul","li","목록","체크리스트","체크 리스트","체크된 목록","체크박스"],group:"기본 블록"},paragraph:{title:"본문",subtext:"일반 텍스트",aliases:["p","paragraph","본문"],group:"기본 블록"},code_block:{title:"코드 블록",subtext:"구문 강조가 있는 코드 블록",aliases:["code","pre"],group:"기본 블록"},page_break:{title:"페이지 나누기",subtext:"페이지 구분자",aliases:["page","break","separator","페이지","구분자"],group:"기본 블록"},table:{title:"표",subtext:"간단한 표를 추가합니다.",aliases:["표"],group:"고급"},image:{title:"이미지",subtext:"이미지 파일을 업로드합니다.",aliases:["image","imageUpload","upload","img","picture","media","이미지","url"],group:"미디어"},video:{title:"비디오",subtext:"비디오 삽입",aliases:["video","videoUpload","upload","mp4","film","media","동영상","url"],group:"미디어"},audio:{title:"오디오",subtext:"오디오 삽입",aliases:["audio","audioUpload","upload","mp3","sound","media","오디오","url"],group:"미디어"},file:{title:"파일",subtext:"파일 삽입",aliases:["file","upload","embed","media","파일","url"],group:"미디어"},emoji:{title:"이모지",subtext:"이모지 삽입용으로 사용됩니다",aliases:["이모지","emoji","감정 표현","emotion expression","표정","face expression","얼굴","face"],group:"기타"}},placeholders:{default:"텍스트를 입력하거나 /를 입력하여 명령을 입력하세요.",heading:"제목",bulletListItem:"목록",numberedListItem:"목록",checkListItem:"목록",new_comment:"댓글 작성...",edit_comment:"댓글 수정...",comment_reply:"댓글 추가..."},file_blocks:{image:{add_button_text:"이미지 추가"},video:{add_button_text:"비디오 추가"},audio:{add_button_text:"오디오 추가"},file:{add_button_text:"파일 추가"}},side_menu:{add_block_label:"블록 추가",drag_handle_label:"블록 메뉴 열기"},drag_handle:{delete_menuitem:"삭제",colors_menuitem:"색깔",header_row_menuitem:"행 제목",header_column_menuitem:"열 제목"},table_handle:{delete_column_menuitem:"열 1개 삭제",delete_row_menuitem:"행 삭제",add_left_menuitem:"왼쪽에 열 1개 추가",add_right_menuitem:"오른쪽에 열 1개 추가",add_above_menuitem:"위에 행 1개 추가",add_below_menuitem:"아래에 행 1개 추가",split_cell_menuitem:"셀 분할",merge_cells_menuitem:"셀 병합",background_color_menuitem:"배경색 변경"},suggestion_menu:{no_items_title:"항목을 찾을 수 없음",loading:"로딩 중…"},color_picker:{text_title:"텍스트",background_title:"배경",colors:{default:"기본",gray:"회색",brown:"갈색",red:"빨간색",orange:"주황색",yellow:"노란색",green:"녹색",blue:"파란색",purple:"보라색",pink:"분홍색"}},formatting_toolbar:{bold:{tooltip:"진하게",secondary_tooltip:"Mod+B"},italic:{tooltip:"기울임",secondary_tooltip:"Mod+I"},underline:{tooltip:"밑줄",secondary_tooltip:"Mod+U"},strike:{tooltip:"취소선",secondary_tooltip:"Mod+Shift+X"},code:{tooltip:"코드",secondary_tooltip:""},colors:{tooltip:"색깔"},link:{tooltip:"링크 만들기",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"이미지 캡션 수정",input_placeholder:"이미지 캡션 수정"},file_replace:{tooltip:{image:"이미지 교체",video:"비디오 교체",audio:"오디오 교체",file:"파일 교체"}},file_rename:{tooltip:{image:"이미지 이름 변경",video:"비디오 이름 변경",audio:"오디오 이름 변경",file:"파일 이름 변경"},input_placeholder:{image:"이미지 이름 변경",video:"비디오 이름 변경",audio:"오디오 이름 변경",file:"파일 이름 변경"}},file_download:{tooltip:{image:"이미지 다운로드",video:"비디오 다운로드",audio:"오디오 다운로드",file:"파일 다운로드"}},file_delete:{tooltip:{image:"이미지 삭제",video:"비디오 삭제",audio:"오디오 삭제",file:"파일 삭제"}},file_preview_toggle:{tooltip:"미리보기 전환"},nest:{tooltip:"중첩 블록",secondary_tooltip:"Tab"},unnest:{tooltip:"비중첩 블록",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"텍스트 왼쪽 맞춤"},align_center:{tooltip:"텍스트 가운데 맞춤"},align_right:{tooltip:"텍스트 오른쪽 맞춤"},align_justify:{tooltip:"텍스트 양쪽 맞춤"},table_cell_merge:{tooltip:"셀 병합"},comment:{tooltip:"코멘트 추가"}},file_panel:{upload:{title:"업로드",file_placeholder:{image:"이미지 업로드",video:"비디오 업로드",audio:"오디오 업로드",file:"파일 업로드"},upload_error:"오류: 업로드 실패"},embed:{title:"임베드",embed_button:{image:"이미지 삽입",video:"비디오 삽입",audio:"오디오 삽입",file:"파일 삽입"},url_placeholder:"URL을 입력하세요."}},link_toolbar:{delete:{tooltip:"링크 삭제"},edit:{text:"링크 수정",tooltip:"수정"},open:{tooltip:"새 탭으로 열기"},form:{title_placeholder:"제목 수정",url_placeholder:"URL 수정"}},comments:{actions:{add_reaction:"반응 추가",resolve:"해결",edit_comment:"댓글 수정",delete_comment:"댓글 삭제",more_actions:"더 많은 작업"},reactions:{reacted_by:"반응한 사람"},sidebar:{marked_as_resolved:"해결됨으로 표시됨",more_replies:function(e){return"".concat(e,"개의 추가 답글")}}},generic:{ctrl_shortcut:"Ctrl"}},nl:{slash_menu:{heading:{title:"Kop 1",subtext:"Gebruikt voor een hoofdkop",aliases:["h","kop1","h1"],group:"Koppen"},heading_2:{title:"Kop 2",subtext:"Gebruikt voor belangrijke secties",aliases:["h2","kop2","subkop"],group:"Koppen"},heading_3:{title:"Kop 3",subtext:"Gebruikt voor subsecties en groepskoppen",aliases:["h3","kop3","subkop"],group:"Koppen"},numbered_list:{title:"Genummerde Lijst",subtext:"Gebruikt om een genummerde lijst weer te geven",aliases:["ol","li","lijst","genummerdelijst","genummerde lijst"],group:"Basisblokken"},bullet_list:{title:"Puntenlijst",subtext:"Gebruikt om een ongeordende lijst weer te geven",aliases:["ul","li","lijst","puntenlijst","punten lijst"],group:"Basisblokken"},check_list:{title:"Controlelijst",subtext:"Gebruikt om een lijst met selectievakjes weer te geven",aliases:["ul","li","lijst","aangevinkte lijst","selectievakje"],group:"Basisblokken"},paragraph:{title:"Paragraaf",subtext:"Gebruikt voor de hoofdtekst van uw document",aliases:["p","paragraaf"],group:"Basisblokken"},code_block:{title:"Codeblok",subtext:"Codeblok met syntax highlighting",aliases:["code","pre"],group:"Basisblokken"},page_break:{title:"Pagina-einde",subtext:"Paginascheiding",aliases:["page","break","separator","pagina","scheiding"],group:"Basisblokken"},table:{title:"Tabel",subtext:"Gebruikt voor tabellen",aliases:["tabel"],group:"Geavanceerd"},image:{title:"Afbeelding",subtext:"Voeg een afbeelding in",aliases:["afbeelding","imageUpload","upload","img","foto","media","url"],group:"Media"},video:{title:"Video",subtext:"Voeg een video in",aliases:["video","videoUploaden","upload","mp4","film","media","url","drive","dropbox"],group:"Media"},audio:{title:"Audio",subtext:"Voeg audio in",aliases:["audio","audioUploaden","upload","mp3","geluid","media","url"],group:"Media"},file:{title:"Bestand",subtext:"Voeg een bestand in",aliases:["bestand","upload","insluiten","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Gebruikt voor het invoegen van een emoji",aliases:["emoji","emotie-uitdrukking","gezichtsuitdrukking","gezicht"],group:"Overig"}},placeholders:{default:"Voer tekst in of type '/' voor commando's",heading:"Kop",bulletListItem:"Lijst",numberedListItem:"Lijst",checkListItem:"Lijst",new_comment:"Schrijf een reactie...",edit_comment:"Reactie bewerken...",comment_reply:"Reactie toevoegen..."},file_blocks:{image:{add_button_text:"Afbeelding toevoegen"},video:{add_button_text:"Video toevoegen"},audio:{add_button_text:"Audio toevoegen"},file:{add_button_text:"Bestand toevoegen"}},side_menu:{add_block_label:"Nieuw blok",drag_handle_label:"Open blok menu"},drag_handle:{delete_menuitem:"Verwijder",colors_menuitem:"Kleuren",header_row_menuitem:"Kopregel",header_column_menuitem:"Kopkolom"},table_handle:{delete_column_menuitem:"Verwijder kolom",delete_row_menuitem:"Verwijder rij",add_left_menuitem:"Voeg kolom links toe",add_right_menuitem:"Voeg kolom rechts toe",add_above_menuitem:"Voeg rij boven toe",add_below_menuitem:"Voeg rij onder toe",split_cell_menuitem:"Splits cel",merge_cells_menuitem:"Voeg cellen samen",background_color_menuitem:"Achtergrondkleur wijzigen"},suggestion_menu:{no_items_title:"Geen items gevonden",loading:"Laden…"},color_picker:{text_title:"Tekst",background_title:"Achtergrond",colors:{default:"Standaard",gray:"Grijs",brown:"Bruin",red:"Rood",orange:"Oranje",yellow:"Geel",green:"Groen",blue:"Blauw",purple:"Paars",pink:"Roze"}},formatting_toolbar:{bold:{tooltip:"Vet",secondary_tooltip:"Mod+B"},italic:{tooltip:"Cursief",secondary_tooltip:"Mod+I"},underline:{tooltip:"Onderstrepen",secondary_tooltip:"Mod+U"},strike:{tooltip:"Doorstrepen",secondary_tooltip:"Mod+Shift+X"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Kleuren"},link:{tooltip:"Maak link",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Bewerk onderschrift",input_placeholder:"Bewerk onderschrift"},file_replace:{tooltip:{image:"Afbeelding vervangen",video:"Video vervangen",audio:"Audio vervangen",file:"Bestand vervangen"}},file_rename:{tooltip:{image:"Afbeelding hernoemen",video:"Video hernoemen",audio:"Audio hernoemen",file:"Bestand hernoemen"},input_placeholder:{image:"Afbeelding hernoemen",video:"Video hernoemen",audio:"Audio hernoemen",file:"Bestand hernoemen"}},file_download:{tooltip:{image:"Afbeelding downloaden",video:"Video downloaden",audio:"Audio downloaden",file:"Bestand downloaden"}},file_delete:{tooltip:{image:"Afbeelding verwijderen",video:"Video verwijderen",audio:"Audio verwijderen",file:"Bestand verwijderen"}},file_preview_toggle:{tooltip:"Voorbeeldschakelaar"},nest:{tooltip:"Nest blok",secondary_tooltip:"Tab"},unnest:{tooltip:"Ontnest blok",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Tekst links uitlijnen"},align_center:{tooltip:"Tekst centreren"},align_right:{tooltip:"Tekst rechts uitlijnen"},align_justify:{tooltip:"Tekst uitvullen"},table_cell_merge:{tooltip:"Voeg cellen samen"},comment:{tooltip:"Commentaar toevoegen"}},file_panel:{upload:{title:"Upload",file_placeholder:{image:"Afbeelding uploaden",video:"Video uploaden",audio:"Audio uploaden",file:"Bestand uploaden"},upload_error:"Fout: Upload mislukt"},embed:{title:"Insluiten",embed_button:{image:"Afbeelding insluiten",video:"Video insluiten",audio:"Audio insluiten",file:"Bestand insluiten"},url_placeholder:"Voer URL in"}},link_toolbar:{delete:{tooltip:"Verwijder link"},edit:{text:"Bewerk link",tooltip:"Bewerk"},open:{tooltip:"Open in nieuw tabblad"},form:{title_placeholder:"Bewerk titel",url_placeholder:"Bewerk URL"}},comments:{actions:{add_reaction:"Reactie toevoegen",resolve:"Oplossen",edit_comment:"Reactie bewerken",delete_comment:"Reactie verwijderen",more_actions:"Meer acties"},reactions:{reacted_by:"Gereageerd door"},sidebar:{marked_as_resolved:"Gemarkeerd als opgelost",more_replies:function(e){return"".concat(e," extra reacties")}}},generic:{ctrl_shortcut:"Ctrl"}},no:{slash_menu:{heading:{title:"Overskrift 1",subtext:"Toppnivåoverskrift",aliases:["h","overskrift1","h1"],group:"Overskrifter"},heading_2:{title:"Overskrift 2",subtext:"Hovedseksjonsoverskrift",aliases:["h2","overskrift2","underoverskrift"],group:"Overskrifter"},heading_3:{title:"Overskrift 3",subtext:"Underseksjon og gruppeoverskrift",aliases:["h3","overskrift3","underoverskrift"],group:"Overskrifter"},numbered_list:{title:"Nummerert liste",subtext:"Liste med ordnede elementer",aliases:["ol","li","liste","nummerertliste","nummerert liste"],group:"Grunnleggende blokker"},bullet_list:{title:"Punktliste",subtext:"Liste med uordnede elementer",aliases:["ul","li","liste","punktliste","punkt liste"],group:"Grunnleggende blokker"},check_list:{title:"Sjekkliste",subtext:"Liste med avmerkingsbokser",aliases:["ul","li","liste","sjekkliste","sjekk liste","avmerket liste","avmerkingsboks"],group:"Grunnleggende blokker"},paragraph:{title:"Avsnitt",subtext:"Hoveddelen av dokumentet ditt",aliases:["p","avsnitt"],group:"Grunnleggende blokker"},code_block:{title:"Kodeblokk",subtext:"Kodeblokk med syntaksfremheving",aliases:["kode","pre"],group:"Grunnleggende blokker"},page_break:{title:"Sideskift",subtext:"Sideskilletegn",aliases:["side","skift","skilletegn"],group:"Grunnleggende blokker"},table:{title:"Tabell",subtext:"Tabell med redigerbare celler",aliases:["tabell"],group:"Avansert"},image:{title:"Bilde",subtext:"Justerbart bilde med bildetekst",aliases:["bilde","bildeopplasting","opplasting","img","bilde","media","url"],group:"Media"},video:{title:"Video",subtext:"Justerbar video med bildetekst",aliases:["video","videoopplasting","opplasting","mp4","film","media","url"],group:"Media"},audio:{title:"Lyd",subtext:"legg til lyd med bildetekst",aliases:["lyd","lydopplasting","opplasting","mp3","lyd","media","url"],group:"Media"},file:{title:"Fil",subtext:"Innebygd fil",aliases:["fil","opplasting","innebygd","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Søk etter og legg til en emoji",aliases:["emoji","emote","emosjon","ansikt"],group:"Andre"}},placeholders:{default:"Skriv tekst eller skriv '/' for å vise kommandoer",heading:"Overskrift",bulletListItem:"Liste",numberedListItem:"Liste",checkListItem:"Liste",new_comment:"Skriv en kommentar...",edit_comment:"Rediger kommentar...",comment_reply:"Legg til kommentar..."},file_blocks:{image:{add_button_text:"Legg til bilde"},video:{add_button_text:"Legg til video"},audio:{add_button_text:"Legg til lyd"},file:{add_button_text:"Legg til fil"}},side_menu:{add_block_label:"Legg til blokk",drag_handle_label:"Åpne blokkmeny"},drag_handle:{delete_menuitem:"Slett",colors_menuitem:"Farger",header_row_menuitem:"Rad overskrift",header_column_menuitem:"Kolonne overskrift"},table_handle:{delete_column_menuitem:"Slett kolonne",delete_row_menuitem:"Slett rad",add_left_menuitem:"Legg til kolonne til venstre",add_right_menuitem:"Legg til kolonne til høyre",add_above_menuitem:"Legg til rad over",add_below_menuitem:"Legg til rad under",split_cell_menuitem:"Del celle",merge_cells_menuitem:"Slå sammen celler",background_color_menuitem:"Bakgrunnsfarge"},suggestion_menu:{no_items_title:"Ingen elementer funnet",loading:"Laster…"},color_picker:{text_title:"Tekst",background_title:"Bakgrunn",colors:{default:"Standard",gray:"Grå",brown:"Brun",red:"Rød",orange:"Oransje",yellow:"Gul",green:"Grønn",blue:"Blå",purple:"Lilla",pink:"Rosa"}},formatting_toolbar:{bold:{tooltip:"Fet",secondary_tooltip:"Mod+B"},italic:{tooltip:"Kursiv",secondary_tooltip:"Mod+I"},underline:{tooltip:"Understrek",secondary_tooltip:"Mod+U"},strike:{tooltip:"Gjennomstrek",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Kode",secondary_tooltip:""},colors:{tooltip:"Farger"},link:{tooltip:"Opprett lenke",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Rediger bildetekst",input_placeholder:"Rediger bildetekst"},file_replace:{tooltip:{image:"Bytt ut bilde",video:"Bytt ut video",audio:"Bytt ut lyd",file:"Bytt ut fil"}},file_rename:{tooltip:{image:"Endre navn på bilde",video:"Endre navn på video",audio:"Endre navn på lyd",file:"Endre navn på fil"},input_placeholder:{image:"Endre navn på bilde",video:"Endre navn på video",audio:"Endre navn på lyd",file:"Endre navn på fil"}},file_download:{tooltip:{image:"Last ned bilde",video:"Last ned video",audio:"Last ned lyd",file:"Last ned fil"}},file_delete:{tooltip:{image:"Slett bilde",video:"Slett video",audio:"Slett lyd",file:"Slett fil"}},file_preview_toggle:{tooltip:"Veksle forhåndsvisning"},nest:{tooltip:"Plasser blokk inni",secondary_tooltip:"Tab"},unnest:{tooltip:"Ta blokk ut",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Venstrejuster tekst"},align_center:{tooltip:"Midtstill tekst"},align_right:{tooltip:"Høyrejuster tekst"},align_justify:{tooltip:"Juster tekst"},comment:{tooltip:"Legg til kommentar"},table_cell_merge:{tooltip:"Slå sammen celler"}},file_panel:{upload:{title:"Last opp",file_placeholder:{image:"Last opp bilde",video:"Last opp video",audio:"Last opp lyd",file:"Last opp fil"},upload_error:"Feil: Opplasting mislyktes"},embed:{title:"Bygg inn",embed_button:{image:"Bygg inn bilde",video:"Bygg inn video",audio:"Bygg inn lyd",file:"Bygg inn fil"},url_placeholder:"Skriv inn URL"}},link_toolbar:{delete:{tooltip:"Fjern lenke"},edit:{text:"Rediger lenke",tooltip:"Rediger"},open:{tooltip:"Åpne i ny fane"},form:{title_placeholder:"Rediger tittel",url_placeholder:"Rediger URL"}},comments:{actions:{add_reaction:"Legg til reaksjon",resolve:"Løs",edit_comment:"Rediger kommentar",delete_comment:"Slett kommentar",more_actions:"Flere handlinger"},reactions:{reacted_by:"Reagert av"},sidebar:{marked_as_resolved:"Merket som løst",more_replies:function(e){return"".concat(e," flere svar")}}},generic:{ctrl_shortcut:"Ctrl"}},pl:{slash_menu:{heading:{title:"Nagłówek 1",subtext:"Używany dla nagłówka najwyższego poziomu",aliases:["h","naglowek1","h1"],group:"Nagłówki"},heading_2:{title:"Nagłówek 2",subtext:"Używany dla kluczowych sekcji",aliases:["h2","naglowek2","podnaglowek"],group:"Nagłówki"},heading_3:{title:"Nagłówek 3",subtext:"Używany dla podsekcji i grup nagłówków",aliases:["h3","naglowek3","podnaglowek"],group:"Nagłówki"},numbered_list:{title:"Lista numerowana",subtext:"Używana do wyświetlania listy numerowanej",aliases:["ol","li","lista","numerowana lista"],group:"Podstawowe bloki"},bullet_list:{title:"Lista punktowana",subtext:"Używana do wyświetlania listy bez numeracji",aliases:["ul","li","lista","punktowana lista"],group:"Podstawowe bloki"},check_list:{title:"Lista z polami wyboru",subtext:"Używana do wyświetlania listy z polami wyboru",aliases:["ul","li","lista","lista z polami wyboru","pole wyboru"],group:"Podstawowe bloki"},paragraph:{title:"Akapit",subtext:"Używany dla treści dokumentu",aliases:["p","akapit"],group:"Podstawowe bloki"},code_block:{title:"Blok kodu",subtext:"Blok kodu z podświetleniem składni",aliases:["kod","pre"],group:"Podstawowe bloki"},page_break:{title:"Podział strony",subtext:"Separator strony",aliases:["page","break","separator","podział","separator"],group:"Podstawowe bloki"},table:{title:"Tabela",subtext:"Używana do tworzenia tabel",aliases:["tabela"],group:"Zaawansowane"},image:{title:"Zdjęcie",subtext:"Wstaw zdjęcie",aliases:["obraz","wrzućZdjęcie","wrzuć","img","zdjęcie","media","url"],group:"Media"},video:{title:"Wideo",subtext:"Wstaw wideo",aliases:["wideo","wrzućWideo","wrzuć","mp4","film","media","url"],group:"Media"},audio:{title:"Audio",subtext:"Wstaw audio",aliases:["audio","wrzućAudio","wrzuć","mp3","dźwięk","media","url"],group:"Media"},file:{title:"Plik",subtext:"Wstaw plik",aliases:["plik","wrzuć","wstaw","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Używane do wstawiania emoji",aliases:["emoji","emotka","wyrażenie emocji","twarz"],group:"Inne"}},placeholders:{default:"Wprowadź tekst lub wpisz '/' aby użyć poleceń",heading:"Nagłówek",bulletListItem:"Lista",numberedListItem:"Lista",checkListItem:"Lista",new_comment:"Napisz komentarz...",edit_comment:"Edytuj komentarz...",comment_reply:"Dodaj komentarz..."},file_blocks:{image:{add_button_text:"Dodaj zdjęcie"},video:{add_button_text:"Dodaj wideo"},audio:{add_button_text:"Dodaj audio"},file:{add_button_text:"Dodaj plik"}},side_menu:{add_block_label:"Dodaj blok",drag_handle_label:"Otwórz menu bloków"},drag_handle:{delete_menuitem:"Usuń",colors_menuitem:"Kolory",header_row_menuitem:"Nagłówek wiersza",header_column_menuitem:"Nagłówek kolumny"},table_handle:{delete_column_menuitem:"Usuń kolumnę",delete_row_menuitem:"Usuń wiersz",add_left_menuitem:"Dodaj kolumnę po lewej",add_right_menuitem:"Dodaj kolumnę po prawej",add_above_menuitem:"Dodaj wiersz powyżej",add_below_menuitem:"Dodaj wiersz poniżej",split_cell_menuitem:"Podziel komórkę",merge_cells_menuitem:"Połącz komórki",background_color_menuitem:"Zmień kolor tła"},suggestion_menu:{no_items_title:"Nie znaleziono elementów",loading:"Ładowanie…"},color_picker:{text_title:"Tekst",background_title:"Tło",colors:{default:"Domyślny",gray:"Szary",brown:"Brązowy",red:"Czerwony",orange:"Pomarańczowy",yellow:"Żółty",green:"Zielony",blue:"Niebieski",purple:"Fioletowy",pink:"Różowy"}},formatting_toolbar:{bold:{tooltip:"Pogrubienie",secondary_tooltip:"Mod+B"},italic:{tooltip:"Kursywa",secondary_tooltip:"Mod+I"},underline:{tooltip:"Podkreślenie",secondary_tooltip:"Mod+U"},strike:{tooltip:"Przekreślenie",secondary_tooltip:"Mod+Shift+X"},code:{tooltip:"Kod",secondary_tooltip:""},colors:{tooltip:"Kolory"},link:{tooltip:"Utwórz link",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Zmień podpis",input_placeholder:"Zmień podpis"},file_replace:{tooltip:{image:"Zmień obraz",video:"Zmień wideo",audio:"Zmień audio",file:"Zmień plik"}},file_rename:{tooltip:{image:"Zmień nazwę zdjęcia",video:"Zmień nazwę wideo",audio:"Zmień nazwę audio",file:"Zmień nazwę pliku"},input_placeholder:{image:"Zmień nazwę zdjęcia",video:"Zmień nazwę wideo",audio:"Zmień nazwę audio",file:"Zmień nazwę pliku"}},file_download:{tooltip:{image:"Pobierz zdjęcie",video:"Pobierz wideo",audio:"Pobierz audio",file:"Pobierz plik"}},file_delete:{tooltip:{image:"Usuń zdjęcie",video:"Usuń wideo",audio:"Usuń audio",file:"Usuń plik"}},file_preview_toggle:{tooltip:"Przełącz podgląd"},nest:{tooltip:"Zagnieźdź blok",secondary_tooltip:"Tab"},unnest:{tooltip:"Odgagnieźdź blok",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Wyrównaj tekst do lewej"},align_center:{tooltip:"Wyśrodkuj tekst"},align_right:{tooltip:"Wyrównaj tekst do prawej"},align_justify:{tooltip:"Wyjustuj tekst"},table_cell_merge:{tooltip:"Połącz komórki"},comment:{tooltip:"Dodaj komentarz"}},file_panel:{upload:{title:"Wrzuć",file_placeholder:{image:"Wrzuć zdjęcie",video:"Wrzuć wideo",audio:"Wrzuć audio",file:"Wrzuć plik"},upload_error:"Błąd: Przesyłanie nie powiodło się"},embed:{title:"Wstaw",embed_button:{image:"Wstaw zdjęice",video:"Wstaw wideo",audio:"Wstaw audio",file:"Wstaw plik"},url_placeholder:"Wprowadź URL"}},link_toolbar:{delete:{tooltip:"Usuń link"},edit:{text:"Edytuj link",tooltip:"Edytuj"},open:{tooltip:"Otwórz w nowej karcie"},form:{title_placeholder:"Edytuj tytuł",url_placeholder:"Edytuj URL"}},comments:{actions:{add_reaction:"Dodaj reakcję",resolve:"Rozwiąż",edit_comment:"Edytuj komentarz",delete_comment:"Usuń komentarz",more_actions:"Więcej akcji"},reactions:{reacted_by:"Zareagowali"},sidebar:{marked_as_resolved:"Oznaczone jako rozwiązane",more_replies:function(e){return"".concat(e," więcej odpowiedzi")}}},generic:{ctrl_shortcut:"Ctrl"}},pt:{slash_menu:{heading:{title:"Título",subtext:"Usado para um título de nível superior",aliases:["h","titulo1","h1"],group:"Títulos"},heading_2:{title:"Título 2",subtext:"Usado para seções principais",aliases:["h2","titulo2","subtitulo"],group:"Títulos"},heading_3:{title:"Título 3",subtext:"Usado para subseções e títulos de grupo",aliases:["h3","titulo3","subtitulo"],group:"Títulos"},numbered_list:{title:"Lista Numerada",subtext:"Usado para exibir uma lista numerada",aliases:["ol","li","lista","listanumerada","lista numerada"],group:"Blocos básicos"},bullet_list:{title:"Lista com Marcadores",subtext:"Usado para exibir uma lista não ordenada",aliases:["ul","li","lista","listamarcadores","lista com marcadores"],group:"Blocos básicos"},check_list:{title:"Lista de verificação",subtext:"Usado para exibir uma lista com caixas de seleção",aliases:["ul","li","lista","lista de verificação","lista marcada","caixa de seleção"],group:"Blocos básicos"},paragraph:{title:"Parágrafo",subtext:"Usado para o corpo do seu documento",aliases:["p","paragrafo"],group:"Blocos básicos"},code_block:{title:"Bloco de Código",subtext:"Usado para exibir código com destaque de sintaxe",aliases:["codigo","pre"],group:"Blocos básicos"},page_break:{title:"Quebra de página",subtext:"Separador de página",aliases:["page","break","separator","quebra","separador"],group:"Blocos básicos"},table:{title:"Tabela",subtext:"Usado para tabelas",aliases:["tabela"],group:"Avançado"},image:{title:"Imagem",subtext:"Inserir uma imagem",aliases:["imagem","uploadImagem","upload","img","foto","media","url"],group:"Mídia"},video:{title:"Vídeo",subtext:"Inserir um vídeo",aliases:["vídeo","uploadVídeo","upload","mp4","filme","mídia","url"],group:"Mídia"},audio:{title:"Áudio",subtext:"Inserir um áudio",aliases:["áudio","uploadÁudio","upload","mp3","som","mídia","url"],group:"Mídia"},file:{title:"Arquivo",subtext:"Inserir um arquivo",aliases:["arquivo","upload","incorporar","mídia","url"],group:"Mídia"},emoji:{title:"Emoji",subtext:"Usado para inserir um emoji",aliases:["emoji","emoticon","expressão emocional","rosto"],group:"Outros"}},placeholders:{default:"Digite texto ou use '/' para comandos",heading:"Título",bulletListItem:"Lista",numberedListItem:"Lista",checkListItem:"Lista",new_comment:"Escreva um comentário...",edit_comment:"Editar comentário...",comment_reply:"Adicionar comentário..."},file_blocks:{image:{add_button_text:"Adicionar imagem"},video:{add_button_text:"Adicionar vídeo"},audio:{add_button_text:"Adicionar áudio"},file:{add_button_text:"Adicionar arquivo"}},side_menu:{add_block_label:"Adicionar bloco",drag_handle_label:"Abrir menu do bloco"},drag_handle:{delete_menuitem:"Excluir",colors_menuitem:"Cores",header_row_menuitem:"Cabeçalho de linha",header_column_menuitem:"Cabeçalho de coluna"},table_handle:{delete_column_menuitem:"Excluir coluna",delete_row_menuitem:"Excluir linha",add_left_menuitem:"Adicionar coluna à esquerda",add_right_menuitem:"Adicionar coluna à direita",add_above_menuitem:"Adicionar linha acima",add_below_menuitem:"Adicionar linha abaixo",split_cell_menuitem:"Dividir célula",merge_cells_menuitem:"Juntar células",background_color_menuitem:"Alterar cor de fundo"},suggestion_menu:{no_items_title:"Nenhum item encontrado",loading:"Carregando…"},color_picker:{text_title:"Texto",background_title:"Fundo",colors:{default:"Padrão",gray:"Cinza",brown:"Marrom",red:"Vermelho",orange:"Laranja",yellow:"Amarelo",green:"Verde",blue:"Azul",purple:"Roxo",pink:"Rosa"}},formatting_toolbar:{bold:{tooltip:"Negrito",secondary_tooltip:"Mod+B"},italic:{tooltip:"Itálico",secondary_tooltip:"Mod+I"},underline:{tooltip:"Sublinhado",secondary_tooltip:"Mod+U"},strike:{tooltip:"Riscado",secondary_tooltip:"Mod+Shift+X"},code:{tooltip:"Código",secondary_tooltip:""},colors:{tooltip:"Cores"},link:{tooltip:"Criar link",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Editar legenda",input_placeholder:"Editar legenda"},file_replace:{tooltip:{image:"Substituir imagem",video:"Substituir vídeo",audio:"Substituir áudio",file:"Substituir arquivo"}},file_rename:{tooltip:{image:"Renomear imagem",video:"Renomear vídeo",audio:"Renomear áudio",file:"Renomear arquivo"},input_placeholder:{image:"Renomear imagem",video:"Renomear vídeo",audio:"Renomear áudio",file:"Renomear arquivo"}},file_download:{tooltip:{image:"Baixar imagem",video:"Baixar vídeo",audio:"Baixar áudio",file:"Baixar arquivo"}},file_delete:{tooltip:{image:"Excluir imagem",video:"Excluir vídeo",audio:"Excluir áudio",file:"Excluir arquivo"}},file_preview_toggle:{tooltip:"Alternar visualização"},nest:{tooltip:"Aninhar bloco",secondary_tooltip:"Tab"},unnest:{tooltip:"Desaninhar bloco",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Alinhar à esquerda"},align_center:{tooltip:"Alinhar ao centro"},align_right:{tooltip:"Alinhar à direita"},align_justify:{tooltip:"Justificar texto"},table_cell_merge:{tooltip:"Juntar células"},comment:{tooltip:"Adicionar comentário"}},file_panel:{upload:{title:"Upload",file_placeholder:{image:"Upload de imagem",video:"Upload de vídeo",audio:"Upload de áudio",file:"Upload de arquivo"},upload_error:"Erro: Falha no upload"},embed:{title:"Incorporar",embed_button:{image:"Incorporar imagem",video:"Incorporar vídeo",audio:"Incorporar áudio",file:"Incorporar arquivo"},url_placeholder:"Insira a URL"}},link_toolbar:{delete:{tooltip:"Remover link"},edit:{text:"Editar link",tooltip:"Editar"},open:{tooltip:"Abrir em nova aba"},form:{title_placeholder:"Editar título",url_placeholder:"Editar URL"}},comments:{actions:{add_reaction:"Adicionar reação",resolve:"Resolver",edit_comment:"Editar comentário",delete_comment:"Excluir comentário",more_actions:"Mais ações"},reactions:{reacted_by:"Reagido por"},sidebar:{marked_as_resolved:"Marcado como resolvido",more_replies:function(e){return"".concat(e," respostas a mais")}}},generic:{ctrl_shortcut:"Ctrl"}},ru:{slash_menu:{heading:{title:"Заголовок 1 уровня",subtext:"Используется для заголовка верхнего уровня",aliases:["h","heading1","h1","заголовок1"],group:"Заголовки"},heading_2:{title:"Заголовок 2 уровня",subtext:"Используется для ключевых разделов",aliases:["h2","heading2","subheading","заголовок2","подзаголовок"],group:"Заголовки"},heading_3:{title:"Заголовок 3 уровня",subtext:"Используется для подразделов и групп",aliases:["h3","heading3","subheading","заголовок3","подзаголовок"],group:"Заголовки"},numbered_list:{title:"Нумерованный список",subtext:"Используется для отображения нумерованного списка",aliases:["ol","li","list","numberedlist","numbered list","список","нумерованный список"],group:"Базовые блоки"},bullet_list:{title:"Маркированный список",subtext:"Для отображения неупорядоченного списка.",aliases:["ul","li","list","bulletlist","bullet list","список","маркированный список"],group:"Базовые блоки"},check_list:{title:"Контрольный список",subtext:"Для отображения списка с флажками",aliases:["ul","li","list","checklist","check list","checked list","checkbox","список"],group:"Базовые блоки"},paragraph:{title:"Параграф",subtext:"Основной текст",aliases:["p","paragraph","параграф"],group:"Базовые блоки"},code_block:{title:"Блок кода",subtext:"Блок кода с подсветкой синтаксиса",aliases:["code","pre","блок кода"],group:"Базовые блоки"},page_break:{title:"Разрыв страницы",subtext:"Разделитель страницы",aliases:["page","break","separator","разрыв","разделитель"],group:"Основные блоки"},table:{title:"Таблица",subtext:"Используется для таблиц",aliases:["table","таблица"],group:"Продвинутый"},image:{title:"Картинка",subtext:"Вставить изображение",aliases:["image","imageUpload","upload","img","picture","media","url","загрузка","картинка","рисунок"],group:"Медиа"},video:{title:"Видео",subtext:"Вставить видео",aliases:["video","videoUpload","upload","mp4","film","media","url","загрузка","видео"],group:"Медиа"},audio:{title:"Аудио",subtext:"Вставить аудио",aliases:["audio","audioUpload","upload","mp3","sound","media","url","загрузка","аудио","звук","музыка"],group:"Медиа"},file:{title:"Файл",subtext:"Вставить файл",aliases:["file","upload","embed","media","url","загрузка","файл"],group:"Медиа"},emoji:{title:"Эмодзи",subtext:"Используется для вставки эмодзи",aliases:["эмодзи","смайлик","выражение эмоций","лицо"],group:"Прочее"}},placeholders:{default:"Ведите текст или введите «/» для команд",heading:"Заголовок",bulletListItem:"Список",numberedListItem:"Список",checkListItem:"Список",new_comment:"Напишите комментарий...",edit_comment:"Редактировать комментарий...",comment_reply:"Добавить комментарий..."},file_blocks:{image:{add_button_text:"Добавить изображение"},video:{add_button_text:"Добавить видео"},audio:{add_button_text:"Добавить аудио"},file:{add_button_text:"Добавить файл"}},side_menu:{add_block_label:"Добавить блок",drag_handle_label:"Открыть меню блока"},drag_handle:{delete_menuitem:"Удалить",colors_menuitem:"Цвета",header_row_menuitem:"Заголовок строки",header_column_menuitem:"Заголовок столбца"},table_handle:{delete_column_menuitem:"Удалить столбец",delete_row_menuitem:"Удалить строку",add_left_menuitem:"Добавить столбец слева",add_right_menuitem:"Добавить столбец справа",add_above_menuitem:"Добавить строку выше",add_below_menuitem:"Добавить строку ниже",split_cell_menuitem:"Разделить ячейку",merge_cells_menuitem:"Объединить ячейки",background_color_menuitem:"Цвет фона"},suggestion_menu:{no_items_title:"ничего не найдено",loading:"Загрузка…"},color_picker:{text_title:"Текст",background_title:"Задний фон",colors:{default:"По умолчинию",gray:"Серый",brown:"Коричневый",red:"Красный",orange:"Оранжевый",yellow:"Жёлтый",green:"Зелёный",blue:"Голубой",purple:"Фиолетовый",pink:"Розовый"}},formatting_toolbar:{bold:{tooltip:"Жирный",secondary_tooltip:"Mod+B"},italic:{tooltip:"Курсив",secondary_tooltip:"Mod+I"},underline:{tooltip:"Подчёркнутый",secondary_tooltip:"Mod+U"},strike:{tooltip:"Зачёркнутый",secondary_tooltip:"Mod+Shift+X"},code:{tooltip:"Код",secondary_tooltip:""},colors:{tooltip:"Цвета"},link:{tooltip:"Создать ссылку",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Изменить подпись",input_placeholder:"Изменить подпись"},file_replace:{tooltip:{image:"Заменить изображение",video:"Заменить видео",audio:"Заменить аудио",file:"Заменить файл"}},file_rename:{tooltip:{image:"Переименовать изображение",video:"Переименовать видео",audio:"Переименовать аудио",file:"Переименовать файл"},input_placeholder:{image:"Переименовать изображение",video:"Переименовать видео",audio:"Переименовать аудио",file:"Переименовать файл"}},file_download:{tooltip:{image:"Скачать картинку",video:"Скачать видео",audio:"Скачать аудио",file:"Скачать файл"}},file_delete:{tooltip:{image:"Удалить картинку",video:"Удалить видео",audio:"Удалить аудио",file:"Удалить файл"}},file_preview_toggle:{tooltip:"Переключить предварительный просмотр"},nest:{tooltip:"Сдвинуть вправо",secondary_tooltip:"Tab"},unnest:{tooltip:"Сдвинуть влево",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Текст по левому краю"},align_center:{tooltip:"Текст по середине"},align_right:{tooltip:"Текст по правому краю"},align_justify:{tooltip:"По середине текст"},table_cell_merge:{tooltip:"Объединить ячейки"},comment:{tooltip:"Добавить комментарий"}},file_panel:{upload:{title:"Загрузить",file_placeholder:{image:"Загрузить картинки",video:"Загрузить видео",audio:"Загрузить аудио",file:"Загрузить файл"},upload_error:"Ошибка: не удалось загрузить"},embed:{title:"Вставить",embed_button:{image:"Вставить картинку",video:"Вставить видео",audio:"Вставить аудио",file:"Вставить файл"},url_placeholder:"Введите URL"}},link_toolbar:{delete:{tooltip:"Удалить ссылку"},edit:{text:"Изменить ссылку",tooltip:"Редактировать"},open:{tooltip:"Открыть в новой вкладке"},form:{title_placeholder:"Изменить заголовок",url_placeholder:"Изменить URL"}},comments:{actions:{add_reaction:"Добавить реакцию",resolve:"Решить",edit_comment:"Редактировать комментарий",delete_comment:"Удалить комментарий",more_actions:"Другие действия"},reactions:{reacted_by:"Отреагировал(а)"},sidebar:{marked_as_resolved:"Отмечено как решенное",more_replies:function(e){return"".concat(e," дополнительных ответов")}}},generic:{ctrl_shortcut:"Ctrl"}},uk:{slash_menu:{heading:{title:"Заголовок 1",subtext:"Заголовок найвищого рівня",aliases:["h","heading1","h1","заголовок1"],group:"Заголовки"},heading_2:{title:"Заголовок 2",subtext:"Основний заголовок розділу",aliases:["h2","heading2","subheading","заголовок2"],group:"Заголовки"},heading_3:{title:"Заголовок 3",subtext:"Підзаголовок і груповий заголовок",aliases:["h3","heading3","subheading","заголовок3"],group:"Заголовки"},numbered_list:{title:"Нумерований список",subtext:"Список із впорядкованими елементами",aliases:["ol","li","list","numberedlist","numbered list","список","нумерований список"],group:"Базові блоки"},bullet_list:{title:"Маркований список",subtext:"Список із невпорядкованими елементами",aliases:["ul","li","list","bulletlist","bullet list","список","маркований список"],group:"Базові блоки"},check_list:{title:"Чек-лист",subtext:"Список із чекбоксами",aliases:["ul","li","list","checklist","check list","checked list","checkbox","чекбокс","чек-лист"],group:"Базові блоки"},paragraph:{title:"Параграф",subtext:"Основний текст документа",aliases:["p","paragraph","параграф"],group:"Базові блоки"},code_block:{title:"Блок коду",subtext:"Блок коду з підсвіткою синтаксису",aliases:["code","pre","блок коду"],group:"Базові блоки"},page_break:{title:"Розрив сторінки",subtext:"Роздільник сторінки",aliases:["page","break","separator","розрив сторінки","розділювач"],group:"Базові блоки"},table:{title:"Таблиця",subtext:"Таблиця з редагованими клітинками",aliases:["table","таблиця"],group:"Розширені"},image:{title:"Зображення",subtext:"Масштабоване зображення з підписом",aliases:["image","imageUpload","upload","img","picture","media","url","зображення","медіа"],group:"Медіа"},video:{title:"Відео",subtext:"Масштабоване відео з підписом",aliases:["video","videoUpload","upload","mp4","film","media","url","відео","медіа"],group:"Медіа"},audio:{title:"Аудіо",subtext:"Вбудоване аудіо з підписом",aliases:["audio","audioUpload","upload","mp3","sound","media","url","аудіо","медіа"],group:"Медіа"},file:{title:"Файл",subtext:"Вбудований файл",aliases:["file","upload","embed","media","url","файл","медіа"],group:"Медіа"},emoji:{title:"Емодзі",subtext:"Пошук і вставка емодзі",aliases:["emoji","emote","emotion","face","смайлик","емодзі"],group:"Інше"}},placeholders:{default:"Введіть текст або наберіть '/' для команд",heading:"Заголовок",bulletListItem:"Список",numberedListItem:"Список",checkListItem:"Список",new_comment:"Напишіть коментар...",edit_comment:"Редагувати коментар...",comment_reply:"Додати коментар..."},file_blocks:{image:{add_button_text:"Додати зображення"},video:{add_button_text:"Додати відео"},audio:{add_button_text:"Додати аудіо"},file:{add_button_text:"Додати файл"}},side_menu:{add_block_label:"Додати блок",drag_handle_label:"Відкрити меню блока"},drag_handle:{delete_menuitem:"Видалити",colors_menuitem:"Кольори",header_row_menuitem:"Заголовок рядка",header_column_menuitem:"Заголовок стовпця"},table_handle:{delete_column_menuitem:"Видалити стовпець",delete_row_menuitem:"Видалити рядок",add_left_menuitem:"Додати стовпець зліва",add_right_menuitem:"Додати стовпець справа",add_above_menuitem:"Додати рядок вище",add_below_menuitem:"Додати рядок нижче",split_cell_menuitem:"Розділити клітинку",merge_cells_menuitem:"Об'єднати клітинки",background_color_menuitem:"Змінити колір фону"},suggestion_menu:{no_items_title:"Нічого не знайдено",loading:"Завантаження…"},color_picker:{text_title:"Текст",background_title:"Фон",colors:{default:"За замовчуванням",gray:"Сірий",brown:"Коричневий",red:"Червоний",orange:"Помаранчевий",yellow:"Жовтий",green:"Зелений",blue:"Блакитний",purple:"Фіолетовий",pink:"Рожевий"}},formatting_toolbar:{bold:{tooltip:"Жирний",secondary_tooltip:"Mod+B"},italic:{tooltip:"Курсив",secondary_tooltip:"Mod+I"},underline:{tooltip:"Підкреслений",secondary_tooltip:"Mod+U"},strike:{tooltip:"Закреслений",secondary_tooltip:"Mod+Shift+X"},code:{tooltip:"Код",secondary_tooltip:""},colors:{tooltip:"Кольори"},link:{tooltip:"Створити посилання",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Редагувати підпис",input_placeholder:"Редагувати підпис"},file_replace:{tooltip:{image:"Замінити зображення",video:"Замінити відео",audio:"Замінити аудіо",file:"Замінити файл"}},file_rename:{tooltip:{image:"Перейменувати зображення",video:"Перейменувати відео",audio:"Перейменувати аудіо",file:"Перейменувати файл"},input_placeholder:{image:"Перейменувати зображення",video:"Перейменувати відео",audio:"Перейменувати аудіо",file:"Перейменувати файл"}},file_download:{tooltip:{image:"Завантажити зображення",video:"Завантажити відео",audio:"Завантажити аудіо",file:"Завантажити файл"}},file_delete:{tooltip:{image:"Видалити зображення",video:"Видалити відео",audio:"Видалити аудіо",file:"Видалити файл"}},file_preview_toggle:{tooltip:"Перемкнути попередній перегляд"},nest:{tooltip:"Вкладений блок",secondary_tooltip:"Tab"},unnest:{tooltip:"Розгрупувати блок",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Вирівняти за лівим краєм"},align_center:{tooltip:"Вирівняти по центру"},align_right:{tooltip:"Вирівняти за правим краєм"},align_justify:{tooltip:"Вирівняти за шириною"},table_cell_merge:{tooltip:"Об'єднати клітинки"},comment:{tooltip:"Додати коментар"}},file_panel:{upload:{title:"Завантажити",file_placeholder:{image:"Завантажити зображення",video:"Завантажити відео",audio:"Завантажити аудіо",file:"Завантажити файл"},upload_error:"Помилка: не вдалося завантажити"},embed:{title:"Вставити",embed_button:{image:"Вставити зображення",video:"Вставити відео",audio:"Вставити аудіо",file:"Вставити файл"},url_placeholder:"Введіть URL"}},link_toolbar:{delete:{tooltip:"Видалити посилання"},edit:{text:"Редагувати посилання",tooltip:"Редагувати"},open:{tooltip:"Відкрити в новій вкладці"},form:{title_placeholder:"Редагувати заголовок",url_placeholder:"Редагувати URL"}},comments:{actions:{add_reaction:"Додати реакцію",resolve:"Вирішити",edit_comment:"Редагувати коментар",delete_comment:"Видалити коментар",more_actions:"Більше дій"},reactions:{reacted_by:"Відреагував(ла)"},sidebar:{marked_as_resolved:"Позначено як вирішене",more_replies:function(e){return"".concat(e," додаткових відповідей")}}},generic:{ctrl_shortcut:"Ctrl"}},vi:{slash_menu:{heading:{title:"Tiêu đề H1",subtext:"Sử dụng cho tiêu đề cấp cao nhất",aliases:["h","tieude1","dd1"],group:"Tiêu đề"},heading_2:{title:"Tiêu đề H2",subtext:"Sử dụng cho các phần chính",aliases:["h2","tieude2","tieudephu"],group:"Tiêu đề"},heading_3:{title:"Tiêu đề H3",subtext:"Sử dụng cho phụ đề và tiêu đề nhóm",aliases:["h3","tieude3","tieudephu"],group:"Tiêu đề"},numbered_list:{title:"Danh sách đánh số",subtext:"Sử dụng để hiển thị danh sách có đánh số",aliases:["ol","li","ds","danhsachdso","danh sach danh so"],group:"Khối cơ bản"},bullet_list:{title:"Danh sách",subtext:"Sử dụng để hiển thị danh sách không đánh số",aliases:["ul","li","ds","danhsach","danh sach"],group:"Khối cơ bản"},check_list:{title:"Danh sách kiểm tra",subtext:"Dùng để hiển thị danh sách có hộp kiểm",aliases:["ul","li","danh sach","danh sach kiem tra","danh sach da kiem tra","hop kiem"],group:"Khối cơ bản"},paragraph:{title:"Đoạn văn",subtext:"Sử dụng cho nội dung chính của tài liệu",aliases:["p","doanvan"],group:"Khối cơ bản"},code_block:{title:"Mã",subtext:"Sử dụng để hiển thị mã với cú pháp",aliases:["code","pre"],group:"Khối cơ bản"},page_break:{title:"Ngắt trang",subtext:"Phân cách trang",aliases:["page","break","separator","ngắt","phân cách"],group:"Khối cơ bản"},table:{title:"Bảng",subtext:"Sử dụng để tạo bảng",aliases:["bang"],group:"Nâng cao"},image:{title:"Hình ảnh",subtext:"Chèn hình ảnh",aliases:["anh","tai-len-anh","tai-len","img","hinh","media","url"],group:"Phương tiện"},video:{title:"Video",subtext:"Chèn video",aliases:["video","tai-len-video","tai-len","mp4","phim","media","url"],group:"Phương tiện"},audio:{title:"Âm thanh",subtext:"Chèn âm thanh",aliases:["âm thanh","tai-len-am-thanh","tai-len","mp3","am thanh","media","url"],group:"Phương tiện"},file:{title:"Tệp",subtext:"Chèn tệp",aliases:["tep","tai-len","nhung","media","url"],group:"Phương tiện"},emoji:{title:"Biểu tượng cảm xúc",subtext:"Dùng để chèn biểu tượng cảm xúc",aliases:["biểu tượng cảm xúc","emoji","emoticon","cảm xúc expression","khuôn mặt","face"],group:"Khác"}},placeholders:{default:"Nhập văn bản hoặc gõ '/' để thêm định dạng",heading:"Tiêu đề",bulletListItem:"Danh sách",numberedListItem:"Danh sách",checkListItem:"Danh sách",new_comment:"Viết bình luận...",edit_comment:"Chỉnh sửa bình luận...",comment_reply:"Thêm bình luận..."},file_blocks:{image:{add_button_text:"Thêm ảnh"},video:{add_button_text:"Thêm video"},audio:{add_button_text:"Thêm âm thanh"},file:{add_button_text:"Thêm tệp"}},side_menu:{add_block_label:"Thêm khối",drag_handle_label:"Mở trình đơn khối"},drag_handle:{delete_menuitem:"Xóa",colors_menuitem:"Màu sắc",header_row_menuitem:"Tiêu đề hàng",header_column_menuitem:"Tiêu đề cột"},table_handle:{delete_column_menuitem:"Xóa cột",delete_row_menuitem:"Xóa hàng",add_left_menuitem:"Thêm cột bên trái",add_right_menuitem:"Thêm cột bên phải",add_above_menuitem:"Thêm hàng phía trên",add_below_menuitem:"Thêm hàng phía dưới",split_cell_menuitem:"Chia ô",merge_cells_menuitem:"Gộp ô",background_color_menuitem:"Màu nền"},suggestion_menu:{no_items_title:"Không tìm thấy mục nào",loading:"Đang tải..."},color_picker:{text_title:"Văn bản",background_title:"Nền",colors:{default:"Mặc định",gray:"Xám",brown:"Nâu",red:"Đỏ",orange:"Cam",yellow:"Vàng",green:"Xanh lá",blue:"Xanh dương",purple:"Tím",pink:"Hồng"}},formatting_toolbar:{bold:{tooltip:"In đậm",secondary_tooltip:"Mod+B"},italic:{tooltip:"In nghiêng",secondary_tooltip:"Mod+I"},underline:{tooltip:"Gạch dưới",secondary_tooltip:"Mod+U"},strike:{tooltip:"Gạch ngang",secondary_tooltip:"Mod+Shift+X"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Màu sắc"},link:{tooltip:"Tạo liên kết",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Chỉnh sửa chú thích",input_placeholder:"Chỉnh sửa chú thích"},file_replace:{tooltip:{image:"Thay thế hình ảnh",video:"Thay thế video",audio:"Thay thế âm thanh",file:"Thay thế tệp"}},file_rename:{tooltip:{image:"Đổi tên hình ảnh",video:"Đổi tên video",audio:"Đổi tên âm thanh",file:"Đổi tên tệp"},input_placeholder:{image:"Đổi tên hình ảnh",video:"Đổi tên video",audio:"Đổi tên âm thanh",file:"Đổi tên tệp"}},file_download:{tooltip:{image:"Tải xuống hình ảnh",video:"Tải xuống video",audio:"Tải xuống âm thanh",file:"Tải xuống tệp"}},file_delete:{tooltip:{image:"Xóa hình ảnh",video:"Xóa video",audio:"Xóa âm thanh",file:"Xóa tệp"}},file_preview_toggle:{tooltip:"Chuyển đổi xem trước"},nest:{tooltip:"Lồng khối",secondary_tooltip:"Tab"},unnest:{tooltip:"Bỏ lồng khối",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Căn trái văn bản"},align_center:{tooltip:"Căn giữa văn bản"},align_right:{tooltip:"Căn phải văn bản"},align_justify:{tooltip:"Căn đều văn bản"},table_cell_merge:{tooltip:"Gộp các ô"},comment:{tooltip:"Thêm bình luận"}},file_panel:{upload:{title:"Tải lên",file_placeholder:{image:"Tải lên hình ảnh",video:"Tải lên video",audio:"Tải lên âm thanh",file:"Tải lên tệp"},upload_error:"Lỗi: Tải lên thất bại"},embed:{title:"Nhúng",embed_button:{image:"Nhúng hình ảnh",video:"Nhúng video",audio:"Nhúng âm thanh",file:"Nhúng tệp"},url_placeholder:"Nhập URL"}},link_toolbar:{delete:{tooltip:"Xóa liên kết"},edit:{text:"Chỉnh sửa liên kết",tooltip:"Chỉnh sửa"},open:{tooltip:"Mở trong tab mới"},form:{title_placeholder:"Chỉnh sửa tiêu đề",url_placeholder:"Chỉnh sửa URL"}},comments:{actions:{add_reaction:"Thêm phản ứng",resolve:"Giải quyết",edit_comment:"Chỉnh sửa bình luận",delete_comment:"Xóa bình luận",more_actions:"Thêm hành động"},reactions:{reacted_by:"Phản ứng bởi"},sidebar:{marked_as_resolved:"Đã đánh dấu là đã giải quyết",more_replies:function(e){return"".concat(e," câu trả lời nữa")}}},generic:{ctrl_shortcut:"Ctrl"}},zh:{slash_menu:{heading:{title:"一级标题",subtext:"用于顶级标题",aliases:["h","heading1","h1","标题","一级标题"],group:"标题"},heading_2:{title:"二级标题",subtext:"用于关键部分",aliases:["h2","heading2","subheading","标题","二级标题","副标题"],group:"标题"},heading_3:{title:"三级标题",subtext:"用于小节和分组标题",aliases:["h3","heading3","subheading","标题","三级标题"],group:"标题"},numbered_list:{title:"有序列表",subtext:"用于显示有序列表",aliases:["ol","li","list","numberedlist","numbered list","列表","有序列表"],group:"基础"},bullet_list:{title:"无序列表",subtext:"用于显示无序列表",aliases:["ul","li","list","bulletlist","bullet list","列表","无序列表"],group:"基础"},check_list:{title:"检查清单",subtext:"用于显示带有复选框的列表",aliases:["ul","li","checklist","checked list","列表","检查清单","勾选列表","复选框"],group:"基础"},paragraph:{title:"段落",subtext:"用于文档正文",aliases:["p","paragraph","text","正文"],group:"基础"},code_block:{title:"代码块",subtext:"用于显示带有语法高亮的代码块",aliases:["code","pre","代码","预格式"],group:"基础"},page_break:{title:"分页符",subtext:"页面分隔符",aliases:["page","break","separator","分页","分隔符"],group:"基础"},table:{title:"表格",subtext:"使用表格",aliases:["table","表格"],group:"高级功能"},image:{title:"图片",subtext:"插入图片",aliases:["图片","上传图片","上传","image","img","相册","媒体","url"],group:"媒体"},video:{title:"视频",subtext:"插入视频",aliases:["视频","视频上传","上传","video","mp4","电影","媒体","url","驱动","dropbox"],group:"媒体"},audio:{title:"音频",subtext:"插入音频",aliases:["音频","音频上传","上传","audio","mp3","声音","媒体","url","驱动","dropbox"],group:"媒体"},file:{title:"文件",subtext:"插入文件",aliases:["文件","上传","file","嵌入","媒体","url"],group:"媒体"},emoji:{title:"表情符号",subtext:"用于插入表情符号",aliases:["表情符号","emoji","face","emote","表情","表情表达","表情"],group:"其他"}},placeholders:{default:"输入 '/' 以使用命令",heading:"标题",bulletListItem:"列表",numberedListItem:"列表",checkListItem:"列表",new_comment:"写评论...",edit_comment:"编辑评论...",comment_reply:"添加评论..."},file_blocks:{image:{add_button_text:"添加图片"},video:{add_button_text:"添加视频"},audio:{add_button_text:"添加音频"},file:{add_button_text:"添加文件"}},side_menu:{add_block_label:"添加块",drag_handle_label:"打开菜单"},drag_handle:{delete_menuitem:"删除",colors_menuitem:"颜色",header_row_menuitem:"行标题",header_column_menuitem:"列标题"},table_handle:{delete_column_menuitem:"删除列",delete_row_menuitem:"删除行",add_left_menuitem:"左侧添加列",add_right_menuitem:"右侧添加列",add_above_menuitem:"上方添加行",add_below_menuitem:"下方添加行",split_cell_menuitem:"拆分单元格",merge_cells_menuitem:"合并单元格",background_color_menuitem:"背景色"},suggestion_menu:{no_items_title:"无匹配项",loading:"加载中…"},color_picker:{text_title:"文本",background_title:"背景色",colors:{default:"默认",gray:"灰色",brown:"棕色",red:"红色",orange:"橙色",yellow:"黄色",green:"绿色",blue:"蓝色",purple:"紫色",pink:"粉色"}},formatting_toolbar:{bold:{tooltip:"加粗",secondary_tooltip:"Mod+B"},italic:{tooltip:"斜体",secondary_tooltip:"Mod+I"},underline:{tooltip:"下划线",secondary_tooltip:"Mod+U"},strike:{tooltip:"删除线",secondary_tooltip:"Mod+Shift+X"},code:{tooltip:"代码标记",secondary_tooltip:""},colors:{tooltip:"颜色"},link:{tooltip:"添加链接",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"编辑标题",input_placeholder:"编辑标题"},file_replace:{tooltip:{image:"替换图片",video:"替换视频",audio:"替换音频",file:"替换文件"}},file_rename:{tooltip:{image:"重命名图片",video:"重命名视频",audio:"重命名音频",file:"重命名文件"},input_placeholder:{image:"重命名图片",video:"重命名视频",audio:"重命名音频",file:"重命名文件"}},file_download:{tooltip:{image:"下载图片",video:"下载视频",audio:"下载音频",file:"下载文件"}},file_delete:{tooltip:{image:"删除图片",video:"删除视频",audio:"删除音频",file:"删除文件"}},file_preview_toggle:{tooltip:"切换预览"},nest:{tooltip:"嵌套",secondary_tooltip:"Tab"},unnest:{tooltip:"取消嵌套",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"左对齐"},align_center:{tooltip:"居中"},align_right:{tooltip:"右对齐"},align_justify:{tooltip:"文本对齐"},table_cell_merge:{tooltip:"合并单元格"},comment:{tooltip:"添加评论"}},file_panel:{upload:{title:"上传",file_placeholder:{image:"上传图片",video:"上传视频",audio:"上传音频",file:"上传文件"},upload_error:"Error：上传失败"},embed:{title:"嵌入",embed_button:{image:"嵌入图片",video:"嵌入视频",audio:"嵌入音频",file:"嵌入文件"},url_placeholder:"输入图片地址"}},link_toolbar:{delete:{tooltip:"清除链接"},edit:{text:"编辑链接",tooltip:"编辑"},open:{tooltip:"新窗口打开"},form:{title_placeholder:"编辑标题",url_placeholder:"编辑链接地址"}},comments:{actions:{add_reaction:"添加反应",resolve:"解决",edit_comment:"编辑评论",delete_comment:"删除评论",more_actions:"更多操作"},reactions:{reacted_by:"已回应"},sidebar:{marked_as_resolved:"标记为已解决",more_replies:function(e){return"还有 ".concat(e," 条回复")}}},generic:{ctrl_shortcut:"Ctrl"}}},Symbol.toStringTag,{value:"Module"})),z_=function(e){function t(e){return A_(this,t),O_(this,t,["Unreachable case: ".concat(e)])}return T_(t,e),D_(t)}(j_(Error));function V_(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(e["data-test"],__(e,u_));if(Object.keys(n).length>0&&t)throw new Error("Object must be empty "+JSON.stringify(e))}function $_(e,t){var n=e.resolve(t);if(n.nodeAfter&&n.nodeAfter.type.isInGroup("bnBlock"))return{posBeforeNode:n.pos,node:n.nodeAfter};for(var r=n.depth,o=n.node(r);r>0;){if(o.type.isInGroup("bnBlock"))return{posBeforeNode:n.before(r),node:o};r--,o=n.node(r)}var i=[];e.descendants((function(e,t){e.type.isInGroup("bnBlock")&&i.push(t)})),console.warn("Position ".concat(t," is not within a blockContainer node."));var a=e.resolve(i.find((function(e){return e>=t}))||i[i.length-1]);return{posBeforeNode:a.pos,node:a.nodeAfter}}function U_(e,t){if(!e.type.isInGroup("bnBlock"))throw new Error("Attempted to get bnBlock node at position but found node of different type ".concat(e.type));var n=e,r=t,o=r+n.nodeSize,i={node:n,beforePos:r,afterPos:o};if("blockContainer"===n.type.name){var a,s;if(n.forEach((function(e,t){if("blockContent"===e.type.spec.group){var n=e,o=r+t+1,i=o+e.nodeSize;a={node:n,beforePos:o,afterPos:i}}else if("blockGroup"===e.type.name){var l=e,c=r+t+1,u=c+e.nodeSize;s={node:l,beforePos:c,afterPos:u}}})),!a)throw new Error("blockContainer node does not contain a blockContent node in its children: ".concat(n));return{isBlockContainer:!0,bnBlock:i,blockContent:a,childContainer:s,blockNoteType:a.node.type.name}}if(!i.node.type.isInGroup("childContainer"))throw new Error("bnBlock node is not in the childContainer group: ".concat(i.node));return{isBlockContainer:!1,bnBlock:i,childContainer:i,blockNoteType:i.node.type.name}}function G_(e){return U_(e.node,e.posBeforeNode)}function W_(e){if(!e.nodeAfter)throw new Error("Attempted to get blockContainer node at position ".concat(e.pos," but a node at this position does not exist"));return U_(e.nodeAfter,e.pos)}function q_(e){return G_($_(e.doc,e.selection.anchor))}var K_=Fs.create({name:"uniqueID",priority:1e4,addOptions:function(){return{attributeName:"id",types:[],setIdAttribute:!1,generateID:function(){if(("undefined"==typeof window?"undefined":R_(window))<"u"&&window.__TEST_OPTIONS){var e=window.__TEST_OPTIONS;return void 0===e.mockID?e.mockID=0:e.mockID++,e.mockID.toString()}return ql()},filterTransaction:null}},addGlobalAttributes:function(){var e=this;return[{types:this.options.types,attributes:S_({},this.options.attributeName,{default:null,parseHTML:function(t){return t.getAttribute("data-".concat(e.options.attributeName))},renderHTML:function(t){var n=S_({},"data-".concat(e.options.attributeName),t[e.options.attributeName]);return e.options.setIdAttribute?C_(C_({},n),{},{id:t[e.options.attributeName]}):n}})}]},addProseMirrorPlugins:function(){var e=this,t=null,n=!1;return[new Pn({key:new In("uniqueID"),appendTransaction:function(t,n,r){var o=t.some((function(e){return e.docChanged}))&&!n.doc.eq(r.doc),i=e.options.filterTransaction&&t.some((function(t){var n,r;return!(null!==(r=(n=e.options).filterTransaction)&&void 0!==r&&r.call(n,t))}));if(o&&!i){var a=r.tr,s=e.options,l=s.types,c=s.attributeName,u=s.generateID,d=cl(n.doc,t),f=d.mapping;return hl(d).forEach((function(e){var t=e.newRange,o=dl(r.doc,t,(function(e){return l.includes(e.type.name)})),i=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify,n={};return e.filter((function(e){var r=t(e);return!Object.prototype.hasOwnProperty.call(n,r)&&(n[r]=!0)}))}(e.filter((function(t,n){return e.indexOf(t)!==n})))}(o.map((function(e){return e.node.attrs[c]})).filter((function(e){return null!==e})));o.forEach((function(e){var t,o=e.node,s=e.pos,l=null===(t=a.doc.nodeAt(s))||void 0===t?void 0:t.attrs[c];if(null!==l)f.invert().mapResult(s).deleted&&i.includes(l)&&a.setNodeMarkup(s,void 0,C_(C_({},o.attrs),{},S_({},c,u())));else{var d=n.doc.type.createAndFill().content;if(null===n.doc.content.findDiffStart(d)){var p=JSON.parse(JSON.stringify(r.doc.toJSON()));if(p.content[0].content[0].attrs.id="initialBlockId",JSON.stringify(p.content)===JSON.stringify(d.toJSON()))return void a.setNodeMarkup(s,void 0,C_(C_({},o.attrs),{},S_({},c,"initialBlockId")))}a.setNodeMarkup(s,void 0,C_(C_({},o.attrs),{},S_({},c,u())))}}))})),a.steps.length?a:void 0}},view:function(e){var n=function(n){var r;t=null!==(r=e.dom.parentElement)&&void 0!==r&&r.contains(n.target)?e.dom.parentElement:null};return window.addEventListener("dragstart",n),{destroy:function(){window.removeEventListener("dragstart",n)}}},props:{handleDOMEvents:{drop:function(e,r){var o;return n=t!==e.dom.parentElement||"copy"===(null===(o=r.dataTransfer)||void 0===o?void 0:o.effectAllowed),t=null,!1},paste:function(){return n=!0,!1}},transformPasted:function(t){if(!n)return t;var r=e.options,o=r.types,i=r.attributeName,a=function(e){var t=[];return e.forEach((function(e){if(e.isText)t.push(e);else if(o.includes(e.type.name)){var n=e.type.create(C_(C_({},e.attrs),{},S_({},i,null)),a(e.content),e.marks);t.push(n)}else t.push(e.copy(a(e.content)))})),Z.from(t)};return n=!1,new te(a(t.content),t.openStart,t.openEnd)}}})]}});function Z_(e){return"link"===e.type}function J_(e){return"string"!=typeof e&&"link"===e.type}function X_(e){return"string"!=typeof e&&"text"===e.type}function Y_(e){var t,n,r,o,i,a,s,l,c,u;return eE(e)?C_({},e):Q_(e)?{type:"tableCell",content:[].concat(e.content),props:{backgroundColor:null!==(t=null==(a=e.props)?void 0:a.backgroundColor)&&void 0!==t?t:"default",textColor:null!==(n=null==(s=e.props)?void 0:s.textColor)&&void 0!==n?n:"default",textAlignment:null!==(r=null==(l=e.props)?void 0:l.textAlignment)&&void 0!==r?r:"left",colspan:null!==(o=null==(c=e.props)?void 0:c.colspan)&&void 0!==o?o:1,rowspan:null!==(i=null==(u=e.props)?void 0:u.rowspan)&&void 0!==i?i:1}}:{type:"tableCell",content:[].concat(e),props:{backgroundColor:"default",textColor:"default",textAlignment:"left",colspan:1,rowspan:1}}}function Q_(e){return null!=e&&"string"!=typeof e&&!Array.isArray(e)&&"tableCell"===e.type}function eE(e){return Q_(e)&&void 0!==e.props&&void 0!==e.content}function tE(e){var t;return eE(e)&&null!==(t=e.props.colspan)&&void 0!==t?t:1}function nE(e){var t;return eE(e)&&null!==(t=e.props.rowspan)&&void 0!==t?t:1}function rE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Ctrl";return("undefined"==typeof navigator?"undefined":R_(navigator))<"u"&&(/Mac/.test(navigator.platform)||/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent))?e.replace("Mod","⌘"):e.replace("Mod",t)}function oE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}var iE=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)};function aE(e,t,n,r){var o=document.createElement("div");o.className=oE("bn-block-content",n.class),o.setAttribute("data-content-type",e);for(var i=0,a=Object.entries(n);i<a.length;i++){var s=b_(a[i],2),l=s[0],c=s[1];"class"!==l&&o.setAttribute(l,c)}var u=document.createElement(t);u.className=oE("bn-inline-content",r.class);for(var d=0,f=Object.entries(r);d<f.length;d++){var p=b_(f[d],2),h=p[0],m=p[1];"class"!==h&&u.setAttribute(h,m)}return o.appendChild(u),{dom:o,contentDOM:u}}var sE=function(e,t){var n=GE(e,t.pmSchema,t.schema.styleSchema);"blockContainer"===n.type.name&&(n=n.firstChild);var r=t.pmSchema.nodes[n.type.name].spec.toDOM;if(void 0===r)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");var o=r(n);if("object"!=R_(o)||!("dom"in o))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap node's `renderHTML` function does not return an object with the `dom` property.");return o},lE={backgroundColor:{default:"default"},textColor:{default:"default"},textAlignment:{default:"left",values:["left","center","right","justify"]}},cE=["backgroundColor","textColor"];function uE(e){return"data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function dE(e){var t=e.split("/");return t.length&&""!==t[t.length-1]?t[t.length-1]:e}function fE(e){var t={};return Object.entries(e).filter((function(e){var t=b_(e,2),n=t[0];return t[1],!cE.includes(n)})).forEach((function(e){var n=b_(e,2),r=n[0],o=n[1];t[r]={default:o.default,keepOnSplit:!0,parseHTML:function(e){var t=e.getAttribute(uE(r));if(null===t)return null;if(void 0===o.default&&"boolean"===o.type||void 0!==o.default&&"boolean"==typeof o.default)return"true"===t||"false"!==t&&null;if(void 0===o.default&&"number"===o.type||void 0!==o.default&&"number"==typeof o.default){var n=parseFloat(t);return!Number.isNaN(n)&&Number.isFinite(n)?n:null}return t},renderHTML:function(e){return e[r]!==o.default?S_({},uE(r),e[r]):{}}}})),t}function pE(e,t,n,r){if("boolean"==typeof e)throw new Error("Cannot find node position as getPos is a boolean, not a function.");var o=e(),i=n.state.doc.resolve(o).node().attrs.id;if(!i)throw new Error("Block doesn't have id");var a=t.getBlock(i);if(a.type!==r)throw new Error("Block type does not match");return a}function hE(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5?arguments[5]:void 0,a=document.createElement("div");if(void 0!==i)for(var s=0,l=Object.entries(i);s<l.length;s++){var c=b_(l[s],2),u=c[0],d=c[1];"class"!==u&&a.setAttribute(u,d)}a.className=oE("bn-block-content",(null==i?void 0:i.class)||""),a.setAttribute("data-content-type",t);for(var f=0,p=Object.entries(n);f<p.length;f++){var h=b_(p[f],2),m=h[0],v=h[1],g=r[m].default;!cE.includes(m)&&v!==g&&a.setAttribute(uE(m),v)}return o&&a.setAttribute("data-file-block",""),a.appendChild(e.dom),void 0!==e.contentDOM&&(e.contentDOM.className=oE("bn-inline-content",e.contentDOM.className),e.contentDOM.setAttribute("data-editable","")),C_(C_({},e),{},{dom:a})}function mE(e){return Il.create(e)}function vE(e,t){return{config:e,implementation:t}}function gE(e,t,n){return vE({type:e.name,content:"inline*"===e.config.content?"inline":"tableRow+"===e.config.content?"table":"none",propSchema:t},{node:e,requiredExtensions:n,toInternalHTML:sE,toExternalHTML:sE})}function yE(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=b_(e,2);return[t[0],t[1].config]})))}function bE(e,t){e.stopEvent=function(e){return"mousedown"===e.type&&setTimeout((function(){t.view.dom.blur()}),10),!0}}function kE(e,t){var n=[{tag:"[data-content-type="+e.type+"]",contentElement:"[data-editable]"}];return t&&n.push({tag:"*",getAttrs:function(e){if("string"==typeof e)return!1;var n=null==t?void 0:t(e);return void 0!==n&&n}}),n}function wE(e,t){var n,r=mE({name:e.type,content:"inline"===e.content?"inline*":"",group:"blockContent",selectable:null===(n=e.isSelectable)||void 0===n||n,isolating:!0,addAttributes:function(){return fE(e.propSchema)},parseHTML:function(){return kE(e,t.parse)},renderHTML:function(t){var n=t.HTMLAttributes,r=document.createElement("div");return hE({dom:r,contentDOM:"inline"===e.content?r:void 0},e.type,{},e.propSchema,e.isFileBlock,n)},addNodeView:function(){var n=this;return function(r){var o,i=r.getPos,a=n.options.editor,s=pE(i,a,n.editor,e.type),l=(null==(o=n.options.domAttributes)?void 0:o.blockContent)||{},c=hE(t.render(s,a),s.type,s.props,e.propSchema,l);return!1===e.isSelectable&&bE(c,n.editor),c}}});if(r.name!==e.type)throw new Error("Node name does not match block type. This is a bug in BlockNote.");return vE(e,{node:r,toInternalHTML:function(n,o){var i,a=(null==(i=r.options.domAttributes)?void 0:i.blockContent)||{};return hE(t.render(n,o),n.type,n.props,e.propSchema,e.isFileBlock,a)},toExternalHTML:function(n,o){var i,a,s=(null==(i=r.options.domAttributes)?void 0:i.blockContent)||{},l=null==(a=t.toExternalHTML)?void 0:a.call(t,n,o);return void 0===l&&(l=t.render(n,o)),hE(l,n.type,n.props,e.propSchema,s)}})}function xE(e,t,n){var r,o,i={type:"tableContent",columnWidths:[],headerRows:void 0,headerCols:void 0,rows:[]},a=[];e.content.forEach((function(e,r,o){var s={cells:[]};0===o&&e.content.forEach((function(e){var t,n,r=e.attrs.colwidth;null==r&&(r=new Array(null!==(t=e.attrs.colspan)&&void 0!==t?t:1).fill(void 0)),(n=i.columnWidths).push.apply(n,y_(r))})),s.cells=e.content.content.map((function(e,r){return a[o]||(a[o]=[]),a[o][r]="tableHeader"===e.type.name,{type:"tableCell",content:e.content.content.map((function(e){return CE(e,t,n)})).reduce((function(e,t){if(!e.length)return t;var n=e[e.length-1],r=t[0];return r&&X_(n)&&X_(r)&&JSON.stringify(n.styles)===JSON.stringify(r.styles)?(n.text+="\n"+r.text,e.push.apply(e,y_(t.slice(1))),e):(e.push.apply(e,y_(t)),e)}),[]),props:{colspan:e.attrs.colspan,rowspan:e.attrs.rowspan,backgroundColor:e.attrs.backgroundColor,textColor:e.attrs.textColor,textAlignment:e.attrs.textAlignment}}})),i.rows.push(s)}));for(var s=0;s<a.length;s++){var l;null!=(r=a[s])&&r.every((function(e){return e}))&&(i.headerRows=(null!==(l=i.headerRows)&&void 0!==l?l:0)+1)}for(var c=function(e){var t;null!=a&&a.every((function(t){return t[e]}))&&(i.headerCols=(null!==(t=i.headerCols)&&void 0!==t?t:0)+1)},u=0;u<(null==(o=a[0])?void 0:o.length);u++)c(u);return i}function CE(e,t,n){var r,o=[];return e.content.forEach((function(e){if("hardBreak"!==e.type.name){if("link"!==e.type.name&&"text"!==e.type.name)return t[e.type.name]?(r&&(o.push(r),r=void 0),void o.push(SE(e,t,n))):void console.warn("unrecognized inline content type",e.type.name);var i,a,s={},l=g_(e.marks);try{for(l.s();!(a=l.n()).done;){var c=a.value;if("link"===c.type.name)i=c;else{var u=n[c.type.name];if(!u){if(c.type.spec.blocknoteIgnore)continue;throw new Error("style ".concat(c.type.name," not found in styleSchema"))}if("boolean"===u.propSchema)s[u.type]=!0;else{if("string"!==u.propSchema)throw new z_(u.propSchema);s[u.type]=c.attrs.stringValue}}}}catch(e){l.e(e)}finally{l.f()}r?X_(r)?i?(o.push(r),r={type:"link",href:i.attrs.href,content:[{type:"text",text:e.textContent,styles:s}]}):JSON.stringify(r.styles)===JSON.stringify(s)?r.text+=e.textContent:(o.push(r),r={type:"text",text:e.textContent,styles:s}):Z_(r)&&(i?r.href===i.attrs.href?JSON.stringify(r.content[r.content.length-1].styles)===JSON.stringify(s)?r.content[r.content.length-1].text+=e.textContent:r.content.push({type:"text",text:e.textContent,styles:s}):(o.push(r),r={type:"link",href:i.attrs.href,content:[{type:"text",text:e.textContent,styles:s}]}):(o.push(r),r={type:"text",text:e.textContent,styles:s})):r=i?{type:"link",href:i.attrs.href,content:[{type:"text",text:e.textContent,styles:s}]}:{type:"text",text:e.textContent,styles:s}}else if(r)if(X_(r))r.text+="\n";else{if(!Z_(r))throw new Error("unexpected");r.content[r.content.length-1].text+="\n"}else r={type:"text",text:"\n",styles:{}}})),r&&o.push(r),o}function SE(e,t,n){if("text"===e.type.name||"link"===e.type.name)throw new Error("unexpected");for(var r,o={},i=t[e.type.name],a=0,s=Object.entries(e.attrs);a<s.length;a++){var l=b_(s[a],2),c=l[0],u=l[1];if(!i)throw Error("ic node is of an unrecognized type: "+e.type.name);c in i.propSchema&&(o[c]=u)}return r="styled"===i.content?CE(e,t,n):void 0,{type:e.type.name,props:o,content:r}}function _E(e,t,n,r,o){var i;if(!e.type.isInGroup("bnBlock"))throw Error("Node must be in bnBlock group, but is of type"+e.type.name);var a=null==o?void 0:o.get(e);if(a)return a;var s=U_(e,0),l=s.bnBlock.node.attrs.id;null===l&&(l=K_.options.generateID());var c=t[s.blockNoteType];if(!c)throw Error("Block is of an unrecognized type: "+s.blockNoteType);for(var u={},d=0,f=Object.entries(C_(C_({},e.attrs),s.isBlockContainer?s.blockContent.node.attrs:{}));d<f.length;d++){var p=b_(f[d],2),h=p[0],m=p[1],v=c.propSchema;h in v&&(void 0!==v[h].default||void 0!==m)&&(u[h]=m)}var g,y=t[s.blockNoteType],b=[];if(null==(i=s.childContainer)||i.node.forEach((function(e){b.push(_E(e,t,n,r,o))})),"inline"===y.content){if(!s.isBlockContainer)throw new Error("impossible");g=CE(s.blockContent.node,n,r)}else if("table"===y.content){if(!s.isBlockContainer)throw new Error("impossible");g=xE(s.blockContent.node,n,r)}else{if("none"!==y.content)throw new z_(y.content);g=void 0}var k={id:l,type:y.type,props:u,content:g,children:b};return null==o||o.set(e,k),k}function EE(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=b_(e,2);return[t[0],t[1].config]})))}function DE(e,t){return function(e,t){return{config:e,implementation:t}}({type:e.name,propSchema:t},{mark:e})}function ME(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=b_(e,2);return[t[0],t[1].config]})))}function AE(e){for(var t=jE(e),n=t.height,r=t.width,o=new Array(n).fill(!1).map((function(){return new Array(r).fill(null)})),i=function(e,t){for(var i=e;i<n;i++)for(var a=t;a<r;a++)if(!o[i][a])return{row:i,col:a};throw new Error("Unable to create occupancy grid for table, no more available cells")},a=0;a<e.content.rows.length;a++)for(var s=0;s<e.content.rows[a].cells.length;s++)for(var l=Y_(e.content.rows[a].cells[s]),c=nE(l),u=tE(l),d=i(a,s),f=d.row,p=d.col,h=f;h<f+c;h++)for(var m=p;m<p+u;m++){if(o[h][m])throw new Error("Unable to create occupancy grid for table, cell at ".concat(h,",").concat(m," is already occupied"));o[h][m]={row:a,col:s,rowspan:c,colspan:u,cell:l}}return o}function OE(e){var t=new Set;return e.map((function(e){return{cells:e.map((function(e){return!t.has(e.row+":"+e.col)&&(t.add(e.row+":"+e.col),e.cell)})).filter((function(e){return!1!==e}))}}))}function TE(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:AE(t),r=0;r<n.length;r++)for(var o=0;o<n[r].length;o++){var i=n[r][o];if(i.row===e.row&&i.col===e.col)return{row:r,col:o,cell:i.cell}}throw new Error("Unable to resolve relative table cell indices for table, cell at ".concat(e.row,",").concat(e.col," is not occupied"))}function jE(e){var t=e.content.rows.length,n=0;return e.content.rows.forEach((function(e){var t=0;e.cells.forEach((function(e){t+=tE(e)})),n=Math.max(n,t)})),{height:t,width:n}}function NE(e,t){var n,r=null==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:AE(t))[e.row])?void 0:n[e.col];if(r)return{row:r.row,col:r.col,cell:r.cell}}function PE(e,t){var n,r=AE(e);if(t<0||t>=r.length)return[];for(var o=0,i=0;i<t;i++){var a=null==(n=r[o])?void 0:n[0];if(!a)return[];o+=a.rowspan}var s=new Array(r[0].length).fill(!1).map((function(t,n){return NE({row:o,col:n},e,r)})).filter((function(e){return void 0!==e}));return s.filter((function(e,t){return s.findIndex((function(t){return t.row===e.row&&t.col===e.col}))===t}))}function LE(e,t){var n,r=AE(e);if(t<0||t>=r[0].length)return[];for(var o=0,i=0;i<t;i++){var a=null==(n=r[0])?void 0:n[o];if(!a)return[];o+=a.colspan}var s=new Array(r.length).fill(!1).map((function(t,n){return NE({row:n,col:o},e,r)})).filter((function(e){return void 0!==e}));return s.filter((function(e,t){return s.findIndex((function(t){return t.row===e.row&&t.col===e.col}))===t}))}function RE(e){return!e||(Q_(e)?RE(e.content):"string"==typeof e?0===e.length:!!Array.isArray(e)&&e.every((function(e){return"string"==typeof e?0===e.length:X_(e)?0===e.text.length:!!J_(e)&&("string"==typeof e.content?0===e.content.length:e.content.every((function(e){return 0===e.text.length})))})))}function IE(e,t,n){var r=PE(e,n);if(!r.some((function(e){return nE(e.cell)>1})))return!0;var o=n,i=n;return r.forEach((function(e){var t=nE(e.cell);o=Math.max(o,e.row+t-1),i=Math.min(i,e.row)})),t<n?n===o:n===i}function BE(e,t,n){var r=LE(e,n);if(!r.some((function(e){return tE(e.cell)>1})))return!0;var o=n,i=n;return r.forEach((function(e){var t=tE(e.cell);o=Math.max(o,e.col+t-1),i=Math.min(i,e.col)})),t<n?n===o:n===i}function FE(e,t,n,r){for(var o=[],i=0,a=Object.entries(e.styles);i<a.length;i++){var s=b_(a[i],2),l=s[0],c=s[1],u=n[l];if(!u)throw new Error("style ".concat(l," not found in styleSchema"));if("boolean"===u.propSchema)o.push(t.mark(l));else{if("string"!==u.propSchema)throw new z_(u.propSchema);o.push(t.mark(l,{stringValue:c}))}}return r&&t.nodes[r].spec.code?[t.text(e.text,o)]:e.text.split(/(\n)/g).filter((function(e){return e.length>0})).map((function(e){return"\n"===e?t.nodes.hardBreak.createChecked():t.text(e,o)}))}function HE(e,t,n){var r=t.marks.link.create({href:e.href});return zE(e.content,t,n).map((function(e){if("text"===e.type.name)return e.mark([].concat(y_(e.marks),[r]));if("hardBreak"===e.type.name)return e;throw new Error("unexpected node type")}))}function zE(e,t,n,r){var o=[];if("string"==typeof e)return o.push.apply(o,y_(FE({type:"text",text:e,styles:{}},t,n,r))),o;var i,a=g_(e);try{for(a.s();!(i=a.n()).done;){var s=i.value;o.push.apply(o,y_(FE(s,t,n,r)))}}catch(e){a.e(e)}finally{a.f()}return o}function VE(e,t,n,r){var o,i=[],a=g_(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;"string"==typeof s?i.push.apply(i,y_(zE(s,t,n,r))):J_(s)?i.push.apply(i,y_(HE(s,t,n))):X_(s)?i.push.apply(i,y_(zE([s],t,n,r))):i.push(UE(s,t,n))}}catch(e){a.e(e)}finally{a.f()}return i}function $E(e,t,n){for(var r,o,i,a=[],s=new Array(null!==(r=e.headerRows)&&void 0!==r?r:0).fill(!0),l=new Array(null!==(o=e.headerCols)&&void 0!==o?o:0).fill(!0),c=null!==(i=e.columnWidths)&&void 0!==i?i:[],u=0;u<e.rows.length;u++){for(var d=e.rows[u],f=[],p=s[u],h=function(){var r=d.cells[m],o=l[m],i=null,a=TE({row:u,col:m},{type:"table",content:e}),s=c[a.col]?[c[a.col]]:null;if(r)if("string"==typeof r)i=t.text(r);else if(Q_(r)){r.content&&(i=VE(r.content,t,n));var h=tE(r);h>1&&(s=new Array(h).fill(!1).map((function(e,t){var n;return null!==(n=c[a.col+t])&&void 0!==n?n:void 0})))}else i=VE(r,t,n);var v=t.nodes[o||p?"tableHeader":"tableCell"].createChecked(C_(C_({},Q_(r)?r.props:{}),{},{colwidth:s}),t.nodes.tableParagraph.createChecked(void 0,i));f.push(v)},m=0;m<d.cells.length;m++)h();var v=t.nodes.tableRow.createChecked({},f);a.push(v)}return a}function UE(e,t,n){var r,o=e.type;if(void 0===o&&(o="paragraph"),!t.nodes[o])throw new Error("node type ".concat(o," not found in schema"));if(e.content)if("string"==typeof e.content){var i=VE([e.content],t,n,o);r=t.nodes[o].createChecked(e.props,i)}else if(Array.isArray(e.content)){var a=VE(e.content,t,n,o);r=t.nodes[o].createChecked(e.props,a)}else{if("tableContent"!==e.content.type)throw new z_(e.content.type);var s=$E(e.content,t,n);r=t.nodes[o].createChecked(e.props,s)}else r=t.nodes[o].createChecked(e.props);return r}function GE(e,t,n){var r=e.id;void 0===r&&(r=K_.options.generateID());var o=[];if(e.children){var i,a=g_(e.children);try{for(a.s();!(i=a.n()).done;){var s=i.value;o.push(GE(s,t,n))}}catch(e){a.e(e)}finally{a.f()}}if(!e.type||t.nodes[e.type].isInGroup("blockContent")){var l=UE(e,t,n),c=o.length>0?t.nodes.blockGroup.createChecked({},o):void 0;return t.nodes.blockContainer.createChecked(C_({id:r},e.props),c?[l,c]:l)}if(t.nodes[e.type].isInGroup("bnBlock"))return t.nodes[e.type].createChecked(C_({id:r},e.props),o);throw new Error("block type ".concat(e.type," doesn't match blockContent or bnBlock group"))}function WE(e,t){var n,r;if(t.firstChild.descendants((function(t,o){return!(n||t.type.isInGroup("bnBlock")&&t.attrs.id===e&&(n=t,r=o+1,1))})),void 0!==n&&void 0!==r)return{node:n,posBeforeNode:r}}var qE=function(e,t,n){return function(r){var o=r.state,i=r.dispatch,a=W_(o.doc.resolve(t));if(i){var s=o.schema.nodes[a.blockNoteType],l=o.schema.nodes[n.type||a.blockNoteType],c=l.isInGroup("bnBlock")?l:o.schema.nodes.blockContainer;if(a.isBlockContainer&&l.isInGroup("blockContent"))KE(n,o,e,a),function(e,t,n,r,o,i){var a="keep";if(e.content)if("string"==typeof e.content)a=VE([e.content],t.schema,n.schema.styleSchema,o.name);else if(Array.isArray(e.content))a=VE(e.content,t.schema,n.schema.styleSchema,o.name);else{if("tableContent"!==e.content.type)throw new z_(e.content.type);a=$E(e.content,t.schema,n.schema.styleSchema)}else""===r.spec.content||o.spec.content!==r.spec.content&&(a=[]);"keep"===a?t.tr.setNodeMarkup(i.blockContent.beforePos,void 0===e.type?void 0:t.schema.nodes[e.type],C_(C_({},i.blockContent.node.attrs),e.props)):t.tr.replaceWith(i.blockContent.beforePos,i.blockContent.afterPos,o.createChecked(C_(C_({},i.blockContent.node.attrs),e.props),a))}(n,o,e,s,l,a);else{if(a.isBlockContainer||!l.isInGroup("bnBlock")){var u=_E(a.bnBlock.node,e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache);return o.tr.replaceWith(a.bnBlock.beforePos,a.bnBlock.afterPos,GE(C_({children:u.children},n),o.schema,e.schema.styleSchema)),!0}KE(n,o,e,a)}o.tr.setNodeMarkup(a.bnBlock.beforePos,c,C_(C_({},a.bnBlock.node.attrs),n.props))}return!0}};function KE(e,t,n,r){if(void 0!==e.children&&e.children.length>0){var o=e.children.map((function(e){return GE(e,t.schema,n.schema.styleSchema)}));if(r.childContainer)t.tr.step(new Et(r.childContainer.beforePos+1,r.childContainer.afterPos-1,new te(Z.from(o),0,0)));else{if(!r.isBlockContainer)throw new Error("impossible");t.tr.insert(r.blockContent.afterPos,t.schema.nodes.blockGroup.createChecked({},o))}}}function ZE(e){var t=y_(e.classList).filter((function(e){return!e.startsWith("bn-")}))||[];t.length>0?e.className=t.join(" "):e.removeAttribute("class")}function JE(e,t,n,r){var o;if(!t)throw new Error("blockContent is required");if("string"==typeof t)o=VE([t],e.pmSchema,e.schema.styleSchema);else if(Array.isArray(t))o=VE(t,e.pmSchema,e.schema.styleSchema);else{if("tableContent"!==t.type)throw new z_(t.type);o=$E(t,e.pmSchema,e.schema.styleSchema)}var i=n.serializeFragment(Z.from(o),r);return 1===i.nodeType&&ZE(i),i}function XE(e,t,n,r,o,i,a){var s,l,c,u,d,f,p,h,m,v=null!==(s=null==a?void 0:a.document)&&void 0!==s?s:document,g=t.pmSchema.nodes.blockContainer,y=n.props;if(!n.props){y={};for(var b=0,k=Object.entries(t.schema.blockSchema[n.type].propSchema);b<k.length;b++){var w=b_(k[b],2),x=w[0],C=w[1];void 0!==C.default&&(y[x]=C.default)}}var S,_=y_((null==(c=null==(l=g.spec)?void 0:l.toDOM)?void 0:c.call(l,g.create(C_({id:n.id},y)))).dom.attributes),E=t.blockImplementations[n.type].implementation.toExternalHTML(C_(C_({},n),{},{props:y}),t),D=v.createDocumentFragment();if(E.dom.classList.contains("bn-block-content")){var M,A=[].concat(y_(_),y_(E.dom.attributes)).filter((function(e){return e.name.startsWith("data")&&"data-content-type"!==e.name&&"data-file-block"!==e.name&&"data-node-view-wrapper"!==e.name&&"data-node-type"!==e.name&&"data-id"!==e.name&&"data-index"!==e.name&&"data-editable"!==e.name})),O=g_(A);try{for(O.s();!(M=O.n()).done;){var T=M.value;E.dom.firstChild.setAttribute(T.name,T.value)}}catch(e){O.e(e)}finally{O.f()}ZE(E.dom.firstChild),D.append.apply(D,y_(E.dom.childNodes))}else D.append(E.dom);if(E.contentDOM&&n.content){var j=JE(t,n.content,r,a);E.contentDOM.appendChild(j)}if(o.has(n.type)?S="OL":i.has(n.type)&&(S="UL"),S){if((null==(u=e.lastChild)?void 0:u.nodeName)!==S){var N=v.createElement(S);"OL"===S&&null!=y&&y.start&&1!==(null==y?void 0:y.start)&&N.setAttribute("start",y.start+""),e.append(N)}var P=v.createElement("li");P.append(D),e.lastChild.appendChild(P)}else e.append(D);if(n.children&&n.children.length>0){var L=v.createDocumentFragment();if(YE(L,t,n.children,r,o,i,a),"UL"===(null==(d=e.lastChild)?void 0:d.nodeName)||"OL"===(null==(f=e.lastChild)?void 0:f.nodeName))for(;"UL"===(null==(p=L.firstChild)?void 0:p.nodeName)||"OL"===(null==(h=L.firstChild)?void 0:h.nodeName);)e.lastChild.lastChild.appendChild(L.firstChild);t.pmSchema.nodes[n.type].isInGroup("blockContent")?e.append(L):null==(m=E.contentDOM)||m.append(L)}}var YE=function(e,t,n,r,o,i,a){var s,l=g_(n);try{for(l.s();!(s=l.n()).done;)XE(e,t,s.value,r,o,i,a)}catch(e){l.e(e)}finally{l.f()}},QE=function(e,t){var n=Xe.fromSchema(e);return{exportBlocks:function(e,r){var o=function(e,t,n,r,o,i){var a,s=(null!==(a=null==i?void 0:i.document)&&void 0!==a?a:document).createDocumentFragment();return YE(s,e,t,n,r,o,i),s}(t,e,n,new Set(["numberedListItem"]),new Set(["bulletListItem","checkListItem"]),r),i=document.createElement("div");return i.append(o),i.innerHTML},exportInlineContent:function(e,r){var o=JE(t,e,n,r),i=document.createElement("div");return i.append(o.cloneNode(!0)),i.innerHTML}}};function eD(e,t,n,r,o){var i,a,s,l,c,u=e.pmSchema.nodes.blockContainer,d=t.props;if(!t.props){d={};for(var f=0,p=Object.entries(e.schema.blockSchema[t.type].propSchema);f<p.length;f++){var h=b_(p[f],2),m=h[0],v=h[1];void 0!==v.default&&(d[m]=v.default)}}var g=e.blockImplementations[t.type].implementation.toInternalHTML(C_(C_({},t),{},{props:d}),e);if("numberedListItem"===t.type&&g.dom.setAttribute("data-index",r.toString()),g.contentDOM&&t.content){var y=function(e,t,n,r,o){var i;if(!t)throw new Error("blockContent is required");if("string"==typeof t)i=VE([t],e.pmSchema,e.schema.styleSchema,r);else if(Array.isArray(t))i=VE(t,e.pmSchema,e.schema.styleSchema,r);else{if("tableContent"!==t.type)throw new z_(t.type);i=$E(t,e.pmSchema,e.schema.styleSchema)}return n.serializeFragment(Z.from(i),o)}(e,t.content,n,t.type,o);g.contentDOM.appendChild(y)}if(e.pmSchema.nodes[t.type].isInGroup("bnBlock")){if(t.children&&t.children.length>0){var b=tD(e,t.children,n,o);null==(i=g.contentDOM)||i.append(b)}return g.dom}var k=null==(s=null==(a=u.spec)?void 0:a.toDOM)?void 0:s.call(a,u.create(C_({id:t.id},d)));return null==(l=k.contentDOM)||l.appendChild(g.dom),t.children&&t.children.length>0&&(null==(c=k.contentDOM)||c.appendChild(nD(e,t.children,n,o))),k.dom}function tD(e,t,n,r){var o,i,a=(null!==(o=null==r?void 0:r.document)&&void 0!==o?o:document).createDocumentFragment(),s=0,l=g_(t);try{for(l.s();!(i=l.n()).done;){var c=i.value;"numberedListItem"===c.type?s++:s=0;var u=eD(e,c,n,s,r);a.appendChild(u)}}catch(e){l.e(e)}finally{l.f()}return a}var nD=function(e,t,n,r){var o,i=e.pmSchema.nodes.blockGroup,a=i.spec.toDOM(i.create({})),s=tD(e,t,n,r);return null==(o=a.contentDOM)||o.appendChild(s),a.dom},rD=function(e,t){var n=Xe.fromSchema(e);return{serializeBlocks:function(e,r){return nD(t,e,n,r).outerHTML}}},oD=function(e,t){var n,r=e.querySelector(t);if(r){var o=e.querySelector("figcaption");return{targetElement:r,caption:null!==(n=null==o?void 0:o.textContent)&&void 0!==n?n:void 0}}},iD=function(e,t,n,r,o){var i=document.createElement("div");if(i.className="bn-file-block-content-wrapper",""===e.props.url){var a=function(e,t,n,r){var o=document.createElement("div");o.className="bn-add-file-button";var i=document.createElement("div");i.className="bn-add-file-button-icon",r?i.appendChild(r):i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',o.appendChild(i);var a=document.createElement("p");a.className="bn-add-file-button-text",a.innerHTML=n||t.dictionary.file_blocks.file.add_button_text,o.appendChild(a);var s=function(e){e.preventDefault()},l=function(){t.dispatch(t._tiptapEditor.state.tr.setMeta(t.filePanel.plugin,{block:e}))};return o.addEventListener("mousedown",s,!0),o.addEventListener("click",l,!0),{dom:o,destroy:function(){o.removeEventListener("mousedown",s,!0),o.removeEventListener("click",l,!0)}}}(e,t,r,o);i.appendChild(a.dom);var s=t.onUploadStart((function(t){if(t===e.id){i.removeChild(a.dom);var n=document.createElement("div");n.className="bn-file-loading-preview",n.textContent="Loading...",i.appendChild(n)}}));return{dom:i,destroy:function(){s(),a.destroy()}}}var l={dom:i};if(!1!==e.props.showPreview&&n)i.appendChild(n.dom);else{var c=function(e){var t=document.createElement("div");t.className="bn-file-name-with-icon";var n=document.createElement("div");n.className="bn-file-icon",n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',t.appendChild(n);var r=document.createElement("p");return r.className="bn-file-name",r.textContent=e.props.name,t.appendChild(r),{dom:t}}(e);i.appendChild(c.dom),l.destroy=function(){var e;null==(e=c.destroy)||e.call(c)}}if(e.props.caption){var u=document.createElement("p");u.className="bn-file-caption",u.textContent=e.props.caption,i.appendChild(u)}return l},aD=function(e,t){var n=document.createElement("figure"),r=document.createElement("figcaption");return r.textContent=t,n.appendChild(e),n.appendChild(r),{dom:n}},sD=function(e,t){var n=document.createElement("div"),r=document.createElement("p");return r.textContent=t,n.appendChild(e),n.appendChild(r),{dom:n}},lD=function(e){return{url:e.src||void 0}},cD={type:"audio",propSchema:{backgroundColor:lE.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0}},content:"none",isFileBlock:!0,fileBlockAccept:["audio/*"]},uD=function(e){if("AUDIO"===e.tagName)return lD(e);if("FIGURE"===e.tagName){var t=oD(e,"audio");if(!t)return;var n=t.targetElement,r=t.caption;return C_(C_({},lD(n)),{},{caption:r})}},dD=wE(cD,{render:function(e,t){var n=document.createElement("div");n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"></path></svg>';var r=document.createElement("audio");return r.className="bn-audio",t.resolveFileUrl?t.resolveFileUrl(e.props.url).then((function(e){r.src=e})):r.src=e.props.url,r.controls=!0,r.contentEditable="false",r.draggable=!1,iD(e,t,{dom:r},t.dictionary.file_blocks.audio.add_button_text,n.firstElementChild)},parse:uD,toExternalHTML:function(e){if(!e.props.url){var t=document.createElement("p");return t.textContent="Add audio",{dom:t}}var n;return e.props.showPreview?(n=document.createElement("audio")).src=e.props.url:((n=document.createElement("a")).href=e.props.url,n.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?aD(n,e.props.caption):sD(n,e.props.caption):{dom:n}}}),fD=[{id:"text",name:"Plain Text",match:["text","txt","plain"]}].concat(y_(cc.filter((function(e){return["c","cpp","css","glsl","graphql","haml","html","java","javascript","json","jsonc","jsonl","jsx","julia","less","markdown","mdx","php","postcss","pug","python","r","regexp","sass","scss","shellscript","sql","svelte","typescript","vue","vue-html","wasm","wgsl","xml","yaml"].includes(e.id)})).map((function(e){return{match:[e.id].concat(y_(e.aliases||[])),id:e.id,name:e.name}}))),[{id:"tsx",name:"TSX",match:["tsx","typescriptreact"]},{id:"haskell",name:"Haskell",match:["haskell","hs"]},{id:"csharp",name:"C#",match:["c#","csharp","cs"]},{id:"latex",name:"LaTeX",match:["latex"]},{id:"lua",name:"Lua",match:["lua"]},{id:"mermaid",name:"Mermaid",match:["mermaid","mmd"]},{id:"ruby",name:"Ruby",match:["ruby","rb"]},{id:"rust",name:"Rust",match:["rust","rs"]},{id:"scala",name:"Scala",match:["scala"]},{id:"swift",name:"Swift",match:["swift"]},{id:"kotlin",name:"Kotlin",match:["kotlin","kt","kts"]},{id:"objective-c",name:"Objective C",match:["objective-c","objc"]}]),pD=Symbol.for("blocknote.shikiParser"),hD=Symbol.for("blocknote.shikiHighlighterPromise"),mD={language:{default:"javascript",values:y_(fD.map((function(e){return e.id})))}},vD=mE({name:"codeBlock",content:"inline*",group:"blockContent",marks:"",code:!0,defining:!0,addOptions:function(){return{defaultLanguage:"javascript",indentLineWithTab:!0,supportedLanguages:fD}},addAttributes:function(){var e=this,t=this.options.supportedLanguages;return{language:{default:this.options.defaultLanguage,parseHTML:function(n){var r,o=n,i=null;"DIV"===(null==o?void 0:o.tagName)&&"codeBlock"===(null==o?void 0:o.dataset.contentType)&&(o=o.children[0]),"PRE"===(null==o?void 0:o.tagName)&&(o=null==o?void 0:o.children[0]);var a=null==o?void 0:o.getAttribute("data-language");if(a)i=a.toLowerCase();else{var s=y_((null==o?void 0:o.className.split(" "))||[]).filter((function(e){return e.startsWith("language-")})).map((function(e){return e.replace("language-","")}));s.length>0&&(i=s[0].toLowerCase())}return i?(null==(r=t.find((function(e){return e.match.includes(i)})))?void 0:r.id)||e.options.defaultLanguage:null},renderHTML:function(e){return e.language&&"text"!==e.language?{class:"language-".concat(e.language)}:{}}}}},parseHTML:function(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:"code"},{tag:"pre",contentElement:"code",preserveWhitespace:"full"}]},renderHTML:function(e){var t,n,r=e.HTMLAttributes,o=document.createElement("pre"),i=aE(this.name,"code",(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{},C_(C_({},(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{}),r)),a=i.dom,s=i.contentDOM;return a.removeChild(s),a.appendChild(o),o.appendChild(s),{dom:a,contentDOM:s}},addNodeView:function(){var e=this,t=this.options.supportedLanguages;return function(n){var r,o,i=n.editor,a=n.node,s=n.getPos,l=n.HTMLAttributes,c=document.createElement("pre"),u=document.createElement("select"),d=document.createElement("div"),f=aE(e.name,"code",C_(C_({},(null==(r=e.options.domAttributes)?void 0:r.blockContent)||{}),l),(null==(o=e.options.domAttributes)?void 0:o.inlineContent)||{}),p=f.dom,h=f.contentDOM,m=function(e){var t=e.target.value;i.commands.command((function(e){return e.tr.setNodeAttribute(s(),"language",t),!0}))};return t.forEach((function(e){var t=e.id,n=e.name,r=document.createElement("option");r.value=t,r.text=n,u.appendChild(r)})),d.contentEditable="false",u.value=a.attrs.language||e.options.defaultLanguage,p.removeChild(h),p.appendChild(d),p.appendChild(c),c.appendChild(h),d.appendChild(u),u.addEventListener("change",m),{dom:p,contentDOM:h,update:function(t){return t.type===e.type},destroy:function(){u.removeEventListener("change",m)}}}},addProseMirrorPlugins:function(){var e,t,n=this.options.supportedLanguages,r=globalThis;return[nc({parser:function(o){if(!e)return r[hD]=r[hD]||Op({themes:["github-dark"],langs:[]}),r[hD].then((function(t){e=t}));var i=o.language;return i&&"text"!==i&&!e.getLoadedLanguages().includes(i)&&n.find((function(e){return e.id===i}))&&cc.find((function(e){return e.id===i}))?e.loadLanguage(i):(t||(t=r[pD]||function(e,t){return function(n){var r,o,i=n.content,a=n.language,s=n.pos,l=[],c=e.codeToTokens(i,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sc(Object(n),!0).forEach((function(t){lc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({lang:a},null!=t?t:{theme:e.getLoadedThemes()[0]})),u=s+1,d=ic(c.tokens);try{for(d.s();!(o=d.n()).done;){var f,p=ic(o.value);try{for(p.s();!(f=p.n()).done;){var h=f.value,m=u+h.content.length,v=ji.inline(u,m,{style:null!=(r=h.htmlStyle)?r:"color: ".concat(h.color),class:"shiki"});l.push(v),u=m}}catch(e){p.e(e)}finally{p.f()}u+=1}}catch(e){d.e(e)}finally{d.f()}return l}}(e),r[pD]=t),t(o))},languageExtractor:function(e){return e.attrs.language},nodeTypes:[this.name]})]},addInputRules:function(){var e=this,t=this.options.supportedLanguages;return[new As({find:/^```(.*?)\s$/,handler:function(n){var r,o=n.state,i=n.range,a=n.match,s=o.doc.resolve(i.from),l=a[1].trim(),c={language:(null==(r=t.find((function(e){return e.match.includes(l)})))?void 0:r.id)||e.options.defaultLanguage};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e.type))return null;o.tr.delete(i.from,i.to).setBlockType(i.from,i.from,e.type,c).setSelection(bn.create(o.tr.doc,i.from))}})]},addKeyboardShortcuts:function(){var e=this;return{Delete:function(t){var n=t.editor,r=n.state.selection,o=r.$from;if(n.isActive(e.name)&&!o.parent.textContent&&Ks(r)){var i=o.pos-o.parentOffset-2;return n.chain().setNodeSelection(i).deleteSelection().run(),!0}return!1},Tab:function(t){var n=t.editor;return!(!e.options.indentLineWithTab||!n.isActive(e.name)||(n.commands.insertContent("  "),0))},Enter:function(t){var n=t.editor,r=n.state.selection.$from;if(!n.isActive(e.name))return!1;var o=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith("\n\n");return o&&i?n.chain().command((function(e){return e.tr.delete(r.pos-2,r.pos),!0})).exitCode().run():(n.commands.insertContent("\n"),!0)},"Shift-Enter":function(t){var n=t.editor,r=n.state.selection.$from;return!!n.isActive(e.name)&&(n.chain().insertContentAt(r.pos-r.parentOffset+r.parent.nodeSize,{type:"paragraph"}).run(),!0)}}}}),gD=gE(vD,mD),yD=function(e){return{url:e.src||void 0}},bD={type:"file",propSchema:{backgroundColor:lE.backgroundColor,name:{default:""},url:{default:""},caption:{default:""}},content:"none",isFileBlock:!0},kD=function(e){if("EMBED"===e.tagName)return yD(e);if("FIGURE"===e.tagName){var t=oD(e,"embed");if(!t)return;var n=t.targetElement,r=t.caption;return C_(C_({},yD(n)),{},{caption:r})}},wD=wE(bD,{render:function(e,t){return iD(e,t)},parse:kD,toExternalHTML:function(e){if(!e.props.url){var t=document.createElement("p");return t.textContent="Add file",{dom:t}}var n=document.createElement("a");return n.href=e.props.url,n.textContent=e.props.name||e.props.url,e.props.caption?sD(n,e.props.caption):{dom:n}}}),xD=function(e,t,n,r,o,i){var a=iD(e,t,n,o,i),s=a.dom,l=a.destroy,c=s;e.props.url&&e.props.showPreview&&(c.style.width="".concat(e.props.previewWidth,"px"));var u=document.createElement("div");u.className="bn-resize-handle",u.style.left="4px";var d=document.createElement("div");d.className="bn-resize-handle",d.style.right="4px";var f,p=e.props.previewWidth,h=function(n){var o;f?(o="center"===e.props.textAlignment?"left"===f.handleUsed?f.initialWidth+2*(f.initialClientX-n.clientX):f.initialWidth+2*(n.clientX-f.initialClientX):"left"===f.handleUsed?f.initialWidth+f.initialClientX-n.clientX:f.initialWidth+n.clientX-f.initialClientX,p=Math.max(o,64),c.style.width="".concat(p,"px")):!t.isEditable&&r.contains(u)&&r.contains(d)&&(r.removeChild(u),r.removeChild(d))},m=function(n){(!n.target||!c.contains(n.target)||!t.isEditable)&&r.contains(u)&&r.contains(d)&&(r.removeChild(u),r.removeChild(d)),f&&(f=void 0,t.updateBlock(e,{props:{previewWidth:p}}))},v=function(){t.isEditable&&(r.appendChild(u),r.appendChild(d))},g=function(e){e.relatedTarget===u||e.relatedTarget===d||f||t.isEditable&&r.contains(u)&&r.contains(d)&&(r.removeChild(u),r.removeChild(d))},y=function(e){e.preventDefault(),f={handleUsed:"left",initialWidth:c.clientWidth,initialClientX:e.clientX}},b=function(e){e.preventDefault(),f={handleUsed:"right",initialWidth:c.clientWidth,initialClientX:e.clientX}};return window.addEventListener("mousemove",h),window.addEventListener("mouseup",m),c.addEventListener("mouseenter",v),c.addEventListener("mouseleave",g),u.addEventListener("mousedown",y),d.addEventListener("mousedown",b),{dom:c,destroy:function(){null==l||l(),window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",m),c.removeEventListener("mouseenter",v),c.removeEventListener("mouseleave",g),u.removeEventListener("mousedown",y),d.removeEventListener("mousedown",b)}}},CD=function(e){return{url:e.src||void 0,previewWidth:e.width||void 0}},SD={type:"image",propSchema:{textAlignment:lE.textAlignment,backgroundColor:lE.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:512}},content:"none",isFileBlock:!0,fileBlockAccept:["image/*"]},_D=function(e){if("IMG"===e.tagName)return CD(e);if("FIGURE"===e.tagName){var t=oD(e,"img");if(!t)return;var n=t.targetElement,r=t.caption;return C_(C_({},CD(n)),{},{caption:r})}},ED=wE(SD,{render:function(e,t){var n=document.createElement("div");n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"></path></svg>';var r=document.createElement("div");r.className="bn-visual-media-wrapper";var o=document.createElement("img");return o.className="bn-visual-media",t.resolveFileUrl?t.resolveFileUrl(e.props.url).then((function(e){o.src=e})):o.src=e.props.url,o.alt=e.props.name||e.props.caption||"BlockNote image",o.contentEditable="false",o.draggable=!1,r.appendChild(o),xD(e,t,{dom:r},r,t.dictionary.file_blocks.image.add_button_text,n.firstElementChild)},parse:_D,toExternalHTML:function(e){if(!e.props.url){var t=document.createElement("p");return t.textContent="Add image",{dom:t}}var n;return e.props.showPreview?((n=document.createElement("img")).src=e.props.url,n.alt=e.props.name||e.props.caption||"BlockNote image",n.width=e.props.previewWidth):((n=document.createElement("a")).href=e.props.url,n.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?aD(n,e.props.caption):sD(n,e.props.caption):{dom:n}}}),DD=wE({type:"pageBreak",propSchema:{},content:"none",isFileBlock:!1,isSelectable:!1},{render:function(){var e=document.createElement("div");return e.className="bn-page-break",e.setAttribute("data-page-break",""),{dom:e}},parse:function(e){if("DIV"===e.tagName&&e.hasAttribute("data-page-break"))return{type:"pageBreak"}},toExternalHTML:function(){var e=document.createElement("div");return e.setAttribute("data-page-break",""),{dom:e}}}),MD=DE(Ps.create({name:"backgroundColor",addAttributes:function(){return{stringValue:{default:void 0,parseHTML:function(e){return e.getAttribute("data-background-color")},renderHTML:function(e){return{"data-background-color":e.stringValue}}}}},parseHTML:function(){return[{tag:"span",getAttrs:function(e){return"string"!=typeof e&&!!e.hasAttribute("data-background-color")&&{stringValue:e.getAttribute("data-background-color")}}}]},renderHTML:function(e){return["span",e.HTMLAttributes,0]}}),"string"),AD=DE(Ps.create({name:"textColor",addAttributes:function(){return{stringValue:{default:void 0,parseHTML:function(e){return e.getAttribute("data-text-color")},renderHTML:function(e){return{"data-text-color":e.stringValue}}}}},parseHTML:function(){return[{tag:"span",getAttrs:function(e){return"string"!=typeof e&&!!e.hasAttribute("data-text-color")&&{stringValue:e.getAttribute("data-text-color")}}}]},renderHTML:function(e){return["span",e.HTMLAttributes,0]}}),"string"),OD=C_(C_({},lE),{},{level:{default:1,values:[1,2,3]}}),TD=gE(mE({name:"heading",content:"inline*",group:"blockContent",addAttributes:function(){return fE(OD)},addInputRules:function(){var e=this;return y_([1,2,3].map((function(t){return new As({find:new RegExp("^(#{".concat(t,"})\\s$")),handler:function(n){var r=n.state,o=n.chain,i=n.range,a=q_(r);!a.isBlockContainer||"inline*"!==a.blockContent.node.type.spec.content||o().command(qE(e.options.editor,a.bnBlock.beforePos,{type:"heading",props:{level:t}})).deleteRange({from:i.from,to:i.to}).run()}})})))},addKeyboardShortcuts:function(){var e=this;return{"Mod-Alt-1":function(){var t=q_(e.editor.state);return!t.isBlockContainer||"inline*"!==t.blockContent.node.type.spec.content||e.editor.commands.command(qE(e.options.editor,t.bnBlock.beforePos,{type:"heading",props:{level:1}}))},"Mod-Alt-2":function(){var t=q_(e.editor.state);return!t.isBlockContainer||"inline*"!==t.blockContent.node.type.spec.content||e.editor.commands.command(qE(e.options.editor,t.bnBlock.beforePos,{type:"heading",props:{level:2}}))},"Mod-Alt-3":function(){var t=q_(e.editor.state);return!t.isBlockContainer||"inline*"!==t.blockContent.node.type.spec.content||e.editor.commands.command(qE(e.options.editor,t.bnBlock.beforePos,{type:"heading",props:{level:3}}))}}},parseHTML:function(){return[{tag:"div[data-content-type="+this.name+"]"},{tag:"h1",attrs:{level:1},node:"heading"},{tag:"h2",attrs:{level:2},node:"heading"},{tag:"h3",attrs:{level:3},node:"heading"}]},renderHTML:function(e){var t,n,r=e.node,o=e.HTMLAttributes;return aE(this.name,"h".concat(r.attrs.level),C_(C_({},(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{}),o),(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{})}}),OD),jD=function(e,t,n){return function(r){var o=r.state,i=r.dispatch,a=G_($_(o.doc,e));if(!a.isBlockContainer)throw new Error("BlockContainer expected when calling splitBlock, position ".concat(e));var s=[{type:a.bnBlock.node.type,attrs:n?C_(C_({},a.bnBlock.node.attrs),{},{id:void 0}):{}},{type:t?a.blockContent.node.type:o.schema.nodes.paragraph,attrs:n?C_({},a.blockContent.node.attrs):{}}];return i&&o.tr.split(e,2,s),!0}},ND=function(e){var t=e._tiptapEditor,n=q_(t.state);if(!n.isBlockContainer)return!1;var r=n.bnBlock,o=n.blockContent,i=t.state.selection.anchor===t.state.selection.head;return!("bulletListItem"!==o.node.type.name&&"numberedListItem"!==o.node.type.name&&"checkListItem"!==o.node.type.name||!i)&&t.commands.first((function(t){var n=t.state,i=t.chain,a=t.commands;return[function(){return a.command((function(){return 0===o.node.childCount&&a.command(qE(e,r.beforePos,{type:"paragraph",props:{}}))}))},function(){return a.command((function(){return o.node.childCount>0&&(i().deleteSelection().command(jD(n.selection.from,!0)).run(),!0)}))}]}))},PD=C_({},lE),LD=gE(mE({name:"bulletListItem",content:"inline*",group:"blockContent",priority:90,addInputRules:function(){var e=this;return[new As({find:new RegExp("^[-+*]\\s$"),handler:function(t){var n=t.state,r=t.chain,o=t.range,i=q_(n);!i.isBlockContainer||"inline*"!==i.blockContent.node.type.spec.content||r().command(qE(e.options.editor,i.bnBlock.beforePos,{type:"bulletListItem",props:{}})).deleteRange({from:o.from,to:o.to})}})]},addKeyboardShortcuts:function(){var e=this;return{Enter:function(){return ND(e.options.editor)},"Mod-Shift-8":function(){var t=q_(e.editor.state);return!t.isBlockContainer||"inline*"!==t.blockContent.node.type.spec.content||e.editor.commands.command(qE(e.options.editor,t.bnBlock.beforePos,{type:"bulletListItem",props:{}}))}}},parseHTML:function(){return[{tag:"div[data-content-type="+this.name+"]"},{tag:"li",getAttrs:function(e){if("string"==typeof e)return!1;var t=e.parentElement;return null!==t&&("UL"===t.tagName||"DIV"===t.tagName&&"UL"===t.parentElement.tagName)&&{}},node:"bulletListItem"},{tag:"p",getAttrs:function(e){if("string"==typeof e)return!1;var t=e.parentElement;return null!==t&&"bulletListItem"===t.getAttribute("data-content-type")&&{}},priority:300,node:"bulletListItem"}]},renderHTML:function(e){var t,n,r=e.HTMLAttributes;return aE(this.name,"p",C_(C_({},(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{}),r),(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{})}}),PD),RD=C_(C_({},lE),{},{checked:{default:!1}}),ID=mE({name:"checkListItem",content:"inline*",group:"blockContent",addAttributes:function(){return fE(RD)},addInputRules:function(){var e=this;return[new As({find:new RegExp("\\[\\s*\\]\\s$"),handler:function(t){var n=t.state,r=t.chain,o=t.range,i=q_(n);!i.isBlockContainer||"inline*"!==i.blockContent.node.type.spec.content||r().command(qE(e.options.editor,i.bnBlock.beforePos,{type:"checkListItem",props:{checked:!1}})).deleteRange({from:o.from,to:o.to})}}),new As({find:new RegExp("\\[[Xx]\\]\\s$"),handler:function(t){var n=t.state,r=t.chain,o=t.range,i=q_(n);!i.isBlockContainer||"inline*"!==i.blockContent.node.type.spec.content||r().command(qE(e.options.editor,i.bnBlock.beforePos,{type:"checkListItem",props:{checked:!0}})).deleteRange({from:o.from,to:o.to})}})]},addKeyboardShortcuts:function(){var e=this;return{Enter:function(){return ND(e.options.editor)},"Mod-Shift-9":function(){var t=q_(e.editor.state);return!t.isBlockContainer||"inline*"!==t.blockContent.node.type.spec.content||e.editor.commands.command(qE(e.options.editor,t.bnBlock.beforePos,{type:"checkListItem",props:{}}))}}},parseHTML:function(){return[{tag:"div[data-content-type="+this.name+"]"},{tag:"input",getAttrs:function(e){return"string"!=typeof e&&"checkbox"===e.type&&{checked:e.checked}},node:"checkListItem"},{tag:"li",getAttrs:function(e){if("string"==typeof e)return!1;var t=e.parentElement;if(null===t)return!1;if("UL"===t.tagName||"DIV"===t.tagName&&"UL"===t.parentElement.tagName){var n=e.querySelector("input[type=checkbox]")||null;return null!==n&&{checked:n.checked}}return!1},node:"checkListItem"}]},renderHTML:function(e){var t,n,r=e.node,o=e.HTMLAttributes,i=document.createElement("input");i.type="checkbox",i.checked=r.attrs.checked,r.attrs.checked&&i.setAttribute("checked","");var a=aE(this.name,"p",C_(C_({},(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{}),o),(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{}),s=a.dom,l=a.contentDOM;return s.insertBefore(i,l),{dom:s,contentDOM:l}},addNodeView:function(){var e=this;return function(t){var n,r,o=t.node,i=t.getPos,a=t.editor,s=t.HTMLAttributes,l=document.createElement("div"),c=document.createElement("div");c.contentEditable="false";var u=document.createElement("input");u.type="checkbox",u.checked=o.attrs.checked,o.attrs.checked&&u.setAttribute("checked","");var d=function(){if(a.isEditable){if("boolean"!=typeof i){var t=$_(a.state.doc,i());if("blockContainer"!==t.node.type.name)throw new Error("Expected blockContainer node, got ".concat(t.node.type.name));e.editor.commands.command(qE(e.options.editor,t.posBeforeNode,{type:"checkListItem",props:{checked:u.checked}}))}}else u.checked=!u.checked};u.addEventListener("change",d);var f=aE(e.name,"p",C_(C_({},(null==(n=e.options.domAttributes)?void 0:n.blockContent)||{}),s),(null==(r=e.options.domAttributes)?void 0:r.inlineContent)||{}),p=f.dom,h=f.contentDOM;if("boolean"!=typeof i){var m="label-"+e.editor.state.doc.resolve(i()).node().attrs.id;u.setAttribute("aria-labelledby",m),h.id=m}return p.removeChild(h),p.appendChild(l),l.appendChild(c),l.appendChild(h),c.appendChild(u),{dom:p,contentDOM:h,destroy:function(){u.removeEventListener("change",d)}}}}}),BD=gE(ID,RD),FD=new In("numbered-list-indexing"),HD=C_(C_({},lE),{},{start:{default:void 0,type:"number"}}),zD=mE({name:"numberedListItem",content:"inline*",group:"blockContent",priority:90,addAttributes:function(){return C_(C_({},fE(HD)),{},{index:{default:null,parseHTML:function(e){return e.getAttribute("data-index")},renderHTML:function(e){return{"data-index":e.index}}}})},addInputRules:function(){var e=this;return[new As({find:new RegExp("^(\\d+)\\.\\s$"),handler:function(t){var n=t.state,r=t.chain,o=t.range,i=t.match,a=q_(n);if(a.isBlockContainer&&"inline*"===a.blockContent.node.type.spec.content&&"numberedListItem"!==a.blockNoteType){var s=parseInt(i[1]);r().command(qE(e.options.editor,a.bnBlock.beforePos,{type:"numberedListItem",props:1===s&&{}||{start:s}})).deleteRange({from:o.from,to:o.to})}}})]},addKeyboardShortcuts:function(){var e=this;return{Enter:function(){return ND(e.options.editor)},"Mod-Shift-7":function(){var t=q_(e.editor.state);return!t.isBlockContainer||"inline*"!==t.blockContent.node.type.spec.content||e.editor.commands.command(qE(e.options.editor,t.bnBlock.beforePos,{type:"numberedListItem",props:{}}))}}},addProseMirrorPlugins:function(){return[new Pn({key:FD,appendTransaction:function(e,t,n){var r=n.tr;r.setMeta("numberedListIndexing",!0);var o=!1;return n.doc.descendants((function(e,t){var n;if("blockContainer"===e.type.name&&"numberedListItem"===e.firstChild.type.name){var i="".concat(e.firstChild.attrs.start||1),a=G_({posBeforeNode:t,node:e});if(!a.isBlockContainer)throw new Error("impossible");var s=r.doc.resolve(a.bnBlock.beforePos).nodeBefore;if(s){var l=G_({posBeforeNode:a.bnBlock.beforePos-s.nodeSize,node:s});if("numberedListItem"===l.blockNoteType){if(!l.isBlockContainer)throw new Error("impossible");var c=l.blockContent.node.attrs.index;i=(parseInt(c)+1).toString()}}var u=a.blockContent.node,d=u.attrs.index,f="numberedListItem"!==(null==(n=null==s?void 0:s.firstChild)?void 0:n.type.name);if(d!==i||u.attrs.start&&!f){o=!0;var p=u.attrs,h=p.start,m=__(p,d_);r.setNodeMarkup(a.blockContent.beforePos,void 0,C_(C_({},m),{},{index:i},"number"==typeof h&&f&&{start:h}))}}})),o?r:null}})]},parseHTML:function(){return[{tag:"div[data-content-type="+this.name+"]"},{tag:"li",getAttrs:function(e){if("string"==typeof e)return!1;var t=e.parentElement;if(null===t)return!1;if("OL"===t.tagName||"DIV"===t.tagName&&"OL"===t.parentElement.tagName){var n=parseInt(t.getAttribute("start")||"1")||1;return e.previousSibling||1===n?{}:{start:n}}return!1},node:"numberedListItem"},{tag:"p",getAttrs:function(e){if("string"==typeof e)return!1;var t=e.parentElement;return null!==t&&"numberedListItem"===t.getAttribute("data-content-type")&&{}},priority:300,node:"numberedListItem"}]},renderHTML:function(e){var t,n,r=e.HTMLAttributes;return aE(this.name,"p",C_(C_({},(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{}),r),(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{})}}),VD=gE(zD,HD),$D=C_({},lE),UD=gE(mE({name:"paragraph",content:"inline*",group:"blockContent",addKeyboardShortcuts:function(){var e=this;return{"Mod-Alt-0":function(){var t=q_(e.editor.state);return!t.isBlockContainer||"inline*"!==t.blockContent.node.type.spec.content||e.editor.commands.command(qE(e.options.editor,t.bnBlock.beforePos,{type:"paragraph",props:{}}))}}},parseHTML:function(){return[{tag:"div[data-content-type="+this.name+"]"},{tag:"p",priority:200,getAttrs:function(e){var t;return!("string"==typeof e||null==(t=e.textContent)||!t.trim())&&{}},node:"paragraph"}]},renderHTML:function(e){var t,n,r=e.HTMLAttributes;return aE(this.name,"p",C_(C_({},(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{}),r),(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{})}}),$D),GD=Fs.create({name:"BlockNoteTableExtension",addProseMirrorPlugins:function(){return[Gh({cellMinWidth:35,defaultCellMinWidth:120,View:null}),Xh()]},addKeyboardShortcuts:function(){var e=this;return{Enter:function(){return!(!e.editor.state.selection.empty||"tableParagraph"!==e.editor.state.selection.$head.parent.type.name||(e.editor.commands.setHardBreak(),0))},Backspace:function(){var t=e.editor.state.selection,n=t.empty,r=0===t.$head.parentOffset,o="tableParagraph"===t.$head.node().type.name;return n&&r&&o},Tab:function(){return e.editor.commands.command((function(e){var t=e.state,n=e.dispatch,r=e.view;return Eh(1)(t,n,r)}))},"Shift-Tab":function(){return e.editor.commands.command((function(e){var t=e.state,n=e.dispatch,r=e.view;return Eh(-1)(t,n,r)}))}}},extendNodeSchema:function(e){return{tableRole:ws(hs(e,"tableRole",{name:e.name,options:e.options,storage:e.storage}))}}}),WD={textColor:lE.textColor},qD=mE({name:"table",content:"tableRow+",group:"blockContent",tableRole:"table",isolating:!0,parseHTML:function(){return[{tag:"table"}]},renderHTML:function(e){var t,n,r=e.HTMLAttributes;return aE(this.name,"table",C_(C_({},(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{}),r),(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{})},addNodeView:function(){var e=this;return function(t){var n,r=t.node,o=t.HTMLAttributes,i=function(e){function t(e,n,r){var o;A_(this,t),(o=O_(this,t,[e,n])).node=e,o.cellMinWidth=n,o.blockContentHTMLAttributes=r;var i=document.createElement("div");i.className=oE("bn-block-content",r.class),i.setAttribute("data-content-type","table");for(var a=0,s=Object.entries(r);a<s.length;a++){var l=b_(s[a],2),c=l[0],u=l[1];"class"!==c&&i.setAttribute(c,u)}var d=o.dom,f=document.createElement("div");f.className="tableWrapper-inner",f.appendChild(d.firstChild),d.appendChild(f),i.appendChild(d);var p=document.createElement("div");return p.className="table-widgets-container",p.style.position="relative",d.appendChild(p),o.dom=i,o}return T_(t,e),D_(t,[{key:"ignoreMutation",value:function(e){return!e.target.closest(".tableWrapper-inner")||function(e,t,n){var r=p_(L_(e.prototype),"ignoreMutation",n);return"function"==typeof r?function(e){return r.apply(n,e)}:r}(t,0,this)([e])}}])}(Vh);return new i(r,120,C_(C_({},(null==(n=e.options.domAttributes)?void 0:n.blockContent)||{}),o))}}}),KD=gE(qD,WD,[GD,mE({name:"tableParagraph",group:"tableContent",content:"inline*",parseHTML:function(){return[{preserveWhitespace:"full",priority:210,context:"tableContent",tag:"p",getAttrs:function(e){return{}}},{tag:"p",getAttrs:function(e){if("string"==typeof e||!e.textContent)return!1;var t=e.parentElement;return null!==t&&"TD"===t.tagName&&{}}}]},renderHTML:function(e){return["p",e.HTMLAttributes,0]}}),vm.extend({content:"tableContent+"}),mm.extend({content:"tableContent+"}),gm]),ZD=function(e){return{url:e.src||void 0,previewWidth:e.width||void 0}},JD={type:"video",propSchema:{textAlignment:lE.textAlignment,backgroundColor:lE.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:512}},content:"none",isFileBlock:!0,fileBlockAccept:["video/*"]},XD=function(e){if("VIDEO"===e.tagName)return ZD(e);if("FIGURE"===e.tagName){var t=oD(e,"video");if(!t)return;var n=t.targetElement,r=t.caption;return C_(C_({},ZD(n)),{},{caption:r})}},YD=wE(JD,{render:function(e,t){var n=document.createElement("div");n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"></path></svg>';var r=document.createElement("div");r.className="bn-visual-media-wrapper";var o=document.createElement("video");return o.className="bn-visual-media",t.resolveFileUrl?t.resolveFileUrl(e.props.url).then((function(e){o.src=e})):o.src=e.props.url,o.controls=!0,o.contentEditable="false",o.draggable=!1,o.width=e.props.previewWidth,r.appendChild(o),xD(e,t,{dom:r},r,t.dictionary.file_blocks.video.add_button_text,n.firstElementChild)},parse:XD,toExternalHTML:function(e){if(!e.props.url){var t=document.createElement("p");return t.textContent="Add video",{dom:t}}var n;return e.props.showPreview?((n=document.createElement("video")).src=e.props.url,n.width=e.props.previewWidth):((n=document.createElement("a")).href=e.props.url,n.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?aD(n,e.props.caption):sD(n,e.props.caption):{dom:n}}}),QD={paragraph:UD,heading:TD,codeBlock:gD,bulletListItem:LD,numberedListItem:VD,checkListItem:BD,table:KD,file:wD,image:ED,video:YD,audio:dD},eM=yE(QD),tM={bold:DE(nm,"boolean"),italic:DE(um,"boolean"),underline:DE(hm,"boolean"),strike:DE(pm,"boolean"),code:DE(im,"boolean"),textColor:AD,backgroundColor:MD},nM=(ME(tM),{text:{config:"text",implementation:{}},link:{config:"link",implementation:{}}}),rM=EE(nM);function oM(e,t){return e in t.schema.blockSchema&&t.schema.blockSchema[e]===eM[e]}function iM(e,t){return e in t.schema.inlineContentSchema&&t.schema.inlineContentSchema[e]===rM[e]}function aM(e,t){return e.type in t.schema.blockSchema&&t.schema.blockSchema[e.type].isFileBlock||!1}function sM(e,t){return t.schema.blockSchema[e.type].isFileBlock&&!e.props.url}function lM(e,t,n){return t in n.schema.blockSchema&&e in n.schema.blockSchema[t].propSchema&&n.schema.blockSchema[t].propSchema[e]===lE[e]}function cM(e,t,n){return lM(e,t.type,n)}function uM(e){return e instanceof fh}function dM(e,t){var n,r=e.getTextCursorPosition().block;if(void 0===r.content)throw new Error("Slash Menu open in a block that doesn't contain content.");return Array.isArray(r.content)&&(1===r.content.length&&X_(r.content[0])&&"text"===r.content[0].type&&"/"===r.content[0].text||0===r.content.length)?(n=e.updateBlock(r,t),e.setTextCursorPosition(n)):(n=e.insertBlocks([t],r,"after")[0],e.setTextCursorPosition(e.getTextCursorPosition().nextBlock)),function(e){for(var t=e.getTextCursorPosition().block,n=e.schema.blockSchema[t.type].content;"none"===n;){if(void 0===(t=e.getTextCursorPosition().nextBlock))return;n=e.schema.blockSchema[t.type].content,e.setTextCursorPosition(t,"end")}}(e),n}function fM(e,t){return e.filter((function(e){var n=e.title,r=e.aliases;return n.toLowerCase().includes(t.toLowerCase())||r&&0!==r.filter((function(e){return e.toLowerCase().includes(t.toLowerCase())})).length}))}function pM(e){return e&&Object.fromEntries(Object.entries(e).filter((function(e){return void 0!==b_(e,2)[1]})))}var hM,mM=function(){function e(t){A_(this,e),B_(this,"blockSpecs"),B_(this,"inlineContentSpecs"),B_(this,"styleSpecs"),B_(this,"blockSchema"),B_(this,"inlineContentSchema"),B_(this,"styleSchema"),B_(this,"BlockNoteEditor","only for types"),B_(this,"Block","only for types"),B_(this,"PartialBlock","only for types"),this.blockSpecs=pM(null==t?void 0:t.blockSpecs)||QD,this.inlineContentSpecs=pM(null==t?void 0:t.inlineContentSpecs)||nM,this.styleSpecs=pM(null==t?void 0:t.styleSpecs)||tM,this.blockSchema=yE(this.blockSpecs),this.inlineContentSchema=EE(this.inlineContentSpecs),this.styleSchema=ME(this.styleSpecs)}return D_(e,null,[{key:"create",value:function(t){return new e(t)}}])}();function vM(e){return e.map((function(e){return"columnList"===e.type?e.children.map((function(e){return vM(e.children)})).flat():C_(C_({},e),{},{children:vM(e.children)})})).flat()}function gM(e,t,n){var r,o=(null==(r=e.getSelection())?void 0:r.blocks)||[e.getTextCursorPosition().block],i=function(e){var t=e._tiptapEditor.state,n=t.selection,r=$_(t.doc,n.anchor);if(n instanceof fh)return{type:"cell",anchorBlockId:r.node.attrs.id,anchorCellOffset:n.$anchorCell.pos-r.posBeforeNode,headCellOffset:n.$headCell.pos-r.posBeforeNode};if(e._tiptapEditor.state.selection instanceof wn)return{type:"node",anchorBlockId:r.node.attrs.id};var o=$_(t.doc,n.head);return{type:"text",anchorBlockId:r.node.attrs.id,headBlockId:o.node.attrs.id,anchorOffset:n.anchor-r.posBeforeNode,headOffset:n.head-o.posBeforeNode}}(e);e.removeBlocks(o),e.insertBlocks(vM(o),t,n),function(e,t){var n,r,o,i=null==(n=WE(t.anchorBlockId,e._tiptapEditor.state.doc))?void 0:n.posBeforeNode;if(void 0===i)throw new Error("Could not find block with ID ".concat(t.anchorBlockId," to update selection"));if("cell"===t.type)o=fh.create(e._tiptapEditor.state.doc,i+t.anchorCellOffset,i+t.headCellOffset);else if("node"===t.type)o=wn.create(e._tiptapEditor.state.doc,i+1);else{var a=null==(r=WE(t.headBlockId,e._tiptapEditor.state.doc))?void 0:r.posBeforeNode;if(void 0===a)throw new Error("Could not find block with ID ".concat(t.headBlockId," to update selection"));o=bn.create(e._tiptapEditor.state.doc,i+t.anchorOffset,a+t.headOffset)}e.dispatch(e._tiptapEditor.state.tr.setSelection(o))}(e,i)}function yM(e){return!e||"columnList"!==e.type}function bM(e,t,n){var r,o;if(t?t.children.length>0?(r=t.children[t.children.length-1],o="after"):(r=t,o="before"):n&&(r=n,o="before"),r&&o){var i=e.getParentBlock(r);return yM(i)?{referenceBlock:r,placement:o}:bM(e,"after"===o?r:e.getPrevBlock(r),i)}}function kM(e,t,n){var r,o;if(t?t.children.length>0?(r=t.children[0],o="before"):(r=t,o="after"):n&&(r=n,o="after"),r&&o){var i=e.getParentBlock(r);return yM(i)?{referenceBlock:r,placement:o}:kM(e,"before"===o?r:e.getNextBlock(r),i)}}function wM(e){var t=e.getSelection(),n=(null==t?void 0:t.blocks[0])||e.getTextCursorPosition().block,r=bM(e,e.getPrevBlock(n),e.getParentBlock(n));r&&gM(e,r.referenceBlock,r.placement)}function xM(e){var t=e.getSelection(),n=(null==t?void 0:t.blocks[(null==t?void 0:t.blocks.length)-1])||e.getTextCursorPosition().block,r=kM(e,e.getNextBlock(n),e.getParentBlock(n));r&&gM(e,r.referenceBlock,r.placement)}function CM(e){return e._tiptapEditor.commands.command(function(e,t){return function(n){var r=n.state,o=n.dispatch,i=r.selection,a=i.$from,s=i.$to,l=a.blockRange(s,(function(e){return e.childCount>0&&("blockGroup"===e.type.name||"column"===e.type.name)}));if(!l)return!1;var c=l.startIndex;if(0===c)return!1;var u=l.parent.child(c-1);if(u.type!==e)return!1;if(o){var d=u.lastChild&&u.lastChild.type===t,f=Z.from(d?e.create():null),p=new te(Z.from(e.create(null,Z.from(t.create(null,f)))),d?3:1,0),h=l.start,m=l.end;o(r.tr.step(new Dt(h-(d?3:1),m,h,m,p,1,!0)).scrollIntoView())}return!0}}(e._tiptapEditor.schema.nodes.blockContainer,e._tiptapEditor.schema.nodes.blockGroup))}function SM(e,t,n){var r,o=e._tiptapEditor,i=o.state.tr,a=[],s=g_(n);try{for(s.s();!(r=s.n()).done;){var l=r.value;a.push(GE(l,e.pmSchema,e.schema.styleSchema))}}catch(e){s.e(e)}finally{s.f()}var c=new Set(t.map((function(e){return"string"==typeof e?e:e.id}))),u=[],d="string"==typeof t[0]?t[0]:t[0].id,f=0;if(o.state.doc.descendants((function(t,r){if(0===c.size)return!1;if(!t.type.isInGroup("bnBlock")||!c.has(t.attrs.id))return!0;if(u.push(_E(t,e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache)),c.delete(t.attrs.id),n.length>0&&t.attrs.id===d){var o=i.doc.nodeSize,s=(i=i.insert(r,a)).doc.nodeSize;f+=o-s}var l=i.doc.nodeSize,p=i.doc.resolve(r-f),h=(i="blockGroup"===p.node().type.name&&"doc"!==p.node(p.depth-1).type.name&&1===p.node().childCount?i.delete(p.before(),p.after()):i.delete(r-f,r-f+t.nodeSize)).doc.nodeSize;return f+=l-h,!1})),c.size>0){var p=y_(c).join("\n");throw Error("Blocks with the following IDs could not be found in the editor: "+p)}e.dispatch(i);for(var h=[],m=0,v=a;m<v.length;m++){var g=v[m];h.push(_E(g,e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache))}return{insertedBlocks:h,removedBlocks:u}}function _M(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"start",r="string"==typeof t?t:t.id,o=WE(r,e._tiptapEditor.state.doc);if(!o)throw new Error("Block with ID ".concat(r," not found"));var i=G_(o),a=e.schema.blockSchema[i.blockNoteType].content;if(i.isBlockContainer){var s=i.blockContent;if("none"===a)return void e._tiptapEditor.commands.setNodeSelection(s.beforePos);if("inline"===a)"start"===n?e._tiptapEditor.commands.setTextSelection(s.beforePos+1):e._tiptapEditor.commands.setTextSelection(s.afterPos-1);else{if("table"!==a)throw new z_(a);"start"===n?e._tiptapEditor.commands.setTextSelection(s.beforePos+4):e._tiptapEditor.commands.setTextSelection(s.afterPos-4)}}else _M(e,("start"===n?i.childContainer.node.firstChild:i.childContainer.node.lastChild).attrs.id,n)}function EM(){return DM.apply(this,arguments)}function DM(){return(DM=v_(h_().mark((function e(){var t;return h_().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!hM){e.next=2;break}return e.abrupt("return",hM);case 2:return e.next=4,Promise.all([Promise.all([a.e(5305),a.e(6979)]).then(a.bind(a,6979)),Promise.all([a.e(5305),a.e(1834)]).then(a.bind(a,1834)),a.e(2816).then(a.bind(a,2816)),Promise.all([a.e(5305),a.e(7543)]).then(a.bind(a,7543)),Promise.all([a.e(5449),a.e(1681)]).then(a.bind(a,1681)),Promise.resolve().then(a.t.bind(a,9349,19)),Promise.all([a.e(5449),a.e(4176)]).then(a.bind(a,4176)),a.e(1777).then(a.bind(a,1777)),Promise.all([a.e(5449),a.e(6198)]).then(a.bind(a,6198)),a.e(165).then(a.bind(a,2546))]);case 4:return t=e.sent,e.abrupt("return",hM={rehypeParse:t[0],rehypeStringify:t[1],unified:t[2],hastUtilFromDom:t[3],rehypeRemark:t[4],remarkGfm:t[5],remarkStringify:t[6],remarkParse:t[7],remarkRehype:t[8],rehypeFormat:t[9]});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function MM(){var e=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(t){for(var n=t.children.length,r=0;r<n;r++){var o=t.children[r];if("element"===o.type&&(e(o),"u"===o.tagName))if(o.children.length>0){var i;(i=t.children).splice.apply(i,[r,1].concat(y_(o.children)));var a=o.children.length-1;n+=a,r+=a}else t.children.splice(r,1),n--,r--}}));return e}function AM(){var e=hM;if(!e)throw new Error("addSpacesToCheckboxes requires ESM dependencies to be initialized");var t=function(n){var r;if(n.children&&"length"in n.children&&n.children.length)for(var o=n.children.length-1;o>=0;o--){var i=n.children[o],a=o+1<n.children.length?n.children[o+1]:void 0;"element"===i.type&&"input"===i.tagName&&"checkbox"===(null==(r=i.properties)?void 0:r.type)&&"element"===(null==a?void 0:a.type)&&"p"===a.tagName?(a.tagName="span",a.children.splice(0,0,e.hastUtilFromDom.fromDom(document.createTextNode(" ")))):t(i)}};return t}function OM(e){var t=hM;if(!t)throw new Error("cleanHTMLToMarkdown requires ESM dependencies to be initialized");return t.unified.unified().use(t.rehypeParse.default,{fragment:!0}).use(MM).use(AM).use(t.rehypeRemark.default).use(t.remarkGfm.default).use(t.remarkStringify.default,{handlers:{text:function(e){return e.value}}}).processSync(e).value}function TM(e,t,n,r){return jM.apply(this,arguments)}function jM(){return jM=v_(h_().mark((function e(t,n,r,o){var i;return h_().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,EM();case 2:return i=QE(n,r).exportBlocks(t,o),e.abrupt("return",OM(i));case 4:case"end":return e.stop()}}),e)}))),jM.apply(this,arguments)}mM.create({blockSpecs:{pageBreak:DD}});var NM=null;function PM(e){if("string"==typeof e){var t=(NM||(NM=document.implementation.createHTMLDocument("title"))).createElement("div");t.innerHTML=e,e=t}return function(e){e.querySelectorAll("li > ul, li > ol").forEach((function(e){var t=function(e){return Array.prototype.indexOf.call(e.parentElement.childNodes,e)}(e),n=e.parentElement,r=Array.from(n.childNodes).slice(t+1);e.remove(),r.forEach((function(e){e.remove()})),n.insertAdjacentElement("afterend",e),r.reverse().forEach((function(t){if(!function(e){return 3===e.nodeType&&!/\S/.test(e.nodeValue||"")}(t)){var n=document.createElement("li");n.append(t),e.insertAdjacentElement("afterend",n)}})),0===n.childNodes.length&&n.remove()}))}(e),function(e){e.querySelectorAll("li + ul, li + ol").forEach((function(e){var t,n,r=e.previousElementSibling,o=document.createElement("div");r.insertAdjacentElement("afterend",o),o.append(r);var i=document.createElement("div");for(i.setAttribute("data-node-type","blockGroup"),o.append(i);"UL"===(null==(t=o.nextElementSibling)?void 0:t.nodeName)||"OL"===(null==(n=o.nextElementSibling)?void 0:n.nodeName);)i.append(o.nextElementSibling)}))}(e),e}function LM(e,t,n,r,o){return RM.apply(this,arguments)}function RM(){return RM=v_(h_().mark((function e(t,n,r,o,i){var a,s,l,c;return h_().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=PM(t),s=ze.fromSchema(i).parse(a,{topNode:i.nodes.blockGroup.create()}),l=[],c=0;c<s.childCount;c++)l.push(_E(s.child(c),n,r,o));return e.abrupt("return",l);case 3:case"end":return e.stop()}}),e)}))),RM.apply(this,arguments)}function IM(e,t){var n=t.value?t.value:"",r={};t.lang&&(r["data-language"]=t.lang);var o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(o.data={meta:t.meta}),e.patch(t,o),o={type:"element",tagName:"pre",properties:{},children:[o=e.applyData(t,o)]},e.patch(t,o),o}function BM(e,t,n,r,o){return FM.apply(this,arguments)}function FM(){return FM=v_(h_().mark((function e(t,n,r,o,i){var a,s;return h_().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,EM();case 2:return a=e.sent,s=a.unified.unified().use(a.remarkParse.default).use(a.remarkGfm.default).use(a.remarkRehype.default,{handlers:C_(C_({},a.remarkRehype.defaultHandlers),{},{code:IM})}).use(a.rehypeStringify.default).processSync(t),e.abrupt("return",LM(s.value,n,r,o,i));case 5:case"end":return e.stop()}}),e)}))),FM.apply(this,arguments)}var HM=["vscode-editor-data","blocknote/html","text/html","text/plain","Files"];function zM(e,t){if(!e.startsWith(".")||!t.startsWith("."))throw new Error("The strings provided are not valid file extensions.");return e===t}function VM(e,t){var n=e.split("/"),r=t.split("/");if(2!==n.length)throw new Error("The string ".concat(e," is not a valid MIME type."));if(2!==r.length)throw new Error("The string ".concat(t," is not a valid MIME type."));return"*"===n[1]||"*"===r[1]?n[0]===r[0]:("*"===n[0]||"*"===r[0]||n[0]===r[0])&&n[1]===r[1]}function $M(e,t,n){return Array.isArray(t.content)&&0===t.content.length?e.updateBlock(t,n).id:e.insertBlocks([n],t,"after")[0].id}function UM(e,t){return GM.apply(this,arguments)}function GM(){return GM=v_(h_().mark((function e(t,n){var r,o,i,a,s,l,c,u,d,f,p,h,m,v,g,y,b,k,w,x,C,S,_,E,D,M,A;return h_().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.uploadFile){e.next=3;break}return console.warn("Attempted ot insert file, but uploadFile is not set in the BlockNote editor options"),e.abrupt("return");case 3:if(null!==(o="dataTransfer"in t?t.dataTransfer:t.clipboardData)){e.next=6;break}return e.abrupt("return");case 6:i=null,a=g_(HM),e.prev=8,a.s();case 10:if((s=a.n()).done){e.next=17;break}if(l=s.value,!o.types.includes(l)){e.next=15;break}return i=l,e.abrupt("break",17);case 15:e.next=10;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),a.e(e.t0);case 22:return e.prev=22,a.f(),e.finish(22);case 25:if("Files"===i){e.next=27;break}return e.abrupt("return");case 27:if(c=o.items){e.next=30;break}return e.abrupt("return");case 30:t.preventDefault(),u=Object.values(n.schema.blockSchema).filter((function(e){return e.isFileBlock})),d=0;case 33:if(!(d<c.length)){e.next=95;break}f="file",p=g_(u),e.prev=36,p.s();case 38:if((h=p.n()).done){e.next=61;break}m=h.value,v=g_(m.fileBlockAccept||[]),e.prev=41,v.s();case 43:if((g=v.n()).done){e.next=51;break}if(y=g.value,b=y.startsWith("."),!(k=c[d].getAsFile())||!(!b&&k.type&&VM(c[d].type,y)||b&&zM("."+k.name.split(".").pop(),y))){e.next=49;break}return f=m.type,e.abrupt("break",51);case 49:e.next=43;break;case 51:e.next=56;break;case 53:e.prev=53,e.t1=e.catch(41),v.e(e.t1);case 56:return e.prev=56,v.f(),e.finish(56);case 59:e.next=38;break;case 61:e.next=66;break;case 63:e.prev=63,e.t2=e.catch(36),p.e(e.t2);case 66:return e.prev=66,p.f(),e.finish(66);case 69:if(!(w=c[d].getAsFile())){e.next=92;break}if(x={type:f,props:{name:w.name}},C=void 0,"paste"!==t.type){e.next=78;break}S=n.getTextCursorPosition().block,C=$M(n,S,x),e.next=87;break;case 78:if("drop"!==t.type){e.next=86;break}if(_={left:t.clientX,top:t.clientY},E=null==(r=n.prosemirrorView)?void 0:r.posAtCoords(_)){e.next=82;break}return e.abrupt("return");case 82:D=$_(n._tiptapEditor.state.doc,E.pos),C=$M(n,n.getBlock(D.node.attrs.id),x),e.next=87;break;case 86:return e.abrupt("return");case 87:return e.next=89,n.uploadFile(w,C);case 89:M=e.sent,A="string"==typeof M?{props:{url:M}}:C_({},M),n.updateBlock(C,A);case 92:d++,e.next=33;break;case 95:case"end":return e.stop()}}),e,null,[[8,19,22,25],[36,63,66,69],[41,53,56,59]])}))),GM.apply(this,arguments)}var WM=function(e){return Fs.create({name:"dropFile",addProseMirrorPlugins:function(){return[new Pn({props:{handleDOMEvents:{drop:function(t,n){if(e.isEditable){for(var r=null,o=0,i=HM;o<i.length;o++){var a=i[o];if(n.dataTransfer.types.includes(a)){r=a;break}}return null===r||"Files"===r&&(UM(n,e),!0)}}}}})]}})};function qM(){return qM=v_(h_().mark((function e(t,n){var r,o,i,a,s;return h_().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.state.schema,t.clipboardData){e.next=3;break}return e.abrupt("return",!1);case 3:if(o=t.clipboardData.getData("text/plain")){e.next=6;break}return e.abrupt("return",!1);case 6:if(r.nodes.codeBlock){e.next=8;break}return e.abrupt("return",(n.pasteText(o),!0));case 8:return i=t.clipboardData.getData("vscode-editor-data"),a=i?JSON.parse(i):void 0,s=null==a?void 0:a.mode,e.abrupt("return",!!s&&(n.pasteHTML('<pre><code class="language-'.concat(s,'">').concat(o.replace(/\r\n?/g,"\n"),"</code></pre>")),!0));case 10:case"end":return e.stop()}}),e)}))),qM.apply(this,arguments)}var KM=function(e){return Fs.create({name:"pasteFromClipboard",addProseMirrorPlugins:function(){return[new Pn({props:{handleDOMEvents:{paste:function(t,n){if(n.preventDefault(),e.isEditable){for(var r,o=0,i=HM;o<i.length;o++){var a=i[o];if(n.clipboardData.types.includes(a)){r=a;break}}if(!r)return!0;if("vscode-editor-data"===r)return function(e,t){qM.apply(this,arguments)}(n,t),!0;if("Files"===r)return UM(n,e),!0;var s=n.clipboardData.getData(r);return"blocknote/html"===r?(t.pasteHTML(s),!0):"text/html"===r?(s=PM(s.trim()).innerHTML,t.pasteHTML(s),!0):(t.pasteText(s),!0)}}}}})]}})};function ZM(e,t){var n=[];return e.descendants((function(e){var r,o;return"blockContainer"===e.type.name&&"blockGroup"===(null==(r=e.firstChild)?void 0:r.type.name)||("columnList"===e.type.name&&1===e.childCount?(null==(o=e.firstChild)||o.forEach((function(e){n.push(_E(e,t.blockSchema,t.inlineContentSchema,t.styleSchema))})),!1):!e.type.isInGroup("bnBlock")||(n.push(_E(e,t.blockSchema,t.inlineContentSchema,t.styleSchema)),!1))})),n}function JM(e,t){"node"in e.state.selection&&"blockContent"===e.state.selection.node.type.spec.group&&t.dispatch(t._tiptapEditor.state.tr.setSelection(new wn(e.state.doc.resolve(e.state.selection.from-1))));var n=e.serializeForClipboard(e.state.selection.content()).dom.innerHTML,r=e.state.selection.content().content,o=function(e,t,n){var r,o,i=!1,a=e.state.selection instanceof fh;if(!a){for(var s=e.state.doc.slice(e.state.selection.from,e.state.selection.to,!1).content,l=[],c=0;c<s.childCount;c++)l.push(s.child(c));i=void 0===l.find((function(e){return e.type.isInGroup("bnBlock")||"blockGroup"===e.type.name||"blockContent"===e.type.spec.group})),i&&(t=s)}var u=QE(e.state.schema,n);if(a){"table"===(null==(r=t.firstChild)?void 0:r.type.name)&&(t=t.firstChild.content);var d=xE(t,n.schema.inlineContentSchema,n.schema.styleSchema);o="<table>".concat(u.exportInlineContent(d,{}),"</table>")}else if(i){var f=CE(t,n.schema.inlineContentSchema,n.schema.styleSchema);o=u.exportInlineContent(f,{})}else{var p=ZM(t,n.schema);o=u.exportBlocks(p,{})}return o}(e,r,t);return{clipboardHTML:n,externalHTML:o,markdown:OM(o)}}var XM=function(){var e=window.getSelection();if(!e||e.isCollapsed)return!0;for(var t=e.focusNode;t;){if(t instanceof HTMLElement&&"false"===t.getAttribute("contenteditable"))return!0;t=t.parentElement}return!1},YM=function(e,t,n){n.preventDefault(),n.clipboardData.clearData();var r=JM(t,e),o=r.clipboardHTML,i=r.externalHTML,a=r.markdown;n.clipboardData.setData("blocknote/html",o),n.clipboardData.setData("text/html",i),n.clipboardData.setData("text/plain",a)},QM=function(e){return Fs.create({name:"copyToClipboard",addProseMirrorPlugins:function(){return[new Pn({props:{handleDOMEvents:{copy:function(t,n){return XM()||YM(e,t,n),!0},cut:function(t,n){return XM()||(YM(e,t,n),t.editable&&t.dispatch(t.state.tr.deleteSelection())),!0},dragstart:function(t,n){if("node"in t.state.selection&&"blockContent"===t.state.selection.node.type.spec.group){e.dispatch(e._tiptapEditor.state.tr.setSelection(new wn(t.state.doc.resolve(t.state.selection.from-1)))),n.preventDefault(),n.dataTransfer.clearData();var r=JM(t,e),o=r.clipboardHTML,i=r.externalHTML,a=r.markdown;return n.dataTransfer.setData("blocknote/html",o),n.dataTransfer.setData("text/html",i),n.dataTransfer.setData("text/plain",a),!0}}}}})]}})},eA=Fs.create({name:"blockBackgroundColor",addGlobalAttributes:function(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{backgroundColor:{default:lE.backgroundColor.default,parseHTML:function(e){return e.hasAttribute("data-background-color")?e.getAttribute("data-background-color"):lE.backgroundColor.default},renderHTML:function(e){return e.backgroundColor===lE.backgroundColor.default?{}:{"data-background-color":e.backgroundColor}}}}}]}}),tA=Ps.create({name:"comment",excludes:"",inclusive:!1,keepOnSplit:!0,addAttributes:function(){return{orphan:{parseHTML:function(e){return!!e.getAttribute("data-orphan")},renderHTML:function(e){return e.orphan?{"data-orphan":"true"}:{}},default:!1},threadId:{parseHTML:function(e){return e.getAttribute("data-bn-thread-id")},renderHTML:function(e){return{"data-bn-thread-id":e.threadId}},default:""}}},renderHTML:function(e){return["span",ys(e.HTMLAttributes,{class:"bn-thread-mark"})]},parseHTML:function(){return[{tag:"span.bn-thread-mark"}]},extendMarkSchema:function(e){return"comment"===e.name?{blocknoteIgnore:!0}:{}}}),nA=function(){return D_((function e(){A_(this,e),B_(this,"callbacks",{})}),[{key:"on",value:function(e,t){var n=this;return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),function(){return n.off(e,t)}}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=this.callbacks[e];i&&i.forEach((function(e){return e.apply(t,r)}))}},{key:"off",value:function(e,t){var n=this.callbacks[e];n&&(t?this.callbacks[e]=n.filter((function(e){return e!==t})):delete this.callbacks[e])}},{key:"removeAllListeners",value:function(){this.callbacks={}}}])}(),rA=function(e){function t(e){var n;return A_(this,t),n=O_(this,t),B_(n,"userCache",new Map),B_(n,"loadingUsers",new Set),n.resolveUsers=e,n}return T_(t,e),D_(t,[{key:"loadUsers",value:(n=v_(h_().mark((function e(t){var n,r,o,i,a,s,l,c,u,d,f,p=this;return h_().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.filter((function(e){return!p.userCache.has(e)&&!p.loadingUsers.has(e)})),0===n.length){e.next=15;break}r=g_(n);try{for(r.s();!(o=r.n()).done;)i=o.value,this.loadingUsers.add(i)}catch(e){r.e(e)}finally{r.f()}return e.prev=4,e.next=7,this.resolveUsers(n);case 7:a=e.sent,s=g_(a);try{for(s.s();!(l=s.n()).done;)c=l.value,this.userCache.set(c.id,c)}catch(e){s.e(e)}finally{s.f()}this.emit("update",this.userCache);case 11:e.prev=11,u=g_(n);try{for(u.s();!(d=u.n()).done;)f=d.value,this.loadingUsers.delete(f)}catch(e){u.e(e)}finally{u.f()}return e.finish(11);case 15:case"end":return e.stop()}}),e,this,[[4,,11,15]])}))),function(e){return n.apply(this,arguments)})},{key:"getUser",value:function(e){return this.userCache.get(e)}},{key:"subscribe",value:function(e){return this.on("update",e)}}]);var n}(nA),oA=new In("blocknote-comments"),iA=function(e){function t(e,n,r){var o;if(A_(this,t),o=O_(this,t),B_(o,"plugin"),B_(o,"userStore"),B_(o,"pendingComment",!1),B_(o,"selectedThreadId"),B_(o,"threadPositions",new Map),B_(o,"updateMarksFromThreads",(function(e){var t=o.editor._tiptapEditor;t.state.doc.descendants((function(n,r){n.marks.forEach((function(i){if(i.type.name===o.markType){var a=i.type,s=i.attrs.threadId,l=e.get(s),c=!(l&&!l.resolved&&!l.deletedAt);if(c!==i.attrs.orphan){var u=t.state.tr,d=Math.max(r,0),f=Math.min(r+n.nodeSize,t.state.doc.content.size-1);u.removeMark(d,f,a),u.addMark(d,f,a.create(C_(C_({},i.attrs),{},{orphan:c}))),t.dispatch(u),c&&o.selectedThreadId===s&&(o.selectedThreadId=void 0,o.emitStateUpdate())}}}))}))})),o.editor=e,o.threadStore=n,o.markType=r,!e.resolveUsers)throw new Error("resolveUsers is required for comments");o.userStore=new rA(e.resolveUsers),o.threadStore.subscribe(o.updateMarksFromThreads),e.onCreate((function(){o.updateMarksFromThreads(o.threadStore.getThreads()),e.onSelectionChange((function(){o.pendingComment&&(o.pendingComment=!1,o.emitStateUpdate())}))}));var i=o;return o.plugin=new Pn({key:oA,state:{init:function(){return{decorations:Li.empty}},apply:function(e,t){var n=e.getMeta(oA);if(!e.docChanged&&!n)return t;var r=e.docChanged?function(e,t){var n=new Map;return e.descendants((function(e,r){e.marks.forEach((function(o){if(o.type.name===t){var i,a=o.attrs.threadId;if(!a)return;var s=r,l=s+e.nodeSize,c=null!==(i=n.get(a))&&void 0!==i?i:{from:1/0,to:0};n.set(a,{from:Math.min(s,c.from),to:Math.max(l,c.to)})}}))})),n}(e.doc,i.markType):i.threadPositions;(r.size>0||i.threadPositions.size>0)&&(i.threadPositions=r,i.emitStateUpdate());var o=[];if(i.selectedThreadId){var a=r.get(i.selectedThreadId);a&&o.push(ji.inline(a.from,a.to,{class:"bn-thread-mark-selected"}))}return{decorations:Li.create(e.doc,o)}}},props:{decorations:function(e){var t,n;return null!==(t=null==(n=oA.getState(e))?void 0:n.decorations)&&void 0!==t?t:Li.empty},handleClick:function(e,t,n){if(0===n.button){var o=e.state.doc.nodeAt(t);if(o){var a=o.marks.find((function(e){return e.type.name===r&&!0!==e.attrs.orphan})),s=null==a?void 0:a.attrs.threadId;i.selectThread(s,!1)}else i.selectThread(void 0)}}}}),o}return T_(t,e),D_(t,[{key:"emitStateUpdate",value:function(){this.emit("update",{selectedThreadId:this.selectedThreadId,pendingComment:this.pendingComment,threadPositions:this.threadPositions})}},{key:"onUpdate",value:function(e){return this.on("update",e)}},{key:"selectThread",value:function(e){var t,n,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.selectedThreadId!==e&&(this.selectedThreadId=e,this.emitStateUpdate(),this.editor.dispatch(this.editor.prosemirrorView.state.tr.setMeta(oA,{name:"SET_SELECTED_THREAD_ID"})),e&&r)){var o=this.threadPositions.get(e);if(!o)return;null==(n=null==(t=this.editor.prosemirrorView)?void 0:t.domAtPos(o.from).node)||n.scrollIntoView({behavior:"smooth",block:"center"})}}},{key:"startPendingComment",value:function(){this.pendingComment=!0,this.emitStateUpdate()}},{key:"stopPendingComment",value:function(){this.pendingComment=!1,this.emitStateUpdate()}},{key:"createThread",value:(n=v_(h_().mark((function e(t){var n,r,o,i,a;return h_().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.threadStore.createThread(t);case 2:if(n=e.sent,!this.threadStore.addThreadToDocument){e.next=9;break}return r=this.editor.prosemirrorView,o=r.state.selection,i=hy.getState(r.state),a={prosemirror:{head:o.head,anchor:o.anchor},yjs:i?CS(i.binding,r.state):void 0},e.next=7,this.threadStore.addThreadToDocument({threadId:n.id,selection:a});case 7:e.next=10;break;case 9:this.editor._tiptapEditor.commands.setMark(this.markType,{orphan:!1,threadId:n.id});case 10:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}]);var n}(nA),aA=function(){return D_((function e(t,n,r,o){var i=this;A_(this,e),B_(this,"state"),B_(this,"emitUpdate"),B_(this,"mouseDownHandler",(function(){var e;null!=(e=i.state)&&e.show&&(i.state.show=!1,i.emitUpdate())})),B_(this,"dragstartHandler",(function(){var e;null!=(e=i.state)&&e.show&&(i.state.show=!1,i.emitUpdate())})),B_(this,"scrollHandler",(function(){var e;if(null!=(e=i.state)&&e.show){var t=i.pmView.root.querySelector('[data-node-type="blockContainer"][data-id="'.concat(i.state.block.id,'"]'));if(!t)return;i.state.referencePos=t.getBoundingClientRect(),i.emitUpdate()}})),B_(this,"closeMenu",(function(){var e;null!=(e=i.state)&&e.show&&(i.state.show=!1,i.emitUpdate())})),this.editor=t,this.pluginKey=n,this.pmView=r,this.emitUpdate=function(){if(!i.state)throw new Error("Attempting to update uninitialized file panel");o(i.state)},r.dom.addEventListener("mousedown",this.mouseDownHandler),r.dom.addEventListener("dragstart",this.dragstartHandler),r.root.addEventListener("scroll",this.scrollHandler,!0)}),[{key:"update",value:function(e,t){var n,r,o=this.pluginKey.getState(e.state);if((null==(n=this.state)||!n.show)&&o.block&&this.editor.isEditable){var i=this.pmView.root.querySelector('[data-node-type="blockContainer"][data-id="'.concat(o.block.id,'"]'));if(!i)return;return this.state={show:!0,referencePos:i.getBoundingClientRect(),block:o.block},void this.emitUpdate()}(!e.state.selection.eq(t.selection)||!e.state.doc.eq(t.doc)||!this.editor.isEditable)&&null!=(r=this.state)&&r.show&&(this.state.show=!1,this.emitUpdate())}},{key:"destroy",value:function(){this.pmView.dom.removeEventListener("mousedown",this.mouseDownHandler),this.pmView.dom.removeEventListener("dragstart",this.dragstartHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}}])}(),sA=new In("FilePanelPlugin"),lA=function(e){function t(e){var n;return A_(this,t),n=O_(this,t),B_(n,"view"),B_(n,"plugin"),B_(n,"closeMenu",(function(){var e;return null==(e=n.view)?void 0:e.closeMenu()})),n.plugin=new Pn({key:sA,view:function(t){return n.view=new aA(e,sA,t,(function(e){n.emit("update",e)})),n.view},props:{handleKeyDown:function(e,t){var r;return!("Escape"!==t.key||!n.shown||(null==(r=n.view)||r.closeMenu(),0))}},state:{init:function(){return{block:void 0}},apply:function(e){var t;return{block:null==(t=e.getMeta(sA))?void 0:t.block}}}}),n}return T_(t,e),D_(t,[{key:"shown",get:function(){var e,t;return(null==(t=null==(e=this.view)?void 0:e.state)?void 0:t.show)||!1}},{key:"onUpdate",value:function(e){return this.on("update",e)}}])}(nA),cA=function(){return D_((function e(t,n,r){var o=this;A_(this,e),B_(this,"state"),B_(this,"emitUpdate"),B_(this,"preventHide",!1),B_(this,"preventShow",!1),B_(this,"shouldShow",(function(e){var t=e.state,n=e.from,r=e.to,o=t.doc,i=t.selection,a=i.empty,s=!o.textBetween(n,r).length&&Ks(t.selection);return!(i.$from.parent.type.spec.code||kl(i)&&i.node.type.spec.code||a||s)})),B_(this,"blurHandler",(function(e){var t;if(o.preventHide)o.preventHide=!1;else{var n=o.pmView.dom.parentElement;e&&e.relatedTarget&&(n===e.relatedTarget||n.contains(e.relatedTarget)||e.relatedTarget.matches(".bn-ui-container, .bn-ui-container *"))||null!=(t=o.state)&&t.show&&(o.state.show=!1,o.emitUpdate())}})),B_(this,"viewMousedownHandler",(function(){o.preventShow=!0})),B_(this,"mouseupHandler",(function(){o.preventShow&&(o.preventShow=!1,setTimeout((function(){return o.update(o.pmView)})))})),B_(this,"dragHandler",(function(){var e;null!=(e=o.state)&&e.show&&(o.state.show=!1,o.emitUpdate())})),B_(this,"scrollHandler",(function(){var e;null!=(e=o.state)&&e.show&&(o.state.referencePos=o.getSelectionBoundingBox(),o.emitUpdate())})),B_(this,"closeMenu",(function(){var e;null!=(e=o.state)&&e.show&&(o.state.show=!1,o.emitUpdate())})),this.editor=t,this.pmView=n,this.emitUpdate=function(){if(!o.state)throw new Error("Attempting to update uninitialized formatting toolbar");r(o.state)},n.dom.addEventListener("mousedown",this.viewMousedownHandler),n.root.addEventListener("mouseup",this.mouseupHandler),n.dom.addEventListener("dragstart",this.dragHandler),n.dom.addEventListener("dragover",this.dragHandler),n.dom.addEventListener("blur",this.blurHandler),n.root.addEventListener("scroll",this.scrollHandler,!0)}),[{key:"update",value:function(e,t){var n,r=e.state,o=e.composing,i=r.selection,a=t&&t.selection.from===r.selection.from&&t.selection.to===r.selection.to;if(!o&&!a){var s=i.ranges,l=Math.min.apply(Math,y_(s.map((function(e){return e.$from.pos})))),c=Math.max.apply(Math,y_(s.map((function(e){return e.$to.pos})))),u=this.shouldShow({view:e,state:r,from:l,to:c}),d=R_(Range.prototype.getClientRects)>"u";return this.preventShow||!u&&!this.preventHide||d?null==(n=this.state)||!n.show||this.preventHide||u&&!this.preventShow&&this.editor.isEditable?void 0:(this.state.show=!1,void this.emitUpdate()):(this.state={show:!0,referencePos:this.getSelectionBoundingBox()},void this.emitUpdate())}}},{key:"destroy",value:function(){this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("mouseup",this.mouseupHandler),this.pmView.dom.removeEventListener("dragstart",this.dragHandler),this.pmView.dom.removeEventListener("dragover",this.dragHandler),this.pmView.dom.removeEventListener("blur",this.blurHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}},{key:"getSelectionBoundingBox",value:function(){var e=this.pmView.state.selection,t=e.ranges,n=Math.min.apply(Math,y_(t.map((function(e){return e.$from.pos})))),r=Math.max.apply(Math,y_(t.map((function(e){return e.$to.pos}))));if(kl(e)){var o=this.pmView.nodeDOM(n);if(o)return o.getBoundingClientRect()}return wl(this.pmView,n,r)}}])}(),uA=new In("FormattingToolbarPlugin"),dA=function(e){function t(e){var n;return A_(this,t),n=O_(this,t),B_(n,"view"),B_(n,"plugin"),B_(n,"closeMenu",(function(){return n.view.closeMenu()})),n.plugin=new Pn({key:uA,view:function(t){return n.view=new cA(e,t,(function(e){n.emit("update",e)})),n.view},props:{handleKeyDown:function(e,t){return!("Escape"!==t.key||!n.shown||(n.view.closeMenu(),0))}}}),n}return T_(t,e),D_(t,[{key:"shown",get:function(){var e,t;return(null==(t=null==(e=this.view)?void 0:e.state)?void 0:t.show)||!1}},{key:"onUpdate",value:function(e){return this.on("update",e)}}])}(nA),fA=function(e,t){var n=e.resolve(t);if(!(n.depth<=1)){var r=n.posAtIndex(n.index(n.depth-1),n.depth-1);return W_(e.resolve(r))}},pA=function(e,t){var n=e.resolve(t),r=n.index();if(0!==r){var o=n.posAtIndex(r-1);return W_(e.resolve(o))}},hA=function(e,t){for(;t.childContainer;){var n=t.childContainer.node,r=e.resolve(t.childContainer.beforePos+1).posAtIndex(n.childCount-1);t=W_(e.resolve(r))}return t},mA=function(e){return function(t){var n=t.state,r=t.dispatch,o=W_(n.doc.resolve(e)),i=pA(n.doc,o.bnBlock.beforePos);if(!i)return!1;var a=hA(n.doc,i);return!!function(e,t){return e.isBlockContainer&&"inline*"===e.blockContent.node.type.spec.content&&e.blockContent.node.childCount>0&&t.isBlockContainer&&"inline*"===t.blockContent.node.type.spec.content}(a,o)&&function(e,t,n,r){if(!r.isBlockContainer)throw new Error("Attempted to merge block at position ".concat(r.bnBlock.beforePos," into previous block at position ").concat(n.bnBlock.beforePos,", but next block is not a block container"));if(r.childContainer){var o=e.doc.resolve(r.childContainer.beforePos+1),i=e.doc.resolve(r.childContainer.afterPos-1),a=o.blockRange(i);if(t){var s=e.doc.resolve(r.bnBlock.beforePos);e.tr.lift(a,s.depth)}}if(t){if(!n.isBlockContainer)throw new Error("Attempted to merge block at position ".concat(r.bnBlock.beforePos," into previous block at position ").concat(n.bnBlock.beforePos,", but previous block is not a block container"));t(e.tr.delete(n.blockContent.afterPos-1,r.blockContent.beforePos+1))}return!0}(n,r,a,o)}},vA=Fs.create({priority:50,addKeyboardShortcuts:function(){var e=this;return{Backspace:function(){return e.editor.commands.first((function(t){var n=t.chain,r=t.commands;return[function(){return r.deleteSelection()},function(){return r.undoInputRule()},function(){return r.command((function(t){var n=t.state,o=q_(n);if(!o.isBlockContainer)return!1;var i=n.selection.from===o.blockContent.beforePos+1,a="paragraph"===o.blockContent.node.type.name;return!(!i||a)&&r.command(qE(e.options.editor,o.bnBlock.beforePos,{type:"paragraph",props:{}}))}))},function(){return r.command((function(e){var t=e.state,n=q_(t);if(!n.isBlockContainer)return!1;var o=n.blockContent;return t.selection.from===o.beforePos+1&&r.liftListItem("blockContainer")}))},function(){return r.command((function(e){var t=e.state,r=q_(t);if(!r.isBlockContainer)return!1;var o=r.bnBlock,i=r.blockContent,a=t.selection.from===i.beforePos+1,s=t.selection.empty,l=o.beforePos;return!(!a||!s)&&n().command(mA(l)).scrollIntoView().run()}))},function(){return r.command((function(e){var t=e.state,n=e.dispatch,r=q_(t);if(!r.isBlockContainer||t.selection.from!==r.blockContent.beforePos+1||pA(t.doc,r.bnBlock.beforePos))return!1;var o=fA(t.doc,r.bnBlock.beforePos);if("column"!==(null==o?void 0:o.blockNoteType))return!1;var i=o,a=fA(t.doc,i.bnBlock.beforePos);if("columnList"!==(null==a?void 0:a.blockNoteType))throw new Error("parent of column is not a column list");var s=1===i.childContainer.node.childCount,l=s&&2===a.childContainer.node.childCount,c=a.childContainer.node.firstChild===i.bnBlock.node;if(n){var u=t.doc.slice(r.bnBlock.beforePos,r.bnBlock.afterPos,!1);if(l)if(c){t.tr.step(new Dt(a.bnBlock.beforePos,a.bnBlock.afterPos,i.bnBlock.afterPos+1,a.bnBlock.afterPos-2,u,u.size,!1));var d=t.tr.doc.resolve(i.bnBlock.beforePos);t.tr.setSelection(bn.between(d,d))}else{t.tr.step(new Dt(a.bnBlock.beforePos,a.bnBlock.afterPos,a.bnBlock.beforePos+2,i.bnBlock.beforePos-1,u,0,!1));var f=t.tr.doc.resolve(t.tr.mapping.map(i.bnBlock.beforePos-1));t.tr.setSelection(bn.between(f,f))}else if(s)if(c){t.tr.delete(i.bnBlock.beforePos,i.bnBlock.afterPos),t.tr.insert(a.bnBlock.beforePos,u.content);var p=t.tr.doc.resolve(a.bnBlock.beforePos);t.tr.setSelection(bn.between(p,p))}else t.tr.delete(i.bnBlock.beforePos-1,i.bnBlock.beforePos+1);else{t.tr.delete(r.bnBlock.beforePos,r.bnBlock.afterPos),c?t.tr.insert(a.bnBlock.beforePos-1,u.content):t.tr.insert(i.bnBlock.beforePos-1,u.content);var h=t.tr.doc.resolve(i.bnBlock.beforePos-1);t.tr.setSelection(bn.between(h,h))}}return!0}))},function(){return r.command((function(e){var t=e.state,r=q_(t);if(!r.isBlockContainer)throw new Error("todo");var o=t.selection.from===r.blockContent.beforePos+1,i=t.selection.empty,a=pA(t.doc,r.bnBlock.beforePos);if(a&&o&&i){var s=hA(t.doc,a);if(!s.isBlockContainer)throw new Error("todo");if(""===s.blockContent.node.type.spec.content||"inline*"===s.blockContent.node.type.spec.content&&0===s.blockContent.node.childCount)return n().cut({from:r.bnBlock.beforePos,to:r.bnBlock.afterPos},s.bnBlock.afterPos).deleteRange({from:s.bnBlock.beforePos,to:s.bnBlock.afterPos}).run()}return!1}))}]}))},Delete:function(){return e.editor.commands.first((function(e){var t=e.commands;return[function(){return t.deleteSelection()},function(){return t.command((function(e){var n=e.state,r=q_(n);if(!r.isBlockContainer)return!1;var o=r.bnBlock,i=r.blockContent,a=r.childContainer,s=n.doc.resolve(o.beforePos).depth,l=o.afterPos===n.doc.nodeSize-3,c=n.selection.from===i.afterPos-1,u=n.selection.empty;if(!l&&c&&u&&void 0===a){for(var d=s,f=o.afterPos+1,p=n.doc.resolve(f).depth;p<d;)d=p,f+=2,p=n.doc.resolve(f).depth;return t.command(mA(f-1))}return!1}))}]}))},Enter:function(){return e.editor.commands.first((function(e){var t=e.commands;return[function(){return t.command((function(e){var n=e.state,r=q_(n);if(!r.isBlockContainer)return!1;var o=r.bnBlock,i=r.blockContent,a=n.doc.resolve(o.beforePos).depth,s=0===n.selection.$anchor.parentOffset,l=n.selection.anchor===n.selection.head,c=0===i.node.childCount;return!!(s&&l&&c&&a>1)&&t.liftListItem("blockContainer")}))},function(){return t.command((function(e){var t=e.state,n=e.dispatch,r=q_(t);if(!r.isBlockContainer)return!1;var o=r.bnBlock,i=r.blockContent,a=0===t.selection.$anchor.parentOffset,s=t.selection.anchor===t.selection.head,l=0===i.node.childCount;if(a&&s&&l){var c=o.afterPos,u=c+2;if(n){var d=t.schema.nodes.blockContainer.createAndFill();t.tr.insert(c,d).scrollIntoView(),t.tr.setSelection(new bn(t.doc.resolve(u)))}return!0}return!1}))},function(){return t.command((function(e){var t=e.state,n=e.chain,r=q_(t);if(!r.isBlockContainer)return!1;var o=r.blockContent,i=0===t.selection.$anchor.parentOffset;return 0!==o.node.childCount&&(n().deleteSelection().command(jD(t.selection.from,i,i)).run(),!0)}))}]}))},Tab:function(){var t,n,r;return("prefer-indent"===e.options.tabBehavior||!(null!=(t=e.options.editor.formattingToolbar)&&t.shown||null!=(n=e.options.editor.linkToolbar)&&n.shown||null!=(r=e.options.editor.filePanel)&&r.shown))&&CM(e.options.editor)},"Shift-Tab":function(){var t,n,r;return!("prefer-indent"!==e.options.tabBehavior&&(null!=(t=e.options.editor.formattingToolbar)&&t.shown||null!=(n=e.options.editor.linkToolbar)&&n.shown||null!=(r=e.options.editor.filePanel)&&r.shown)||(e.editor.commands.liftListItem("blockContainer"),0))},"Shift-Mod-ArrowUp":function(){return e.options.editor.moveBlocksUp(),!0},"Shift-Mod-ArrowDown":function(){return e.options.editor.moveBlocksDown(),!0}}}}),gA=function(){return D_((function e(t,n,r){var o=this;A_(this,e),B_(this,"state"),B_(this,"emitUpdate"),B_(this,"menuUpdateTimer"),B_(this,"startMenuUpdateTimer"),B_(this,"stopMenuUpdateTimer"),B_(this,"mouseHoveredLinkMark"),B_(this,"mouseHoveredLinkMarkRange"),B_(this,"keyboardHoveredLinkMark"),B_(this,"keyboardHoveredLinkMarkRange"),B_(this,"linkMark"),B_(this,"linkMarkRange"),B_(this,"mouseOverHandler",(function(e){if(o.mouseHoveredLinkMark=void 0,o.mouseHoveredLinkMarkRange=void 0,o.stopMenuUpdateTimer(),e.target instanceof HTMLAnchorElement&&"A"===e.target.nodeName){var t,n=e.target,r=o.pmView.posAtDOM(n,0)+1,i=o.pmView.state.doc.resolve(r),a=g_(i.marks());try{for(a.s();!(t=a.n()).done;){var s=t.value;if(s.type.name===o.pmView.state.schema.mark("link").type.name){o.mouseHoveredLinkMark=s,o.mouseHoveredLinkMarkRange=Ws(i,s.type,s.attrs)||void 0;break}}}catch(e){a.e(e)}finally{a.f()}}return o.startMenuUpdateTimer(),!1})),B_(this,"clickHandler",(function(e){var t,n=o.pmView.dom.parentElement;o.linkMark&&e&&e.target&&n!==e.target&&!n.contains(e.target)&&null!=(t=o.state)&&t.show&&(o.state.show=!1,o.emitUpdate())})),B_(this,"scrollHandler",(function(){var e;void 0!==o.linkMark&&null!=(e=o.state)&&e.show&&(o.state.referencePos=wl(o.pmView,o.linkMarkRange.from,o.linkMarkRange.to),o.emitUpdate())})),B_(this,"closeMenu",(function(){var e;null!=(e=o.state)&&e.show&&(o.state.show=!1,o.emitUpdate())})),this.editor=t,this.pmView=n,this.emitUpdate=function(){if(!o.state)throw new Error("Attempting to update uninitialized link toolbar");r(o.state)},this.startMenuUpdateTimer=function(){o.menuUpdateTimer=setTimeout((function(){o.update(o.pmView,void 0,!0)}),250)},this.stopMenuUpdateTimer=function(){return o.menuUpdateTimer&&(clearTimeout(o.menuUpdateTimer),o.menuUpdateTimer=void 0),!1},this.pmView.dom.addEventListener("mouseover",this.mouseOverHandler),this.pmView.root.addEventListener("click",this.clickHandler,!0),this.pmView.root.addEventListener("scroll",this.scrollHandler,!0)}),[{key:"editLink",value:function(e,t){var n,r=this.pmView.state.tr.insertText(t,this.linkMarkRange.from,this.linkMarkRange.to);r.addMark(this.linkMarkRange.from,this.linkMarkRange.from+t.length,this.pmView.state.schema.mark("link",{href:e})),this.editor.dispatch(r),this.pmView.focus(),null!=(n=this.state)&&n.show&&(this.state.show=!1,this.emitUpdate())}},{key:"deleteLink",value:function(){var e;this.editor.dispatch(this.pmView.state.tr.removeMark(this.linkMarkRange.from,this.linkMarkRange.to,this.linkMark.type).setMeta("preventAutolink",!0)),this.pmView.focus(),null!=(e=this.state)&&e.show&&(this.state.show=!1,this.emitUpdate())}},{key:"update",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.state;if((!t||t.selection.from!==o.selection.from||t.selection.to!==o.selection.to)&&this.pmView.hasFocus()){var i=this.linkMark;if(this.linkMark=void 0,this.linkMarkRange=void 0,this.keyboardHoveredLinkMark=void 0,this.keyboardHoveredLinkMarkRange=void 0,this.pmView.state.selection.empty){var a,s=g_(this.pmView.state.selection.$from.marks());try{for(s.s();!(a=s.n()).done;){var l=a.value;if(l.type.name===this.pmView.state.schema.mark("link").type.name){this.keyboardHoveredLinkMark=l,this.keyboardHoveredLinkMarkRange=Ws(this.pmView.state.selection.$from,l.type,l.attrs)||void 0;break}}}catch(e){s.e(e)}finally{s.f()}}return this.mouseHoveredLinkMark&&r&&(this.linkMark=this.mouseHoveredLinkMark,this.linkMarkRange=this.mouseHoveredLinkMarkRange),this.keyboardHoveredLinkMark&&(this.linkMark=this.keyboardHoveredLinkMark,this.linkMarkRange=this.keyboardHoveredLinkMarkRange),this.linkMark&&this.editor.isEditable?(this.state={show:!0,referencePos:wl(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),url:this.linkMark.attrs.href,text:this.pmView.state.doc.textBetween(this.linkMarkRange.from,this.linkMarkRange.to)},void this.emitUpdate()):null==(n=this.state)||!n.show||!i||this.linkMark&&this.editor.isEditable?void 0:(this.state.show=!1,void this.emitUpdate())}}},{key:"destroy",value:function(){this.pmView.dom.removeEventListener("mouseover",this.mouseOverHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0),this.pmView.root.removeEventListener("click",this.clickHandler,!0)}}])}(),yA=new In("LinkToolbarPlugin"),bA=function(e){function t(e){var n;return A_(this,t),n=O_(this,t),B_(n,"view"),B_(n,"plugin"),B_(n,"editLink",(function(e,t){n.view.editLink(e,t)})),B_(n,"deleteLink",(function(){n.view.deleteLink()})),B_(n,"startHideTimer",(function(){n.view.startMenuUpdateTimer()})),B_(n,"stopHideTimer",(function(){n.view.stopMenuUpdateTimer()})),B_(n,"closeMenu",(function(){return n.view.closeMenu()})),n.plugin=new Pn({key:yA,view:function(t){return n.view=new gA(e,t,(function(e){n.emit("update",e)})),n.view},props:{handleKeyDown:function(e,t){return!("Escape"!==t.key||!n.shown||(n.view.closeMenu(),0))}}}),n}return T_(t,e),D_(t,[{key:"onUpdate",value:function(e){return this.on("update",e)}},{key:"shown",get:function(){var e,t;return(null==(t=null==(e=this.view)?void 0:e.state)?void 0:t.show)||!1}}])}(nA),kA=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"],wA="https",xA=new In("node-selection-keyboard"),CA=D_((function e(){A_(this,e),B_(this,"plugin"),this.plugin=new Pn({key:xA,props:{handleKeyDown:function(e,t){if("node"in e.state.selection){if(t.ctrlKey||t.metaKey)return!1;if(1===t.key.length)return t.preventDefault(),!0;if(!("Enter"!==t.key||t.shiftKey||t.altKey||t.ctrlKey||t.metaKey)){var n=e.state.tr;return e.dispatch(n.insert(e.state.tr.selection.$to.after(),e.state.schema.nodes.paragraph.createChecked()).setSelection(new bn(n.doc.resolve(e.state.tr.selection.$to.after()+1)))),!0}}return!1}}})})),SA=new In("blocknote-placeholder"),_A=D_((function e(t,n){A_(this,e),B_(this,"plugin"),this.plugin=new Pn({key:SA,view:function(e){var r,o,i="placeholder-selector-".concat(ql());e.dom.classList.add(i);var a=document.createElement("style"),s=t._tiptapEditor.options.injectNonce;s&&a.setAttribute("nonce",s),(null==(r=t.prosemirrorView)?void 0:r.root)instanceof ShadowRoot?t.prosemirrorView.root.append(a):null==(o=t.prosemirrorView)||o.root.head.appendChild(a);var l=a.sheet,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return".".concat(i," .bn-block-content").concat(e," .bn-inline-content:has(> .ProseMirror-trailingBreak:only-child):before")};try{for(var u=n.default,d=n.emptyDocument,f=__(n,f_),p=0,h=Object.entries(f);p<h.length;p++){var m=b_(h[p],2),v=m[0],g=m[1],y='[data-content-type="'.concat(v,'"]');l.insertRule("".concat(c(y)," { content: ").concat(JSON.stringify(g),"; }"))}l.insertRule("".concat(c("[data-is-only-empty-block]")," { content: ").concat(JSON.stringify(d),"; }")),l.insertRule("".concat(c("[data-is-empty-and-focused]")," { content: ").concat(JSON.stringify(u),"; }"))}catch(u){console.warn("Failed to insert placeholder CSS rule - this is likely due to the browser not supporting certain CSS pseudo-element selectors (:has, :only-child:, or :before)",u)}return{destroy:function(){var e,n;(null==(e=t.prosemirrorView)?void 0:e.root)instanceof ShadowRoot?t.prosemirrorView.root.removeChild(a):null==(n=t.prosemirrorView)||n.root.head.removeChild(a)}}},props:{decorations:function(e){var n=e.doc,r=e.selection;if(t.isEditable&&r.empty&&!r.$from.parent.type.spec.code){var o=[];6===e.doc.content.size&&o.push(ji.node(2,4,{"data-is-only-empty-block":"true"}));var i=r.$anchor,a=i.parent;if(0===a.content.size){var s=i.before();o.push(ji.node(s,s+a.nodeSize,{"data-is-empty-and-focused":"true"}))}return Li.create(n,o)}}}})})),EA=new In("previous-blocks"),DA={index:"index",level:"level",type:"type",depth:"depth","depth-change":"depth-change"},MA=D_((function e(){var t;A_(this,e),B_(this,"plugin"),this.plugin=new Pn({key:EA,view:function(e){var n,r=this;return{update:(n=v_(h_().mark((function e(n,o){var i;return h_().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null==(i=r.key)?void 0:i.getState(n.state).updatedBlocks.size)>0&&(t=setTimeout((function(){n.dispatch(n.state.tr.setMeta(EA,{clearUpdate:!0}))}),0));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),destroy:function(){t&&clearTimeout(t)}}},state:{init:function(){return{prevTransactionOldBlockAttrs:{},currentTransactionOldBlockAttrs:{},updatedBlocks:new Set}},apply:function(e,t,n,r){if(t.currentTransactionOldBlockAttrs={},t.updatedBlocks.clear(),!e.docChanged||n.doc.eq(r.doc))return t;var o,i={},a=ul(n.doc,(function(e){return e.attrs.id})),s=new Map(a.map((function(e){return[e.node.attrs.id,e]}))),l=ul(r.doc,(function(e){return e.attrs.id})),c=g_(l);try{for(c.s();!(o=c.n()).done;){var u=o.value,d=s.get(u.node.attrs.id),f=null==d?void 0:d.node.firstChild,p=u.node.firstChild;if(d&&f&&p){var h={index:p.attrs.index,level:p.attrs.level,type:p.type.name,depth:r.doc.resolve(u.pos).depth},m={index:f.attrs.index,level:f.attrs.level,type:f.type.name,depth:n.doc.resolve(d.pos).depth};i[u.node.attrs.id]=m,e.getMeta("numberedListIndexing")&&(u.node.attrs.id in t.prevTransactionOldBlockAttrs&&(m=t.prevTransactionOldBlockAttrs[u.node.attrs.id]),"numberedListItem"===h.type&&(m.index=h.index)),t.currentTransactionOldBlockAttrs[u.node.attrs.id]=m,JSON.stringify(m)!==JSON.stringify(h)&&(m["depth-change"]=m.depth-h.depth,t.updatedBlocks.add(u.node.attrs.id))}}}catch(e){c.e(e)}finally{c.f()}return t.prevTransactionOldBlockAttrs=i,t}},props:{decorations:function(e){var t=this.getState(e);if(0!==t.updatedBlocks.size){var n=[];return e.doc.descendants((function(e,r){if(e.attrs.id&&t.updatedBlocks.has(e.attrs.id)){for(var o=t.currentTransactionOldBlockAttrs[e.attrs.id],i={},a=0,s=Object.entries(o);a<s.length;a++){var l=b_(s[a],2),c=l[0],u=l[1];i["data-prev-"+DA[c]]=u||"none"}var d=ji.node(r,r+e.nodeSize,C_({},i));n.push(d)}})),Li.create(e.doc,n)}}}})})),AA=new In("blocknote-show-selection"),OA=function(){return D_((function e(t){var n=this;A_(this,e),B_(this,"plugin"),B_(this,"enabled",!1),this.editor=t,this.plugin=new Pn({key:AA,props:{decorations:function(e){var t=e.doc,r=e.selection;if(!n.enabled)return Li.empty;var o=ji.inline(r.from,r.to,{"data-show-selection":"true"});return Li.create(t,[o])}}})}),[{key:"setEnabled",value:function(e){var t,n;this.enabled!==e&&(this.enabled=e,null==(n=this.editor.prosemirrorView)||n.dispatch(null==(t=this.editor.prosemirrorView)?void 0:t.state.tr.setMeta(AA,{})))}},{key:"getEnabled",value:function(){return this.enabled}}])}();function TA(e,t){for(var n,r;e&&e.parentElement&&e.parentElement!==t.dom&&"blockContainer"!==(null==(n=e.getAttribute)?void 0:n.call(e,"data-node-type"));)e=e.parentElement;if("blockContainer"===(null==(r=e.getAttribute)?void 0:r.call(e,"data-node-type")))return{node:e,id:e.getAttribute("data-id")}}var jA,NA=function(e){function t(e,n){var r;A_(this,t),r=O_(this,t,[e,n]),B_(r,"nodes");var o=e.node();return r.nodes=[],e.doc.nodesBetween(e.pos,n.pos,(function(e,t,n){if(null!==n&&n.eq(o))return r.nodes.push(e),!1})),r}return T_(t,e),D_(t,[{key:"content",value:function(){return new te(Z.from(this.nodes),0,0)}},{key:"eq",value:function(e){if(!(e instanceof t)||this.nodes.length!==e.nodes.length||this.from!==e.from||this.to!==e.to)return!1;for(var n=0;n<this.nodes.length;n++)if(!this.nodes[n].eq(e.nodes[n]))return!1;return!0}},{key:"map",value:function(e,n){var r=n.mapResult(this.from),o=n.mapResult(this.to);return o.deleted?mn.near(e.resolve(r.pos)):r.deleted?mn.near(e.resolve(o.pos)):new t(e.resolve(r.pos),e.resolve(o.pos))}},{key:"toJSON",value:function(){return{type:"node",anchor:this.anchor,head:this.head}}}],[{key:"create",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;return new t(e.resolve(n),e.resolve(r))}}])}(mn);function PA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;t===n&&(n+=e.state.doc.resolve(t+1).node().nodeSize);for(var r=e.domAtPos(t).node.cloneNode(!0),o=e.domAtPos(t).node,i=function(e,t){return Array.prototype.indexOf.call(e.children,t)},a=i(o,e.domAtPos(t+1).node.parentElement),s=i(o,e.domAtPos(n-1).node.parentElement),l=o.childElementCount-1;l>=0;l--)(l>s||l<a)&&r.removeChild(r.children[l]);LA(e.root);for(var c=(jA=r).getElementsByTagName("iframe"),u=0;u<c.length;u++){var d=c[u],f=d.parentElement;f&&f.removeChild(d)}var p=e.dom.className.split(" ").filter((function(e){return"ProseMirror"!==e&&"bn-root"!==e&&"bn-editor"!==e})).join(" ");jA.className=jA.className+" bn-drag-preview "+p,e.root instanceof ShadowRoot?e.root.appendChild(jA):e.root.body.appendChild(jA)}function LA(e){void 0!==jA&&(e instanceof ShadowRoot?e.removeChild(jA):e.body.removeChild(jA),jA=void 0)}var RA=.1;function IA(e,t,n){var r,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=g_(e.root.elementsFromPoint(t.left+("editor"===n?50:0),t.top));try{for(i.s();!(r=i.n()).done;){var a=r.value;if(e.dom.contains(a))return o&&a.closest("[data-node-type=columnList]")?IA(e,{left:t.left+50,top:t.top},n,!1):TA(a,e)}}catch(e){i.e(e)}finally{i.f()}}var BA,FA=function(){return D_((function e(t,n,r,o){var i=this;A_(this,e),B_(this,"state"),B_(this,"emitUpdate"),B_(this,"mousePos"),B_(this,"hoveredBlock"),B_(this,"menuFrozen",!1),B_(this,"isDragOrigin",!1),B_(this,"updateState",(function(e){i.state=e,i.emitUpdate(i.state)})),B_(this,"updateStateFromMousePos",(function(){var e,t,n,r;if(!i.menuFrozen&&i.mousePos){var o=function(e,t,n){if(t.dom.firstChild){var r=t.dom.firstChild.getBoundingClientRect(),o={left:e.x,top:e.y},i=o.left<r.left,a=o.left>r.right;"viewport"===n&&(i&&(o.left=r.left+10),a&&(o.left=r.right-10));var s=IA(t,o,n);if(!a&&s){var l=s.node.getBoundingClientRect();o.left=l.right-10,s=IA(t,o,"viewport",!1)}return s}}(i.mousePos,i.pmView,i.sideMenuDetection);if(o&&i.editor.isEditable){if(null==(t=i.state)||!t.show||null==(n=i.hoveredBlock)||!n.hasAttribute("data-id")||(null==(r=i.hoveredBlock)?void 0:r.getAttribute("data-id"))!==o.id){i.hoveredBlock=o.node;var a=o.node.firstChild;if(a&&i.editor.isEditable){var s=a.getBoundingClientRect(),l=o.node.closest("[data-node-type=column]");i.updateState({show:!0,referencePos:new DOMRect(l?l.firstElementChild.getBoundingClientRect().x:i.pmView.dom.firstChild.getBoundingClientRect().x,s.y,s.width,s.height),block:i.editor.getBlock(i.hoveredBlock.getAttribute("data-id"))})}}}else null!=(e=i.state)&&e.show&&(i.state.show=!1,i.updateState(i.state))}})),B_(this,"onDrop",(function(e){var t,n;if(null!==i.pmView.dragging){i.editor._tiptapEditor.commands.blur();var r=e.target instanceof Node&&(null==(t=e.target instanceof HTMLElement?e.target:e.target.parentElement)?void 0:t.closest(".bn-editor"))||null;if(r&&(i.isDragOrigin||i.pmView.dom!==r?i.isDragOrigin&&i.pmView.dom!==r&&setTimeout((function(){return i.pmView.dispatch(i.pmView.state.tr.deleteSelection())}),0):i.pmView.dispatch(i.pmView.state.tr.setSelection(bn.create(i.pmView.state.tr.doc,i.pmView.state.tr.selection.to)))),"editor"!==i.sideMenuDetection&&!e.synthetic&&null!=(n=e.dataTransfer)&&n.types.includes("blocknote/html")){var o=i.pmView.posAtCoords({left:e.clientX,top:e.clientY});if(!o||-1===o.inside){var a=i.createSyntheticEvent(e);i.pmView.dom.dispatchEvent(a)}}}})),B_(this,"onDragEnd",(function(){i.pmView.dragging=null})),B_(this,"onDragStart",(function(e){var t,n=null==(t=e.dataTransfer)?void 0:t.getData("blocknote/html");if(n){if(i.pmView.dragging)throw new Error("New drag was started while an existing drag is ongoing");var r=document.createElement("div");r.innerHTML=n;var o=ze.fromSchema(i.pmView.state.schema).parse(r,{topNode:i.pmView.state.schema.nodes.blockGroup.create()});i.pmView.dragging={slice:new te(o.content,0,0),move:!0}}})),B_(this,"onDragOver",(function(e){var t;if("editor"!==i.sideMenuDetection&&!e.synthetic&&null!=(t=e.dataTransfer)&&t.types.includes("blocknote/html")){var n=i.pmView.posAtCoords({left:e.clientX,top:e.clientY});if(!n||-1===n.inside&&i.pmView.dom.firstChild){var r=i.createSyntheticEvent(e);i.pmView.dom.dispatchEvent(r)}}})),B_(this,"onKeyDown",(function(e){var t;null!=(t=i.state)&&t.show&&i.editor.isFocused()&&(i.state.show=!1,i.emitUpdate(i.state))})),B_(this,"onMouseMove",(function(e){var t;if(!i.menuFrozen){i.mousePos={x:e.clientX,y:e.clientY};var n=i.pmView.dom.getBoundingClientRect(),r=i.mousePos.x>n.left&&i.mousePos.x<n.right&&i.mousePos.y>n.top&&i.mousePos.y<n.bottom,o=i.pmView.dom.parentElement;r&&e&&e.target&&o!==e.target&&!o.contains(e.target)?null!=(t=i.state)&&t.show&&(i.state.show=!1,i.emitUpdate(i.state)):i.updateStateFromMousePos()}})),B_(this,"onScroll",(function(){var e;null!=(e=i.state)&&e.show&&(i.state.referencePos=i.hoveredBlock.getBoundingClientRect(),i.emitUpdate(i.state))})),this.editor=t,this.sideMenuDetection=n,this.pmView=r,this.emitUpdate=function(){if(!i.state)throw new Error("Attempting to update uninitialized side menu");o(i.state)},this.pmView.root.addEventListener("dragstart",this.onDragStart),this.pmView.root.addEventListener("dragover",this.onDragOver),this.pmView.root.addEventListener("drop",this.onDrop,!0),this.pmView.root.addEventListener("dragend",this.onDragEnd,!0),EM(),this.pmView.root.addEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.addEventListener("keydown",this.onKeyDown,!0),r.root.addEventListener("scroll",this.onScroll,!0)}),[{key:"createSyntheticEvent",value:function(e){var t=new Event(e.type,e),n=this.pmView.dom.firstChild.getBoundingClientRect();return t.clientX=e.clientX,t.clientY=e.clientY,e.clientX<n.left&&e.clientX>n.left-n.width*RA?t.clientX=n.left+n.width*RA/2:e.clientX>n.right&&e.clientX<n.right+n.width*RA?t.clientX=n.right-n.width*RA/2:(e.clientX<n.left||e.clientX>n.right)&&(t.clientX=n.left+RA*n.width*2),t.clientY=Math.min(Math.max(e.clientY,n.top),n.top+n.height),t.dataTransfer=e.dataTransfer,t.preventDefault=function(){return e.preventDefault()},t.synthetic=!0,t}},{key:"update",value:function(e,t){var n;!t.doc.eq(this.pmView.state.doc)&&null!=(n=this.state)&&n.show&&this.updateStateFromMousePos()}},{key:"destroy",value:function(){var e;null!=(e=this.state)&&e.show&&(this.state.show=!1,this.emitUpdate(this.state)),this.pmView.root.removeEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.removeEventListener("dragstart",this.onDragStart),this.pmView.root.removeEventListener("dragover",this.onDragOver),this.pmView.root.removeEventListener("drop",this.onDrop,!0),this.pmView.root.removeEventListener("dragend",this.onDragEnd,!0),this.pmView.root.removeEventListener("keydown",this.onKeyDown,!0),this.pmView.root.removeEventListener("scroll",this.onScroll,!0)}}])}(),HA=new In("SideMenuPlugin"),zA=function(e){function t(e,n){var r;return A_(this,t),r=O_(this,t),B_(r,"view"),B_(r,"plugin"),B_(r,"blockDragStart",(function(e,t){r.view&&(r.view.isDragOrigin=!0),function(e,t,n){if(e.dataTransfer){var r=n.prosemirrorView;if(r){var o=WE(t.id,r.state.doc);if(!o)throw new Error("Block with ID ".concat(t.id," not found"));var i=o.posBeforeNode;if(null!=i){var a=r.state.selection,s=r.state.doc,l=function(e,t){var n,r,o="blockContent"===t.resolve(e.from).node().type.spec.group,i="blockContent"===t.resolve(e.to).node().type.spec.group,a=Math.min(e.$anchor.depth,e.$head.depth);if(o&&i){var s=e.$from.start(a-1),l=e.$to.end(a-1);n=t.resolve(s-1).pos,r=t.resolve(l+1).pos}else n=e.from,r=e.to;return{from:n,to:r}}(a,s),c=l.from,u=l.to,d=c<=i&&i<u,f=a.$anchor.node()!==a.$head.node()||a instanceof NA;d&&f?(r.dispatch(r.state.tr.setSelection(NA.create(s,c,u))),PA(r,c,u)):(r.dispatch(r.state.tr.setSelection(wn.create(r.state.doc,i))),PA(r,i));var p=r.state.selection.content(),h=n.pmSchema,m=r.serializeForClipboard(p).dom.innerHTML,v=QE(h,n),g=ZM(p.content,n.schema),y=v.exportBlocks(g,{}),b=OM(y);e.dataTransfer.clearData(),e.dataTransfer.setData("blocknote/html",m),e.dataTransfer.setData("text/html",y),e.dataTransfer.setData("text/plain",b),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(jA,0,0)}}}}(e,t,r.editor)})),B_(r,"blockDragEnd",(function(){r.editor.prosemirrorView&&LA(r.editor.prosemirrorView.root),r.view&&(r.view.isDragOrigin=!1)})),B_(r,"freezeMenu",(function(){r.view.menuFrozen=!0,r.view.state.show=!0,r.view.emitUpdate(r.view.state)})),B_(r,"unfreezeMenu",(function(){r.view.menuFrozen=!1,r.view.state.show=!1,r.view.emitUpdate(r.view.state)})),r.editor=e,r.plugin=new Pn({key:HA,view:function(t){return r.view=new FA(e,n,t,(function(e){r.emit("update",e)})),r.view}}),r}return T_(t,e),D_(t,[{key:"onUpdate",value:function(e){return this.on("update",e)}}])}(nA),VA=fl((function(e){return"blockContainer"===e.type.name})),$A=function(){return D_((function e(t,n){var r,o,i=this;A_(this,e),B_(this,"state"),B_(this,"emitUpdate"),B_(this,"rootEl"),B_(this,"pluginState"),B_(this,"handleScroll",(function(){var e,t;if(null!=(e=i.state)&&e.show){var n=null==(t=i.rootEl)?void 0:t.querySelector('[data-decoration-id="'.concat(i.pluginState.decorationId,'"]'));if(!n)return;i.state.referencePos=n.getBoundingClientRect(),i.emitUpdate(i.pluginState.triggerCharacter)}})),B_(this,"closeMenu",(function(){i.editor.dispatch(i.editor._tiptapEditor.state.tr.setMeta(UA,null))})),B_(this,"clearQuery",(function(){void 0!==i.pluginState&&i.editor._tiptapEditor.chain().focus().deleteRange({from:i.pluginState.queryStartPos-(i.pluginState.deleteTriggerCharacter?i.pluginState.triggerCharacter.length:0),to:i.editor._tiptapEditor.state.selection.from}).run()})),this.editor=t,this.pluginState=void 0,this.emitUpdate=function(e){var t;if(!i.state)throw new Error("Attempting to update uninitialized suggestions menu");n(e,C_(C_({},i.state),{},{ignoreQueryLength:null==(t=i.pluginState)?void 0:t.ignoreQueryLength}))},this.rootEl=null==(r=this.editor.prosemirrorView)?void 0:r.root,null==(o=this.rootEl)||o.addEventListener("scroll",this.handleScroll,!0)}),[{key:"update",value:function(e,t){var n,r=UA.getState(t),o=UA.getState(e.state),i=void 0!==r&&void 0===o;if(void 0===r&&void 0!==o||void 0!==r&&void 0!==o||i){if(this.pluginState=i?r:o,i||!this.editor.isEditable)return this.state.show=!1,void this.emitUpdate(this.pluginState.triggerCharacter);var a=null==(n=this.rootEl)?void 0:n.querySelector('[data-decoration-id="'.concat(this.pluginState.decorationId,'"]'));this.editor.isEditable&&a&&(this.state={show:!0,referencePos:a.getBoundingClientRect(),query:this.pluginState.query},this.emitUpdate(this.pluginState.triggerCharacter))}}},{key:"destroy",value:function(){var e;null==(e=this.rootEl)||e.removeEventListener("scroll",this.handleScroll,!0)}}])}(),UA=new In("SuggestionMenuPlugin"),GA=function(e){function t(e){var n;A_(this,t),n=O_(this,t),B_(n,"view"),B_(n,"plugin"),B_(n,"triggerCharacters",[]),B_(n,"addTriggerCharacter",(function(e){n.triggerCharacters.push(e)})),B_(n,"removeTriggerCharacter",(function(e){n.triggerCharacters=n.triggerCharacters.filter((function(t){return t!==e}))})),B_(n,"closeMenu",(function(){return n.view.closeMenu()})),B_(n,"clearQuery",(function(){return n.view.clearQuery()}));var r=n.triggerCharacters;return n.plugin=new Pn({key:UA,view:function(){return n.view=new $A(e,(function(e,t){n.emit("update ".concat(e),t)})),n.view},state:{init:function(){},apply:function(e,t,n,r){if(void 0!==e.getMeta("orderedListIndexing")||e.selection.$from.parent.type.spec.code)return t;var o=e.getMeta(UA);if("object"==R_(o)&&null!==o&&void 0===t)return{triggerCharacter:o.triggerCharacter,deleteTriggerCharacter:!1!==o.deleteTriggerCharacter,queryStartPos:r.selection.from,query:"",decorationId:"id_".concat(Math.floor(4294967295*Math.random())),ignoreQueryLength:null==o?void 0:o.ignoreQueryLength};if(void 0===t)return t;if(!(r.selection.from!==r.selection.to||null===o||e.getMeta("focus")||e.getMeta("blur")||e.getMeta("pointer")||void 0!==t.triggerCharacter&&r.selection.from<t.queryStartPos)){var i=C_({},t);return i.query=r.doc.textBetween(t.queryStartPos,r.selection.from),i}}},props:{handleTextInput:function(e,t,n,o){var i=this.getState(e.state);return!(!r.includes(o)||void 0!==i||(e.dispatch(e.state.tr.insertText(o).scrollIntoView().setMeta(UA,{triggerCharacter:o})),0))},decorations:function(e){var t=this.getState(e);if(void 0===t)return null;if(!t.deleteTriggerCharacter){var n=VA(e.selection);if(n)return Li.create(e.doc,[ji.node(n.pos,n.pos+n.node.nodeSize,{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":t.decorationId})])}return Li.create(e.doc,[ji.inline(t.queryStartPos-t.triggerCharacter.length,t.queryStartPos,{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":t.decorationId})])}}}),n}return T_(t,e),D_(t,[{key:"onUpdate",value:function(e,t){return this.triggerCharacters.includes(e)||this.addTriggerCharacter(e),this.on("update ".concat(e),t)}},{key:"shown",get:function(){var e,t;return(null==(t=null==(e=this.view)?void 0:e.state)?void 0:t.show)||!1}}])}(nA);function WA(e){BA||((BA=document.createElement("div")).innerHTML="_",BA.style.opacity="0",BA.style.height="1px",BA.style.width="1px",e instanceof Document?e.body.appendChild(BA):e.appendChild(BA))}function qA(e){return Array.prototype.indexOf.call(e.parentElement.childNodes,e)}var KA=function(){return D_((function e(t,n,r){var o=this;A_(this,e),B_(this,"state"),B_(this,"emitUpdate"),B_(this,"tableId"),B_(this,"tablePos"),B_(this,"tableElement"),B_(this,"menuFrozen",!1),B_(this,"mouseState","up"),B_(this,"prevWasEditable",null),B_(this,"viewMousedownHandler",(function(){o.mouseState="down"})),B_(this,"mouseUpHandler",(function(e){o.mouseState="up",o.mouseMoveHandler(e)})),B_(this,"mouseMoveHandler",(function(e){var t,n,r,i,a,s,l;if(!o.menuFrozen&&"selecting"!==o.mouseState&&e.target instanceof Element&&o.pmView.dom.contains(e.target)){var c=function(e){for(var t=e;t&&"TD"!==t.nodeName&&"TH"!==t.nodeName&&!t.classList.contains("tableWrapper");){if(t.classList.contains("ProseMirror"))return;var n=t.parentNode;if(!(n&&n instanceof Element))return;t=n}return"TD"===t.nodeName||"TH"===t.nodeName?{type:"cell",domNode:t,tbodyNode:t.closest("tbody")}:{type:"wrapper",domNode:t,tbodyNode:t.querySelector("tbody")}}(e.target);if("cell"===(null==c?void 0:c.type)&&"down"===o.mouseState&&(null==(t=o.state)||!t.draggingState))return o.mouseState="selecting",void(null!=(n=o.state)&&n.show&&(o.state.show=!1,o.state.showAddOrRemoveRowsButton=!1,o.state.showAddOrRemoveColumnsButton=!1,o.emitUpdate()));if(c&&o.editor.isEditable){if(c.tbodyNode){var u=c.tbodyNode.getBoundingClientRect(),d=TA(c.domNode,o.pmView);if(d){var f;o.tableElement=d.node;var p=WE(d.id,o.editor._tiptapEditor.state.doc);if(!p)throw new Error("Block with ID ".concat(d.id," not found"));var h=_E(p.node,o.editor.schema.blockSchema,o.editor.schema.inlineContentSchema,o.editor.schema.styleSchema,o.editor.blockCache);if(function(e,t,n){return"table"===t.type&&t.type in n.schema.blockSchema&&oM(t.type,n)}(0,h,o.editor)&&(o.tablePos=p.posBeforeNode+1,f=h),f){o.tableId=d.id;var m=null==(i=c.domNode.closest(".tableWrapper"))?void 0:i.querySelector(".table-widgets-container");if("wrapper"===(null==c?void 0:c.type)){var v=e.clientY>=u.bottom-1&&e.clientY<u.bottom+20,g=e.clientX>=u.right-1&&e.clientX<u.right+20,y=e.clientX>u.right||e.clientY>u.bottom;o.state=C_(C_({},o.state),{},{show:!0,showAddOrRemoveRowsButton:v,showAddOrRemoveColumnsButton:g,referencePosTable:u,block:f,widgetContainer:m,colIndex:y||null==(a=o.state)?void 0:a.colIndex,rowIndex:y||null==(s=o.state)?void 0:s.rowIndex,referencePosCell:y||null==(l=o.state)?void 0:l.referencePosCell})}else{var b=qA(c.domNode),k=qA(c.domNode.parentElement),w=c.domNode.getBoundingClientRect();if(void 0!==o.state&&o.state.show&&o.tableId===d.id&&o.state.rowIndex===k&&o.state.colIndex===b)return;o.state={show:!0,showAddOrRemoveColumnsButton:b===f.content.rows[0].cells.length-1,showAddOrRemoveRowsButton:k===f.content.rows.length-1,referencePosTable:u,block:f,draggingState:void 0,referencePosCell:w,colIndex:b,rowIndex:k,widgetContainer:m}}return o.emitUpdate(),!1}}}}else null!=(r=o.state)&&r.show&&(o.state.show=!1,o.state.showAddOrRemoveRowsButton=!1,o.state.showAddOrRemoveColumnsButton=!1,o.emitUpdate())}})),B_(this,"dragOverHandler",(function(e){var t;if(void 0!==(null==(t=o.state)?void 0:t.draggingState)){e.preventDefault(),e.dataTransfer.dropEffect="move",function(e,t){for(var n=t.querySelectorAll(".prosemirror-dropcursor-block, .prosemirror-dropcursor-inline"),r=0;r<n.length;r++)n[r].style.visibility="hidden"}(0,o.pmView.root);var n={left:Math.min(Math.max(e.clientX,o.state.referencePosTable.left+1),o.state.referencePosTable.right-1),top:Math.min(Math.max(e.clientY,o.state.referencePosTable.top+1),o.state.referencePosTable.bottom-1)},r=o.pmView.root.elementsFromPoint(n.left,n.top).filter((function(e){return"TD"===e.tagName||"TH"===e.tagName}));if(0!==r.length){var i=r[0],a=!1,s=qA(i.parentElement),l=qA(i),c="row"===o.state.draggingState.draggedCellOrientation?o.state.rowIndex:o.state.colIndex,u=("row"===o.state.draggingState.draggedCellOrientation?s:l)!==c;(o.state.rowIndex!==s||o.state.colIndex!==l)&&(o.state.rowIndex=s,o.state.colIndex=l,o.state.referencePosCell=i.getBoundingClientRect(),a=!0);var d="row"===o.state.draggingState.draggedCellOrientation?n.top:n.left;o.state.draggingState.mousePos!==d&&(o.state.draggingState.mousePos=d,a=!0),a&&o.emitUpdate(),u&&o.editor.dispatch(o.pmView.state.tr.setMeta(ZA,!0))}}})),B_(this,"dropHandler",(function(e){if(o.mouseState="up",void 0===o.state||void 0===o.state.draggingState)return!1;if(void 0===o.state.rowIndex||void 0===o.state.colIndex)throw new Error("Attempted to drop table row or column, but no table block was hovered prior.");e.preventDefault();var t=o.state,n=t.draggingState,r=t.colIndex,i=t.rowIndex,a=o.state.block.content.columnWidths;if("row"===n.draggedCellOrientation){if(!IE(o.state.block,n.originalIndex,i))return!1;var s=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:AE(e),o=TE({row:t,col:0},e,r).row,i=TE({row:n,col:0},e,r).row,a=b_(r.splice(o,1),1)[0];return r.splice(i,0,a),OE(r)}(o.state.block,n.originalIndex,i);o.editor.updateBlock(o.state.block,{type:"table",content:C_(C_({},o.state.block.content),{},{rows:s})})}else{if(!BE(o.state.block,n.originalIndex,r))return!1;var l=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:AE(e),o=TE({row:0,col:t},e,r).col,i=TE({row:0,col:n},e,r).col;return r.forEach((function(e){var t=b_(e.splice(o,1),1)[0];e.splice(i,0,t)})),OE(r)}(o.state.block,n.originalIndex,r),c=b_(a.splice(n.originalIndex,1),1)[0];a.splice(r,0,c),o.editor.updateBlock(o.state.block,{type:"table",content:C_(C_({},o.state.block.content),{},{columnWidths:a,rows:l})})}return o.editor.setTextCursorPosition(o.state.block.id),!0})),this.editor=t,this.pmView=n,this.emitUpdate=function(){if(!o.state)throw new Error("Attempting to update uninitialized image toolbar");r(o.state)},n.dom.addEventListener("mousemove",this.mouseMoveHandler),n.dom.addEventListener("mousedown",this.viewMousedownHandler),window.addEventListener("mouseup",this.mouseUpHandler),n.root.addEventListener("dragover",this.dragOverHandler),n.root.addEventListener("drop",this.dropHandler)}),[{key:"update",value:function(){var e;if(this.state&&this.state.show){if(this.state.block=this.editor.getBlock(this.state.block.id),!this.state.block||null==(e=this.tableElement)||!e.isConnected)return this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,void this.emitUpdate();var t=jE(this.state.block),n=t.height,r=t.width;void 0!==this.state.rowIndex&&void 0!==this.state.colIndex&&(this.state.rowIndex>=n&&(this.state.rowIndex=n-1),this.state.colIndex>=r&&(this.state.colIndex=r-1));var o=this.tableElement.querySelector("tbody");if(!o)throw new Error("Table block does not contain a 'tbody' HTML element. This should never happen.");if(void 0!==this.state.rowIndex&&void 0!==this.state.colIndex){var i=o.children[this.state.rowIndex].children[this.state.colIndex];i?this.state.referencePosCell=i.getBoundingClientRect():(this.state.rowIndex=void 0,this.state.colIndex=void 0)}this.state.referencePosTable=o.getBoundingClientRect(),this.emitUpdate()}}},{key:"destroy",value:function(){this.pmView.dom.removeEventListener("mousemove",this.mouseMoveHandler),window.removeEventListener("mouseup",this.mouseUpHandler),this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("dragover",this.dragOverHandler),this.pmView.root.removeEventListener("drop",this.dropHandler)}}])}(),ZA=new In("TableHandlesPlugin"),JA=function(e){function t(e){var n;return A_(this,t),n=O_(this,t),B_(n,"view"),B_(n,"plugin"),B_(n,"colDragStart",(function(e){if(void 0===n.view.state||void 0===n.view.state.colIndex)throw new Error("Attempted to drag table column, but no table block was hovered prior.");if(n.view.state.draggingState={draggedCellOrientation:"col",originalIndex:n.view.state.colIndex,mousePos:e.clientX},n.view.emitUpdate(),n.editor.dispatch(n.editor._tiptapEditor.state.tr.setMeta(ZA,{draggedCellOrientation:n.view.state.draggingState.draggedCellOrientation,originalIndex:n.view.state.colIndex,newIndex:n.view.state.colIndex,tablePos:n.view.tablePos})),!n.editor.prosemirrorView)throw new Error("Editor view not initialized.");WA(n.editor.prosemirrorView.root),e.dataTransfer.setDragImage(BA,0,0),e.dataTransfer.effectAllowed="move"})),B_(n,"rowDragStart",(function(e){if(void 0===n.view.state||void 0===n.view.state.rowIndex)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(n.view.state.draggingState={draggedCellOrientation:"row",originalIndex:n.view.state.rowIndex,mousePos:e.clientY},n.view.emitUpdate(),n.editor.dispatch(n.editor._tiptapEditor.state.tr.setMeta(ZA,{draggedCellOrientation:n.view.state.draggingState.draggedCellOrientation,originalIndex:n.view.state.rowIndex,newIndex:n.view.state.rowIndex,tablePos:n.view.tablePos})),!n.editor.prosemirrorView)throw new Error("Editor view not initialized.");WA(n.editor.prosemirrorView.root),e.dataTransfer.setDragImage(BA,0,0),e.dataTransfer.effectAllowed="copyMove"})),B_(n,"dragEnd",(function(){if(void 0===n.view.state)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(n.view.state.draggingState=void 0,n.view.emitUpdate(),n.editor.dispatch(n.editor._tiptapEditor.state.tr.setMeta(ZA,null)),!n.editor.prosemirrorView)throw new Error("Editor view not initialized.");var e;e=n.editor.prosemirrorView.root,BA&&(e instanceof Document?e.body.removeChild(BA):e.removeChild(BA),BA=void 0)})),B_(n,"freezeHandles",(function(){n.view.menuFrozen=!0})),B_(n,"unfreezeHandles",(function(){n.view.menuFrozen=!1})),B_(n,"getCellsAtRowHandle",(function(e,t){return PE(e,t)})),B_(n,"getCellsAtColumnHandle",(function(e,t){return LE(e,t)})),B_(n,"setCellSelection",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=n.view;if(!r)throw new Error("Table handles view not initialized");var o=n.editor.prosemirrorState,i=o.doc.resolve(r.tablePos+1),a=o.doc.resolve(i.posAtIndex(e.row)+1),s=o.doc.resolve(a.posAtIndex(e.col)),l=o.doc.resolve(i.posAtIndex(t.row)+1),c=o.doc.resolve(l.posAtIndex(t.col)),u=o.tr;return u.setSelection(new fh(s,c)),o.apply(u)})),B_(n,"addRowOrColumn",(function(e,t){var r=n.setCellSelection("row"===t.orientation?{row:e,col:0}:{row:0,col:e});return"row"===t.orientation?"above"===t.side?function(e,t){if(!ih(e))return!1;if(t){var n=yh(e);t(wh(e.tr,n,n.top))}return!0}(r,n.editor.dispatch):function(e,t){if(!ih(e))return!1;if(t){var n=yh(e);t(wh(e.tr,n,n.bottom))}return!0}(r,n.editor.dispatch):"left"===t.side?function(e,t){if(!ih(e))return!1;if(t){var n=yh(e);t(bh(e.tr,n,n.left))}return!0}(r,n.editor.dispatch):function(e,t){if(!ih(e))return!1;if(t){var n=yh(e);t(bh(e.tr,n,n.right))}return!0}(r,n.editor.dispatch)})),B_(n,"removeRowOrColumn",(function(e,t){var r=n.setCellSelection("row"===t?{row:e,col:0}:{row:0,col:e});return"row"===t?function(e,t){if(!ih(e))return!1;if(t){var n=yh(e),r=e.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(var o=n.bottom-1;xh(r,n,o),o!=n.top;o--){var i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=eh.get(n.table)}t(r)}return!0}(r,n.editor.dispatch):function(e,t){if(!ih(e))return!1;if(t){var n=yh(e),r=e.tr;if(0==n.left&&n.right==n.map.width)return!1;for(var o=n.right-1;kh(r,n,o),o!=n.left;o--){var i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=eh.get(i)}t(r)}return!0}(r,n.editor.dispatch)})),B_(n,"mergeCells",(function(e){return function(e,t){var n=e.selection;if(!(n instanceof fh)||n.$anchorCell.pos==n.$headCell.pos)return!1;var r=yh(e),o=r.map;if(function(e,t){for(var n=e.width,r=e.height,o=e.map,i=t.top*n+t.left,a=i,s=(t.bottom-1)*n+t.left,l=i+(t.right-t.left-1),c=t.top;c<t.bottom;c++){if(t.left>0&&o[a]==o[a-1]||t.right<n&&o[l]==o[l+1])return!0;a+=n,l+=n}for(var u=t.left;u<t.right;u++){if(t.top>0&&o[i]==o[i-n]||t.bottom<r&&o[s]==o[s+n])return!0;i++,s++}return!1}(o,r))return!1;if(t){for(var i,a,s=e.tr,l={},c=Z.empty,u=r.top;u<r.bottom;u++)for(var d=r.left;d<r.right;d++){var f=o.map[u*o.width+d],p=r.table.nodeAt(f);if(!l[f]&&p)if(l[f]=!0,null==i)i=f,a=p;else{Ch(p)||(c=c.append(p.content));var h=s.mapping.map(f+r.tableStart);s.delete(h,h+p.nodeSize)}}if(null==i||null==a)return!0;if(s.setNodeMarkup(i+r.tableStart,null,$p($p({},dh(a.attrs,a.attrs.colspan,r.right-r.left-a.attrs.colspan)),{},{rowspan:r.bottom-r.top})),c.size){var m=i+1+a.content.size,v=Ch(a)?i+1:m;s.replaceWith(v+r.tableStart,m+r.tableStart,c)}s.setSelection(new fh(s.doc.resolve(i+r.tableStart))),t(s)}return!0}(e?n.setCellSelection(e.relativeStartCell,e.relativeEndCell):n.editor.prosemirrorState,n.editor.dispatch)})),B_(n,"splitCell",(function(e){return t=e?n.setCellSelection(e):n.editor.prosemirrorState,r=n.editor.dispatch,i=nh(t.schema),(o=function(e){var t=e.node;return i[t.type.spec.tableRole]},function(e,t){var n,r,i,a=e.selection;if(a instanceof fh){if(a.$anchorCell.pos!=a.$headCell.pos)return!1;r=a.$anchorCell.nodeAfter,i=a.$anchorCell.pos}else{if(!(r=function(e){for(var t=e.depth;t>0;t--){var n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}(a.$from)))return!1;i=null==(n=oh(a.$from))?void 0:n.pos}if(null==r||null==i)return!1;if(1==r.attrs.colspan&&1==r.attrs.rowspan)return!1;if(t){var s=r.attrs,l=[],c=s.colwidth;s.rowspan>1&&(s=$p($p({},s),{},{rowspan:1})),s.colspan>1&&(s=$p($p({},s),{},{colspan:1}));for(var u,d=yh(e),f=e.tr,p=0;p<d.right-d.left;p++)l.push(c?$p($p({},s),{},{colwidth:c&&c[p]?[c[p]]:null}):s);for(var h=d.top;h<d.bottom;h++){var m=d.map.positionAt(h,d.left,d.table);h==d.top&&(m+=r.nodeSize);for(var v=d.left,g=0;v<d.right;v++,g++)v==d.left&&h==d.top||f.insert(u=f.mapping.map(m+d.tableStart,1),o({node:r,row:h,col:v}).createAndFill(l[g]))}f.setNodeMarkup(i,o({node:r,row:d.top,col:d.left}),l[0]),a instanceof fh&&f.setSelection(new fh(f.doc.resolve(a.$anchorCell.pos),u?f.doc.resolve(u):void 0)),t(f)}return!0})(t,r);var t,r,o,i})),B_(n,"getCellSelection",(function(){var e=n.editor.prosemirrorState,t=e.selection,r=t.$from,o=t.$to;if(uM(t))t.ranges.forEach((function(e){var t,n;r=e.$from.min(null!==(t=r)&&void 0!==t?t:e.$from),o=e.$to.max(null!==(n=o)&&void 0!==n?n:e.$to)}));else if(r=e.doc.resolve(t.$from.pos-t.$from.parentOffset-1),o=e.doc.resolve(t.$to.pos-t.$to.parentOffset-1),0===r.pos||0===o.pos)return;for(var i=e.doc.resolve(r.pos-r.parentOffset-1),a=e.doc.resolve(o.pos-o.parentOffset-1),s=e.doc.resolve(i.pos-i.parentOffset-1),l=r.index(i.depth),c=i.index(s.depth),u=o.index(a.depth),d=a.index(s.depth),f=[],p=c;p<=d;p++)for(var h=l;h<=u;h++)f.push({row:p,col:h});return{from:{row:c,col:l},to:{row:d,col:u},cells:f}})),B_(n,"getMergeDirection",(function(e){var t=uM(n.editor.prosemirrorState.selection)?n.editor.prosemirrorState.selection:void 0;if(t&&e&&!(t.ranges.length<=1)){var r=n.getCellSelection();return r?function(e,t,n){var r=TE(e,n),o=TE(t,n);return r.col===o.col}(r.from,r.to,e)?"vertical":"horizontal":void 0}})),B_(n,"cropEmptyRowsOrColumns",(function(e,t){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:AE(e);if("columns"===t){for(var r=0,o=n[0].length-1;o>=0&&n.every((function(e){return RE(e[o].cell)&&1===e[o].colspan}));o--)r++;for(var i=n.length-1;i>=0;i--){var a=Math.max(n[i].length-r,1);n[i]=n[i].slice(0,a)}return OE(n)}for(var s=0,l=n.length-1;l>=0&&n[l].every((function(e){return RE(e.cell)&&1===e.rowspan}));l--)s++;var c=Math.min(s,n.length-1);return n.splice(n.length-c,c),OE(n)}(e,t)})),B_(n,"addRowsOrColumns",(function(e,t,n){return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:AE(e),o=jE(e),i=o.width,a=o.height;if("columns"===t)r.forEach((function(e,t){if(n>=0)for(var r=0;r<n;r++)e.push({row:t,col:Math.max.apply(Math,y_(e.map((function(e){return e.col}))))+1,rowspan:1,colspan:1,cell:Y_("")});else e.splice(i+n,-1*n)}));else if(n>0)for(var s=function(e){var t=new Array(i).fill(null).map((function(t,n){return{row:a+e,col:n,rowspan:1,colspan:1,cell:Y_("")}}));r.push(t)},l=0;l<n;l++)s(l);else n<0&&r.splice(a+n,-1*n);return OE(r)}(e,t,n)})),n.editor=e,n.plugin=new Pn({key:ZA,view:function(t){return n.view=new KA(e,t,(function(e){n.emit("update",e)})),n.view},props:{decorations:function(e){if(void 0!==n.view&&void 0!==n.view.state&&void 0!==n.view.state.draggingState&&void 0!==n.view.tablePos){var t="row"===n.view.state.draggingState.draggedCellOrientation?n.view.state.rowIndex:n.view.state.colIndex;if(void 0!==t){var r=[],o=n.view.state,i=o.block,a=o.draggingState,s=a.originalIndex,l=a.draggedCellOrientation;if(t===s||!i||"row"===l&&!IE(i,s,t)||"col"===l&&!BE(i,s,t))return Li.create(e.doc,r);var c=e.doc.resolve(n.view.tablePos+1);return"row"===n.view.state.draggingState.draggedCellOrientation?PE(n.view.state.block,t).forEach((function(n){var o=n.row,i=n.col,a=e.doc.resolve(c.posAtIndex(o)+1),l=e.doc.resolve(a.posAtIndex(i)+1),u=l.node(),d=l.pos+(t>s?u.nodeSize-2:0);r.push(ji.widget(d,(function(){var e=document.createElement("div");return e.className="bn-table-drop-cursor",e.style.left="0",e.style.right="0",t>s?e.style.bottom="-2px":e.style.top="-3px",e.style.height="4px",e})))})):LE(n.view.state.block,t).forEach((function(n){var o=n.row,i=n.col,a=e.doc.resolve(c.posAtIndex(o)+1),l=e.doc.resolve(a.posAtIndex(i)+1),u=l.node(),d=l.pos+(t>s?u.nodeSize-2:0);r.push(ji.widget(d,(function(){var e=document.createElement("div");return e.className="bn-table-drop-cursor",e.style.top="0",e.style.bottom="0",t>s?e.style.right="-2px":e.style.left="-3px",e.style.width="4px",e})))})),Li.create(e.doc,r)}}}}}),n}return T_(t,e),D_(t,[{key:"onUpdate",value:function(e){return this.on("update",e)}}])}(nA),XA=Fs.create({name:"textAlignment",addGlobalAttributes:function(){return[{types:["paragraph","heading","bulletListItem","numberedListItem","checkListItem","tableCell","tableHeader"],attributes:{textAlignment:{default:"left",parseHTML:function(e){return e.getAttribute("data-text-alignment")},renderHTML:function(e){return"left"===e.textAlignment?{}:{"data-text-alignment":e.textAlignment}}}}}]}}),YA=Fs.create({name:"blockTextColor",addGlobalAttributes:function(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{textColor:{default:lE.textColor.default,parseHTML:function(e){return e.hasAttribute("data-text-color")?e.getAttribute("data-text-color"):lE.textColor.default},renderHTML:function(e){return e.textColor===lE.textColor.default?{}:{"data-text-color":e.textColor}}}}}]}}),QA=Fs.create({name:"trailingNode",addProseMirrorPlugins:function(){var e=new In(this.name);return[new Pn({key:e,appendTransaction:function(t,n,r){var o=r.doc,i=r.tr,a=r.schema,s=e.getState(r),l=o.content.size-2,c=a.nodes.blockContainer,u=a.nodes.paragraph;if(s)return i.insert(l,c.create(void 0,u.create()))},state:{init:function(e,t){},apply:function(e,t){if(!e.docChanged)return t;var n=e.doc.lastChild;if(!n||"blockGroup"!==n.type.name)throw new Error("Expected blockGroup");if(!(n=n.lastChild)||"blockContainer"!==n.type.name)return!0;var r=n.firstChild;if(!r)throw new Error("Expected blockContent");return n.nodeSize>4||"inline*"!==r.type.spec.content}}})]}}),eO={blockColor:"data-block-color",blockStyle:"data-block-style",id:"data-id",depth:"data-depth",depthChange:"data-depth-change"},tO=Il.create({name:"blockContainer",group:"blockGroupChild bnBlock",content:"blockContent blockGroup?",priority:50,defining:!0,parseHTML:function(){return[{tag:"div",getAttrs:function(e){if("string"==typeof e)return!1;for(var t={},n=0,r=Object.entries(eO);n<r.length;n++){var o=b_(r[n],2),i=o[0],a=o[1];e.getAttribute(a)&&(t[i]=e.getAttribute(a))}return"blockContainer"===e.getAttribute("data-node-type")&&t}}]},renderHTML:function(e){var t,n=e.HTMLAttributes,r=document.createElement("div");r.className="bn-block-outer",r.setAttribute("data-node-type","blockOuter");for(var o=0,i=Object.entries(n);o<i.length;o++){var a=b_(i[o],2),s=a[0],l=a[1];"class"!==s&&r.setAttribute(s,l)}var c=C_(C_({},(null==(t=this.options.domAttributes)?void 0:t.block)||{}),n),u=document.createElement("div");u.className=oE("bn-block",c.class),u.setAttribute("data-node-type",this.name);for(var d=0,f=Object.entries(c);d<f.length;d++){var p=b_(f[d],2),h=p[0],m=p[1];"class"!==h&&u.setAttribute(h,m)}return r.appendChild(u),{dom:r,contentDOM:u}}}),nO=Il.create({name:"blockGroup",group:"childContainer",content:"blockGroupChild+",parseHTML:function(){return[{tag:"div",getAttrs:function(e){return"string"!=typeof e&&"blockGroup"===e.getAttribute("data-node-type")&&null}}]},renderHTML:function(e){var t,n=e.HTMLAttributes,r=C_(C_({},(null==(t=this.options.domAttributes)?void 0:t.blockGroup)||{}),n),o=document.createElement("div");o.className=oE("bn-block-group",r.class),o.setAttribute("data-node-type","blockGroup");for(var i=0,a=Object.entries(r);i<a.length;i++){var s=b_(a[i],2),l=s[0],c=s[1];"class"!==l&&o.setAttribute(l,c)}return{dom:o,contentDOM:o}}}),rO=Il.create({name:"doc",topNode:!0,content:"blockGroup"}),oO=!1,iO=function(e){var t=[Nl.ClipboardTextSerializer,Nl.Commands,Nl.Editable,Nl.FocusEvents,Nl.Tabindex,Nm,K_.configure({types:["blockContainer","columnList","column"],setIdAttribute:e.setIdAttribute}),Pm.extend({priority:10}),py,fy.extend({inclusive:!1}).configure({defaultProtocol:wA,protocols:oO?[]:kA})].concat(y_(Object.values(e.styleSpecs).map((function(t){return t.implementation.mark.configure({editor:e.editor})}))),[YA,eA,XA,Fs.create({name:"OverrideEscape",addKeyboardShortcuts:function(){var t=this;return{Escape:function(){return!e.editor.suggestionMenus.shown&&t.editor.commands.blur()}}}}),rO,tO.configure({editor:e.editor,domAttributes:e.domAttributes}),vA.configure({editor:e.editor,tabBehavior:e.tabBehavior}),nO.configure({domAttributes:e.domAttributes})],y_(Object.values(e.inlineContentSpecs).filter((function(e){return"link"!==e.config&&"text"!==e.config})).map((function(t){return t.implementation.node.configure({editor:e.editor})}))),y_(Object.values(e.blockSpecs).flatMap((function(t){return[].concat(y_((t.implementation.requiredExtensions||[]).map((function(t){return t.configure({editor:e.editor,domAttributes:e.domAttributes})}))),[t.implementation.node.configure({editor:e.editor,domAttributes:e.domAttributes})])}))),[QM(e.editor),KM(e.editor),WM(e.editor)],y_(void 0===e.trailingBlock||e.trailingBlock?[QA]:[]),y_(e.comments?[tA]:[]));return oO=!0,e.collaboration?t.push.apply(t,y_(function(e){var t,n=[];n.push(GS.configure({fragment:e.fragment}));var r=null==(t=e.provider)?void 0:t.awareness;if(r){var o=new Map;"always"!==e.showCursorLabels&&r.on("change",(function(e){var t,n=g_(e.updated);try{var r=function(){var e=t.value,n=o.get(e);n&&(n.element.setAttribute("data-active",""),n.hideTimeout&&clearTimeout(n.hideTimeout),o.set(e,{element:n.element,hideTimeout:setTimeout((function(){n.element.removeAttribute("data-active")}),2e3)}))};for(n.s();!(t=n.n()).done;)r()}catch(e){n.e(e)}finally{n.f()}})),n.push(o_.configure({user:e.user,render:function(t,n){var r,i=o.get(n);if(!i){var a=(null==(r=null==e?void 0:e.renderCursor)?void 0:r.call(e,t))||function(e){var t=document.createElement("span");t.classList.add("bn-collaboration-cursor__base");var n=document.createElement("span");n.setAttribute("contentedEditable","false"),n.classList.add("bn-collaboration-cursor__caret"),n.setAttribute("style","background-color: ".concat(e.color));var r=document.createElement("span");return r.classList.add("bn-collaboration-cursor__label"),r.setAttribute("style","background-color: ".concat(e.color)),r.insertBefore(document.createTextNode(e.name),null),n.insertBefore(r,null),t.insertBefore(document.createTextNode("⁠"),null),t.insertBefore(n,null),t.insertBefore(document.createTextNode("⁠"),null),t}(t);"always"!==(null==e?void 0:e.showCursorLabels)&&(a.addEventListener("mouseenter",(function(){var e=o.get(n);e.element.setAttribute("data-active",""),e.hideTimeout&&(clearTimeout(e.hideTimeout),o.set(n,{element:e.element,hideTimeout:void 0}))})),a.addEventListener("mouseleave",(function(){var e=o.get(n);o.set(n,{element:e.element,hideTimeout:setTimeout((function(){e.element.removeAttribute("data-active")}),2e3)})}))),i={element:a,hideTimeout:void 0},o.set(n,i)}return i.element},provider:e.provider}))}return n}(e.collaboration))):t.push(av),t};function aO(e,t){var n=[];return e.forEach((function(e,r,o){o!==t&&n.push(e)})),Z.from(n)}function sO(e,t){var n=Z.from(e.content);if(n=function(e,t){for(var n=[],r=0;r<e.childCount;r++)if("tableRow"===e.child(r).type.name)if(n.length>0&&"table"===n[n.length-1].type.name){var o=n[n.length-1],i=o.copy(o.content.addToEnd(e.child(r)));n[n.length-1]=i}else{var a=t.nodes.table.createChecked(void 0,e.child(r));n.push(a)}else n.push(e.child(r));return Z.from(n)}(n,t.state.schema),!function(e,t){var n,r,o=1===e.childCount,i="inline*"===(null==(n=e.firstChild)?void 0:n.type.spec.content),a="tableRow+"===(null==(r=e.firstChild)?void 0:r.type.spec.content);if(o){if(i)return!1;if(a){var s=q_(t.state);if(s.isBlockContainer)return!("tableRow+"===s.blockContent.node.type.spec.content)}}return!0}(n,t))return new te(n,e.openStart,e.openEnd);for(var r=0;r<n.childCount;r++)if("blockContent"===n.child(r).type.spec.group){var o=[n.child(r)];if(r+1<n.childCount&&"blockGroup"===n.child(r+1).type.name){var i=n.child(r+1).child(0).child(0);("bulletListItem"===i.type.name||"numberedListItem"===i.type.name||"checkListItem"===i.type.name)&&(o.push(n.child(r+1)),n=aO(n,r+1))}var a=t.state.schema.nodes.blockContainer.createChecked(void 0,o);n=n.replaceChild(r,a)}return new te(n,e.openStart,e.openEnd)}var lO=function(e){function t(e,n){var r;A_(this,t),r=O_(this,t,[C_(C_({},e),{},{content:void 0})]),B_(r,"_state"),B_(r,"mount",(function(e,t,n){t?(r.options.element=t,r.createViewAlternative(e,n)):r.destroy()}));var o,i,a=r.schema,s=a.nodes.doc.createAndFill;a.nodes.doc.createAndFill=function(){if(o)return o;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=s.apply(a.nodes.doc,t),i=JSON.parse(JSON.stringify(r.toJSON()));return i.content[0].content[0].attrs.id="initialBlockId",o=be.fromJSON(a,i)};try{var l;i=sl({type:"doc",content:[{type:"blockGroup",content:null==e?void 0:e.content.map((function(e){return GE(e,r.schema,n).toJSON()}))}]},r.schema,r.options.parseOptions)}catch(l){throw console.error("Error creating document from blocks passed as `initialContent`. Caused by exception: ",l),new Error("Error creating document from blocks passed as `initialContent`:\n"+ +JSON.stringify(e.content))}return r._state=jn.create({doc:i,schema:r.schema}),r}return T_(t,e),D_(t,[{key:"state",get:function(){return this.view&&(this._state=this.view.state),this._state}},{key:"dispatch",value:function(e){this.view?this.view.dispatch(e):this._state=this.state.apply(e)}},{key:"createViewAlternative",value:function(e,t){this.contentComponent=t;var n={};this.extensionManager.extensions.forEach((function(t){"mark"===t.type&&t.config.addMarkView&&(n[t.name]=t.config.addMarkView(e))})),this.view=new aa({mount:this.options.element},C_(C_({},this.options.editorProps),{},{dispatchTransaction:this.dispatchTransaction.bind(this),state:this.state,markViews:n,nodeViews:this.extensionManager.nodeViews}));var r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.commands.focus(this.options.autofocus||"true"===this.options.element.getAttribute("data-bn-autofocus"),{scrollIntoView:!1}),this.emit("create",{editor:this}),this.isInitialized=!0}}])}(Ll);B_(lO,"create",(function(e,t){var n,r,o=null==(n=null==globalThis?void 0:globalThis.window)?void 0:n.setTimeout;R_(null==(r=null==globalThis?void 0:globalThis.window)?void 0:r.setTimeout)<"u"&&(globalThis.window.setTimeout=function(){return 0});try{return new lO(e,t)}finally{o&&(globalThis.window.setTimeout=o)}}));var cO=lO;cO.prototype.createView=function(){this.options.onPaste=this.options.onDrop=void 0};var uO,dO={enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!1},fO=function(e){function t(e){var n,r,o,i,a,s,l,c,u,d,f,p,h,m,v,g,y,b;A_(this,t),l=O_(this,t),B_(l,"pmSchema"),B_(l,"extensions",{}),B_(l,"headless",!1),B_(l,"_tiptapEditor"),B_(l,"elementRenderer",null),B_(l,"blockCache",new WeakMap),B_(l,"dictionary"),B_(l,"schema"),B_(l,"blockImplementations"),B_(l,"inlineContentImplementations"),B_(l,"styleImplementations"),B_(l,"formattingToolbar"),B_(l,"linkToolbar"),B_(l,"sideMenu"),B_(l,"suggestionMenus"),B_(l,"filePanel"),B_(l,"tableHandles"),B_(l,"comments"),B_(l,"showSelectionPlugin"),B_(l,"uploadFile"),B_(l,"onUploadStartCallbacks",[]),B_(l,"onUploadEndCallbacks",[]),B_(l,"resolveFileUrl"),B_(l,"resolveUsers"),B_(l,"settings"),B_(l,"dispatch",(function(e){l._tiptapEditor.dispatch(e)})),B_(l,"mount",(function(e,t){l._tiptapEditor.mount(l,e,t)})),l.options=e;var k=e;if(k.onEditorContentChange)throw new Error("onEditorContentChange initialization option is deprecated, use <BlockNoteView onChange={...} />, the useEditorChange(...) hook, or editor.onChange(...)");if(k.onTextCursorPositionChange)throw new Error("onTextCursorPositionChange initialization option is deprecated, use <BlockNoteView onSelectionChange={...} />, the useEditorSelectionChange(...) hook, or editor.onSelectionChange(...)");if(k.onEditorReady)throw new Error("onEditorReady is deprecated. Editor is immediately ready for use after creation.");if(k.editable)throw new Error("editable initialization option is deprecated, use <BlockNoteView editable={true/false} />, or alternatively editor.isEditable = true/false");l.dictionary=e.dictionary||F_,l.settings={tables:{splitCells:null!==(n=null==(c=null==e?void 0:e.tables)?void 0:c.splitCells)&&void 0!==n&&n,cellBackgroundColor:null!==(r=null==(u=null==e?void 0:e.tables)?void 0:u.cellBackgroundColor)&&void 0!==r&&r,cellTextColor:null!==(o=null==(d=null==e?void 0:e.tables)?void 0:d.cellTextColor)&&void 0!==o&&o,headers:null!==(i=null==(f=null==e?void 0:e.tables)?void 0:f.headers)&&void 0!==i&&i}};var w=C_(C_({defaultStyles:!0,schema:e.schema||mM.create(),_headless:!1},e),{},{placeholders:C_(C_({},l.dictionary.placeholders),e.placeholders)});if(w.comments&&!w.resolveUsers)throw new Error("resolveUsers is required when using comments");if(l.resolveUsers=w.resolveUsers,l.schema=w.schema,l.blockImplementations=w.schema.blockSpecs,l.inlineContentImplementations=w.schema.inlineContentSpecs,l.styleImplementations=w.schema.styleSpecs,l.extensions=function(e){var t,n,r={},o=g_(iO(e));try{for(o.s();!(n=o.n()).done;){var i=n.value;r[i.name]=i}}catch(e){o.e(e)}finally{o.f()}r.formattingToolbar=new dA(e.editor),r.linkToolbar=new bA(e.editor),r.sideMenu=new zA(e.editor,e.sideMenuDetection),r.suggestionMenus=new GA(e.editor),r.filePanel=new lA(e.editor),r.placeholder=new _A(e.editor,e.placeholders),(null===(t=e.animations)||void 0===t||t)&&(r.animations=new MA),e.tableHandles&&(r.tableHandles=new JA(e.editor)),r.dropCursor={plugin:e.dropCursor({width:5,color:"#ddeeff",editor:e.editor})},r.nodeSelectionKeyboard=new CA,r.showSelection=new OA(e.editor),e.comments&&(r.comments=new iA(e.editor,e.comments.threadStore,tA.name));var a,s=g_(e.disableExtensions||[]);try{for(s.s();!(a=s.n()).done;)delete r[a.value]}catch(e){s.e(e)}finally{s.f()}return r}({editor:l,domAttributes:w.domAttributes||{},blockSpecs:l.schema.blockSpecs,styleSpecs:l.schema.styleSpecs,inlineContentSpecs:l.schema.inlineContentSpecs,collaboration:w.collaboration,trailingBlock:w.trailingBlock,disableExtensions:w.disableExtensions,setIdAttribute:w.setIdAttribute,animations:null===(a=w.animations)||void 0===a||a,tableHandles:oM("table",l),dropCursor:null!==(s=l.options.dropCursor)&&void 0!==s?s:l_,placeholders:w.placeholders,tabBehavior:w.tabBehavior,sideMenuDetection:w.sideMenuDetection||"viewport",comments:w.comments}),((null==(p=w._tiptapOptions)?void 0:p.extensions)||[]).forEach((function(e){l.extensions[e.name]=e})),Object.entries(w._extensions||{}).forEach((function(e){var t=b_(e,2),n=t[0],r=t[1];"function"==typeof r&&(r=r(l)),l.extensions[n]=r})),l.formattingToolbar=l.extensions.formattingToolbar,l.linkToolbar=l.extensions.linkToolbar,l.sideMenu=l.extensions.sideMenu,l.suggestionMenus=l.extensions.suggestionMenus,l.filePanel=l.extensions.filePanel,l.tableHandles=l.extensions.tableHandles,l.comments=l.extensions.comments,l.showSelectionPlugin=l.extensions.showSelection,w.uploadFile){var x=w.uploadFile;l.uploadFile=function(){var e=v_(h_().mark((function e(t,n){return h_().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.onUploadStartCallbacks.forEach((function(e){return e.apply(l,[n])})),e.prev=1,e.next=4,x(t,n);case 4:return e.abrupt("return",e.sent);case 5:return e.prev=5,l.onUploadEndCallbacks.forEach((function(e){return e.apply(l,[n])})),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[1,,5,8]])})));return function(t,n){return e.apply(this,arguments)}}()}l.resolveFileUrl=w.resolveFileUrl,l.headless=w._headless;var C="collaboration"in l.extensions||"liveblocksExtension"in l.extensions;C&&w.initialContent&&console.warn("When using Collaboration, initialContent might cause conflicts, because changes should come from the collaboration provider");var S=w.initialContent||(C?[{type:"paragraph",id:"initialBlockId"}]:[{type:"paragraph",id:K_.options.generateID()}]);if(!Array.isArray(S)||0===S.length)throw new Error("initialContent must be a non-empty array of blocks, received: "+S);var _=y_(Object.entries(l.extensions).map((function(e){var t=b_(e,2),n=t[0],r=t[1];if(r instanceof Fs||r instanceof Il||r instanceof Ps)return r;if(!r.plugin)throw new Error("Extension should either be a TipTap extension or a ProseMirror plugin in a plugin property");return Fs.create({name:n,addProseMirrorPlugins:function(){return[r.plugin]}})}))),E=C_(C_(C_({},dO),w._tiptapOptions),{},{content:S,extensions:_,editorProps:C_(C_({},null==(h=w._tiptapOptions)?void 0:h.editorProps),{},{attributes:C_(C_(C_({tabIndex:"0"},null==(v=null==(m=w._tiptapOptions)?void 0:m.editorProps)?void 0:v.attributes),null==(g=w.domAttributes)?void 0:g.editor),{},{class:oE("bn-editor",w.defaultStyles?"bn-default-styles":"",(null==(b=null==(y=w.domAttributes)?void 0:y.editor)?void 0:b.class)||"")}),transformPasted:sO})});return l.headless?l.pmSchema=function(e,t){return Ss(Bs.resolve(e),t)}(E.extensions):(l._tiptapEditor=cO.create(E,l.schema.styleSchema),l.pmSchema=l._tiptapEditor.schema),l.emit("create"),l}return T_(t,e),D_(t,[{key:"prosemirrorView",get:function(){return this._tiptapEditor.view}},{key:"prosemirrorState",get:function(){return this._tiptapEditor.state}},{key:"domElement",get:function(){var e;return null==(e=this.prosemirrorView)?void 0:e.dom}},{key:"isFocused",value:function(){var e;return(null==(e=this.prosemirrorView)?void 0:e.hasFocus())||!1}},{key:"focus",value:function(){var e;null==(e=this.prosemirrorView)||e.focus()}},{key:"onUploadStart",value:function(e){var t=this;return this.onUploadStartCallbacks.push(e),function(){var n=t.onUploadStartCallbacks.indexOf(e);n>-1&&t.onUploadStartCallbacks.splice(n,1)}}},{key:"onUploadEnd",value:function(e){var t=this;return this.onUploadEndCallbacks.push(e),function(){var n=t.onUploadEndCallbacks.indexOf(e);n>-1&&t.onUploadEndCallbacks.splice(n,1)}}},{key:"topLevelBlocks",get:function(){return this.document}},{key:"document",get:function(){var e=this,t=[];return this.prosemirrorState.doc.firstChild.descendants((function(n){return t.push(_E(n,e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache)),!1})),t}},{key:"getBlock",value:function(e){return function(e,t){var n=WE("string"==typeof t?t:t.id,e._tiptapEditor.state.doc);if(n)return _E(n.node,e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache)}(this,e)}},{key:"getPrevBlock",value:function(e){return function(e,t){var n=WE("string"==typeof t?t:t.id,e._tiptapEditor.state.doc);if(n){var r=e._tiptapEditor.state.doc.resolve(n.posBeforeNode).nodeBefore;return r?_E(r,e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache):void 0}}(this,e)}},{key:"getNextBlock",value:function(e){return function(e,t){var n=WE("string"==typeof t?t:t.id,e._tiptapEditor.state.doc);if(n){var r=e._tiptapEditor.state.doc.resolve(n.posBeforeNode+n.node.nodeSize).nodeAfter;return r?_E(r,e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache):void 0}}(this,e)}},{key:"getParentBlock",value:function(e){return function(e,t){var n=WE("string"==typeof t?t:t.id,e._tiptapEditor.state.doc);if(n){var r=e._tiptapEditor.state.doc.resolve(n.posBeforeNode),o=r.node(),i=r.node(-1),a="doc"!==i.type.name?"blockGroup"===o.type.name?i:o:void 0;return a?_E(a,e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache):void 0}}(this,e)}},{key:"forEachBlock",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.document.slice();t&&n.reverse(),function n(r){var o,i=g_(r);try{for(i.s();!(o=i.n()).done;){var a=o.value;if(!1===e(a))return!1;if(!n(t?a.children.slice().reverse():a.children))return!1}}catch(e){i.e(e)}finally{i.f()}return!0}(n)}},{key:"onEditorContentChange",value:function(e){this._tiptapEditor.on("update",e)}},{key:"onEditorSelectionChange",value:function(e){this._tiptapEditor.on("selectionUpdate",e)}},{key:"getTextCursorPosition",value:function(){return function(e){var t,n=q_(e._tiptapEditor.state).bnBlock,r=e._tiptapEditor.state.doc.resolve(n.beforePos),o=r.nodeBefore,i=e._tiptapEditor.state.doc.resolve(n.afterPos).nodeAfter;return r.depth>1&&((t=r.node()).type.isInGroup("bnBlock")||(t=r.node(r.depth-1))),{block:_E(n.node,e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache),prevBlock:null===o?void 0:_E(o,e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache),nextBlock:null===i?void 0:_E(i,e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache),parentBlock:void 0===t?void 0:_E(t,e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache)}}(this)}},{key:"setTextCursorPosition",value:function(e){_M(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"start")}},{key:"getSelection",value:function(){return function(e){var t=e._tiptapEditor.state;if(!t.selection.empty&&!("node"in t.selection)){var n=t.doc.resolve($_(t.doc,t.selection.from).posBeforeNode),r=t.doc.resolve($_(t.doc,t.selection.to).posBeforeNode),o=function(r,o){var i=n.posAtIndex(r,o),a=t.doc.resolve(i).nodeAfter;if(!a)throw new Error("Error getting selection - node not found at position ".concat(i));return _E(a,e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache)},i=[],a=n.sharedDepth(r.pos),s=n.index(a),l=r.index(a);if(n.depth>a){i.push(_E(n.nodeAfter,e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache));for(var c=n.depth;c>a;c--)if(n.node(c).type.isInGroup("childContainer"))for(var u=n.index(c)+1,d=n.node(c).childCount,f=u;f<d;f++)i.push(o(f,c))}else i.push(o(s,a));for(var p=s+1;p<=l;p++)i.push(o(p,a));if(0===i.length)throw new Error("Error getting selection - selection doesn't span any blocks (".concat(t.selection,")"));return{blocks:i}}}(this)}},{key:"setSelection",value:function(e,t){!function(e,t,n){var r="string"==typeof t?t:t.id,o="string"==typeof n?n:n.id;if(r===o)throw new Error("Attempting to set selection with the same anchor and head blocks (id ".concat(r,")"));var i=e._tiptapEditor.state.doc,a=WE(r,i);if(!a)throw new Error("Block with ID ".concat(r," not found"));var s=WE(o,i);if(!s)throw new Error("Block with ID ".concat(o," not found"));var l,c,u=G_(a),d=G_(s),f=e.schema.blockSchema[u.blockNoteType],p=e.schema.blockSchema[d.blockNoteType];if(!u.isBlockContainer||"none"===f.content)throw new Error("Attempting to set selection anchor in block without content (id ".concat(r,")"));if(!d.isBlockContainer||"none"===p.content)throw new Error("Attempting to set selection anchor in block without content (id ".concat(o,")"));if("table"===f.content){var h=eh.get(u.blockContent.node);l=u.blockContent.beforePos+h.positionAt(0,0,u.blockContent.node)+1+2}else l=u.blockContent.beforePos+1;if("table"===p.content){var m=eh.get(d.blockContent.node),v=d.blockContent.beforePos+m.positionAt(m.height-1,m.width-1,d.blockContent.node)+1;c=v+i.resolve(v).nodeAfter.nodeSize-2}else c=d.blockContent.afterPos-1;e._tiptapEditor.dispatch(e._tiptapEditor.state.tr.setSelection(bn.create(e._tiptapEditor.state.doc,l,c)))}(this,e,t)}},{key:"isEditable",get:function(){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return!1}return void 0===this._tiptapEditor.isEditable||this._tiptapEditor.isEditable},set:function(e){if(this._tiptapEditor)this._tiptapEditor.options.editable!==e&&this._tiptapEditor.setEditable(e);else if(!this.headless)throw new Error("no editor, but also not headless?")}},{key:"insertBlocks",value:function(e,t){return function(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"before",i="string"==typeof n?n:n.id,a=[],s=g_(t);try{for(s.s();!(r=s.n()).done;){var l=r.value;a.push(GE(l,e.pmSchema,e.schema.styleSchema))}}catch(e){s.e(e)}finally{s.f()}var c=WE(i,e._tiptapEditor.state.doc);if(!c)throw new Error("Block with ID ".concat(i," not found"));"before"===o&&e.dispatch(e._tiptapEditor.state.tr.insert(c.posBeforeNode,a)),"after"===o&&e.dispatch(e._tiptapEditor.state.tr.insert(c.posBeforeNode+c.node.nodeSize,a));for(var u=[],d=0,f=a;d<f.length;d++){var p=f[d];u.push(_E(p,e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache))}return u}(this,e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"before")}},{key:"updateBlock",value:function(e,t){return function(e,t,n){var r=e._tiptapEditor,o="string"==typeof t?t:t.id,i=WE(o,r.state.doc);if(!i)throw new Error("Block with ID ".concat(o," not found"));return r.commands.command((function(t){var r=t.state,o=t.dispatch;return qE(e,i.posBeforeNode,n)({state:r,dispatch:o}),!0})),_E(r.state.doc.resolve(i.posBeforeNode+1).node(),e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache)}(this,e,t)}},{key:"removeBlocks",value:function(e){return SM(this,e,[]).removedBlocks}},{key:"replaceBlocks",value:function(e,t){return function(e,t,n){return SM(e,t,n)}(this,e,t)}},{key:"insertInlineContent",value:function(e){var t=VE(e,this.pmSchema,this.schema.styleSchema);!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{updateSelection:!0},o=n._tiptapEditor.state.tr,i="number"==typeof e?{from:e,to:e}:{from:e.from,to:e.to},a=i.from,s=i.to,l=!0,c=!0,u="";if(t.forEach((function(e){e.check(),l&&e.isText&&0===e.marks.length?u+=e.text:l=!1,c=!!c&&e.isBlock})),a===s&&c){var d=o.doc.resolve(a).parent;d.isTextblock&&!d.type.spec.code&&!d.childCount&&(a-=1,s+=1)}l?o.insertText(u,a,s):o.replaceWith(a,s,t),r.updateSelection&&nl(o,o.steps.length-1,-1),n.dispatch(o)}({from:this._tiptapEditor.state.selection.from,to:this._tiptapEditor.state.selection.to},t,this)}},{key:"getActiveStyles",value:function(){var e,t={},n=g_(this._tiptapEditor.state.selection.$to.marks());try{for(n.s();!(e=n.n()).done;){var r=e.value,o=this.schema.styleSchema[r.type.name];o?"boolean"===o.propSchema?t[o.type]=!0:t[o.type]=r.attrs.stringValue:"link"!==r.type.name&&!r.type.spec.blocknoteIgnore&&console.warn("mark not found in styleschema",r.type.name)}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"addStyles",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=b_(n[t],2),o=r[0],i=r[1],a=this.schema.styleSchema[o];if(!a)throw new Error("style ".concat(o," not found in styleSchema"));if("boolean"===a.propSchema)this._tiptapEditor.commands.setMark(o);else{if("string"!==a.propSchema)throw new z_(a.propSchema);this._tiptapEditor.commands.setMark(o,{stringValue:i})}}}},{key:"removeStyles",value:function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];this._tiptapEditor.commands.unsetMark(r)}}},{key:"toggleStyles",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=b_(n[t],2),o=r[0],i=r[1],a=this.schema.styleSchema[o];if(!a)throw new Error("style ".concat(o," not found in styleSchema"));if("boolean"===a.propSchema)this._tiptapEditor.commands.toggleMark(o);else{if("string"!==a.propSchema)throw new z_(a.propSchema);this._tiptapEditor.commands.toggleMark(o,{stringValue:i})}}}},{key:"getSelectedText",value:function(){return this._tiptapEditor.state.doc.textBetween(this._tiptapEditor.state.selection.from,this._tiptapEditor.state.selection.to)}},{key:"getSelectedLinkUrl",value:function(){return this._tiptapEditor.getAttributes("link").href}},{key:"createLink",value:function(e,t){if(""!==e){var n=this._tiptapEditor.state.selection,r=n.from,o=n.to;t||(t=this._tiptapEditor.state.doc.textBetween(r,o));var i=this.pmSchema.mark("link",{href:e});this.dispatch(this._tiptapEditor.state.tr.insertText(t,r,o).addMark(r,r+t.length,i))}}},{key:"canNestBlock",value:function(){return e=q_(this._tiptapEditor.state).bnBlock,null!==this._tiptapEditor.state.doc.resolve(e.beforePos).nodeBefore;var e}},{key:"nestBlock",value:function(){CM(this)}},{key:"canUnnestBlock",value:function(){return e=q_(this._tiptapEditor.state).bnBlock,this._tiptapEditor.state.doc.resolve(e.beforePos).depth>1;var e}},{key:"unnestBlock",value:function(){this._tiptapEditor.commands.liftListItem("blockContainer")}},{key:"moveBlocksUp",value:function(){wM(this)}},{key:"moveBlocksDown",value:function(){xM(this)}},{key:"blocksToHTMLLossy",value:(a=v_(h_().mark((function e(){var t,n=arguments;return h_().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:this.document,e.abrupt("return",QE(this.pmSchema,this).exportBlocks(t,{}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"blocksToFullHTML",value:(i=v_(h_().mark((function e(t){return h_().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rD(this.pmSchema,this).serializeBlocks(t,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"tryParseHTMLToBlocks",value:(o=v_(h_().mark((function e(t){return h_().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",LM(t,this.schema.blockSchema,this.schema.inlineContentSchema,this.schema.styleSchema,this.pmSchema));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"blocksToMarkdownLossy",value:(r=v_(h_().mark((function e(){var t,n=arguments;return h_().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:this.document,e.abrupt("return",TM(t,this.pmSchema,this,{}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"tryParseMarkdownToBlocks",value:(n=v_(h_().mark((function e(t){return h_().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",BM(t,this.schema.blockSchema,this.schema.inlineContentSchema,this.schema.styleSchema,this.pmSchema));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"updateCollaborationUserInfo",value:function(e){if(!this.options.collaboration)throw new Error("Cannot update collaboration user info when collaboration is disabled.");this._tiptapEditor.commands.updateUser(e)}},{key:"onChange",value:function(e){var t=this;if(!this.headless){var n=function(){e(t)};return this._tiptapEditor.on("update",n),function(){t._tiptapEditor.off("update",n)}}}},{key:"onSelectionChange",value:function(e,t){var n=this;if(!this.headless){var r=function(r){r.transaction.getMeta(hy)&&!t||e(n)};return this._tiptapEditor.on("selectionUpdate",r),function(){n._tiptapEditor.off("selectionUpdate",r)}}}},{key:"onCreate",value:function(e){var t=this;return this.on("create",e),function(){t.off("create",e)}}},{key:"getSelectionBoundingBox",value:function(){var e;if(this.prosemirrorView){var t=(null==(e=this.prosemirrorView)?void 0:e.state).selection,n=t.ranges,r=Math.min.apply(Math,y_(n.map((function(e){return e.$from.pos})))),o=Math.max.apply(Math,y_(n.map((function(e){return e.$to.pos}))));if(kl(t)){var i=this.prosemirrorView.nodeDOM(r);if(i)return i.getBoundingClientRect()}return wl(this.prosemirrorView,r,o)}}},{key:"isEmpty",get:function(){var e=this.document;return 0===e.length||1===e.length&&"paragraph"===e[0].type&&0===e[0].content.length}},{key:"openSuggestionMenu",value:function(e,t){var n,r=null==(n=this.prosemirrorView)?void 0:n.state.tr;if(r){var o=t&&t.deleteTriggerCharacter?r.insertText(e):r;this.prosemirrorView.focus(),this.prosemirrorView.dispatch(o.scrollIntoView().setMeta(this.suggestionMenus.plugin,{triggerCharacter:e,deleteTriggerCharacter:(null==t?void 0:t.deleteTriggerCharacter)||!1,ignoreQueryLength:(null==t?void 0:t.ignoreQueryLength)||!1}))}}},{key:"getForceSelectionVisible",value:function(){return this.showSelectionPlugin.getEnabled()}},{key:"setForceSelectionVisible",value:function(e){this.showSelectionPlugin.setEnabled(e)}}],[{key:"create",value:function(){return new t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}}]);var n,r,o,i,a}(nA);function pO(){return hO.apply(this,arguments)}function hO(){return(hO=v_(h_().mark((function e(){return h_().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uO||(uO=v_(h_().mark((function e(){var t,n,r,o,i,s;return h_().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([a.e(8517).then(a.bind(a,8517)),a.e(3274).then(a.t.bind(a,3274,17))]);case 2:return t=e.sent,n=b_(t,2),r=n[0],o=n[1],i="default"in r?r.default:r,s="default"in o?o.default:o,e.next=10,i.init({data:s});case 10:return e.abrupt("return",{emojiMart:i,emojiData:s});case 11:case"end":return e.stop()}}),e)})))()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mO(e,t){return vO.apply(this,arguments)}function vO(){return vO=v_(h_().mark((function e(t,n){var r,o,i;return h_().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(iM("text",t)){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,pO();case 4:if(r=e.sent,o=r.emojiData,i=r.emojiMart,""!==n.trim()){e.next=11;break}e.t0=Object.values(o.emojis),e.next=14;break;case 11:return e.next=13,i.SearchIndex.search(n);case 13:e.t0=e.sent;case 14:return e.abrupt("return",e.t0.map((function(e){return{id:e.skins[0].native,onItemClick:function(){return t.insertInlineContent(e.skins[0].native+" ")}}})));case 15:case"end":return e.stop()}}),e)}))),vO.apply(this,arguments)}function gO(){return"undefined"!=typeof window}function yO(e){return wO(e)?(e.nodeName||"").toLowerCase():"#document"}function bO(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function kO(e){var t;return null==(t=(wO(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function wO(e){return!!gO()&&(e instanceof Node||e instanceof bO(e).Node)}function xO(e){return!!gO()&&(e instanceof Element||e instanceof bO(e).Element)}function CO(e){return!!gO()&&(e instanceof HTMLElement||e instanceof bO(e).HTMLElement)}function SO(e){return!(!gO()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof bO(e).ShadowRoot)}function _O(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=TO(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function EO(e){return["table","td","th"].includes(yO(e))}function DO(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(e){return!1}}))}function MO(e){const t=AO(),n=xO(e)?TO(e):e;return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function AO(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function OO(e){return["html","body","#document"].includes(yO(e))}function TO(e){return bO(e).getComputedStyle(e)}function jO(e){return xO(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function NO(e){if("html"===yO(e))return e;const t=e.assignedSlot||e.parentNode||SO(e)&&e.host||kO(e);return SO(t)?t.host:t}function PO(e){const t=NO(e);return OO(t)?e.ownerDocument?e.ownerDocument.body:e.body:CO(t)&&_O(t)?t:PO(t)}function LO(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const o=PO(e),i=o===(null==(r=e.ownerDocument)?void 0:r.body),a=bO(o);if(i){const e=RO(a);return t.concat(a,a.visualViewport||[],_O(o)?o:[],e&&n?LO(e):[])}return t.concat(o,LO(o,[],n))}function RO(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function IO(e){let t=e.activeElement;for(;null!=(null==(n=t)||null==(n=n.shadowRoot)?void 0:n.activeElement);){var n;t=t.shadowRoot.activeElement}return t}function BO(e,t){if(!e||!t)return!1;const n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&SO(n)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function FO(){const e=navigator.userAgentData;return null!=e&&e.platform?e.platform:navigator.platform}function HO(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map((e=>{let{brand:t,version:n}=e;return t+"/"+n})).join(" "):navigator.userAgent}function zO(){return/apple/i.test(navigator.vendor)}function VO(){const e=/android/i;return e.test(FO())||e.test(HO())}function $O(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function UO(e){return(null==e?void 0:e.ownerDocument)||document}function GO(e,t){if(null==t)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return null!=n.target&&t.contains(n.target)}function WO(e){return"composedPath"in e?e.composedPath()[0]:e.target}var qO=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"].join(","),KO="undefined"==typeof Element,ZO=KO?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,JO=!KO&&Element.prototype.getRootNode?function(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null==e?void 0:e.ownerDocument},XO=function e(t,n){var r;void 0===n&&(n=!0);var o=null==t||null===(r=t.getAttribute)||void 0===r?void 0:r.call(t,"inert");return""===o||"true"===o||n&&t&&e(t.parentNode)},YO=function e(t,n,r){for(var o=[],i=Array.from(t);i.length;){var a=i.shift();if(!XO(a,!1))if("SLOT"===a.tagName){var s=a.assignedElements(),l=e(s.length?s:a.children,!0,r);r.flatten?o.push.apply(o,l):o.push({scopeParent:a,candidates:l})}else{ZO.call(a,qO)&&r.filter(a)&&(n||!t.includes(a))&&o.push(a);var c=a.shadowRoot||"function"==typeof r.getShadowRoot&&r.getShadowRoot(a),u=!XO(c,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(c&&u){var d=e(!0===c?a.children:c.children,!0,r);r.flatten?o.push.apply(o,d):o.push({scopeParent:a,candidates:d})}else i.unshift.apply(i,a.children)}}return o},QO=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},eT=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||function(e){var t,n=null==e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===n||"true"===n}(e))&&!QO(e)?0:e.tabIndex},tT=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},nT=function(e){return"INPUT"===e.tagName},rT=function(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return 0===n&&0===r},oT=function(e,t){return!(t.disabled||XO(t)||function(e){return nT(e)&&"hidden"===e.type}(t)||function(e,t){var n=t.displayCheck,r=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var o=ZO.call(e,"details>summary:first-of-type")?e.parentElement:e;if(ZO.call(o,"details:not([open]) *"))return!0;if(n&&"full"!==n&&"legacy-full"!==n){if("non-zero-area"===n)return rT(e)}else{if("function"==typeof r){for(var i=e;e;){var a=e.parentElement,s=JO(e);if(a&&!a.shadowRoot&&!0===r(a))return rT(e);e=e.assignedSlot?e.assignedSlot:a||s===e.ownerDocument?a:s.host}e=i}if(function(e){var t,n,r,o,i=e&&JO(e),a=null===(t=i)||void 0===t?void 0:t.host,s=!1;if(i&&i!==e)for(s=!!(null!==(n=a)&&void 0!==n&&null!==(r=n.ownerDocument)&&void 0!==r&&r.contains(a)||null!=e&&null!==(o=e.ownerDocument)&&void 0!==o&&o.contains(e));!s&&a;){var l,c,u;s=!(null===(c=a=null===(l=i=JO(a))||void 0===l?void 0:l.host)||void 0===c||null===(u=c.ownerDocument)||void 0===u||!u.contains(a))}return s}(e))return!e.getClientRects().length;if("legacy-full"!==n)return!0}return!1}(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}))}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var r=t.children.item(n);if("LEGEND"===r.tagName)return!!ZO.call(t,"fieldset[disabled] *")||!r.contains(e)}return!0}t=t.parentElement}return!1}(t))},iT=function(e,t){return!(function(e){return function(e){return nT(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,n=e.form||JO(e),r=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=r(window.CSS.escape(e.name));else try{t=r(e.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message),!1}var o=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(t,e.form);return!o||o===e}(e)}(t)||eT(t)<0||!oT(e,t))},aT=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},sT=function e(t){var n=[],r=[];return t.forEach((function(t,o){var i=!!t.scopeParent,a=i?t.scopeParent:t,s=function(e,t){var n=eT(e);return n<0&&t&&!QO(e)?0:n}(a,i),l=i?e(t.candidates):a;0===s?i?n.push.apply(n,l):n.push(a):r.push({documentOrder:o,tabIndex:s,item:t,isScope:i,content:l})})),r.sort(tT).reduce((function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e}),[]).concat(n)},lT=function(e,t){var n;return n=(t=t||{}).getShadowRoot?YO([e],t.includeContainer,{filter:iT.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:aT}):function(e,t,n){if(XO(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(qO));return t&&ZO.call(e,qO)&&r.unshift(e),r.filter(n)}(e,t.includeContainer,iT.bind(null,t)),sT(n)},cT=a(2326);const uT=Math.min,dT=Math.max,fT=Math.round,pT=Math.floor,hT=e=>({x:e,y:e}),mT={left:"right",right:"left",bottom:"top",top:"bottom"},vT={start:"end",end:"start"};function gT(e,t,n){return dT(e,uT(t,n))}function yT(e,t){return"function"==typeof e?e(t):e}function bT(e){return e.split("-")[0]}function kT(e){return e.split("-")[1]}function wT(e){return"x"===e?"y":"x"}function xT(e){return"y"===e?"height":"width"}function CT(e){return["top","bottom"].includes(bT(e))?"y":"x"}function ST(e){return wT(CT(e))}function _T(e){return e.replace(/start|end/g,(e=>vT[e]))}function ET(e){return e.replace(/left|right|bottom|top/g,(e=>mT[e]))}function DT(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function MT(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function AT(e,t,n){let{reference:r,floating:o}=e;const i=CT(t),a=ST(t),s=xT(a),l=bT(t),c="y"===i,u=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,f=r[s]/2-o[s]/2;let p;switch(l){case"top":p={x:u,y:r.y-o.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-o.width,y:d};break;default:p={x:r.x,y:r.y}}switch(kT(t)){case"start":p[a]-=f*(n&&c?-1:1);break;case"end":p[a]+=f*(n&&c?-1:1)}return p}async function OT(e,t){var n;void 0===t&&(t={});const{x:r,y:o,platform:i,rects:a,elements:s,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=yT(t,e),h=DT(p),m=s[f?"floating"===d?"reference":"floating":d],v=MT(await i.getClippingRect({element:null==(n=await(null==i.isElement?void 0:i.isElement(m)))||n?m:m.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(s.floating)),boundary:c,rootBoundary:u,strategy:l})),g="floating"===d?{x:r,y:o,width:a.floating.width,height:a.floating.height}:a.reference,y=await(null==i.getOffsetParent?void 0:i.getOffsetParent(s.floating)),b=await(null==i.isElement?void 0:i.isElement(y))&&await(null==i.getScale?void 0:i.getScale(y))||{x:1,y:1},k=MT(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:g,offsetParent:y,strategy:l}):g);return{top:(v.top-k.top+h.top)/b.y,bottom:(k.bottom-v.bottom+h.bottom)/b.y,left:(v.left-k.left+h.left)/b.x,right:(k.right-v.right+h.right)/b.x}}function TT(e){const t=uT(...e.map((e=>e.left))),n=uT(...e.map((e=>e.top)));return{x:t,y:n,width:dT(...e.map((e=>e.right)))-t,height:dT(...e.map((e=>e.bottom)))-n}}function jT(e){const t=TO(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=CO(e),i=o?e.offsetWidth:n,a=o?e.offsetHeight:r,s=fT(n)!==i||fT(r)!==a;return s&&(n=i,r=a),{width:n,height:r,$:s}}function NT(e){return xO(e)?e:e.contextElement}function PT(e){const t=NT(e);if(!CO(t))return hT(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:i}=jT(t);let a=(i?fT(n.width):n.width)/r,s=(i?fT(n.height):n.height)/o;return a&&Number.isFinite(a)||(a=1),s&&Number.isFinite(s)||(s=1),{x:a,y:s}}const LT=hT(0);function RT(e){const t=bO(e);return AO()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:LT}function IT(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const o=e.getBoundingClientRect(),i=NT(e);let a=hT(1);t&&(r?xO(r)&&(a=PT(r)):a=PT(e));const s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==bO(e))&&t}(i,n,r)?RT(i):hT(0);let l=(o.left+s.x)/a.x,c=(o.top+s.y)/a.y,u=o.width/a.x,d=o.height/a.y;if(i){const e=bO(i),t=r&&xO(r)?bO(r):r;let n=e,o=RO(n);for(;o&&r&&t!==n;){const e=PT(o),t=o.getBoundingClientRect(),r=TO(o),i=t.left+(o.clientLeft+parseFloat(r.paddingLeft))*e.x,a=t.top+(o.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=i,c+=a,n=bO(o),o=RO(n)}}return MT({width:u,height:d,x:l,y:c})}function BT(e,t){const n=jO(e).scrollLeft;return t?t.left+n:IT(kO(e)).left+n}function FT(e,t,n){void 0===n&&(n=!1);const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:BT(e,r)),y:r.top+t.scrollTop}}function HT(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=bO(e),r=kO(e),o=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,s=0,l=0;if(o){i=o.width,a=o.height;const e=AO();(!e||e&&"fixed"===t)&&(s=o.offsetLeft,l=o.offsetTop)}return{width:i,height:a,x:s,y:l}}(e,n);else if("document"===t)r=function(e){const t=kO(e),n=jO(e),r=e.ownerDocument.body,o=dT(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=dT(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+BT(e);const s=-n.scrollTop;return"rtl"===TO(r).direction&&(a+=dT(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:a,y:s}}(kO(e));else if(xO(t))r=function(e,t){const n=IT(e,!0,"fixed"===t),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=CO(e)?PT(e):hT(1);return{width:e.clientWidth*i.x,height:e.clientHeight*i.y,x:o*i.x,y:r*i.y}}(t,n);else{const n=RT(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return MT(r)}function zT(e,t){const n=NO(e);return!(n===t||!xO(n)||OO(n))&&("fixed"===TO(n).position||zT(n,t))}function VT(e,t,n){const r=CO(t),o=kO(t),i="fixed"===n,a=IT(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const l=hT(0);if(r||!r&&!i)if(("body"!==yO(t)||_O(o))&&(s=jO(t)),r){const e=IT(t,!0,i,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else o&&(l.x=BT(o));const c=!o||r||i?hT(0):FT(o,s);return{x:a.left+s.scrollLeft-l.x-c.x,y:a.top+s.scrollTop-l.y-c.y,width:a.width,height:a.height}}function $T(e){return"static"===TO(e).position}function UT(e,t){if(!CO(e)||"fixed"===TO(e).position)return null;if(t)return t(e);let n=e.offsetParent;return kO(e)===n&&(n=n.ownerDocument.body),n}function GT(e,t){const n=bO(e);if(DO(e))return n;if(!CO(e)){let t=NO(e);for(;t&&!OO(t);){if(xO(t)&&!$T(t))return t;t=NO(t)}return n}let r=UT(e,t);for(;r&&EO(r)&&$T(r);)r=UT(r,t);return r&&OO(r)&&$T(r)&&!MO(r)?n:r||function(e){let t=NO(e);for(;CO(t)&&!OO(t);){if(MO(t))return t;if(DO(t))return null;t=NO(t)}return null}(e)||n}const WT={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const i="fixed"===o,a=kO(r),s=!!t&&DO(t.floating);if(r===a||s&&i)return n;let l={scrollLeft:0,scrollTop:0},c=hT(1);const u=hT(0),d=CO(r);if((d||!d&&!i)&&(("body"!==yO(r)||_O(a))&&(l=jO(r)),CO(r))){const e=IT(r);c=PT(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const f=!a||d||i?hT(0):FT(a,l,!0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}},getDocumentElement:kO,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i="clippingAncestors"===n?DO(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=LO(e,[],!1).filter((e=>xO(e)&&"body"!==yO(e))),o=null;const i="fixed"===TO(e).position;let a=i?NO(e):e;for(;xO(a)&&!OO(a);){const t=TO(a),n=MO(a);n||"fixed"!==t.position||(o=null),(i?!n&&!o:!n&&"static"===t.position&&o&&["absolute","fixed"].includes(o.position)||_O(a)&&!n&&zT(e,a))?r=r.filter((e=>e!==a)):o=t,a=NO(a)}return t.set(e,r),r}(t,this._c):[].concat(n),a=[...i,r],s=a[0],l=a.reduce(((e,n)=>{const r=HT(t,n,o);return e.top=dT(r.top,e.top),e.right=uT(r.right,e.right),e.bottom=uT(r.bottom,e.bottom),e.left=dT(r.left,e.left),e}),HT(t,s,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:GT,getElementRects:async function(e){const t=this.getOffsetParent||GT,n=this.getDimensions,r=await n(e.floating);return{reference:VT(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=jT(e);return{width:t,height:n}},getScale:PT,isElement:xO,isRTL:function(e){return"rtl"===TO(e).direction}};const qT=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:i,placement:a,middlewareData:s}=t,l=await async function(e,t){const{placement:n,platform:r,elements:o}=e,i=await(null==r.isRTL?void 0:r.isRTL(o.floating)),a=bT(n),s=kT(n),l="y"===CT(n),c=["left","top"].includes(a)?-1:1,u=i&&l?-1:1,d=yT(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:h}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&"number"==typeof h&&(p="end"===s?-1*h:h),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}(t,e);return a===(null==(n=s.offset)?void 0:n.placement)&&null!=(r=s.arrow)&&r.alignmentOffset?{}:{x:o+l.x,y:i+l.y,data:{...l,placement:a}}}}},KT=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:s={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=yT(e,t),c={x:n,y:r},u=await OT(t,l),d=CT(bT(o)),f=wT(d);let p=c[f],h=c[d];if(i){const e="y"===f?"bottom":"right";p=gT(p+u["y"===f?"top":"left"],p,p-u[e])}if(a){const e="y"===d?"bottom":"right";h=gT(h+u["y"===d?"top":"left"],h,h-u[e])}const m=s.fn({...t,[f]:p,[d]:h});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:i,[d]:a}}}}}},ZT=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:i,rects:a,initialPlacement:s,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:m=!0,...v}=yT(e,t);if(null!=(n=i.arrow)&&n.alignmentOffset)return{};const g=bT(o),y=CT(s),b=bT(s)===s,k=await(null==l.isRTL?void 0:l.isRTL(c.floating)),w=f||(b||!m?[ET(s)]:function(e){const t=ET(e);return[_T(e),t,_T(t)]}(s)),x="none"!==h;!f&&x&&w.push(...function(e,t,n,r){const o=kT(e);let i=function(e,t,n){const r=["left","right"],o=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?i:a;default:return[]}}(bT(e),"start"===n,r);return o&&(i=i.map((e=>e+"-"+o)),t&&(i=i.concat(i.map(_T)))),i}(s,m,h,k));const C=[s,...w],S=await OT(t,v),_=[];let E=(null==(r=i.flip)?void 0:r.overflows)||[];if(u&&_.push(S[g]),d){const e=function(e,t,n){void 0===n&&(n=!1);const r=kT(e),o=ST(e),i=xT(o);let a="x"===o?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=ET(a)),[a,ET(a)]}(o,a,k);_.push(S[e[0]],S[e[1]])}if(E=[...E,{placement:o,overflows:_}],!_.every((e=>e<=0))){var D,M;const e=((null==(D=i.flip)?void 0:D.index)||0)+1,t=C[e];if(t)return{data:{index:e,overflows:E},reset:{placement:t}};let n=null==(M=E.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:M.placement;if(!n)switch(p){case"bestFit":{var A;const e=null==(A=E.filter((e=>{if(x){const t=CT(e.placement);return t===y||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:A[0];e&&(n=e);break}case"initialPlacement":n=s}if(o!==n)return{reset:{placement:n}}}return{}}}},JT=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:i,platform:a,elements:s}=t,{apply:l=()=>{},...c}=yT(e,t),u=await OT(t,c),d=bT(o),f=kT(o),p="y"===CT(o),{width:h,height:m}=i.floating;let v,g;"top"===d||"bottom"===d?(v=d,g=f===(await(null==a.isRTL?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(g=d,v="end"===f?"top":"bottom");const y=m-u.top-u.bottom,b=h-u.left-u.right,k=uT(m-u[v],y),w=uT(h-u[g],b),x=!t.middlewareData.shift;let C=k,S=w;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(S=b),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(C=y),x&&!f){const e=dT(u.left,0),t=dT(u.right,0),n=dT(u.top,0),r=dT(u.bottom,0);p?S=h-2*(0!==e||0!==t?e+t:dT(u.left,u.right)):C=m-2*(0!==n||0!==r?n+r:dT(u.top,u.bottom))}await l({...t,availableWidth:S,availableHeight:C});const _=await a.getDimensions(s.floating);return h!==_.width||m!==_.height?{reset:{rects:!0}}:{}}}},XT=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:i,platform:a,elements:s,middlewareData:l}=t,{element:c,padding:u=0}=yT(e,t)||{};if(null==c)return{};const d=DT(u),f={x:n,y:r},p=ST(o),h=xT(p),m=await a.getDimensions(c),v="y"===p,g=v?"top":"left",y=v?"bottom":"right",b=v?"clientHeight":"clientWidth",k=i.reference[h]+i.reference[p]-f[p]-i.floating[h],w=f[p]-i.reference[p],x=await(null==a.getOffsetParent?void 0:a.getOffsetParent(c));let C=x?x[b]:0;C&&await(null==a.isElement?void 0:a.isElement(x))||(C=s.floating[b]||i.floating[h]);const S=k/2-w/2,_=C/2-m[h]/2-1,E=uT(d[g],_),D=uT(d[y],_),M=E,A=C-m[h]-D,O=C/2-m[h]/2+S,T=gT(M,O,A),j=!l.arrow&&null!=kT(o)&&O!==T&&i.reference[h]/2-(O<M?E:D)-m[h]/2<0,N=j?O<M?O-M:O-A:0;return{[p]:f[p]+N,data:{[p]:T,centerOffset:O-T-N,...j&&{alignmentOffset:N}},reset:j}}}),YT=function(e){return void 0===e&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:o,platform:i,strategy:a}=t,{padding:s=2,x:l,y:c}=yT(e,t),u=Array.from(await(null==i.getClientRects?void 0:i.getClientRects(r.reference))||[]),d=function(e){const t=e.slice().sort(((e,t)=>e.y-t.y)),n=[];let r=null;for(let e=0;e<t.length;e++){const o=t[e];!r||o.y-r.y>r.height/2?n.push([o]):n[n.length-1].push(o),r=o}return n.map((e=>MT(TT(e))))}(u),f=MT(TT(u)),p=DT(s),h=await i.getElementRects({reference:{getBoundingClientRect:function(){if(2===d.length&&d[0].left>d[1].right&&null!=l&&null!=c)return d.find((e=>l>e.left-p.left&&l<e.right+p.right&&c>e.top-p.top&&c<e.bottom+p.bottom))||f;if(d.length>=2){if("y"===CT(n)){const e=d[0],t=d[d.length-1],r="top"===bT(n),o=e.top,i=t.bottom,a=r?e.left:t.left,s=r?e.right:t.right;return{top:o,bottom:i,left:a,right:s,width:s-a,height:i-o,x:a,y:o}}const e="left"===bT(n),t=dT(...d.map((e=>e.right))),r=uT(...d.map((e=>e.left))),o=d.filter((n=>e?n.left===r:n.right===t)),i=o[0].top,a=o[o.length-1].bottom;return{top:i,bottom:a,left:r,right:t,width:t-r,height:a-i,x:r,y:i}}return f}},floating:r.floating,strategy:a});return o.reference.x!==h.reference.x||o.reference.y!==h.reference.y||o.reference.width!==h.reference.width||o.reference.height!==h.reference.height?{reset:{rects:h}}:{}}}},QT=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:i,middlewareData:a}=t,{offset:s=0,mainAxis:l=!0,crossAxis:c=!0}=yT(e,t),u={x:n,y:r},d=CT(o),f=wT(d);let p=u[f],h=u[d];const m=yT(s,t),v="number"==typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const e="y"===f?"height":"width",t=i.reference[f]-i.floating[e]+v.mainAxis,n=i.reference[f]+i.reference[e]-v.mainAxis;p<t?p=t:p>n&&(p=n)}if(c){var g,y;const e="y"===f?"width":"height",t=["top","left"].includes(bT(o)),n=i.reference[d]-i.floating[e]+(t&&(null==(g=a.offset)?void 0:g[d])||0)+(t?0:v.crossAxis),r=i.reference[d]+i.reference[e]+(t?0:(null==(y=a.offset)?void 0:y[d])||0)-(t?v.crossAxis:0);h<n?h=n:h>r&&(h=r)}return{[f]:p,[d]:h}}}},ej=(e,t,n)=>{const r=new Map,o={platform:WT,...n},i={...o.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:a}=n,s=i.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(t));let c=await a.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:d}=AT(c,r,l),f=r,p={},h=0;for(let n=0;n<s.length;n++){const{name:i,fn:m}=s[n],{x:v,y:g,data:y,reset:b}=await m({x:u,y:d,initialPlacement:r,placement:f,strategy:o,middlewareData:p,rects:c,platform:a,elements:{reference:e,floating:t}});u=null!=v?v:u,d=null!=g?g:d,p={...p,[i]:{...p[i],...y}},b&&h<=50&&(h++,"object"==typeof b&&(b.placement&&(f=b.placement),b.rects&&(c=!0===b.rects?await a.getElementRects({reference:e,floating:t,strategy:o}):b.rects),({x:u,y:d}=AT(c,f,l))),n=-1)}return{x:u,y:d,placement:f,strategy:o,middlewareData:p}})(e,t,{...o,platform:i})};var tj="undefined"!=typeof document?f.useLayoutEffect:f.useEffect;function nj(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!=r--;)if(!nj(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;0!=r--;){const n=o[r];if(!("_owner"===n&&e.$$typeof||nj(e[n],t[n])))return!1}return!0}return e!=e&&t!=t}function rj(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function oj(e,t){const n=rj(e);return Math.round(t*n)/n}function ij(e){const t=f.useRef(e);return tj((()=>{t.current=e})),t}const aj=e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"==typeof e?e(t):e;return n&&(o=n,{}.hasOwnProperty.call(o,"current"))?null!=n.current?XT({element:n.current,padding:r}).fn(t):{}:n?XT({element:n,padding:r}).fn(t):{};var o}}),sj=(e,t)=>({...qT(e),options:[e,t]}),lj=(e,t)=>({...KT(e),options:[e,t]}),cj=(e,t)=>({...QT(e),options:[e,t]}),uj=(e,t)=>({...ZT(e),options:[e,t]}),dj=(e,t)=>({...JT(e),options:[e,t]}),fj=(e,t)=>({...YT(e),options:[e,t]}),pj=(e,t)=>({...aj(e),options:[e,t]}),hj={...p},mj=hj.useInsertionEffect||(e=>e());function vj(e){const t=f.useRef((()=>{}));return mj((()=>{t.current=e})),f.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}var gj="undefined"!=typeof document?f.useLayoutEffect:f.useEffect;function yj(){return yj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yj.apply(this,arguments)}let bj=!1,kj=0;const wj=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+kj++,xj=hj.useId||function(){const[e,t]=f.useState((()=>bj?wj():void 0));return gj((()=>{null==e&&t(wj())}),[]),f.useEffect((()=>{bj=!0}),[]),e};const Cj=f.createContext(null),Sj=f.createContext(null),_j=()=>{var e;return(null==(e=f.useContext(Cj))?void 0:e.id)||null},Ej=()=>f.useContext(Sj);function Dj(e){return"data-floating-ui-"+e}function Mj(e){const t=(0,f.useRef)(e);return gj((()=>{t.current=e})),t}const Aj=Dj("safe-polygon");function Oj(e,t,n){return n&&!$O(n)?0:"number"==typeof e?e:null==e?void 0:e[t]}function Tj(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,dataRef:o,events:i,elements:a}=e,{enabled:s=!0,delay:l=0,handleClose:c=null,mouseOnly:u=!1,restMs:d=0,move:p=!0}=t,h=Ej(),m=_j(),v=Mj(c),g=Mj(l),y=Mj(n),b=f.useRef(),k=f.useRef(-1),w=f.useRef(),x=f.useRef(-1),C=f.useRef(!0),S=f.useRef(!1),_=f.useRef((()=>{})),E=f.useRef(!1),D=f.useCallback((()=>{var e;const t=null==(e=o.current.openEvent)?void 0:e.type;return(null==t?void 0:t.includes("mouse"))&&"mousedown"!==t}),[o]);f.useEffect((()=>{if(s)return i.on("openchange",e),()=>{i.off("openchange",e)};function e(e){let{open:t}=e;t||(clearTimeout(k.current),clearTimeout(x.current),C.current=!0,E.current=!1)}}),[s,i]),f.useEffect((()=>{if(!s)return;if(!v.current)return;if(!n)return;function e(e){D()&&r(!1,e,"hover")}const t=UO(a.floating).documentElement;return t.addEventListener("mouseleave",e),()=>{t.removeEventListener("mouseleave",e)}}),[a.floating,n,r,s,v,D]);const M=f.useCallback((function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="hover");const o=Oj(g.current,"close",b.current);o&&!w.current?(clearTimeout(k.current),k.current=window.setTimeout((()=>r(!1,e,n)),o)):t&&(clearTimeout(k.current),r(!1,e,n))}),[g,r]),A=vj((()=>{_.current(),w.current=void 0})),O=vj((()=>{if(S.current){const e=UO(a.floating).body;e.style.pointerEvents="",e.removeAttribute(Aj),S.current=!1}})),T=vj((()=>!!o.current.openEvent&&["click","mousedown"].includes(o.current.openEvent.type)));f.useEffect((()=>{if(s&&xO(a.domReference)){var e;const r=a.domReference;return n&&r.addEventListener("mouseleave",l),null==(e=a.floating)||e.addEventListener("mouseleave",l),p&&r.addEventListener("mousemove",t,{once:!0}),r.addEventListener("mouseenter",t),r.addEventListener("mouseleave",i),()=>{var e;n&&r.removeEventListener("mouseleave",l),null==(e=a.floating)||e.removeEventListener("mouseleave",l),p&&r.removeEventListener("mousemove",t),r.removeEventListener("mouseenter",t),r.removeEventListener("mouseleave",i)}}function t(e){if(clearTimeout(k.current),C.current=!1,u&&!$O(b.current)||d>0&&!Oj(g.current,"open"))return;const t=Oj(g.current,"open",b.current);t?k.current=window.setTimeout((()=>{y.current||r(!0,e,"hover")}),t):n||r(!0,e,"hover")}function i(e){if(T())return;_.current();const t=UO(a.floating);if(clearTimeout(x.current),E.current=!1,v.current&&o.current.floatingContext){n||clearTimeout(k.current),w.current=v.current({...o.current.floatingContext,tree:h,x:e.clientX,y:e.clientY,onClose(){O(),A(),T()||M(e,!0,"safe-polygon")}});const r=w.current;return t.addEventListener("mousemove",r),void(_.current=()=>{t.removeEventListener("mousemove",r)})}("touch"!==b.current||!BO(a.floating,e.relatedTarget))&&M(e)}function l(e){T()||o.current.floatingContext&&(null==v.current||v.current({...o.current.floatingContext,tree:h,x:e.clientX,y:e.clientY,onClose(){O(),A(),T()||M(e)}})(e))}}),[a,s,e,u,d,p,M,A,O,r,n,y,h,g,v,o,T]),gj((()=>{var e;if(s&&n&&null!=(e=v.current)&&e.__options.blockPointerEvents&&D()){S.current=!0;const e=a.floating;if(xO(a.domReference)&&e){var t;const n=UO(a.floating).body;n.setAttribute(Aj,"");const r=a.domReference,o=null==h||null==(t=h.nodesRef.current.find((e=>e.id===m)))||null==(t=t.context)?void 0:t.elements.floating;return o&&(o.style.pointerEvents=""),n.style.pointerEvents="none",r.style.pointerEvents="auto",e.style.pointerEvents="auto",()=>{n.style.pointerEvents="",r.style.pointerEvents="",e.style.pointerEvents=""}}}}),[s,n,m,a,h,v,D]),gj((()=>{n||(b.current=void 0,E.current=!1,A(),O())}),[n,A,O]),f.useEffect((()=>()=>{A(),clearTimeout(k.current),clearTimeout(x.current),O()}),[s,a.domReference,A,O]);const j=f.useMemo((()=>{function e(e){b.current=e.pointerType}return{onPointerDown:e,onPointerEnter:e,onMouseMove(e){const{nativeEvent:t}=e;function o(){C.current||y.current||r(!0,t,"hover")}u&&!$O(b.current)||n||0===d||E.current&&e.movementX**2+e.movementY**2<2||(clearTimeout(x.current),"touch"===b.current?o():(E.current=!0,x.current=window.setTimeout(o,d)))}}}),[u,r,n,y,d]),N=f.useMemo((()=>({onMouseEnter(){clearTimeout(k.current)},onMouseLeave(e){T()||M(e.nativeEvent,!1)}})),[M,T]);return f.useMemo((()=>s?{reference:j,floating:N}:{}),[s,j,N])}const jj=()=>{},Nj=f.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:jj,setState:jj,isInstantPhase:!1});function Pj(e){const{children:t,delay:n,timeoutMs:r=0}=e,[o,i]=f.useReducer(((e,t)=>({...e,...t})),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),a=f.useRef(null),s=f.useCallback((e=>{i({currentId:e})}),[]);return gj((()=>{o.currentId?null===a.current?a.current=o.currentId:o.isInstantPhase||i({isInstantPhase:!0}):(o.isInstantPhase&&i({isInstantPhase:!1}),a.current=null)}),[o.currentId,o.isInstantPhase]),f.createElement(Nj.Provider,{value:f.useMemo((()=>({...o,setState:i,setCurrentId:s})),[o,s])},t)}function Lj(e,t){let n=e.filter((e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)})),r=n;for(;r.length;)r=e.filter((e=>{var t;return null==(t=r)?void 0:t.some((t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)}))})),n=n.concat(r);return n}const Rj=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function Ij(e,t){const n=lT(e,Rj());"prev"===t&&n.reverse();const r=n.indexOf(IO(UO(e)));return n.slice(r+1)[0]}function Bj(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!BO(n,r)}function Fj(e){lT(e,Rj()).forEach((e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")}))}function Hj(e){e.querySelectorAll("[data-tabindex]").forEach((e=>{const t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}))}const zj={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};function Vj(e){"Tab"===e.key&&(e.target,clearTimeout(void 0))}const $j=f.forwardRef((function(e,t){const[n,r]=f.useState();gj((()=>(zO()&&r("button"),document.addEventListener("keydown",Vj),()=>{document.removeEventListener("keydown",Vj)})),[]);const o={ref:t,tabIndex:0,role:n,"aria-hidden":!n||void 0,[Dj("focus-guard")]:"",style:zj};return f.createElement("span",yj({},e,o))})),Uj=f.createContext(null),Gj=Dj("portal");function Wj(e){const{children:t,id:n,root:r,preserveTabOrder:o=!0}=e,i=function(e){void 0===e&&(e={});const{id:t,root:n}=e,r=xj(),o=qj(),[i,a]=f.useState(null),s=f.useRef(null);return gj((()=>()=>{null==i||i.remove(),queueMicrotask((()=>{s.current=null}))}),[i]),gj((()=>{if(!r)return;if(s.current)return;const e=t?document.getElementById(t):null;if(!e)return;const n=document.createElement("div");n.id=r,n.setAttribute(Gj,""),e.appendChild(n),s.current=n,a(n)}),[t,r]),gj((()=>{if(null===n)return;if(!r)return;if(s.current)return;let e=n||(null==o?void 0:o.portalNode);e&&!xO(e)&&(e=e.current),e=e||document.body;let i=null;t&&(i=document.createElement("div"),i.id=t,e.appendChild(i));const l=document.createElement("div");l.id=r,l.setAttribute(Gj,""),e=i||e,e.appendChild(l),s.current=l,a(l)}),[t,n,r,o]),i}({id:n,root:r}),[a,s]=f.useState(null),l=f.useRef(null),c=f.useRef(null),u=f.useRef(null),d=f.useRef(null),p=null==a?void 0:a.modal,h=null==a?void 0:a.open,m=!!a&&!a.modal&&a.open&&o&&!(!r&&!i);return f.useEffect((()=>{if(i&&o&&!p)return i.addEventListener("focusin",e,!0),i.addEventListener("focusout",e,!0),()=>{i.removeEventListener("focusin",e,!0),i.removeEventListener("focusout",e,!0)};function e(e){i&&Bj(e)&&("focusin"===e.type?Hj:Fj)(i)}}),[i,o,p]),f.useEffect((()=>{i&&(h||Hj(i))}),[h,i]),f.createElement(Uj.Provider,{value:f.useMemo((()=>({preserveTabOrder:o,beforeOutsideRef:l,afterOutsideRef:c,beforeInsideRef:u,afterInsideRef:d,portalNode:i,setFocusManagerState:s})),[o,i])},m&&i&&f.createElement($j,{"data-type":"outside",ref:l,onFocus:e=>{if(Bj(e,i)){var t;null==(t=u.current)||t.focus()}else{const e=Ij(document.body,"prev")||(null==a?void 0:a.refs.domReference.current);null==e||e.focus()}}}),m&&i&&f.createElement("span",{"aria-owns":i.id,style:zj}),i&&cT.createPortal(t,i),m&&i&&f.createElement($j,{"data-type":"outside",ref:c,onFocus:e=>{if(Bj(e,i)){var t;null==(t=d.current)||t.focus()}else{const t=Ij(document.body,"next")||(null==a?void 0:a.refs.domReference.current);null==t||t.focus(),(null==a?void 0:a.closeOnFocusOut)&&(null==a||a.onOpenChange(!1,e.nativeEvent,"focus-out"))}}}))}const qj=()=>f.useContext(Uj),Kj="data-floating-ui-focusable",Zj={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Jj={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Xj=e=>{var t,n;return{escapeKey:"boolean"==typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"==typeof e?e:null==(n=null==e?void 0:e.outsidePress)||n}};function Yj(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,elements:o,dataRef:i}=e,{enabled:a=!0,escapeKey:s=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:u=!1,referencePressEvent:d="pointerdown",ancestorScroll:p=!1,bubbles:h,capture:m}=t,v=Ej(),g=vj("function"==typeof l?l:()=>!1),y="function"==typeof l?g:l,b=f.useRef(!1),k=f.useRef(!1),{escapeKey:w,outsidePress:x}=Xj(h),{escapeKey:C,outsidePress:S}=Xj(m),_=f.useRef(!1),E=vj((e=>{var t;if(!n||!a||!s||"Escape"!==e.key)return;if(_.current)return;const o=null==(t=i.current.floatingContext)?void 0:t.nodeId,l=v?Lj(v.nodesRef.current,o):[];if(!w&&(e.stopPropagation(),l.length>0)){let e=!0;if(l.forEach((t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__escapeKeyBubbles||(e=!1)})),!e)return}r(!1,function(e){return"nativeEvent"in e}(e)?e.nativeEvent:e,"escape-key")})),D=vj((e=>{var t;const n=()=>{var t;E(e),null==(t=WO(e))||t.removeEventListener("keydown",n)};null==(t=WO(e))||t.addEventListener("keydown",n)})),M=vj((e=>{var t;const n=b.current;b.current=!1;const a=k.current;if(k.current=!1,"click"===c&&a)return;if(n)return;if("function"==typeof y&&!y(e))return;const s=WO(e),l="["+Dj("inert")+"]",u=UO(o.floating).querySelectorAll(l);let d=xO(s)?s:null;for(;d&&!OO(d);){const e=NO(d);if(OO(e)||!xO(e))break;d=e}if(u.length&&xO(s)&&!s.matches("html,body")&&!BO(s,o.floating)&&Array.from(u).every((e=>!BO(d,e))))return;if(CO(s)&&T){const t=s.clientWidth>0&&s.scrollWidth>s.clientWidth,n=s.clientHeight>0&&s.scrollHeight>s.clientHeight;let r=n&&e.offsetX>s.clientWidth;if(n&&"rtl"===TO(s).direction&&(r=e.offsetX<=s.offsetWidth-s.clientWidth),r||t&&e.offsetY>s.clientHeight)return}const f=null==(t=i.current.floatingContext)?void 0:t.nodeId,p=v&&Lj(v.nodesRef.current,f).some((t=>{var n;return GO(e,null==(n=t.context)?void 0:n.elements.floating)}));if(GO(e,o.floating)||GO(e,o.domReference)||p)return;const h=v?Lj(v.nodesRef.current,f):[];if(h.length>0){let e=!0;if(h.forEach((t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__outsidePressBubbles||(e=!1)})),!e)return}r(!1,e,"outside-press")})),A=vj((e=>{var t;const n=()=>{var t;M(e),null==(t=WO(e))||t.removeEventListener(c,n)};null==(t=WO(e))||t.addEventListener(c,n)}));f.useEffect((()=>{if(!n||!a)return;i.current.__escapeKeyBubbles=w,i.current.__outsidePressBubbles=x;let e=-1;function t(e){r(!1,e,"ancestor-scroll")}function l(){window.clearTimeout(e),_.current=!0}function u(){e=window.setTimeout((()=>{_.current=!1}),AO()?5:0)}const d=UO(o.floating);s&&(d.addEventListener("keydown",C?D:E,C),d.addEventListener("compositionstart",l),d.addEventListener("compositionend",u)),y&&d.addEventListener(c,S?A:M,S);let f=[];return p&&(xO(o.domReference)&&(f=LO(o.domReference)),xO(o.floating)&&(f=f.concat(LO(o.floating))),!xO(o.reference)&&o.reference&&o.reference.contextElement&&(f=f.concat(LO(o.reference.contextElement)))),f=f.filter((e=>{var t;return e!==(null==(t=d.defaultView)?void 0:t.visualViewport)})),f.forEach((e=>{e.addEventListener("scroll",t,{passive:!0})})),()=>{s&&(d.removeEventListener("keydown",C?D:E,C),d.removeEventListener("compositionstart",l),d.removeEventListener("compositionend",u)),y&&d.removeEventListener(c,S?A:M,S),f.forEach((e=>{e.removeEventListener("scroll",t)})),window.clearTimeout(e)}}),[i,o,s,y,c,n,r,p,a,w,x,E,C,D,M,S,A]),f.useEffect((()=>{b.current=!1}),[y,c]);const O=f.useMemo((()=>({onKeyDown:E,[Zj[d]]:e=>{u&&r(!1,e.nativeEvent,"reference-press")}})),[E,r,u,d]),T=f.useMemo((()=>({onKeyDown:E,onMouseDown(){k.current=!0},onMouseUp(){k.current=!0},[Jj[c]]:()=>{b.current=!0}})),[E,c]);return f.useMemo((()=>a?{reference:O,floating:T}:{}),[a,O,T])}function Qj(e){void 0===e&&(e={});const{nodeId:t}=e,n=function(e){const{open:t=!1,onOpenChange:n,elements:r}=e,o=xj(),i=f.useRef({}),[a]=f.useState((()=>function(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach((e=>e(n)))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter((e=>e!==n)))||[])}}}())),s=null!=_j(),[l,c]=f.useState(r.reference),u=vj(((e,t,r)=>{i.current.openEvent=e?t:void 0,a.emit("openchange",{open:e,event:t,reason:r,nested:s}),null==n||n(e,t,r)})),d=f.useMemo((()=>({setPositionReference:c})),[]),p=f.useMemo((()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference})),[l,r.reference,r.floating]);return f.useMemo((()=>({dataRef:i,open:t,onOpenChange:u,elements:p,events:a,floatingId:o,refs:d})),[t,u,p,a,o,d])}({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,o=r.elements,[i,a]=f.useState(null),[s,l]=f.useState(null),c=(null==o?void 0:o.domReference)||i,u=f.useRef(null),d=Ej();gj((()=>{c&&(u.current=c)}),[c]);const p=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:i,floating:a}={},transform:s=!0,whileElementsMounted:l,open:c}=e,[u,d]=f.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,h]=f.useState(r);nj(p,r)||h(r);const[m,v]=f.useState(null),[g,y]=f.useState(null),b=f.useCallback((e=>{e!==C.current&&(C.current=e,v(e))}),[]),k=f.useCallback((e=>{e!==S.current&&(S.current=e,y(e))}),[]),w=i||m,x=a||g,C=f.useRef(null),S=f.useRef(null),_=f.useRef(u),E=null!=l,D=ij(l),M=ij(o),A=ij(c),O=f.useCallback((()=>{if(!C.current||!S.current)return;const e={placement:t,strategy:n,middleware:p};M.current&&(e.platform=M.current),ej(C.current,S.current,e).then((e=>{const t={...e,isPositioned:!1!==A.current};T.current&&!nj(_.current,t)&&(_.current=t,cT.flushSync((()=>{d(t)})))}))}),[p,t,n,M,A]);tj((()=>{!1===c&&_.current.isPositioned&&(_.current.isPositioned=!1,d((e=>({...e,isPositioned:!1}))))}),[c]);const T=f.useRef(!1);tj((()=>(T.current=!0,()=>{T.current=!1})),[]),tj((()=>{if(w&&(C.current=w),x&&(S.current=x),w&&x){if(D.current)return D.current(w,x,O);O()}}),[w,x,O,D,E]);const j=f.useMemo((()=>({reference:C,floating:S,setReference:b,setFloating:k})),[b,k]),N=f.useMemo((()=>({reference:w,floating:x})),[w,x]),P=f.useMemo((()=>{const e={position:n,left:0,top:0};if(!N.floating)return e;const t=oj(N.floating,u.x),r=oj(N.floating,u.y);return s?{...e,transform:"translate("+t+"px, "+r+"px)",...rj(N.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}}),[n,s,N.floating,u.x,u.y]);return f.useMemo((()=>({...u,update:O,refs:j,elements:N,floatingStyles:P})),[u,O,j,N,P])}({...e,elements:{...o,...s&&{reference:s}}}),h=f.useCallback((e=>{const t=xO(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;l(t),p.refs.setReference(t)}),[p.refs]),m=f.useCallback((e=>{(xO(e)||null===e)&&(u.current=e,a(e)),(xO(p.refs.reference.current)||null===p.refs.reference.current||null!==e&&!xO(e))&&p.refs.setReference(e)}),[p.refs]),v=f.useMemo((()=>({...p.refs,setReference:m,setPositionReference:h,domReference:u})),[p.refs,m,h]),g=f.useMemo((()=>({...p.elements,domReference:c})),[p.elements,c]),y=f.useMemo((()=>({...p,...r,refs:v,elements:g,nodeId:t})),[p,v,g,t,r]);return gj((()=>{r.dataRef.current.floatingContext=y;const e=null==d?void 0:d.nodesRef.current.find((e=>e.id===t));e&&(e.context=y)})),f.useMemo((()=>({...p,context:y,refs:v,elements:g})),[p,v,g,y])}function eN(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,events:o,dataRef:i,elements:a}=e,{enabled:s=!0,visibleOnly:l=!0}=t,c=f.useRef(!1),u=f.useRef(),d=f.useRef(!0);f.useEffect((()=>{if(!s)return;const e=bO(a.domReference);function t(){!n&&CO(a.domReference)&&a.domReference===IO(UO(a.domReference))&&(c.current=!0)}function r(){d.current=!0}return e.addEventListener("blur",t),e.addEventListener("keydown",r,!0),()=>{e.removeEventListener("blur",t),e.removeEventListener("keydown",r,!0)}}),[a.domReference,n,s]),f.useEffect((()=>{if(s)return o.on("openchange",e),()=>{o.off("openchange",e)};function e(e){let{reason:t}=e;"reference-press"!==t&&"escape-key"!==t||(c.current=!0)}}),[o,s]),f.useEffect((()=>()=>{clearTimeout(u.current)}),[]);const p=f.useMemo((()=>({onPointerDown(e){(function(e){return!HO().includes("jsdom/")&&(!VO()&&0===e.width&&0===e.height||VO()&&1===e.width&&1===e.height&&0===e.pressure&&0===e.detail&&"mouse"===e.pointerType||e.width<1&&e.height<1&&0===e.pressure&&0===e.detail&&"touch"===e.pointerType)})(e.nativeEvent)||(d.current=!1)},onMouseLeave(){c.current=!1},onFocus(e){if(c.current)return;const t=WO(e.nativeEvent);if(l&&xO(t))try{if(zO()&&FO().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints)throw Error();if(!t.matches(":focus-visible"))return}catch(e){if(!d.current&&(!CO(n=t)||!n.matches("input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])")))return}var n;r(!0,e.nativeEvent,"focus")},onBlur(e){c.current=!1;const t=e.relatedTarget,n=e.nativeEvent,o=xO(t)&&t.hasAttribute(Dj("focus-guard"))&&"outside"===t.getAttribute("data-type");u.current=window.setTimeout((()=>{var e;const s=IO(a.domReference?a.domReference.ownerDocument:document);(t||s!==a.domReference)&&(BO(null==(e=i.current.floatingContext)?void 0:e.refs.floating.current,s)||BO(a.domReference,s)||o||r(!1,n,"focus"))}))}})),[i,a.domReference,r,l]);return f.useMemo((()=>s?{reference:p}:{}),[s,p])}const tN="active",nN="selected";function rN(e,t,n){const r=new Map,o="item"===n;let i=e;if(o&&e){const{[tN]:t,[nN]:n,...r}=e;i=r}return{..."floating"===n&&{tabIndex:-1,[Kj]:""},...i,...t.map((t=>{const r=t?t[n]:null;return"function"==typeof r?e?r(e):null:r})).concat(e).reduce(((e,t)=>t?(Object.entries(t).forEach((t=>{let[n,i]=t;var a;o&&[tN,nN].includes(n)||(0===n.indexOf("on")?(r.has(n)||r.set(n,[]),"function"==typeof i&&(null==(a=r.get(n))||a.push(i),e[n]=function(){for(var e,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return null==(e=r.get(n))?void 0:e.map((e=>e(...o))).find((e=>void 0!==e))})):e[n]=i)})),e):e),{})}}function oN(e){void 0===e&&(e=[]);const t=e.map((e=>null==e?void 0:e.reference)),n=e.map((e=>null==e?void 0:e.floating)),r=e.map((e=>null==e?void 0:e.item)),o=f.useCallback((t=>rN(t,e,"reference")),t),i=f.useCallback((t=>rN(t,e,"floating")),n),a=f.useCallback((t=>rN(t,e,"item")),r);return f.useMemo((()=>({getReferenceProps:o,getFloatingProps:i,getItemProps:a})),[o,i,a])}const iN=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function aN(e,t){var n;void 0===t&&(t={});const{open:r,floatingId:o}=e,{enabled:i=!0,role:a="dialog"}=t,s=null!=(n=iN.get(a))?n:a,l=xj(),c=null!=_j(),u=f.useMemo((()=>"tooltip"===s||"label"===a?{["aria-"+("label"===a?"labelledby":"describedby")]:r?o:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":"alertdialog"===s?"dialog":s,"aria-controls":r?o:void 0,..."listbox"===s&&{role:"combobox"},..."menu"===s&&{id:l},..."menu"===s&&c&&{role:"menuitem"},..."select"===a&&{"aria-autocomplete":"none"},..."combobox"===a&&{"aria-autocomplete":"list"}}),[s,o,c,r,l,a]),d=f.useMemo((()=>{const e={id:o,...s&&{role:s}};return"tooltip"===s||"label"===a?e:{...e,..."menu"===s&&{"aria-labelledby":l}}}),[s,o,l,a]),p=f.useCallback((e=>{let{active:t,selected:n}=e;const r={role:"option",...t&&{id:o+"-option"}};switch(a){case"select":return{...r,"aria-selected":t&&n};case"combobox":return{...r,...t&&{"aria-selected":!0}}}return{}}),[o,a]);return f.useMemo((()=>i?{reference:u,floating:d,item:p}:{}),[i,u,d,p])}const sN=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,((e,t)=>(t?"-":"")+e.toLowerCase()));function lN(e,t){return"function"==typeof e?e(t):e}function cN(e,t){void 0===t&&(t={});const{initial:n={opacity:0},open:r,close:o,common:i,duration:a=250}=t,s=e.placement,l=s.split("-")[0],c=f.useMemo((()=>({side:l,placement:s})),[l,s]),u="number"==typeof a,d=(u?a:a.open)||0,p=(u?a:a.close)||0,[h,m]=f.useState((()=>({...lN(i,c),...lN(n,c)}))),{isMounted:v,status:g}=function(e,t){void 0===t&&(t={});const{open:n,elements:{floating:r}}=e,{duration:o=250}=t,i=("number"==typeof o?o:o.close)||0,[a,s]=f.useState("unmounted"),l=function(e,t){const[n,r]=f.useState(e);return e&&!n&&r(!0),f.useEffect((()=>{if(!e&&n){const e=setTimeout((()=>r(!1)),t);return()=>clearTimeout(e)}}),[e,n,t]),n}(n,i);return l||"close"!==a||s("unmounted"),gj((()=>{if(r){if(n){s("initial");const e=requestAnimationFrame((()=>{s("open")}));return()=>{cancelAnimationFrame(e)}}s("close")}}),[n,r]),{isMounted:l,status:a}}(e,{duration:a}),y=Mj(n),b=Mj(r),k=Mj(o),w=Mj(i);return gj((()=>{const e=lN(y.current,c),t=lN(k.current,c),n=lN(w.current,c),r=lN(b.current,c)||Object.keys(e).reduce(((e,t)=>(e[t]="",e)),{});if("initial"===g&&m((t=>({transitionProperty:t.transitionProperty,...n,...e}))),"open"===g&&m({transitionProperty:Object.keys(r).map(sN).join(","),transitionDuration:d+"ms",...n,...r}),"close"===g){const r=t||e;m({transitionProperty:Object.keys(r).map(sN).join(","),transitionDuration:p+"ms",...n,...r})}}),[p,k,y,b,w,d,g,c]),{isMounted:v,styles:h}}function uN(e){return uN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uN(e)}function dN(e){return function(e){if(Array.isArray(e))return fN(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return fN(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fN(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function pN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xN(r.key),r)}}function mN(e,t,n){return t&&hN(e.prototype,t),n&&hN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function vN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vN=function(){return!!e})()}function gN(e){return gN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gN(e)}function yN(e,t){return yN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yN(e,t)}function bN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bN(Object(n),!0).forEach((function(t){wN(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wN(e,t,n){return(t=xN(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xN(e){var t=function(e){if("object"!=uN(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=uN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==uN(t)?t:t+""}var CN,SN={exports:{}},_N={};SN.exports=function(){if(CN)return _N;CN=1;var e=f,t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=e.useState,r=e.useEffect,o=e.useLayoutEffect,i=e.useDebugValue;function a(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!t(e,r)}catch(e){return!0}}var s="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),l=n({inst:{value:s,getSnapshot:t}}),c=l[0].inst,u=l[1];return o((function(){c.value=s,c.getSnapshot=t,a(c)&&u({inst:c})}),[e,s,t]),r((function(){return a(c)&&u({inst:c}),e((function(){a(c)&&u({inst:c})}))}),[e]),i(s),s};return _N.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:s,_N}();var EN=SN.exports;f.Component;var DN,MN={exports:{}},AN={};MN.exports=function(){if(DN)return AN;DN=1;var e=f,t=EN,n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=t.useSyncExternalStore,o=e.useRef,i=e.useEffect,a=e.useMemo,s=e.useDebugValue;return AN.useSyncExternalStoreWithSelector=function(e,t,l,c,u){var d=o(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=a((function(){function e(e){if(!i){if(i=!0,r=e,e=c(e),void 0!==u&&f.hasValue){var t=f.value;if(u(t,e))return o=t}return o=e}if(t=o,n(r,e))return t;var a=c(e);return void 0!==u&&u(t,a)?t:(r=e,o=a)}var r,o,i=!1,a=void 0===l?null:l;return[function(){return e(t())},null===a?void 0:function(){return e(a())}]}),[t,l,c,u]);var p=r(e,d[0],d[1]);return i((function(){f.hasValue=!0,f.value=p}),[p]),s(p),p},AN}(),MN.exports,"undefined"!=typeof window?f.useLayoutEffect:f.useEffect,"undefined"==typeof window||Boolean("undefined"!=typeof window&&window.next),(0,f.createContext)({editor:null}).Consumer;var ON=(0,f.createContext)({onDragStart:void 0}),TN=function(){return(0,f.useContext)(ON)},jN=f.forwardRef((function(e,t){var n=TN().onDragStart,r=e.as||"div";return f.createElement(r,kN(kN({},e),{},{ref:t,"data-node-view-wrapper":"",onDragStart:n,style:kN({whiteSpace:"normal"},e.style)}))})),NN=function(){return mN((function e(t,n){var r,o=this,i=n.editor,a=n.props,s=void 0===a?{}:a,l=n.as,c=void 0===l?"div":l,u=n.className,d=void 0===u?"":u;pN(this,e),this.ref=null,this.id=Math.floor(4294967295*Math.random()).toString(),this.component=t,this.editor=i,this.props=s,this.element=document.createElement(c),this.element.classList.add("react-renderer"),d&&(r=this.element.classList).add.apply(r,dN(d.split(" "))),this.editor.isInitialized?(0,cT.flushSync)((function(){o.render()})):this.render()}),[{key:"render",value:function(){var e,t=this,n=this.component,r=this.props,o=this.editor;(function(e){return!("function"!=typeof e||!e.prototype||!e.prototype.isReactComponent)}(n)||function(e){var t;return!("object"!==uN(e)||"Symbol(react.forward_ref)"!==(null===(t=e.$$typeof)||void 0===t?void 0:t.toString()))}(n))&&(r.ref=function(e){t.ref=e}),this.reactElement=f.createElement(n,kN({},r)),null===(e=null==o?void 0:o.contentComponent)||void 0===e||e.setRenderer(this.id,this)}},{key:"updateProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props=kN(kN({},this.props),e),this.render()}},{key:"destroy",value:function(){var e,t=this.editor;null===(e=null==t?void 0:t.contentComponent)||void 0===e||e.removeRenderer(this.id)}},{key:"updateAttributes",value:function(e){var t=this;Object.keys(e).forEach((function(n){t.element.setAttribute(n,e[n])}))}}])}(),PN=function(e){function t(){return pN(this,t),e=this,r=arguments,n=gN(n=t),function(e,t){if(t&&("object"==uN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,vN()?Reflect.construct(n,r||[],gN(e).constructor):n.apply(e,r));var e,n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yN(e,t)}(t,e),mN(t,[{key:"mount",value:function(){var e,t=this,n={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:function(){return t.getPos()},updateAttributes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.updateAttributes(e)},deleteNode:function(){return t.deleteNode()}};this.component.displayName||(this.component.displayName=(e=this.extension.name).charAt(0).toUpperCase()+e.substring(1));var r={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:function(e){e&&t.contentDOMElement&&e.firstChild!==t.contentDOMElement&&e.appendChild(t.contentDOMElement)}},o=this.component,i=f.memo((function(e){return f.createElement(ON.Provider,{value:r},f.createElement(o,e))}));i.displayName="ReactNodeView",this.node.isLeaf?this.contentDOMElement=null:this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.style.whiteSpace="inherit");var a=this.node.isInline?"span":"div";this.options.as&&(a=this.options.as);var s=this.options.className,l=void 0===s?"":s;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new NN(i,{editor:this.editor,props:n,as:a,className:"node-".concat(this.node.type.name," ").concat(l).trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}},{key:"dom",get:function(){var e;if(this.renderer.element.firstElementChild&&!(null===(e=this.renderer.element.firstElementChild)||void 0===e?void 0:e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}},{key:"contentDOM",get:function(){return this.node.isLeaf?null:this.contentDOMElement}},{key:"handleSelectionUpdate",value:function(){var e=this.editor.state.selection,t=e.from,n=e.to,r=this.getPos();if("number"==typeof r)if(t<=r&&n>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}},{key:"update",value:function(e,t,n){var r=this,o=function(e){r.renderer.updateProps(e),"function"==typeof r.options.attrs&&r.updateElementAttributes()};if(e.type!==this.node.type)return!1;if("function"==typeof this.options.update){var i=this.node,a=this.decorations,s=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=n,this.options.update({oldNode:i,oldDecorations:a,newNode:e,newDecorations:t,oldInnerDecorations:s,innerDecorations:n,updateProps:function(){return o({node:e,decorations:t,innerDecorations:n})}})}return e===this.node&&this.decorations===t&&this.innerDecorations===n||(this.node=e,this.decorations=t,this.innerDecorations=n,o({node:e,decorations:t,innerDecorations:n})),!0}},{key:"selectNode",value:function(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}},{key:"deselectNode",value:function(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}},{key:"destroy",value:function(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}},{key:"updateElementAttributes",value:function(){if(this.options.attrs){var e={};if("function"==typeof this.options.attrs){var t=this.editor.extensionManager.attributes,n=bs(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:n})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}])}(Bl);function LN(e,t){return function(n){return n.editor.contentComponent?new PN(e,n,t):{}}}var RN=a(7384),IN=["show","referencePos"],BN=["show","referencePos"],FN=["show","referencePos"],HN=["editor","className","theme","children","editable","onSelectionChange","onChange","formattingToolbar","linkToolbar","slashMenu","emojiPicker","sideMenu","filePanel","tableHandles","comments","autoFocus","renderEditor"],zN=["className","renderEditor","editorColorScheme","children"];function VN(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=XN(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function $N(){$N=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),s=new O(r||[]);return o(a,"_invoke",{value:E(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function g(){}function y(){}function b(){}var k={};c(k,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(T([])));x&&x!==n&&r.call(x,a)&&(k=x);var C=b.prototype=g.prototype=Object.create(k);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,i,a,s){var l=d(e[o],e,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==QN(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function E(t,n,r){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var l=D(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var c=d(t,n,r);if("normal"===c.type){if(o=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=m,r.method="throw",r.arg=c.arg)}}}function D(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,D(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(QN(t)+" is not iterable")}return y.prototype=b,o(C,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},S(_.prototype),c(_.prototype,s,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(C),c(C,l,"Generator"),c(C,a,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function UN(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function GN(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){UN(i,r,o,a,s,"next",e)}function s(e){UN(i,r,o,a,s,"throw",e)}a(void 0)}))}}function WN(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function qN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function KN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qN(Object(n),!0).forEach((function(t){ZN(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ZN(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=QN(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=QN(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==QN(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||XN(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XN(e,t){if(e){if("string"==typeof e)return YN(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?YN(e,t):void 0}}function YN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function QN(e){return QN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QN(e)}Object.defineProperty;var eP=(0,f.createContext)(void 0);function tP(e){return(0,f.useContext)(eP)}function nP(e){var t=tP();if(null==t||!t.editor)throw new Error("useBlockNoteEditor was called outside of a BlockNoteContext provider or BlockNoteView component");return t.editor}function rP(e,t,n){var r=tP();t||(t=null==r?void 0:r.editor),(0,f.useEffect)((function(){if(!t)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return t.onSelectionChange(e,n)}),[e,t,n])}function oP(e,t,n,r){var o=Qj(KN({open:e},r)),i=o.refs,a=o.update,s=o.context,l=o.floatingStyles,c=cN(s),u=c.isMounted,d=c.styles,p=oN([Yj(s)]),h=p.getReferenceProps,m=p.getFloatingProps;return(0,f.useEffect)((function(){a()}),[t,a]),(0,f.useEffect)((function(){null!==t&&i.setReference({getBoundingClientRect:function(){return t}})}),[t,i]),(0,f.useMemo)((function(){return{isMounted:u,ref:i.setFloating,setReference:i.setReference,style:KN(KN(KN({display:"flex"},d),l),{},{zIndex:n}),getFloatingProps:m,getReferenceProps:h}}),[l,u,i.setFloating,i.setReference,d,n,m,h])}function iP(e){var t=JN((0,f.useState)(),2),n=t[0],r=t[1];return(0,f.useEffect)((function(){return e((function(e){r(KN({},e))}))}),[e]),n}var aP=(0,f.createContext)(void 0);function sP(){return(0,f.useContext)(aP)}var lP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,f.useMemo)((function(){var t=fO.create(e);return window&&(window.ProseMirror=t._tiptapEditor),t}),t)};function cP(){return tP().editor.dictionary}function uP(e,t){var n=tP();t||(t=null==n?void 0:n.editor),(0,f.useEffect)((function(){if(!t)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return t.onChange(e)}),[e,t])}var dP=function(e){var t=JN((0,f.useState)(!1),2),n=t[0],r=t[1],o=JN((0,f.useState)(e.editor.isEmpty),2),i=o[0],a=o[1],s=sP();uP((function(){a(e.editor.isEmpty)}),e.editor);var l=(0,f.useCallback)((function(){r(!0)}),[]),c=(0,f.useCallback)((function(){r(!1)}),[]);return(0,f.useEffect)((function(){e.editable&&e.autoFocus&&e.editor.focus()}),[e.autoFocus,e.editable,e.editor]),(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(s.Comments.Editor,{autoFocus:e.autoFocus,className:"bn-comment-editor",editor:e.editor,onFocus:l,onBlur:c,editable:e.editable}),e.actions&&(0,T.jsx)("div",{className:"bn-comment-actions-wrapper",children:(0,T.jsx)(e.actions,{isFocused:n,isEmpty:i})})]})},fP=gE(mE(QD.paragraph.implementation.node.config),{}),pP=WN(tM,["textColor","backgroundColor"]),hP=mM.create({blockSpecs:{paragraph:fP},styleSpecs:pP});function mP(){var e=nP();if(!e.comments)throw new Error("Comments plugin not found");var t=e.comments,n=sP(),r=cP(),o=lP({trailingBlock:!1,dictionary:KN(KN({},r),{},{placeholders:{emptyDocument:r.placeholders.new_comment}}),schema:hP,sideMenuDetection:"editor"});return(0,T.jsx)(n.Comments.Card,{className:"bn-thread",children:(0,T.jsx)(dP,{autoFocus:!0,editable:!0,editor:o,actions:function(e){var r,i=e.isEmpty;return(0,T.jsx)(n.Generic.Toolbar.Root,{className:oE("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:(0,T.jsx)(n.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Save",variant:"compact",isDisabled:i,onClick:(r=GN($N().mark((function e(){return $N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.createThread({initialComment:{body:o.document}});case 2:t.stopPendingComment();case 3:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)}),children:"Save"})})}})})}var vP,gP=function(e){var t=nP();if(!t.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");var n=t.comments;(0,f.useEffect)((function(){var e=n.onUpdate((function(e){return t.setForceSelectionVisible(e.pendingComment)}));return function(){return e()}}),[n,t]);var r=iP(n.onUpdate.bind(n)),o=function(e,t){var n=nP();t=t||n;var r=JN((0,f.useState)((function(){if(e)return t.getSelectionBoundingBox()})),2),o=r[0],i=r[1];return rP((0,f.useCallback)((function(){if(e){var n=t.getSelectionBoundingBox();i(n)}}),[t,e]),t,!0),(0,f.useEffect)((function(){i(e?t.getSelectionBoundingBox():void 0)}),[e,t]),o}(null==r?void 0:r.pendingComment),i=oP((null==r?void 0:r.pendingComment)||!1,o||null,5e3,KN({placement:"bottom",middleware:[sj(10),lj(),uj()],onOpenChange:function(e){e||(n.stopPendingComment(),t.focus())}},e.floatingOptions)),a=i.isMounted,s=i.ref,l=i.style,c=i.getFloatingProps;if(!a||!r)return null;var u=e.floatingComposer||mP;return(0,T.jsx)("div",KN(KN({ref:s,style:l},c()),{},{children:(0,T.jsx)(u,{})}))},yP={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},bP=f.createContext&&f.createContext(yP),kP=["attr","size","title"];function wP(){return wP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wP.apply(this,arguments)}function xP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xP(Object(n),!0).forEach((function(t){SP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function SP(e,t,n){return t=function(e){var t=function(e){if("object"!=QN(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=QN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==QN(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _P(e){return e&&e.map((function(e,t){return f.createElement(e.tag,CP({key:t},e.attr),_P(e.child))}))}function EP(e){return function(t){return f.createElement(DP,wP({attr:CP({},e.attr)},t),_P(e.child))}}function DP(e){var t=function(t){var n,r=e.attr,o=e.size,i=e.title,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,kP),s=o||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),f.createElement("svg",wP({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,a,{className:n,style:CP(CP({color:e.color||t.color},t.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),i&&f.createElement("title",null,i),e.children)};return void 0!==bP?f.createElement(bP.Consumer,null,(function(e){return t(e)})):t(yP)}function MP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 7V11L2 6L8 1V5H13C17.4183 5 21 8.58172 21 13C21 17.4183 17.4183 21 13 21H4V19H13C16.3137 19 19 16.3137 19 13C19 9.68629 16.3137 7 13 7H8Z"},child:[]}]})(e)}function AP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.29117 20.8242L2 22L3.17581 16.7088C2.42544 15.3056 2 13.7025 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.2975 22 8.6944 21.5746 7.29117 20.8242ZM7.58075 18.711L8.23428 19.0605C9.38248 19.6745 10.6655 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 13.3345 4.32549 14.6175 4.93949 15.7657L5.28896 16.4192L4.63416 19.3658L7.58075 18.711Z"},child:[]}]})(e)}function OP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.24264 17.9967H3V13.754L14.435 2.319C14.8256 1.92848 15.4587 1.92848 15.8492 2.319L18.6777 5.14743C19.0682 5.53795 19.0682 6.17112 18.6777 6.56164L7.24264 17.9967ZM3 19.9967H21V21.9967H3V19.9967Z"},child:[]}]})(e)}function TP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"},child:[]}]})(e)}function jP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.55397 22H3.3999L10.9999 3H12.9999L20.5999 22H18.4458L16.0458 16H7.95397L5.55397 22ZM8.75397 14H15.2458L11.9999 5.88517L8.75397 14Z"},child:[]}]})(e)}function NP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM21.0005 8V20H19.0005L19 10.204L17 10.74V8.67L19.5005 8H21.0005Z"},child:[]}]})(e)}function PP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 8C20.5711 8 22.25 9.67893 22.25 11.75C22.25 12.6074 21.9623 13.3976 21.4781 14.0292L21.3302 14.2102L18.0343 18H22V20H15L14.9993 18.444L19.8207 12.8981C20.0881 12.5908 20.25 12.1893 20.25 11.75C20.25 10.7835 19.4665 10 18.5 10C17.5818 10 16.8288 10.7071 16.7558 11.6065L16.75 11.75H14.75C14.75 9.67893 16.4289 8 18.5 8Z"},child:[]}]})(e)}function LP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8L21.9984 10L19.4934 12.883C21.0823 13.3184 22.25 14.7728 22.25 16.5C22.25 18.5711 20.5711 20.25 18.5 20.25C16.674 20.25 15.1528 18.9449 14.8184 17.2166L16.7821 16.8352C16.9384 17.6413 17.6481 18.25 18.5 18.25C19.4665 18.25 20.25 17.4665 20.25 16.5C20.25 15.5335 19.4665 14.75 18.5 14.75C18.214 14.75 17.944 14.8186 17.7056 14.9403L16.3992 13.3932L19.3484 10H15V8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(e)}function RP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM3 12.5L7 9V16L3 12.5Z"},child:[]}]})(e)}function IP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM7 12.5L3 16V9L7 12.5Z"},child:[]}]})(e)}function BP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 5H11V19H8V21H16V19H13V5H16V3H8V5ZM2 7C1.44772 7 1 7.44772 1 8V16C1 16.5523 1.44772 17 2 17H8V15H3V9H8V7H2ZM16 9H21V15H16V17H22C22.5523 17 23 16.5523 23 16V8C23 7.44772 22.5523 7 22 7H16V9Z"},child:[]}]})(e)}function FP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 17H22V19H19V22H17V17ZM7 7H2V5H5V2H7V7ZM18.364 15.5355L16.9497 14.1213L18.364 12.7071C20.3166 10.7545 20.3166 7.58866 18.364 5.63604C16.4113 3.68342 13.2455 3.68342 11.2929 5.63604L9.87868 7.05025L8.46447 5.63604L9.87868 4.22183C12.6123 1.48816 17.0445 1.48816 19.7782 4.22183C22.5118 6.9555 22.5118 11.3877 19.7782 14.1213L18.364 15.5355ZM15.5355 18.364L14.1213 19.7782C11.3877 22.5118 6.9555 22.5118 4.22183 19.7782C1.48816 17.0445 1.48816 12.6123 4.22183 9.87868L5.63604 8.46447L7.05025 9.87868L5.63604 11.2929C3.68342 13.2455 3.68342 16.4113 5.63604 18.364C7.58866 20.3166 10.7545 20.3166 12.7071 18.364L14.1213 16.9497L15.5355 18.364ZM14.8284 7.75736L16.2426 9.17157L9.17157 16.2426L7.75736 14.8284L14.8284 7.75736Z"},child:[]}]})(e)}function HP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.3638 15.5355L16.9496 14.1213L18.3638 12.7071C20.3164 10.7545 20.3164 7.58866 18.3638 5.63604C16.4112 3.68341 13.2453 3.68341 11.2927 5.63604L9.87849 7.05025L8.46428 5.63604L9.87849 4.22182C12.6122 1.48815 17.0443 1.48815 19.778 4.22182C22.5117 6.95549 22.5117 11.3876 19.778 14.1213L18.3638 15.5355ZM15.5353 18.364L14.1211 19.7782C11.3875 22.5118 6.95531 22.5118 4.22164 19.7782C1.48797 17.0445 1.48797 12.6123 4.22164 9.87868L5.63585 8.46446L7.05007 9.87868L5.63585 11.2929C3.68323 13.2455 3.68323 16.4113 5.63585 18.364C7.58847 20.3166 10.7543 20.3166 12.7069 18.364L14.1211 16.9497L15.5353 18.364ZM14.8282 7.75736L16.2425 9.17157L9.17139 16.2426L7.75717 14.8284L14.8282 7.75736Z"},child:[]}]})(e)}function zP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.00008 6V9H5.00008V6H8.00008ZM3.00008 4V11H10.0001V4H3.00008ZM13.0001 4H21.0001V6H13.0001V4ZM13.0001 11H21.0001V13H13.0001V11ZM13.0001 18H21.0001V20H13.0001V18ZM10.7072 16.2071L9.29297 14.7929L6.00008 18.0858L4.20718 16.2929L2.79297 17.7071L6.00008 20.9142L10.7072 16.2071Z"},child:[]}]})(e)}function VP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM5 3V6H6V7H3V6H4V4H3V3H5ZM3 14V11.5H5V11H3V10H6V12.5H4V13H6V14H3ZM5 19.5H3V18.5H5V18H3V17H6V21H3V20H5V19.5ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(e)}function $P(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM4.5 6.5C3.67157 6.5 3 5.82843 3 5C3 4.17157 3.67157 3.5 4.5 3.5C5.32843 3.5 6 4.17157 6 5C6 5.82843 5.32843 6.5 4.5 6.5ZM4.5 13.5C3.67157 13.5 3 12.8284 3 12C3 11.1716 3.67157 10.5 4.5 10.5C5.32843 10.5 6 11.1716 6 12C6 12.8284 5.32843 13.5 4.5 13.5ZM4.5 20.4C3.67157 20.4 3 19.7284 3 18.9C3 18.0716 3.67157 17.4 4.5 17.4C5.32843 17.4 6 18.0716 6 18.9C6 19.7284 5.32843 20.4 4.5 20.4ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(e)}function UP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM11 5H5V10.999H7V9L10 12L7 15V13H5V19H11V17H13V19H19V13H17V15L14 12L17 9V10.999H19V5H13V7H11V5ZM13 13V15H11V13H13ZM13 9V11H11V9H13Z"},child:[]}]})(e)}function GP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20C20.5523 3 21 3.44772 21 4V20ZM19 11V5H13.001V7H15L12 10L9 7H11V5H5V11H7V13H5V19H11V17H9L12 14L15 17H13.001V19H19V13H17V11H19ZM11 13H9V11H11V13ZM15 13H13V11H15V13Z"},child:[]}]})(e)}function WP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 6V21H11V6H5V4H19V6H13Z"},child:[]}]})(e)}function qP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"},child:[]}]})(e)}function KP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 15V18H24V20H21V23H19V20H16V18H19V15H21ZM21.0082 3C21.556 3 22 3.44495 22 3.9934L22.0007 13.3417C21.3749 13.1204 20.7015 13 20 13V5H4L4.001 19L13.2929 9.70715C13.6528 9.34604 14.22 9.31823 14.6123 9.62322L14.7065 9.70772L18.2521 13.2586C15.791 14.0069 14 16.2943 14 19C14 19.7015 14.1204 20.3749 14.3417 21.0007L2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7Z"},child:[]}]})(e)}function ZP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V5.757L19 7.757V5H5V13.1L9 9.1005L13.328 13.429L12.0012 14.7562L11.995 18.995L16.2414 19.0012L17.571 17.671L18.8995 19H19V16.242L21 14.242V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM21.7782 7.80761L23.1924 9.22183L15.4142 17L13.9979 16.9979L14 15.5858L21.7782 7.80761ZM15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7Z"},child:[]}]})(e)}function JP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 3.9934C3 3.44476 3.44495 3 3.9934 3H20.0066C20.5552 3 21 3.44495 21 3.9934V20.0066C21 20.5552 20.5551 21 20.0066 21H3.9934C3.44476 21 3 20.5551 3 20.0066V3.9934ZM10.6219 8.41459C10.5562 8.37078 10.479 8.34741 10.4 8.34741C10.1791 8.34741 10 8.52649 10 8.74741V15.2526C10 15.3316 10.0234 15.4088 10.0672 15.4745C10.1897 15.6583 10.4381 15.708 10.6219 15.5854L15.5008 12.3328C15.5447 12.3035 15.5824 12.2658 15.6117 12.2219C15.7343 12.0381 15.6846 11.7897 15.5008 11.6672L10.6219 8.41459Z"},child:[]}]})(e)}function XP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"},child:[]}]})(e)}function YP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"},child:[]}]})(e)}function QP(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"},child:[]}]})(e)}function eL(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 4V6H15V4H9Z"},child:[]}]})(e)}function tL(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM9 11V17H11V11H9ZM13 11V17H15V11H13ZM9 4V6H15V4H9Z"},child:[]}]})(e)}function nL(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 19H20V12H22V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V12H4V19ZM14 9H19L12 16L5 9H10V3H14V9Z"},child:[]}]})(e)}function rL(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10 6V8H5V19H16V14H18V20C18 20.5523 17.5523 21 17 21H4C3.44772 21 3 20.5523 3 20V7C3 6.44772 3.44772 6 4 6H10ZM21 3V12L17.206 8.207L11.2071 14.2071L9.79289 12.7929L15.792 6.793L12 3H21Z"},child:[]}]})(e)}function oL(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 10C3.9 10 3 10.9 3 12C3 13.1 3.9 14 5 14C6.1 14 7 13.1 7 12C7 10.9 6.1 10 5 10ZM19 10C17.9 10 17 10.9 17 12C17 13.1 17.9 14 19 14C20.1 14 21 13.1 21 12C21 10.9 20.1 10 19 10ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z"},child:[]}]})(e)}function iL(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM8 13H16C16 15.2091 14.2091 17 12 17C9.79086 17 8 15.2091 8 13ZM8 11C7.17157 11 6.5 10.3284 6.5 9.5C6.5 8.67157 7.17157 8 8 8C8.82843 8 9.5 8.67157 9.5 9.5C9.5 10.3284 8.82843 11 8 11ZM16 11C15.1716 11 14.5 10.3284 14.5 9.5C14.5 8.67157 15.1716 8 16 8C16.8284 8 17.5 8.67157 17.5 9.5C17.5 10.3284 16.8284 11 16 11Z"},child:[]}]})(e)}function aL(){return sL.apply(this,arguments)}function sL(){return(sL=GN($N().mark((function e(){return $N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vP||(vP=GN($N().mark((function e(){var t,n,r,o,i,s;return $N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([a.e(8517).then(a.bind(a,8517)),a.e(3274).then(a.t.bind(a,3274,17))]);case 2:return t=e.sent,n=JN(t,2),r=n[0],o=n[1],i="default"in r?r.default:r,s="default"in o?o.default:o,e.next=10,i.init({data:s});case 10:return e.abrupt("return",{emojiMart:i,emojiData:s});case 11:case"end":return e.stop()}}),e)})))()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lL(e){var t=(0,f.useRef)(null),n=(0,f.useRef)(null);return n.current&&n.current.update(e),(0,f.useEffect)((function(){return GN($N().mark((function r(){var o,i;return $N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,aL();case 2:o=r.sent,i=o.emojiMart,n.current=new i.Picker(KN(KN({},e),{},{ref:t}));case 5:case"end":return r.stop()}}),r)})))(),function(){n.current=null}}),[]),f.createElement("div",{ref:t})}var cL=function(e){var t=JN((0,f.useState)(!1),2),n=t[0],r=t[1],o=sP(),i=tP();return(0,T.jsxs)(o.Generic.Popover.Root,{opened:n,children:[(0,T.jsx)(o.Generic.Popover.Trigger,{children:(0,T.jsx)("div",{onClick:function(e){e.preventDefault(),e.stopPropagation(),r(!n)},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.children})}),(0,T.jsx)(o.Generic.Popover.Content,{variant:"panel-popover",children:(0,T.jsx)(lL,{perLine:7,onClickOutside:function(){return r(!1)},onEmojiSelect:function(t){e.onEmojiSelect(t),r(!1)},theme:null==i?void 0:i.colorSchemePreference})})]})};function uL(e,t){var n=e.comments;if(!n)throw new Error("Comments plugin not found");var r=n.userStore,o=(0,f.useCallback)((function(){var e,n=new Map,o=VN(t);try{for(o.s();!(e=o.n()).done;){var i=e.value,a=r.getUser(i);a&&n.set(i,a)}}catch(e){o.e(e)}finally{o.f()}return n}),[r,t]),i=(0,f.useMemo)((function(){return{current:o()}}),[o]),a=(0,f.useCallback)((function(e){var n=r.subscribe((function(t){i.current=o(),e()}));return r.loadUsers(t),n}),[r,o,t,i]);return(0,f.useSyncExternalStore)(a,(function(){return i.current}))}var dL=function(e){var t=sP(),n=cP(),r=nP();if(!r.comments)throw new Error("ReactionBadge must be used inside a BlockNote editor with comments enabled");var o=e.comment.reactions.find((function(t){return t.emoji===e.emoji}));if(!o)throw new Error("Trying to render reaction badge for non-existing reaction");var i=JN((0,f.useState)([]),2),a=i[0],s=i[1],l=uL(r,a);return(0,T.jsx)(t.Generic.Badge.Root,{className:oE("bn-badge","bn-comment-reaction"),text:o.userIds.length.toString(),icon:o.emoji,isSelected:r.comments.threadStore.auth.canDeleteReaction(e.comment,o.emoji),onClick:function(){return e.onReactionSelect(o.emoji)},onMouseEnter:function(){return s(o.userIds)},mainTooltip:n.comments.reactions.reacted_by,secondaryTooltip:"".concat(Array.from(l.values()).map((function(e){return e.username})).join("\n"))},o.emoji)},fL=function(e){var t=e.comment,n=e.thread,r=e.showResolveButton,o=cP(),i=lP({initialContent:t.body,trailingBlock:!1,dictionary:KN(KN({},o),{},{placeholders:{emptyDocument:o.placeholders.edit_comment}}),schema:hP,sideMenuDetection:"editor"},[t.body]),a=sP(),s=JN((0,f.useState)(!1),2),l=s[0],c=s[1],u=nP();if(!u.comments)throw new Error("Comments plugin not found");var d,p=u.comments.threadStore,h=(0,f.useCallback)((function(){c(!0)}),[]),m=(0,f.useCallback)((function(){i.replaceBlocks(i.document,t.body),c(!1)}),[i,t.body]),v=(0,f.useCallback)(function(){var e=GN($N().mark((function e(r){return $N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.updateComment({commentId:t.id,comment:{body:i.document},threadId:n.id});case 2:c(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,n.id,i,p]),g=(0,f.useCallback)(GN($N().mark((function e(){return $N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.deleteComment({commentId:t.id,threadId:n.id});case 2:case"end":return e.stop()}}),e)}))),[t,n.id,p]),y=(0,f.useCallback)(function(){var e=GN($N().mark((function e(r){return $N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p.auth.canAddReaction(t,r)){e.next=5;break}return e.next=3,p.addReaction({threadId:n.id,commentId:t.id,emoji:r});case 3:e.next=9;break;case 5:if(e.t0=p.auth.canDeleteReaction(t,r),!e.t0){e.next=9;break}return e.next=9,p.deleteReaction({threadId:n.id,commentId:t.id,emoji:r});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p,t,n.id]),b=(0,f.useCallback)(GN($N().mark((function e(){return $N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.resolveThread({threadId:n.id});case 2:case"end":return e.stop()}}),e)}))),[n.id,p]),k=(0,f.useCallback)(GN($N().mark((function e(){return $N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.unresolveThread({threadId:n.id});case 2:case"end":return e.stop()}}),e)}))),[n.id,p]),w=function(e,t){return uL(e,[t]).get(t)}(u,t.userId);if(!t.body)return null;var x=p.auth.canAddReaction(t),C=p.auth.canDeleteComment(t),S=p.auth.canUpdateComment(t),_=r&&(n.resolved?p.auth.canUnresolveThread(n):p.auth.canResolveThread(n));l||(d=(0,T.jsxs)(a.Generic.Toolbar.Root,{className:oE("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:[x&&(0,T.jsx)(cL,{onEmojiSelect:function(e){return y(e.native)},children:(0,T.jsx)(a.Generic.Toolbar.Button,{mainTooltip:o.comments.actions.add_reaction,variant:"compact",children:(0,T.jsx)(iL,{size:16})},"add-reaction")}),_&&(n.resolved?(0,T.jsx)(a.Generic.Toolbar.Button,{mainTooltip:"Re-open",variant:"compact",onClick:k,children:(0,T.jsx)(MP,{size:16})},"reopen"):(0,T.jsx)(a.Generic.Toolbar.Button,{mainTooltip:o.comments.actions.resolve,variant:"compact",onClick:b,children:(0,T.jsx)(QP,{size:16})},"resolve")),(C||S)&&(0,T.jsxs)(a.Generic.Menu.Root,{position:"bottom-start",children:[(0,T.jsx)(a.Generic.Menu.Trigger,{children:(0,T.jsx)(a.Generic.Toolbar.Button,{mainTooltip:o.comments.actions.more_actions,variant:"compact",children:(0,T.jsx)(oL,{size:16})},"more-actions")}),(0,T.jsxs)(a.Generic.Menu.Dropdown,{className:"bn-menu-dropdown",children:[S&&(0,T.jsx)(a.Generic.Menu.Item,{icon:(0,T.jsx)(OP,{}),onClick:h,children:o.comments.actions.edit_comment},"edit-comment"),C&&(0,T.jsx)(a.Generic.Menu.Item,{icon:(0,T.jsx)(tL,{}),onClick:g,children:o.comments.actions.delete_comment},"delete-comment")]})]})]}));var E=t.createdAt.toLocaleDateString(void 0,{month:"short",day:"numeric"});if(!t.body)throw new Error("soft deletes are not yet supported");return(0,T.jsx)(a.Comments.Comment,{authorInfo:null!=w?w:"loading",timeString:E,edited:t.updatedAt.getTime()!==t.createdAt.getTime(),showActions:"hover",actions:d,className:"bn-thread-comment",children:(0,T.jsx)(dP,{autoFocus:l,editor:i,editable:l,actions:t.reactions.length>0||l?function(e){var n=e.isEmpty;return(0,T.jsxs)(T.Fragment,{children:[t.reactions.length>0&&!l&&(0,T.jsxs)(a.Generic.Badge.Group,{className:oE("bn-badge-group","bn-comment-reactions"),children:[t.reactions.map((function(e){return(0,T.jsx)(dL,{comment:t,emoji:e.emoji,onReactionSelect:y},e.emoji)})),(0,T.jsx)(cL,{onEmojiSelect:function(e){return y(e.native)},children:(0,T.jsx)(a.Generic.Badge.Root,{className:oE("bn-badge","bn-comment-add-reaction"),text:"+",icon:(0,T.jsx)(iL,{size:16}),mainTooltip:o.comments.actions.add_reaction})})]}),l&&(0,T.jsxs)(a.Generic.Toolbar.Root,{variant:"action-toolbar",className:oE("bn-action-toolbar","bn-comment-actions"),children:[(0,T.jsx)(a.Generic.Toolbar.Button,{mainTooltip:"Save",variant:"compact",onClick:v,isDisabled:n,children:"Save"}),(0,T.jsx)(a.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Cancel",variant:"compact",onClick:m,children:"Cancel"})]})]})}:void 0})})},pL=function(e){var t=e.thread,n=e.maxCommentsBeforeCollapse,r=sP(),o=cP(),i=uL(nP(),t.resolvedBy?[t.resolvedBy]:[]),a=t.comments.map((function(e,n){return(0,T.jsx)(fL,{thread:t,comment:e,showResolveButton:0===n},e.id)}));if(t.resolved&&t.resolvedUpdatedAt&&t.resolvedBy){if(!i.get(t.resolvedBy))throw new Error("User ".concat(t.resolvedBy," resolved thread ").concat(t.id,", but their data could not be found."));var s=t.comments.findLastIndex((function(e){return t.resolvedUpdatedAt.getTime()>e.createdAt.getTime()}))+1;a.splice(s,0,(0,T.jsx)(r.Comments.Comment,{className:"bn-thread-comment",authorInfo:t.resolvedBy&&i.get(t.resolvedBy)||"loading",timeString:t.resolvedUpdatedAt.toLocaleDateString(void 0,{month:"short",day:"numeric"}),edited:!1,showActions:!1,children:(0,T.jsx)("div",{className:"bn-resolved-text",children:o.comments.sidebar.marked_as_resolved})},"resolved-comment"))}return n&&a.length>n&&a.splice(1,a.length-2,(0,T.jsx)(r.Comments.ExpandSectionsPrompt,{className:"bn-thread-expand-prompt",children:o.comments.sidebar.more_replies(t.comments.length-2)},"expand-prompt")),a},hL=function(e){var t=e.thread,n=e.selected,r=e.referenceText,o=e.maxCommentsBeforeCollapse,i=e.onFocus,a=e.onBlur,s=e.tabIndex,l=sP(),c=cP(),u=nP().comments;if(!u)throw new Error("Comments plugin not found");var d=lP({trailingBlock:!1,dictionary:KN(KN({},c),{},{placeholders:{emptyDocument:c.placeholders.comment_reply}}),schema:hP,sideMenuDetection:"editor"}),p=(0,f.useCallback)(GN($N().mark((function e(){return $N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.threadStore.addComment({comment:{body:d.document},threadId:t.id});case 2:d.removeBlocks(d.document);case 3:case"end":return e.stop()}}),e)}))),[u,d,t.id]);return(0,T.jsxs)(l.Comments.Card,{className:"bn-thread",headerText:r,onFocus:i,onBlur:a,selected:n,tabIndex:s,children:[(0,T.jsx)(l.Comments.CardSection,{className:"bn-thread-comments",children:(0,T.jsx)(pL,{thread:t,maxCommentsBeforeCollapse:n?void 0:o||5})}),n&&(0,T.jsx)(l.Comments.CardSection,{className:"bn-thread-composer",children:(0,T.jsx)(dP,{autoFocus:!1,editable:!0,editor:d,actions:function(e){var t=e.isEmpty;return t?null:(0,T.jsx)(l.Generic.Toolbar.Root,{variant:"action-toolbar",className:oE("bn-action-toolbar","bn-comment-actions"),children:(0,T.jsx)(l.Generic.Toolbar.Button,{mainTooltip:"Save",variant:"compact",isDisabled:t,onClick:p,children:"Save"})})}})})]})};var mL=function(e){var t=nP();if(!t.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");var n=iP(t.comments.onUpdate.bind(t.comments)),r=oP(!(null==n||!n.selectedThreadId),null,5e3,KN({placement:"bottom",middleware:[sj(10),lj(),uj()],onOpenChange:function(e){var n;e||(null==(n=t.comments)||n.selectThread(void 0),t.focus())}},e.floatingOptions)),o=r.isMounted,i=r.ref,a=r.style,s=r.getFloatingProps,l=r.setReference,c=(0,f.useCallback)((function(){var e;if(null!=n&&n.selectedThreadId){var r=null==(e=t.domElement)?void 0:e.querySelector('[data-bn-thread-id="'.concat(null==n?void 0:n.selectedThreadId,'"]'));r&&l(r)}}),[l,t,null==n?void 0:n.selectedThreadId]);(0,f.useEffect)((function(){if(null!=n&&n.selectedThreadId)return t.onChange((function(){c()}))}),[t,c,null==n?void 0:n.selectedThreadId]),(0,f.useLayoutEffect)(c,[c]);var u=function(e){var t=e.comments;if(!t)throw new Error("Comments plugin not found");var n=t.threadStore,r=(0,f.useRef)();r.current||(r.current=n.getThreads());var o=(0,f.useCallback)((function(e){return n.subscribe((function(t){r.current=t,e()}))}),[n]);return(0,f.useSyncExternalStore)(o,(function(){return r.current}))}(t);if(!o||!n||!n.selectedThreadId)return null;var d=e.floatingThread||hL;return(0,T.jsx)("div",KN(KN({ref:i,style:a},s()),{},{children:(0,T.jsx)(d,{thread:u.get(n.selectedThreadId),selected:!0})}))},vL=function(e){var t=sP(),n=cP(),r=e.block,o=nP(),i=JN((0,f.useState)(""),2),a=i[0],s=i[1],l=(0,f.useCallback)((function(e){s(e.currentTarget.value)}),[]),c=(0,f.useCallback)((function(e){"Enter"===e.key&&(e.preventDefault(),o.updateBlock(r,{props:{name:dE(a),url:a}}))}),[o,r,a]),u=(0,f.useCallback)((function(){o.updateBlock(r,{props:{name:dE(a),url:a}})}),[o,r,a]);return(0,T.jsxs)(t.FilePanel.TabPanel,{className:"bn-tab-panel",children:[(0,T.jsx)(t.FilePanel.TextInput,{className:"bn-text-input",placeholder:n.file_panel.embed.url_placeholder,value:a,onChange:l,onKeyDown:c,"data-test":"embed-input"}),(0,T.jsx)(t.FilePanel.Button,{className:"bn-button",onClick:u,"data-test":"embed-input-button",children:n.file_panel.embed.embed_button[r.type]||n.file_panel.embed.embed_button.file})]})},gL=function(e){var t,n=sP(),r=cP(),o=e.block,i=e.setLoading,a=nP(),s=JN((0,f.useState)(!1),2),l=s[0],c=s[1];(0,f.useEffect)((function(){l&&setTimeout((function(){c(!1)}),3e3)}),[l]);var u=(0,f.useCallback)((function(e){function t(){return t=GN($N().mark((function e(t){var n;return $N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i(!0),void 0===a.uploadFile){e.next=14;break}return e.prev=1,e.next=4,a.uploadFile(t);case 4:"string"==typeof(n=e.sent)&&(n={props:{name:t.name,url:n}}),a.updateBlock(o,n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),c(!0);case 11:return e.prev=11,i(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])}))),t.apply(this,arguments)}null!==e&&function(e){t.apply(this,arguments)}(e)}),[o,a,i]),d=a.schema.blockSchema[o.type],p=d.isFileBlock&&null!=(t=d.fileBlockAccept)&&t.length?d.fileBlockAccept.join(","):"*/*";return(0,T.jsxs)(n.FilePanel.TabPanel,{className:"bn-tab-panel",children:[(0,T.jsx)(n.FilePanel.FileInput,{className:"bn-file-input","data-test":"upload-input",accept:p,placeholder:r.file_panel.upload.file_placeholder[o.type]||r.file_panel.upload.file_placeholder.file,value:null,onChange:u}),l&&(0,T.jsx)("div",{className:"bn-error-text",children:r.file_panel.upload.upload_error})]})},yL=function(e){var t,n=sP(),r=cP(),o=nP(),i=JN((0,f.useState)(!1),2),a=i[0],s=i[1],l=null!==(t=e.tabs)&&void 0!==t?t:[].concat(function(e){return function(e){if(Array.isArray(e))return YN(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||XN(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(void 0!==o.uploadFile?[{name:r.file_panel.upload.title,tabPanel:(0,T.jsx)(gL,{block:e.block,setLoading:s})}]:[]),[{name:r.file_panel.embed.title,tabPanel:(0,T.jsx)(vL,{block:e.block})}]),c=JN((0,f.useState)(e.defaultOpenTab||l[0].name),2),u=c[0],d=c[1];return(0,T.jsx)(n.FilePanel.Root,{className:"bn-panel",defaultOpenTab:u,openTab:u,setOpenTab:d,tabs:l,loading:a})},bL=function(e){var t=nP();if(!t.filePanel)throw new Error("FileToolbarController can only be used when BlockNote editor schema contains file block");var n=iP(t.filePanel.onUpdate.bind(t.filePanel)),r=oP((null==n?void 0:n.show)||!1,(null==n?void 0:n.referencePos)||null,5e3,KN({placement:"bottom",middleware:[sj(10),uj()],onOpenChange:function(e){e||(t.filePanel.closeMenu(),t.focus())}},e.floatingOptions)),o=r.isMounted,i=r.ref,a=r.style,s=r.getFloatingProps;if(!o||!n)return null;n.show,n.referencePos;var l=WN(n,IN),c=e.filePanel||yL;return(0,T.jsx)("div",KN(KN({ref:i,style:a},s()),{},{children:(0,T.jsx)(c,KN({},l))}))};function kL(e,t){uP(e,t),rP(e,t)}function wL(e){return function(t){e.forEach((function(e){"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}function xL(e){var t=tP();if(e||(e=null==t?void 0:t.editor),!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");var n=e,r=JN((0,f.useState)((function(){var e;return(null==(e=n.getSelection())?void 0:e.blocks)||[n.getTextCursorPosition().block]})),2),o=r[0],i=r[1];return kL((function(){var e;return i((null==(e=n.getSelection())?void 0:e.blocks)||[n.getTextCursorPosition().block])}),n),o}var CL={bold:function(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 11H12.5C13.8807 11 15 9.88071 15 8.5C15 7.11929 13.8807 6 12.5 6H8V11ZM18 15.5C18 17.9853 15.9853 20 13.5 20H6V4H12.5C14.9853 4 17 6.01472 17 8.5C17 9.70431 16.5269 10.7981 15.7564 11.6058C17.0979 12.3847 18 13.837 18 15.5ZM8 13V18H13.5C14.8807 18 16 16.8807 16 15.5C16 14.1193 14.8807 13 13.5 13H8Z"},child:[]}]})(e)},italic:function(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15 20H7V18H9.92661L12.0425 6H9V4H17V6H14.0734L11.9575 18H15V20Z"},child:[]}]})(e)},underline:function(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 3V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V3H18V12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12V3H8ZM4 20H20V22H4V20Z"},child:[]}]})(e)},strike:function(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.1538 14C17.3846 14.5161 17.5 15.0893 17.5 15.7196C17.5 17.0625 16.9762 18.1116 15.9286 18.867C14.8809 19.6223 13.4335 20 11.5862 20C9.94674 20 8.32335 19.6185 6.71592 18.8555V16.6009C8.23538 17.4783 9.7908 17.917 11.3822 17.917C13.9333 17.917 15.2128 17.1846 15.2208 15.7196C15.2208 15.0939 15.0049 14.5598 14.5731 14.1173C14.5339 14.0772 14.4939 14.0381 14.4531 14H3V12H21V14H17.1538ZM13.076 11H7.62908C7.4566 10.8433 7.29616 10.6692 7.14776 10.4778C6.71592 9.92084 6.5 9.24559 6.5 8.45207C6.5 7.21602 6.96583 6.165 7.89749 5.299C8.82916 4.43299 10.2706 4 12.2219 4C13.6934 4 15.1009 4.32808 16.4444 4.98426V7.13591C15.2448 6.44921 13.9293 6.10587 12.4978 6.10587C10.0187 6.10587 8.77917 6.88793 8.77917 8.45207C8.77917 8.87172 8.99709 9.23796 9.43293 9.55079C9.86878 9.86362 10.4066 10.1135 11.0463 10.3004C11.6665 10.4816 12.3431 10.7148 13.076 11H13.076Z"},child:[]}]})(e)},code:function(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M23 12L15.9289 19.0711L14.5147 17.6569L20.1716 12L14.5147 6.34317L15.9289 4.92896L23 12ZM3.82843 12L9.48528 17.6569L8.07107 19.0711L1 12L8.07107 4.92896L9.48528 6.34317L3.82843 12Z"},child:[]}]})(e)}},SL=function(e){var t=cP(),n=sP(),r=nP(),o=function(e,t){return e in t.schema.styleSchema&&t.schema.styleSchema[e].type===e&&"boolean"===t.schema.styleSchema[e].propSchema}(e.basicTextStyle,r),i=xL(r),a=JN((0,f.useState)(e.basicTextStyle in r.getActiveStyles()),2),s=a[0],l=a[1];if(kL((function(){o&&l(e.basicTextStyle in r.getActiveStyles())}),r),!(0,f.useMemo)((function(){return!!o&&!!i.find((function(e){return void 0!==e.content}))}),[o,i])||!r.isEditable)return null;var c=CL[e.basicTextStyle];return(0,T.jsx)(n.FormattingToolbar.Button,{className:"bn-button","data-test":e.basicTextStyle,onClick:function(){return function(e){if(r.focus(),o){if("boolean"!==r.schema.styleSchema[e].propSchema)throw new Error("can only toggle boolean styles");r.toggleStyles(ZN({},e,!0))}}(e.basicTextStyle)},isSelected:s,label:t.formatting_toolbar[e.basicTextStyle].tooltip,mainTooltip:t.formatting_toolbar[e.basicTextStyle].tooltip,secondaryTooltip:rE(t.formatting_toolbar[e.basicTextStyle].secondary_tooltip,t.generic.ctrl_shortcut),icon:(0,T.jsx)(c,{})})},_L=function(e){var t=e.textColor||"default",n=e.backgroundColor||"default",r=e.size||16,o=(0,f.useMemo)((function(){return{pointerEvents:"none",fontSize:(.75*r).toString()+"px",height:r.toString()+"px",lineHeight:r.toString()+"px",textAlign:"center",width:r.toString()+"px"}}),[r]);return(0,T.jsx)("div",{className:"bn-color-icon","data-background-color":n,"data-text-color":t,style:o,children:"A"})},EL=["default","gray","brown","red","orange","yellow","green","blue","purple","pink"],DL=function(e){var t=sP(),n=cP();return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)((function(){return e.text?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(t.Generic.Menu.Label,{children:n.color_picker.text_title}),EL.map((function(r){return(0,T.jsx)(t.Generic.Menu.Item,{onClick:function(){e.onClick&&e.onClick(),e.text.setColor(r)},"data-test":"text-color-"+r,icon:(0,T.jsx)(_L,{textColor:r,size:e.iconSize}),checked:e.text.color===r,children:n.color_picker.colors[r]},"text-color-"+r)}))]}):null}),{}),(0,T.jsx)((function(){return e.background?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(t.Generic.Menu.Label,{children:n.color_picker.background_title}),EL.map((function(r){return(0,T.jsx)(t.Generic.Menu.Item,{onClick:function(){e.onClick&&e.onClick(),e.background.setColor(r)},"data-test":"background-color-"+r,icon:(0,T.jsx)(_L,{backgroundColor:r,size:e.iconSize}),checked:e.background.color===r,children:n.color_picker.colors[r]},"background-color-"+r)}))]}):null}),{})]})};function ML(e,t){return"".concat(e,"Color")in t.schema.styleSchema&&t.schema.styleSchema["".concat(e,"Color")].type==="".concat(e,"Color")&&"string"===t.schema.styleSchema["".concat(e,"Color")].propSchema}var AL=function(){var e=sP(),t=cP(),n=nP(),r=ML("text",n),o=ML("background",n),i=xL(n),a=JN((0,f.useState)(r&&n.getActiveStyles().textColor||"default"),2),s=a[0],l=a[1],c=JN((0,f.useState)(o&&n.getActiveStyles().backgroundColor||"default"),2),u=c[0],d=c[1];kL((function(){r&&l(n.getActiveStyles().textColor||"default"),o&&d(n.getActiveStyles().backgroundColor||"default")}),n);var p=(0,f.useCallback)((function(e){if(!r)throw Error("Tried to set text color, but style does not exist in editor schema.");"default"===e?n.removeStyles({textColor:e}):n.addStyles({textColor:e}),setTimeout((function(){n.focus()}))}),[n,r]),h=(0,f.useCallback)((function(e){if(!o)throw Error("Tried to set background color, but style does not exist in editor schema.");"default"===e?n.removeStyles({backgroundColor:e}):n.addStyles({backgroundColor:e}),setTimeout((function(){n.focus()}))}),[o,n]);return(0,f.useMemo)((function(){if(!r&&!o)return!1;var e,t=VN(i);try{for(t.s();!(e=t.n()).done;)if(void 0!==e.value.content)return!0}catch(e){t.e(e)}finally{t.f()}return!1}),[o,i,r])&&n.isEditable?(0,T.jsxs)(e.Generic.Menu.Root,{children:[(0,T.jsx)(e.Generic.Menu.Trigger,{children:(0,T.jsx)(e.FormattingToolbar.Button,{className:"bn-button","data-test":"colors",label:t.formatting_toolbar.colors.tooltip,mainTooltip:t.formatting_toolbar.colors.tooltip,icon:(0,T.jsx)(_L,{textColor:s,backgroundColor:u,size:20})})}),(0,T.jsx)(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-color-picker-dropdown",children:(0,T.jsx)(DL,{text:r?{color:s,setColor:p}:void 0,background:o?{color:u,setColor:h}:void 0})})]}):null},OL=function(e){var t,n=VN(kA);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.startsWith(r))return e}}catch(e){n.e(e)}finally{n.f()}return"".concat(wA,"://").concat(e)},TL=function(e){var t=sP(),n=cP(),r=e.url,o=e.text,i=e.editLink,a=JN((0,f.useState)(r),2),s=a[0],l=a[1],c=JN((0,f.useState)(o),2),u=c[0],d=c[1];(0,f.useEffect)((function(){l(r),d(o)}),[o,r]);var p=(0,f.useCallback)((function(e){"Enter"===e.key&&(e.preventDefault(),i(OL(s),u))}),[i,s,u]),h=(0,f.useCallback)((function(e){return l(e.currentTarget.value)}),[]),m=(0,f.useCallback)((function(e){return d(e.currentTarget.value)}),[]),v=(0,f.useCallback)((function(){return i(OL(s),u)}),[i,s,u]);return(0,T.jsxs)(t.Generic.Form.Root,{children:[(0,T.jsx)(t.Generic.Form.TextInput,{className:"bn-text-input",name:"url",icon:(0,T.jsx)(HP,{}),autoFocus:!0,placeholder:n.link_toolbar.form.url_placeholder,value:s,onKeyDown:p,onChange:h,onSubmit:v}),(0,T.jsx)(t.Generic.Form.TextInput,{className:"bn-text-input",name:"title",icon:(0,T.jsx)(WP,{}),placeholder:n.link_toolbar.form.title_placeholder,value:u,onKeyDown:p,onChange:m,onSubmit:v})]})},jL=function(){var e,t=nP(),n=sP(),r=cP(),o=function(e){return"link"in e.schema.inlineContentSchema&&"link"===e.schema.inlineContentSchema.link}(t),i=xL(t),a=JN((0,f.useState)(!1),2),s=a[0],l=a[1],c=JN((0,f.useState)(t.getSelectedLinkUrl()||""),2),u=c[0],d=c[1],p=JN((0,f.useState)(t.getSelectedText()),2),h=p[0],m=p[1];kL((function(){l(!1),m(t.getSelectedText()||""),d(t.getSelectedLinkUrl()||"")}),t),(0,f.useEffect)((function(){var e,n=function(e){(e.ctrlKey||e.metaKey)&&"k"===e.key&&(l(!0),e.preventDefault())};return null==(e=t.prosemirrorView)||e.dom.addEventListener("keydown",n),function(){var e;null==(e=t.prosemirrorView)||e.dom.removeEventListener("keydown",n)}}),[null==(e=t.prosemirrorView)?void 0:e.dom]);var v=(0,f.useCallback)((function(e,n){t.createLink(e,n),t.focus()}),[t]);return(0,f.useMemo)((function(){if(!o)return!1;var e,n=VN(i);try{for(n.s();!(e=n.n()).done;)if(void 0===e.value.content)return!1}catch(e){n.e(e)}finally{n.f()}return!uM(t.prosemirrorState.selection)}),[o,i,t.prosemirrorState.selection])&&"link"in t.schema.inlineContentSchema&&t.isEditable?(0,T.jsxs)(n.Generic.Popover.Root,{opened:s,children:[(0,T.jsx)(n.Generic.Popover.Trigger,{children:(0,T.jsx)(n.FormattingToolbar.Button,{className:"bn-button","data-test":"createLink",label:r.formatting_toolbar.link.tooltip,mainTooltip:r.formatting_toolbar.link.tooltip,secondaryTooltip:rE(r.formatting_toolbar.link.secondary_tooltip,r.generic.ctrl_shortcut),icon:(0,T.jsx)(HP,{}),onClick:function(){return l(!0)}})}),(0,T.jsx)(n.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:(0,T.jsx)(TL,{url:u,text:h,editLink:v})})]}):null},NL=function(){var e=cP(),t=sP(),n=nP(),r=JN((0,f.useState)(),2),o=r[0],i=r[1],a=xL(n),s=(0,f.useMemo)((function(){if(1===a.length){var e=a[0];return aM(e,n)?(i(e.props.caption),e):void 0}}),[n,a]),l=(0,f.useCallback)((function(e){s&&"Enter"===e.key&&(e.preventDefault(),n.updateBlock(s,{props:{caption:o}}))}),[o,n,s]),c=(0,f.useCallback)((function(e){return i(e.currentTarget.value)}),[]);return s&&!sM(s,n)&&n.isEditable?(0,T.jsxs)(t.Generic.Popover.Root,{children:[(0,T.jsx)(t.Generic.Popover.Trigger,{children:(0,T.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_caption.tooltip,mainTooltip:e.formatting_toolbar.file_caption.tooltip,icon:(0,T.jsx)(BP,{}),isSelected:""!==s.props.caption})}),(0,T.jsx)(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:(0,T.jsx)(t.Generic.Form.Root,{children:(0,T.jsx)(t.Generic.Form.TextInput,{name:"file-caption",icon:(0,T.jsx)(BP,{}),value:o||"",autoFocus:!0,placeholder:e.formatting_toolbar.file_caption.input_placeholder,onKeyDown:l,onChange:c})})})]}):null},PL=function(){var e=cP(),t=sP(),n=nP(),r=xL(n),o=(0,f.useMemo)((function(){if(1===r.length){var e=r[0];return aM(e,n)?e:void 0}}),[n,r]),i=(0,f.useCallback)((function(){n.focus(),n.removeBlocks([o])}),[n,o]);return o&&!sM(o,n)&&n.isEditable?(0,T.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_delete.tooltip[o.type]||e.formatting_toolbar.file_delete.tooltip.file,mainTooltip:e.formatting_toolbar.file_delete.tooltip[o.type]||e.formatting_toolbar.file_delete.tooltip.file,icon:(0,T.jsx)(eL,{}),onClick:i}):null},LL=function(){var e=cP(),t=sP(),n=nP(),r=JN((0,f.useState)(),2),o=r[0],i=r[1],a=xL(n),s=(0,f.useMemo)((function(){if(1===a.length){var e=a[0];return aM(e,n)?(i(e.props.name),e):void 0}}),[n,a]),l=(0,f.useCallback)((function(e){s&&"Enter"===e.key&&(e.preventDefault(),n.updateBlock(s,{props:{name:o}}))}),[o,n,s]),c=(0,f.useCallback)((function(e){return i(e.currentTarget.value)}),[]);return s&&!sM(s,n)&&n.isEditable?(0,T.jsxs)(t.Generic.Popover.Root,{children:[(0,T.jsx)(t.Generic.Popover.Trigger,{children:(0,T.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_rename.tooltip[s.type]||e.formatting_toolbar.file_rename.tooltip.file,mainTooltip:e.formatting_toolbar.file_rename.tooltip[s.type]||e.formatting_toolbar.file_rename.tooltip.file,icon:(0,T.jsx)(jP,{})})}),(0,T.jsx)(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:(0,T.jsx)(t.Generic.Form.Root,{children:(0,T.jsx)(t.Generic.Form.TextInput,{name:"file-name",icon:(0,T.jsx)(jP,{}),value:o||"",autoFocus:!0,placeholder:e.formatting_toolbar.file_rename.input_placeholder[s.type]||e.formatting_toolbar.file_rename.input_placeholder.file,onKeyDown:l,onChange:c})})})]}):null},RL=function(){var e=cP(),t=sP(),n=nP(),r=xL(n),o=JN((0,f.useState)(!1),2),i=o[0],a=o[1];(0,f.useEffect)((function(){a(!1)}),[r]);var s=1===r.length?r[0]:void 0;return void 0!==s&&aM(s,n)&&n.isEditable?(0,T.jsxs)(t.Generic.Popover.Root,{opened:i,position:"bottom",children:[(0,T.jsx)(t.Generic.Popover.Trigger,{children:(0,T.jsx)(t.FormattingToolbar.Button,{className:"bn-button",onClick:function(){return a(!i)},isSelected:i,mainTooltip:e.formatting_toolbar.file_replace.tooltip[s.type]||e.formatting_toolbar.file_replace.tooltip.file,label:e.formatting_toolbar.file_replace.tooltip[s.type]||e.formatting_toolbar.file_replace.tooltip.file,icon:(0,T.jsx)(ZP,{})})}),(0,T.jsx)(t.Generic.Popover.Content,{className:"bn-popover-content bn-panel-popover",variant:"panel-popover",children:(0,T.jsx)(yL,{block:s})})]}):null},IL=function(){var e=cP(),t=sP(),n=nP(),r=xL(n),o=JN((0,f.useState)((function(){return n.canNestBlock()})),2),i=o[0],a=o[1];kL((function(){a(n.canNestBlock())}),n);var s=(0,f.useCallback)((function(){n.focus(),n.nestBlock()}),[n]);return(0,f.useMemo)((function(){return!r.find((function(e){return"inline"!==n.schema.blockSchema[e.type].content}))}),[n.schema.blockSchema,r])&&n.isEditable?(0,T.jsx)(t.FormattingToolbar.Button,{className:"bn-button","data-test":"nestBlock",onClick:s,isDisabled:!i,label:e.formatting_toolbar.nest.tooltip,mainTooltip:e.formatting_toolbar.nest.tooltip,secondaryTooltip:rE(e.formatting_toolbar.nest.secondary_tooltip,e.generic.ctrl_shortcut),icon:(0,T.jsx)(IP,{})}):null},BL=function(){var e=cP(),t=sP(),n=nP(),r=xL(n),o=JN((0,f.useState)((function(){return n.canUnnestBlock()})),2),i=o[0],a=o[1];kL((function(){a(n.canUnnestBlock())}),n);var s=(0,f.useCallback)((function(){n.focus(),n.unnestBlock()}),[n]);return(0,f.useMemo)((function(){return!r.find((function(e){return"inline"!==n.schema.blockSchema[e.type].content}))}),[n.schema.blockSchema,r])&&n.isEditable?(0,T.jsx)(t.FormattingToolbar.Button,{className:"bn-button","data-test":"unnestBlock",onClick:s,isDisabled:!i,label:e.formatting_toolbar.unnest.tooltip,mainTooltip:e.formatting_toolbar.unnest.tooltip,secondaryTooltip:rE(e.formatting_toolbar.unnest.secondary_tooltip,e.generic.ctrl_shortcut),icon:(0,T.jsx)(RP,{})}):null},FL=function(e){var t=sP(),n=cP(),r=nP(),o=xL(r),i=JN((0,f.useState)(r.getTextCursorPosition().block),2),a=i[0],s=i[1],l=(0,f.useMemo)((function(){return(e.items||function(e){return[{name:e.slash_menu.paragraph.title,type:"paragraph",icon:WP,isSelected:function(e){return"paragraph"===e.type}},{name:e.slash_menu.heading.title,type:"heading",props:{level:1},icon:NP,isSelected:function(e){return"heading"===e.type&&"level"in e.props&&1===e.props.level}},{name:e.slash_menu.heading_2.title,type:"heading",props:{level:2},icon:PP,isSelected:function(e){return"heading"===e.type&&"level"in e.props&&2===e.props.level}},{name:e.slash_menu.heading_3.title,type:"heading",props:{level:3},icon:LP,isSelected:function(e){return"heading"===e.type&&"level"in e.props&&3===e.props.level}},{name:e.slash_menu.bullet_list.title,type:"bulletListItem",icon:$P,isSelected:function(e){return"bulletListItem"===e.type}},{name:e.slash_menu.numbered_list.title,type:"numberedListItem",icon:VP,isSelected:function(e){return"numberedListItem"===e.type}},{name:e.slash_menu.check_list.title,type:"checkListItem",icon:zP,isSelected:function(e){return"checkListItem"===e.type}}]}(n)).filter((function(e){return e.type in r.schema.blockSchema}))}),[r,n,e.items]),c=(0,f.useMemo)((function(){return void 0!==l.find((function(e){return e.type===a.type}))}),[a.type,l]),u=(0,f.useMemo)((function(){return l.map((function(e){var t=e.icon;return{text:e.name,icon:(0,T.jsx)(t,{size:16}),onClick:function(){return function(e){r.focus();var t,n=VN(o);try{for(n.s();!(t=n.n()).done;){var i=t.value;r.updateBlock(i,{type:e.type,props:e.props})}}catch(e){n.e(e)}finally{n.f()}}(e)},isSelected:e.isSelected(a)}}))}),[a,l,r,o]);return kL((function(){s(r.getTextCursorPosition().block)}),r),c&&r.isEditable?(0,T.jsx)(t.FormattingToolbar.Select,{className:"bn-select",items:u}):null},HL=function(){var e=cP(),t=sP(),n=nP(),r=(0,f.useCallback)((function(){var e;null==(e=n.comments)||e.startPendingComment(),n.formattingToolbar.closeMenu()}),[n]);return n.comments?(0,T.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.comment.tooltip,mainTooltip:e.formatting_toolbar.comment.tooltip,icon:(0,T.jsx)(AP,{}),onClick:r}):null},zL=function(){var e=cP(),t=sP(),n=nP(),r=(0,f.useCallback)((function(){n._tiptapEditor.chain().focus().addPendingComment().run()}),[n]);return n._tiptapEditor.commands.addPendingComment&&n.isEditable?(0,T.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.comment.tooltip,mainTooltip:e.formatting_toolbar.comment.tooltip,icon:(0,T.jsx)(AP,{}),onClick:r}):null};function VL(e,t){try{var n=new URL(e,t);if("javascript:"!==n.protocol)return n.href}catch(e){}return"#"}var $L=function(){var e=cP(),t=sP(),n=nP(),r=xL(n),o=(0,f.useMemo)((function(){if(1===r.length){var e=r[0];return aM(e,n)?e:void 0}}),[n,r]),i=(0,f.useCallback)((function(){o&&o.props.url&&(n.focus(),n.resolveFileUrl?n.resolveFileUrl(o.props.url).then((function(e){return window.open(VL(e,window.location.href))})):window.open(VL(o.props.url,window.location.href)))}),[n,o]);return!o||sM(o,n)?null:(0,T.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_download.tooltip[o.type]||e.formatting_toolbar.file_download.tooltip.file,mainTooltip:e.formatting_toolbar.file_download.tooltip[o.type]||e.formatting_toolbar.file_download.tooltip.file,icon:(0,T.jsx)(nL,{}),onClick:i})},UL=function(){var e=cP(),t=sP(),n=nP(),r=xL(n),o=(0,f.useMemo)((function(){if(1===r.length){var e=r[0];return function(e,t){return e.type in t.schema.blockSchema&&t.schema.blockSchema[e.type].isFileBlock&&"showPreview"in t.schema.blockSchema[e.type].propSchema||!1}(e,n)?e:void 0}}),[n,r]),i=(0,f.useCallback)((function(){o&&n.updateBlock(o,{props:{showPreview:!o.props.showPreview}})}),[n,o]);return o&&!sM(o,n)&&n.isEditable?(0,T.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:"Toggle preview",mainTooltip:e.formatting_toolbar.file_preview_toggle.tooltip,icon:(0,T.jsx)(KP,{}),isSelected:o.props.showPreview,onClick:i}):null},GL=function(){var e=cP(),t=sP(),n=nP(),r=xL(n),o=(0,f.useMemo)((function(){var e;if(1===r.length){var t=r[0];return"table"===t.type?null==(e=n.tableHandles)?void 0:e.getMergeDirection(t):void 0}}),[n,r]),i=(0,f.useCallback)((function(){var e;null==(e=n.tableHandles)||e.mergeCells()}),[n]);return n.isEditable&&void 0!==o&&n.settings.tables.splitCells?(0,T.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.table_cell_merge.tooltip,mainTooltip:e.formatting_toolbar.table_cell_merge.tooltip,icon:"horizontal"===o?(0,T.jsx)(UP,{}):(0,T.jsx)(GP,{}),onClick:i}):null},WL={left:function(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H17V21H3V19ZM3 14H21V16H3V14ZM3 9H17V11H3V9Z"},child:[]}]})(e)},center:function(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM5 19H19V21H5V19ZM3 14H21V16H3V14ZM5 9H19V11H5V9Z"},child:[]}]})(e)},right:function(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM7 19H21V21H7V19ZM3 14H21V16H3V14ZM7 9H21V11H7V9Z"},child:[]}]})(e)},justify:function(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM3 14H21V16H3V14ZM3 9H21V11H3V9Z"},child:[]}]})(e)}},qL=function(e){var t=sP(),n=cP(),r=nP(),o=xL(r),i=(0,f.useMemo)((function(){var e,t=o[0];if(cM("textAlignment",t,r))return t.props.textAlignment;if("table"===t.type){var n=null==(e=r.tableHandles)?void 0:e.getCellSelection();if(!n)return;var i=n.cells.map((function(e){var n=e.row,r=e.col;return Y_(t.content.rows[n].cells[r]).props.textAlignment})),a=i[0];if(i.every((function(e){return e===a})))return a}}),[r,o]),a=(0,f.useCallback)((function(e){var t;r.focus();var n,i=VN(o);try{var a=function(){var o=n.value;if(lM("textAlignment",o.type,r))r.updateBlock(o,{props:{textAlignment:e}});else if("table"===o.type){var i=null==(t=r.tableHandles)?void 0:t.getCellSelection();if(!i)return 1;var a=o.content.rows.map((function(e){return KN(KN({},e),{},{cells:e.cells.map((function(e){return Y_(e)}))})}));i.cells.forEach((function(t){var n=t.row,r=t.col;a[n].cells[r].props.textAlignment=e})),r.updateBlock(o,{type:"table",content:KN(KN({},o.content),{},{type:"tableContent",rows:a})}),r.setTextCursorPosition(o)}};for(i.s();!(n=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}}),[r,o]);if(!(0,f.useMemo)((function(){return!!o.find((function(e){return"textAlignment"in e.props||"table"===e.type&&e.children}))}),[o])||!r.isEditable)return null;var s=WL[e.textAlignment];return(0,T.jsx)(t.FormattingToolbar.Button,{className:"bn-button","data-test":"alignText".concat(e.textAlignment.slice(0,1).toUpperCase()+e.textAlignment.slice(1)),onClick:function(){return a(e.textAlignment)},isSelected:i===e.textAlignment,label:n.formatting_toolbar["align_".concat(e.textAlignment)].tooltip,mainTooltip:n.formatting_toolbar["align_".concat(e.textAlignment)].tooltip,icon:(0,T.jsx)(s,{})})},KL=function(e){return[(0,T.jsx)(FL,{items:e},"blockTypeSelect"),(0,T.jsx)(GL,{},"tableCellMergeButton"),(0,T.jsx)(NL,{},"fileCaptionButton"),(0,T.jsx)(RL,{},"replaceFileButton"),(0,T.jsx)(LL,{},"fileRenameButton"),(0,T.jsx)(PL,{},"fileDeleteButton"),(0,T.jsx)($L,{},"fileDownloadButton"),(0,T.jsx)(UL,{},"filePreviewButton"),(0,T.jsx)(SL,{basicTextStyle:"bold"},"boldStyleButton"),(0,T.jsx)(SL,{basicTextStyle:"italic"},"italicStyleButton"),(0,T.jsx)(SL,{basicTextStyle:"underline"},"underlineStyleButton"),(0,T.jsx)(SL,{basicTextStyle:"strike"},"strikeStyleButton"),(0,T.jsx)(qL,{textAlignment:"left"},"textAlignLeftButton"),(0,T.jsx)(qL,{textAlignment:"center"},"textAlignCenterButton"),(0,T.jsx)(qL,{textAlignment:"right"},"textAlignRightButton"),(0,T.jsx)(AL,{},"colorStyleButton"),(0,T.jsx)(IL,{},"nestBlockButton"),(0,T.jsx)(BL,{},"unnestBlockButton"),(0,T.jsx)(jL,{},"createLinkButton"),(0,T.jsx)(HL,{},"addCommentButton"),(0,T.jsx)(zL,{},"addTiptapCommentButton")]},ZL=function(e){var t=sP();return(0,T.jsx)(t.FormattingToolbar.Root,{className:"bn-toolbar bn-formatting-toolbar",children:e.children||KL(e.blockTypeSelectItems)})},JL=function(e){switch(e){case"left":default:return"top-start";case"center":return"top";case"right":return"top-end"}},XL=function(e){var t=(0,f.useRef)(null),n=nP(),r=JN((0,f.useState)((function(){var e=n.getTextCursorPosition().block;return"textAlignment"in e.props?JL(e.props.textAlignment):"top-start"})),2),o=r[0],i=r[1];kL((function(){var e=n.getTextCursorPosition().block;"textAlignment"in e.props?i(JL(e.props.textAlignment)):i("top-start")}),n);var a=iP(n.formattingToolbar.onUpdate.bind(n.formattingToolbar)),s=oP((null==a?void 0:a.show)||!1,(null==a?void 0:a.referencePos)||null,3e3,KN({placement:o,middleware:[sj(10),lj(),uj()],onOpenChange:function(e,t){e||(n.formattingToolbar.closeMenu(),n.focus())}},e.floatingOptions)),l=s.isMounted,c=s.ref,u=s.style,d=s.getFloatingProps,p=(0,f.useMemo)((function(){return wL([t,c])}),[t,c]);if(!l||!a)return null;if(!a.show&&t.current)return(0,T.jsx)("div",{ref:p,style:u,dangerouslySetInnerHTML:{__html:t.current.innerHTML}});var h=e.formattingToolbar||ZL;return(0,T.jsx)("div",KN(KN({ref:p,style:u},d()),{},{children:(0,T.jsx)(h,{})}))},YL=function(e){var t=sP(),n=cP();return(0,T.jsx)(t.LinkToolbar.Button,{className:"bn-button",label:n.link_toolbar.delete.tooltip,mainTooltip:n.link_toolbar.delete.tooltip,isSelected:!1,onClick:e.deleteLink,icon:(0,T.jsx)(FP,{})})},QL=function(e){var t=sP(),n=cP();return(0,T.jsxs)(t.Generic.Popover.Root,{children:[(0,T.jsx)(t.Generic.Popover.Trigger,{children:(0,T.jsx)(t.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.edit.tooltip,isSelected:!1,children:n.link_toolbar.edit.text})}),(0,T.jsx)(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:(0,T.jsx)(TL,KN({},e))})]})},eR=function(e){var t=sP(),n=cP();return(0,T.jsx)(t.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.open.tooltip,label:n.link_toolbar.open.tooltip,isSelected:!1,onClick:function(){window.open(VL(e.url,window.location.href),"_blank")},icon:(0,T.jsx)(rL,{})})},tR=function(e){var t=sP();return e.children?(0,T.jsx)(t.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",children:e.children}):(0,T.jsxs)(t.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",onMouseEnter:e.stopHideTimer,onMouseLeave:e.startHideTimer,children:[(0,T.jsx)(QL,{url:e.url,text:e.text,editLink:e.editLink}),(0,T.jsx)(eR,{url:e.url}),(0,T.jsx)(YL,{deleteLink:e.deleteLink})]})},nR=function(e){var t=nP(),n={deleteLink:t.linkToolbar.deleteLink,editLink:t.linkToolbar.editLink,startHideTimer:t.linkToolbar.startHideTimer,stopHideTimer:t.linkToolbar.stopHideTimer},r=iP(t.linkToolbar.onUpdate.bind(t.linkToolbar)),o=oP((null==r?void 0:r.show)||!1,(null==r?void 0:r.referencePos)||null,4e3,KN({placement:"top-start",middleware:[sj(10),uj()],onOpenChange:function(e){e||(t.linkToolbar.closeMenu(),t.focus())}},e.floatingOptions)),i=o.isMounted,a=o.ref,s=o.style,l=o.getFloatingProps;if(!i||!r)return null;r.show,r.referencePos;var c=WN(r,BN),u=e.linkToolbar||tR;return(0,T.jsx)("div",KN(KN({ref:a,style:s},l()),{},{children:(0,T.jsx)(u,KN(KN({},c),n))}))};function rR(e){return EP({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"},child:[]},{tag:"path",attr:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},child:[]}]})(e)}var oR=function(e){var t=sP(),n=cP(),r=nP(),o=(0,f.useCallback)((function(){var t=e.block.content;if(void 0!==t&&Array.isArray(t)&&0===t.length)r.setTextCursorPosition(e.block),r.openSuggestionMenu("/");else{var n=r.insertBlocks([{type:"paragraph"}],e.block,"after")[0];r.setTextCursorPosition(n),r.openSuggestionMenu("/")}}),[r,e.block]);return(0,T.jsx)(t.SideMenu.Button,{className:"bn-button",label:n.side_menu.add_block_label,icon:(0,T.jsx)(rR,{size:24,onClick:o,"data-test":"dragHandleAdd"})})};function iR(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(e)}function aR(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(e)}var sR=function(e){var t=sP(),n=nP();return lM("textColor",e.block.type,n)||lM("backgroundColor",e.block.type,n)?(0,T.jsxs)(t.Generic.Menu.Root,{position:"right",sub:!0,children:[(0,T.jsx)(t.Generic.Menu.Trigger,{sub:!0,children:(0,T.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children})}),(0,T.jsx)(t.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:(0,T.jsx)(DL,{iconSize:18,text:lM("textColor",e.block.type,n)&&cM("textColor",e.block,n)?{color:e.block.props.textColor,setColor:function(t){return n.updateBlock(e.block,{type:e.block.type,props:{textColor:t}})}}:void 0,background:lM("backgroundColor",e.block.type,n)&&cM("backgroundColor",e.block,n)?{color:e.block.props.backgroundColor,setColor:function(t){return n.updateBlock(e.block,{props:{backgroundColor:t}})}}:void 0})})]}):null},lR=function(e){var t=sP(),n=nP();return(0,T.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",onClick:function(){return n.removeBlocks([e.block])},children:e.children})},cR=function(e){var t=sP(),n=nP();if("table"!==e.block.type||!n.settings.tables.headers)return null;var r=!!e.block.content.headerRows;return(0,T.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:function(){var t=n.getBlock(e.block.id);t&&n.updateBlock(t,KN(KN({},t),{},{content:KN(KN({},t.content),{},{headerRows:r?void 0:1})}))},children:e.children})},uR=function(e){var t=sP(),n=nP();if("table"!==e.block.type||!n.settings.tables.headers)return null;var r=!!e.block.content.headerCols;return(0,T.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:function(){n.updateBlock(e.block,{type:"table",content:KN(KN({},e.block.content),{},{type:"tableContent",headerCols:r?void 0:1})})},children:e.children})},dR=function(e){var t=sP(),n=cP();return(0,T.jsx)(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:e.children||(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(lR,KN(KN({},e),{},{children:n.drag_handle.delete_menuitem})),(0,T.jsx)(sR,KN(KN({},e),{},{children:n.drag_handle.colors_menuitem})),(0,T.jsx)(cR,KN(KN({},e),{},{children:n.drag_handle.header_row_menuitem})),(0,T.jsx)(uR,KN(KN({},e),{},{children:n.drag_handle.header_column_menuitem}))]})})},fR=function(e){var t=sP(),n=cP(),r=e.dragHandleMenu||dR;return(0,T.jsxs)(t.Generic.Menu.Root,{onOpenChange:function(t){t?e.freezeMenu():e.unfreezeMenu()},position:"left",children:[(0,T.jsx)(t.Generic.Menu.Trigger,{children:(0,T.jsx)(t.SideMenu.Button,{label:n.side_menu.drag_handle_label,draggable:!0,onDragStart:function(t){return e.blockDragStart(t,e.block)},onDragEnd:e.blockDragEnd,className:"bn-button",icon:(0,T.jsx)(iR,{size:24,"data-test":"dragHandle"})})}),(0,T.jsx)(r,{block:e.block})]})},pR=function(e){var t=sP(),n=(0,f.useMemo)((function(){var t={"data-block-type":e.block.type};return"heading"===e.block.type&&(t["data-level"]=e.block.props.level.toString()),e.editor.schema.blockSchema[e.block.type].isFileBlock&&(e.block.props.url?t["data-url"]="true":t["data-url"]="false"),t}),[e.block,e.editor.schema.blockSchema]);return(0,T.jsx)(t.SideMenu.Root,KN(KN({className:"bn-side-menu"},n),{},{children:e.children||(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(oR,KN({},e)),(0,T.jsx)(fR,KN({},e))]})}))},hR=function(e){var t=nP(),n={blockDragStart:t.sideMenu.blockDragStart,blockDragEnd:t.sideMenu.blockDragEnd,freezeMenu:t.sideMenu.freezeMenu,unfreezeMenu:t.sideMenu.unfreezeMenu},r=iP(t.sideMenu.onUpdate.bind(t.sideMenu)),o=oP((null==r?void 0:r.show)||!1,(null==r?void 0:r.referencePos)||null,1e3,KN({placement:"left-start"},e.floatingOptions)),i=o.isMounted,a=o.ref,s=o.style,l=o.getFloatingProps;if(!i||!r)return null;r.show,r.referencePos;var c=WN(r,FN),u=e.sideMenu||pR;return(0,T.jsx)("div",KN(KN({ref:a,style:s},l()),{},{children:(0,T.jsx)(u,KN(KN(KN({},c),n),{},{editor:t}))}))};function mR(e,t){return vR.apply(this,arguments)}function vR(){return(vR=GN($N().mark((function e(t,n){return $N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mO(t,n);case 2:return e.abrupt("return",e.sent.map((function(e){var t=e.id;return{id:t,onItemClick:e.onItemClick,icon:t}})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gR(e){var t=sP(),n=cP(),r=e.items,o=e.loadingState,i=e.selectedIndex,a=e.onItemClick,s=e.columns,l="loading-initial"===o||"loading"===o?(0,T.jsx)(t.GridSuggestionMenu.Loader,{className:"bn-grid-suggestion-menu-loader",columns:s,children:n.suggestion_menu.loading}):null,c=(0,f.useMemo)((function(){for(var e=[],n=function(){var n=r[o];e.push((0,T.jsx)(t.GridSuggestionMenu.Item,{className:"bn-grid-suggestion-menu-item",item:n,id:"bn-grid-suggestion-menu-item-".concat(o),isSelected:o===i,onClick:function(){return null==a?void 0:a(n)}},n.id))},o=0;o<r.length;o++)n();return e}),[t,r,a,i]);return(0,T.jsxs)(t.GridSuggestionMenu.Root,{id:"bn-grid-suggestion-menu",columns:s,className:"bn-grid-suggestion-menu",children:[l,c,0===c.length&&"loaded"===e.loadingState&&(0,T.jsx)(t.GridSuggestionMenu.EmptyItem,{className:"bn-grid-suggestion-menu-empty-item",columns:s,children:n.suggestion_menu.no_items_title})]})}function yR(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,o=(0,f.useRef)(0);(0,f.useEffect)((function(){void 0!==t&&(e.length>0?o.current=t.length:t.length-o.current>r&&n())}),[n,r,e.length,t])}function bR(e,t){var n=JN((0,f.useState)([]),2),r=n[0],o=n[1],i=JN((0,f.useState)(!1),2),a=i[0],s=i[1],l=(0,f.useRef)(),c=(0,f.useRef)();return(0,f.useEffect)((function(){var n=e;l.current=e,s(!0),t(e).then((function(e){l.current===n&&(o(e),s(!1),c.current=n)}))}),[e,t]),{items:r||[],usedQuery:c.current,loadingState:void 0===c.current?"loading-initial":a?"loading":"loaded"}}function kR(e){var t=tP().setContentEditableProps,n=nP(),r=e.getItems,o=e.gridSuggestionMenuComponent,i=e.query,a=e.clearQuery,s=e.closeMenu,l=e.onItemClick,c=e.columns,u=(0,f.useCallback)((function(e){s(),a(),null==l||l(e)}),[l,s,a]),d=bR(i,r),p=d.items,h=d.usedQuery,m=d.loadingState;yR(p,h,s);var v=function(e,t,n,r,o){var i=JN((0,f.useState)(0),2),a=i[0],s=i[1],l=void 0!==r&&r>1;return(0,f.useEffect)((function(){var t,i=function(e){return"ArrowLeft"===e.key&&(e.preventDefault(),n.length&&s((a-1+n.length)%n.length)),"ArrowRight"===e.key&&(e.preventDefault(),n.length&&s((a+1+n.length)%n.length)),"ArrowUp"===e.key?(e.preventDefault(),n.length&&s((a-r+n.length)%n.length),!0):"ArrowDown"===e.key?(e.preventDefault(),n.length&&s((a+r)%n.length),!0):"Enter"===e.key&&!e.isComposing&&(e.preventDefault(),n.length&&(null==o||o(n[a])),!0)};return null==(t=e.domElement)||t.addEventListener("keydown",i,!0),function(){var t;null==(t=e.domElement)||t.removeEventListener("keydown",i,!0)}}),[e.domElement,n,a,o,r,l]),(0,f.useEffect)((function(){s(0)}),[t]),{selectedIndex:0===n.length?void 0:a}}(n,i,p,c,u),g=v.selectedIndex;return(0,f.useEffect)((function(){return t((function(e){return KN(KN({},e),{},{"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})})),function(){t((function(e){return KN(KN({},e),{},{"aria-expanded":!1,"aria-controls":void 0})}))}}),[t]),(0,f.useEffect)((function(){return t((function(e){return KN(KN({},e),{},{"aria-activedescendant":g?"bn-suggestion-menu-item-"+g:void 0})})),function(){t((function(e){return KN(KN({},e),{},{"aria-activedescendant":void 0})}))}}),[t,g]),(0,T.jsx)(o,{items:p,onItemClick:u,loadingState:m,selectedIndex:g,columns:c})}function wR(e){var t=nP(),n=e.triggerCharacter,r=e.gridSuggestionMenuComponent,o=e.columns,i=e.minQueryLength,a=e.onItemClick,s=e.getItems,l=e.floatingOptions,c=(0,f.useMemo)((function(){return a||function(e){e.onItemClick(t)}}),[t,a]),u=(0,f.useMemo)((function(){return s||function(){var e=GN($N().mark((function e(n){return $N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mR(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),[t,s]),d={closeMenu:t.suggestionMenus.closeMenu,clearQuery:t.suggestionMenus.clearQuery},p=iP((0,f.useCallback)((function(e){return t.suggestionMenus.onUpdate(n,e)}),[t.suggestionMenus,n])),h=oP((null==p?void 0:p.show)||!1,(null==p?void 0:p.referencePos)||null,2e3,KN({placement:"bottom-start",middleware:[sj(10),uj(),dj({apply:function(e){var t=e.availableHeight,n=e.elements;Object.assign(n.floating.style,{maxHeight:"".concat(t-10,"px")})}})],onOpenChange:function(e){e||t.suggestionMenus.closeMenu()}},l)),m=h.isMounted,v=h.ref,g=h.style,y=h.getFloatingProps;return m&&p&&(null!=p&&p.ignoreQueryLength||!i||!(p.query.startsWith(" ")||p.query.length<i))?(0,T.jsx)("div",KN(KN({ref:v,style:g},y()),{},{children:(0,T.jsx)(kR,{query:p.query,closeMenu:d.closeMenu,clearQuery:d.clearQuery,getItems:u,columns:o,gridSuggestionMenuComponent:r||gR,onItemClick:c})})):null}function xR(e){var t=sP(),n=cP(),r=e.items,o=e.loadingState,i=e.selectedIndex,a=e.onItemClick,s="loading-initial"===o||"loading"===o?(0,T.jsx)(t.SuggestionMenu.Loader,{className:"bn-suggestion-menu-loader",children:n.suggestion_menu.loading}):null,l=(0,f.useMemo)((function(){for(var e,n=[],o=function(){var o=r[s];o.group!==e&&(e=o.group,n.push((0,T.jsx)(t.SuggestionMenu.Label,{className:"bn-suggestion-menu-label",children:e},e))),n.push((0,T.jsx)(t.SuggestionMenu.Item,{className:"bn-suggestion-menu-item",item:o,id:"bn-suggestion-menu-item-".concat(s),isSelected:s===i,onClick:function(){return null==a?void 0:a(o)}},o.title))},s=0;s<r.length;s++)o();return n}),[t,r,a,i]);return(0,T.jsxs)(t.SuggestionMenu.Root,{id:"bn-suggestion-menu",className:"bn-suggestion-menu",children:[l,0===l.length&&("loading"===e.loadingState||"loaded"===e.loadingState)&&(0,T.jsx)(t.SuggestionMenu.EmptyItem,{className:"bn-suggestion-menu-item",children:n.suggestion_menu.no_items_title}),s]})}function CR(e){var t=tP().setContentEditableProps,n=nP(),r=e.getItems,o=e.suggestionMenuComponent,i=e.query,a=e.clearQuery,s=e.closeMenu,l=e.onItemClick,c=(0,f.useCallback)((function(e){s(),a(),null==l||l(e)}),[l,s,a]),u=bR(i,r),d=u.items,p=u.usedQuery,h=u.loadingState;yR(d,p,s);var m=function(e,t,n,r){var o=JN((0,f.useState)(0),2),i=o[0],a=o[1];return(0,f.useEffect)((function(){var t,o=function(e){return"ArrowUp"===e.key?(e.preventDefault(),n.length&&a((i-1+n.length)%n.length),!0):"ArrowDown"===e.key?(e.preventDefault(),n.length&&a((i+1)%n.length),!0):"Enter"===e.key&&!e.isComposing&&(e.preventDefault(),e.stopPropagation(),n.length&&(null==r||r(n[i])),!0)};return null==(t=e.domElement)||t.addEventListener("keydown",o,!0),function(){var t;null==(t=e.domElement)||t.removeEventListener("keydown",o,!0)}}),[e.domElement,n,i,r]),(0,f.useEffect)((function(){a(0)}),[t]),{selectedIndex:0===n.length?void 0:i}}(n,i,d,c),v=m.selectedIndex;return(0,f.useEffect)((function(){return t((function(e){return KN(KN({},e),{},{"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})})),function(){t((function(e){return KN(KN({},e),{},{"aria-expanded":!1,"aria-controls":void 0})}))}}),[t]),(0,f.useEffect)((function(){return t((function(e){return KN(KN({},e),{},{"aria-activedescendant":v?"bn-suggestion-menu-item-"+v:void 0})})),function(){t((function(e){return KN(KN({},e),{},{"aria-activedescendant":void 0})}))}}),[t,v]),(0,T.jsx)(o,{items:d,onItemClick:c,loadingState:h,selectedIndex:v})}var SR={heading:NP,heading_2:PP,heading_3:LP,numbered_list:VP,bullet_list:$P,check_list:zP,paragraph:WP,table:function(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 10V14H19V10H13ZM11 10H5V14H11V10ZM13 19H19V16H13V19ZM11 19V16H5V19H11ZM13 5V8H19V5H13ZM11 5H5V8H11V5ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3Z"},child:[]}]})(e)},image:qP,video:function(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"},child:[]}]})(e)},audio:XP,file:TP,emoji:function(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM8 13C8 15.2091 9.79086 17 12 17C14.2091 17 16 15.2091 16 13H8ZM8 11C8.82843 11 9.5 10.3284 9.5 9.5C9.5 8.67157 8.82843 8 8 8C7.17157 8 6.5 8.67157 6.5 9.5C6.5 10.3284 7.17157 11 8 11ZM16 11C16.8284 11 17.5 10.3284 17.5 9.5C17.5 8.67157 16.8284 8 16 8C15.1716 8 14.5 8.67157 14.5 9.5C14.5 10.3284 15.1716 11 16 11Z"},child:[]}]})(e)},code_block:function(e){return EP({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3.41436 5.99995L5.70726 3.70706L4.29304 2.29285L0.585938 5.99995L4.29304 9.70706L5.70726 8.29285L3.41436 5.99995ZM9.58594 5.99995L7.29304 3.70706L8.70726 2.29285L12.4144 5.99995L8.70726 9.70706L7.29304 8.29285L9.58594 5.99995ZM14.0002 2.99995H21.0002C21.5524 2.99995 22.0002 3.44767 22.0002 3.99995V20C22.0002 20.5522 21.5524 21 21.0002 21H3.00015C2.44787 21 2.00015 20.5522 2.00015 20V12H4.00015V19H20.0002V4.99995H14.0002V2.99995Z"},child:[]}]})(e)}};function _R(e){return function(e){var t=[];return oM("heading",e)&&t.push(C_({onItemClick:function(){dM(e,{type:"heading",props:{level:1}})},badge:rE("Mod-Alt-1"),key:"heading"},e.dictionary.slash_menu.heading),C_({onItemClick:function(){dM(e,{type:"heading",props:{level:2}})},badge:rE("Mod-Alt-2"),key:"heading_2"},e.dictionary.slash_menu.heading_2),C_({onItemClick:function(){dM(e,{type:"heading",props:{level:3}})},badge:rE("Mod-Alt-3"),key:"heading_3"},e.dictionary.slash_menu.heading_3)),oM("numberedListItem",e)&&t.push(C_({onItemClick:function(){dM(e,{type:"numberedListItem"})},badge:rE("Mod-Shift-7"),key:"numbered_list"},e.dictionary.slash_menu.numbered_list)),oM("bulletListItem",e)&&t.push(C_({onItemClick:function(){dM(e,{type:"bulletListItem"})},badge:rE("Mod-Shift-8"),key:"bullet_list"},e.dictionary.slash_menu.bullet_list)),oM("checkListItem",e)&&t.push(C_({onItemClick:function(){dM(e,{type:"checkListItem"})},badge:rE("Mod-Shift-9"),key:"check_list"},e.dictionary.slash_menu.check_list)),oM("paragraph",e)&&t.push(C_({onItemClick:function(){dM(e,{type:"paragraph"})},badge:rE("Mod-Alt-0"),key:"paragraph"},e.dictionary.slash_menu.paragraph)),oM("codeBlock",e)&&t.push(C_({onItemClick:function(){dM(e,{type:"codeBlock"})},badge:rE("Mod-Alt-c"),key:"code_block"},e.dictionary.slash_menu.code_block)),oM("table",e)&&t.push(C_({onItemClick:function(){dM(e,{type:"table",content:{type:"tableContent",rows:[{cells:["","",""]},{cells:["","",""]}]}})},badge:void 0,key:"table"},e.dictionary.slash_menu.table)),oM("image",e)&&t.push(C_({onItemClick:function(){var t=dM(e,{type:"image"});e.dispatch(e._tiptapEditor.state.tr.setMeta(e.filePanel.plugin,{block:t}))},key:"image"},e.dictionary.slash_menu.image)),oM("video",e)&&t.push(C_({onItemClick:function(){var t=dM(e,{type:"video"});e.dispatch(e._tiptapEditor.state.tr.setMeta(e.filePanel.plugin,{block:t}))},key:"video"},e.dictionary.slash_menu.video)),oM("audio",e)&&t.push(C_({onItemClick:function(){var t=dM(e,{type:"audio"});e.dispatch(e._tiptapEditor.state.tr.setMeta(e.filePanel.plugin,{block:t}))},key:"audio"},e.dictionary.slash_menu.audio)),oM("file",e)&&t.push(C_({onItemClick:function(){var t=dM(e,{type:"file"});e.dispatch(e._tiptapEditor.state.tr.setMeta(e.filePanel.plugin,{block:t}))},key:"file"},e.dictionary.slash_menu.file)),t.push(C_({onItemClick:function(){e.openSuggestionMenu(":",{deleteTriggerCharacter:!0,ignoreQueryLength:!0})},key:"emoji"},e.dictionary.slash_menu.emoji)),t}(e).map((function(e){var t=SR[e.key];return KN(KN({},e),{},{icon:(0,T.jsx)(t,{size:18})})}))}function ER(e){var t=nP(),n=e.triggerCharacter,r=e.suggestionMenuComponent,o=e.minQueryLength,i=e.onItemClick,a=e.getItems,s=e.floatingOptions,l=(0,f.useMemo)((function(){return i||function(e){e.onItemClick(t)}}),[t,i]),c=(0,f.useMemo)((function(){return a||function(){var e=GN($N().mark((function e(n){return $N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fM(_R(t),n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),[t,a]),u={closeMenu:t.suggestionMenus.closeMenu,clearQuery:t.suggestionMenus.clearQuery},d=(0,f.useCallback)((function(e){return t.suggestionMenus.onUpdate(n,e)}),[t.suggestionMenus,n]),p=iP(d),h=oP((null==p?void 0:p.show)||!1,(null==p?void 0:p.referencePos)||null,2e3,KN({placement:"bottom-start",middleware:[sj(10),uj({mainAxis:!0,crossAxis:!1}),lj(),dj({apply:function(e){var t=e.availableHeight,n=e.elements;Object.assign(n.floating.style,{maxHeight:"".concat(t-10,"px")})}})],onOpenChange:function(e){e||t.suggestionMenus.closeMenu()}},s)),m=h.isMounted,v=h.ref,g=h.style,y=h.getFloatingProps;return m&&p&&(null!=p&&p.ignoreQueryLength||!o||!(p.query.startsWith(" ")||p.query.length<o))?(0,T.jsx)("div",KN(KN({ref:v,style:g},y()),{},{children:(0,T.jsx)(CR,{query:p.query,closeMenu:u.closeMenu,clearQuery:u.clearQuery,getItems:c,suggestionMenuComponent:r||xR,onItemClick:l})})):null}var DR=function(e){var t=sP(),n=(0,f.useRef)(!1),r=JN((0,f.useState)(),2),o=r[0],i=r[1],a=(0,f.useCallback)((function(t){e.onMouseDown(),i({originalContent:e.block.content,originalCroppedContent:{rows:e.editor.tableHandles.cropEmptyRowsOrColumns(e.block,"addOrRemoveColumns"===e.orientation?"columns":"rows")},startPos:"addOrRemoveColumns"===e.orientation?t.clientX:t.clientY}),n.current=!1,t.preventDefault()}),[e]),s=(0,f.useCallback)((function(){n.current||e.editor.updateBlock(e.block,{type:"table",content:KN(KN({},e.block.content),{},{rows:"addOrRemoveColumns"===e.orientation?e.editor.tableHandles.addRowsOrColumns(e.block,"columns",1):e.editor.tableHandles.addRowsOrColumns(e.block,"rows",1)})})}),[e.block,e.orientation,e.editor]);return(0,f.useEffect)((function(){var t=function(t){var r,i,a,s;if(!o)throw new Error("editingState is undefined");n.current=!0;var l=("addOrRemoveColumns"===e.orientation?t.clientX:t.clientY)-o.startPos,c="addOrRemoveColumns"===e.orientation?null!==(r=null==(a=o.originalCroppedContent.rows[0])?void 0:a.cells.length)&&void 0!==r?r:0:o.originalCroppedContent.rows.length,u="addOrRemoveColumns"===e.orientation?null!==(i=null==(s=o.originalContent.rows[0])?void 0:s.cells.length)&&void 0!==i?i:0:o.originalContent.rows.length,d="addOrRemoveColumns"===e.orientation?e.block.content.rows[0].cells.length:e.block.content.rows.length,f=u+function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,n=Math.floor(e)+t,r=Math.ceil(e)-t;return e>=n&&e<=r?Math.round(e):e<n?Math.floor(e):Math.ceil(e)}(l/("addOrRemoveColumns"===e.orientation?120:31),.3);f>=c&&f>0&&f!==d&&(e.editor.updateBlock(e.block,{type:"table",content:KN(KN({},e.block.content),{},{rows:"addOrRemoveColumns"===e.orientation?e.editor.tableHandles.addRowsOrColumns({type:"table",content:o.originalCroppedContent},"columns",f-c):e.editor.tableHandles.addRowsOrColumns({type:"table",content:o.originalCroppedContent},"rows",f-c)})}),e.block.content&&e.editor.setTextCursorPosition(e.block))};return o&&window.addEventListener("mousemove",t),function(){window.removeEventListener("mousemove",t)}}),[o,e.block,e.editor,e.orientation]),(0,f.useEffect)((function(){var t=e.onMouseUp,n=function(){i(void 0),t()};return o&&window.addEventListener("mouseup",n),function(){window.removeEventListener("mouseup",n)}}),[o,e.onMouseUp]),(0,T.jsx)(t.TableHandle.ExtendButton,{className:oE("bn-extend-button","addOrRemoveColumns"===e.orientation?"bn-extend-button-add-remove-columns":"bn-extend-button-add-remove-rows",null!==o?"bn-extend-button-editing":""),onClick:s,onMouseDown:a,children:e.children||(0,T.jsx)(YP,{size:18,"data-test":"extendButton"})})},MR=function(e){var t=sP(),n=cP(),r=nP().tableHandles;return r?(0,T.jsx)(t.Generic.Menu.Item,{onClick:function(){r.addRowOrColumn(e.index,"row"===e.orientation?{orientation:"row",side:e.side}:{orientation:"column",side:e.side})},children:n.table_handle["add_".concat(e.side,"_menuitem")]}):null},AR=function(e){var t=sP(),n=cP(),r=nP().tableHandles;return r?(0,T.jsx)(t.Generic.Menu.Item,{onClick:function(){r.removeRowOrColumn(e.index,e.orientation)},children:"row"===e.orientation?n.table_handle.delete_row_menuitem:n.table_handle.delete_column_menuitem}):null},OR=function(e){var t=sP(),n=cP(),r=nP(),o=r.tableHandles,i=(0,f.useMemo)((function(){return o&&e.block?"row"===e.orientation?o.getCellsAtRowHandle(e.block,e.index):o.getCellsAtColumnHandle(e.block,e.index):[]}),[e.block,e.index,e.orientation,o]),a=function(t,n){var o=e.block.content.rows.map((function(e){return KN(KN({},e),{},{cells:e.cells.map((function(e){return Y_(e)}))})}));i.forEach((function(e){var r=e.row,i=e.col;"text"===n?o[r].cells[i].props.textColor=t:o[r].cells[i].props.backgroundColor=t})),r.updateBlock(e.block,{type:"table",content:KN(KN({},e.block.content),{},{rows:o})}),r.setTextCursorPosition(e.block)};if(!i||!i[0]||!o||!1===r.settings.tables.cellTextColor&&!1===r.settings.tables.cellBackgroundColor)return null;var s=Y_(i[0].cell);return(0,T.jsxs)(t.Generic.Menu.Root,{position:"right",sub:!0,children:[(0,T.jsx)(t.Generic.Menu.Trigger,{sub:!0,children:(0,T.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children||n.drag_handle.colors_menuitem})}),(0,T.jsx)(t.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:(0,T.jsx)(DL,{iconSize:18,text:r.settings.tables.cellTextColor?{color:i.every((function(e){var t=e.cell;return eE(t)&&t.props.textColor===s.props.textColor}))?s.props.textColor:"default",setColor:function(e){a(e,"text")}}:void 0,background:r.settings.tables.cellBackgroundColor?{color:i.every((function(e){var t=e.cell;return eE(t)&&t.props.backgroundColor===s.props.backgroundColor}))?s.props.backgroundColor:"default",setColor:function(e){return a(e,"background")}}:void 0})})]})},TR=function(e){var t=sP(),n=cP(),r=nP();if(!r.tableHandles||0!==e.index||"row"!==e.orientation||!r.settings.tables.headers)return null;var o=!!e.block.content.headerRows;return(0,T.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:function(){var t=r.getBlock(e.block.id);t&&r.updateBlock(t,KN(KN({},t),{},{content:KN(KN({},t.content),{},{headerRows:o?void 0:1})}))},children:n.drag_handle.header_row_menuitem})},jR=function(e){var t=sP(),n=cP(),r=nP();if(!r.tableHandles||0!==e.index||"column"!==e.orientation||!r.settings.tables.headers)return null;var o=!!e.block.content.headerCols;return(0,T.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:function(){var t=r.getBlock(e.block.id);t&&r.updateBlock(t,KN(KN({},t),{},{content:KN(KN({},t.content),{},{headerCols:o?void 0:1})}))},children:n.drag_handle.header_column_menuitem})},NR=function(e){var t=sP();return(0,T.jsx)(t.Generic.Menu.Dropdown,{className:"bn-table-handle-menu",children:e.children||(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(AR,{orientation:e.orientation,block:e.block,index:e.index}),(0,T.jsx)(MR,{orientation:e.orientation,block:e.block,index:e.index,side:"row"===e.orientation?"above":"left"}),(0,T.jsx)(MR,{orientation:e.orientation,block:e.block,index:e.index,side:"row"===e.orientation?"below":"right"}),(0,T.jsx)(TR,{orientation:e.orientation,block:e.block,index:e.index}),(0,T.jsx)(jR,{orientation:e.orientation,block:e.block,index:e.index}),(0,T.jsx)(OR,{orientation:e.orientation,block:e.block,index:e.index})]})})},PR=function(e){var t=sP(),n=JN((0,f.useState)(!1),2),r=n[0],o=n[1],i=e.tableHandleMenu||NR,a=(0,f.useMemo)((function(){var t=e.editor.tableHandles;return!(!t||!e.block)&&("column"===e.orientation?t.getCellsAtColumnHandle(e.block,e.index).every((function(e){return 1===tE(e.cell)})):t.getCellsAtRowHandle(e.block,e.index).every((function(e){return 1===nE(e.cell)})))}),[e.block,e.editor.tableHandles,e.index,e.orientation]);return(0,T.jsxs)(t.Generic.Menu.Root,{onOpenChange:function(t){t?(e.freezeHandles(),e.hideOtherSide()):(e.unfreezeHandles(),e.showOtherSide(),e.editor.focus())},position:"right",children:[(0,T.jsx)(t.Generic.Menu.Trigger,{children:(0,T.jsx)(t.TableHandle.Root,{className:oE("bn-table-handle",r?"bn-table-handle-dragging":"",a?"":"bn-table-handle-not-draggable"),draggable:a,onDragStart:function(t){o(!0),e.dragStart(t)},onDragEnd:function(){e.dragEnd(),o(!1)},style:"column"===e.orientation?{transform:"rotate(0.25turn)"}:void 0,children:e.children||(0,T.jsx)(iR,{size:24,"data-test":"tableHandle"})})}),(0,cT.createPortal)((0,T.jsx)(i,{orientation:e.orientation,block:e.block,index:e.index}),e.menuContainer)]})};function LR(e,t,n){var r=Qj({open:t,placement:"addOrRemoveColumns"===e?"right":"bottom",middleware:[dj({apply:function(t){var n=t.rects,r=t.elements;Object.assign(r.floating.style,"addOrRemoveColumns"===e?{height:"".concat(n.reference.height,"px")}:{width:"".concat(n.reference.width,"px")})}})]}),o=r.refs,i=r.update,a=r.context,s=r.floatingStyles,l=cN(a),c=l.isMounted,u=l.styles;return(0,f.useEffect)((function(){i()}),[n,i]),(0,f.useEffect)((function(){null!==n&&o.setReference({getBoundingClientRect:function(){return n}})}),[e,n,o]),(0,f.useMemo)((function(){return{isMounted:c,ref:o.setFloating,style:KN(KN({display:"flex"},u),s)}}),[s,c,o.setFloating,u])}function RR(e,t,n){return n&&"row"===n.draggedCellOrientation?new DOMRect(t.x,n.mousePos,t.width,0):new DOMRect(t.x,e.y,t.width,e.height)}function IR(e,t,n){return n&&"col"===n.draggedCellOrientation?new DOMRect(n.mousePos,t.y,0,t.height):new DOMRect(e.x,t.y,e.width,t.height)}function BR(e){return new DOMRect(e.x,e.y,e.width,0)}function FR(e,t,n,r,o){var i=Qj({open:t,placement:"row"===e?"left":"col"===e?"top":"bottom-end",middleware:[sj("row"===e?-10:"col"===e?-12:{mainAxis:1,crossAxis:-1})]}),a=i.refs,s=i.update,l=i.context,c=i.floatingStyles,u=cN(l),d=u.isMounted,p=u.styles;return(0,f.useEffect)((function(){s()}),[n,r,s]),(0,f.useEffect)((function(){null===n||null===r||o&&"cell"===e||a.setReference({getBoundingClientRect:function(){return("row"===e?RR:"col"===e?IR:BR)(n,r,o)}})}),[o,e,n,r,a]),(0,f.useMemo)((function(){return{isMounted:d,ref:a.setFloating,style:KN(KN({display:"flex"},p),c)}}),[c,d,a.setFloating,p])}var HR=function(e){var t,n,r=sP(),o=cP(),i=nP(),a=function(t,n){var r=e.block.content.rows.map((function(e){return KN(KN({},e),{},{cells:e.cells.map((function(e){return Y_(e)}))})}));"text"===n?r[e.rowIndex].cells[e.colIndex].props.textColor=t:r[e.rowIndex].cells[e.colIndex].props.backgroundColor=t,i.updateBlock(e.block,{type:"table",content:KN(KN({},e.block.content),{},{rows:r})}),i.setTextCursorPosition(e.block)},s=null==(n=null==(t=e.block.content.rows[e.rowIndex])?void 0:t.cells)?void 0:n[e.colIndex];return!s||!1===i.settings.tables.cellTextColor&&!1===i.settings.tables.cellBackgroundColor?null:(0,T.jsxs)(r.Generic.Menu.Root,{position:"right",sub:!0,children:[(0,T.jsx)(r.Generic.Menu.Trigger,{sub:!0,children:(0,T.jsx)(r.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children||o.drag_handle.colors_menuitem})}),(0,T.jsx)(r.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:(0,T.jsx)(DL,{iconSize:18,text:i.settings.tables.cellTextColor?{color:eE(s)?s.props.textColor:"default",setColor:function(e){return a(e,"text")}}:void 0,background:i.settings.tables.cellBackgroundColor?{color:eE(s)?s.props.backgroundColor:"default",setColor:function(e){return a(e,"background")}}:void 0})})]})},zR=function(e){var t,n,r=sP(),o=cP(),i=nP(),a=null==(n=null==(t=e.block.content.rows[e.rowIndex])?void 0:t.cells)?void 0:n[e.colIndex];return a&&eE(a)&&(1!==nE(a)||1!==tE(a))&&i.settings.tables.splitCells?(0,T.jsx)(r.Generic.Menu.Item,{onClick:function(){var t;null==(t=i.tableHandles)||t.splitCell({row:e.rowIndex,col:e.colIndex})},children:o.table_handle.split_cell_menuitem}):null},VR=function(e){var t=sP();return(0,T.jsx)(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:e.children||(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(zR,{block:e.block,rowIndex:e.rowIndex,colIndex:e.colIndex}),(0,T.jsx)(HR,{block:e.block,rowIndex:e.rowIndex,colIndex:e.colIndex})]})})},$R=function(e){var t=sP(),n=e.tableCellMenu||VR;return e.editor.settings.tables.splitCells||e.editor.settings.tables.cellBackgroundColor||e.editor.settings.tables.cellTextColor?(0,T.jsxs)(t.Generic.Menu.Root,{onOpenChange:function(t){t?e.freezeHandles():(e.unfreezeHandles(),e.editor.focus())},position:"right",children:[(0,T.jsx)(t.Generic.Menu.Trigger,{children:(0,T.jsx)(t.Generic.Menu.Button,{className:"bn-table-cell-handle",children:e.children||(0,T.jsx)(aR,{size:12,"data-test":"tableCellHandle"})})}),(0,cT.createPortal)((0,T.jsx)(n,{block:e.block,rowIndex:e.rowIndex,colIndex:e.colIndex}),e.menuContainer)]}):null},UR=function(e){var t,n,r=nP(),o=JN((0,f.useState)(null),2),i=o[0],a=o[1];if(!r.tableHandles)throw new Error("TableHandlesController can only be used when BlockNote editor schema contains table block");var s={rowDragStart:r.tableHandles.rowDragStart,colDragStart:r.tableHandles.colDragStart,dragEnd:r.tableHandles.dragEnd,freezeHandles:r.tableHandles.freezeHandles,unfreezeHandles:r.tableHandles.unfreezeHandles},l=s.freezeHandles,c=s.unfreezeHandles,u=(0,f.useCallback)((function(){l(),D(!0),S(!0)}),[l]),d=(0,f.useCallback)((function(){c(),D(!1),S(!1)}),[c]),p=iP(r.tableHandles.onUpdate.bind(r.tableHandles)),h=(0,f.useMemo)((function(){var e,t;return null!=p&&p.draggingState?{draggedCellOrientation:null==(e=null==p?void 0:p.draggingState)?void 0:e.draggedCellOrientation,mousePos:null==(t=null==p?void 0:p.draggingState)?void 0:t.mousePos}:void 0}),[null==p?void 0:p.draggingState,null==(t=null==p?void 0:p.draggingState)?void 0:t.draggedCellOrientation,null==(n=null==p?void 0:p.draggingState)?void 0:n.mousePos]),m=function(e,t,n,r){var o=FR("row",e,t,n,r),i=FR("col",e,t,n,r),a=FR("cell",e,t,n,r);return(0,f.useMemo)((function(){return{rowHandle:o,colHandle:i,cellHandle:a}}),[i,o,a])}((null==p?void 0:p.show)||!1,(null==p?void 0:p.referencePosCell)||null,(null==p?void 0:p.referencePosTable)||null,h),v=m.rowHandle,g=m.colHandle,y=m.cellHandle,b=function(e,t,n){var r=LR("addOrRemoveRows",t,n),o=LR("addOrRemoveColumns",e,n);return(0,f.useMemo)((function(){return{addOrRemoveRowsButton:r,addOrRemoveColumnsButton:o}}),[o,r])}((null==p?void 0:p.showAddOrRemoveColumnsButton)||!1,(null==p?void 0:p.showAddOrRemoveRowsButton)||!1,(null==p?void 0:p.referencePosTable)||null),k=b.addOrRemoveColumnsButton,w=b.addOrRemoveRowsButton,x=JN((0,f.useState)(!1),2),C=x[0],S=x[1],_=JN((0,f.useState)(!1),2),E=_[0],D=_[1];if(!p)return null;var M=e.tableHandle||PR,A=e.extendButton||DR,O=e.tableCellHandle||$R;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{ref:a}),(0,T.jsxs)(Wj,{root:p.widgetContainer,children:[!C&&i&&v.isMounted&&void 0!==p.rowIndex&&(0,T.jsx)("div",{ref:v.ref,style:v.style,children:(0,T.jsx)(M,{editor:r,orientation:"row",showOtherSide:function(){return D(!1)},hideOtherSide:function(){return D(!0)},index:p.rowIndex,block:p.block,dragStart:s.rowDragStart,dragEnd:s.dragEnd,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles,menuContainer:i})}),!E&&i&&g.isMounted&&void 0!==p.colIndex&&(0,T.jsx)("div",{ref:g.ref,style:g.style,children:(0,T.jsx)(M,{editor:r,orientation:"column",showOtherSide:function(){return S(!1)},hideOtherSide:function(){return S(!0)},index:p.colIndex,block:p.block,dragStart:s.colDragStart,dragEnd:s.dragEnd,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles,menuContainer:i})}),i&&y.isMounted&&void 0!==p.colIndex&&void 0!==p.rowIndex&&(0,T.jsx)("div",{ref:y.ref,style:y.style,children:(0,T.jsx)(O,{editor:r,block:p.block,rowIndex:p.rowIndex,colIndex:p.colIndex,menuContainer:i,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles})}),(0,T.jsx)("div",{ref:w.ref,style:w.style,children:(0,T.jsx)(A,{editor:r,orientation:"addOrRemoveRows",block:p.block,onMouseDown:u,onMouseUp:d})}),(0,T.jsx)("div",{ref:k.ref,style:k.style,children:(0,T.jsx)(A,{editor:r,orientation:"addOrRemoveColumns",block:p.block,onMouseDown:u,onMouseUp:d})})]})]})};function GR(e){var t=nP();if(!t)throw new Error("BlockNoteDefaultUI must be used within a BlockNoteContext.Provider");return(0,T.jsxs)(T.Fragment,{children:[!1!==e.formattingToolbar&&(0,T.jsx)(XL,{}),!1!==e.linkToolbar&&(0,T.jsx)(nR,{}),!1!==e.slashMenu&&(0,T.jsx)(ER,{triggerCharacter:"/"}),!1!==e.emojiPicker&&(0,T.jsx)(wR,{triggerCharacter:":",columns:10,minQueryLength:2}),!1!==e.sideMenu&&(0,T.jsx)(hR,{}),t.filePanel&&!1!==e.filePanel&&(0,T.jsx)(bL,{}),t.tableHandles&&!1!==e.tableHandles&&(0,T.jsx)(UR,{}),t.comments&&!1!==e.comments&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(gP,{}),(0,T.jsx)(mL,{})]})]})}var WR=function(){var e=(0,f.useMemo)((function(){var e;return null==(e=window.matchMedia)?void 0:e.call(window,"(prefers-color-scheme: dark)")}),[]),t=(0,f.useMemo)((function(){var e;return null==(e=window.matchMedia)?void 0:e.call(window,"(prefers-color-scheme: light)")}),[]),n=null==e?void 0:e.matches,r=null==t?void 0:t.matches,o=JN((0,f.useState)(n?"dark":r?"light":"no-preference"),2),i=o[0],a=o[1];return(0,f.useEffect)((function(){a(n?"dark":r?"light":"no-preference")}),[n,r]),(0,f.useEffect)((function(){if("function"==typeof(null==e?void 0:e.addEventListener)){var n=function(e){return e.matches&&a("dark")},r=function(e){return e.matches&&a("light")};return null==e||e.addEventListener("change",n),null==t||t.addEventListener("change",r),function(){null==e||e.removeEventListener("change",n),null==t||t.removeEventListener("change",r)}}var o=function(){return a(e.matches?"dark":t.matches?"light":"no-preference")};return null==e||e.addEventListener("change",o),null==t||t.addEventListener("change",o),function(){null==e||e.removeEventListener("change",o),null==t||t.removeEventListener("change",o)}}),[e,t]),window.matchMedia,i},qR=(0,f.createContext)(void 0),KR=function(e){var t=e.contentComponent,n=(0,f.useSyncExternalStore)(t.subscribe,t.getSnapshot,t.getServerSnapshot);return(0,T.jsx)(T.Fragment,{children:Object.values(n)})},ZR=(0,f.forwardRef)((function(e,t){var n=JN((0,f.useState)(),2),r=n[0],o=n[1];return(0,f.useImperativeHandle)(t,(function(){return function(e,t){(0,cT.flushSync)((function(){o({node:e,container:t})})),o(void 0)}}),[]),(0,T.jsx)(T.Fragment,{children:r&&(0,cT.createPortal)(r.node,r.container)})})),JR=function(){};function XR(e,t){var n=e.editor,r=e.className,o=e.theme,i=e.children,a=e.editable,s=e.onSelectionChange,l=e.onChange,c=e.formattingToolbar,u=e.linkToolbar,d=e.slashMenu,p=e.emojiPicker,h=e.sideMenu,m=e.filePanel,v=e.tableHandles,g=e.comments,y=e.autoFocus,b=e.renderEditor,k=void 0===b?!n.headless:b,w=WN(e,HN),x=JN((0,f.useState)(),2),C=x[0],S=x[1],_=tP(),E=WR(),D=(null==_?void 0:_.colorSchemePreference)||E,M=o||("dark"===D?"dark":"light");uP(l||JR,n),rP(s||JR,n),(0,f.useEffect)((function(){n.isEditable=!1!==a}),[a,n]);var A=(0,f.useCallback)((function(e){n.elementRenderer=e}),[n]),O=(0,f.useMemo)((function(){return KN(KN({},_),{},{editor:n,setContentEditableProps:S})}),[_,n]),j={formattingToolbar:c,linkToolbar:u,slashMenu:d,emojiPicker:p,sideMenu:h,filePanel:m,tableHandles:v,comments:g},N={autoFocus:y,contentEditableProps:C};return(0,T.jsx)(eP.Provider,{value:O,children:(0,T.jsxs)(qR.Provider,{value:{editorProps:N,defaultUIProps:j},children:[(0,T.jsx)(ZR,{ref:A}),(0,T.jsx)(YR,KN(KN({className:r,renderEditor:k,editorColorScheme:M,ref:t},w),{},{children:i}))]})})}var YR=f.forwardRef((function(e,t){var n=e.className,r=e.renderEditor,o=e.editorColorScheme,i=e.children,a=WN(e,zN);return(0,T.jsx)("div",KN(KN({className:oE("bn-container",o,n),"data-color-scheme":o},a),{},{ref:t,children:r?(0,T.jsx)(eI,{children:i}):i}))})),QR=f.forwardRef(XR),eI=function(e){var t=(0,f.useContext)(qR),n=nP(),r=(0,f.useMemo)((function(){return function(){var e=new Set,t={};return{subscribe:function(t){return e.add(t),function(){e.delete(t)}},getSnapshot:function(){return t},getServerSnapshot:function(){return t},setRenderer:function(n,r){t=KN(KN({},t),{},ZN({},n,(0,cT.createPortal)(r.reactElement,r.element,n))),e.forEach((function(e){return e()}))},removeRenderer:function(n){var r=KN({},t);delete r[n],t=r,e.forEach((function(e){return e()}))}}}()}),[]),o=(0,f.useCallback)((function(e){n.mount(e,r)}),[n,r]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(KR,{contentComponent:r}),(0,T.jsx)(tI,KN(KN(KN({},t.editorProps),e),{},{mount:o})),(0,T.jsx)(GR,KN({},t.defaultUIProps)),e.children]})},tI=function(e){var t=e.autoFocus,n=e.mount,r=e.contentEditableProps;return(0,T.jsx)("div",KN({"aria-autocomplete":"list","aria-haspopup":"listbox","data-bn-autofocus":t,ref:n},r))};function nI(e,t){var n,r,o=document.createElement("div");if(null!=t&&t.elementRenderer)t.elementRenderer(e((function(e){return n=e||void 0})),o);else{if(null==t||!t.headless)throw new Error("elementRenderer not available, expected headless editor");r=(0,RN.H)(o),(0,cT.flushSync)((function(){r.render(e((function(e){return n=e||void 0})))}))}if(!o.childElementCount)return console.warn("ReactInlineContentSpec: renderHTML() failed"),{dom:document.createElement("span")};null==n||n.setAttribute("data-tmp-find","true");var i=o.cloneNode(!0),a=i.firstElementChild,s=i.querySelector("[data-tmp-find]");return null==s||s.removeAttribute("data-tmp-find"),null==r||r.unmount(),{dom:a,contentDOM:s||void 0}}function rI(e){var t;return(0,T.jsx)(jN,KN(KN(KN({onDragOver:function(e){return e.preventDefault()}},Object.fromEntries(Object.entries(e.domAttributes||{}).filter((function(e){return"class"!==JN(e,1)[0]})))),{},{className:oE("bn-block-content",(null==(t=e.domAttributes)?void 0:t.class)||""),"data-content-type":e.blockType},Object.fromEntries(Object.entries(e.blockProps).filter((function(t){var n=JN(t,2),r=n[0],o=n[1],i=e.propSchema[r];return!cE.includes(r)&&o!==i.default})).map((function(e){var t=JN(e,2),n=t[0],r=t[1];return[uE(n),r]})))),{},{"data-file-block":!0===e.isFileBlock||void 0,children:e.children}))}function oI(e,t){var n,r=mE({name:e.type,content:"inline"===e.content?"inline*":"",group:"blockContent",selectable:null===(n=e.isSelectable)||void 0===n||n,isolating:!0,addAttributes:function(){return fE(e.propSchema)},parseHTML:function(){return kE(e,t.parse)},renderHTML:function(t){var n=t.HTMLAttributes,r=document.createElement("div");return hE({dom:r,contentDOM:"inline"===e.content?r:void 0},e.type,{},e.propSchema,e.isFileBlock,n)},addNodeView:function(){var n=this;return function(r){var o=LN((function(r){var o,i=n.options.editor,a=pE(r.getPos,i,n.editor,e.type),s=(null==(o=n.options.domAttributes)?void 0:o.blockContent)||{},l=TN().nodeViewContentRef;if(!l)throw new Error("nodeViewContentRef is not set");var c=t.render;return(0,T.jsx)(rI,{blockType:a.type,blockProps:a.props,propSchema:e.propSchema,isFileBlock:e.isFileBlock,domAttributes:s,children:(0,T.jsx)(c,{block:a,editor:i,contentRef:l})})}),{className:"bn-react-node-view-renderer"})(r);return!1===e.isSelectable&&bE(o,n.editor),o}}});return vE(e,{node:r,toInternalHTML:function(n,o){var i,a,s=(null==(i=r.options.domAttributes)?void 0:i.blockContent)||{},l=t.render,c=nI((function(t){return(0,T.jsx)(rI,{blockType:n.type,blockProps:n.props,propSchema:e.propSchema,domAttributes:s,children:(0,T.jsx)(l,{block:n,editor:o,contentRef:t})})}),o);return null==(a=c.contentDOM)||a.setAttribute("data-editable",""),c},toExternalHTML:function(n,o){var i,a,s=(null==(i=r.options.domAttributes)?void 0:i.blockContent)||{},l=t.toExternalHTML||t.render,c=nI((function(t){return(0,T.jsx)(rI,{blockType:n.type,blockProps:n.props,propSchema:e.propSchema,domAttributes:s,children:(0,T.jsx)(l,{block:n,editor:o,contentRef:t})})}),o);return null==(a=c.contentDOM)||a.setAttribute("data-editable",""),c}})}function iI(e){var t=nP(),n=JN((0,f.useState)("loading"),2),r=n[0],o=n[1],i=JN((0,f.useState)(),2),a=i[0],s=i[1];if((0,f.useEffect)((function(){var n=!0;return GN($N().mark((function r(){var i;return $N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i="",o("loading"),r.prev=2,!t.resolveFileUrl){r.next=9;break}return r.next=6,t.resolveFileUrl(e);case 6:r.t0=r.sent,r.next=10;break;case 9:r.t0=e;case 10:i=r.t0,r.next=17;break;case 13:return r.prev=13,r.t1=r.catch(2),o("error"),r.abrupt("return");case 17:n&&(o("loaded"),s(i));case 18:case"end":return r.stop()}}),r,null,[[2,13]])})))(),function(){n=!1}}),[t,e]),"loaded"!==r)return{loadingState:r};if(!a)throw new Error("Finished fetching file but did not get download URL.");return{loadingState:r,downloadUrl:a}}var aI=function(e){return(0,T.jsxs)("figure",{children:[e.children,(0,T.jsx)("figcaption",{children:e.caption})]})};function sI(e){var t=JN((0,f.useState)(!1),2),n=t[0],r=t[1];return function(e){var t=nP();(0,f.useEffect)((function(){return t.onUploadStart(e)}),[e,t])}((function(t){t===e&&r(!0)})),function(e){var t=nP();(0,f.useEffect)((function(){return t.onUploadEnd(e)}),[e,t])}((function(t){t===e&&r(!1)})),n}var lI=function(e){var t=cP(),n=(0,f.useCallback)((function(e){e.preventDefault()}),[]),r=(0,f.useCallback)((function(){e.editor.dispatch(e.editor._tiptapEditor.state.tr.setMeta(e.editor.filePanel.plugin,{block:e.block}))}),[e.block,e.editor]);return(0,T.jsxs)("div",{className:"bn-add-file-button",onMouseDown:n,onClick:r,children:[(0,T.jsx)("div",{className:"bn-add-file-button-icon",children:e.buttonIcon||(0,T.jsx)(TP,{size:24})}),(0,T.jsx)("div",{className:"bn-add-file-button-text",children:e.buttonText||t.file_blocks.file.add_button_text})]})},cI=function(e){return(0,T.jsxs)("div",{className:"bn-file-name-with-icon",contentEditable:!1,draggable:!1,children:[(0,T.jsx)("div",{className:"bn-file-icon",children:(0,T.jsx)(TP,{size:24})}),(0,T.jsx)("p",{className:"bn-file-name",children:e.block.props.name})]})},uI=function(e){var t=sI(e.block.id);return(0,T.jsx)("div",{className:"bn-file-block-content-wrapper",onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,style:e.style,children:t?(0,T.jsx)("div",{className:"bn-file-loading-preview",children:"Loading..."}):""===e.block.props.url?(0,T.jsx)(lI,KN({},e)):(0,T.jsxs)(T.Fragment,{children:[!1!==e.block.props.showPreview&&e.children?e.children:(0,T.jsx)(cI,KN({},e)),e.block.props.caption&&(0,T.jsx)("p",{className:"bn-file-caption",children:e.block.props.caption})]})})},dI=function(e){return(0,T.jsxs)("div",{children:[e.children,(0,T.jsx)("p",{children:e.caption})]})},fI=function(e){var t=iI(e.block.props.url);return(0,T.jsx)("audio",{className:"bn-audio",src:"loading"===t.loadingState?e.block.props.url:t.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},pI=(oI(cD,{render:function(e){return(0,T.jsx)(uI,KN(KN({},e),{},{buttonText:e.editor.dictionary.file_blocks.audio.add_button_text,buttonIcon:(0,T.jsx)(XP,{size:24}),children:(0,T.jsx)(fI,KN({},e))}))},parse:uD,toExternalHTML:function(e){if(!e.block.props.url)return(0,T.jsx)("p",{children:"Add audio"});var t=e.block.props.showPreview?(0,T.jsx)("audio",{src:e.block.props.url}):(0,T.jsx)("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?e.block.props.showPreview?(0,T.jsx)(aI,{caption:e.block.props.caption,children:t}):(0,T.jsx)(dI,{caption:e.block.props.caption,children:t}):t}}),oI(bD,{render:function(e){return(0,T.jsx)(uI,KN({},e))},parse:kD,toExternalHTML:function(e){if(!e.block.props.url)return(0,T.jsx)("p",{children:"Add file"});var t=(0,T.jsx)("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?(0,T.jsx)(dI,{caption:e.block.props.caption,children:t}):t}}),function(e){var t=JN((0,f.useState)(void 0),2),n=t[0],r=t[1],o=JN((0,f.useState)(e.block.props.previewWidth),2),i=o[0],a=o[1],s=JN((0,f.useState)(!1),2),l=s[0],c=s[1],u=(0,f.useRef)(null);(0,f.useEffect)((function(){var t=function(t){var r;r="center"===e.block.props.textAlignment?"left"===n.handleUsed?n.initialWidth+2*(n.initialClientX-t.clientX):n.initialWidth+2*(t.clientX-n.initialClientX):"left"===n.handleUsed?n.initialWidth+n.initialClientX-t.clientX:n.initialWidth+t.clientX-n.initialClientX,a(r<64?64:r)},o=function(){r(void 0),e.editor.updateBlock(e.block,{props:{previewWidth:i}})};return n&&(window.addEventListener("mousemove",t),window.addEventListener("mouseup",o)),function(){window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",o)}}),[e,n,i]);var d=(0,f.useCallback)((function(){e.editor.isEditable&&c(!0)}),[e.editor.isEditable]),p=(0,f.useCallback)((function(){c(!1)}),[]),h=(0,f.useCallback)((function(e){e.preventDefault(),r({handleUsed:"left",initialWidth:u.current.clientWidth,initialClientX:e.clientX})}),[]),m=(0,f.useCallback)((function(e){e.preventDefault(),r({handleUsed:"right",initialWidth:u.current.clientWidth,initialClientX:e.clientX})}),[]),v=sI(e.block.id);return(0,T.jsx)(uI,KN(KN({},e),{},{onMouseEnter:d,onMouseLeave:p,style:e.block.props.url&&!v&&e.block.props.showPreview?{width:"".concat(i,"px")}:void 0,children:(0,T.jsxs)("div",{className:"bn-visual-media-wrapper",ref:u,children:[e.children,(l||n)&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{className:"bn-resize-handle",style:{left:"4px"},onMouseDown:h}),(0,T.jsx)("div",{className:"bn-resize-handle",style:{right:"4px"},onMouseDown:m})]})]})}))}),hI=function(e){var t=iI(e.block.props.url);return(0,T.jsx)("img",{className:"bn-visual-media",src:"loading"===t.loadingState?e.block.props.url:t.downloadUrl,alt:e.block.props.caption||"BlockNote image",contentEditable:!1,draggable:!1})};oI(SD,{render:function(e){return(0,T.jsx)(pI,KN(KN({},e),{},{buttonText:e.editor.dictionary.file_blocks.image.add_button_text,buttonIcon:(0,T.jsx)(qP,{size:24}),children:(0,T.jsx)(hI,KN({},e))}))},parse:_D,toExternalHTML:function(e){if(!e.block.props.url)return(0,T.jsx)("p",{children:"Add image"});var t=e.block.props.showPreview?(0,T.jsx)("img",{src:e.block.props.url,alt:e.block.props.name||e.block.props.caption||"BlockNote image",width:e.block.props.previewWidth}):(0,T.jsx)("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?e.block.props.showPreview?(0,T.jsx)(aI,{caption:e.block.props.caption,children:t}):(0,T.jsx)(dI,{caption:e.block.props.caption,children:t}):t}});var mI=function(e){var t=iI(e.block.props.url);return(0,T.jsx)("video",{className:"bn-visual-media",src:"loading"===t.loadingState?e.block.props.url:t.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})};function vI(e){return(0,T.jsx)(jN,KN(KN({as:"span",className:"bn-inline-content-section","data-inline-content-type":e.inlineContentType},Object.fromEntries(Object.entries(e.inlineContentProps).filter((function(t){var n=JN(t,2),r=n[0];return n[1]!==e.propSchema[r].default})).map((function(e){var t=JN(e,2),n=t[0],r=t[1];return[uE(n),r]})))),{},{children:e.children}))}function gI(e,t){var n=mE({name:e.type,inline:!0,group:"inline",selectable:"styled"===e.content,atom:"none"===e.content,content:"styled"===e.content?"inline*":"",addAttributes:function(){return fE(e.propSchema)},addKeyboardShortcuts:function(){return function(e){return{Backspace:function(t){var n=t.editor,r=n.state.selection.$from;return n.state.selection.empty&&r.node().type.name===e.type&&0===r.parentOffset}}}(e)},parseHTML:function(){return function(e){return[{tag:'[data-inline-content-type="'.concat(e.type,'"]'),contentElement:function(e){var t=e;return t.matches("[data-editable]")?t:t.querySelector("[data-editable]")||t}}]}(e)},renderHTML:function(n){var r=n.node,o=this.options.editor,i=SE(r,o.schema.inlineContentSchema,o.schema.styleSchema),a=t.render;return function(e,t,n,r){return e.dom.setAttribute("data-inline-content-type",t),Object.entries(n).filter((function(e){var t=b_(e,2),n=t[0];return t[1]!==r[n].default})).map((function(e){var t=b_(e,2),n=t[0],r=t[1];return[uE(n),r]})).forEach((function(t){var n=b_(t,2),r=n[0],o=n[1];return e.dom.setAttribute(r,o)})),void 0!==e.contentDOM&&e.contentDOM.setAttribute("data-editable",""),e}(nI((function(e){return(0,T.jsx)(a,{inlineContent:i,updateInlineContent:function(){},contentRef:e})}),o),e.type,r.attrs,e.propSchema)},addNodeView:function(){var n=this.options.editor;return function(r){return LN((function(r){var o=TN().nodeViewContentRef;if(!o)throw new Error("nodeViewContentRef is not set");var i=t.render;return(0,T.jsx)(vI,{inlineContentProps:r.node.attrs,inlineContentType:e.type,propSchema:e.propSchema,children:(0,T.jsx)(i,{contentRef:o,inlineContent:SE(r.node,n.schema.inlineContentSchema,n.schema.styleSchema),updateInlineContent:function(e){var t=VE([e],n._tiptapEditor.schema,n.schema.styleSchema);n.dispatch(n.prosemirrorView.state.tr.replaceWith(r.getPos(),r.getPos()+r.node.nodeSize,t))}})})}),{className:"bn-ic-react-node-view-renderer",as:"span"})(r)}}});return function(e,t){return{config:e,implementation:t}}(e,{node:n})}function yI(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=n.top<r.top,i=n.bottom>r.bottom;return o&&i?"both":o?"top":i?"bottom":"none"}function bI(e){if("number"==typeof e)return!0;if("string"==typeof e){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&""!==e.trim())return!0;const t=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every((e=>t.test(e)))}return!1}function kI(e){return"0rem"===e?"0rem":`calc(${e} * var(--mantine-scale))`}function wI(e,{shouldScale:t=!1}={}){return function n(r){if(0===r||"0"===r)return`0${e}`;if("number"==typeof r){const n=`${r/16}${e}`;return t?kI(n):n}if("string"==typeof r){if(""===r)return r;if(r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map((e=>n(e))).join(",");if(r.includes(" "))return r.split(" ").map((e=>n(e))).join(" ");if(r.includes(e))return t?kI(r):r;const o=r.replace("px","");if(!Number.isNaN(Number(o))){const n=`${Number(o)/16}${e}`;return t?kI(n):n}}return r}}oI(JD,{render:function(e){return(0,T.jsx)(pI,KN(KN({},e),{},{buttonText:e.editor.dictionary.file_blocks.video.add_button_text,buttonIcon:(0,T.jsx)(JP,{size:24}),children:(0,T.jsx)(mI,KN({},e))}))},parse:XD,toExternalHTML:function(e){if(!e.block.props.url)return(0,T.jsx)("p",{children:"Add video"});var t=e.block.props.showPreview?(0,T.jsx)("video",{src:e.block.props.url}):(0,T.jsx)("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?e.block.props.showPreview?(0,T.jsx)(aI,{caption:e.block.props.caption,children:t}):(0,T.jsx)(dI,{caption:e.block.props.caption,children:t}):t}}),new WeakSet;const xI=wI("rem",{shouldScale:!0}),CI=wI("em");function SI(e,t="size",n=!0){if(void 0!==e)return bI(e)?n?xI(e):e:`var(--${t}-${e})`}function _I(e){return SI(e,"mantine-spacing")}function EI(e){return void 0===e?"var(--mantine-radius-default)":SI(e,"mantine-radius")}function DI(e){return SI(e,"mantine-font-size")}function MI(e){return SI(e,"mantine-line-height",!1)}function AI(e){if(e)return SI(e,"mantine-shadow",!1)}function OI(e){return Object.keys(e).reduce(((t,n)=>(void 0!==e[n]&&(t[n]=e[n]),t)),{})}function TI(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)?function(e){let t=e.replace("#","");if(3===t.length){const e=t.split("");t=[e[0],e[0],e[1],e[1],e[2],e[2]].join("")}if(8===t.length){const e=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:e}}const n=parseInt(t,16);return{r:n>>16&255,g:n>>8&255,b:255&n,a:1}}(e):e.startsWith("rgb")?function(e){const[t,n,r,o]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:o||1}}(e):e.startsWith("hsl")?function(e){const t=e.match(/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i);if(!t)return{r:0,g:0,b:0,a:1};const n=parseInt(t[1],10),r=parseInt(t[2],10)/100,o=parseInt(t[3],10)/100,i=t[5]?parseFloat(t[5]):void 0,a=(1-Math.abs(2*o-1))*r,s=n/60,l=a*(1-Math.abs(s%2-1)),c=o-a/2;let u,d,f;return s>=0&&s<1?(u=a,d=l,f=0):s>=1&&s<2?(u=l,d=a,f=0):s>=2&&s<3?(u=0,d=a,f=l):s>=3&&s<4?(u=0,d=l,f=a):s>=4&&s<5?(u=l,d=0,f=a):(u=a,d=0,f=l),{r:Math.round(255*(u+c)),g:Math.round(255*(d+c)),b:Math.round(255*(f+c)),a:i||1}}(e):{r:0,g:0,b:0,a:1}}function jI(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${100*t}%)`;const{r:n,g:r,b:o,a:i}=TI(e),a=1-t,s=e=>Math.round(e*a);return`rgba(${s(n)}, ${s(r)}, ${s(o)}, ${i})`}function NI(e,t){return"number"==typeof e.primaryShade?e.primaryShade:"dark"===t?e.primaryShade.dark:e.primaryShade.light}function PI(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function LI(e,t=.179){return!e.startsWith("var(")&&function(e){if(e.startsWith("oklch("))return(function(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}(e)||0)/100;const{r:t,g:n,b:r}=TI(e),o=n/255,i=r/255;return.2126*PI(t/255)+.7152*PI(o)+.0722*PI(i)}(e)>t}function RI({color:e,theme:t,colorScheme:n}){if("string"!=typeof e)throw new Error("[@mantine/core] Failed to parse color. Expected color to be a string, instead got "+typeof e);if("bright"===e)return{color:e,value:"dark"===n?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:LI("dark"===n?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if("dimmed"===e)return{color:e,value:"dark"===n?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:LI("dark"===n?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if("white"===e||"black"===e)return{color:e,value:"white"===e?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:LI("white"===e?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,o]=e.split("."),i=o?Number(o):void 0,a=r in t.colors;if(a){const e=void 0!==i?t.colors[r][i]:t.colors[r][NI(t,n||"light")];return{color:r,value:e,shade:i,isThemeColor:a,isLight:LI(e,t.luminanceThreshold),variable:o?`--mantine-color-${r}-${i}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:a,isLight:LI(e,t.luminanceThreshold),shade:i,variable:void 0}}function II(e,t){const n=RI({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function BI(e,t){const n={from:e?.from||t.defaultGradient.from,to:e?.to||t.defaultGradient.to,deg:e?.deg??t.defaultGradient.deg??0},r=II(n.from,t),o=II(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${o} 100%)`}function FI(e,t){if("string"!=typeof e||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var("))return`color-mix(in srgb, ${e}, transparent ${100*(1-t)}%)`;if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:o}=TI(e);return`rgba(${n}, ${r}, ${o}, ${t})`}const HI=FI,zI="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",VI={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:{dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:({color:e,theme:t,variant:n,gradient:r,autoContrast:o})=>{const i=RI({color:e,theme:t}),a="boolean"==typeof o?o:t.autoContrast;if("filled"===n){const t=a&&i.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return i.isThemeColor?void 0===i.shade?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:t,border:`${xI(1)} solid transparent`}:{background:`var(--mantine-color-${i.color}-${i.shade})`,hover:`var(--mantine-color-${i.color}-${9===i.shade?8:i.shade+1})`,color:t,border:`${xI(1)} solid transparent`}:{background:e,hover:jI(e,.1),color:t,border:`${xI(1)} solid transparent`}}if("light"===n){if(i.isThemeColor){if(void 0===i.shade)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${xI(1)} solid transparent`};const n=t.colors[i.color][i.shade];return{background:FI(n,.1),hover:FI(n,.12),color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${xI(1)} solid transparent`}}return{background:FI(e,.1),hover:FI(e,.12),color:e,border:`${xI(1)} solid transparent`}}return"outline"===n?i.isThemeColor?void 0===i.shade?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${xI(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:FI(t.colors[i.color][i.shade],.05),color:`var(--mantine-color-${i.color}-${i.shade})`,border:`${xI(1)} solid var(--mantine-color-${i.color}-${i.shade})`}:{background:"transparent",hover:FI(e,.05),color:e,border:`${xI(1)} solid ${e}`}:"subtle"===n?i.isThemeColor?void 0===i.shade?{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${xI(1)} solid transparent`}:{background:"transparent",hover:FI(t.colors[i.color][i.shade],.12),color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${xI(1)} solid transparent`}:{background:"transparent",hover:FI(e,.12),color:e,border:`${xI(1)} solid transparent`}:"transparent"===n?i.isThemeColor?void 0===i.shade?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${xI(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${xI(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${xI(1)} solid transparent`}:"white"===n?i.isThemeColor?void 0===i.shade?{background:"var(--mantine-color-white)",hover:jI(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${xI(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:jI(t.white,.01),color:`var(--mantine-color-${i.color}-${i.shade})`,border:`${xI(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:jI(t.white,.01),color:e,border:`${xI(1)} solid transparent`}:"gradient"===n?{background:BI(r,t),hover:BI(r,t),color:"var(--mantine-color-white)",border:"none"}:"default"===n?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${xI(1)} solid var(--mantine-color-default-border)`}:{}},autoContrast:!1,luminanceThreshold:.3,fontFamily:zI,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:zI,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:xI(34),lineHeight:"1.3"},h2:{fontSize:xI(26),lineHeight:"1.35"},h3:{fontSize:xI(22),lineHeight:"1.4"},h4:{fontSize:xI(18),lineHeight:"1.45"},h5:{fontSize:xI(16),lineHeight:"1.5"},h6:{fontSize:xI(14),lineHeight:"1.5"}}},fontSizes:{xs:xI(12),sm:xI(14),md:xI(16),lg:xI(18),xl:xI(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:xI(2),sm:xI(4),md:xI(8),lg:xI(16),xl:xI(32)},spacing:{xs:xI(10),sm:xI(12),md:xI(16),lg:xI(20),xl:xI(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${xI(1)} ${xI(3)} rgba(0, 0, 0, 0.05), 0 ${xI(1)} ${xI(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${xI(1)} ${xI(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${xI(10)} ${xI(15)} ${xI(-5)}, rgba(0, 0, 0, 0.04) 0 ${xI(7)} ${xI(7)} ${xI(-5)}`,md:`0 ${xI(1)} ${xI(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${xI(20)} ${xI(25)} ${xI(-5)}, rgba(0, 0, 0, 0.04) 0 ${xI(10)} ${xI(10)} ${xI(-5)}`,lg:`0 ${xI(1)} ${xI(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${xI(28)} ${xI(23)} ${xI(-7)}, rgba(0, 0, 0, 0.04) 0 ${xI(12)} ${xI(12)} ${xI(-7)}`,xl:`0 ${xI(1)} ${xI(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${xI(36)} ${xI(28)} ${xI(-7)}, rgba(0, 0, 0, 0.04) 0 ${xI(17)} ${xI(17)} ${xI(-7)}`},other:{},components:{}};function $I(e){return e&&"object"==typeof e&&!Array.isArray(e)}function UI(e,t){const n={...e},r=t;return $I(e)&&$I(t)&&Object.keys(t).forEach((t=>{$I(r[t])?n[t]=t in e?UI(n[t],r[t]):r[t]:n[t]=r[t]})),n}const GI="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function WI(e){return!(e<0||e>9)&&parseInt(e.toString(),10)===e}function qI(e){if(!(e.primaryColor in e.colors))throw new Error("[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color");if(!("object"!=typeof e.primaryShade||WI(e.primaryShade.dark)&&WI(e.primaryShade.light)))throw new Error(GI);if("number"==typeof e.primaryShade&&!WI(e.primaryShade))throw new Error(GI)}const KI=(0,f.createContext)(null);function ZI(){const e=(0,f.useContext)(KI);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function JI({theme:e,children:t,inherit:n=!0}){const r=(0,f.useContext)(KI)||VI,o=(0,f.useMemo)((()=>function(e,t){if(!t)return qI(e),e;const n=UI(e,t);return t.fontFamily&&!t.headings?.fontFamily&&(n.headings.fontFamily=t.fontFamily),qI(n),n}(n?r:VI,e)),[e,r,n]);return(0,T.jsx)(KI.Provider,{value:o,children:t})}function XI(e,t,n){const r=ZI(),o=r.components[e]?.defaultProps;return{...t,..."function"==typeof o?o(r):o,...OI(n)}}JI.displayName="@mantine/core/MantineThemeProvider";const YI=(0,f.createContext)(null);function QI(){const e=(0,f.useContext)(YI);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function eB(){return QI().getStyleNonce}function tB(){return QI().env||"default"}function nB(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=nB(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const rB=function(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=nB(e))&&(r&&(r+=" "),r+=t);return r},oB={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"},iB={};function aB({theme:e,classNames:t,props:n,stylesCtx:r}){return function(e){const t={};return e.forEach((e=>{Object.entries(e).forEach((([e,n])=>{t[e]?t[e]=rB(t[e],n):t[e]=n}))})),t}((Array.isArray(t)?t:[t]).map((t=>"function"==typeof t?t(e,n,r):t||iB)))}function sB({selector:e,stylesCtx:t,theme:n,classNames:r,props:o}){return aB({theme:n,classNames:r,props:o,stylesCtx:t})[e]}function lB({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:o,classNames:i,classes:a,unstyled:s,className:l,rootSelector:c,props:u,stylesCtx:d,withStaticClasses:f,headless:p,transformedStyles:h}){return rB(function({theme:e,options:t,unstyled:n}){return rB(t?.focusable&&!n&&(e.focusClassName||oB[e.focusRing]),t?.active&&!n&&e.activeClassName)}({theme:e,options:t,unstyled:s||p}),function({themeName:e,theme:t,selector:n,props:r,stylesCtx:o}){return e.map((e=>aB({theme:t,classNames:t.components[e]?.classNames,props:r,stylesCtx:o})?.[n]))}({theme:e,themeName:n,selector:r,props:u,stylesCtx:d}),function({options:e,classes:t,selector:n,unstyled:r}){return e?.variant&&!r?t[`${n}--${e.variant}`]:void 0}({options:t,classes:a,selector:r,unstyled:s}),sB({selector:r,stylesCtx:d,theme:e,classNames:i,props:u}),sB({selector:r,stylesCtx:d,theme:e,classNames:h,props:u}),function({selector:e,stylesCtx:t,options:n,props:r,theme:o}){return aB({theme:o,classNames:n?.classNames,props:n?.props||r,stylesCtx:t})[e]}({selector:r,stylesCtx:d,options:t,props:u,theme:e}),function({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}({rootSelector:c,selector:r,className:l}),function({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}({selector:r,classes:a,unstyled:s||p}),f&&!p&&function({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return!1===r?[]:e.map((e=>`${t}-${e}-${n}`))}({themeName:n,classNamesPrefix:o,selector:r,withStaticClass:t?.withStaticClass}),t?.className)}function cB({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce(((t,o)=>"function"==typeof o?{...t,...o(e,n,r)}:{...t,...o}),{})}function uB({theme:e,themeName:t,props:n,stylesCtx:r,selector:o}){return t.map((t=>cB({theme:e,styles:e.components[t]?.styles,props:n,stylesCtx:r})[o])).reduce(((e,t)=>({...e,...t})),{})}function dB({style:e,theme:t}){return Array.isArray(e)?[...e].reduce(((e,n)=>({...e,...dB({style:n,theme:t})})),{}):"function"==typeof e?e(t):null==e?{}:e}function fB({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:o,selector:i,themeName:a,headless:s}){return function(e){return e.reduce(((e,t)=>(t&&Object.keys(t).forEach((n=>{e[n]={...e[n],...OI(t[n])}})),e)),{})}([s?{}:t?.(n,r,o),...a.map((e=>n.components?.[e]?.vars?.(n,r,o))),e?.(n,r,o)])?.[i]}function pB({theme:e,themeName:t,selector:n,options:r,props:o,stylesCtx:i,rootSelector:a,styles:s,style:l,vars:c,varsResolver:u,headless:d,withStylesTransform:f}){return{...!f&&uB({theme:e,themeName:t,props:o,stylesCtx:i,selector:n}),...!f&&cB({theme:e,styles:s,props:o,stylesCtx:i})[n],...!f&&cB({theme:e,styles:r?.styles,props:r?.props||o,stylesCtx:i})[n],...fB({theme:e,props:o,stylesCtx:i,vars:c,varsResolver:u,selector:n,themeName:t,headless:d}),...a===n?dB({style:l,theme:e}):null,...dB({style:r?.style,theme:e})}}function hB({name:e,classes:t,props:n,stylesCtx:r,className:o,style:i,rootSelector:a="root",unstyled:s,classNames:l,styles:c,vars:u,varsResolver:d}){const f=ZI(),p=QI().classNamesPrefix,h=QI().withStaticClasses,m=QI().headless,v=(Array.isArray(e)?e:[e]).filter((e=>e)),{withStylesTransform:g,getTransformedStyles:y}=function({props:e,stylesCtx:t,themeName:n}){const r=ZI(),o=(QI().stylesTransform?.styles)?.();return{getTransformedStyles:i=>o?[...i.map((n=>o(n,{props:e,theme:r,ctx:t}))),...n.map((n=>o(r.components[n]?.styles,{props:e,theme:r,ctx:t})))].filter(Boolean):[],withStylesTransform:!!o}}({props:n,stylesCtx:r,themeName:v});return(e,b)=>({className:lB({theme:f,options:b,themeName:v,selector:e,classNamesPrefix:p,classNames:l,classes:t,unstyled:s,className:o,rootSelector:a,props:n,stylesCtx:r,withStaticClasses:h,headless:m,transformedStyles:y([b?.styles,c])}),style:pB({theme:f,themeName:v,selector:e,options:b,props:n,stylesCtx:r,rootSelector:a,styles:c,style:i,vars:u,varsResolver:d,headless:m,withStylesTransform:g})})}function mB(e){return Object.keys(e)}function vB(e){return mB(e).reduce(((t,n)=>{return void 0!==e[n]?`${t}${r=n,r.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}:${e[n]};`:t;var r}),"").trim()}function gB({selector:e,styles:t,media:n,container:r}){const o=t?vB(t):"",i=Array.isArray(n)?n.map((t=>`@media${t.query}{${e}{${vB(t.styles)}}}`)):[],a=Array.isArray(r)?r.map((t=>`@container ${t.query}{${e}{${vB(t.styles)}}}`)):[];return`${o?`${e}{${o}}`:""}${i.join("")}${a.join("")}`.trim()}function yB(e){const t=eB();return(0,T.jsx)("style",{"data-mantine-styles":"inline",nonce:t?.(),dangerouslySetInnerHTML:{__html:gB(e)}})}function bB(e){return e.startsWith("data-")?e:`data-${e}`}function kB(e){return e?"string"==typeof e?{[bB(e)]:!0}:Array.isArray(e)?[...e].reduce(((e,t)=>({...e,...kB(t)})),{}):(t=e,Object.keys(t).reduce(((e,n)=>{const r=t[n];return void 0===r||""===r||!1===r||null===r||(e[bB(n)]=t[n]),e}),{})):null;var t}function wB(e,t){return Array.isArray(e)?[...e].reduce(((e,n)=>({...e,...wB(n,t)})),{}):"function"==typeof e?e(t):null==e?{}:e}function xB({theme:e,style:t,vars:n,styleProps:r}){return{...wB(t,e),...wB(n,e),...r}}function CB(e){const{m:t,mx:n,my:r,mt:o,mb:i,ml:a,mr:s,me:l,ms:c,p:u,px:d,py:f,pt:p,pb:h,pl:m,pr:v,pe:g,ps:y,bd:b,bg:k,c:w,opacity:x,ff:C,fz:S,fw:_,lts:E,ta:D,lh:M,fs:A,tt:O,td:T,w:j,miw:N,maw:P,h:L,mih:R,mah:I,bgsz:B,bgp:F,bgr:H,bga:z,pos:V,top:$,left:U,bottom:G,right:W,inset:q,display:K,flex:Z,hiddenFrom:J,visibleFrom:X,lightHidden:Y,darkHidden:Q,sx:ee,...te}=e;return{styleProps:OI({m:t,mx:n,my:r,mt:o,mb:i,ml:a,mr:s,me:l,ms:c,p:u,px:d,py:f,pt:p,pb:h,pl:m,pr:v,pe:g,ps:y,bd:b,bg:k,c:w,opacity:x,ff:C,fz:S,fw:_,lts:E,ta:D,lh:M,fs:A,tt:O,td:T,w:j,miw:N,maw:P,h:L,mih:R,mah:I,bgsz:B,bgp:F,bgr:H,bga:z,pos:V,top:$,left:U,bottom:G,right:W,inset:q,display:K,flex:Z,hiddenFrom:J,visibleFrom:X,lightHidden:Y,darkHidden:Q,sx:ee}),rest:te}}const SB={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function _B(e,t){const n=RI({color:e,theme:t});return"dimmed"===n.color?"var(--mantine-color-dimmed)":"bright"===n.color?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}const EB={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"},DB=["h1","h2","h3","h4","h5","h6"],MB=["h1","h2","h3","h4","h5","h6"],AB={color:_B,textColor:function(e,t){const n=RI({color:e,theme:t});return n.isThemeColor&&void 0===n.shade?`var(--mantine-color-${n.color}-text)`:_B(e,t)},fontSize:function(e,t){return"string"==typeof e&&e in t.fontSizes?`var(--mantine-font-size-${e})`:"string"==typeof e&&DB.includes(e)?`var(--mantine-${e}-font-size)`:"number"==typeof e||"string"==typeof e?xI(e):e},spacing:function(e,t){if("number"==typeof e)return xI(e);if("string"==typeof e){const n=e.replace("-","");if(!(n in t.spacing))return xI(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e},identity:function(e){return e},size:function(e){return"number"==typeof e?xI(e):e},lineHeight:function(e,t){return"string"==typeof e&&e in t.lineHeights?`var(--mantine-line-height-${e})`:"string"==typeof e&&MB.includes(e)?`var(--mantine-${e}-line-height)`:e},fontFamily:function(e){return"string"==typeof e&&e in EB?EB[e]:e},border:function(e,t){if("number"==typeof e)return xI(e);if("string"==typeof e){const[n,r,...o]=e.split(" ").filter((e=>""!==e.trim()));let i=`${xI(n)}`;return r&&(i+=` ${r}`),o.length>0&&(i+=` ${_B(o.join(" "),t)}`),i.trim()}return e}};function OB(e){return e.replace("(min-width: ","").replace("em)","")}function TB(e,t){return"object"==typeof e&&null!==e&&t in e?e[t]:e}function jB({styleProps:e,data:t,theme:n}){return function({media:e,...t}){const n=Object.keys(e).sort(((e,t)=>Number(OB(e))-Number(OB(t)))).map((t=>({query:t,styles:e[t]})));return{...t,media:n}}(mB(e).reduce(((r,o)=>{if("hiddenFrom"===o||"visibleFrom"===o||"sx"===o)return r;const i=t[o],a=Array.isArray(i.property)?i.property:[i.property],s="object"==typeof(l=e[o])&&null!==l?"base"in l?l.base:void 0:l;var l;if(!function(e){if("object"!=typeof e||null===e)return!1;const t=Object.keys(e);return 1!==t.length||"base"!==t[0]}(e[o]))return a.forEach((e=>{r.inlineStyles[e]=AB[i.type](s,n)})),r;r.hasResponsiveStyles=!0;const c=function(e){return"object"==typeof e&&null!==e?mB(e).filter((e=>"base"!==e)):[]}(e[o]);return a.forEach((t=>{s&&(r.styles[t]=AB[i.type](s,n)),c.forEach((a=>{const s=`(min-width: ${n.breakpoints[a]})`;r.media[s]={...r.media[s],[t]:AB[i.type](TB(e[o],a),n)}}))})),r}),{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function NB(){return`__m__-${(0,f.useId)().replace(/:/g,"")}`}const PB=(0,f.forwardRef)((({component:e,style:t,__vars:n,className:r,variant:o,mod:i,size:a,hiddenFrom:s,visibleFrom:l,lightHidden:c,darkHidden:u,renderRoot:d,__size:f,...p},h)=>{const m=ZI(),v=e||"div",{styleProps:g,rest:y}=CB(p),b=QI().stylesTransform?.sx,k=b?.()?.(g.sx),w=NB(),x=jB({styleProps:g,theme:m,data:SB}),C={ref:h,style:xB({theme:m,style:t,vars:n,styleProps:x.inlineStyles}),className:rB(r,k,{[w]:x.hasResponsiveStyles,"mantine-light-hidden":c,"mantine-dark-hidden":u,[`mantine-hidden-from-${s}`]:s,[`mantine-visible-from-${l}`]:l}),"data-variant":o,"data-size":bI(a)?void 0:a||void 0,size:f,...kB(i),...y};return(0,T.jsxs)(T.Fragment,{children:[x.hasResponsiveStyles&&(0,T.jsx)(yB,{selector:`.${w}`,styles:x.styles,media:x.media}),"function"==typeof d?d(C):(0,T.jsx)(v,{...C})]})}));PB.displayName="@mantine/core/Box";const LB=PB;function RB(e){return e}function IB(e){const t=(0,f.forwardRef)(e);return t.extend=RB,t.withProps=e=>{const n=(0,f.forwardRef)(((n,r)=>(0,T.jsx)(t,{...e,...n,ref:r})));return n.extend=t.extend,n.displayName=`WithProps(${t.displayName})`,n},t}var BB={root:"m_6d731127"};const FB={gap:"md",align:"stretch",justify:"flex-start"},HB=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":_I(t),"--stack-align":n,"--stack-justify":r}}),zB=IB(((e,t)=>{const n=XI("Stack",FB,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:l,align:c,justify:u,gap:d,variant:f,...p}=n,h=hB({name:"Stack",props:n,classes:BB,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:l,varsResolver:HB});return(0,T.jsx)(LB,{ref:t,...h("root"),variant:f,...p})}));function VB(e){const t=(0,f.forwardRef)(e);return t.withProps=e=>{const n=(0,f.forwardRef)(((n,r)=>(0,T.jsx)(t,{...e,...n,ref:r})));return n.extend=t.extend,n.displayName=`WithProps(${t.displayName})`,n},t.extend=RB,t}zB.classes=BB,zB.displayName="@mantine/core/Stack";var $B={root:"m_b6d8b162"};function UB(e){return"start"===e?"start":"end"===e||e?"end":void 0}const GB={inherit:!1},WB=(e,{variant:t,lineClamp:n,gradient:r,size:o,color:i})=>({root:{"--text-fz":DI(o),"--text-lh":MI(o),"--text-gradient":"gradient"===t?BI(r,e):void 0,"--text-line-clamp":"number"==typeof n?n.toString():void 0,"--text-color":i?II(i,e):void 0}}),qB=VB(((e,t)=>{const n=XI("Text",GB,e),{lineClamp:r,truncate:o,inline:i,inherit:a,gradient:s,span:l,__staticSelector:c,vars:u,className:d,style:f,classNames:p,styles:h,unstyled:m,variant:v,mod:g,size:y,...b}=n,k=hB({name:["Text",c],props:n,classes:$B,className:d,style:f,classNames:p,styles:h,unstyled:m,vars:u,varsResolver:WB});return(0,T.jsx)(LB,{...k("root",{focusable:!0}),ref:t,component:l?"span":"p",variant:v,mod:[{"data-truncate":UB(o),"data-line-clamp":"number"==typeof r,"data-inline":i,"data-inherit":a},g],size:y,...b})}));qB.classes=$B,qB.displayName="@mantine/core/Text";var KB={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const ZB=(0,f.forwardRef)((({className:e,...t},n)=>(0,T.jsxs)(LB,{component:"span",className:rB(KB.barsLoader,e),...t,ref:n,children:[(0,T.jsx)("span",{className:KB.bar}),(0,T.jsx)("span",{className:KB.bar}),(0,T.jsx)("span",{className:KB.bar})]})));ZB.displayName="@mantine/core/Bars";const JB=(0,f.forwardRef)((({className:e,...t},n)=>(0,T.jsxs)(LB,{component:"span",className:rB(KB.dotsLoader,e),...t,ref:n,children:[(0,T.jsx)("span",{className:KB.dot}),(0,T.jsx)("span",{className:KB.dot}),(0,T.jsx)("span",{className:KB.dot})]})));JB.displayName="@mantine/core/Dots";const XB=(0,f.forwardRef)((({className:e,...t},n)=>(0,T.jsx)(LB,{component:"span",className:rB(KB.ovalLoader,e),...t,ref:n})));XB.displayName="@mantine/core/Oval";const YB={bars:ZB,oval:XB,dots:JB},QB={loaders:YB,type:"oval"},eF=(e,{size:t,color:n})=>({root:{"--loader-size":SI(t,"loader-size"),"--loader-color":n?II(n,e):void 0}}),tF=IB(((e,t)=>{const n=XI("Loader",QB,e),{size:r,color:o,type:i,vars:a,className:s,style:l,classNames:c,styles:u,unstyled:d,loaders:f,variant:p,children:h,...m}=n,v=hB({name:"Loader",props:n,classes:KB,className:s,style:l,classNames:c,styles:u,unstyled:d,vars:a,varsResolver:eF});return h?(0,T.jsx)(LB,{...v("root"),ref:t,...m,children:h}):(0,T.jsx)(LB,{...v("root"),ref:t,component:f[i],variant:p,size:r,...m})}));tF.defaultLoaders=YB,tF.classes=KB,tF.displayName="@mantine/core/Loader";const nF=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${"bottom"===e?10:-10}px)`},transitionProperty:"transform, opacity"}),rF={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...nF("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...nF("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...nF("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...nF("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...nF("top"),common:{transformOrigin:"top right"}}},oF={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function iF({transition:e,state:t,duration:n,timingFunction:r}){const o={WebkitBackfaceVisibility:"hidden",willChange:"transform, opacity",transitionDuration:`${n}ms`,transitionTimingFunction:r};return"string"==typeof e?e in rF?{transitionProperty:rF[e].transitionProperty,...o,...rF[e].common,...rF[e][oF[t]]}:{}:{transitionProperty:e.transitionProperty,...o,...e.common,...e[oF[t]]}}function aF(e,t){const n=(0,f.useRef)(!1);(0,f.useEffect)((()=>()=>{n.current=!1}),[]),(0,f.useEffect)((()=>{if(n.current)return e();n.current=!0}),t)}function sF({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:o,onExit:i,onEntered:a,onExited:s,enterDelay:l,exitDelay:c}){const u=ZI(),d=function(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,o]=(0,f.useState)(n?t:function(e){return"undefined"!=typeof window&&"matchMedia"in window&&window.matchMedia(e).matches}(e)),i=(0,f.useRef)(null);return(0,f.useEffect)((()=>{if("matchMedia"in window)return i.current=window.matchMedia(e),o(i.current.matches),function(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch(n){return e.addListener(t),()=>e.removeListener(t)}}(i.current,(e=>o(e.matches)))}),[e]),r}("(prefers-reduced-motion: reduce)",void 0,void 0),p=!!u.respectReducedMotion&&d,[h,m]=(0,f.useState)(p?0:e),[v,g]=(0,f.useState)(r?"entered":"exited"),y=(0,f.useRef)(-1),b=(0,f.useRef)(-1),k=(0,f.useRef)(-1),w=n=>{const r=n?o:i,l=n?a:s;window.clearTimeout(y.current);const c=p?0:n?e:t;m(c),0===c?("function"==typeof r&&r(),"function"==typeof l&&l(),g(n?"entered":"exited")):k.current=requestAnimationFrame((()=>{cT.flushSync((()=>{g(n?"pre-entering":"pre-exiting")})),k.current=requestAnimationFrame((()=>{"function"==typeof r&&r(),g(n?"entering":"exiting"),y.current=window.setTimeout((()=>{"function"==typeof l&&l(),g(n?"entered":"exited")}),c)}))}))};return aF((()=>{var e;e=r,window.clearTimeout(b.current),"number"==typeof(e?l:c)?b.current=window.setTimeout((()=>{w(e)}),e?l:c):w(e)}),[r]),(0,f.useEffect)((()=>()=>{window.clearTimeout(y.current),cancelAnimationFrame(k.current)}),[]),{transitionDuration:h,transitionStatus:v,transitionTimingFunction:n||"ease"}}function lF({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:o,children:i,timingFunction:a="ease",onExit:s,onEntered:l,onEnter:c,onExited:u,enterDelay:d,exitDelay:f}){const p=tB(),{transitionDuration:h,transitionStatus:m,transitionTimingFunction:v}=sF({mounted:o,exitDuration:r,duration:n,timingFunction:a,onExit:s,onEntered:l,onEnter:c,onExited:u,enterDelay:d,exitDelay:f});return 0===h||"test"===p?o?(0,T.jsx)(T.Fragment,{children:i({})}):e?i({display:"none"}):null:"exited"===m?e?i({display:"none"}):null:(0,T.jsx)(T.Fragment,{children:i(iF({transition:t,duration:h,state:m,timingFunction:v}))})}lF.displayName="@mantine/core/Transition";var cF={root:"m_87cf2631"};const uF={__staticSelector:"UnstyledButton"},dF=VB(((e,t)=>{const n=XI("UnstyledButton",uF,e),{className:r,component:o="button",__staticSelector:i,unstyled:a,classNames:s,styles:l,style:c,...u}=n,d=hB({name:i,props:n,classes:cF,className:r,style:c,classNames:s,styles:l,unstyled:a});return(0,T.jsx)(LB,{...d("root",{focusable:!0}),component:o,ref:t,type:"button"===o?"button":void 0,...u})}));dF.classes=cF,dF.displayName="@mantine/core/UnstyledButton";var fF={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const pF={orientation:"horizontal"},hF=(e,{borderWidth:t})=>({group:{"--button-border-width":xI(t)}}),mF=IB(((e,t)=>{const n=XI("ButtonGroup",pF,e),{className:r,style:o,classNames:i,styles:a,unstyled:s,orientation:l,vars:c,borderWidth:u,variant:d,mod:f,...p}=XI("ButtonGroup",pF,e),h=hB({name:"ButtonGroup",props:n,classes:fF,className:r,style:o,classNames:i,styles:a,unstyled:s,vars:c,varsResolver:hF,rootSelector:"group"});return(0,T.jsx)(LB,{...h("group"),ref:t,variant:d,mod:[{"data-orientation":l},f],role:"group",...p})}));mF.classes=fF,mF.displayName="@mantine/core/ButtonGroup";const vF={},gF=(e,{radius:t,color:n,gradient:r,variant:o,autoContrast:i,size:a})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:o||"filled",autoContrast:i});return{groupSection:{"--section-height":SI(a,"section-height"),"--section-padding-x":SI(a,"section-padding-x"),"--section-fz":a?.includes("compact")?DI(a.replace("compact-","")):DI(a),"--section-radius":void 0===t?void 0:EI(t),"--section-bg":n||o?s.background:void 0,"--section-color":s.color,"--section-bd":n||o?s.border:void 0}}},yF=IB(((e,t)=>{const n=XI("ButtonGroupSection",vF,e),{className:r,style:o,classNames:i,styles:a,unstyled:s,vars:l,variant:c,gradient:u,radius:d,autoContrast:f,...p}=XI("ButtonGroupSection",vF,e),h=hB({name:"ButtonGroupSection",props:n,classes:fF,className:r,style:o,classNames:i,styles:a,unstyled:s,vars:l,varsResolver:gF,rootSelector:"groupSection"});return(0,T.jsx)(LB,{...h("groupSection"),ref:t,variant:c,...p})}));yF.classes=fF,yF.displayName="@mantine/core/ButtonGroupSection";const bF={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${xI(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},kF={},wF=(e,{radius:t,color:n,gradient:r,variant:o,size:i,justify:a,autoContrast:s})=>{const l=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:o||"filled",autoContrast:s});return{root:{"--button-justify":a,"--button-height":SI(i,"button-height"),"--button-padding-x":SI(i,"button-padding-x"),"--button-fz":i?.includes("compact")?DI(i.replace("compact-","")):DI(i),"--button-radius":void 0===t?void 0:EI(t),"--button-bg":n||o?l.background:void 0,"--button-hover":n||o?l.hover:void 0,"--button-color":l.color,"--button-bd":n||o?l.border:void 0,"--button-hover-color":n||o?l.hoverColor:void 0}}},xF=VB(((e,t)=>{const n=XI("Button",kF,e),{style:r,vars:o,className:i,color:a,disabled:s,children:l,leftSection:c,rightSection:u,fullWidth:d,variant:f,radius:p,loading:h,loaderProps:m,gradient:v,classNames:g,styles:y,unstyled:b,"data-disabled":k,autoContrast:w,mod:x,...C}=n,S=hB({name:"Button",props:n,classes:fF,className:i,style:r,classNames:g,styles:y,unstyled:b,vars:o,varsResolver:wF}),_=!!c,E=!!u;return(0,T.jsxs)(dF,{ref:t,...S("root",{active:!s&&!h&&!k}),unstyled:b,variant:f,disabled:s||h,mod:[{disabled:s||k,loading:h,block:d,"with-left-section":_,"with-right-section":E},x],...C,children:[(0,T.jsx)(lF,{mounted:!!h,transition:bF,duration:150,children:e=>(0,T.jsx)(LB,{component:"span",...S("loader",{style:e}),"aria-hidden":!0,children:(0,T.jsx)(tF,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),(0,T.jsxs)("span",{...S("inner"),children:[c&&(0,T.jsx)(LB,{component:"span",...S("section"),mod:{position:"left"},children:c}),(0,T.jsx)(LB,{component:"span",mod:{loading:h},...S("label"),children:l}),u&&(0,T.jsx)(LB,{component:"span",...S("section"),mod:{position:"right"},children:u})]})]})}));xF.classes=fF,xF.displayName="@mantine/core/Button",xF.Group=mF,xF.GroupSection=yF;var CF={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const SF={orientation:"horizontal"},_F=(e,{borderWidth:t})=>({group:{"--ai-border-width":xI(t)}}),EF=IB(((e,t)=>{const n=XI("ActionIconGroup",SF,e),{className:r,style:o,classNames:i,styles:a,unstyled:s,orientation:l,vars:c,borderWidth:u,variant:d,mod:f,...p}=XI("ActionIconGroup",SF,e),h=hB({name:"ActionIconGroup",props:n,classes:CF,className:r,style:o,classNames:i,styles:a,unstyled:s,vars:c,varsResolver:_F,rootSelector:"group"});return(0,T.jsx)(LB,{...h("group"),ref:t,variant:d,mod:[{"data-orientation":l},f],role:"group",...p})}));EF.classes=CF,EF.displayName="@mantine/core/ActionIconGroup";const DF={},MF=(e,{radius:t,color:n,gradient:r,variant:o,autoContrast:i,size:a})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:o||"filled",autoContrast:i});return{groupSection:{"--section-height":SI(a,"section-height"),"--section-padding-x":SI(a,"section-padding-x"),"--section-fz":DI(a),"--section-radius":void 0===t?void 0:EI(t),"--section-bg":n||o?s.background:void 0,"--section-color":s.color,"--section-bd":n||o?s.border:void 0}}},AF=IB(((e,t)=>{const n=XI("ActionIconGroupSection",DF,e),{className:r,style:o,classNames:i,styles:a,unstyled:s,vars:l,variant:c,gradient:u,radius:d,autoContrast:f,...p}=XI("ActionIconGroupSection",DF,e),h=hB({name:"ActionIconGroupSection",props:n,classes:CF,className:r,style:o,classNames:i,styles:a,unstyled:s,vars:l,varsResolver:MF,rootSelector:"groupSection"});return(0,T.jsx)(LB,{...h("groupSection"),ref:t,variant:c,...p})}));AF.classes=CF,AF.displayName="@mantine/core/ActionIconGroupSection";const OF={},TF=(e,{size:t,radius:n,variant:r,gradient:o,color:i,autoContrast:a})=>{const s=e.variantColorResolver({color:i||e.primaryColor,theme:e,gradient:o,variant:r||"filled",autoContrast:a});return{root:{"--ai-size":SI(t,"ai-size"),"--ai-radius":void 0===n?void 0:EI(n),"--ai-bg":i||r?s.background:void 0,"--ai-hover":i||r?s.hover:void 0,"--ai-hover-color":i||r?s.hoverColor:void 0,"--ai-color":s.color,"--ai-bd":i||r?s.border:void 0}}},jF=VB(((e,t)=>{const n=XI("ActionIcon",OF,e),{className:r,unstyled:o,variant:i,classNames:a,styles:s,style:l,loading:c,loaderProps:u,size:d,color:f,radius:p,__staticSelector:h,gradient:m,vars:v,children:g,disabled:y,"data-disabled":b,autoContrast:k,mod:w,...x}=n,C=hB({name:["ActionIcon",h],props:n,className:r,style:l,classes:CF,classNames:a,styles:s,unstyled:o,vars:v,varsResolver:TF});return(0,T.jsxs)(dF,{...C("root",{active:!y&&!c&&!b}),...x,unstyled:o,variant:i,size:d,disabled:y||c,ref:t,mod:[{loading:c,disabled:y||b},w],children:[(0,T.jsx)(lF,{mounted:!!c,transition:"slide-down",duration:150,children:e=>(0,T.jsx)(LB,{component:"span",...C("loader",{style:e}),"aria-hidden":!0,children:(0,T.jsx)(tF,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...u})})}),(0,T.jsx)(LB,{component:"span",mod:{loading:c},...C("icon"),children:g})]})}));function NF(e,t){if("function"==typeof e)return e(t);"object"==typeof e&&null!==e&&"current"in e&&(e.current=t)}function PF(...e){const t=new Map;return n=>{if(e.forEach((e=>{const r=NF(e,n);r&&t.set(e,r)})),t.size>0)return()=>{e.forEach((e=>{const n=t.get(e);n?n():NF(e,null)})),t.clear()}}}function LF(...e){return(0,f.useCallback)(PF(...e),e)}function RF(e){return!Array.isArray(e)&&null!==e&&"object"==typeof e&&e.type!==f.Fragment}jF.classes=CF,jF.displayName="@mantine/core/ActionIcon",jF.Group=EF,jF.GroupSection=AF;const IF={app:100,modal:200,popover:300,overlay:400,max:9999};function BF(e){return IF[e]}function FF(e){const t=f.version;return"string"!=typeof f.version||t.startsWith("18.")?e?.ref:e?.props?.ref}const HF=(0,f.createContext)({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function zF(){return(0,f.useContext)(HF)}function VF(e,t){if("rtl"===e&&(t.includes("right")||t.includes("left"))){const[e,n]=t.split("-"),r="right"===e?"left":"right";return void 0===n?r:`${r}-${n}`}return t}function $F(e,t,n,r){return"center"===e||"center"===r?{top:t}:"end"===e?{bottom:n}:"start"===e?{top:n}:{}}function UF(e,t,n,r,o){return"center"===e||"center"===r?{left:t}:"end"===e?{["ltr"===o?"right":"left"]:n}:"start"===e?{["ltr"===o?"left":"right"]:n}:{}}const GF={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function WF({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:o,arrowX:i,arrowY:a,dir:s}){const[l,c="center"]=e.split("-"),u={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[GF[l]]:r},d=-t/2;return"left"===l?{...u,...$F(c,a,n,o),right:d,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:"right"===l?{...u,...$F(c,a,n,o),left:d,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:"top"===l?{...u,...UF(c,i,n,o,s),bottom:d,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:"bottom"===l?{...u,...UF(c,i,n,o,s),top:d,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const qF=(0,f.forwardRef)((({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:o,visible:i,arrowX:a,arrowY:s,style:l,...c},u)=>{const{dir:d}=zF();return i?(0,T.jsx)("div",{...c,ref:u,style:{...l,...WF({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:o,dir:d,arrowX:a,arrowY:s})}}):null}));qF.displayName="@mantine/core/FloatingArrow";const KF="undefined"!=typeof document?f.useLayoutEffect:f.useEffect;function ZF(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),"string"==typeof e.className&&t.classList.add(...e.className.split(" ").filter(Boolean)),"object"==typeof e.style&&Object.assign(t.style,e.style),"string"==typeof e.id&&t.setAttribute("id",e.id),t}const JF={},XF=IB(((e,t)=>{const{children:n,target:r,reuseTargetNode:o,...i}=XI("Portal",JF,e),[a,s]=(0,f.useState)(!1),l=(0,f.useRef)(null);return KF((()=>(s(!0),l.current=function({target:e,reuseTargetNode:t,...n}){if(e)return"string"==typeof e?document.querySelector(e)||ZF(n):e;if(t){const e=document.querySelector("[data-mantine-shared-portal-node]");if(e)return e;const t=ZF(n);return t.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(t),t}return ZF(n)}({target:r,reuseTargetNode:o,...i}),NF(t,l.current),r||o||!l.current||document.body.appendChild(l.current),()=>{r||o||!l.current||document.body.removeChild(l.current)})),[r]),a&&l.current?(0,cT.createPortal)((0,T.jsx)(T.Fragment,{children:n}),l.current):null}));XF.displayName="@mantine/core/Portal";const YF=IB((({withinPortal:e=!0,children:t,...n},r)=>"test"!==tB()&&e?(0,T.jsx)(XF,{ref:r,...n,children:t}):(0,T.jsx)(T.Fragment,{children:t})));YF.displayName="@mantine/core/OptionalPortal";const QF={duration:100,transition:"fade"};function eH(e,t){return Array.isArray(e)?[...e].reduce(((e,n)=>({...e,...eH(n,t)})),{}):"function"==typeof e?e(t):null==e?{}:e}var tH={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const nH={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:BF("popover")},rH=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":void 0===t?void 0:EI(t),"--tooltip-bg":n?II(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),oH=IB(((e,t)=>{const n=XI("TooltipFloating",nH,e),{children:r,refProp:o,withinPortal:i,style:a,className:s,classNames:l,styles:c,unstyled:u,radius:d,color:p,label:h,offset:m,position:v,multiline:g,zIndex:y,disabled:b,defaultOpened:k,variant:w,vars:x,portalProps:C,...S}=n,_=ZI(),E=hB({name:"TooltipFloating",props:n,classes:tH,className:s,style:a,classNames:l,styles:c,unstyled:u,rootSelector:"tooltip",vars:x,varsResolver:rH}),{handleMouseMove:D,x:M,y:A,opened:O,boundaryRef:j,floating:N,setOpened:P}=function({offset:e,position:t,defaultOpened:n}){const[r,o]=(0,f.useState)(n),i=(0,f.useRef)(null),{x:a,y:s,elements:l,refs:c,update:u,placement:d}=Qj({placement:t,middleware:[lj({crossAxis:!0,padding:5,rootBoundary:"document"})]}),p=d.includes("right")?e:t.includes("left")?-1*e:0,h=d.includes("bottom")?e:t.includes("top")?-1*e:0,m=(0,f.useCallback)((({clientX:e,clientY:t})=>{c.setPositionReference({getBoundingClientRect:()=>({width:0,height:0,x:e,y:t,left:e+p,top:t+h,right:e,bottom:t})})}),[l.reference]);return(0,f.useEffect)((()=>{if(c.floating.current){const e=i.current;e.addEventListener("mousemove",m);const t=LO(c.floating.current);return t.forEach((e=>{e.addEventListener("scroll",u)})),()=>{e.removeEventListener("mousemove",m),t.forEach((e=>{e.removeEventListener("scroll",u)}))}}}),[l.reference,c.floating.current,u,m,r]),{handleMouseMove:m,x:a,y:s,opened:r,setOpened:o,boundaryRef:i,floating:c.setFloating}}({offset:m,position:v,defaultOpened:k});if(!RF(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const L=LF(j,FF(r),t),R=r.props;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(YF,{...C,withinPortal:i,children:(0,T.jsx)(LB,{...S,...E("tooltip",{style:{...eH(a,_),zIndex:y,display:!b&&O?"block":"none",top:(A&&Math.round(A))??"",left:(M&&Math.round(M))??""}}),variant:w,ref:N,mod:{multiline:g},children:h})}),(0,f.cloneElement)(r,{...R,[o]:L,onMouseEnter:e=>{R.onMouseEnter?.(e),D(e),P(!0)},onMouseLeave:e=>{R.onMouseLeave?.(e),P(!1)}})]})}));oH.classes=tH,oH.displayName="@mantine/core/TooltipFloating";const iH=(0,f.createContext)(!1),aH=iH.Provider,sH={openDelay:0,closeDelay:0};function lH(e){const{openDelay:t,closeDelay:n,children:r}=XI("TooltipGroup",sH,e);return(0,T.jsx)(aH,{value:!0,children:(0,T.jsx)(Pj,{delay:{open:t,close:n},children:r})})}lH.displayName="@mantine/core/TooltipGroup",lH.extend=e=>e;const cH=f["useId".toString()]||(()=>{});function uH(e){const t=function(){const e=cH();return e?`mantine-${e.replace(/:/g,"")}`:""}(),[n,r]=(0,f.useState)(t);return KF((()=>{r(function(e="mantine-"){return`${e}${Math.random().toString(36).slice(2,11)}`}())}),[]),"string"==typeof e?e:"undefined"==typeof window?t:n}function dH({opened:e,floating:t,position:n,positionDependencies:r}){const[o,i]=(0,f.useState)(0);(0,f.useEffect)((()=>{if(t.refs.reference.current&&t.refs.floating.current&&e)return function(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:s="function"==typeof IntersectionObserver,animationFrame:l=!1}=r,c=NT(e),u=o||i?[...c?LO(c):[],...LO(t)]:[];u.forEach((e=>{o&&e.addEventListener("scroll",n,{passive:!0}),i&&e.addEventListener("resize",n)}));const d=c&&s?function(e,t){let n,r=null;const o=kO(e);function i(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function a(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),i();const{left:c,top:u,width:d,height:f}=e.getBoundingClientRect();if(s||t(),!d||!f)return;const p={rootMargin:-pT(u)+"px "+-pT(o.clientWidth-(c+d))+"px "+-pT(o.clientHeight-(u+f))+"px "+-pT(c)+"px",threshold:dT(0,uT(1,l))||1};let h=!0;function m(e){const t=e[0].intersectionRatio;if(t!==l){if(!h)return a();t?a(!1,t):n=setTimeout((()=>{a(!1,1e-7)}),1e3)}h=!1}try{r=new IntersectionObserver(m,{...p,root:o.ownerDocument})}catch(e){r=new IntersectionObserver(m,p)}r.observe(e)}(!0),i}(c,n):null;let f,p=-1,h=null;a&&(h=new ResizeObserver((e=>{let[r]=e;r&&r.target===c&&h&&(h.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var e;null==(e=h)||e.observe(t)}))),n()})),c&&!l&&h.observe(c),h.observe(t));let m=l?IT(e):null;return l&&function t(){const r=IT(e);!m||r.x===m.x&&r.y===m.y&&r.width===m.width&&r.height===m.height||n(),m=r,f=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach((e=>{o&&e.removeEventListener("scroll",n),i&&e.removeEventListener("resize",n)})),null==d||d(),null==(e=h)||e.disconnect(),h=null,l&&cancelAnimationFrame(f)}}(t.refs.reference.current,t.refs.floating.current,t.update)}),[t.refs.reference.current,t.refs.floating.current,e,o,n]),aF((()=>{t.update()}),r),aF((()=>{i((e=>e+1))}),[e])}function fH(e){const t=function(e){if(void 0===e)return{shift:!0,flip:!0};const t={...e};return void 0===e.shift&&(t.shift=!0),void 0===e.flip&&(t.flip=!0),t}(e.middlewares),n=[sj(e.offset)];return t.shift&&n.push(lj("boolean"==typeof t.shift?{padding:8}:{padding:8,...t.shift})),t.flip&&n.push("boolean"==typeof t.flip?uj():uj(t.flip)),n.push(pj({element:e.arrowRef,padding:e.arrowOffset})),t.inline?n.push("boolean"==typeof t.inline?fj():fj(t.inline)):e.inline&&n.push(fj()),n}function pH(e){const[t,n]=(0,f.useState)(e.defaultOpened),r="boolean"==typeof e.opened?e.opened:t,o=(0,f.useContext)(iH),i=uH(),a=(0,f.useCallback)((e=>{n(e),e&&y(i)}),[i]),{x:s,y:l,context:c,refs:u,update:d,placement:p,middlewareData:{arrow:{x:h,y:m}={}}}=Qj({strategy:e.strategy,placement:e.position,open:r,onOpenChange:a,middleware:fH(e)}),{delay:v,currentId:g,setCurrentId:y}=function(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,floatingId:o}=e,{id:i,enabled:a=!0}=t,s=null!=i?i:o,l=f.useContext(Nj),{currentId:c,setCurrentId:u,initialDelay:d,setState:p,timeoutMs:h}=l;return gj((()=>{a&&c&&(p({delay:{open:1,close:Oj(d,"close")}}),c!==s&&r(!1))}),[a,s,r,p,c,d]),gj((()=>{function e(){r(!1),p({delay:d,currentId:null})}if(a&&c&&!n&&c===s){if(h){const t=window.setTimeout(e,h);return()=>{clearTimeout(t)}}e()}}),[a,n,p,c,s,r,d,h]),gj((()=>{a&&u!==jj&&n&&u(s)}),[a,n,u,s]),l}(c,{id:i}),{getReferenceProps:b,getFloatingProps:k}=oN([Tj(c,{enabled:e.events?.hover,delay:o?v:{open:e.openDelay,close:e.closeDelay},mouseOnly:!e.events?.touch}),eN(c,{enabled:e.events?.focus,visibleOnly:!0}),aN(c,{role:"tooltip"}),Yj(c,{enabled:void 0===e.opened})]);dH({opened:r,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:u,update:d}}),aF((()=>{e.onPositionChange?.(p)}),[p]);const w=r&&g&&g!==i;return{x:s,y:l,arrowX:h,arrowY:m,reference:u.setReference,floating:u.setFloating,getFloatingProps:k,getReferenceProps:b,isGroupPhase:w,opened:r,placement:p}}const hH={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:BF("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},mH=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":void 0===t?void 0:EI(t),"--tooltip-bg":n?II(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),vH=IB(((e,t)=>{const n=XI("Tooltip",hH,e),{children:r,position:o,refProp:i,label:a,openDelay:s,closeDelay:l,onPositionChange:c,opened:u,defaultOpened:d,withinPortal:p,radius:h,color:m,classNames:v,styles:g,unstyled:y,style:b,className:k,withArrow:w,arrowSize:x,arrowOffset:C,arrowRadius:S,arrowPosition:_,offset:E,transitionProps:D,multiline:M,events:A,zIndex:O,disabled:j,positionDependencies:N,onClick:P,onMouseEnter:L,onMouseLeave:R,inline:I,variant:B,keepMounted:F,vars:H,portalProps:z,mod:V,floatingStrategy:$,middlewares:U,...G}=XI("Tooltip",hH,n),{dir:W}=zF(),q=(0,f.useRef)(null),K=pH({position:VF(W,o),closeDelay:l,openDelay:s,onPositionChange:c,opened:u,defaultOpened:d,events:A,arrowRef:q,arrowOffset:C,offset:"number"==typeof E?E+(w?x/2:0):E,positionDependencies:[...N,r],inline:I,strategy:$,middlewares:U}),Z=hB({name:"Tooltip",props:n,classes:tH,className:k,style:b,classNames:v,styles:g,unstyled:y,rootSelector:"tooltip",vars:H,varsResolver:mH});if(!RF(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const J=LF(K.reference,FF(r),t),X=function(e){return{...QF,duration:100,transition:"fade",...e}}(D),Y=r.props;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(YF,{...z,withinPortal:p,children:(0,T.jsx)(lF,{...X,keepMounted:F,mounted:!j&&!!K.opened,duration:K.isGroupPhase?10:X.duration,children:e=>(0,T.jsxs)(LB,{...G,"data-fixed":"fixed"===$||void 0,variant:B,mod:[{multiline:M},V],...K.getFloatingProps({ref:K.floating,className:Z("tooltip").className,style:{...Z("tooltip").style,...e,zIndex:O,top:K.y??0,left:K.x??0}}),children:[a,(0,T.jsx)(qF,{ref:q,arrowX:K.arrowX,arrowY:K.arrowY,visible:w,position:K.placement,arrowSize:x,arrowOffset:C,arrowRadius:S,arrowPosition:_,...Z("arrow")})]})})}),(0,f.cloneElement)(r,K.getReferenceProps({onClick:P,onMouseEnter:L,onMouseLeave:R,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,className:rB(k,Y.className),...Y,[i]:J}))]})}));function gH({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[o,i]=(0,f.useState)(void 0!==t?t:n);return void 0!==e?[e,r,!0]:[o,(e,...t)=>{i(e),r?.(e,...t)},!1]}function yH({size:e,style:t,...n}){const r=void 0!==e?{width:xI(e),height:xI(e),...t}:t;return(0,T.jsx)("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:(0,T.jsx)("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function bH(e=null){const t=(0,f.createContext)(e);return[({children:e,value:n})=>(0,T.jsx)(t.Provider,{value:n,children:e}),()=>(0,f.useContext)(t)]}vH.classes=tH,vH.displayName="@mantine/core/Tooltip",vH.Floating=oH,vH.Group=lH;const[kH,wH]=bH(),xH={};function CH(e){const{value:t,defaultValue:n,onChange:r,multiple:o,children:i}=XI("ChipGroup",xH,e),[a,s]=gH({value:t,defaultValue:n,finalValue:o?[]:null,onChange:r});return(0,T.jsx)(kH,{value:{isChipSelected:e=>Array.isArray(a)?a.includes(e):e===a,onChange:e=>{const t=e.currentTarget.value;Array.isArray(a)?s(a.includes(t)?a.filter((e=>e!==t)):[...a,t]):s(t)},multiple:o},children:i})}CH.displayName="@mantine/core/ChipGroup";var SH={root:"m_f59ffda3",label:"m_be049a53","label--outline":"m_3904c1af","label--filled":"m_fa109255","label--light":"m_f7e165c3",iconWrapper:"m_9ac86df9",checkIcon:"m_d6d72580",input:"m_bde07329"};const _H={type:"checkbox"},EH=(e,{size:t,radius:n,variant:r,color:o,autoContrast:i})=>{const a=e.variantColorResolver({color:o||e.primaryColor,theme:e,variant:r||"filled",autoContrast:i});return{root:{"--chip-fz":DI(t),"--chip-size":SI(t,"chip-size"),"--chip-radius":void 0===n?void 0:EI(n),"--chip-checked-padding":SI(t,"chip-checked-padding"),"--chip-padding":SI(t,"chip-padding"),"--chip-icon-size":SI(t,"chip-icon-size"),"--chip-bg":o||r?a.background:void 0,"--chip-hover":o||r?a.hover:void 0,"--chip-color":o||r?a.color:void 0,"--chip-bd":o||r?a.border:void 0,"--chip-spacing":SI(t,"chip-spacing")}}},DH=IB(((e,t)=>{const n=XI("Chip",_H,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:l,id:c,checked:u,defaultChecked:d,onChange:f,value:p,wrapperProps:h,type:m,disabled:v,children:g,size:y,variant:b,icon:k,rootRef:w,autoContrast:x,mod:C,...S}=n,_=hB({name:"Chip",classes:SH,props:n,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:l,varsResolver:EH}),E=wH(),D=uH(c),{styleProps:M,rest:A}=CB(S),[O,j]=gH({value:u,defaultValue:d,finalValue:!1,onChange:f}),N=E?{checked:E.isChipSelected(p),onChange:e=>{E.onChange(e),f?.(e.currentTarget.checked)},type:E.multiple?"checkbox":"radio"}:{},P=N.checked||O;return(0,T.jsxs)(LB,{size:y,variant:b,ref:w,mod:C,..._("root"),...M,...h,children:[(0,T.jsx)("input",{type:m,..._("input"),checked:P,onChange:e=>j(e.currentTarget.checked),id:D,disabled:v,ref:t,value:p,...N,...A}),(0,T.jsxs)("label",{htmlFor:D,"data-checked":P||void 0,"data-disabled":v||void 0,..._("label",{variant:b||"filled"}),children:[P&&(0,T.jsx)("span",{..._("iconWrapper"),children:k||(0,T.jsx)(yH,{..._("checkIcon")})}),(0,T.jsx)("span",{children:g})]})]})}));DH.classes=SH,DH.displayName="@mantine/core/Chip",DH.Group=CH;var MH={root:"m_4081bf90"};const AH={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},OH=(e,{grow:t,preventGrowOverflow:n,gap:r,align:o,justify:i,wrap:a},{childWidth:s})=>({root:{"--group-child-width":t&&n?s:void 0,"--group-gap":_I(r),"--group-align":o,"--group-justify":i,"--group-wrap":a}}),TH=IB(((e,t)=>{const n=XI("Group",AH,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,children:l,gap:c,align:u,justify:d,wrap:p,grow:h,preventGrowOverflow:m,vars:v,variant:g,__size:y,mod:b,...k}=n,w=function(e){return f.Children.toArray(e).filter(Boolean)}(l),x=w.length,C=_I(c??"md"),S=hB({name:"Group",props:n,stylesCtx:{childWidth:`calc(${100/x}% - (${C} - ${C} / ${x}))`},className:o,style:i,classes:MH,classNames:r,styles:a,unstyled:s,vars:v,varsResolver:OH});return(0,T.jsx)(LB,{...S("root"),ref:t,variant:g,mod:[{grow:h},b],size:y,...k,children:w})}));TH.classes=MH,TH.displayName="@mantine/core/Group";var jH={root:"m_1b7284a3"};const NH={},PH=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":void 0===t?void 0:EI(t),"--paper-shadow":AI(n)}}),LH=VB(((e,t)=>{const n=XI("Paper",NH,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,withBorder:l,vars:c,radius:u,shadow:d,variant:f,mod:p,...h}=n,m=hB({name:"Paper",props:n,classes:jH,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:c,varsResolver:PH});return(0,T.jsx)(LB,{ref:t,mod:[{"data-with-border":l},p],...m("root"),variant:f,...h})}));function RH(e){const t=(0,f.createContext)(null);return[({children:e,value:n})=>(0,T.jsx)(t.Provider,{value:n,children:e}),()=>{const n=(0,f.useContext)(t);if(null===n)throw new Error(e);return n}]}LH.classes=jH,LH.displayName="@mantine/core/Paper";const[IH,BH]=RH("Card component was not found in tree");var FH={root:"m_e615b15f",section:"m_599a2148"};const HH={},zH=VB(((e,t)=>{const n=XI("CardSection",HH,e),{classNames:r,className:o,style:i,styles:a,vars:s,withBorder:l,inheritPadding:c,mod:u,...d}=n,f=BH();return(0,T.jsx)(LB,{ref:t,mod:[{"with-border":l,"inherit-padding":c},u],...f.getStyles("section",{className:o,style:i,styles:a,classNames:r}),...d})}));zH.classes=FH,zH.displayName="@mantine/core/CardSection";const VH={},$H=(e,{padding:t})=>({root:{"--card-padding":_I(t)}}),UH=VB(((e,t)=>{const n=XI("Card",VH,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:l,children:c,padding:u,...d}=n,p=hB({name:"Card",props:n,classes:FH,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:l,varsResolver:$H}),h=f.Children.toArray(c),m=h.map(((e,t)=>"object"==typeof e&&e&&"type"in e&&e.type===zH?(0,f.cloneElement)(e,{"data-first-section":0===t||void 0,"data-last-section":t===h.length-1||void 0}):e));return(0,T.jsx)(IH,{value:{getStyles:p},children:(0,T.jsx)(LH,{ref:t,unstyled:s,...p("root"),...d,children:m})})}));UH.classes=FH,UH.displayName="@mantine/core/Card",UH.Section=zH;var GH={root:"m_3eebeb36",label:"m_9e365f20"};const WH={orientation:"horizontal"},qH=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?II(t,e):void 0,"--divider-border-style":n,"--divider-size":SI(r,"divider-size")}}),KH=IB(((e,t)=>{const n=XI("Divider",WH,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:l,color:c,orientation:u,label:d,labelPosition:f,mod:p,...h}=n,m=hB({name:"Divider",classes:GH,props:n,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:l,varsResolver:qH});return(0,T.jsx)(LB,{ref:t,mod:[{orientation:u,"with-label":!!d},p],...m("root"),...h,role:"separator",children:d&&(0,T.jsx)(LB,{component:"span",mod:{position:f},...m("label"),children:d})})}));KH.classes=GH,KH.displayName="@mantine/core/Divider";var ZH={root:"m_18320242","skeleton-fade":"m_299c329c"};const JH={visible:!0,animate:!0},XH=(e,{width:t,height:n,radius:r,circle:o})=>({root:{"--skeleton-height":xI(n),"--skeleton-width":xI(o?n:t),"--skeleton-radius":o?"1000px":void 0===r?void 0:EI(r)}}),YH=IB(((e,t)=>{const n=XI("Skeleton",JH,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:l,width:c,height:u,circle:d,visible:f,radius:p,animate:h,mod:m,...v}=n,g=hB({name:"Skeleton",classes:ZH,props:n,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:l,varsResolver:XH});return(0,T.jsx)(LB,{ref:t,...g("root"),mod:[{visible:f,animate:h},m],...v})}));YH.classes=ZH,YH.displayName="@mantine/core/Skeleton";const QH=(0,f.createContext)(null),ez=QH.Provider;var tz={group:"m_11def92b",root:"m_f85678b6",image:"m_11f8ac07",placeholder:"m_104cd71f"};const nz={},rz=(e,{spacing:t})=>({group:{"--ag-spacing":_I(t)}}),oz=IB(((e,t)=>{const n=XI("AvatarGroup",nz,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:l,spacing:c,...u}=n,d=hB({name:"AvatarGroup",classes:tz,props:n,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:l,varsResolver:rz,rootSelector:"group"});return(0,T.jsx)(ez,{value:!0,children:(0,T.jsx)(LB,{ref:t,...d("group"),...u})})}));function iz(e){return(0,T.jsx)("svg",{...e,"data-avatar-placeholder-icon":!0,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,T.jsx)("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}oz.classes=tz,oz.displayName="@mantine/core/AvatarGroup";const az=["blue","cyan","grape","green","indigo","lime","orange","pink","red","teal","violet"];function sz(e,t=2){const n=e.split(" ");return 1===n.length?e.slice(0,t).toUpperCase():n.map((e=>e[0])).slice(0,t).join("").toUpperCase()}const lz={},cz=(e,{size:t,radius:n,variant:r,gradient:o,color:i,autoContrast:a,name:s,allowedInitialsColors:l})=>{const c="initials"===i&&"string"==typeof s?function(e,t=az){const n=function(e){let t=0;for(let n=0;n<e.length;n+=1)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}(e);return t[Math.abs(n)%t.length]}(s,l):i,u=e.variantColorResolver({color:c||"gray",theme:e,gradient:o,variant:r||"light",autoContrast:a});return{root:{"--avatar-size":SI(t,"avatar-size"),"--avatar-radius":void 0===n?void 0:EI(n),"--avatar-bg":c||r?u.background:void 0,"--avatar-color":c||r?u.color:void 0,"--avatar-bd":c||r?u.border:void 0}}},uz=VB(((e,t)=>{const n=XI("Avatar",lz,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:l,src:c,alt:u,radius:d,color:p,gradient:h,imageProps:m,children:v,autoContrast:g,mod:y,name:b,allowedInitialsColors:k,...w}=n,x={withinGroup:!!(0,f.useContext)(QH)},[C,S]=(0,f.useState)(!c),_=hB({name:"Avatar",props:n,classes:tz,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:l,varsResolver:cz});return(0,f.useEffect)((()=>S(!c)),[c]),(0,T.jsx)(LB,{..._("root"),mod:[{"within-group":x.withinGroup},y],ref:t,...w,children:C?(0,T.jsx)("span",{..._("placeholder"),title:u,children:v||"string"==typeof b&&sz(b)||(0,T.jsx)(iz,{})}):(0,T.jsx)("img",{...m,..._("image"),src:c,alt:u,onError:e=>{S(!0),m?.onError?.(e)}})})}));uz.classes=tz,uz.displayName="@mantine/core/Avatar",uz.Group=oz;const[dz,fz]=bH({size:"sm"});function pz({classNames:e,styles:t,props:n,stylesCtx:r}){const o=ZI();return{resolvedClassNames:aB({theme:o,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:cB({theme:o,styles:t,props:n,stylesCtx:r||void 0})}}const hz=(0,f.forwardRef)((({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>(0,T.jsx)("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:(0,T.jsx)("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})));hz.displayName="@mantine/core/CloseIcon";var mz={root:"m_86a44da5","root--subtle":"m_220c80f2"};const vz={variant:"subtle"},gz=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":SI(t,"cb-size"),"--cb-radius":void 0===n?void 0:EI(n),"--cb-icon-size":xI(r)}}),yz=VB(((e,t)=>{const n=XI("CloseButton",vz,e),{iconSize:r,children:o,vars:i,radius:a,className:s,classNames:l,style:c,styles:u,unstyled:d,"data-disabled":f,disabled:p,variant:h,icon:m,mod:v,__staticSelector:g,...y}=n,b=hB({name:g||"CloseButton",props:n,className:s,style:c,classes:mz,classNames:l,styles:u,unstyled:d,vars:i,varsResolver:gz});return(0,T.jsxs)(dF,{ref:t,...y,unstyled:d,variant:h,disabled:p,mod:[{disabled:p||f},v],...b("root",{variant:h,active:!p&&!f}),children:[m||(0,T.jsx)(hz,{}),o]})}));yz.classes=mz,yz.displayName="@mantine/core/CloseButton";const bz={},kz=IB(((e,t)=>{const n=XI("InputClearButton",bz,e),{size:r,variant:o,vars:i,classNames:a,styles:s,...l}=n,c=fz(),{resolvedClassNames:u,resolvedStyles:d}=pz({classNames:a,styles:s,props:n});return(0,T.jsx)(yz,{variant:o||"transparent",ref:t,size:r||c?.size||"sm",classNames:u,styles:d,__staticSelector:"InputClearButton",...l})}));kz.displayName="@mantine/core/InputClearButton";const[wz,xz]=bH({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Cz={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Sz={},_z=(e,{size:t})=>({description:{"--input-description-size":void 0===t?void 0:`calc(${DI(t)} - ${xI(2)})`}}),Ez=IB(((e,t)=>{const n=XI("InputDescription",Sz,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:l,size:c,__staticSelector:u,__inheritStyles:d=!0,variant:f,...p}=XI("InputDescription",Sz,n),h=xz(),m=hB({name:["InputWrapper",u],props:n,classes:Cz,className:o,style:i,classNames:r,styles:a,unstyled:s,rootSelector:"description",vars:l,varsResolver:_z}),v=d&&h?.getStyles||m;return(0,T.jsx)(LB,{component:"p",ref:t,variant:f,size:c,...v("description",h?.getStyles?{className:o,style:i}:void 0),...p})}));Ez.classes=Cz,Ez.displayName="@mantine/core/InputDescription";const Dz={},Mz=(e,{size:t})=>({error:{"--input-error-size":void 0===t?void 0:`calc(${DI(t)} - ${xI(2)})`}}),Az=IB(((e,t)=>{const n=XI("InputError",Dz,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:l,size:c,__staticSelector:u,__inheritStyles:d=!0,variant:f,...p}=n,h=hB({name:["InputWrapper",u],props:n,classes:Cz,className:o,style:i,classNames:r,styles:a,unstyled:s,rootSelector:"error",vars:l,varsResolver:Mz}),m=xz(),v=d&&m?.getStyles||h;return(0,T.jsx)(LB,{component:"p",ref:t,variant:f,size:c,...v("error",m?.getStyles?{className:o,style:i}:void 0),...p})}));Az.classes=Cz,Az.displayName="@mantine/core/InputError";const Oz={labelElement:"label"},Tz=(e,{size:t})=>({label:{"--input-label-size":DI(t),"--input-asterisk-color":void 0}}),jz=IB(((e,t)=>{const n=XI("InputLabel",Oz,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:l,labelElement:c,size:u,required:d,htmlFor:f,onMouseDown:p,children:h,__staticSelector:m,variant:v,mod:g,...y}=XI("InputLabel",Oz,n),b=hB({name:["InputWrapper",m],props:n,classes:Cz,className:o,style:i,classNames:r,styles:a,unstyled:s,rootSelector:"label",vars:l,varsResolver:Tz}),k=xz(),w=k?.getStyles||b;return(0,T.jsxs)(LB,{...w("label",k?.getStyles?{className:o,style:i}:void 0),component:c,variant:v,size:u,ref:t,htmlFor:"label"===c?f:void 0,mod:[{required:d},g],onMouseDown:e=>{p?.(e),!e.defaultPrevented&&e.detail>1&&e.preventDefault()},...y,children:[h,d&&(0,T.jsx)("span",{...w("required"),"aria-hidden":!0,children:" *"})]})}));jz.classes=Cz,jz.displayName="@mantine/core/InputLabel";const Nz={},Pz=IB(((e,t)=>{const n=XI("InputPlaceholder",Nz,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:l,__staticSelector:c,variant:u,error:d,mod:f,...p}=XI("InputPlaceholder",Nz,n),h=hB({name:["InputPlaceholder",c],props:n,classes:Cz,className:o,style:i,classNames:r,styles:a,unstyled:s,rootSelector:"placeholder"});return(0,T.jsx)(LB,{...h("placeholder"),mod:[{error:!!d},f],component:"span",variant:u,ref:t,...p})}));function Lz(e,{hasDescription:t,hasError:n}){const r=e.findIndex((e=>"input"===e)),o=e.slice(0,r),i=e.slice(r+1),a=t&&o.includes("description")||n&&o.includes("error");return{offsetBottom:t&&i.includes("description")||n&&i.includes("error"),offsetTop:a}}Pz.classes=Cz,Pz.displayName="@mantine/core/InputPlaceholder";const Rz={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},Iz=(e,{size:t})=>({label:{"--input-label-size":DI(t),"--input-asterisk-color":void 0},error:{"--input-error-size":void 0===t?void 0:`calc(${DI(t)} - ${xI(2)})`},description:{"--input-description-size":void 0===t?void 0:`calc(${DI(t)} - ${xI(2)})`}}),Bz=IB(((e,t)=>{const n=XI("InputWrapper",Rz,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:l,size:c,variant:u,__staticSelector:d,inputContainer:p,inputWrapperOrder:h,label:m,error:v,description:g,labelProps:y,descriptionProps:b,errorProps:k,labelElement:w,children:x,withAsterisk:C,id:S,required:_,__stylesApiProps:E,mod:D,...M}=n,A=hB({name:["InputWrapper",d],props:E||n,classes:Cz,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:l,varsResolver:Iz}),O={size:c,variant:u,__staticSelector:d},j=uH(S),N="boolean"==typeof C?C:_,P=k?.id||`${j}-error`,L=b?.id||`${j}-description`,R=j,I=!!v&&"boolean"!=typeof v,B=!!g,F=`${I?P:""} ${B?L:""}`,H=F.trim().length>0?F.trim():void 0,z=y?.id||`${j}-label`,V=m&&(0,T.jsx)(jz,{labelElement:w,id:z,htmlFor:R,required:N,...O,...y,children:m},"label"),$=B&&(0,T.jsx)(Ez,{...b,...O,size:b?.size||O.size,id:b?.id||L,children:g},"description"),U=(0,T.jsx)(f.Fragment,{children:p(x)},"input"),G=I&&(0,f.createElement)(Az,{...k,...O,size:k?.size||O.size,key:"error",id:k?.id||P},v),W=h.map((e=>{switch(e){case"label":return V;case"input":return U;case"description":return $;case"error":return G;default:return null}}));return(0,T.jsx)(wz,{value:{getStyles:A,describedBy:H,inputId:R,labelId:z,...Lz(h,{hasDescription:B,hasError:I})},children:(0,T.jsx)(LB,{ref:t,variant:u,size:c,mod:[{error:!!v},D],...A("root"),...M,children:W})})}));Bz.classes=Cz,Bz.displayName="@mantine/core/InputWrapper";const Fz={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},Hz=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":SI(t.size,"input-height"),"--input-fz":DI(t.size),"--input-radius":void 0===t.radius?void 0:EI(t.radius),"--input-left-section-width":void 0!==t.leftSectionWidth?xI(t.leftSectionWidth):void 0,"--input-right-section-width":void 0!==t.rightSectionWidth?xI(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?SI(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),zz=VB(((e,t)=>{const n=XI("Input",Fz,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,required:l,__staticSelector:c,__stylesApiProps:u,size:d,wrapperProps:f,error:p,disabled:h,leftSection:m,leftSectionProps:v,leftSectionWidth:g,rightSection:y,rightSectionProps:b,rightSectionWidth:k,rightSectionPointerEvents:w,leftSectionPointerEvents:x,variant:C,vars:S,pointer:_,multiline:E,radius:D,id:M,withAria:A,withErrorStyles:O,mod:j,inputSize:N,__clearSection:P,__clearable:L,__defaultRightSection:R,...I}=n,{styleProps:B,rest:F}=CB(I),H=xz(),z=hB({name:["Input",c],props:u||n,classes:Cz,className:o,style:i,classNames:r,styles:a,unstyled:s,stylesCtx:{offsetBottom:H?.offsetBottom,offsetTop:H?.offsetTop},rootSelector:"wrapper",vars:S,varsResolver:Hz}),V=A?{required:l,disabled:h,"aria-invalid":!!p,"aria-describedby":H?.describedBy,id:H?.inputId||M}:{},$=y||L&&P||R;return(0,T.jsx)(dz,{value:{size:d||"sm"},children:(0,T.jsxs)(LB,{...z("wrapper"),...B,...f,mod:[{error:!!p&&O,pointer:_,disabled:h,multiline:E,"data-with-right-section":!!$,"data-with-left-section":!!m},j],variant:C,size:d,children:[m&&(0,T.jsx)("div",{...v,"data-position":"left",...z("section",{className:v?.className,style:v?.style}),children:m}),(0,T.jsx)(LB,{component:"input",...F,...V,ref:t,required:l,mod:{disabled:h,error:!!p&&O},variant:C,__size:N,...z("input")}),$&&(0,T.jsx)("div",{...b,"data-position":"right",...z("section",{className:b?.className,style:b?.style}),children:$})]})})}));zz.classes=Cz,zz.Wrapper=Bz,zz.Label=jz,zz.Error=Az,zz.Description=Ez,zz.Placeholder=Pz,zz.ClearButton=kz,zz.displayName="@mantine/core/Input";const Vz={__staticSelector:"InputBase",withAria:!0},$z=VB(((e,t)=>{const{inputProps:n,wrapperProps:r,...o}=function(e,t,n){const r=XI("InputBase",t,n),{label:o,description:i,error:a,required:s,classNames:l,styles:c,className:u,unstyled:d,__staticSelector:f,__stylesApiProps:p,errorProps:h,labelProps:m,descriptionProps:v,wrapperProps:g,id:y,size:b,style:k,inputContainer:w,inputWrapperOrder:x,withAsterisk:C,variant:S,vars:_,mod:E,...D}=r,{styleProps:M,rest:A}=CB(D);return{...A,classNames:l,styles:c,unstyled:d,wrapperProps:{...{label:o,description:i,error:a,required:s,classNames:l,className:u,__staticSelector:f,__stylesApiProps:p||r,errorProps:h,labelProps:m,descriptionProps:v,unstyled:d,styles:c,size:b,style:k,inputContainer:w,inputWrapperOrder:x,withAsterisk:C,variant:S,id:y,mod:E,...g},...M},inputProps:{required:s,classNames:l,styles:c,unstyled:d,size:b,__staticSelector:f,__stylesApiProps:p||r,error:a,variant:S,id:y}}}(0,Vz,e);return(0,T.jsx)(zz.Wrapper,{...r,children:(0,T.jsx)(zz,{...n,...o,ref:t})})}));$z.classes={...zz.classes,...zz.Wrapper.classes},$z.displayName="@mantine/core/InputBase";const Uz={},Gz=IB(((e,t)=>{const n=XI("TextInput",Uz,e);return(0,T.jsx)($z,{component:"input",ref:t,...n,__staticSelector:"TextInput"})}));function Wz(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}Gz.classes=$z.classes,Gz.displayName="@mantine/core/TextInput";const qz=["mousedown","touchstart"];var Kz={root:"m_9814e45f"};const Zz={zIndex:BF("modal")},Jz=(e,{gradient:t,color:n,backgroundOpacity:r,blur:o,radius:i,zIndex:a})=>({root:{"--overlay-bg":t||(void 0!==n||void 0!==r)&&FI(n||"#000",r??.6)||void 0,"--overlay-filter":o?`blur(${xI(o)})`:void 0,"--overlay-radius":void 0===i?void 0:EI(i),"--overlay-z-index":a?.toString()}}),Xz=VB(((e,t)=>{const n=XI("Overlay",Zz,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:l,fixed:c,center:u,children:d,radius:f,zIndex:p,gradient:h,blur:m,color:v,backgroundOpacity:g,mod:y,...b}=n,k=hB({name:"Overlay",props:n,classes:Kz,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:l,varsResolver:Jz});return(0,T.jsx)(LB,{ref:t,...k("root"),mod:[{center:u,fixed:c},y],...b,children:d})}));Xz.classes=Kz,Xz.displayName="@mantine/core/Overlay";const[Yz,Qz]=RH("Popover component was not found in the tree"),eV=()=>{};function tV(e,t={active:!0}){return"function"==typeof e&&t.active?n=>{"Escape"===n.key&&(e(n),t.onTrigger?.())}:t.onKeyDown||eV}const nV=/input|select|textarea|button|object/,rV="a, input, select, textarea, button, object, [tabindex]";function oV(e){return"none"===e.style.display}function iV(e){let t=e.getAttribute("tabindex");return null===t&&(t=void 0),parseInt(t,10)}function aV(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(iV(e));return(nV.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&function(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||"hidden"===e.getAttribute("type"))return!1;let t=e;for(;t&&t!==document.body&&11!==t.nodeType;){if(oV(t))return!1;t=t.parentNode}return!0}(e)}function sV(e){const t=iV(e);return(Number.isNaN(t)||t>=0)&&aV(e)}function lV(e=!0){const t=(0,f.useRef)(null),n=e=>{let t=e.querySelector("[data-autofocus]");if(!t){const n=Array.from(e.querySelectorAll(rV));t=n.find(sV)||n.find(aV)||null,!t&&aV(e)&&(t=e)}t&&t.focus({preventScroll:!0})},r=(0,f.useCallback)((r=>{e&&null!==r&&t.current!==r&&(r?(setTimeout((()=>{r.getRootNode()&&n(r)})),t.current=r):t.current=null)}),[e]);return(0,f.useEffect)((()=>{if(!e)return;t.current&&setTimeout((()=>n(t.current)));const r=e=>{"Tab"===e.key&&t.current&&function(e,t){const n=(r=e,Array.from(r.querySelectorAll(rV)).filter(sV));var r;if(!n.length)return void t.preventDefault();const o=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let a=o===i.activeElement||e===i.activeElement;const s=i.activeElement;if("INPUT"===s.tagName&&"radio"===s.getAttribute("type")){const e=n.filter((e=>"radio"===e.getAttribute("type")&&e.getAttribute("name")===s.getAttribute("name")));a=e.includes(o)}if(!a)return;t.preventDefault();const l=n[t.shiftKey?n.length-1:0];l&&l.focus()}(t.current,e)};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)}),[e]),r}var cV={root:"m_515a97f8"};const uV={},dV=IB(((e,t)=>{const n=XI("VisuallyHidden",uV,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:l,...c}=n,u=hB({name:"VisuallyHidden",classes:cV,props:n,className:o,style:i,classNames:r,styles:a,unstyled:s});return(0,T.jsx)(LB,{component:"span",ref:t,...u("root"),...c})}));function fV({children:e,active:t=!0,refProp:n="ref",innerRef:r}){const o=LF(lV(t),r);return RF(e)?(0,f.cloneElement)(e,{[n]:o}):e}function pV(e){return(0,T.jsx)(dV,{tabIndex:-1,"data-autofocus":!0,...e})}dV.classes=cV,dV.displayName="@mantine/core/VisuallyHidden",fV.displayName="@mantine/core/FocusTrap",pV.displayName="@mantine/core/FocusTrapInitialFocus",fV.InitialFocus=pV;var hV={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const mV={},vV=IB(((e,t)=>{const n=XI("PopoverDropdown",mV,e),{className:r,style:o,vars:i,children:a,onKeyDownCapture:s,variant:l,classNames:c,styles:u,...d}=n,p=Qz(),h=function({opened:e,shouldReturnFocus:t=!0}){const n=(0,f.useRef)(null),r=()=>{n.current&&"focus"in n.current&&"function"==typeof n.current.focus&&n.current?.focus({preventScroll:!0})};return aF((()=>{let o=-1;const i=e=>{"Tab"===e.key&&window.clearTimeout(o)};return document.addEventListener("keydown",i),e?n.current=document.activeElement:t&&(o=window.setTimeout(r,10)),()=>{window.clearTimeout(o),document.removeEventListener("keydown",i)}}),[e,t]),r}({opened:p.opened,shouldReturnFocus:p.returnFocus}),m=p.withRoles?{"aria-labelledby":p.getTargetId(),id:p.getDropdownId(),role:"dialog",tabIndex:-1}:{},v=LF(t,p.floating);return p.disabled?null:(0,T.jsx)(YF,{...p.portalProps,withinPortal:p.withinPortal,children:(0,T.jsx)(lF,{mounted:p.opened,...p.transitionProps,transition:p.transitionProps?.transition||"fade",duration:p.transitionProps?.duration??150,keepMounted:p.keepMounted,exitDuration:"number"==typeof p.transitionProps?.exitDuration?p.transitionProps.exitDuration:p.transitionProps?.duration,children:e=>(0,T.jsx)(fV,{active:p.trapFocus&&p.opened,innerRef:v,children:(0,T.jsxs)(LB,{...m,...d,variant:l,onKeyDownCapture:tV((()=>{p.onClose?.(),p.onDismiss?.()}),{active:p.closeOnEscape,onTrigger:h,onKeyDown:s}),"data-position":p.placement,"data-fixed":"fixed"===p.floatingStrategy||void 0,...p.getStyles("dropdown",{className:r,props:n,classNames:c,styles:u,style:[{...e,zIndex:p.zIndex,top:p.y??0,left:p.x??0,width:"target"===p.width?void 0:xI(p.width)},p.resolvedStyles.dropdown,u?.dropdown,o]}),children:[a,(0,T.jsx)(qF,{ref:p.arrowRef,arrowX:p.arrowX,arrowY:p.arrowY,visible:p.withArrow,position:p.placement,arrowSize:p.arrowSize,arrowRadius:p.arrowRadius,arrowOffset:p.arrowOffset,arrowPosition:p.arrowPosition,...p.getStyles("arrow",{props:n,classNames:c,styles:u})})]})})})})}));vV.classes=hV,vV.displayName="@mantine/core/PopoverDropdown";const gV={refProp:"ref",popupType:"dialog"},yV=IB(((e,t)=>{const{children:n,refProp:r,popupType:o,...i}=XI("PopoverTarget",gV,e);if(!RF(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const a=i,s=Qz(),l=LF(s.reference,FF(n),t),c=s.withRoles?{"aria-haspopup":o,"aria-expanded":s.opened,"aria-controls":s.getDropdownId(),id:s.getTargetId()}:{};return(0,f.cloneElement)(n,{...a,...c,...s.targetProps,className:rB(s.targetProps.className,a.className,n.props.className),[r]:l,...s.controlled?null:{onClick:s.onToggle}})}));function bV(e,t){const n=function(e){if(void 0===e)return{shift:!0,flip:!0};const t={...e};return void 0===e.shift&&(t.shift=!0),void 0===e.flip&&(t.flip=!0),t}(e.middlewares),r=[sj(e.offset)];return n.shift&&r.push(lj("boolean"==typeof n.shift?{limiter:cj(),padding:5}:{limiter:cj(),padding:5,...n.shift})),n.flip&&r.push("boolean"==typeof n.flip?uj():uj(n.flip)),n.inline&&r.push("boolean"==typeof n.inline?fj():fj(n.inline)),r.push(pj({element:e.arrowRef,padding:e.arrowOffset})),(n.size||"target"===e.width)&&r.push(dj({..."boolean"==typeof n.size?{}:n.size,apply({rects:r,availableWidth:o,availableHeight:i,...a}){const s=t(),l=s.refs.floating.current?.style??{};n.size&&("object"==typeof n.size&&n.size.apply?n.size.apply({rects:r,availableWidth:o,availableHeight:i,...a}):Object.assign(l,{maxWidth:`${o}px`,maxHeight:`${i}px`})),"target"===e.width&&Object.assign(l,{width:`${r.reference.width}px`})}})),r}yV.displayName="@mantine/core/PopoverTarget";const kV={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:BF("popover"),__staticSelector:"Popover",width:"max-content"},wV=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":void 0===t?void 0:EI(t),"--popover-shadow":AI(n)}});function xV(e){const t=XI("Popover",kV,e),{children:n,position:r,offset:o,onPositionChange:i,positionDependencies:a,opened:s,transitionProps:l,onExitTransitionEnd:c,onEnterTransitionEnd:u,width:d,middlewares:p,withArrow:h,arrowSize:m,arrowOffset:v,arrowRadius:g,arrowPosition:y,unstyled:b,classNames:k,styles:w,closeOnClickOutside:x,withinPortal:C,portalProps:S,closeOnEscape:_,clickOutsideEvents:E,trapFocus:D,onClose:M,onDismiss:A,onOpen:O,onChange:j,zIndex:N,radius:P,shadow:L,id:R,defaultOpened:I,__staticSelector:B,withRoles:F,disabled:H,returnFocus:z,variant:V,keepMounted:$,vars:U,floatingStrategy:G,withOverlay:W,overlayProps:q,...K}=t,Z=hB({name:B,props:t,classes:hV,classNames:k,styles:w,unstyled:b,rootSelector:"dropdown",vars:U,varsResolver:wV}),{resolvedStyles:J}=pz({classNames:k,styles:w,props:t}),X=(0,f.useRef)(null),[Y,Q]=(0,f.useState)(null),[ee,te]=(0,f.useState)(null),{dir:ne}=zF(),re=uH(R),oe=function(e){const[t,n]=gH({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=(0,f.useRef)(t),o=Qj({strategy:e.strategy,placement:e.position,middleware:bV(e,(()=>o))});return dH({opened:t,position:e.position,positionDependencies:e.positionDependencies||[],floating:o}),aF((()=>{e.onPositionChange?.(o.placement)}),[o.placement]),aF((()=>{t!==r.current&&(t?e.onOpen?.():e.onClose?.()),r.current=t}),[t,e.onClose,e.onOpen]),{floating:o,controlled:"boolean"==typeof e.opened,opened:t,onClose:()=>{t&&n(!1)},onToggle:()=>n(!t)}}({middlewares:p,width:d,position:VF(ne,r),offset:"number"==typeof o?o+(h?m/2:0):o,arrowRef:X,arrowOffset:v,onPositionChange:i,positionDependencies:a,opened:s,defaultOpened:I,onChange:j,onOpen:O,onClose:M,onDismiss:A,strategy:G});!function(e,t,n){const r=(0,f.useRef)(null);(0,f.useEffect)((()=>{const o=t=>{const{target:o}=t??{};if(Array.isArray(n)){const r=o?.hasAttribute("data-ignore-outside-clicks")||!document.body.contains(o)&&"HTML"!==o.tagName;n.every((e=>!!e&&!t.composedPath().includes(e)))&&!r&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||qz).forEach((e=>document.addEventListener(e,o))),()=>{(t||qz).forEach((e=>document.removeEventListener(e,o)))}}),[r,e,n])}((()=>{x&&(oe.onClose(),A?.())}),E,[Y,ee]);const ie=(0,f.useCallback)((e=>{Q(e),oe.floating.refs.setReference(e)}),[oe.floating.refs.setReference]),ae=(0,f.useCallback)((e=>{te(e),oe.floating.refs.setFloating(e)}),[oe.floating.refs.setFloating]),se=(0,f.useCallback)((()=>{l?.onExited?.(),c?.()}),[l?.onExited,c]),le=(0,f.useCallback)((()=>{l?.onEntered?.(),u?.()}),[l?.onEntered,u]);return(0,T.jsxs)(Yz,{value:{returnFocus:z,disabled:H,controlled:oe.controlled,reference:ie,floating:ae,x:oe.floating.x,y:oe.floating.y,arrowX:oe.floating?.middlewareData?.arrow?.x,arrowY:oe.floating?.middlewareData?.arrow?.y,opened:oe.opened,arrowRef:X,transitionProps:{...l,onExited:se,onEntered:le},width:d,withArrow:h,arrowSize:m,arrowOffset:v,arrowRadius:g,arrowPosition:y,placement:oe.floating.placement,trapFocus:D,withinPortal:C,portalProps:S,zIndex:N,radius:P,shadow:L,closeOnEscape:_,onDismiss:A,onClose:oe.onClose,onToggle:oe.onToggle,getTargetId:()=>`${re}-target`,getDropdownId:()=>`${re}-dropdown`,withRoles:F,targetProps:K,__staticSelector:B,classNames:k,styles:w,unstyled:b,variant:V,keepMounted:$,getStyles:Z,resolvedStyles:J,floatingStrategy:G},children:[n,W&&(0,T.jsx)(lF,{transition:"fade",mounted:oe.opened,duration:l?.duration||250,exitDuration:l?.exitDuration||250,children:e=>(0,T.jsx)(YF,{withinPortal:C,children:(0,T.jsx)(Xz,{...q,...Z("overlay",{className:q?.className,style:[e,q?.style]})})})})]})}xV.Target=yV,xV.Dropdown=vV,xV.displayName="@mantine/core/Popover",xV.extend=e=>e;const[CV,SV]=RH("Menu component was not found in the tree");var _V={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const EV={},DV=IB(((e,t)=>{const{classNames:n,className:r,style:o,styles:i,vars:a,...s}=XI("MenuDivider",EV,e),l=SV();return(0,T.jsx)(LB,{ref:t,...l.getStyles("divider",{className:r,style:o,styles:i,classNames:n}),...s})}));function MV(e,t){return n=>{e?.(n),t?.(n)}}DV.classes=_V,DV.displayName="@mantine/core/MenuDivider";const AV={},OV=IB(((e,t)=>{const{classNames:n,className:r,style:o,styles:i,vars:a,onMouseEnter:s,onMouseLeave:l,onKeyDown:c,children:u,...d}=XI("MenuDropdown",AV,e),p=(0,f.useRef)(null),h=SV(),m=MV(c,(e=>{"ArrowUp"!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),p.current?.querySelectorAll("[data-menu-item]:not(:disabled)")[0]?.focus())})),v=MV(s,(()=>("hover"===h.trigger||"click-hover"===h.trigger)&&h.openDropdown())),g=MV(l,(()=>("hover"===h.trigger||"click-hover"===h.trigger)&&h.closeDropdown()));return(0,T.jsxs)(xV.Dropdown,{...d,onMouseEnter:v,onMouseLeave:g,role:"menu","aria-orientation":"vertical",ref:LF(t,p),...h.getStyles("dropdown",{className:r,style:o,styles:i,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:m,children:[h.withInitialFocusPlaceholder&&(0,T.jsx)("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),u]})}));function TV({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:o=!1,dir:i="rtl",orientation:a}){return s=>{n?.(s);const l=Array.from(Wz(s.currentTarget,e)?.querySelectorAll(t)||[]).filter((t=>function(e,t,n){return Wz(e,n)===Wz(t,n)}(s.currentTarget,t,e))),c=l.findIndex((e=>s.currentTarget===e)),u=function(e,t,n){for(let n=e+1;n<t.length;n+=1)if(!t[n].disabled)return n;if(n)for(let e=0;e<t.length;e+=1)if(!t[e].disabled)return e;return e}(c,l,r),d=function(e,t,n){for(let n=e-1;n>=0;n-=1)if(!t[n].disabled)return n;if(n)for(let e=t.length-1;e>-1;e-=1)if(!t[e].disabled)return e;return e}(c,l,r),f="rtl"===i?d:u,p="rtl"===i?u:d;switch(s.key){case"ArrowRight":"horizontal"===a&&(s.stopPropagation(),s.preventDefault(),l[f].focus(),o&&l[f].click());break;case"ArrowLeft":"horizontal"===a&&(s.stopPropagation(),s.preventDefault(),l[p].focus(),o&&l[p].click());break;case"ArrowUp":"vertical"===a&&(s.stopPropagation(),s.preventDefault(),l[d].focus(),o&&l[d].click());break;case"ArrowDown":"vertical"===a&&(s.stopPropagation(),s.preventDefault(),l[u].focus(),o&&l[u].click());break;case"Home":s.stopPropagation(),s.preventDefault(),!l[0].disabled&&l[0].focus();break;case"End":{s.stopPropagation(),s.preventDefault();const e=l.length-1;!l[e].disabled&&l[e].focus();break}}}}OV.classes=_V,OV.displayName="@mantine/core/MenuDropdown";const jV={},NV=VB(((e,t)=>{const{classNames:n,className:r,style:o,styles:i,vars:a,color:s,closeMenuOnClick:l,leftSection:c,rightSection:u,children:d,disabled:p,"data-disabled":h,...m}=XI("MenuItem",jV,e),v=SV(),g=ZI(),{dir:y}=zF(),b=(0,f.useRef)(null),k=v.getItemIndex(b.current),w=m,x=MV(w.onMouseLeave,(()=>v.setHovered(-1))),C=MV(w.onMouseEnter,(()=>v.setHovered(v.getItemIndex(b.current)))),S=MV(w.onClick,(()=>{h||("boolean"==typeof l?l&&v.closeDropdownImmediately():v.closeOnItemClick&&v.closeDropdownImmediately())})),_=MV(w.onFocus,(()=>v.setHovered(v.getItemIndex(b.current)))),E=s?g.variantColorResolver({color:s,theme:g,variant:"light"}):void 0,D=s?RI({color:s,theme:g}):null;return(0,T.jsxs)(dF,{...m,unstyled:v.unstyled,tabIndex:v.menuItemTabIndex,onFocus:_,...v.getStyles("item",{className:r,style:o,styles:i,classNames:n}),ref:LF(b,t),role:"menuitem",disabled:p,"data-menu-item":!0,"data-disabled":p||h||void 0,"data-hovered":v.hovered===k||void 0,"data-mantine-stop-propagation":!0,onMouseEnter:C,onMouseLeave:x,onClick:S,onKeyDown:TV({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:v.loop,dir:y,orientation:"vertical",onKeyDown:w.onKeyDown}),__vars:{"--menu-item-color":D?.isThemeColor&&void 0===D?.shade?`var(--mantine-color-${D.color}-6)`:E?.color,"--menu-item-hover":E?.hover},children:[c&&(0,T.jsx)("div",{...v.getStyles("itemSection",{styles:i,classNames:n}),"data-position":"left",children:c}),d&&(0,T.jsx)("div",{...v.getStyles("itemLabel",{styles:i,classNames:n}),children:d}),u&&(0,T.jsx)("div",{...v.getStyles("itemSection",{styles:i,classNames:n}),"data-position":"right",children:u})]})}));NV.classes=_V,NV.displayName="@mantine/core/MenuItem";const PV={},LV=IB(((e,t)=>{const{classNames:n,className:r,style:o,styles:i,vars:a,...s}=XI("MenuLabel",PV,e),l=SV();return(0,T.jsx)(LB,{ref:t,...l.getStyles("label",{className:r,style:o,styles:i,classNames:n}),...s})}));LV.classes=_V,LV.displayName="@mantine/core/MenuLabel";const RV={refProp:"ref"},IV=(0,f.forwardRef)(((e,t)=>{const{children:n,refProp:r,...o}=XI("MenuTarget",RV,e);if(!RF(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const i=SV(),a=n.props,s=MV(a.onClick,(()=>{"click"===i.trigger?i.toggleDropdown():"click-hover"===i.trigger&&(i.setOpenedViaClick(!0),i.opened||i.openDropdown())})),l=MV(a.onMouseEnter,(()=>("hover"===i.trigger||"click-hover"===i.trigger)&&i.openDropdown())),c=MV(a.onMouseLeave,(()=>{"hover"===i.trigger?i.closeDropdown():"click-hover"!==i.trigger||i.openedViaClick||i.closeDropdown()}));return(0,T.jsx)(xV.Target,{refProp:r,popupType:"menu",ref:t,...o,children:(0,f.cloneElement)(n,{onClick:s,onMouseEnter:l,onMouseLeave:c,"data-expanded":!!i.opened||void 0})})}));IV.displayName="@mantine/core/MenuTarget";const BV={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function FV(e){const t=XI("Menu",BV,e),{children:n,onOpen:r,onClose:o,opened:i,defaultOpened:a,trapFocus:s,onChange:l,closeOnItemClick:c,loop:u,closeOnEscape:d,trigger:p,openDelay:h,closeDelay:m,classNames:v,styles:g,unstyled:y,variant:b,vars:k,menuItemTabIndex:w,keepMounted:x,withInitialFocusPlaceholder:C,...S}=t,_=hB({name:"Menu",classes:_V,props:t,classNames:v,styles:g,unstyled:y}),[E,{setHovered:D,resetHovered:M}]=function(){const[e,t]=(0,f.useState)(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}(),[A,O]=gH({value:i,defaultValue:a,finalValue:!1,onChange:l}),[j,N]=(0,f.useState)(!1),P=()=>{O(!1),N(!1),A&&o?.()},L=()=>{O(!0),!A&&r?.()},R=()=>{A?P():L()},{openDropdown:I,closeDropdown:B}=function({open:e,close:t,openDelay:n,closeDelay:r}){const o=(0,f.useRef)(-1),i=(0,f.useRef)(-1),a=()=>{window.clearTimeout(o.current),window.clearTimeout(i.current)};return(0,f.useEffect)((()=>a),[]),{openDropdown:()=>{a(),0===n||void 0===n?e():o.current=window.setTimeout(e,n)},closeDropdown:()=>{a(),0===r||void 0===r?t():i.current=window.setTimeout(t,r)}}}({open:L,close:P,closeDelay:m,openDelay:h}),{resolvedClassNames:F,resolvedStyles:H}=pz({classNames:v,styles:g,props:t});return aF((()=>{M()}),[A]),(0,T.jsx)(CV,{value:{getStyles:_,opened:A,toggleDropdown:R,getItemIndex:e=>function(e,t,n){return n?Array.from(Wz(n,"[data-menu-dropdown]")?.querySelectorAll("[data-menu-item]")||[]).findIndex((e=>e===n)):null}(0,0,e),hovered:E,setHovered:D,openedViaClick:j,setOpenedViaClick:N,closeOnItemClick:c,closeDropdown:"click"===p?P:B,openDropdown:"click"===p?L:I,closeDropdownImmediately:P,loop:u,trigger:p,unstyled:y,menuItemTabIndex:w,withInitialFocusPlaceholder:C},children:(0,T.jsx)(xV,{...S,opened:A,onChange:R,defaultOpened:a,trapFocus:!x&&s,closeOnEscape:d,__staticSelector:"Menu",classNames:F,styles:H,unstyled:y,variant:b,keepMounted:x,children:n})})}function HV(e,t){return n=>{if("string"!=typeof n||0===n.trim().length)throw new Error(t);return`${e}-${n}`}}function zV({color:e,theme:t,autoContrast:n}){return("boolean"==typeof n?n:t.autoContrast)&&RI({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function VV(e,t){return zV({color:e.colors[e.primaryColor][NI(e,t)],theme:e,autoContrast:null})}function $V(e,t){return"boolean"==typeof e?e:t.autoContrast}FV.extend=e=>e,FV.withProps=function(e){const t=e;return e=>{const n=(0,f.forwardRef)(((n,r)=>(0,T.jsx)(t,{...e,...n,ref:r})));return n.extend=t.extend,n.displayName=`WithProps(${t.displayName})`,n}}(FV),FV.classes=_V,FV.displayName="@mantine/core/Menu",FV.Item=NV,FV.Label=LV,FV.Dropdown=OV,FV.Target=IV,FV.Divider=DV;const[UV,GV]=RH("Tabs component was not found in the tree");var WV={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const qV={},KV=IB(((e,t)=>{const n=XI("TabsList",qV,e),{children:r,className:o,grow:i,justify:a,classNames:s,styles:l,style:c,mod:u,...d}=n,f=GV();return(0,T.jsx)(LB,{...d,...f.getStyles("list",{className:o,style:c,classNames:s,styles:l,props:n,variant:f.variant}),ref:t,role:"tablist",variant:f.variant,mod:[{grow:i,orientation:f.orientation,placement:"vertical"===f.orientation&&f.placement,inverted:f.inverted},u],"aria-orientation":f.orientation,__vars:{"--tabs-justify":a},children:r})}));KV.classes=WV,KV.displayName="@mantine/core/TabsList";const ZV={},JV=IB(((e,t)=>{const n=XI("TabsPanel",ZV,e),{children:r,className:o,value:i,classNames:a,styles:s,style:l,mod:c,keepMounted:u,...d}=n,f=GV(),p=f.value===i,h=f.keepMounted||u||p?r:null;return(0,T.jsx)(LB,{...d,...f.getStyles("panel",{className:o,classNames:a,styles:s,style:[l,p?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},c],role:"tabpanel",id:f.getPanelId(i),"aria-labelledby":f.getTabId(i),children:h})}));JV.classes=WV,JV.displayName="@mantine/core/TabsPanel";const XV={},YV=IB(((e,t)=>{const n=XI("TabsTab",XV,e),{className:r,children:o,rightSection:i,leftSection:a,value:s,onClick:l,onKeyDown:c,disabled:u,color:d,style:f,classNames:p,styles:h,vars:m,mod:v,tabIndex:g,...y}=n,b=ZI(),{dir:k}=zF(),w=GV(),x=s===w.value,C={classNames:p,styles:h,props:n};return(0,T.jsxs)(dF,{...y,...w.getStyles("tab",{className:r,style:f,variant:w.variant,...C}),disabled:u,unstyled:w.unstyled,variant:w.variant,mod:[{active:x,disabled:u,orientation:w.orientation,inverted:w.inverted,placement:"vertical"===w.orientation&&w.placement},v],ref:t,role:"tab",id:w.getTabId(s),"aria-selected":x,tabIndex:void 0!==g?g:x||null===w.value?0:-1,"aria-controls":w.getPanelId(s),onClick:e=>{w.onChange(w.allowTabDeactivation&&s===w.value?null:s),l?.(e)},__vars:{"--tabs-color":d?II(d,b):void 0},onKeyDown:TV({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:k,onKeyDown:c}),children:[a&&(0,T.jsx)("span",{...w.getStyles("tabSection",C),"data-position":"left",children:a}),o&&(0,T.jsx)("span",{...w.getStyles("tabLabel",C),children:o}),i&&(0,T.jsx)("span",{...w.getStyles("tabSection",C),"data-position":"right",children:i})]})}));YV.classes=WV,YV.displayName="@mantine/core/TabsTab";const QV="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",e$={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},t$=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":EI(t),"--tabs-color":II(n,e),"--tabs-text-color":$V(r,e)?zV({color:n,theme:e,autoContrast:r}):void 0}}),n$=IB(((e,t)=>{const n=XI("Tabs",e$,e),{defaultValue:r,value:o,onChange:i,orientation:a,children:s,loop:l,id:c,activateTabWithKeyboard:u,allowTabDeactivation:d,variant:f,color:p,radius:h,inverted:m,placement:v,keepMounted:g,classNames:y,styles:b,unstyled:k,className:w,style:x,vars:C,autoContrast:S,mod:_,...E}=n,D=uH(c),[M,A]=gH({value:o,defaultValue:r,finalValue:null,onChange:i}),O=hB({name:"Tabs",props:n,classes:WV,className:w,style:x,classNames:y,styles:b,unstyled:k,vars:C,varsResolver:t$});return(0,T.jsx)(UV,{value:{placement:v,value:M,orientation:a,id:D,loop:l,activateTabWithKeyboard:u,getTabId:HV(`${D}-tab`,QV),getPanelId:HV(`${D}-panel`,QV),onChange:A,allowTabDeactivation:d,variant:f,color:p,radius:h,inverted:m,keepMounted:g,unstyled:k,getStyles:O},children:(0,T.jsx)(LB,{ref:t,id:D,variant:f,mod:[{orientation:a,inverted:"horizontal"===a&&m,placement:"vertical"===a&&v},_],...O("root"),...E,children:s})})}));n$.classes=WV,n$.displayName="@mantine/core/Tabs",n$.Tab=YV,n$.Panel=JV,n$.List=KV;var r$={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const o$={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:BF("overlay")},i$=(e,{zIndex:t})=>({root:{"--lo-z-index":t?.toString()}}),a$=IB(((e,t)=>{const n=XI("LoadingOverlay",o$,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:l,transitionProps:c,loaderProps:u,overlayProps:d,visible:f,zIndex:p,...h}=n,m=ZI(),v=hB({name:"LoadingOverlay",classes:r$,props:n,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:l,varsResolver:i$}),g={...o$.overlayProps,...d};return(0,T.jsx)(lF,{transition:"fade",...c,mounted:!!f,children:e=>(0,T.jsxs)(LB,{...v("root",{style:e}),ref:t,...h,children:[(0,T.jsx)(tF,{...v("loader"),unstyled:s,...u}),(0,T.jsx)(Xz,{...g,...v("overlay"),darkHidden:!0,unstyled:s,color:d?.color||m.white}),(0,T.jsx)(Xz,{...g,...v("overlay"),lightHidden:!0,unstyled:s,color:d?.color||m.colors.dark[5]})]})})}));a$.classes=r$,a$.displayName="@mantine/core/LoadingOverlay";const s$={multiple:!1},l$=(0,f.forwardRef)(((e,t)=>{const{onChange:n,children:r,multiple:o,accept:i,name:a,form:s,resetRef:l,disabled:c,capture:u,inputProps:d,...p}=XI("FileButton",s$,e),h=(0,f.useRef)(null);return NF(l,(()=>{h.current&&(h.current.value="")})),(0,T.jsxs)(T.Fragment,{children:[r({onClick:()=>{!c&&h.current?.click()},...p}),(0,T.jsx)("input",{style:{display:"none"},type:"file",accept:i,multiple:o,onChange:e=>{n(o?Array.from(e.currentTarget.files):e.currentTarget.files[0]||null)},ref:LF(t,h),name:a,form:s,capture:u,...d})]})}));l$.displayName="@mantine/core/FileButton";const c$={valueComponent:({value:e})=>(0,T.jsx)("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(e)?e.map((e=>e.name)).join(", "):e?.name})},u$=IB(((e,t)=>{const n=XI("FileInput",c$,e),{unstyled:r,vars:o,onChange:i,value:a,defaultValue:s,multiple:l,accept:c,name:u,form:d,valueComponent:p,clearable:h,clearButtonProps:m,readOnly:v,capture:g,fileInputProps:y,rightSection:b,size:k,placeholder:w,component:x,resetRef:C,classNames:S,styles:_,...E}=n,D=(0,f.useRef)(null),{resolvedClassNames:M,resolvedStyles:A}=pz({classNames:S,styles:_,props:n}),[O,j]=gH({value:a,defaultValue:s,onChange:i,finalValue:l?[]:null}),N=Array.isArray(O)?0!==O.length:null!==O,P=b||(h&&N&&!v?(0,T.jsx)(yz,{...m,variant:"subtle",onClick:()=>j(l?[]:null),size:k,unstyled:r}):null);(0,f.useEffect)((()=>{(Array.isArray(O)&&0===O.length||null===O)&&D.current?.()}),[O]);const L=p;return(0,T.jsx)(l$,{onChange:j,multiple:l,accept:c,name:u,form:d,resetRef:LF(D,C),disabled:v,capture:g,inputProps:y,children:e=>(0,T.jsx)($z,{component:x||"button",ref:t,rightSection:P,...e,...E,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:n,unstyled:r,size:k,classNames:S,styles:_,children:N?(0,T.jsx)(L,{value:O}):(0,T.jsx)(zz.Placeholder,{__staticSelector:"FileInput",classNames:M,styles:A,children:w})})})}));u$.classes=$z.classes,u$.displayName="@mantine/core/FileInput";const d$=u$;var f$={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const p$={},h$=(e,{radius:t,color:n,gradient:r,variant:o,size:i,autoContrast:a})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:o||"filled",autoContrast:a});return{root:{"--badge-height":SI(i,"badge-height"),"--badge-padding-x":SI(i,"badge-padding-x"),"--badge-fz":SI(i,"badge-fz"),"--badge-radius":void 0===t?void 0:EI(t),"--badge-bg":n||o?s.background:void 0,"--badge-color":n||o?s.color:void 0,"--badge-bd":n||o?s.border:void 0,"--badge-dot-color":"dot"===o?II(n,e):void 0}}},m$=VB(((e,t)=>{const n=XI("Badge",p$,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:l,radius:c,color:u,gradient:d,leftSection:f,rightSection:p,children:h,variant:m,fullWidth:v,autoContrast:g,circle:y,mod:b,...k}=n,w=hB({name:"Badge",props:n,classes:f$,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:l,varsResolver:h$});return(0,T.jsxs)(LB,{variant:m,mod:[{block:v,circle:y,"with-right-section":!!p,"with-left-section":!!f},b],...w("root",{variant:m}),ref:t,...k,children:[f&&(0,T.jsx)("span",{...w("section"),"data-position":"left",children:f}),(0,T.jsx)("span",{...w("label"),children:h}),p&&(0,T.jsx)("span",{...w("section"),"data-position":"right",children:p})]})}));m$.classes=f$,m$.displayName="@mantine/core/Badge";const v$={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var g$={root:"m_8bffd616"};const y$={},b$=VB(((e,t)=>{const n=XI("Flex",y$,e),{classNames:r,className:o,style:i,styles:a,unstyled:s,vars:l,gap:c,rowGap:u,columnGap:d,align:f,justify:p,wrap:h,direction:m,...v}=n,g=hB({name:"Flex",classes:g$,props:n,className:o,style:i,classNames:r,styles:a,unstyled:s,vars:l}),y=ZI(),b=NB(),k=jB({styleProps:{gap:c,rowGap:u,columnGap:d,align:f,justify:p,wrap:h,direction:m},theme:y,data:v$});return(0,T.jsxs)(T.Fragment,{children:[k.hasResponsiveStyles&&(0,T.jsx)(yB,{selector:`.${b}`,styles:k.styles,media:k.media}),(0,T.jsx)(LB,{ref:t,...g("root",{className:b,style:OI(k.inlineStyles)}),...v})]})}));function k$(e){return"auto"===e||"dark"===e||"light"===e}function w$({key:e="mantine-color-scheme-value"}={}){let t;return{get:t=>{if("undefined"==typeof window)return t;try{const n=window.localStorage.getItem(e);return k$(n)?n:t}catch{return t}},set:t=>{try{window.localStorage.setItem(e,t)}catch(e){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",e)}},subscribe:n=>{t=t=>{t.storageArea===window.localStorage&&t.key===e&&k$(t.newValue)&&n(t.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}function x$(){const e=ZI(),t=eB(),n=mB(e.breakpoints).reduce(((t,n)=>{const r=e.breakpoints[n].includes("px"),o=function(e){const t=function(e){return"string"==typeof e&&e.includes("var(--mantine-scale)")?e.match(/^calc\((.*?)\)$/)?.[1].split("*")[0].trim():e}(e);return"number"==typeof t?t:"string"==typeof t?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?16*Number(t.replace("rem","")):t.includes("em")?16*Number(t.replace("em","")):Number(t):NaN}(e.breakpoints[n]);return`${t}@media (max-width: ${r?o-.1+"px":CI(o-.1)}) {.mantine-visible-from-${n} {display: none !important;}}@media (min-width: ${r?`${o}px`:CI(o)}) {.mantine-hidden-from-${n} {display: none !important;}}`}),"");return(0,T.jsx)("style",{"data-mantine-styles":"classes",nonce:t?.(),dangerouslySetInnerHTML:{__html:n}})}function C$(e){return Object.entries(e).map((([e,t])=>`${e}: ${t};`)).join("")}function S$(e,t){return(Array.isArray(e)?e:[e]).reduce(((e,t)=>`${t}{${e}}`),t)}function _$({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:o=!0}){if(!e.colors[t])return{};if("light"===n){const n=NI(e,"light"),i={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${n})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${9===n?8:n+1})`,[`--mantine-color-${r}-light`]:HI(e.colors[t][n],.1),[`--mantine-color-${r}-light-hover`]:HI(e.colors[t][n],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${n})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${n})`,[`--mantine-color-${r}-outline-hover`]:HI(e.colors[t][n],.05)};return o?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...i}:i}const i=NI(e,"dark"),a={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${i})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${9===i?8:i+1})`,[`--mantine-color-${r}-light`]:HI(e.colors[t][Math.max(0,i-2)],.15),[`--mantine-color-${r}-light-hover`]:HI(e.colors[t][Math.max(0,i-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(i-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(i-4,0)})`,[`--mantine-color-${r}-outline-hover`]:HI(e.colors[t][Math.max(i-4,0)],.05)};return o?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...a}:a}function E$(e,t,n){mB(t).forEach((r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]})))}b$.classes=g$,b$.displayName="@mantine/core/Flex";const D$=e=>{const t=NI(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:xI(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":VV(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":VV(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};E$(r.variables,e.breakpoints,"breakpoint"),E$(r.variables,e.spacing,"spacing"),E$(r.variables,e.fontSizes,"font-size"),E$(r.variables,e.lineHeights,"line-height"),E$(r.variables,e.shadows,"shadow"),E$(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach(((t,n)=>{r.variables[`--mantine-primary-color-${n}`]=`var(--mantine-color-${e.primaryColor}-${n})`})),mB(e.colors).forEach((t=>{const n=e.colors[t];if(function(e){return!!e&&"object"==typeof e&&"mantine-virtual-color"in e}(n))return Object.assign(r.light,_$({theme:e,name:n.name,color:n.light,colorScheme:"light",withColorValues:!0})),void Object.assign(r.dark,_$({theme:e,name:n.name,color:n.dark,colorScheme:"dark",withColorValues:!0}));n.forEach(((e,n)=>{r.variables[`--mantine-color-${t}-${n}`]=e})),Object.assign(r.light,_$({theme:e,color:t,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,_$({theme:e,color:t,colorScheme:"dark",withColorValues:!1}))}));const o=e.headings.sizes;return mB(o).forEach((t=>{r.variables[`--mantine-${t}-font-size`]=o[t].fontSize,r.variables[`--mantine-${t}-line-height`]=o[t].lineHeight,r.variables[`--mantine-${t}-font-weight`]=o[t].fontWeight||e.headings.fontWeight})),r},M$=D$(VI);function A$({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=ZI(),r=eB(),o=function({theme:e,generator:t}){const n=D$(e),r=t?.(e);return r?UI(n,r):n}({theme:n,generator:QI().cssVariablesResolver}),i=":root"===e&&t,a=i?function(e){const t={variables:{},light:{},dark:{}};return mB(e.variables).forEach((n=>{M$.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])})),mB(e.light).forEach((n=>{M$.light[n]!==e.light[n]&&(t.light[n]=e.light[n])})),mB(e.dark).forEach((n=>{M$.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])})),t}(o):o,s=function(e,t){const n=C$(e.variables),r=n?S$(t,n):"",o=C$(e.dark),i=C$(e.light);return`${r}${o?S$(":host"===t?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,o):""}${i?S$(":host"===t?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,i):""}`}(a,e);return s?(0,T.jsx)("style",{"data-mantine-styles":!0,nonce:r?.(),dangerouslySetInnerHTML:{__html:`${s}${i?"":(l=e,`\n  ${l}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }\n  ${l}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }\n`)}`}}):null;var l}function O$(e,t){const n="undefined"!=typeof window&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)")?.matches,r="auto"!==e?e:n?"dark":"light";t()?.setAttribute("data-mantine-color-scheme",r)}function T$({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:o=!0,deduplicateCssVariables:i=!0,withCssVariables:a=!0,cssVariablesSelector:s=":root",classNamesPrefix:l="mantine",colorSchemeManager:c=w$(),defaultColorScheme:u="light",getRootElement:d=()=>document.documentElement,cssVariablesResolver:p,forceColorScheme:h,stylesTransform:m,env:v}){const{colorScheme:g,setColorScheme:y,clearColorScheme:b}=function({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const o=(0,f.useRef)(null),[i,a]=(0,f.useState)((()=>e.get(t))),s=r||i,l=(0,f.useCallback)((t=>{r||(O$(t,n),a(t),e.set(t))}),[e.set,s,r]),c=(0,f.useCallback)((()=>{a(t),O$(t,n),e.clear()}),[e.clear,t]);return(0,f.useEffect)((()=>(e.subscribe(l),e.unsubscribe)),[e.subscribe,e.unsubscribe]),KF((()=>{O$(e.get(t),n)}),[]),(0,f.useEffect)((()=>{if(r)return O$(r,n),()=>{};void 0===r&&O$(i,n),"undefined"!=typeof window&&"matchMedia"in window&&(o.current=window.matchMedia("(prefers-color-scheme: dark)"));const e=e=>{"auto"===i&&O$(e.matches?"dark":"light",n)};return o.current?.addEventListener("change",e),()=>o.current?.removeEventListener("change",e)}),[i,r]),{colorScheme:s,setColorScheme:l,clearColorScheme:c}}({defaultColorScheme:u,forceColorScheme:h,manager:c,getRootElement:d});return function({respectReducedMotion:e,getRootElement:t}){KF((()=>{e&&t()?.setAttribute("data-respect-reduced-motion","true")}),[e])}({respectReducedMotion:e?.respectReducedMotion||!1,getRootElement:d}),(0,T.jsx)(YI.Provider,{value:{colorScheme:g,setColorScheme:y,clearColorScheme:b,getRootElement:d,classNamesPrefix:l,getStyleNonce:n,cssVariablesResolver:p,cssVariablesSelector:s,withStaticClasses:r,stylesTransform:m,env:v},children:(0,T.jsxs)(JI,{theme:e,children:[a&&(0,T.jsx)(A$,{cssVariablesSelector:s,deduplicateCssVariables:i}),o&&(0,T.jsx)(x$,{}),t]})})}function j$({onBlur:e,onFocus:t}={}){const n=(0,f.useRef)(null),[r,o]=(0,f.useState)(!1),i=(0,f.useRef)(!1),a=e=>{o(e),i.current=e},s=e=>{i.current||(a(!0),t?.(e))},l=t=>{i.current&&!function(e){return e.currentTarget instanceof HTMLElement&&e.relatedTarget instanceof HTMLElement&&e.currentTarget.contains(e.relatedTarget)}(t)&&(a(!1),e?.(t))};return(0,f.useEffect)((()=>{const e=n.current;if(e)return e.addEventListener("focusin",s),e.addEventListener("focusout",l),()=>{e?.removeEventListener("focusin",s),e?.removeEventListener("focusout",l)}}),[s,l]),{ref:n,focused:r}}A$.displayName="@mantine/CssVariables",function(){const e=console.error;console.error=(...t)=>{t.length>1&&"string"==typeof t[0]&&t[0].toLowerCase().includes("extra attributes from the server")&&"string"==typeof t[1]&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}(),T$.displayName="@mantine/core/MantineProvider";var N$=["className","children","mainTooltip","secondaryTooltip","icon","isSelected","isDisabled","onClick","label","variant"],P$=["className","text","icon","isSelected","mainTooltip","secondaryTooltip","onClick","onMouseEnter"],L$=["className","children"],R$=["className","children","headerText","selected","onFocus","onBlur","tabIndex"],I$=["className","children"],B$=["className","children"],F$=["authorInfo","timeString","edited"],H$=["className","showActions","authorInfo","timeString","edited","actions","children"],z$=["className","autoFocus","onFocus","onBlur","editor","editable"],V$=["className","name","label","icon","value","autoFocus","placeholder","onKeyDown","onChange","onSubmit"],$$=["children","onOpenChange","position","sub"],U$=["children","onOpenChange","position","sub"],G$=["className","children","icon","checked","subTrigger","onClick"],W$=["children","sub"],q$=["className","children","sub"],K$=["className"],Z$=["className","children"],J$=["className","children","icon","onClick","onDragEnd","onDragStart","draggable","label"],X$=["className","tabs","defaultOpenTab","openTab","setOpenTab","loading"],Y$=["className","children","onClick","label"],Q$=["className","accept","value","placeholder","onChange"],eU=["className","children"],tU=["className","value","placeholder","onKeyDown","onChange"],nU=["opened","position","children"],rU=["children"],oU=["className","children","variant"],iU=["className","children"],aU=["className","children","icon","onClick","onDragEnd","onDragStart","draggable","label"],sU=["className","children","id"],lU=["className","children"],cU=["className","isSelected","onClick","item","id"],uU=["className","children"],dU=["className","children"],fU=["className","children","id","columns"],pU=["className","children","columns"],hU=["className","isSelected","onClick","item","id"],mU=["className","children","columns"],vU=["children","className","onMouseDown","onClick"],gU=["className","children","draggable","onDragStart","onDragEnd","style","label"],yU=["className","children","onMouseEnter","onMouseLeave","variant"],bU=["className","items","isDisabled"],kU=["className","theme"];function wU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wU(Object(n),!0).forEach((function(t){CU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function CU(e,t,n){return(t=function(e){var t=function(e){if("object"!=DU(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=DU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==DU(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _U(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_U(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function EU(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function DU(e){return DU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DU(e)}var MU=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function e(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"--bn";for(var i in r){var a=i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),s="".concat(o,"-").concat(a);"object"!=DU(r[i])?("number"==typeof r[i]&&(r[i]="".concat(r[i],"px")),n?t.style.removeProperty(s):t.style.setProperty(s,r[i].toString())):e(r[i],s)}}(e),[]},AU=function(e,t){return MU(e,t)},OU={colors:{editor:{text:void 0,background:void 0},menu:{text:void 0,background:void 0},tooltip:{text:void 0,background:void 0},hovered:{text:void 0,background:void 0},selected:{text:void 0,background:void 0},disabled:{text:void 0,background:void 0},shadow:void 0,border:void 0,sideMenu:void 0,highlights:{gray:{text:void 0,background:void 0},brown:{text:void 0,background:void 0},red:{text:void 0,background:void 0},orange:{text:void 0,background:void 0},yellow:{text:void 0,background:void 0},green:{text:void 0,background:void 0},blue:{text:void 0,background:void 0},purple:{text:void 0,background:void 0},pink:{text:void 0,background:void 0}}},borderRadius:void 0,fontFamily:void 0},TU=function(e){return(0,T.jsxs)(zB,{gap:0,className:"bn-tooltip",children:[(0,T.jsx)(qB,{size:"sm",lineClamp:5,children:e.mainTooltip}),e.secondaryTooltip&&(0,T.jsx)(qB,{size:"xs",lineClamp:5,children:e.secondaryTooltip})]})},jU=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.mainTooltip,i=e.secondaryTooltip,a=e.icon,s=e.isSelected,l=e.isDisabled,c=e.onClick,u=e.label,d=e.variant,p=EU(e,N$);V_(p,!1);var h=SU((0,f.useState)(!1),2),m=h[0],v=h[1],g=r?(0,T.jsx)(xF,xU(xU({"aria-label":u,className:n,onMouseDown:function(e){iE()&&e.currentTarget.focus()},onClick:function(e){v(!0),null==c||c(e)},onPointerLeave:function(){return v(!1)},"aria-pressed":s,"data-selected":s||void 0,"data-test":o?o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1):void 0,size:"compact"===d?"compact-xs":"xs",disabled:l||!1,ref:t},p),{},{children:r})):(0,T.jsx)(jF,xU(xU({className:n,"aria-label":u,onMouseDown:function(e){iE()&&e.currentTarget.focus()},onClick:function(e){v(!0),null==c||c(e)},onPointerLeave:function(){return v(!1)},"aria-pressed":s,"data-selected":s||void 0,"data-test":o?o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1):void 0,size:"compact"===d?20:30,disabled:l||!1,ref:t},p),{},{children:a}));return o?(0,T.jsx)(vH,{disabled:m,withinPortal:!1,label:(0,T.jsx)(TU,{mainTooltip:o,secondaryTooltip:i}),children:g}):g})),NU=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.text,o=e.icon,i=e.isSelected,a=e.mainTooltip,s=e.secondaryTooltip,l=e.onClick,c=e.onMouseEnter;V_(EU(e,P$),!1);var u=SU((0,f.useState)(!1),2),d=u[0],p=u[1],h=(0,T.jsxs)(DH,{className:n,checked:!0===i,wrapperProps:{onMouseEnter:c,onMouseLeave:function(){return p(!1)},onClick:function(e){p(!0),null==l||l(e)}},variant:"light",icon:null,ref:t,children:[(0,T.jsx)("span",{children:o}),(0,T.jsx)("span",{children:r})]});return!a||d?h:(0,T.jsx)(vH,{refProp:"rootRef",withinPortal:!1,label:(0,T.jsx)(TU,{mainTooltip:a,secondaryTooltip:s}),children:h})})),PU=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.children;return V_(EU(e,L$)),(0,T.jsx)(TH,{className:n,ref:t,children:r})})),LU=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.headerText,i=e.selected,a=e.onFocus,s=e.onBlur,l=e.tabIndex;V_(EU(e,R$),!1);var c=(0,f.useRef)(null);return(0,f.useEffect)((function(){var e;i&&(null==(e=c.current)||e.scrollIntoView({behavior:"smooth",block:"center"}))}),[i]),(0,T.jsxs)(UH,{className:oE(n,i?"selected":""),onFocus:a,onBlur:s,tabIndex:l,ref:wL([t,c]),children:[o&&(0,T.jsx)(qB,{className:"bn-header-text",children:o}),r]})})),RU=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.children;return V_(EU(e,I$),!1),(0,T.jsx)(UH.Section,{className:n,ref:t,children:r})})),IU=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.children;return V_(EU(e,B$),!1),(0,T.jsx)(KH,{className:n,label:(0,T.jsx)(qB,{children:r}),ref:t})})),BU=(0,f.forwardRef)((function(e,t){var n=e.authorInfo,r=e.timeString,o=e.edited;return V_(EU(e,F$),!1),"loading"===n?(0,T.jsxs)(TH,{children:[(0,T.jsx)(YH,{height:24,width:24}),(0,T.jsx)("div",{children:(0,T.jsx)(YH,{height:12,width:100})})]}):(0,T.jsxs)(TH,{children:[(0,T.jsx)(uz,{src:n.avatarUrl,alt:n.username,radius:"xl",size:"sm",color:"initials"}),(0,T.jsxs)(qB,{fz:"sm",fw:"bold",children:[n.username,(0,T.jsxs)(qB,{fz:"xs",c:"dimmed",span:!0,ml:"xs",children:[r," ",o&&"(edited)"]})]})]})})),FU=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.showActions,o=(e.authorInfo,e.timeString,e.edited,e.actions),i=e.children,a=EU(e,H$),s=function(){const[e,t]=(0,f.useState)(!1),n=(0,f.useRef)(null),r=(0,f.useCallback)((()=>t(!0)),[]),o=(0,f.useCallback)((()=>t(!1)),[]);return(0,f.useEffect)((()=>{const e=n.current;if(e)return e.addEventListener("mouseenter",r),e.addEventListener("mouseleave",o),()=>{e?.removeEventListener("mouseenter",r),e?.removeEventListener("mouseleave",o)}}),[n.current]),{ref:n,hovered:e}}(),l=s.hovered,c=s.ref,u=j$(),d=u.focused,p=u.ref,h=wL([t,c]);return V_(a,!1),(0,T.jsxs)(TH,{pos:"relative",ref:h,className:n,children:[o&&(!0===r||void 0===r||"hover"===r&&l||d)?(0,T.jsx)(TH,{ref:p,style:{position:"absolute",right:0,top:0,zIndex:10},children:o}):null,(0,T.jsx)(BU,xU({},e)),i]})})),HU=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.autoFocus,o=e.onFocus,i=e.onBlur,a=(e.editor,e.editable);return V_(EU(e,z$),!1),(0,T.jsx)(TG,{autoFocus:r,className:n,editor:e.editor,sideMenu:!1,slashMenu:!1,tableHandles:!1,filePanel:!1,formattingToolbar:!1,editable:a,ref:t,onFocus:o,onBlur:i,children:(0,T.jsx)(XL,{formattingToolbar:zU})})})),zU=function(){var e=KL([]).filter((function(e){return"nestBlockButton"!==e.key&&"unnestBlockButton"!==e.key}));return(0,T.jsx)(ZL,{blockTypeSelectItems:[],children:e})},VU=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.name,o=e.label,i=e.icon,a=e.value,s=e.autoFocus,l=e.placeholder,c=e.onKeyDown,u=e.onChange,d=e.onSubmit;return V_(EU(e,V$)),(0,T.jsx)(Gz,{size:"xs",className:n,ref:t,name:r,label:o,leftSection:i,value:a,autoFocus:s,"data-autofocus":s?"true":void 0,placeholder:l,onKeyDown:c,onChange:u,onSubmit:d})})),$U={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},UU=f.createContext&&f.createContext($U),GU=["attr","size","title"];function WU(){return WU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WU.apply(this,arguments)}function qU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function KU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qU(Object(n),!0).forEach((function(t){ZU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ZU(e,t,n){return t=function(e){var t=function(e){if("object"!=DU(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=DU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==DU(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JU(e){return e&&e.map((function(e,t){return f.createElement(e.tag,KU({key:t},e.attr),JU(e.child))}))}function XU(e){return function(t){return f.createElement(YU,WU({attr:KU({},e.attr)},t),JU(e.child))}}function YU(e){var t=function(t){var n,r=e.attr,o=e.size,i=e.title,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,GU),s=o||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),f.createElement("svg",WU({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,a,{className:n,style:KU(KU({color:e.color||t.color},t.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),i&&f.createElement("title",null,i),e.children)};return void 0!==UU?f.createElement(UU.Consumer,null,(function(e){return t(e)})):t($U)}function QU(e){return XU({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function eG(e){return XU({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(e)}var tG=(0,f.createContext)(void 0),nG=(0,f.forwardRef)((function(e,t){var n=e.children,r=e.onOpenChange,o=e.position;e.sub,V_(EU(e,$$));var i=SU((0,f.useState)(!1),2),a=i[0],s=i[1],l=(0,f.useRef)(null),c=(0,f.useRef)(),u=(0,f.useCallback)((function(){c.current&&clearTimeout(c.current),c.current=setTimeout((function(){s(!1)}),250)}),[]),d=(0,f.useCallback)((function(){c.current&&clearTimeout(c.current),s(!0)}),[]);return(0,T.jsx)(tG.Provider,{value:{onMenuMouseOver:d,onMenuMouseLeave:u},children:(0,T.jsx)(FV.Item,{className:"bn-menu-item bn-mt-sub-menu-item",ref:PF(t,l),onMouseOver:d,onMouseLeave:u,children:(0,T.jsx)(FV,{portalProps:{target:l.current?l.current.parentElement:void 0},middlewares:{flip:!0,shift:!0,inline:!1,size:!0},trigger:"hover",opened:a,onChange:r,position:o,children:n})})})})),rG=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.icon,i=e.checked,a=e.subTrigger,s=e.onClick,l=EU(e,G$);return V_(l,!1),a?(0,T.jsxs)("div",xU(xU({onClick:function(e){e.preventDefault(),e.stopPropagation()},ref:t},l),{},{children:[r,(0,T.jsx)(eG,{size:15})]})):(0,T.jsx)(FV.Item,xU(xU({className:n,ref:t,leftSection:o,rightSection:i?(0,T.jsx)(yH,{size:10}):!1===i?(0,T.jsx)("div",{className:"bn-tick-space"}):null,onClick:s},l),{},{children:r}))})),oG=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.children;e.sub,V_(EU(e,q$));var o=(0,f.useContext)(tG);return(0,T.jsx)(FV.Dropdown,{className:n,ref:t,onMouseOver:null==o?void 0:o.onMenuMouseOver,onMouseLeave:null==o?void 0:o.onMenuMouseLeave,children:r})})),iG=(0,f.forwardRef)((function(e,t){var n=e.className;return V_(EU(e,K$)),(0,T.jsx)(FV.Divider,{className:n,ref:t})})),aG=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.children;return V_(EU(e,Z$)),(0,T.jsx)(FV.Label,{className:n,ref:t,children:r})})),sG=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.icon,i=e.onClick,a=e.onDragEnd,s=e.onDragStart,l=e.draggable,c=e.label,u=EU(e,J$);return V_(u,!1),o?(0,T.jsx)(jF,xU(xU({size:24,className:n,ref:t,onClick:i,onDragEnd:a,onDragStart:s,draggable:l,"aria-label":c},u),{},{children:o})):(0,T.jsx)(xF,xU(xU({className:n,ref:t,onClick:i,onDragEnd:a,onDragStart:s,draggable:l,"aria-label":c},u),{},{children:r}))})),lG=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.tabs,o=e.defaultOpenTab,i=e.openTab,a=e.setOpenTab,s=e.loading;return V_(EU(e,X$)),(0,T.jsx)(TH,{className:n,ref:t,children:(0,T.jsxs)(n$,{value:i,defaultValue:o,onChange:a,children:[s&&(0,T.jsx)(a$,{visible:s}),(0,T.jsx)(n$.List,{children:r.map((function(e){return(0,T.jsx)(n$.Tab,{"data-test":"".concat(e.name.toLowerCase(),"-tab"),value:e.name,children:e.name},e.name)}))}),r.map((function(e){return(0,T.jsx)(n$.Panel,{value:e.name,children:e.tabPanel},e.name)}))]})})})),cG=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.onClick,i=e.label,a=EU(e,Y$);return V_(a),(0,T.jsx)(xF,xU(xU({size:"xs","aria-label":i,className:n,ref:t,onClick:o},a),{},{children:r}))})),uG=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.accept,o=e.value,i=e.placeholder,a=e.onChange,s=EU(e,Q$);return V_(s),(0,T.jsx)(d$,xU({size:"xs",className:n,ref:t,accept:r,value:o,placeholder:i,onChange:a},s))})),dG=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.children;return V_(EU(e,eU)),(0,T.jsx)("div",{className:n,ref:t,children:r})})),fG=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.value,o=e.placeholder,i=e.onKeyDown,a=e.onChange;return V_(EU(e,tU)),(0,T.jsx)(Gz,{size:"xs","data-test":"embed-input",className:n,ref:t,value:r,placeholder:o,onKeyDown:i,onChange:a})})),pG=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.children;return e.variant,V_(EU(e,oU)),(0,T.jsx)(vV,{className:n,ref:t,children:r})})),hG=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.children,o=EU(e,iU);return V_(o,!1),(0,T.jsx)(TH,xU(xU({align:"center",gap:0,className:n,ref:t},o),{},{children:r}))})),mG=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.icon,i=e.onClick,a=e.onDragEnd,s=e.onDragStart,l=e.draggable,c=e.label,u=EU(e,aU);return V_(u,!1),o?(0,T.jsx)(jF,xU(xU({size:24,className:n,ref:t,onClick:i,onDragEnd:a,onDragStart:s,draggable:l,"aria-label":c},u),{},{children:o})):(0,T.jsx)(xF,xU(xU({className:n,ref:t,onClick:i,onDragEnd:a,onDragStart:s,draggable:l,"aria-label":c},u),{},{children:r}))})),vG=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.id;return V_(EU(e,sU)),(0,T.jsx)(zB,{gap:0,className:n,ref:t,id:o,role:"listbox",children:r})})),gG=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.children;return V_(EU(e,lU)),(0,T.jsx)(TH,{className:n,ref:t,children:(0,T.jsx)(TH,{className:"bn-mt-suggestion-menu-item-title",children:r})})})),yG=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.isSelected,o=e.onClick,i=e.item,a=e.id;V_(EU(e,cU));var s=(0,f.useRef)(null);return(0,f.useEffect)((function(){if(s.current&&r){var e=yI(s.current,document.querySelector(".bn-suggestion-menu"));"top"===e?s.current.scrollIntoView(!0):"bottom"===e&&s.current.scrollIntoView(!1)}}),[r]),(0,T.jsxs)(TH,{gap:0,className:n,ref:PF(t,s),id:a,role:"option",onClick:o,"aria-selected":r||void 0,children:[i.icon&&(0,T.jsx)(TH,{className:"bn-mt-suggestion-menu-item-section","data-position":"left",children:i.icon}),(0,T.jsxs)(zB,{gap:0,className:"bn-mt-suggestion-menu-item-body",children:[(0,T.jsx)(qB,{className:"bn-mt-suggestion-menu-item-title",children:i.title}),(0,T.jsx)(qB,{className:"bn-mt-suggestion-menu-item-subtitle",children:i.subtext})]}),i.badge&&(0,T.jsx)(TH,{"data-position":"right",className:"bn-mt-suggestion-menu-item-section",children:(0,T.jsx)(m$,{size:"xs",children:i.badge})})]})})),bG=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.children;return V_(EU(e,uU)),(0,T.jsx)(TH,{className:n,ref:t,children:r})})),kG=(0,f.forwardRef)((function(e,t){var n=e.className;return e.children,V_(EU(e,dU)),(0,T.jsx)(tF,{className:n,type:"dots",ref:t})})),wG=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.id,i=e.columns;return V_(EU(e,fU)),(0,T.jsx)("div",{className:n,style:{gridTemplateColumns:"repeat(".concat(i,", 1fr)")},ref:t,id:o,role:"grid",children:r})})),xG=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.columns;return V_(EU(e,pU)),(0,T.jsx)(TH,{className:n,style:{gridColumn:"1 / ".concat(o+1)},ref:t,children:(0,T.jsx)(TH,{className:"bn-mt-suggestion-menu-item-title",children:r})})})),CG=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.isSelected,o=e.onClick,i=e.item,a=e.id;V_(EU(e,hU));var s=(0,f.useRef)(null);return(0,f.useEffect)((function(){if(s.current&&r){var e=yI(s.current,document.querySelector(".bn-grid-suggestion-menu"));"top"===e?s.current.scrollIntoView(!0):"bottom"===e&&s.current.scrollIntoView(!1)}}),[r]),(0,T.jsx)("div",{className:n,ref:PF(t,s),id:a,role:"option",onClick:o,"aria-selected":r||void 0,children:i.icon})})),SG=(0,f.forwardRef)((function(e,t){var n=e.className,r=(e.children,e.columns);return V_(EU(e,mU)),(0,T.jsx)(tF,{className:n,style:{gridColumn:"1 / ".concat(r+1)},type:"dots",ref:t})})),_G=(0,f.forwardRef)((function(e,t){var n=e.children,r=e.className,o=e.onMouseDown,i=e.onClick,a=EU(e,vU);return V_(a,!1),(0,T.jsx)(xF,xU(xU({className:r,ref:t,onMouseDown:o,onClick:i},a),{},{children:n}))})),EG=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.draggable,i=e.onDragStart,a=e.onDragEnd,s=e.style,l=e.label,c=EU(e,gU);return V_(c,!1),(0,T.jsx)(xF,xU(xU({className:n,ref:t,"aria-label":l,draggable:o,onDragStart:i,onDragEnd:a,style:s},c),{},{children:r}))})),DG=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.children,o=e.onMouseEnter,i=e.onMouseLeave,a=e.variant;V_(EU(e,yU));var s=j$(),l=PF(t,s.ref,lV(s.focused));return(0,T.jsx)(b$,{className:n,ref:l,role:"toolbar",onMouseEnter:o,onMouseLeave:i,gap:"action-toolbar"===a?2:void 0,children:r})})),MG=(0,f.forwardRef)((function(e,t){var n=e.className,r=e.items,o=e.isDisabled;V_(EU(e,bU));var i=r.filter((function(e){return e.isSelected}))[0];return i?(0,T.jsxs)(FV,{withinPortal:!1,transitionProps:{exitDuration:0},disabled:o,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},children:[(0,T.jsx)(FV.Target,{children:(0,T.jsx)(xF,{onMouseDown:function(e){iE()&&e.currentTarget.focus()},leftSection:i.icon,rightSection:(0,T.jsx)(QU,{}),size:"xs",variant:"subtle",disabled:o,children:i.text})}),(0,T.jsx)(FV.Dropdown,{className:n,ref:t,children:r.map((function(e){return(0,T.jsx)(FV.Item,{onClick:e.onClick,leftSection:e.icon,rightSection:e.isSelected?(0,T.jsx)(yH,{size:10,className:"bn-tick-icon"}):(0,T.jsx)("div",{className:"bn-tick-space"}),disabled:e.isDisabled,children:e.text},e.text)}))})]}):null})),AG={FormattingToolbar:{Root:DG,Button:jU,Select:MG},FilePanel:{Root:lG,Button:cG,FileInput:uG,TabPanel:dG,TextInput:fG},GridSuggestionMenu:{Root:wG,Item:CG,EmptyItem:xG,Loader:SG},LinkToolbar:{Root:DG,Button:jU,Select:MG},SideMenu:{Root:hG,Button:mG},SuggestionMenu:{Root:vG,Item:yG,EmptyItem:gG,Label:bG,Loader:kG},TableHandle:{Root:EG,ExtendButton:_G},Generic:{Badge:{Root:NU,Group:PU},Form:{Root:function(e){return(0,T.jsx)("div",{children:e.children})},TextInput:VU},Menu:{Root:function(e){var t=e.children,n=e.onOpenChange,r=e.position,o=e.sub;return V_(EU(e,U$)),o?(0,T.jsx)(nG,xU({},e)):(0,T.jsx)(FV,{withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onChange:n,position:r,children:t})},Trigger:function(e){var t=e.children;return e.sub,V_(EU(e,W$)),(0,T.jsx)(FV.Target,{children:t})},Dropdown:oG,Divider:iG,Label:aG,Item:rG,Button:sG},Popover:{Root:function(e){var t=e.opened,n=e.position,r=e.children;return V_(EU(e,nU)),(0,T.jsx)(xV,{withinPortal:!1,opened:t,position:n,children:r})},Trigger:function(e){var t=e.children;return V_(EU(e,rU)),(0,T.jsx)(yV,{children:t})},Content:pG},Toolbar:{Root:DG,Button:jU,Select:MG}},Comments:{Comment:FU,Editor:HU,Card:LU,CardSection:RU,ExpandSectionsPrompt:IU}},OG={activeClassName:""},TG=function(e){var t=e.className,n=e.theme,r=EU(e,kU),o=tP(),i=WR(),a=(null==o?void 0:o.colorSchemePreference)||i,s=(0,f.useCallback)((function(e){if(e&&(function(e){MU(OU,e,!0)}(e),"object"==DU(n)))return"light"in n&&"dark"in n?void AU(n["dark"===a?"dark":"light"],e):void AU(n,e)}),[a,n]),l="string"==typeof n?n:"no-preference"!==a?a:"light";return(0,T.jsx)(aP.Provider,{value:AG,children:(0,T.jsx)(T$,{theme:OG,cssVariablesSelector:".bn-mantine",getRootElement:function(){},children:(0,T.jsx)(QR,xU(xU({"data-mantine-color-scheme":l,className:oE("bn-mantine",t||""),theme:"object"==DU(n)?void 0:n},r),{},{ref:s}))})})},jG={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},NG=f.createContext&&f.createContext(jG),PG=["attr","size","title"];function LG(){return LG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LG.apply(this,arguments)}function RG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function IG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RG(Object(n),!0).forEach((function(t){BG(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RG(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function BG(e,t,n){return(t="symbol"==typeof(r=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e;var r}function FG(e){return e&&e.map(((e,t)=>f.createElement(e.tag,IG({key:t},e.attr),FG(e.child))))}function HG(e){return t=>f.createElement(zG,LG({attr:IG({},e.attr)},t),FG(e.child))}function zG(e){var t=t=>{var n,{attr:r,size:o,title:i}=e,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,PG),s=o||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),f.createElement("svg",LG({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,a,{className:n,style:IG(IG({color:e.color||t.color},t.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),i&&f.createElement("title",null,i),e.children)};return void 0!==NG?f.createElement(NG.Consumer,null,(e=>t(e))):t(jG)}function VG(e){return HG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z"},child:[]}]})(e)}function $G(e){return HG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{fillRule:"evenodd"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 3v8h8V3H3zm6 6H5V5h4v4zm-6 4v8h8v-8H3zm6 6H5v-4h4v4zm4-16v8h8V3h-8zm6 6h-4V5h4v4zm-6 4v8h8v-8h-8zm6 6h-4v-4h4v4z"},child:[]}]}]})(e)}function UG(e){return HG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 5v14h18V5H3zm5.33 12H5V7h3.33v10zm5.34 0h-3.33V7h3.33v10zM19 17h-3.33V7H19v10z"},child:[]}]})(e)}function GG(e){return HG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 5v14h18V5H3zm4 2v2H5V7h2zm-2 6v-2h2v2H5zm0 2h2v2H5v-2zm14 2H9v-2h10v2zm0-4H9v-2h10v2zm0-4H9V7h10v2z"},child:[]}]})(e)}function WG(e){return HG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 5v14h18V5H3zm5.33 12H5V7h3.33v10zm5.34 0h-3.33v-4h3.33v4zM19 17h-3.33v-4H19v4zm0-6h-8.67V7H19v4z"},child:[]}]})(e)}function qG(e){return HG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2 4v16h20V4H2zm4.5 14H4v-2.5h2.5V18zm0-4.75H4v-2.5h2.5v2.5zm0-4.75H4V6h2.5v2.5zM11 18H8.5v-2.5H11V18zm0-4.75H8.5v-2.5H11v2.5zm0-4.75H8.5V6H11v2.5zm4.5 9.5H13v-2.5h2.5V18zm0-4.75H13v-2.5h2.5v2.5zm0-4.75H13V6h2.5v2.5zM20 18h-2.5v-2.5H20V18zm0-4.75h-2.5v-2.5H20v2.5zm0-4.75h-2.5V6H20v2.5z"},child:[]}]})(e)}var KG=a(3444),ZG={};ZG.styleTagTransform=M(),ZG.setAttributes=S(),ZG.insert=x().bind(null,"head"),ZG.domAPI=k(),ZG.insertStyleElement=E(),y()(KG.A,ZG),KG.A&&KG.A.locals&&KG.A.locals;var JG=function(e){var t=e.target,n=e.groups,r=e.position,o=void 0===r?"bottom-start":r;return React.createElement(FV,{withinPortal:!1,position:o},React.createElement(FV.Target,null,t),React.createElement(FV.Dropdown,null,n&&n.map((function(e){var t=e.title,n=e.values,r=void 0===n?[]:n,o=e.onValueSelected,i=void 0===o?function(e){}:o,a=e.crtValue;return React.createElement(f.Fragment,null,React.createElement(FV.Label,null,t),r&&r.map((function(e){var t=e.icon;return React.createElement(FV.Item,{key:e.value,value:e.value,leftSection:React.createElement(t,{"data-alert-icon-type":e.value}),onClick:function(){return i(e.value)}},React.createElement("span",{style:{fontWeight:e.value===a?"bold":"normal"}},e.title))})))}))))};function XG(e){return XG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XG(e)}function YG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YG(Object(n),!0).forEach((function(t){eW(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YG(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eW(e,t,n){return(t=function(e){var t=function(e){if("object"!=XG(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=XG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==XG(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tW(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var nW=d().requireLib("workspaces"),rW=nW.FilePreview,oW=nW.useRichMetaLine,iW=nW.useRichMetaActions,aW=d().requireLib("hoc").useColumnsFromRegistry,sW=d().requireLib("components").useSorting,lW=d().requireLib("components").ModernSimpleList,cW=(0,f.createContext)({dataModel:d().getInstance().getContextHolder(),entryProps:{handleClicks:function(){}}}),uW=function(e){e.entryProps;var t=e.editor,n=e.block,r=d().getInstance(),o=(0,f.useContext)(cW).dataModel,i=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tW(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tW(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,f.useState)(o&&o.getContextNode()),2),a=i[0],s=i[1];(0,f.useEffect)((function(){var e=function(){return s(o.getContextNode())};return o.observe("context_changed",e),function(){o.stopObserving("context_changed",e)}}),[o]);var l=aW({pydio:r}).columns;l&&l.ajxp_label&&(l.ajxp_label.width="30%");var c=["modern-list","bn-children-list"],u={},p=n.props.display;switch(p){case"compact":c.push("compact-mode");break;case"list":c.push("list-expanded-mode");break;case"grid":c.push("material-list-grid");break;case"detail":c.push("table-mode"),u["data-content-type"]="table";break;case"masonry-160":c.push("masonry-grid","masonry-size-160")}var m=sW({dataModel:o,node:a,defaultSortingInfo:{sortType:"file-natural",attribute:"",direction:"asc"}}),v=m.currentSortingInfo,g=m.handleSortChange,y=[{value:"compact",title:"Compact",icon:qG},{value:"list",title:"Details",icon:GG},{value:"detail",title:"Table",icon:UG},{value:"grid",title:"Grid",icon:$G},{value:"masonry-160",title:"Waterfall",icon:WG}],b=Object.keys(l).filter((function(e){return l[e].sortType})).map((function(e){var t=l[e];return{value:QG(QG({},t),{},{attribute:e}),title:t.label,icon:VG}})),k=(0,f.useCallback)((function(e){var t="grid"===p||"masonry"===p,n=!!e.getMetadata().get("thumbnails")||!!e.getMetadata().get("ImagePreview"),r=!!e.getMetadata().get("Processing"),o="loading"===e.getMetadata().get("local:UploadStatus"),i=e.getMetadata().get("local:UploadProgress");return h().createElement(rW,{loadThumbnail:n&&!r,node:e,processing:r,lightBackground:t,displayLarge:t,mimeFontOverlay:"list"===p,uploading:o,uploadprogress:i})}),[p]),w=iW({pydio:r,dataModel:o,displayMode:p}),x=oW({pydio:r,columns:l});return h().createElement("div",{style:{lineHeight:"1.3em",width:"100%"}},h().createElement("div",{style:{display:"flex"}},h().createElement("h3",{style:{flex:1,fontSize:"1.3em",fontWeight:700,marginBottom:10}},h().createElement("span",{style:{marginRight:6}},"🗂️"),h().createElement("span",{style:{marginRight:6,flex:1}},"Folder Contents")),h().createElement("span",{style:{fontSize:"1rem"}},h().createElement(JG,{groups:[{title:"Display",crtValue:p,values:y,onValueSelected:function(e){e!==n.props.display&&t.updateBlock(n,{type:"childrenList",props:{display:e}})}},{title:"Sort By...",crtValue:v,values:b,onValueSelected:function(e){g(e)}}],target:h().createElement("span",{style:{cursor:"pointer"},className:"mdi mdi-dots-vertical-circle-outline"}),position:"bottom-end"}))),h().createElement(lW,{pydio:r,node:a,dataModel:o,observeNodeReload:!0,className:c.join(" "),displayMode:p,usePlaceHolder:!1,skipParentNavigation:!0,tableKeys:l,sortingInfo:v,handleSortChange:g,additionalAttrs:u,entryRenderIcon:k,entryRenderParentIcon:k,entryRenderFirstLine:function(e){return e.getLabel()},entryRenderSecondLine:"list"===p?x:null,entryRenderActions:"detail"!==p?w:null,tableEntryRenderCell:function(e){return h().createElement("span",null,k(e),e.getLabel())}}))},dW=oI({type:"childrenList",propSchema:{display:{default:"list",values:["list","grid","detail","masonry-160"]}},content:"none"},{render:function(e){return h().createElement(uW,{editor:e.editor,block:e.block})}});const fW=require("pydio/http/api");var pW=a.n(fW),hW=gI({type:"mention",propSchema:{user:{default:"Unknown"}},content:"none"},{render:function(e){return React.createElement("span",{style:{backgroundColor:"#8400ff33",padding:"2px 5px",fontSize:15,borderRadius:5}},"@",e.inlineContent.props.user)}}),mW=function(e){var t=e.editor;return React.createElement(ER,{triggerCharacter:"@",getItems:function(e){return function(e,t){return pW().getRestClient().getIdmApi().listUsers("/",t,!0,0,10).then((function(t){var n=t.Users;return(void 0===n?[]:n).map((function(t){var n=t.Attributes&&t.Attributes.displayName?t.Attributes.displayName:t.Login;return{title:n,onItemClick:function(){e.insertInlineContent([{type:"mention",props:{user:n}}," "])}}}))}))}(t,e)}})};const vW=require("pydio/http/search-api");var gW=a.n(vW);const yW=require("pydio/model/node");var bW=a.n(yW),kW=new(gW())(d().getInstance()),wW=gI({type:"nodeRef",propSchema:{path:{default:""},label:{default:""},repositoryId:{default:""}},content:"none"},{render:function(e){var t=e.inlineContent.props,n=t.path,r=t.repositoryId,o=new(bW())(n);return o.getMetadata().set("repository_id",r),React.createElement("span",{style:{backgroundColor:"#005bff33",padding:"2px 5px",fontSize:15,borderRadius:5,cursor:"pointer"},onClick:function(){return d().getInstance().goTo(o)}},n)}}),xW=function(e){var t=e.editor;return React.createElement(ER,{triggerCharacter:"%",getItems:function(e){return function(e,t){return kW.search({basename:t},"all",10,!0,"mtime",!0).then((function(t){return t.Results.map((function(t){var n=t.getLabel();return{title:React.createElement("span",null,t.getMetadata().get("repository_display")," - ",t.getPath()),onItemClick:function(){e.insertInlineContent([{type:"nodeRef",props:{label:n,path:t.getPath(),repositoryId:t.getMetadata().get("repository_id")}}," "])}}}))}))}(t,e)},minQueryLength:0})};function CW(e){return HG({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12.8659 3.00017L22.3922 19.5002C22.6684 19.9785 22.5045 20.5901 22.0262 20.8662C21.8742 20.954 21.7017 21.0002 21.5262 21.0002H2.47363C1.92135 21.0002 1.47363 20.5525 1.47363 20.0002C1.47363 19.8246 1.51984 19.6522 1.60761 19.5002L11.1339 3.00017C11.41 2.52187 12.0216 2.358 12.4999 2.63414C12.6519 2.72191 12.7782 2.84815 12.8659 3.00017ZM10.9999 16.0002V18.0002H12.9999V16.0002H10.9999ZM10.9999 9.00017V14.0002H12.9999V9.00017H10.9999Z"},child:[]}]})(e)}var SW=a(8077),_W={};_W.styleTagTransform=M(),_W.setAttributes=S(),_W.insert=x().bind(null,"head"),_W.domAPI=k(),_W.insertStyleElement=E(),y()(SW.A,_W),SW.A&&SW.A.locals&&SW.A.locals;var EW=[{title:"Warning",value:"warning",icon:function(e){return HG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"},child:[]}]})(e)},color:"#e69819",backgroundColor:{light:"#fff6e6",dark:"#805d20"}},{title:"Error",value:"error",icon:function(e){return HG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"},child:[]}]})(e)},color:"#d80d0d",backgroundColor:{light:"#ffe6e6",dark:"#802020"}},{title:"Info",value:"info",icon:function(e){return HG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},child:[]}]})(e)},color:"#507aff",backgroundColor:{light:"#e6ebff",dark:"#203380"}},{title:"Success",value:"success",icon:function(e){return HG({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},child:[]}]})(e)},color:"#0bc10b",backgroundColor:{light:"#e6ffe6",dark:"#208020"}}],DW=oI({type:"alert",propSchema:{textAlignment:lE.textAlignment,textColor:lE.textColor,type:{default:"warning",values:["warning","error","info","success"]}},content:"inline"},{render:function(e){var t=EW.find((function(t){return t.value===e.block.props.type})).icon,n=React.createElement("div",{className:"alert-icon-wrapper",contentEditable:!1},React.createElement(t,{className:"alert-icon","data-alert-icon-type":e.block.props.type,size:32}));return React.createElement("div",{className:"alert","data-alert-type":e.block.props.type},React.createElement(JG,{groups:[{title:"Alert Type",values:EW,onValueSelected:function(t){e.editor.updateBlock(e.block,{type:"alert",props:{type:t}})}}],target:n}),React.createElement("div",{className:"inline-content",ref:e.contentRef}))}}),MW=function(e){return{title:"Insert Warning Block",onItemClick:function(){return dM(e,{type:"alert",props:{type:"warning"},content:[{type:"text",text:"",styles:{}}]})},aliases:["alert","al"],group:"Others",icon:React.createElement(CW,{size:18}),subtext:"Capture reader's attention with a warning"}};function AW(){return AW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AW.apply(null,arguments)}var OW=d().requireLib("boot").moment,TW=d().requireLib("components").ButtonMenu,jW=a(7919),NW=oI({type:"title",propSchema:{textAlignment:lE.textAlignment,textColor:lE.textColor},content:"inline"},{render:function(e){var t,n=(0,f.useContext)(cW).dataModel.getContextNode(),r=OW(new Date(1e3*parseInt(n.getMetadata().get("ajxp_modiftime")))).fromNow(),o=d().getInstance().user.getActiveRepositoryObject();n.getMetadata().has("ws_root")&&(t=o.getDescription()||"");var i=d().getInstance(),a=[];""!==n.getPath().replace("/","")&&a.push(React.createElement("span",{className:"segment first",style:{cursor:"pointer"},onClick:function(){return i.goTo("/")}},o.getLabel()));var s="",l=jW.trimLeft(n.getPath(),"/").split("/");return l.pop(),l.forEach((function(e,t){if(e){var n=t===l.length-1,r=s+="/"+e;a.push(React.createElement("span",{key:"bread_sep_"+t,className:"separator"}," / ")),a.push(React.createElement("span",{key:"bread_"+t,style:{cursor:"pointer"},className:"segment"+(n?" last":""),onClick:function(e){e.stopPropagation(),console.log(r),i.goTo(r)}},e))}})),React.createElement("div",{style:{paddingBottom:20}},a&&React.createElement("div",{style:{fontSize:"0.8em"}},a),React.createElement("h1",{style:{fontSize:"2em",fontWeight:700,display:"flex"}},React.createElement("div",{className:"inline-content",style:{flexGrow:"initial"},ref:e.contentRef}),React.createElement(TW,AW({pydio:i},{buttonStyle:{height:30,lineHeight:"26px",marginLeft:6},buttonLabelStyle:{fontSize:20,paddingLeft:6,paddingRight:6}},{id:"create-button-menu-inline",toolbars:["upload","create"],buttonTitle:"+",controller:i.Controller}))),React.createElement("div",{style:{color:"gray"}},t?t+" - ":null,"Created ",r))}});function PW(e){return PW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PW(e)}function LW(){LW=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),s=new O(r||[]);return o(a,"_invoke",{value:E(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function g(){}function y(){}function b(){}var k={};c(k,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(T([])));x&&x!==n&&r.call(x,a)&&(k=x);var C=b.prototype=g.prototype=Object.create(k);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,i,a,s){var l=d(e[o],e,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==PW(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function E(t,n,r){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var l=D(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var c=d(t,n,r);if("normal"===c.type){if(o=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=m,r.method="throw",r.arg=c.arg)}}}function D(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,D(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(PW(t)+" is not iterable")}return y.prototype=b,o(C,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},S(_.prototype),c(_.prototype,s,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(C),c(C,l,"Generator"),c(C,a,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function RW(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function IW(e,t){if(e){if("string"==typeof e)return BW(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?BW(e,t):void 0}}function BW(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function FW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FW(Object(n),!0).forEach((function(t){zW(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FW(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zW(e,t,n){return(t=function(e){var t=function(e){if("object"!=PW(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=PW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==PW(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var VW=mM.create({blockSpecs:HW(HW({},QD),{},{childrenList:dW,alert:DW,title:NW}),inlineContentSpecs:HW(HW({},nM),{},{mention:hW,nodeRef:wW})}),$W=function(e){return[].concat(function(e){return function(e){if(Array.isArray(e))return BW(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||IW(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(_R(e)),[MW(e)])};const UW=function(e){var t,n=e.initialContent,r=void 0===n?[]:n,o=e.onChange,i=e.darkMode,a=e.readOnly,s=e.style,l=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||IW(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,f.useState)(""),2),c=(l[0],l[1],lP({schema:VW,initialContent:r.length?r:null,dictionary:HW(HW({},H_.en),{},{placeholders:HW(HW({},H_.en.placeholders),{},{default:"Type text or '/' for commands, '%' for mentioning a file, '@' for mentioning a user"})})}));return t=h().createElement(TG,{editable:!a,onChange:function(){return o(c.document)},editor:c,theme:i?"dark":"light"},h().createElement(ER,{triggerCharacter:"/",getItems:function(){var e,t=(e=LW().mark((function e(t){return LW().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fM($W(c),t));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){RW(i,r,o,a,s,"next",e)}function s(e){RW(i,r,o,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()}),h().createElement(mW,{editor:c}),h().createElement(xW,{editor:c})),h().createElement("div",{style:HW({flex:1,width:"100%",backgroundColor:"var(--md-sys-color-surface)",paddingTop:20,userSelect:"inherit"},s),onClick:function(e){return e.stopPropagation()},onKeyUp:function(e){return e.stopPropagation()}},t,h().createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:'\n        .bn-container *{\n            white-space: pre-wrap;\n            user-select: text;\n            -webkit-user-select: text;\n        }\n        .bn-editor {\n            background-color:transparent;\n        }\n        .bn-container.bn-readonly table {\n            margin-bottom: 20px;\n        }\n        .bn-container.bn-readonly p.bn-inline-content {\n            min-height: 20px;\n        }\n        .react-mui-context .bn-container h1,\n        .react-mui-context .bn-container h2,\n        .react-mui-context .bn-container h3,\n        .react-mui-context .bn-container h4,\n        .react-mui-context .bn-container h5,\n        .react-mui-context .bn-container h6{\n            font-weight: inherit;\n        }\n        .react-mui-context .bn-container div[role="menu"] {\n            background: var(--bn-colors-menu-background);\n        }\n        .react-mui-context .bn-container div[role="menu"] button {\n            font-size: var(--mantine-font-size-sm);\n        }\n        .ProseMirror-selectednode>.bn-block-content[data-content-type="childrenList"]>*{\n            outline: none;\n        }\n        .tree-icon.mdi.mdi-folder:before {\n            content: \'\\F0DC9\';\n        }\n    '}}))};var GW,WW;function qW(e){return qW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qW(e)}function KW(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eq(r.key),r)}}function ZW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ZW=function(){return!!e})()}function JW(e){return JW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},JW(e)}function XW(e,t){return XW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},XW(e,t)}function YW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QW(e,t,n){return(t=eq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eq(e){var t=function(e){if("object"!=qW(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=qW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==qW(t)?t:t+""}var tq=d().requireLib("hoc").EditorActions,nq=(GW=(0,m.connect)((function(e,t){var n=e.tabs.filter((function(e){var n=e.editorData,r=e.node;return(!n||n.id===t.editorData.id)&&r.getPath()===t.node.getPath()}))[0]||{};return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YW(Object(n),!0).forEach((function(t){QW(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YW(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:n.id,tab:n},t)})),GW(WW=(0,m.connect)(null,tq)(WW=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,r=arguments,n=JW(n=t),function(e,t){if(t&&("object"==qW(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ZW()?Reflect.construct(n,r||[],JW(e).constructor):n.apply(e,r));var e,n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XW(e,t)}(t,e),function(e,t){return t&&KW(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidMount",value:function(){this.loadNode(this.props);var e=this.props.editorModify;this.props.isActive&&e({fixedToolbar:!0})}},{key:"compomentWillReceiveProps",value:function(e){var t=this.props.editorModify;e.isActive&&t({fixedToolbar:!0}),this.props.node!==e.node&&this.loadNode(e)}},{key:"loadNode",value:function(e){var t=this.props,n=t.pydio,r=t.node,o=t.tab,i=t.dispatch,a=o.id;n.ApiClient.getPlainContent(r,(function(e){i(tq.tabModify({id:a,content:e,node:r,loaded:!0}))}))}},{key:"render",value:function(){var e=this.props,t=e.tab,n=e.dispatch,r=e.muiTheme,o=t.id,i=t.content,a=t.loaded,s=t.node,l=[];try{l=(l=JSON.parse(i)).filter((function(e){return"childrenList"!==e.type}))}catch(e){}var c=s.hasMetadataInBranch("node_readonly","true")||s.getMetadata().get("content_lock")&&s.getMetadata().get("content_lock")!==d().getInstance().user.id;return a?h().createElement(UW,{readOnly:c,darkMode:r.darkMode,initialContent:l,onChange:function(e){return n(tq.tabModify({id:o,content:JSON.stringify(e)}))}}):null}}])}(f.Component))||WW)||WW);const rq=nq=(0,v.muiThemeable)()(nq);var oq=d().requireLib("hoc").EditorActions,iq=function(e){var t=e.tab,n=e.dispatch;return function(){return d().getInstance().ApiClient.postPlainTextContent(t.node,t.content,(function(e){n(e?oq.tabModify({id:t.id,message:d().getMessages()[115]}):oq.tabModify({id:t.id,message:d().getMessages()[210]}))}))}};const aq=require("lodash"),sq=require("cells-sdk");function lq(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return cq(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cq(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var uq=function(e,t){var n=lq((0,f.useState)(!1),2),r=n[0],o=n[1],i=lq((0,f.useState)(0),2),a=i[0],s=i[1],l=lq((0,f.useState)(""),2),c=l[0],u=l[1],d=lq((0,f.useState)(!1),2),p=d[0],h=d[1],m=e.isLoaded(),v=e.getMetadata().get("uuid"),g=(0,f.useMemo)((function(){return(0,aq.debounce)((function(e){return function(e,t,n,r){var o=new sq.UserMetaServiceApi(pW().getRestClient()),i=new sq.IdmUpdateUserMetaRequest;i.MetaDatas=[],i.Operation="PUT";var a=new sq.IdmUserMeta;a.NodeUuid=n,a.Namespace=t,a.JsonValue=JSON.stringify(e),a.Policies=[sq.ServiceResourcePolicy.constructFromObject({Action:"READ",Subject:"*",Effect:"allow"}),sq.ServiceResourcePolicy.constructFromObject({Action:"WRITE",Subject:"*",Effect:"allow"})],i.MetaDatas.push(a),o.updateUserMeta(i).then((function(){console.log("Saved to Metadata"),r(!1)})).catch((function(e){console.error("Cannot save metadata",e)}))}(e,t,v,h)}),1500)}),[v]);return(0,f.useEffect)((function(){o(!1),u([]),s(a+1)}),[e,m,v]),(0,f.useEffect)((function(){r||(e&&e.getMetadata().has(t)?(u(e.getMetadata().get(t)),o(!0)):o(!0))}),[r,a]),{loaded:r,content:c,save:g,dirty:p,setDirty:h}},dq=["node","muiTheme"];function fq(){return fq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fq.apply(null,arguments)}var pq=d().requireLib("boot").PydioContextConsumer,hq=d().requireLib("workspaces").InfoPanelCard,mq=function(e){var t,n=e.node,r=e.muiTheme,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,dq),i=uq(n),a=i.content,s=i.loaded,l=i.save;return s?(a&&(t=h().createElement(UW,{readOnly:!1,darkMode:r.darkMode,initialContent:a,onChange:function(e){return l(e)},node:n})),h().createElement(hq,fq({},o,{identifier:"folder-pad",icon:"mdi mdi-history",title:d().getMessages()["bnote.ext"]}),t)):null};const vq=mq=(0,v.muiThemeable)()(pq(mq));function gq(e){return gq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gq(e)}function yq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yq(Object(n),!0).forEach((function(t){kq(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kq(e,t,n){return(t=function(e){var t=function(e){if("object"!=gq(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=gq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==gq(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var xq=d().requireLib("boot").PydioContextConsumer,Cq=d().requireLib("components").useDataModelContextNodeAsItems,Sq=function(e){var t,n,r=e.dataModel,o=e.entryProps,i=e.muiTheme,a=e.style,s=e.contentMeta,l=Cq(r,(function(e){return[]})).node,c=uq(l,s),u=c.content,f=void 0===u?[]:u,p=c.loaded,m=c.save,v=c.dirty,g=c.setDirty;if(l&&l.isLoaded()&&p){var y=l.getMetadata().get("uuid"),b=f||[],k=l.getLabel();l.getMetadata().has("ws_root")&&(k=d().getInstance().user.getActiveRepositoryObject().getLabel()||k);var w=b.find((function(e){return"title"===e.type&&e.content&&e.content.length}));w?w.content[0].text=k:b=[{type:"title",content:[{type:"text",text:k,styles:{}}]}].concat(function(e){return function(e){if(Array.isArray(e))return wq(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return wq(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wq(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(b)),b.find((function(e){return"childrenList"===e.type}))||b.push({type:"childrenList"});var x=y+"#"+(p?"loaded":"loading"),C="true"===l.getMetadata().get("node_readonly");t=h().createElement(UW,{readOnly:C,darkMode:i.darkMode,initialContent:b,onChange:function(e){C||(g(!0),m(e))},key:x}),v&&(n=h().createElement("div",{style:{position:"absolute",top:35,right:50,opacity:.5,fontStyle:"italic",fontSize:14}},"Changes not saved..."))}return h().createElement(cW.Provider,{value:{dataModel:r,entryProps:o}},h().createElement("div",{onDragOver:function(e){e.stopPropagation(),e.preventDefault()},onDragEnter:function(e){e.stopPropagation(),e.preventDefault()},onDragLeave:function(e){e.stopPropagation(),e.preventDefault()},onDrop:function(e){e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length||(e.stopPropagation(),e.preventDefault())},style:bq(bq({},a),{},{position:"relative"})},t,n))};const _q=Sq=(0,v.muiThemeable)()(xq(Sq));window.BlockNote=s})();